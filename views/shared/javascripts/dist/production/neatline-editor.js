!function(e, t) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function(e) {
        if (!e.document) throw new Error("jQuery requires a window with a document");
        return t(e);
    } : t(e);
}("undefined" != typeof window ? window : this, function(e, t) {
    function i(e) {
        var t = "length" in e && e.length, i = Z.type(e);
        return "function" !== i && !Z.isWindow(e) && (!(1 !== e.nodeType || !t) || ("array" === i || 0 === t || "number" == typeof t && t > 0 && t - 1 in e));
    }
    function n(e, t, i) {
        if (Z.isFunction(t)) return Z.grep(e, function(e, n) {
            return !!t.call(e, n, e) !== i;
        });
        if (t.nodeType) return Z.grep(e, function(e) {
            return e === t !== i;
        });
        if ("string" == typeof t) {
            if (re.test(t)) return Z.filter(t, e, i);
            t = Z.filter(t, e);
        }
        return Z.grep(e, function(e) {
            return V.call(t, e) >= 0 !== i;
        });
    }
    function s(e, t) {
        for (;(e = e[t]) && 1 !== e.nodeType; ) ;
        return e;
    }
    function r(e) {
        var t = ue[e] = {};
        return Z.each(e.match(ce) || [], function(e, i) {
            t[i] = !0;
        }), t;
    }
    function o() {
        Y.removeEventListener("DOMContentLoaded", o, !1), e.removeEventListener("load", o, !1), 
        Z.ready();
    }
    function a() {
        Object.defineProperty(this.cache = {}, 0, {
            "get": function() {
                return {};
            }
        }), this.expando = Z.expando + a.uid++;
    }
    function l(e, t, i) {
        var n;
        if (void 0 === i && 1 === e.nodeType) if (n = "data-" + t.replace(ye, "-$1").toLowerCase(), 
        "string" == typeof (i = e.getAttribute(n))) {
            try {
                i = "true" === i || "false" !== i && ("null" === i ? null : +i + "" === i ? +i : ge.test(i) ? Z.parseJSON(i) : i);
            } catch (e) {}
            me.set(e, t, i);
        } else i = void 0;
        return i;
    }
    function h() {
        return !0;
    }
    function c() {
        return !1;
    }
    function u() {
        try {
            return Y.activeElement;
        } catch (e) {}
    }
    function p(e, t) {
        return Z.nodeName(e, "table") && Z.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e;
    }
    function d(e) {
        return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e;
    }
    function f(e) {
        var t = Me.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"), e;
    }
    function m(e, t) {
        for (var i = 0, n = e.length; i < n; i++) fe.set(e[i], "globalEval", !t || fe.get(t[i], "globalEval"));
    }
    function g(e, t) {
        var i, n, s, r, o, a, l, h;
        if (1 === t.nodeType) {
            if (fe.hasData(e) && (r = fe.access(e), o = fe.set(t, r), h = r.events)) {
                delete o.handle, o.events = {};
                for (s in h) for (i = 0, n = h[s].length; i < n; i++) Z.event.add(t, s, h[s][i]);
            }
            me.hasData(e) && (a = me.access(e), l = Z.extend({}, a), me.set(t, l));
        }
    }
    function y(e, t) {
        var i = e.getElementsByTagName ? e.getElementsByTagName(t || "*") : e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
        return void 0 === t || t && Z.nodeName(e, t) ? Z.merge([ e ], i) : i;
    }
    function v(e, t) {
        var i = t.nodeName.toLowerCase();
        "input" === i && be.test(e.type) ? t.checked = e.checked : "input" !== i && "textarea" !== i || (t.defaultValue = e.defaultValue);
    }
    function L(t, i) {
        var n, s = Z(i.createElement(t)).appendTo(i.body), r = e.getDefaultComputedStyle && (n = e.getDefaultComputedStyle(s[0])) ? n.display : Z.css(s[0], "display");
        return s.detach(), r;
    }
    function w(e) {
        var t = Y, i = Re[e];
        return i || ("none" !== (i = L(e, t)) && i || ((t = (Pe = (Pe || Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(), 
        t.close(), i = L(e, t), Pe.detach()), Re[e] = i), i;
    }
    function b(e, t, i) {
        var n, s, r, o, a = e.style;
        return (i = i || ze(e)) && (o = i.getPropertyValue(t) || i[t]), i && ("" !== o || Z.contains(e.ownerDocument, e) || (o = Z.style(e, t)), 
        Be.test(o) && Ie.test(t) && (n = a.width, s = a.minWidth, r = a.maxWidth, a.minWidth = a.maxWidth = a.width = o, 
        o = i.width, a.width = n, a.minWidth = s, a.maxWidth = r)), void 0 !== o ? o + "" : o;
    }
    function C(e, t) {
        return {
            "get": function() {
                if (!e()) return (this.get = t).apply(this, arguments);
                delete this.get;
            }
        };
    }
    function O(e, t) {
        if (t in e) return t;
        for (var i = t[0].toUpperCase() + t.slice(1), n = t, s = Ve.length; s--; ) if ((t = Ve[s] + i) in e) return t;
        return n;
    }
    function S(e, t, i) {
        var n = Ue.exec(t);
        return n ? Math.max(0, n[1] - (i || 0)) + (n[2] || "px") : t;
    }
    function x(e, t, i, n, s) {
        for (var r = i === (n ? "border" : "content") ? 4 : "width" === t ? 1 : 0, o = 0; r < 4; r += 2) "margin" === i && (o += Z.css(e, i + Le[r], !0, s)), 
        n ? ("content" === i && (o -= Z.css(e, "padding" + Le[r], !0, s)), "margin" !== i && (o -= Z.css(e, "border" + Le[r] + "Width", !0, s))) : (o += Z.css(e, "padding" + Le[r], !0, s), 
        "padding" !== i && (o += Z.css(e, "border" + Le[r] + "Width", !0, s)));
        return o;
    }
    function E(e, t, i) {
        var n = !0, s = "width" === t ? e.offsetWidth : e.offsetHeight, r = ze(e), o = "border-box" === Z.css(e, "boxSizing", !1, r);
        if (s <= 0 || null == s) {
            if (((s = b(e, t, r)) < 0 || null == s) && (s = e.style[t]), Be.test(s)) return s;
            n = o && (K.boxSizingReliable() || s === e.style[t]), s = parseFloat(s) || 0;
        }
        return s + x(e, t, i || (o ? "border" : "content"), n, r) + "px";
    }
    function A(e, t) {
        for (var i, n, s, r = [], o = 0, a = e.length; o < a; o++) (n = e[o]).style && (r[o] = fe.get(n, "olddisplay"), 
        i = n.style.display, t ? (r[o] || "none" !== i || (n.style.display = ""), "" === n.style.display && we(n) && (r[o] = fe.access(n, "olddisplay", w(n.nodeName)))) : (s = we(n), 
        "none" === i && s || fe.set(n, "olddisplay", s ? i : Z.css(n, "display"))));
        for (o = 0; o < a; o++) (n = e[o]).style && (t && "none" !== n.style.display && "" !== n.style.display || (n.style.display = t ? r[o] || "" : "none"));
        return e;
    }
    function _(e, t, i, n, s) {
        return new _.prototype.init(e, t, i, n, s);
    }
    function F() {
        return setTimeout(function() {
            je = void 0;
        }), je = Z.now();
    }
    function N(e, t) {
        var i, n = 0, s = {
            "height": e
        };
        for (t = t ? 1 : 0; n < 4; n += 2 - t) s["margin" + (i = Le[n])] = s["padding" + i] = e;
        return t && (s.opacity = s.width = e), s;
    }
    function T(e, t, i) {
        for (var n, s = (Qe[t] || []).concat(Qe["*"]), r = 0, o = s.length; r < o; r++) if (n = s[r].call(i, t, e)) return n;
    }
    function M(e, t) {
        var i, n, s, r, o;
        for (i in e) if (n = Z.camelCase(i), s = t[n], r = e[i], Z.isArray(r) && (s = r[1], 
        r = e[i] = r[0]), i !== n && (e[n] = r, delete e[i]), (o = Z.cssHooks[n]) && "expand" in o) {
            r = o.expand(r), delete e[n];
            for (i in r) i in e || (e[i] = r[i], t[i] = s);
        } else t[n] = s;
    }
    function k(e, t, i) {
        var n, s, r = 0, o = Ze.length, a = Z.Deferred().always(function() {
            delete l.elem;
        }), l = function() {
            if (s) return !1;
            for (var t = je || F(), i = Math.max(0, h.startTime + h.duration - t), n = 1 - (i / h.duration || 0), r = 0, o = h.tweens.length; r < o; r++) h.tweens[r].run(n);
            return a.notifyWith(e, [ h, n, i ]), n < 1 && o ? i : (a.resolveWith(e, [ h ]), 
            !1);
        }, h = a.promise({
            "elem": e,
            "props": Z.extend({}, t),
            "opts": Z.extend(!0, {
                "specialEasing": {}
            }, i),
            "originalProperties": t,
            "originalOptions": i,
            "startTime": je || F(),
            "duration": i.duration,
            "tweens": [],
            "createTween": function(t, i) {
                var n = Z.Tween(e, h.opts, t, i, h.opts.specialEasing[t] || h.opts.easing);
                return h.tweens.push(n), n;
            },
            "stop": function(t) {
                var i = 0, n = t ? h.tweens.length : 0;
                if (s) return this;
                for (s = !0; i < n; i++) h.tweens[i].run(1);
                return t ? a.resolveWith(e, [ h, t ]) : a.rejectWith(e, [ h, t ]), this;
            }
        }), c = h.props;
        for (M(c, h.opts.specialEasing); r < o; r++) if (n = Ze[r].call(h, e, c, h.opts)) return n;
        return Z.map(c, T, h), Z.isFunction(h.opts.start) && h.opts.start.call(e, h), Z.fx.timer(Z.extend(l, {
            "elem": e,
            "anim": h,
            "queue": h.opts.queue
        })), h.progress(h.opts.progress).done(h.opts.done, h.opts.complete).fail(h.opts.fail).always(h.opts.always);
    }
    function D(e) {
        return function(t, i) {
            "string" != typeof t && (i = t, t = "*");
            var n, s = 0, r = t.toLowerCase().match(ce) || [];
            if (Z.isFunction(i)) for (;n = r[s++]; ) "+" === n[0] ? (n = n.slice(1) || "*", 
            (e[n] = e[n] || []).unshift(i)) : (e[n] = e[n] || []).push(i);
        };
    }
    function P(e, t, i, n) {
        function s(a) {
            var l;
            return r[a] = !0, Z.each(e[a] || [], function(e, a) {
                var h = a(t, i, n);
                return "string" != typeof h || o || r[h] ? o ? !(l = h) : void 0 : (t.dataTypes.unshift(h), 
                s(h), !1);
            }), l;
        }
        var r = {}, o = e === ft;
        return s(t.dataTypes[0]) || !r["*"] && s("*");
    }
    function R(e, t) {
        var i, n, s = Z.ajaxSettings.flatOptions || {};
        for (i in t) void 0 !== t[i] && ((s[i] ? e : n || (n = {}))[i] = t[i]);
        return n && Z.extend(!0, e, n), e;
    }
    function I(e, t, i) {
        for (var n, s, r, o, a = e.contents, l = e.dataTypes; "*" === l[0]; ) l.shift(), 
        void 0 === n && (n = e.mimeType || t.getResponseHeader("Content-Type"));
        if (n) for (s in a) if (a[s] && a[s].test(n)) {
            l.unshift(s);
            break;
        }
        if (l[0] in i) r = l[0]; else {
            for (s in i) {
                if (!l[0] || e.converters[s + " " + l[0]]) {
                    r = s;
                    break;
                }
                o || (o = s);
            }
            r = r || o;
        }
        if (r) return r !== l[0] && l.unshift(r), i[r];
    }
    function B(e, t, i, n) {
        var s, r, o, a, l, h = {}, c = e.dataTypes.slice();
        if (c[1]) for (o in e.converters) h[o.toLowerCase()] = e.converters[o];
        for (r = c.shift(); r; ) if (e.responseFields[r] && (i[e.responseFields[r]] = t), 
        !l && n && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = r, r = c.shift()) if ("*" === r) r = l; else if ("*" !== l && l !== r) {
            if (!(o = h[l + " " + r] || h["* " + r])) for (s in h) if ((a = s.split(" "))[1] === r && (o = h[l + " " + a[0]] || h["* " + a[0]])) {
                !0 === o ? o = h[s] : !0 !== h[s] && (r = a[0], c.unshift(a[1]));
                break;
            }
            if (!0 !== o) if (o && e.throws) t = o(t); else try {
                t = o(t);
            } catch (e) {
                return {
                    "state": "parsererror",
                    "error": o ? e : "No conversion from " + l + " to " + r
                };
            }
        }
        return {
            "state": "success",
            "data": t
        };
    }
    function z(e, t, i, n) {
        var s;
        if (Z.isArray(t)) Z.each(t, function(t, s) {
            i || Lt.test(e) ? n(e, s) : z(e + "[" + ("object" == typeof s ? t : "") + "]", s, i, n);
        }); else if (i || "object" !== Z.type(t)) n(e, t); else for (s in t) z(e + "[" + s + "]", t[s], i, n);
    }
    function $(e) {
        return Z.isWindow(e) ? e : 9 === e.nodeType && e.defaultView;
    }
    var U = [], H = U.slice, W = U.concat, G = U.push, V = U.indexOf, j = {}, q = j.toString, X = j.hasOwnProperty, K = {}, Y = e.document, Z = function(e, t) {
        return new Z.fn.init(e, t);
    }, Q = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, J = /^-ms-/, ee = /-([\da-z])/gi, te = function(e, t) {
        return t.toUpperCase();
    };
    Z.fn = Z.prototype = {
        "jquery": "2.1.4",
        "constructor": Z,
        "selector": "",
        "length": 0,
        "toArray": function() {
            return H.call(this);
        },
        "get": function(e) {
            return null != e ? e < 0 ? this[e + this.length] : this[e] : H.call(this);
        },
        "pushStack": function(e) {
            var t = Z.merge(this.constructor(), e);
            return t.prevObject = this, t.context = this.context, t;
        },
        "each": function(e, t) {
            return Z.each(this, e, t);
        },
        "map": function(e) {
            return this.pushStack(Z.map(this, function(t, i) {
                return e.call(t, i, t);
            }));
        },
        "slice": function() {
            return this.pushStack(H.apply(this, arguments));
        },
        "first": function() {
            return this.eq(0);
        },
        "last": function() {
            return this.eq(-1);
        },
        "eq": function(e) {
            var t = this.length, i = +e + (e < 0 ? t : 0);
            return this.pushStack(i >= 0 && i < t ? [ this[i] ] : []);
        },
        "end": function() {
            return this.prevObject || this.constructor(null);
        },
        "push": G,
        "sort": U.sort,
        "splice": U.splice
    }, Z.extend = Z.fn.extend = function() {
        var e, t, i, n, s, r, o = arguments[0] || {}, a = 1, l = arguments.length, h = !1;
        for ("boolean" == typeof o && (h = o, o = arguments[a] || {}, a++), "object" == typeof o || Z.isFunction(o) || (o = {}), 
        a === l && (o = this, a--); a < l; a++) if (null != (e = arguments[a])) for (t in e) i = o[t], 
        o !== (n = e[t]) && (h && n && (Z.isPlainObject(n) || (s = Z.isArray(n))) ? (s ? (s = !1, 
        r = i && Z.isArray(i) ? i : []) : r = i && Z.isPlainObject(i) ? i : {}, o[t] = Z.extend(h, r, n)) : void 0 !== n && (o[t] = n));
        return o;
    }, Z.extend({
        "expando": "jQuery" + ("2.1.4" + Math.random()).replace(/\D/g, ""),
        "isReady": !0,
        "error": function(e) {
            throw new Error(e);
        },
        "noop": function() {},
        "isFunction": function(e) {
            return "function" === Z.type(e);
        },
        "isArray": Array.isArray,
        "isWindow": function(e) {
            return null != e && e === e.window;
        },
        "isNumeric": function(e) {
            return !Z.isArray(e) && e - parseFloat(e) + 1 >= 0;
        },
        "isPlainObject": function(e) {
            return "object" === Z.type(e) && !e.nodeType && !Z.isWindow(e) && !(e.constructor && !X.call(e.constructor.prototype, "isPrototypeOf"));
        },
        "isEmptyObject": function(e) {
            var t;
            for (t in e) return !1;
            return !0;
        },
        "type": function(e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? j[q.call(e)] || "object" : typeof e;
        },
        "globalEval": function(e) {
            var t, i = eval;
            (e = Z.trim(e)) && (1 === e.indexOf("use strict") ? ((t = Y.createElement("script")).text = e, 
            Y.head.appendChild(t).parentNode.removeChild(t)) : i(e));
        },
        "camelCase": function(e) {
            return e.replace(J, "ms-").replace(ee, te);
        },
        "nodeName": function(e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase();
        },
        "each": function(e, t, n) {
            var s = 0, r = e.length, o = i(e);
            if (n) {
                if (o) for (;s < r && !1 !== t.apply(e[s], n); s++) ; else for (s in e) if (!1 === t.apply(e[s], n)) break;
            } else if (o) for (;s < r && !1 !== t.call(e[s], s, e[s]); s++) ; else for (s in e) if (!1 === t.call(e[s], s, e[s])) break;
            return e;
        },
        "trim": function(e) {
            return null == e ? "" : (e + "").replace(Q, "");
        },
        "makeArray": function(e, t) {
            var n = t || [];
            return null != e && (i(Object(e)) ? Z.merge(n, "string" == typeof e ? [ e ] : e) : G.call(n, e)), 
            n;
        },
        "inArray": function(e, t, i) {
            return null == t ? -1 : V.call(t, e, i);
        },
        "merge": function(e, t) {
            for (var i = +t.length, n = 0, s = e.length; n < i; n++) e[s++] = t[n];
            return e.length = s, e;
        },
        "grep": function(e, t, i) {
            for (var n = [], s = 0, r = e.length, o = !i; s < r; s++) !t(e[s], s) !== o && n.push(e[s]);
            return n;
        },
        "map": function(e, t, n) {
            var s, r = 0, o = e.length, a = [];
            if (i(e)) for (;r < o; r++) null != (s = t(e[r], r, n)) && a.push(s); else for (r in e) null != (s = t(e[r], r, n)) && a.push(s);
            return W.apply([], a);
        },
        "guid": 1,
        "proxy": function(e, t) {
            var i, n, s;
            if ("string" == typeof t && (i = e[t], t = e, e = i), Z.isFunction(e)) return n = H.call(arguments, 2), 
            s = function() {
                return e.apply(t || this, n.concat(H.call(arguments)));
            }, s.guid = e.guid = e.guid || Z.guid++, s;
        },
        "now": Date.now,
        "support": K
    }), Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
        j["[object " + t + "]"] = t.toLowerCase();
    });
    var ie = function(e) {
        function t(e, t, i, n) {
            var s, r, o, a, h, u, p, d, f, m;
            if ((t ? t.ownerDocument || t : B) !== N && F(t), t = t || N, i = i || [], a = t.nodeType, 
            "string" != typeof e || !e || 1 !== a && 9 !== a && 11 !== a) return i;
            if (!n && M) {
                if (11 !== a && (s = ge.exec(e))) if (o = s[1]) {
                    if (9 === a) {
                        if (!(r = t.getElementById(o)) || !r.parentNode) return i;
                        if (r.id === o) return i.push(r), i;
                    } else if (t.ownerDocument && (r = t.ownerDocument.getElementById(o)) && R(t, r) && r.id === o) return i.push(r), 
                    i;
                } else {
                    if (s[2]) return Y.apply(i, t.getElementsByTagName(e)), i;
                    if ((o = s[3]) && L.getElementsByClassName) return Y.apply(i, t.getElementsByClassName(o)), 
                    i;
                }
                if (L.qsa && (!k || !k.test(e))) {
                    if (d = p = I, f = t, m = 1 !== a && e, 1 === a && "object" !== t.nodeName.toLowerCase()) {
                        for (u = O(e), (p = t.getAttribute("id")) ? d = p.replace(ve, "\\$&") : t.setAttribute("id", d), 
                        d = "[id='" + d + "'] ", h = u.length; h--; ) u[h] = d + c(u[h]);
                        f = ye.test(e) && l(t.parentNode) || t, m = u.join(",");
                    }
                    if (m) try {
                        return Y.apply(i, f.querySelectorAll(m)), i;
                    } catch (e) {} finally {
                        p || t.removeAttribute("id");
                    }
                }
            }
            return x(e.replace(oe, "$1"), t, i, n);
        }
        function i() {
            function e(i, n) {
                return t.push(i + " ") > w.cacheLength && delete e[t.shift()], e[i + " "] = n;
            }
            var t = [];
            return e;
        }
        function n(e) {
            return e[I] = !0, e;
        }
        function s(e) {
            var t = N.createElement("div");
            try {
                return !!e(t);
            } catch (e) {
                return !1;
            } finally {
                t.parentNode && t.parentNode.removeChild(t), t = null;
            }
        }
        function r(e, t) {
            for (var i = e.split("|"), n = e.length; n--; ) w.attrHandle[i[n]] = t;
        }
        function o(e, t) {
            var i = t && e, n = i && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || V) - (~e.sourceIndex || V);
            if (n) return n;
            if (i) for (;i = i.nextSibling; ) if (i === t) return -1;
            return e ? 1 : -1;
        }
        function a(e) {
            return n(function(t) {
                return t = +t, n(function(i, n) {
                    for (var s, r = e([], i.length, t), o = r.length; o--; ) i[s = r[o]] && (i[s] = !(n[s] = i[s]));
                });
            });
        }
        function l(e) {
            return e && void 0 !== e.getElementsByTagName && e;
        }
        function h() {}
        function c(e) {
            for (var t = 0, i = e.length, n = ""; t < i; t++) n += e[t].value;
            return n;
        }
        function u(e, t, i) {
            var n = t.dir, s = i && "parentNode" === n, r = $++;
            return t.first ? function(t, i, r) {
                for (;t = t[n]; ) if (1 === t.nodeType || s) return e(t, i, r);
            } : function(t, i, o) {
                var a, l, h = [ z, r ];
                if (o) {
                    for (;t = t[n]; ) if ((1 === t.nodeType || s) && e(t, i, o)) return !0;
                } else for (;t = t[n]; ) if (1 === t.nodeType || s) {
                    if (l = t[I] || (t[I] = {}), (a = l[n]) && a[0] === z && a[1] === r) return h[2] = a[2];
                    if (l[n] = h, h[2] = e(t, i, o)) return !0;
                }
            };
        }
        function p(e) {
            return e.length > 1 ? function(t, i, n) {
                for (var s = e.length; s--; ) if (!e[s](t, i, n)) return !1;
                return !0;
            } : e[0];
        }
        function d(e, i, n) {
            for (var s = 0, r = i.length; s < r; s++) t(e, i[s], n);
            return n;
        }
        function f(e, t, i, n, s) {
            for (var r, o = [], a = 0, l = e.length, h = null != t; a < l; a++) (r = e[a]) && (i && !i(r, n, s) || (o.push(r), 
            h && t.push(a)));
            return o;
        }
        function m(e, t, i, s, r, o) {
            return s && !s[I] && (s = m(s)), r && !r[I] && (r = m(r, o)), n(function(n, o, a, l) {
                var h, c, u, p = [], m = [], g = o.length, y = n || d(t || "*", a.nodeType ? [ a ] : a, []), v = !e || !n && t ? y : f(y, p, e, a, l), L = i ? r || (n ? e : g || s) ? [] : o : v;
                if (i && i(v, L, a, l), s) for (h = f(L, m), s(h, [], a, l), c = h.length; c--; ) (u = h[c]) && (L[m[c]] = !(v[m[c]] = u));
                if (n) {
                    if (r || e) {
                        if (r) {
                            for (h = [], c = L.length; c--; ) (u = L[c]) && h.push(v[c] = u);
                            r(null, L = [], h, l);
                        }
                        for (c = L.length; c--; ) (u = L[c]) && (h = r ? Q(n, u) : p[c]) > -1 && (n[h] = !(o[h] = u));
                    }
                } else L = f(L === o ? L.splice(g, L.length) : L), r ? r(null, o, L, l) : Y.apply(o, L);
            });
        }
        function g(e) {
            for (var t, i, n, s = e.length, r = w.relative[e[0].type], o = r || w.relative[" "], a = r ? 1 : 0, l = u(function(e) {
                return e === t;
            }, o, !0), h = u(function(e) {
                return Q(t, e) > -1;
            }, o, !0), d = [ function(e, i, n) {
                var s = !r && (n || i !== E) || ((t = i).nodeType ? l(e, i, n) : h(e, i, n));
                return t = null, s;
            } ]; a < s; a++) if (i = w.relative[e[a].type]) d = [ u(p(d), i) ]; else {
                if ((i = w.filter[e[a].type].apply(null, e[a].matches))[I]) {
                    for (n = ++a; n < s && !w.relative[e[n].type]; n++) ;
                    return m(a > 1 && p(d), a > 1 && c(e.slice(0, a - 1).concat({
                        "value": " " === e[a - 2].type ? "*" : ""
                    })).replace(oe, "$1"), i, a < n && g(e.slice(a, n)), n < s && g(e = e.slice(n)), n < s && c(e));
                }
                d.push(i);
            }
            return p(d);
        }
        function y(e, i) {
            var s = i.length > 0, r = e.length > 0, o = function(n, o, a, l, h) {
                var c, u, p, d = 0, m = "0", g = n && [], y = [], v = E, L = n || r && w.find.TAG("*", h), b = z += null == v ? 1 : Math.random() || .1, C = L.length;
                for (h && (E = o !== N && o); m !== C && null != (c = L[m]); m++) {
                    if (r && c) {
                        for (u = 0; p = e[u++]; ) if (p(c, o, a)) {
                            l.push(c);
                            break;
                        }
                        h && (z = b);
                    }
                    s && ((c = !p && c) && d--, n && g.push(c));
                }
                if (d += m, s && m !== d) {
                    for (u = 0; p = i[u++]; ) p(g, y, o, a);
                    if (n) {
                        if (d > 0) for (;m--; ) g[m] || y[m] || (y[m] = X.call(l));
                        y = f(y);
                    }
                    Y.apply(l, y), h && !n && y.length > 0 && d + i.length > 1 && t.uniqueSort(l);
                }
                return h && (z = b, E = v), g;
            };
            return s ? n(o) : o;
        }
        var v, L, w, b, C, O, S, x, E, A, _, F, N, T, M, k, D, P, R, I = "sizzle" + 1 * new Date(), B = e.document, z = 0, $ = 0, U = i(), H = i(), W = i(), G = function(e, t) {
            return e === t && (_ = !0), 0;
        }, V = 1 << 31, j = {}.hasOwnProperty, q = [], X = q.pop, K = q.push, Y = q.push, Z = q.slice, Q = function(e, t) {
            for (var i = 0, n = e.length; i < n; i++) if (e[i] === t) return i;
            return -1;
        }, J = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", ee = "[\\x20\\t\\r\\n\\f]", te = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", ie = te.replace("w", "w#"), ne = "\\[" + ee + "*(" + te + ")(?:" + ee + "*([*^$|!~]?=)" + ee + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + ie + "))|)" + ee + "*\\]", se = ":(" + te + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + ne + ")*)|.*)\\)|)", re = new RegExp(ee + "+", "g"), oe = new RegExp("^" + ee + "+|((?:^|[^\\\\])(?:\\\\.)*)" + ee + "+$", "g"), ae = new RegExp("^" + ee + "*," + ee + "*"), le = new RegExp("^" + ee + "*([>+~]|" + ee + ")" + ee + "*"), he = new RegExp("=" + ee + "*([^\\]'\"]*?)" + ee + "*\\]", "g"), ce = new RegExp(se), ue = new RegExp("^" + ie + "$"), pe = {
            "ID": new RegExp("^#(" + te + ")"),
            "CLASS": new RegExp("^\\.(" + te + ")"),
            "TAG": new RegExp("^(" + te.replace("w", "w*") + ")"),
            "ATTR": new RegExp("^" + ne),
            "PSEUDO": new RegExp("^" + se),
            "CHILD": new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + ee + "*(even|odd|(([+-]|)(\\d*)n|)" + ee + "*(?:([+-]|)" + ee + "*(\\d+)|))" + ee + "*\\)|)", "i"),
            "bool": new RegExp("^(?:" + J + ")$", "i"),
            "needsContext": new RegExp("^" + ee + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + ee + "*((?:-\\d)?\\d*)" + ee + "*\\)|)(?=[^-]|$)", "i")
        }, de = /^(?:input|select|textarea|button)$/i, fe = /^h\d$/i, me = /^[^{]+\{\s*\[native \w/, ge = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ye = /[+~]/, ve = /'|\\/g, Le = new RegExp("\\\\([\\da-f]{1,6}" + ee + "?|(" + ee + ")|.)", "ig"), we = function(e, t, i) {
            var n = "0x" + t - 65536;
            return n !== n || i ? t : n < 0 ? String.fromCharCode(n + 65536) : String.fromCharCode(n >> 10 | 55296, 1023 & n | 56320);
        }, be = function() {
            F();
        };
        try {
            Y.apply(q = Z.call(B.childNodes), B.childNodes), q[B.childNodes.length].nodeType;
        } catch (e) {
            Y = {
                "apply": q.length ? function(e, t) {
                    K.apply(e, Z.call(t));
                } : function(e, t) {
                    for (var i = e.length, n = 0; e[i++] = t[n++]; ) ;
                    e.length = i - 1;
                }
            };
        }
        L = t.support = {}, C = t.isXML = function(e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return !!t && "HTML" !== t.nodeName;
        }, F = t.setDocument = function(e) {
            var t, i, n = e ? e.ownerDocument || e : B;
            return n !== N && 9 === n.nodeType && n.documentElement ? (N = n, T = n.documentElement, 
            (i = n.defaultView) && i !== i.top && (i.addEventListener ? i.addEventListener("unload", be, !1) : i.attachEvent && i.attachEvent("onunload", be)), 
            M = !C(n), L.attributes = s(function(e) {
                return e.className = "i", !e.getAttribute("className");
            }), L.getElementsByTagName = s(function(e) {
                return e.appendChild(n.createComment("")), !e.getElementsByTagName("*").length;
            }), L.getElementsByClassName = me.test(n.getElementsByClassName), L.getById = s(function(e) {
                return T.appendChild(e).id = I, !n.getElementsByName || !n.getElementsByName(I).length;
            }), L.getById ? (w.find.ID = function(e, t) {
                if (void 0 !== t.getElementById && M) {
                    var i = t.getElementById(e);
                    return i && i.parentNode ? [ i ] : [];
                }
            }, w.filter.ID = function(e) {
                var t = e.replace(Le, we);
                return function(e) {
                    return e.getAttribute("id") === t;
                };
            }) : (delete w.find.ID, w.filter.ID = function(e) {
                var t = e.replace(Le, we);
                return function(e) {
                    var i = void 0 !== e.getAttributeNode && e.getAttributeNode("id");
                    return i && i.value === t;
                };
            }), w.find.TAG = L.getElementsByTagName ? function(e, t) {
                return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : L.qsa ? t.querySelectorAll(e) : void 0;
            } : function(e, t) {
                var i, n = [], s = 0, r = t.getElementsByTagName(e);
                if ("*" === e) {
                    for (;i = r[s++]; ) 1 === i.nodeType && n.push(i);
                    return n;
                }
                return r;
            }, w.find.CLASS = L.getElementsByClassName && function(e, t) {
                if (M) return t.getElementsByClassName(e);
            }, D = [], k = [], (L.qsa = me.test(n.querySelectorAll)) && (s(function(e) {
                T.appendChild(e).innerHTML = "<a id='" + I + "'></a><select id='" + I + "-\f]' msallowcapture=''><option selected=''></option></select>", 
                e.querySelectorAll("[msallowcapture^='']").length && k.push("[*^$]=" + ee + "*(?:''|\"\")"), 
                e.querySelectorAll("[selected]").length || k.push("\\[" + ee + "*(?:value|" + J + ")"), 
                e.querySelectorAll("[id~=" + I + "-]").length || k.push("~="), e.querySelectorAll(":checked").length || k.push(":checked"), 
                e.querySelectorAll("a#" + I + "+*").length || k.push(".#.+[+~]");
            }), s(function(e) {
                var t = n.createElement("input");
                t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && k.push("name" + ee + "*[*^$|!~]?="), 
                e.querySelectorAll(":enabled").length || k.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), 
                k.push(",.*:");
            })), (L.matchesSelector = me.test(P = T.matches || T.webkitMatchesSelector || T.mozMatchesSelector || T.oMatchesSelector || T.msMatchesSelector)) && s(function(e) {
                L.disconnectedMatch = P.call(e, "div"), P.call(e, "[s!='']:x"), D.push("!=", se);
            }), k = k.length && new RegExp(k.join("|")), D = D.length && new RegExp(D.join("|")), 
            t = me.test(T.compareDocumentPosition), R = t || me.test(T.contains) ? function(e, t) {
                var i = 9 === e.nodeType ? e.documentElement : e, n = t && t.parentNode;
                return e === n || !(!n || 1 !== n.nodeType || !(i.contains ? i.contains(n) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(n)));
            } : function(e, t) {
                if (t) for (;t = t.parentNode; ) if (t === e) return !0;
                return !1;
            }, G = t ? function(e, t) {
                if (e === t) return _ = !0, 0;
                var i = !e.compareDocumentPosition - !t.compareDocumentPosition;
                return i || (1 & (i = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !L.sortDetached && t.compareDocumentPosition(e) === i ? e === n || e.ownerDocument === B && R(B, e) ? -1 : t === n || t.ownerDocument === B && R(B, t) ? 1 : A ? Q(A, e) - Q(A, t) : 0 : 4 & i ? -1 : 1);
            } : function(e, t) {
                if (e === t) return _ = !0, 0;
                var i, s = 0, r = e.parentNode, a = t.parentNode, l = [ e ], h = [ t ];
                if (!r || !a) return e === n ? -1 : t === n ? 1 : r ? -1 : a ? 1 : A ? Q(A, e) - Q(A, t) : 0;
                if (r === a) return o(e, t);
                for (i = e; i = i.parentNode; ) l.unshift(i);
                for (i = t; i = i.parentNode; ) h.unshift(i);
                for (;l[s] === h[s]; ) s++;
                return s ? o(l[s], h[s]) : l[s] === B ? -1 : h[s] === B ? 1 : 0;
            }, n) : N;
        }, t.matches = function(e, i) {
            return t(e, null, null, i);
        }, t.matchesSelector = function(e, i) {
            if ((e.ownerDocument || e) !== N && F(e), i = i.replace(he, "='$1']"), L.matchesSelector && M && (!D || !D.test(i)) && (!k || !k.test(i))) try {
                var n = P.call(e, i);
                if (n || L.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n;
            } catch (e) {}
            return t(i, N, null, [ e ]).length > 0;
        }, t.contains = function(e, t) {
            return (e.ownerDocument || e) !== N && F(e), R(e, t);
        }, t.attr = function(e, t) {
            (e.ownerDocument || e) !== N && F(e);
            var i = w.attrHandle[t.toLowerCase()], n = i && j.call(w.attrHandle, t.toLowerCase()) ? i(e, t, !M) : void 0;
            return void 0 !== n ? n : L.attributes || !M ? e.getAttribute(t) : (n = e.getAttributeNode(t)) && n.specified ? n.value : null;
        }, t.error = function(e) {
            throw new Error("Syntax error, unrecognized expression: " + e);
        }, t.uniqueSort = function(e) {
            var t, i = [], n = 0, s = 0;
            if (_ = !L.detectDuplicates, A = !L.sortStable && e.slice(0), e.sort(G), _) {
                for (;t = e[s++]; ) t === e[s] && (n = i.push(s));
                for (;n--; ) e.splice(i[n], 1);
            }
            return A = null, e;
        }, b = t.getText = function(e) {
            var t, i = "", n = 0, s = e.nodeType;
            if (s) {
                if (1 === s || 9 === s || 11 === s) {
                    if ("string" == typeof e.textContent) return e.textContent;
                    for (e = e.firstChild; e; e = e.nextSibling) i += b(e);
                } else if (3 === s || 4 === s) return e.nodeValue;
            } else for (;t = e[n++]; ) i += b(t);
            return i;
        }, (w = t.selectors = {
            "cacheLength": 50,
            "createPseudo": n,
            "match": pe,
            "attrHandle": {},
            "find": {},
            "relative": {
                ">": {
                    "dir": "parentNode",
                    "first": !0
                },
                " ": {
                    "dir": "parentNode"
                },
                "+": {
                    "dir": "previousSibling",
                    "first": !0
                },
                "~": {
                    "dir": "previousSibling"
                }
            },
            "preFilter": {
                "ATTR": function(e) {
                    return e[1] = e[1].replace(Le, we), e[3] = (e[3] || e[4] || e[5] || "").replace(Le, we), 
                    "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4);
                },
                "CHILD": function(e) {
                    return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || t.error(e[0]), 
                    e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && t.error(e[0]), 
                    e;
                },
                "PSEUDO": function(e) {
                    var t, i = !e[6] && e[2];
                    return pe.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : i && ce.test(i) && (t = O(i, !0)) && (t = i.indexOf(")", i.length - t) - i.length) && (e[0] = e[0].slice(0, t), 
                    e[2] = i.slice(0, t)), e.slice(0, 3));
                }
            },
            "filter": {
                "TAG": function(e) {
                    var t = e.replace(Le, we).toLowerCase();
                    return "*" === e ? function() {
                        return !0;
                    } : function(e) {
                        return e.nodeName && e.nodeName.toLowerCase() === t;
                    };
                },
                "CLASS": function(e) {
                    var t = U[e + " "];
                    return t || (t = new RegExp("(^|" + ee + ")" + e + "(" + ee + "|$)")) && U(e, function(e) {
                        return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "");
                    });
                },
                "ATTR": function(e, i, n) {
                    return function(s) {
                        var r = t.attr(s, e);
                        return null == r ? "!=" === i : !i || (r += "", "=" === i ? r === n : "!=" === i ? r !== n : "^=" === i ? n && 0 === r.indexOf(n) : "*=" === i ? n && r.indexOf(n) > -1 : "$=" === i ? n && r.slice(-n.length) === n : "~=" === i ? (" " + r.replace(re, " ") + " ").indexOf(n) > -1 : "|=" === i && (r === n || r.slice(0, n.length + 1) === n + "-"));
                    };
                },
                "CHILD": function(e, t, i, n, s) {
                    var r = "nth" !== e.slice(0, 3), o = "last" !== e.slice(-4), a = "of-type" === t;
                    return 1 === n && 0 === s ? function(e) {
                        return !!e.parentNode;
                    } : function(t, i, l) {
                        var h, c, u, p, d, f, m = r !== o ? "nextSibling" : "previousSibling", g = t.parentNode, y = a && t.nodeName.toLowerCase(), v = !l && !a;
                        if (g) {
                            if (r) {
                                for (;m; ) {
                                    for (u = t; u = u[m]; ) if (a ? u.nodeName.toLowerCase() === y : 1 === u.nodeType) return !1;
                                    f = m = "only" === e && !f && "nextSibling";
                                }
                                return !0;
                            }
                            if (f = [ o ? g.firstChild : g.lastChild ], o && v) {
                                for (d = (h = (c = g[I] || (g[I] = {}))[e] || [])[0] === z && h[1], p = h[0] === z && h[2], 
                                u = d && g.childNodes[d]; u = ++d && u && u[m] || (p = d = 0) || f.pop(); ) if (1 === u.nodeType && ++p && u === t) {
                                    c[e] = [ z, d, p ];
                                    break;
                                }
                            } else if (v && (h = (t[I] || (t[I] = {}))[e]) && h[0] === z) p = h[1]; else for (;(u = ++d && u && u[m] || (p = d = 0) || f.pop()) && ((a ? u.nodeName.toLowerCase() !== y : 1 !== u.nodeType) || !++p || (v && ((u[I] || (u[I] = {}))[e] = [ z, p ]), 
                            u !== t)); ) ;
                            return (p -= s) === n || p % n == 0 && p / n >= 0;
                        }
                    };
                },
                "PSEUDO": function(e, i) {
                    var s, r = w.pseudos[e] || w.setFilters[e.toLowerCase()] || t.error("unsupported pseudo: " + e);
                    return r[I] ? r(i) : r.length > 1 ? (s = [ e, e, "", i ], w.setFilters.hasOwnProperty(e.toLowerCase()) ? n(function(e, t) {
                        for (var n, s = r(e, i), o = s.length; o--; ) e[n = Q(e, s[o])] = !(t[n] = s[o]);
                    }) : function(e) {
                        return r(e, 0, s);
                    }) : r;
                }
            },
            "pseudos": {
                "not": n(function(e) {
                    var t = [], i = [], s = S(e.replace(oe, "$1"));
                    return s[I] ? n(function(e, t, i, n) {
                        for (var r, o = s(e, null, n, []), a = e.length; a--; ) (r = o[a]) && (e[a] = !(t[a] = r));
                    }) : function(e, n, r) {
                        return t[0] = e, s(t, null, r, i), t[0] = null, !i.pop();
                    };
                }),
                "has": n(function(e) {
                    return function(i) {
                        return t(e, i).length > 0;
                    };
                }),
                "contains": n(function(e) {
                    return e = e.replace(Le, we), function(t) {
                        return (t.textContent || t.innerText || b(t)).indexOf(e) > -1;
                    };
                }),
                "lang": n(function(e) {
                    return ue.test(e || "") || t.error("unsupported lang: " + e), e = e.replace(Le, we).toLowerCase(), 
                    function(t) {
                        var i;
                        do {
                            if (i = M ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (i = i.toLowerCase()) === e || 0 === i.indexOf(e + "-");
                        } while ((t = t.parentNode) && 1 === t.nodeType);
                        return !1;
                    };
                }),
                "target": function(t) {
                    var i = e.location && e.location.hash;
                    return i && i.slice(1) === t.id;
                },
                "root": function(e) {
                    return e === T;
                },
                "focus": function(e) {
                    return e === N.activeElement && (!N.hasFocus || N.hasFocus()) && !!(e.type || e.href || ~e.tabIndex);
                },
                "enabled": function(e) {
                    return !1 === e.disabled;
                },
                "disabled": function(e) {
                    return !0 === e.disabled;
                },
                "checked": function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && !!e.checked || "option" === t && !!e.selected;
                },
                "selected": function(e) {
                    return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected;
                },
                "empty": function(e) {
                    for (e = e.firstChild; e; e = e.nextSibling) if (e.nodeType < 6) return !1;
                    return !0;
                },
                "parent": function(e) {
                    return !w.pseudos.empty(e);
                },
                "header": function(e) {
                    return fe.test(e.nodeName);
                },
                "input": function(e) {
                    return de.test(e.nodeName);
                },
                "button": function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && "button" === e.type || "button" === t;
                },
                "text": function(e) {
                    var t;
                    return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase());
                },
                "first": a(function() {
                    return [ 0 ];
                }),
                "last": a(function(e, t) {
                    return [ t - 1 ];
                }),
                "eq": a(function(e, t, i) {
                    return [ i < 0 ? i + t : i ];
                }),
                "even": a(function(e, t) {
                    for (var i = 0; i < t; i += 2) e.push(i);
                    return e;
                }),
                "odd": a(function(e, t) {
                    for (var i = 1; i < t; i += 2) e.push(i);
                    return e;
                }),
                "lt": a(function(e, t, i) {
                    for (var n = i < 0 ? i + t : i; --n >= 0; ) e.push(n);
                    return e;
                }),
                "gt": a(function(e, t, i) {
                    for (var n = i < 0 ? i + t : i; ++n < t; ) e.push(n);
                    return e;
                })
            }
        }).pseudos.nth = w.pseudos.eq;
        for (v in {
            "radio": !0,
            "checkbox": !0,
            "file": !0,
            "password": !0,
            "image": !0
        }) w.pseudos[v] = function(e) {
            return function(t) {
                return "input" === t.nodeName.toLowerCase() && t.type === e;
            };
        }(v);
        for (v in {
            "submit": !0,
            "reset": !0
        }) w.pseudos[v] = function(e) {
            return function(t) {
                var i = t.nodeName.toLowerCase();
                return ("input" === i || "button" === i) && t.type === e;
            };
        }(v);
        return h.prototype = w.filters = w.pseudos, w.setFilters = new h(), O = t.tokenize = function(e, i) {
            var n, s, r, o, a, l, h, c = H[e + " "];
            if (c) return i ? 0 : c.slice(0);
            for (a = e, l = [], h = w.preFilter; a; ) {
                n && !(s = ae.exec(a)) || (s && (a = a.slice(s[0].length) || a), l.push(r = [])), 
                n = !1, (s = le.exec(a)) && (n = s.shift(), r.push({
                    "value": n,
                    "type": s[0].replace(oe, " ")
                }), a = a.slice(n.length));
                for (o in w.filter) !(s = pe[o].exec(a)) || h[o] && !(s = h[o](s)) || (n = s.shift(), 
                r.push({
                    "value": n,
                    "type": o,
                    "matches": s
                }), a = a.slice(n.length));
                if (!n) break;
            }
            return i ? a.length : a ? t.error(e) : H(e, l).slice(0);
        }, S = t.compile = function(e, t) {
            var i, n = [], s = [], r = W[e + " "];
            if (!r) {
                for (t || (t = O(e)), i = t.length; i--; ) (r = g(t[i]))[I] ? n.push(r) : s.push(r);
                (r = W(e, y(s, n))).selector = e;
            }
            return r;
        }, x = t.select = function(e, t, i, n) {
            var s, r, o, a, h, u = "function" == typeof e && e, p = !n && O(e = u.selector || e);
            if (i = i || [], 1 === p.length) {
                if ((r = p[0] = p[0].slice(0)).length > 2 && "ID" === (o = r[0]).type && L.getById && 9 === t.nodeType && M && w.relative[r[1].type]) {
                    if (!(t = (w.find.ID(o.matches[0].replace(Le, we), t) || [])[0])) return i;
                    u && (t = t.parentNode), e = e.slice(r.shift().value.length);
                }
                for (s = pe.needsContext.test(e) ? 0 : r.length; s-- && (o = r[s], !w.relative[a = o.type]); ) if ((h = w.find[a]) && (n = h(o.matches[0].replace(Le, we), ye.test(r[0].type) && l(t.parentNode) || t))) {
                    if (r.splice(s, 1), !(e = n.length && c(r))) return Y.apply(i, n), i;
                    break;
                }
            }
            return (u || S(e, p))(n, t, !M, i, ye.test(e) && l(t.parentNode) || t), i;
        }, L.sortStable = I.split("").sort(G).join("") === I, L.detectDuplicates = !!_, 
        F(), L.sortDetached = s(function(e) {
            return 1 & e.compareDocumentPosition(N.createElement("div"));
        }), s(function(e) {
            return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href");
        }) || r("type|href|height|width", function(e, t, i) {
            if (!i) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2);
        }), L.attributes && s(function(e) {
            return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value");
        }) || r("value", function(e, t, i) {
            if (!i && "input" === e.nodeName.toLowerCase()) return e.defaultValue;
        }), s(function(e) {
            return null == e.getAttribute("disabled");
        }) || r(J, function(e, t, i) {
            var n;
            if (!i) return !0 === e[t] ? t.toLowerCase() : (n = e.getAttributeNode(t)) && n.specified ? n.value : null;
        }), t;
    }(e);
    Z.find = ie, Z.expr = ie.selectors, Z.expr[":"] = Z.expr.pseudos, Z.unique = ie.uniqueSort, 
    Z.text = ie.getText, Z.isXMLDoc = ie.isXML, Z.contains = ie.contains;
    var ne = Z.expr.match.needsContext, se = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, re = /^.[^:#\[\.,]*$/;
    Z.filter = function(e, t, i) {
        var n = t[0];
        return i && (e = ":not(" + e + ")"), 1 === t.length && 1 === n.nodeType ? Z.find.matchesSelector(n, e) ? [ n ] : [] : Z.find.matches(e, Z.grep(t, function(e) {
            return 1 === e.nodeType;
        }));
    }, Z.fn.extend({
        "find": function(e) {
            var t, i = this.length, n = [], s = this;
            if ("string" != typeof e) return this.pushStack(Z(e).filter(function() {
                for (t = 0; t < i; t++) if (Z.contains(s[t], this)) return !0;
            }));
            for (t = 0; t < i; t++) Z.find(e, s[t], n);
            return n = this.pushStack(i > 1 ? Z.unique(n) : n), n.selector = this.selector ? this.selector + " " + e : e, 
            n;
        },
        "filter": function(e) {
            return this.pushStack(n(this, e || [], !1));
        },
        "not": function(e) {
            return this.pushStack(n(this, e || [], !0));
        },
        "is": function(e) {
            return !!n(this, "string" == typeof e && ne.test(e) ? Z(e) : e || [], !1).length;
        }
    });
    var oe, ae = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
    (Z.fn.init = function(e, t) {
        var i, n;
        if (!e) return this;
        if ("string" == typeof e) {
            if (!(i = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [ null, e, null ] : ae.exec(e)) || !i[1] && t) return !t || t.jquery ? (t || oe).find(e) : this.constructor(t).find(e);
            if (i[1]) {
                if (t = t instanceof Z ? t[0] : t, Z.merge(this, Z.parseHTML(i[1], t && t.nodeType ? t.ownerDocument || t : Y, !0)), 
                se.test(i[1]) && Z.isPlainObject(t)) for (i in t) Z.isFunction(this[i]) ? this[i](t[i]) : this.attr(i, t[i]);
                return this;
            }
            return (n = Y.getElementById(i[2])) && n.parentNode && (this.length = 1, this[0] = n), 
            this.context = Y, this.selector = e, this;
        }
        return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : Z.isFunction(e) ? void 0 !== oe.ready ? oe.ready(e) : e(Z) : (void 0 !== e.selector && (this.selector = e.selector, 
        this.context = e.context), Z.makeArray(e, this));
    }).prototype = Z.fn, oe = Z(Y);
    var le = /^(?:parents|prev(?:Until|All))/, he = {
        "children": !0,
        "contents": !0,
        "next": !0,
        "prev": !0
    };
    Z.extend({
        "dir": function(e, t, i) {
            for (var n = [], s = void 0 !== i; (e = e[t]) && 9 !== e.nodeType; ) if (1 === e.nodeType) {
                if (s && Z(e).is(i)) break;
                n.push(e);
            }
            return n;
        },
        "sibling": function(e, t) {
            for (var i = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && i.push(e);
            return i;
        }
    }), Z.fn.extend({
        "has": function(e) {
            var t = Z(e, this), i = t.length;
            return this.filter(function() {
                for (var e = 0; e < i; e++) if (Z.contains(this, t[e])) return !0;
            });
        },
        "closest": function(e, t) {
            for (var i, n = 0, s = this.length, r = [], o = ne.test(e) || "string" != typeof e ? Z(e, t || this.context) : 0; n < s; n++) for (i = this[n]; i && i !== t; i = i.parentNode) if (i.nodeType < 11 && (o ? o.index(i) > -1 : 1 === i.nodeType && Z.find.matchesSelector(i, e))) {
                r.push(i);
                break;
            }
            return this.pushStack(r.length > 1 ? Z.unique(r) : r);
        },
        "index": function(e) {
            return e ? "string" == typeof e ? V.call(Z(e), this[0]) : V.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
        },
        "add": function(e, t) {
            return this.pushStack(Z.unique(Z.merge(this.get(), Z(e, t))));
        },
        "addBack": function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
        }
    }), Z.each({
        "parent": function(e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null;
        },
        "parents": function(e) {
            return Z.dir(e, "parentNode");
        },
        "parentsUntil": function(e, t, i) {
            return Z.dir(e, "parentNode", i);
        },
        "next": function(e) {
            return s(e, "nextSibling");
        },
        "prev": function(e) {
            return s(e, "previousSibling");
        },
        "nextAll": function(e) {
            return Z.dir(e, "nextSibling");
        },
        "prevAll": function(e) {
            return Z.dir(e, "previousSibling");
        },
        "nextUntil": function(e, t, i) {
            return Z.dir(e, "nextSibling", i);
        },
        "prevUntil": function(e, t, i) {
            return Z.dir(e, "previousSibling", i);
        },
        "siblings": function(e) {
            return Z.sibling((e.parentNode || {}).firstChild, e);
        },
        "children": function(e) {
            return Z.sibling(e.firstChild);
        },
        "contents": function(e) {
            return e.contentDocument || Z.merge([], e.childNodes);
        }
    }, function(e, t) {
        Z.fn[e] = function(i, n) {
            var s = Z.map(this, t, i);
            return "Until" !== e.slice(-5) && (n = i), n && "string" == typeof n && (s = Z.filter(n, s)), 
            this.length > 1 && (he[e] || Z.unique(s), le.test(e) && s.reverse()), this.pushStack(s);
        };
    });
    var ce = /\S+/g, ue = {};
    Z.Callbacks = function(e) {
        var t, i, n, s, o, a, l = [], h = !(e = "string" == typeof e ? ue[e] || r(e) : Z.extend({}, e)).once && [], c = function(r) {
            for (t = e.memory && r, i = !0, a = s || 0, s = 0, o = l.length, n = !0; l && a < o; a++) if (!1 === l[a].apply(r[0], r[1]) && e.stopOnFalse) {
                t = !1;
                break;
            }
            n = !1, l && (h ? h.length && c(h.shift()) : t ? l = [] : u.disable());
        }, u = {
            "add": function() {
                if (l) {
                    var i = l.length;
                    !function t(i) {
                        Z.each(i, function(i, n) {
                            var s = Z.type(n);
                            "function" === s ? e.unique && u.has(n) || l.push(n) : n && n.length && "string" !== s && t(n);
                        });
                    }(arguments), n ? o = l.length : t && (s = i, c(t));
                }
                return this;
            },
            "remove": function() {
                return l && Z.each(arguments, function(e, t) {
                    for (var i; (i = Z.inArray(t, l, i)) > -1; ) l.splice(i, 1), n && (i <= o && o--, 
                    i <= a && a--);
                }), this;
            },
            "has": function(e) {
                return e ? Z.inArray(e, l) > -1 : !(!l || !l.length);
            },
            "empty": function() {
                return l = [], o = 0, this;
            },
            "disable": function() {
                return l = h = t = void 0, this;
            },
            "disabled": function() {
                return !l;
            },
            "lock": function() {
                return h = void 0, t || u.disable(), this;
            },
            "locked": function() {
                return !h;
            },
            "fireWith": function(e, t) {
                return !l || i && !h || (t = [ e, (t = t || []).slice ? t.slice() : t ], n ? h.push(t) : c(t)), 
                this;
            },
            "fire": function() {
                return u.fireWith(this, arguments), this;
            },
            "fired": function() {
                return !!i;
            }
        };
        return u;
    }, Z.extend({
        "Deferred": function(e) {
            var t = [ [ "resolve", "done", Z.Callbacks("once memory"), "resolved" ], [ "reject", "fail", Z.Callbacks("once memory"), "rejected" ], [ "notify", "progress", Z.Callbacks("memory") ] ], i = "pending", n = {
                "state": function() {
                    return i;
                },
                "always": function() {
                    return s.done(arguments).fail(arguments), this;
                },
                "then": function() {
                    var e = arguments;
                    return Z.Deferred(function(i) {
                        Z.each(t, function(t, r) {
                            var o = Z.isFunction(e[t]) && e[t];
                            s[r[1]](function() {
                                var e = o && o.apply(this, arguments);
                                e && Z.isFunction(e.promise) ? e.promise().done(i.resolve).fail(i.reject).progress(i.notify) : i[r[0] + "With"](this === n ? i.promise() : this, o ? [ e ] : arguments);
                            });
                        }), e = null;
                    }).promise();
                },
                "promise": function(e) {
                    return null != e ? Z.extend(e, n) : n;
                }
            }, s = {};
            return n.pipe = n.then, Z.each(t, function(e, r) {
                var o = r[2], a = r[3];
                n[r[1]] = o.add, a && o.add(function() {
                    i = a;
                }, t[1 ^ e][2].disable, t[2][2].lock), s[r[0]] = function() {
                    return s[r[0] + "With"](this === s ? n : this, arguments), this;
                }, s[r[0] + "With"] = o.fireWith;
            }), n.promise(s), e && e.call(s, s), s;
        },
        "when": function(e) {
            var t, i, n, s = 0, r = H.call(arguments), o = r.length, a = 1 !== o || e && Z.isFunction(e.promise) ? o : 0, l = 1 === a ? e : Z.Deferred(), h = function(e, i, n) {
                return function(s) {
                    i[e] = this, n[e] = arguments.length > 1 ? H.call(arguments) : s, n === t ? l.notifyWith(i, n) : --a || l.resolveWith(i, n);
                };
            };
            if (o > 1) for (t = new Array(o), i = new Array(o), n = new Array(o); s < o; s++) r[s] && Z.isFunction(r[s].promise) ? r[s].promise().done(h(s, n, r)).fail(l.reject).progress(h(s, i, t)) : --a;
            return a || l.resolveWith(n, r), l.promise();
        }
    });
    var pe;
    Z.fn.ready = function(e) {
        return Z.ready.promise().done(e), this;
    }, Z.extend({
        "isReady": !1,
        "readyWait": 1,
        "holdReady": function(e) {
            e ? Z.readyWait++ : Z.ready(!0);
        },
        "ready": function(e) {
            (!0 === e ? --Z.readyWait : Z.isReady) || (Z.isReady = !0, !0 !== e && --Z.readyWait > 0 || (pe.resolveWith(Y, [ Z ]), 
            Z.fn.triggerHandler && (Z(Y).triggerHandler("ready"), Z(Y).off("ready"))));
        }
    }), Z.ready.promise = function(t) {
        return pe || (pe = Z.Deferred(), "complete" === Y.readyState ? setTimeout(Z.ready) : (Y.addEventListener("DOMContentLoaded", o, !1), 
        e.addEventListener("load", o, !1))), pe.promise(t);
    }, Z.ready.promise();
    var de = Z.access = function(e, t, i, n, s, r, o) {
        var a = 0, l = e.length, h = null == i;
        if ("object" === Z.type(i)) {
            s = !0;
            for (a in i) Z.access(e, t, a, i[a], !0, r, o);
        } else if (void 0 !== n && (s = !0, Z.isFunction(n) || (o = !0), h && (o ? (t.call(e, n), 
        t = null) : (h = t, t = function(e, t, i) {
            return h.call(Z(e), i);
        })), t)) for (;a < l; a++) t(e[a], i, o ? n : n.call(e[a], a, t(e[a], i)));
        return s ? e : h ? t.call(e) : l ? t(e[0], i) : r;
    };
    Z.acceptData = function(e) {
        return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType;
    }, a.uid = 1, a.accepts = Z.acceptData, a.prototype = {
        "key": function(e) {
            if (!a.accepts(e)) return 0;
            var t = {}, i = e[this.expando];
            if (!i) {
                i = a.uid++;
                try {
                    t[this.expando] = {
                        "value": i
                    }, Object.defineProperties(e, t);
                } catch (n) {
                    t[this.expando] = i, Z.extend(e, t);
                }
            }
            return this.cache[i] || (this.cache[i] = {}), i;
        },
        "set": function(e, t, i) {
            var n, s = this.key(e), r = this.cache[s];
            if ("string" == typeof t) r[t] = i; else if (Z.isEmptyObject(r)) Z.extend(this.cache[s], t); else for (n in t) r[n] = t[n];
            return r;
        },
        "get": function(e, t) {
            var i = this.cache[this.key(e)];
            return void 0 === t ? i : i[t];
        },
        "access": function(e, t, i) {
            var n;
            return void 0 === t || t && "string" == typeof t && void 0 === i ? void 0 !== (n = this.get(e, t)) ? n : this.get(e, Z.camelCase(t)) : (this.set(e, t, i), 
            void 0 !== i ? i : t);
        },
        "remove": function(e, t) {
            var i, n, s, r = this.key(e), o = this.cache[r];
            if (void 0 === t) this.cache[r] = {}; else {
                Z.isArray(t) ? n = t.concat(t.map(Z.camelCase)) : (s = Z.camelCase(t), n = t in o ? [ t, s ] : (n = s) in o ? [ n ] : n.match(ce) || []), 
                i = n.length;
                for (;i--; ) delete o[n[i]];
            }
        },
        "hasData": function(e) {
            return !Z.isEmptyObject(this.cache[e[this.expando]] || {});
        },
        "discard": function(e) {
            e[this.expando] && delete this.cache[e[this.expando]];
        }
    };
    var fe = new a(), me = new a(), ge = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, ye = /([A-Z])/g;
    Z.extend({
        "hasData": function(e) {
            return me.hasData(e) || fe.hasData(e);
        },
        "data": function(e, t, i) {
            return me.access(e, t, i);
        },
        "removeData": function(e, t) {
            me.remove(e, t);
        },
        "_data": function(e, t, i) {
            return fe.access(e, t, i);
        },
        "_removeData": function(e, t) {
            fe.remove(e, t);
        }
    }), Z.fn.extend({
        "data": function(e, t) {
            var i, n, s, r = this[0], o = r && r.attributes;
            if (void 0 === e) {
                if (this.length && (s = me.get(r), 1 === r.nodeType && !fe.get(r, "hasDataAttrs"))) {
                    for (i = o.length; i--; ) o[i] && 0 === (n = o[i].name).indexOf("data-") && (n = Z.camelCase(n.slice(5)), 
                    l(r, n, s[n]));
                    fe.set(r, "hasDataAttrs", !0);
                }
                return s;
            }
            return "object" == typeof e ? this.each(function() {
                me.set(this, e);
            }) : de(this, function(t) {
                var i, n = Z.camelCase(e);
                if (r && void 0 === t) {
                    if (void 0 !== (i = me.get(r, e))) return i;
                    if (void 0 !== (i = me.get(r, n))) return i;
                    if (void 0 !== (i = l(r, n, void 0))) return i;
                } else this.each(function() {
                    var i = me.get(this, n);
                    me.set(this, n, t), -1 !== e.indexOf("-") && void 0 !== i && me.set(this, e, t);
                });
            }, null, t, arguments.length > 1, null, !0);
        },
        "removeData": function(e) {
            return this.each(function() {
                me.remove(this, e);
            });
        }
    }), Z.extend({
        "queue": function(e, t, i) {
            var n;
            if (e) return t = (t || "fx") + "queue", n = fe.get(e, t), i && (!n || Z.isArray(i) ? n = fe.access(e, t, Z.makeArray(i)) : n.push(i)), 
            n || [];
        },
        "dequeue": function(e, t) {
            t = t || "fx";
            var i = Z.queue(e, t), n = i.length, s = i.shift(), r = Z._queueHooks(e, t);
            "inprogress" === s && (s = i.shift(), n--), s && ("fx" === t && i.unshift("inprogress"), 
            delete r.stop, s.call(e, function() {
                Z.dequeue(e, t);
            }, r)), !n && r && r.empty.fire();
        },
        "_queueHooks": function(e, t) {
            var i = t + "queueHooks";
            return fe.get(e, i) || fe.access(e, i, {
                "empty": Z.Callbacks("once memory").add(function() {
                    fe.remove(e, [ t + "queue", i ]);
                })
            });
        }
    }), Z.fn.extend({
        "queue": function(e, t) {
            var i = 2;
            return "string" != typeof e && (t = e, e = "fx", i--), arguments.length < i ? Z.queue(this[0], e) : void 0 === t ? this : this.each(function() {
                var i = Z.queue(this, e, t);
                Z._queueHooks(this, e), "fx" === e && "inprogress" !== i[0] && Z.dequeue(this, e);
            });
        },
        "dequeue": function(e) {
            return this.each(function() {
                Z.dequeue(this, e);
            });
        },
        "clearQueue": function(e) {
            return this.queue(e || "fx", []);
        },
        "promise": function(e, t) {
            var i, n = 1, s = Z.Deferred(), r = this, o = this.length, a = function() {
                --n || s.resolveWith(r, [ r ]);
            };
            for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; o--; ) (i = fe.get(r[o], e + "queueHooks")) && i.empty && (n++, 
            i.empty.add(a));
            return a(), s.promise(t);
        }
    });
    var ve = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, Le = [ "Top", "Right", "Bottom", "Left" ], we = function(e, t) {
        return e = t || e, "none" === Z.css(e, "display") || !Z.contains(e.ownerDocument, e);
    }, be = /^(?:checkbox|radio)$/i;
    !function() {
        var e = Y.createDocumentFragment().appendChild(Y.createElement("div")), t = Y.createElement("input");
        t.setAttribute("type", "radio"), t.setAttribute("checked", "checked"), t.setAttribute("name", "t"), 
        e.appendChild(t), K.checkClone = e.cloneNode(!0).cloneNode(!0).lastChild.checked, 
        e.innerHTML = "<textarea>x</textarea>", K.noCloneChecked = !!e.cloneNode(!0).lastChild.defaultValue;
    }();
    K.focusinBubbles = "onfocusin" in e;
    var Ce = /^key/, Oe = /^(?:mouse|pointer|contextmenu)|click/, Se = /^(?:focusinfocus|focusoutblur)$/, xe = /^([^.]*)(?:\.(.+)|)$/;
    Z.event = {
        "global": {},
        "add": function(e, t, i, n, s) {
            var r, o, a, l, h, c, u, p, d, f, m, g = fe.get(e);
            if (g) for (i.handler && (i = (r = i).handler, s = r.selector), i.guid || (i.guid = Z.guid++), 
            (l = g.events) || (l = g.events = {}), (o = g.handle) || (o = g.handle = function(t) {
                return void 0 !== Z && Z.event.triggered !== t.type ? Z.event.dispatch.apply(e, arguments) : void 0;
            }), h = (t = (t || "").match(ce) || [ "" ]).length; h--; ) d = m = (a = xe.exec(t[h]) || [])[1], 
            f = (a[2] || "").split(".").sort(), d && (u = Z.event.special[d] || {}, d = (s ? u.delegateType : u.bindType) || d, 
            u = Z.event.special[d] || {}, c = Z.extend({
                "type": d,
                "origType": m,
                "data": n,
                "handler": i,
                "guid": i.guid,
                "selector": s,
                "needsContext": s && Z.expr.match.needsContext.test(s),
                "namespace": f.join(".")
            }, r), (p = l[d]) || ((p = l[d] = []).delegateCount = 0, u.setup && !1 !== u.setup.call(e, n, f, o) || e.addEventListener && e.addEventListener(d, o, !1)), 
            u.add && (u.add.call(e, c), c.handler.guid || (c.handler.guid = i.guid)), s ? p.splice(p.delegateCount++, 0, c) : p.push(c), 
            Z.event.global[d] = !0);
        },
        "remove": function(e, t, i, n, s) {
            var r, o, a, l, h, c, u, p, d, f, m, g = fe.hasData(e) && fe.get(e);
            if (g && (l = g.events)) {
                for (h = (t = (t || "").match(ce) || [ "" ]).length; h--; ) if (a = xe.exec(t[h]) || [], 
                d = m = a[1], f = (a[2] || "").split(".").sort(), d) {
                    for (u = Z.event.special[d] || {}, p = l[d = (n ? u.delegateType : u.bindType) || d] || [], 
                    a = a[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"), o = r = p.length; r--; ) c = p[r], 
                    !s && m !== c.origType || i && i.guid !== c.guid || a && !a.test(c.namespace) || n && n !== c.selector && ("**" !== n || !c.selector) || (p.splice(r, 1), 
                    c.selector && p.delegateCount--, u.remove && u.remove.call(e, c));
                    o && !p.length && (u.teardown && !1 !== u.teardown.call(e, f, g.handle) || Z.removeEvent(e, d, g.handle), 
                    delete l[d]);
                } else for (d in l) Z.event.remove(e, d + t[h], i, n, !0);
                Z.isEmptyObject(l) && (delete g.handle, fe.remove(e, "events"));
            }
        },
        "trigger": function(t, i, n, s) {
            var r, o, a, l, h, c, u, p = [ n || Y ], d = X.call(t, "type") ? t.type : t, f = X.call(t, "namespace") ? t.namespace.split(".") : [];
            if (o = a = n = n || Y, 3 !== n.nodeType && 8 !== n.nodeType && !Se.test(d + Z.event.triggered) && (d.indexOf(".") >= 0 && (d = (f = d.split(".")).shift(), 
            f.sort()), h = d.indexOf(":") < 0 && "on" + d, t = t[Z.expando] ? t : new Z.Event(d, "object" == typeof t && t), 
            t.isTrigger = s ? 2 : 3, t.namespace = f.join("."), t.namespace_re = t.namespace ? new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, 
            t.result = void 0, t.target || (t.target = n), i = null == i ? [ t ] : Z.makeArray(i, [ t ]), 
            u = Z.event.special[d] || {}, s || !u.trigger || !1 !== u.trigger.apply(n, i))) {
                if (!s && !u.noBubble && !Z.isWindow(n)) {
                    for (l = u.delegateType || d, Se.test(l + d) || (o = o.parentNode); o; o = o.parentNode) p.push(o), 
                    a = o;
                    a === (n.ownerDocument || Y) && p.push(a.defaultView || a.parentWindow || e);
                }
                for (r = 0; (o = p[r++]) && !t.isPropagationStopped(); ) t.type = r > 1 ? l : u.bindType || d, 
                (c = (fe.get(o, "events") || {})[t.type] && fe.get(o, "handle")) && c.apply(o, i), 
                (c = h && o[h]) && c.apply && Z.acceptData(o) && (t.result = c.apply(o, i), !1 === t.result && t.preventDefault());
                return t.type = d, s || t.isDefaultPrevented() || u._default && !1 !== u._default.apply(p.pop(), i) || !Z.acceptData(n) || h && Z.isFunction(n[d]) && !Z.isWindow(n) && ((a = n[h]) && (n[h] = null), 
                Z.event.triggered = d, n[d](), Z.event.triggered = void 0, a && (n[h] = a)), t.result;
            }
        },
        "dispatch": function(e) {
            e = Z.event.fix(e);
            var t, i, n, s, r, o = [], a = H.call(arguments), l = (fe.get(this, "events") || {})[e.type] || [], h = Z.event.special[e.type] || {};
            if (a[0] = e, e.delegateTarget = this, !h.preDispatch || !1 !== h.preDispatch.call(this, e)) {
                for (o = Z.event.handlers.call(this, e, l), t = 0; (s = o[t++]) && !e.isPropagationStopped(); ) for (e.currentTarget = s.elem, 
                i = 0; (r = s.handlers[i++]) && !e.isImmediatePropagationStopped(); ) e.namespace_re && !e.namespace_re.test(r.namespace) || (e.handleObj = r, 
                e.data = r.data, void 0 !== (n = ((Z.event.special[r.origType] || {}).handle || r.handler).apply(s.elem, a)) && !1 === (e.result = n) && (e.preventDefault(), 
                e.stopPropagation()));
                return h.postDispatch && h.postDispatch.call(this, e), e.result;
            }
        },
        "handlers": function(e, t) {
            var i, n, s, r, o = [], a = t.delegateCount, l = e.target;
            if (a && l.nodeType && (!e.button || "click" !== e.type)) for (;l !== this; l = l.parentNode || this) if (!0 !== l.disabled || "click" !== e.type) {
                for (n = [], i = 0; i < a; i++) void 0 === n[s = (r = t[i]).selector + " "] && (n[s] = r.needsContext ? Z(s, this).index(l) >= 0 : Z.find(s, this, null, [ l ]).length), 
                n[s] && n.push(r);
                n.length && o.push({
                    "elem": l,
                    "handlers": n
                });
            }
            return a < t.length && o.push({
                "elem": this,
                "handlers": t.slice(a)
            }), o;
        },
        "props": "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        "fixHooks": {},
        "keyHooks": {
            "props": "char charCode key keyCode".split(" "),
            "filter": function(e, t) {
                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), 
                e;
            }
        },
        "mouseHooks": {
            "props": "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            "filter": function(e, t) {
                var i, n, s, r = t.button;
                return null == e.pageX && null != t.clientX && (n = (i = e.target.ownerDocument || Y).documentElement, 
                s = i.body, e.pageX = t.clientX + (n && n.scrollLeft || s && s.scrollLeft || 0) - (n && n.clientLeft || s && s.clientLeft || 0), 
                e.pageY = t.clientY + (n && n.scrollTop || s && s.scrollTop || 0) - (n && n.clientTop || s && s.clientTop || 0)), 
                e.which || void 0 === r || (e.which = 1 & r ? 1 : 2 & r ? 3 : 4 & r ? 2 : 0), e;
            }
        },
        "fix": function(e) {
            if (e[Z.expando]) return e;
            var t, i, n, s = e.type, r = e, o = this.fixHooks[s];
            for (o || (this.fixHooks[s] = o = Oe.test(s) ? this.mouseHooks : Ce.test(s) ? this.keyHooks : {}), 
            n = o.props ? this.props.concat(o.props) : this.props, e = new Z.Event(r), t = n.length; t--; ) e[i = n[t]] = r[i];
            return e.target || (e.target = Y), 3 === e.target.nodeType && (e.target = e.target.parentNode), 
            o.filter ? o.filter(e, r) : e;
        },
        "special": {
            "load": {
                "noBubble": !0
            },
            "focus": {
                "trigger": function() {
                    if (this !== u() && this.focus) return this.focus(), !1;
                },
                "delegateType": "focusin"
            },
            "blur": {
                "trigger": function() {
                    if (this === u() && this.blur) return this.blur(), !1;
                },
                "delegateType": "focusout"
            },
            "click": {
                "trigger": function() {
                    if ("checkbox" === this.type && this.click && Z.nodeName(this, "input")) return this.click(), 
                    !1;
                },
                "_default": function(e) {
                    return Z.nodeName(e.target, "a");
                }
            },
            "beforeunload": {
                "postDispatch": function(e) {
                    void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result);
                }
            }
        },
        "simulate": function(e, t, i, n) {
            var s = Z.extend(new Z.Event(), i, {
                "type": e,
                "isSimulated": !0,
                "originalEvent": {}
            });
            n ? Z.event.trigger(s, null, t) : Z.event.dispatch.call(t, s), s.isDefaultPrevented() && i.preventDefault();
        }
    }, Z.removeEvent = function(e, t, i) {
        e.removeEventListener && e.removeEventListener(t, i, !1);
    }, Z.Event = function(e, t) {
        if (!(this instanceof Z.Event)) return new Z.Event(e, t);
        e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? h : c) : this.type = e, 
        t && Z.extend(this, t), this.timeStamp = e && e.timeStamp || Z.now(), this[Z.expando] = !0;
    }, Z.Event.prototype = {
        "isDefaultPrevented": c,
        "isPropagationStopped": c,
        "isImmediatePropagationStopped": c,
        "preventDefault": function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = h, e && e.preventDefault && e.preventDefault();
        },
        "stopPropagation": function() {
            var e = this.originalEvent;
            this.isPropagationStopped = h, e && e.stopPropagation && e.stopPropagation();
        },
        "stopImmediatePropagation": function() {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = h, e && e.stopImmediatePropagation && e.stopImmediatePropagation(), 
            this.stopPropagation();
        }
    }, Z.each({
        "mouseenter": "mouseover",
        "mouseleave": "mouseout",
        "pointerenter": "pointerover",
        "pointerleave": "pointerout"
    }, function(e, t) {
        Z.event.special[e] = {
            "delegateType": t,
            "bindType": t,
            "handle": function(e) {
                var i, n = this, s = e.relatedTarget, r = e.handleObj;
                return s && (s === n || Z.contains(n, s)) || (e.type = r.origType, i = r.handler.apply(this, arguments), 
                e.type = t), i;
            }
        };
    }), K.focusinBubbles || Z.each({
        "focus": "focusin",
        "blur": "focusout"
    }, function(e, t) {
        var i = function(e) {
            Z.event.simulate(t, e.target, Z.event.fix(e), !0);
        };
        Z.event.special[t] = {
            "setup": function() {
                var n = this.ownerDocument || this, s = fe.access(n, t);
                s || n.addEventListener(e, i, !0), fe.access(n, t, (s || 0) + 1);
            },
            "teardown": function() {
                var n = this.ownerDocument || this, s = fe.access(n, t) - 1;
                s ? fe.access(n, t, s) : (n.removeEventListener(e, i, !0), fe.remove(n, t));
            }
        };
    }), Z.fn.extend({
        "on": function(e, t, i, n, s) {
            var r, o;
            if ("object" == typeof e) {
                "string" != typeof t && (i = i || t, t = void 0);
                for (o in e) this.on(o, t, i, e[o], s);
                return this;
            }
            if (null == i && null == n ? (n = t, i = t = void 0) : null == n && ("string" == typeof t ? (n = i, 
            i = void 0) : (n = i, i = t, t = void 0)), !1 === n) n = c; else if (!n) return this;
            return 1 === s && (r = n, (n = function(e) {
                return Z().off(e), r.apply(this, arguments);
            }).guid = r.guid || (r.guid = Z.guid++)), this.each(function() {
                Z.event.add(this, e, n, i, t);
            });
        },
        "one": function(e, t, i, n) {
            return this.on(e, t, i, n, 1);
        },
        "off": function(e, t, i) {
            var n, s;
            if (e && e.preventDefault && e.handleObj) return n = e.handleObj, Z(e.delegateTarget).off(n.namespace ? n.origType + "." + n.namespace : n.origType, n.selector, n.handler), 
            this;
            if ("object" == typeof e) {
                for (s in e) this.off(s, t, e[s]);
                return this;
            }
            return !1 !== t && "function" != typeof t || (i = t, t = void 0), !1 === i && (i = c), 
            this.each(function() {
                Z.event.remove(this, e, i, t);
            });
        },
        "trigger": function(e, t) {
            return this.each(function() {
                Z.event.trigger(e, t, this);
            });
        },
        "triggerHandler": function(e, t) {
            var i = this[0];
            if (i) return Z.event.trigger(e, t, i, !0);
        }
    });
    var Ee = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, Ae = /<([\w:]+)/, _e = /<|&#?\w+;/, Fe = /<(?:script|style|link)/i, Ne = /checked\s*(?:[^=]|=\s*.checked.)/i, Te = /^$|\/(?:java|ecma)script/i, Me = /^true\/(.*)/, ke = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, De = {
        "option": [ 1, "<select multiple='multiple'>", "</select>" ],
        "thead": [ 1, "<table>", "</table>" ],
        "col": [ 2, "<table><colgroup>", "</colgroup></table>" ],
        "tr": [ 2, "<table><tbody>", "</tbody></table>" ],
        "td": [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        "_default": [ 0, "", "" ]
    };
    De.optgroup = De.option, De.tbody = De.tfoot = De.colgroup = De.caption = De.thead, 
    De.th = De.td, Z.extend({
        "clone": function(e, t, i) {
            var n, s, r, o, a = e.cloneNode(!0), l = Z.contains(e.ownerDocument, e);
            if (!(K.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || Z.isXMLDoc(e))) for (o = y(a), 
            n = 0, s = (r = y(e)).length; n < s; n++) v(r[n], o[n]);
            if (t) if (i) for (r = r || y(e), o = o || y(a), n = 0, s = r.length; n < s; n++) g(r[n], o[n]); else g(e, a);
            return (o = y(a, "script")).length > 0 && m(o, !l && y(e, "script")), a;
        },
        "buildFragment": function(e, t, i, n) {
            for (var s, r, o, a, l, h, c = t.createDocumentFragment(), u = [], p = 0, d = e.length; p < d; p++) if ((s = e[p]) || 0 === s) if ("object" === Z.type(s)) Z.merge(u, s.nodeType ? [ s ] : s); else if (_e.test(s)) {
                for (r = r || c.appendChild(t.createElement("div")), o = (Ae.exec(s) || [ "", "" ])[1].toLowerCase(), 
                a = De[o] || De._default, r.innerHTML = a[1] + s.replace(Ee, "<$1></$2>") + a[2], 
                h = a[0]; h--; ) r = r.lastChild;
                Z.merge(u, r.childNodes), (r = c.firstChild).textContent = "";
            } else u.push(t.createTextNode(s));
            for (c.textContent = "", p = 0; s = u[p++]; ) if ((!n || -1 === Z.inArray(s, n)) && (l = Z.contains(s.ownerDocument, s), 
            r = y(c.appendChild(s), "script"), l && m(r), i)) for (h = 0; s = r[h++]; ) Te.test(s.type || "") && i.push(s);
            return c;
        },
        "cleanData": function(e) {
            for (var t, i, n, s, r = Z.event.special, o = 0; void 0 !== (i = e[o]); o++) {
                if (Z.acceptData(i) && (s = i[fe.expando]) && (t = fe.cache[s])) {
                    if (t.events) for (n in t.events) r[n] ? Z.event.remove(i, n) : Z.removeEvent(i, n, t.handle);
                    fe.cache[s] && delete fe.cache[s];
                }
                delete me.cache[i[me.expando]];
            }
        }
    }), Z.fn.extend({
        "text": function(e) {
            return de(this, function(e) {
                return void 0 === e ? Z.text(this) : this.empty().each(function() {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e);
                });
            }, null, e, arguments.length);
        },
        "append": function() {
            return this.domManip(arguments, function(e) {
                1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || p(this, e).appendChild(e);
            });
        },
        "prepend": function() {
            return this.domManip(arguments, function(e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = p(this, e);
                    t.insertBefore(e, t.firstChild);
                }
            });
        },
        "before": function() {
            return this.domManip(arguments, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this);
            });
        },
        "after": function() {
            return this.domManip(arguments, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling);
            });
        },
        "remove": function(e, t) {
            for (var i, n = e ? Z.filter(e, this) : this, s = 0; null != (i = n[s]); s++) t || 1 !== i.nodeType || Z.cleanData(y(i)), 
            i.parentNode && (t && Z.contains(i.ownerDocument, i) && m(y(i, "script")), i.parentNode.removeChild(i));
            return this;
        },
        "empty": function() {
            for (var e, t = 0; null != (e = this[t]); t++) 1 === e.nodeType && (Z.cleanData(y(e, !1)), 
            e.textContent = "");
            return this;
        },
        "clone": function(e, t) {
            return e = null != e && e, t = null == t ? e : t, this.map(function() {
                return Z.clone(this, e, t);
            });
        },
        "html": function(e) {
            return de(this, function(e) {
                var t = this[0] || {}, i = 0, n = this.length;
                if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
                if ("string" == typeof e && !Fe.test(e) && !De[(Ae.exec(e) || [ "", "" ])[1].toLowerCase()]) {
                    e = e.replace(Ee, "<$1></$2>");
                    try {
                        for (;i < n; i++) 1 === (t = this[i] || {}).nodeType && (Z.cleanData(y(t, !1)), 
                        t.innerHTML = e);
                        t = 0;
                    } catch (e) {}
                }
                t && this.empty().append(e);
            }, null, e, arguments.length);
        },
        "replaceWith": function() {
            var e = arguments[0];
            return this.domManip(arguments, function(t) {
                e = this.parentNode, Z.cleanData(y(this)), e && e.replaceChild(t, this);
            }), e && (e.length || e.nodeType) ? this : this.remove();
        },
        "detach": function(e) {
            return this.remove(e, !0);
        },
        "domManip": function(e, t) {
            e = W.apply([], e);
            var i, n, s, r, o, a, l = 0, h = this.length, c = this, u = h - 1, p = e[0], m = Z.isFunction(p);
            if (m || h > 1 && "string" == typeof p && !K.checkClone && Ne.test(p)) return this.each(function(i) {
                var n = c.eq(i);
                m && (e[0] = p.call(this, i, n.html())), n.domManip(e, t);
            });
            if (h && (i = Z.buildFragment(e, this[0].ownerDocument, !1, this), n = i.firstChild, 
            1 === i.childNodes.length && (i = n), n)) {
                for (r = (s = Z.map(y(i, "script"), d)).length; l < h; l++) o = i, l !== u && (o = Z.clone(o, !0, !0), 
                r && Z.merge(s, y(o, "script"))), t.call(this[l], o, l);
                if (r) for (a = s[s.length - 1].ownerDocument, Z.map(s, f), l = 0; l < r; l++) o = s[l], 
                Te.test(o.type || "") && !fe.access(o, "globalEval") && Z.contains(a, o) && (o.src ? Z._evalUrl && Z._evalUrl(o.src) : Z.globalEval(o.textContent.replace(ke, "")));
            }
            return this;
        }
    }), Z.each({
        "appendTo": "append",
        "prependTo": "prepend",
        "insertBefore": "before",
        "insertAfter": "after",
        "replaceAll": "replaceWith"
    }, function(e, t) {
        Z.fn[e] = function(e) {
            for (var i, n = [], s = Z(e), r = s.length - 1, o = 0; o <= r; o++) i = o === r ? this : this.clone(!0), 
            Z(s[o])[t](i), G.apply(n, i.get());
            return this.pushStack(n);
        };
    });
    var Pe, Re = {}, Ie = /^margin/, Be = new RegExp("^(" + ve + ")(?!px)[a-z%]+$", "i"), ze = function(t) {
        return t.ownerDocument.defaultView.opener ? t.ownerDocument.defaultView.getComputedStyle(t, null) : e.getComputedStyle(t, null);
    };
    !function() {
        function t() {
            o.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", 
            o.innerHTML = "", s.appendChild(r);
            var t = e.getComputedStyle(o, null);
            i = "1%" !== t.top, n = "4px" === t.width, s.removeChild(r);
        }
        var i, n, s = Y.documentElement, r = Y.createElement("div"), o = Y.createElement("div");
        o.style && (o.style.backgroundClip = "content-box", o.cloneNode(!0).style.backgroundClip = "", 
        K.clearCloneStyle = "content-box" === o.style.backgroundClip, r.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", 
        r.appendChild(o), e.getComputedStyle && Z.extend(K, {
            "pixelPosition": function() {
                return t(), i;
            },
            "boxSizingReliable": function() {
                return null == n && t(), n;
            },
            "reliableMarginRight": function() {
                var t, i = o.appendChild(Y.createElement("div"));
                return i.style.cssText = o.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", 
                i.style.marginRight = i.style.width = "0", o.style.width = "1px", s.appendChild(r), 
                t = !parseFloat(e.getComputedStyle(i, null).marginRight), s.removeChild(r), o.removeChild(i), 
                t;
            }
        }));
    }(), Z.swap = function(e, t, i, n) {
        var s, r, o = {};
        for (r in t) o[r] = e.style[r], e.style[r] = t[r];
        s = i.apply(e, n || []);
        for (r in t) e.style[r] = o[r];
        return s;
    };
    var $e = /^(none|table(?!-c[ea]).+)/, Ue = new RegExp("^(" + ve + ")(.*)$", "i"), He = new RegExp("^([+-])=(" + ve + ")", "i"), We = {
        "position": "absolute",
        "visibility": "hidden",
        "display": "block"
    }, Ge = {
        "letterSpacing": "0",
        "fontWeight": "400"
    }, Ve = [ "Webkit", "O", "Moz", "ms" ];
    Z.extend({
        "cssHooks": {
            "opacity": {
                "get": function(e, t) {
                    if (t) {
                        var i = b(e, "opacity");
                        return "" === i ? "1" : i;
                    }
                }
            }
        },
        "cssNumber": {
            "columnCount": !0,
            "fillOpacity": !0,
            "flexGrow": !0,
            "flexShrink": !0,
            "fontWeight": !0,
            "lineHeight": !0,
            "opacity": !0,
            "order": !0,
            "orphans": !0,
            "widows": !0,
            "zIndex": !0,
            "zoom": !0
        },
        "cssProps": {
            "float": "cssFloat"
        },
        "style": function(e, t, i, n) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var s, r, o, a = Z.camelCase(t), l = e.style;
                if (t = Z.cssProps[a] || (Z.cssProps[a] = O(l, a)), o = Z.cssHooks[t] || Z.cssHooks[a], 
                void 0 === i) return o && "get" in o && void 0 !== (s = o.get(e, !1, n)) ? s : l[t];
                "string" == (r = typeof i) && (s = He.exec(i)) && (i = (s[1] + 1) * s[2] + parseFloat(Z.css(e, t)), 
                r = "number"), null != i && i === i && ("number" !== r || Z.cssNumber[a] || (i += "px"), 
                K.clearCloneStyle || "" !== i || 0 !== t.indexOf("background") || (l[t] = "inherit"), 
                o && "set" in o && void 0 === (i = o.set(e, i, n)) || (l[t] = i));
            }
        },
        "css": function(e, t, i, n) {
            var s, r, o, a = Z.camelCase(t);
            return t = Z.cssProps[a] || (Z.cssProps[a] = O(e.style, a)), (o = Z.cssHooks[t] || Z.cssHooks[a]) && "get" in o && (s = o.get(e, !0, i)), 
            void 0 === s && (s = b(e, t, n)), "normal" === s && t in Ge && (s = Ge[t]), "" === i || i ? (r = parseFloat(s), 
            !0 === i || Z.isNumeric(r) ? r || 0 : s) : s;
        }
    }), Z.each([ "height", "width" ], function(e, t) {
        Z.cssHooks[t] = {
            "get": function(e, i, n) {
                if (i) return $e.test(Z.css(e, "display")) && 0 === e.offsetWidth ? Z.swap(e, We, function() {
                    return E(e, t, n);
                }) : E(e, t, n);
            },
            "set": function(e, i, n) {
                var s = n && ze(e);
                return S(0, i, n ? x(e, t, n, "border-box" === Z.css(e, "boxSizing", !1, s), s) : 0);
            }
        };
    }), Z.cssHooks.marginRight = C(K.reliableMarginRight, function(e, t) {
        if (t) return Z.swap(e, {
            "display": "inline-block"
        }, b, [ e, "marginRight" ]);
    }), Z.each({
        "margin": "",
        "padding": "",
        "border": "Width"
    }, function(e, t) {
        Z.cssHooks[e + t] = {
            "expand": function(i) {
                for (var n = 0, s = {}, r = "string" == typeof i ? i.split(" ") : [ i ]; n < 4; n++) s[e + Le[n] + t] = r[n] || r[n - 2] || r[0];
                return s;
            }
        }, Ie.test(e) || (Z.cssHooks[e + t].set = S);
    }), Z.fn.extend({
        "css": function(e, t) {
            return de(this, function(e, t, i) {
                var n, s, r = {}, o = 0;
                if (Z.isArray(t)) {
                    for (n = ze(e), s = t.length; o < s; o++) r[t[o]] = Z.css(e, t[o], !1, n);
                    return r;
                }
                return void 0 !== i ? Z.style(e, t, i) : Z.css(e, t);
            }, e, t, arguments.length > 1);
        },
        "show": function() {
            return A(this, !0);
        },
        "hide": function() {
            return A(this);
        },
        "toggle": function(e) {
            return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
                we(this) ? Z(this).show() : Z(this).hide();
            });
        }
    }), Z.Tween = _, _.prototype = {
        "constructor": _,
        "init": function(e, t, i, n, s, r) {
            this.elem = e, this.prop = i, this.easing = s || "swing", this.options = t, this.start = this.now = this.cur(), 
            this.end = n, this.unit = r || (Z.cssNumber[i] ? "" : "px");
        },
        "cur": function() {
            var e = _.propHooks[this.prop];
            return e && e.get ? e.get(this) : _.propHooks._default.get(this);
        },
        "run": function(e) {
            var t, i = _.propHooks[this.prop];
            return this.options.duration ? this.pos = t = Z.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, 
            this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), 
            i && i.set ? i.set(this) : _.propHooks._default.set(this), this;
        }
    }, _.prototype.init.prototype = _.prototype, _.propHooks = {
        "_default": {
            "get": function(e) {
                var t;
                return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = Z.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0 : e.elem[e.prop];
            },
            "set": function(e) {
                Z.fx.step[e.prop] ? Z.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[Z.cssProps[e.prop]] || Z.cssHooks[e.prop]) ? Z.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now;
            }
        }
    }, _.propHooks.scrollTop = _.propHooks.scrollLeft = {
        "set": function(e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now);
        }
    }, Z.easing = {
        "linear": function(e) {
            return e;
        },
        "swing": function(e) {
            return .5 - Math.cos(e * Math.PI) / 2;
        }
    }, Z.fx = _.prototype.init, Z.fx.step = {};
    var je, qe, Xe = /^(?:toggle|show|hide)$/, Ke = new RegExp("^(?:([+-])=|)(" + ve + ")([a-z%]*)$", "i"), Ye = /queueHooks$/, Ze = [ function(e, t, i) {
        var n, s, r, o, a, l, h, c = this, u = {}, p = e.style, d = e.nodeType && we(e), f = fe.get(e, "fxshow");
        i.queue || (null == (a = Z._queueHooks(e, "fx")).unqueued && (a.unqueued = 0, l = a.empty.fire, 
        a.empty.fire = function() {
            a.unqueued || l();
        }), a.unqueued++, c.always(function() {
            c.always(function() {
                a.unqueued--, Z.queue(e, "fx").length || a.empty.fire();
            });
        })), 1 === e.nodeType && ("height" in t || "width" in t) && (i.overflow = [ p.overflow, p.overflowX, p.overflowY ], 
        "inline" === ("none" === (h = Z.css(e, "display")) ? fe.get(e, "olddisplay") || w(e.nodeName) : h) && "none" === Z.css(e, "float") && (p.display = "inline-block")), 
        i.overflow && (p.overflow = "hidden", c.always(function() {
            p.overflow = i.overflow[0], p.overflowX = i.overflow[1], p.overflowY = i.overflow[2];
        }));
        for (n in t) if (s = t[n], Xe.exec(s)) {
            if (delete t[n], r = r || "toggle" === s, s === (d ? "hide" : "show")) {
                if ("show" !== s || !f || void 0 === f[n]) continue;
                d = !0;
            }
            u[n] = f && f[n] || Z.style(e, n);
        } else h = void 0;
        if (Z.isEmptyObject(u)) "inline" === ("none" === h ? w(e.nodeName) : h) && (p.display = h); else {
            f ? "hidden" in f && (d = f.hidden) : f = fe.access(e, "fxshow", {}), r && (f.hidden = !d), 
            d ? Z(e).show() : c.done(function() {
                Z(e).hide();
            }), c.done(function() {
                var t;
                fe.remove(e, "fxshow");
                for (t in u) Z.style(e, t, u[t]);
            });
            for (n in u) o = T(d ? f[n] : 0, n, c), n in f || (f[n] = o.start, d && (o.end = o.start, 
            o.start = "width" === n || "height" === n ? 1 : 0));
        }
    } ], Qe = {
        "*": [ function(e, t) {
            var i = this.createTween(e, t), n = i.cur(), s = Ke.exec(t), r = s && s[3] || (Z.cssNumber[e] ? "" : "px"), o = (Z.cssNumber[e] || "px" !== r && +n) && Ke.exec(Z.css(i.elem, e)), a = 1, l = 20;
            if (o && o[3] !== r) {
                r = r || o[3], s = s || [], o = +n || 1;
                do {
                    o /= a = a || ".5", Z.style(i.elem, e, o + r);
                } while (a !== (a = i.cur() / n) && 1 !== a && --l);
            }
            return s && (o = i.start = +o || +n || 0, i.unit = r, i.end = s[1] ? o + (s[1] + 1) * s[2] : +s[2]), 
            i;
        } ]
    };
    Z.Animation = Z.extend(k, {
        "tweener": function(e, t) {
            Z.isFunction(e) ? (t = e, e = [ "*" ]) : e = e.split(" ");
            for (var i, n = 0, s = e.length; n < s; n++) i = e[n], Qe[i] = Qe[i] || [], Qe[i].unshift(t);
        },
        "prefilter": function(e, t) {
            t ? Ze.unshift(e) : Ze.push(e);
        }
    }), Z.speed = function(e, t, i) {
        var n = e && "object" == typeof e ? Z.extend({}, e) : {
            "complete": i || !i && t || Z.isFunction(e) && e,
            "duration": e,
            "easing": i && t || t && !Z.isFunction(t) && t
        };
        return n.duration = Z.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in Z.fx.speeds ? Z.fx.speeds[n.duration] : Z.fx.speeds._default, 
        null != n.queue && !0 !== n.queue || (n.queue = "fx"), n.old = n.complete, n.complete = function() {
            Z.isFunction(n.old) && n.old.call(this), n.queue && Z.dequeue(this, n.queue);
        }, n;
    }, Z.fn.extend({
        "fadeTo": function(e, t, i, n) {
            return this.filter(we).css("opacity", 0).show().end().animate({
                "opacity": t
            }, e, i, n);
        },
        "animate": function(e, t, i, n) {
            var s = Z.isEmptyObject(e), r = Z.speed(t, i, n), o = function() {
                var t = k(this, Z.extend({}, e), r);
                (s || fe.get(this, "finish")) && t.stop(!0);
            };
            return o.finish = o, s || !1 === r.queue ? this.each(o) : this.queue(r.queue, o);
        },
        "stop": function(e, t, i) {
            var n = function(e) {
                var t = e.stop;
                delete e.stop, t(i);
            };
            return "string" != typeof e && (i = t, t = e, e = void 0), t && !1 !== e && this.queue(e || "fx", []), 
            this.each(function() {
                var t = !0, s = null != e && e + "queueHooks", r = Z.timers, o = fe.get(this);
                if (s) o[s] && o[s].stop && n(o[s]); else for (s in o) o[s] && o[s].stop && Ye.test(s) && n(o[s]);
                for (s = r.length; s--; ) r[s].elem !== this || null != e && r[s].queue !== e || (r[s].anim.stop(i), 
                t = !1, r.splice(s, 1));
                !t && i || Z.dequeue(this, e);
            });
        },
        "finish": function(e) {
            return !1 !== e && (e = e || "fx"), this.each(function() {
                var t, i = fe.get(this), n = i[e + "queue"], s = i[e + "queueHooks"], r = Z.timers, o = n ? n.length : 0;
                for (i.finish = !0, Z.queue(this, e, []), s && s.stop && s.stop.call(this, !0), 
                t = r.length; t--; ) r[t].elem === this && r[t].queue === e && (r[t].anim.stop(!0), 
                r.splice(t, 1));
                for (t = 0; t < o; t++) n[t] && n[t].finish && n[t].finish.call(this);
                delete i.finish;
            });
        }
    }), Z.each([ "toggle", "show", "hide" ], function(e, t) {
        var i = Z.fn[t];
        Z.fn[t] = function(e, n, s) {
            return null == e || "boolean" == typeof e ? i.apply(this, arguments) : this.animate(N(t, !0), e, n, s);
        };
    }), Z.each({
        "slideDown": N("show"),
        "slideUp": N("hide"),
        "slideToggle": N("toggle"),
        "fadeIn": {
            "opacity": "show"
        },
        "fadeOut": {
            "opacity": "hide"
        },
        "fadeToggle": {
            "opacity": "toggle"
        }
    }, function(e, t) {
        Z.fn[e] = function(e, i, n) {
            return this.animate(t, e, i, n);
        };
    }), Z.timers = [], Z.fx.tick = function() {
        var e, t = 0, i = Z.timers;
        for (je = Z.now(); t < i.length; t++) (e = i[t])() || i[t] !== e || i.splice(t--, 1);
        i.length || Z.fx.stop(), je = void 0;
    }, Z.fx.timer = function(e) {
        Z.timers.push(e), e() ? Z.fx.start() : Z.timers.pop();
    }, Z.fx.interval = 13, Z.fx.start = function() {
        qe || (qe = setInterval(Z.fx.tick, Z.fx.interval));
    }, Z.fx.stop = function() {
        clearInterval(qe), qe = null;
    }, Z.fx.speeds = {
        "slow": 600,
        "fast": 200,
        "_default": 400
    }, Z.fn.delay = function(e, t) {
        return e = Z.fx ? Z.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, i) {
            var n = setTimeout(t, e);
            i.stop = function() {
                clearTimeout(n);
            };
        });
    }, function() {
        var e = Y.createElement("input"), t = Y.createElement("select"), i = t.appendChild(Y.createElement("option"));
        e.type = "checkbox", K.checkOn = "" !== e.value, K.optSelected = i.selected, t.disabled = !0, 
        K.optDisabled = !i.disabled, (e = Y.createElement("input")).value = "t", e.type = "radio", 
        K.radioValue = "t" === e.value;
    }();
    var Je, et = Z.expr.attrHandle;
    Z.fn.extend({
        "attr": function(e, t) {
            return de(this, Z.attr, e, t, arguments.length > 1);
        },
        "removeAttr": function(e) {
            return this.each(function() {
                Z.removeAttr(this, e);
            });
        }
    }), Z.extend({
        "attr": function(e, t, i) {
            var n, s, r = e.nodeType;
            if (e && 3 !== r && 8 !== r && 2 !== r) return void 0 === e.getAttribute ? Z.prop(e, t, i) : (1 === r && Z.isXMLDoc(e) || (t = t.toLowerCase(), 
            n = Z.attrHooks[t] || (Z.expr.match.bool.test(t) ? Je : void 0)), void 0 === i ? n && "get" in n && null !== (s = n.get(e, t)) ? s : null == (s = Z.find.attr(e, t)) ? void 0 : s : null !== i ? n && "set" in n && void 0 !== (s = n.set(e, i, t)) ? s : (e.setAttribute(t, i + ""), 
            i) : void Z.removeAttr(e, t));
        },
        "removeAttr": function(e, t) {
            var i, n, s = 0, r = t && t.match(ce);
            if (r && 1 === e.nodeType) for (;i = r[s++]; ) n = Z.propFix[i] || i, Z.expr.match.bool.test(i) && (e[n] = !1), 
            e.removeAttribute(i);
        },
        "attrHooks": {
            "type": {
                "set": function(e, t) {
                    if (!K.radioValue && "radio" === t && Z.nodeName(e, "input")) {
                        var i = e.value;
                        return e.setAttribute("type", t), i && (e.value = i), t;
                    }
                }
            }
        }
    }), Je = {
        "set": function(e, t, i) {
            return !1 === t ? Z.removeAttr(e, i) : e.setAttribute(i, i), i;
        }
    }, Z.each(Z.expr.match.bool.source.match(/\w+/g), function(e, t) {
        var i = et[t] || Z.find.attr;
        et[t] = function(e, t, n) {
            var s, r;
            return n || (r = et[t], et[t] = s, s = null != i(e, t, n) ? t.toLowerCase() : null, 
            et[t] = r), s;
        };
    });
    var tt = /^(?:input|select|textarea|button)$/i;
    Z.fn.extend({
        "prop": function(e, t) {
            return de(this, Z.prop, e, t, arguments.length > 1);
        },
        "removeProp": function(e) {
            return this.each(function() {
                delete this[Z.propFix[e] || e];
            });
        }
    }), Z.extend({
        "propFix": {
            "for": "htmlFor",
            "class": "className"
        },
        "prop": function(e, t, i) {
            var n, s, r = e.nodeType;
            if (e && 3 !== r && 8 !== r && 2 !== r) return (1 !== r || !Z.isXMLDoc(e)) && (t = Z.propFix[t] || t, 
            s = Z.propHooks[t]), void 0 !== i ? s && "set" in s && void 0 !== (n = s.set(e, i, t)) ? n : e[t] = i : s && "get" in s && null !== (n = s.get(e, t)) ? n : e[t];
        },
        "propHooks": {
            "tabIndex": {
                "get": function(e) {
                    return e.hasAttribute("tabindex") || tt.test(e.nodeName) || e.href ? e.tabIndex : -1;
                }
            }
        }
    }), K.optSelected || (Z.propHooks.selected = {
        "get": function(e) {
            var t = e.parentNode;
            return t && t.parentNode && t.parentNode.selectedIndex, null;
        }
    }), Z.each([ "tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable" ], function() {
        Z.propFix[this.toLowerCase()] = this;
    });
    var it = /[\t\r\n\f]/g;
    Z.fn.extend({
        "addClass": function(e) {
            var t, i, n, s, r, o, a = "string" == typeof e && e, l = 0, h = this.length;
            if (Z.isFunction(e)) return this.each(function(t) {
                Z(this).addClass(e.call(this, t, this.className));
            });
            if (a) for (t = (e || "").match(ce) || []; l < h; l++) if (i = this[l], n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(it, " ") : " ")) {
                for (r = 0; s = t[r++]; ) n.indexOf(" " + s + " ") < 0 && (n += s + " ");
                o = Z.trim(n), i.className !== o && (i.className = o);
            }
            return this;
        },
        "removeClass": function(e) {
            var t, i, n, s, r, o, a = 0 === arguments.length || "string" == typeof e && e, l = 0, h = this.length;
            if (Z.isFunction(e)) return this.each(function(t) {
                Z(this).removeClass(e.call(this, t, this.className));
            });
            if (a) for (t = (e || "").match(ce) || []; l < h; l++) if (i = this[l], n = 1 === i.nodeType && (i.className ? (" " + i.className + " ").replace(it, " ") : "")) {
                for (r = 0; s = t[r++]; ) for (;n.indexOf(" " + s + " ") >= 0; ) n = n.replace(" " + s + " ", " ");
                o = e ? Z.trim(n) : "", i.className !== o && (i.className = o);
            }
            return this;
        },
        "toggleClass": function(e, t) {
            var i = typeof e;
            return "boolean" == typeof t && "string" === i ? t ? this.addClass(e) : this.removeClass(e) : Z.isFunction(e) ? this.each(function(i) {
                Z(this).toggleClass(e.call(this, i, this.className, t), t);
            }) : this.each(function() {
                if ("string" === i) for (var t, n = 0, s = Z(this), r = e.match(ce) || []; t = r[n++]; ) s.hasClass(t) ? s.removeClass(t) : s.addClass(t); else "undefined" !== i && "boolean" !== i || (this.className && fe.set(this, "__className__", this.className), 
                this.className = this.className || !1 === e ? "" : fe.get(this, "__className__") || "");
            });
        },
        "hasClass": function(e) {
            for (var t = " " + e + " ", i = 0, n = this.length; i < n; i++) if (1 === this[i].nodeType && (" " + this[i].className + " ").replace(it, " ").indexOf(t) >= 0) return !0;
            return !1;
        }
    });
    var nt = /\r/g;
    Z.fn.extend({
        "val": function(e) {
            var t, i, n, s = this[0];
            {
                if (arguments.length) return n = Z.isFunction(e), this.each(function(i) {
                    var s;
                    1 === this.nodeType && (null == (s = n ? e.call(this, i, Z(this).val()) : e) ? s = "" : "number" == typeof s ? s += "" : Z.isArray(s) && (s = Z.map(s, function(e) {
                        return null == e ? "" : e + "";
                    })), (t = Z.valHooks[this.type] || Z.valHooks[this.nodeName.toLowerCase()]) && "set" in t && void 0 !== t.set(this, s, "value") || (this.value = s));
                });
                if (s) return (t = Z.valHooks[s.type] || Z.valHooks[s.nodeName.toLowerCase()]) && "get" in t && void 0 !== (i = t.get(s, "value")) ? i : "string" == typeof (i = s.value) ? i.replace(nt, "") : null == i ? "" : i;
            }
        }
    }), Z.extend({
        "valHooks": {
            "option": {
                "get": function(e) {
                    var t = Z.find.attr(e, "value");
                    return null != t ? t : Z.trim(Z.text(e));
                }
            },
            "select": {
                "get": function(e) {
                    for (var t, i, n = e.options, s = e.selectedIndex, r = "select-one" === e.type || s < 0, o = r ? null : [], a = r ? s + 1 : n.length, l = s < 0 ? a : r ? s : 0; l < a; l++) if (((i = n[l]).selected || l === s) && (K.optDisabled ? !i.disabled : null === i.getAttribute("disabled")) && (!i.parentNode.disabled || !Z.nodeName(i.parentNode, "optgroup"))) {
                        if (t = Z(i).val(), r) return t;
                        o.push(t);
                    }
                    return o;
                },
                "set": function(e, t) {
                    for (var i, n, s = e.options, r = Z.makeArray(t), o = s.length; o--; ) ((n = s[o]).selected = Z.inArray(n.value, r) >= 0) && (i = !0);
                    return i || (e.selectedIndex = -1), r;
                }
            }
        }
    }), Z.each([ "radio", "checkbox" ], function() {
        Z.valHooks[this] = {
            "set": function(e, t) {
                if (Z.isArray(t)) return e.checked = Z.inArray(Z(e).val(), t) >= 0;
            }
        }, K.checkOn || (Z.valHooks[this].get = function(e) {
            return null === e.getAttribute("value") ? "on" : e.value;
        });
    }), Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
        Z.fn[t] = function(e, i) {
            return arguments.length > 0 ? this.on(t, null, e, i) : this.trigger(t);
        };
    }), Z.fn.extend({
        "hover": function(e, t) {
            return this.mouseenter(e).mouseleave(t || e);
        },
        "bind": function(e, t, i) {
            return this.on(e, null, t, i);
        },
        "unbind": function(e, t) {
            return this.off(e, null, t);
        },
        "delegate": function(e, t, i, n) {
            return this.on(t, e, i, n);
        },
        "undelegate": function(e, t, i) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", i);
        }
    });
    var st = Z.now(), rt = /\?/;
    Z.parseJSON = function(e) {
        return JSON.parse(e + "");
    }, Z.parseXML = function(e) {
        var t, i;
        if (!e || "string" != typeof e) return null;
        try {
            i = new DOMParser(), t = i.parseFromString(e, "text/xml");
        } catch (e) {
            t = void 0;
        }
        return t && !t.getElementsByTagName("parsererror").length || Z.error("Invalid XML: " + e), 
        t;
    };
    var ot = /#.*$/, at = /([?&])_=[^&]*/, lt = /^(.*?):[ \t]*([^\r\n]*)$/gm, ht = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, ct = /^(?:GET|HEAD)$/, ut = /^\/\//, pt = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, dt = {}, ft = {}, mt = "*/".concat("*"), gt = e.location.href, yt = pt.exec(gt.toLowerCase()) || [];
    Z.extend({
        "active": 0,
        "lastModified": {},
        "etag": {},
        "ajaxSettings": {
            "url": gt,
            "type": "GET",
            "isLocal": ht.test(yt[1]),
            "global": !0,
            "processData": !0,
            "async": !0,
            "contentType": "application/x-www-form-urlencoded; charset=UTF-8",
            "accepts": {
                "*": mt,
                "text": "text/plain",
                "html": "text/html",
                "xml": "application/xml, text/xml",
                "json": "application/json, text/javascript"
            },
            "contents": {
                "xml": /xml/,
                "html": /html/,
                "json": /json/
            },
            "responseFields": {
                "xml": "responseXML",
                "text": "responseText",
                "json": "responseJSON"
            },
            "converters": {
                "* text": String,
                "text html": !0,
                "text json": Z.parseJSON,
                "text xml": Z.parseXML
            },
            "flatOptions": {
                "url": !0,
                "context": !0
            }
        },
        "ajaxSetup": function(e, t) {
            return t ? R(R(e, Z.ajaxSettings), t) : R(Z.ajaxSettings, e);
        },
        "ajaxPrefilter": D(dt),
        "ajaxTransport": D(ft),
        "ajax": function(e, t) {
            function i(e, t, i, o) {
                var l, c, y, v, w, C = t;
                2 !== L && (L = 2, a && clearTimeout(a), n = void 0, r = o || "", b.readyState = e > 0 ? 4 : 0, 
                l = e >= 200 && e < 300 || 304 === e, i && (v = I(u, b, i)), v = B(u, v, b, l), 
                l ? (u.ifModified && ((w = b.getResponseHeader("Last-Modified")) && (Z.lastModified[s] = w), 
                (w = b.getResponseHeader("etag")) && (Z.etag[s] = w)), 204 === e || "HEAD" === u.type ? C = "nocontent" : 304 === e ? C = "notmodified" : (C = v.state, 
                c = v.data, l = !(y = v.error))) : (y = C, !e && C || (C = "error", e < 0 && (e = 0))), 
                b.status = e, b.statusText = (t || C) + "", l ? f.resolveWith(p, [ c, C, b ]) : f.rejectWith(p, [ b, C, y ]), 
                b.statusCode(g), g = void 0, h && d.trigger(l ? "ajaxSuccess" : "ajaxError", [ b, u, l ? c : y ]), 
                m.fireWith(p, [ b, C ]), h && (d.trigger("ajaxComplete", [ b, u ]), --Z.active || Z.event.trigger("ajaxStop")));
            }
            "object" == typeof e && (t = e, e = void 0), t = t || {};
            var n, s, r, o, a, l, h, c, u = Z.ajaxSetup({}, t), p = u.context || u, d = u.context && (p.nodeType || p.jquery) ? Z(p) : Z.event, f = Z.Deferred(), m = Z.Callbacks("once memory"), g = u.statusCode || {}, y = {}, v = {}, L = 0, w = "canceled", b = {
                "readyState": 0,
                "getResponseHeader": function(e) {
                    var t;
                    if (2 === L) {
                        if (!o) for (o = {}; t = lt.exec(r); ) o[t[1].toLowerCase()] = t[2];
                        t = o[e.toLowerCase()];
                    }
                    return null == t ? null : t;
                },
                "getAllResponseHeaders": function() {
                    return 2 === L ? r : null;
                },
                "setRequestHeader": function(e, t) {
                    var i = e.toLowerCase();
                    return L || (e = v[i] = v[i] || e, y[e] = t), this;
                },
                "overrideMimeType": function(e) {
                    return L || (u.mimeType = e), this;
                },
                "statusCode": function(e) {
                    var t;
                    if (e) if (L < 2) for (t in e) g[t] = [ g[t], e[t] ]; else b.always(e[b.status]);
                    return this;
                },
                "abort": function(e) {
                    var t = e || w;
                    return n && n.abort(t), i(0, t), this;
                }
            };
            if (f.promise(b).complete = m.add, b.success = b.done, b.error = b.fail, u.url = ((e || u.url || gt) + "").replace(ot, "").replace(ut, yt[1] + "//"), 
            u.type = t.method || t.type || u.method || u.type, u.dataTypes = Z.trim(u.dataType || "*").toLowerCase().match(ce) || [ "" ], 
            null == u.crossDomain && (l = pt.exec(u.url.toLowerCase()), u.crossDomain = !(!l || l[1] === yt[1] && l[2] === yt[2] && (l[3] || ("http:" === l[1] ? "80" : "443")) === (yt[3] || ("http:" === yt[1] ? "80" : "443")))), 
            u.data && u.processData && "string" != typeof u.data && (u.data = Z.param(u.data, u.traditional)), 
            P(dt, u, t, b), 2 === L) return b;
            (h = Z.event && u.global) && 0 == Z.active++ && Z.event.trigger("ajaxStart"), u.type = u.type.toUpperCase(), 
            u.hasContent = !ct.test(u.type), s = u.url, u.hasContent || (u.data && (s = u.url += (rt.test(s) ? "&" : "?") + u.data, 
            delete u.data), !1 === u.cache && (u.url = at.test(s) ? s.replace(at, "$1_=" + st++) : s + (rt.test(s) ? "&" : "?") + "_=" + st++)), 
            u.ifModified && (Z.lastModified[s] && b.setRequestHeader("If-Modified-Since", Z.lastModified[s]), 
            Z.etag[s] && b.setRequestHeader("If-None-Match", Z.etag[s])), (u.data && u.hasContent && !1 !== u.contentType || t.contentType) && b.setRequestHeader("Content-Type", u.contentType), 
            b.setRequestHeader("Accept", u.dataTypes[0] && u.accepts[u.dataTypes[0]] ? u.accepts[u.dataTypes[0]] + ("*" !== u.dataTypes[0] ? ", " + mt + "; q=0.01" : "") : u.accepts["*"]);
            for (c in u.headers) b.setRequestHeader(c, u.headers[c]);
            if (u.beforeSend && (!1 === u.beforeSend.call(p, b, u) || 2 === L)) return b.abort();
            w = "abort";
            for (c in {
                "success": 1,
                "error": 1,
                "complete": 1
            }) b[c](u[c]);
            if (n = P(ft, u, t, b)) {
                b.readyState = 1, h && d.trigger("ajaxSend", [ b, u ]), u.async && u.timeout > 0 && (a = setTimeout(function() {
                    b.abort("timeout");
                }, u.timeout));
                try {
                    L = 1, n.send(y, i);
                } catch (e) {
                    if (!(L < 2)) throw e;
                    i(-1, e);
                }
            } else i(-1, "No Transport");
            return b;
        },
        "getJSON": function(e, t, i) {
            return Z.get(e, t, i, "json");
        },
        "getScript": function(e, t) {
            return Z.get(e, void 0, t, "script");
        }
    }), Z.each([ "get", "post" ], function(e, t) {
        Z[t] = function(e, i, n, s) {
            return Z.isFunction(i) && (s = s || n, n = i, i = void 0), Z.ajax({
                "url": e,
                "type": t,
                "dataType": s,
                "data": i,
                "success": n
            });
        };
    }), Z._evalUrl = function(e) {
        return Z.ajax({
            "url": e,
            "type": "GET",
            "dataType": "script",
            "async": !1,
            "global": !1,
            "throws": !0
        });
    }, Z.fn.extend({
        "wrapAll": function(e) {
            var t;
            return Z.isFunction(e) ? this.each(function(t) {
                Z(this).wrapAll(e.call(this, t));
            }) : (this[0] && (t = Z(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), 
            t.map(function() {
                for (var e = this; e.firstElementChild; ) e = e.firstElementChild;
                return e;
            }).append(this)), this);
        },
        "wrapInner": function(e) {
            return Z.isFunction(e) ? this.each(function(t) {
                Z(this).wrapInner(e.call(this, t));
            }) : this.each(function() {
                var t = Z(this), i = t.contents();
                i.length ? i.wrapAll(e) : t.append(e);
            });
        },
        "wrap": function(e) {
            var t = Z.isFunction(e);
            return this.each(function(i) {
                Z(this).wrapAll(t ? e.call(this, i) : e);
            });
        },
        "unwrap": function() {
            return this.parent().each(function() {
                Z.nodeName(this, "body") || Z(this).replaceWith(this.childNodes);
            }).end();
        }
    }), Z.expr.filters.hidden = function(e) {
        return e.offsetWidth <= 0 && e.offsetHeight <= 0;
    }, Z.expr.filters.visible = function(e) {
        return !Z.expr.filters.hidden(e);
    };
    var vt = /%20/g, Lt = /\[\]$/, wt = /\r?\n/g, bt = /^(?:submit|button|image|reset|file)$/i, Ct = /^(?:input|select|textarea|keygen)/i;
    Z.param = function(e, t) {
        var i, n = [], s = function(e, t) {
            t = Z.isFunction(t) ? t() : null == t ? "" : t, n[n.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t);
        };
        if (void 0 === t && (t = Z.ajaxSettings && Z.ajaxSettings.traditional), Z.isArray(e) || e.jquery && !Z.isPlainObject(e)) Z.each(e, function() {
            s(this.name, this.value);
        }); else for (i in e) z(i, e[i], t, s);
        return n.join("&").replace(vt, "+");
    }, Z.fn.extend({
        "serialize": function() {
            return Z.param(this.serializeArray());
        },
        "serializeArray": function() {
            return this.map(function() {
                var e = Z.prop(this, "elements");
                return e ? Z.makeArray(e) : this;
            }).filter(function() {
                var e = this.type;
                return this.name && !Z(this).is(":disabled") && Ct.test(this.nodeName) && !bt.test(e) && (this.checked || !be.test(e));
            }).map(function(e, t) {
                var i = Z(this).val();
                return null == i ? null : Z.isArray(i) ? Z.map(i, function(e) {
                    return {
                        "name": t.name,
                        "value": e.replace(wt, "\r\n")
                    };
                }) : {
                    "name": t.name,
                    "value": i.replace(wt, "\r\n")
                };
            }).get();
        }
    }), Z.ajaxSettings.xhr = function() {
        try {
            return new XMLHttpRequest();
        } catch (e) {}
    };
    var Ot = 0, St = {}, xt = {
        "0": 200,
        "1223": 204
    }, Et = Z.ajaxSettings.xhr();
    e.attachEvent && e.attachEvent("onunload", function() {
        for (var e in St) St[e]();
    }), K.cors = !!Et && "withCredentials" in Et, K.ajax = Et = !!Et, Z.ajaxTransport(function(e) {
        var t;
        if (K.cors || Et && !e.crossDomain) return {
            "send": function(i, n) {
                var s, r = e.xhr(), o = ++Ot;
                if (r.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields) for (s in e.xhrFields) r[s] = e.xhrFields[s];
                e.mimeType && r.overrideMimeType && r.overrideMimeType(e.mimeType), e.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest");
                for (s in i) r.setRequestHeader(s, i[s]);
                t = function(e) {
                    return function() {
                        t && (delete St[o], t = r.onload = r.onerror = null, "abort" === e ? r.abort() : "error" === e ? n(r.status, r.statusText) : n(xt[r.status] || r.status, r.statusText, "string" == typeof r.responseText ? {
                            "text": r.responseText
                        } : void 0, r.getAllResponseHeaders()));
                    };
                }, r.onload = t(), r.onerror = t("error"), t = St[o] = t("abort");
                try {
                    r.send(e.hasContent && e.data || null);
                } catch (e) {
                    if (t) throw e;
                }
            },
            "abort": function() {
                t && t();
            }
        };
    }), Z.ajaxSetup({
        "accepts": {
            "script": "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        "contents": {
            "script": /(?:java|ecma)script/
        },
        "converters": {
            "text script": function(e) {
                return Z.globalEval(e), e;
            }
        }
    }), Z.ajaxPrefilter("script", function(e) {
        void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET");
    }), Z.ajaxTransport("script", function(e) {
        if (e.crossDomain) {
            var t, i;
            return {
                "send": function(n, s) {
                    t = Z("<script>").prop({
                        "async": !0,
                        "charset": e.scriptCharset,
                        "src": e.url
                    }).on("load error", i = function(e) {
                        t.remove(), i = null, e && s("error" === e.type ? 404 : 200, e.type);
                    }), Y.head.appendChild(t[0]);
                },
                "abort": function() {
                    i && i();
                }
            };
        }
    });
    var At = [], _t = /(=)\?(?=&|$)|\?\?/;
    Z.ajaxSetup({
        "jsonp": "callback",
        "jsonpCallback": function() {
            var e = At.pop() || Z.expando + "_" + st++;
            return this[e] = !0, e;
        }
    }), Z.ajaxPrefilter("json jsonp", function(t, i, n) {
        var s, r, o, a = !1 !== t.jsonp && (_t.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && _t.test(t.data) && "data");
        if (a || "jsonp" === t.dataTypes[0]) return s = t.jsonpCallback = Z.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, 
        a ? t[a] = t[a].replace(_t, "$1" + s) : !1 !== t.jsonp && (t.url += (rt.test(t.url) ? "&" : "?") + t.jsonp + "=" + s), 
        t.converters["script json"] = function() {
            return o || Z.error(s + " was not called"), o[0];
        }, t.dataTypes[0] = "json", r = e[s], e[s] = function() {
            o = arguments;
        }, n.always(function() {
            e[s] = r, t[s] && (t.jsonpCallback = i.jsonpCallback, At.push(s)), o && Z.isFunction(r) && r(o[0]), 
            o = r = void 0;
        }), "script";
    }), Z.parseHTML = function(e, t, i) {
        if (!e || "string" != typeof e) return null;
        "boolean" == typeof t && (i = t, t = !1), t = t || Y;
        var n = se.exec(e), s = !i && [];
        return n ? [ t.createElement(n[1]) ] : (n = Z.buildFragment([ e ], t, s), s && s.length && Z(s).remove(), 
        Z.merge([], n.childNodes));
    };
    var Ft = Z.fn.load;
    Z.fn.load = function(e, t, i) {
        if ("string" != typeof e && Ft) return Ft.apply(this, arguments);
        var n, s, r, o = this, a = e.indexOf(" ");
        return a >= 0 && (n = Z.trim(e.slice(a)), e = e.slice(0, a)), Z.isFunction(t) ? (i = t, 
        t = void 0) : t && "object" == typeof t && (s = "POST"), o.length > 0 && Z.ajax({
            "url": e,
            "type": s,
            "dataType": "html",
            "data": t
        }).done(function(e) {
            r = arguments, o.html(n ? Z("<div>").append(Z.parseHTML(e)).find(n) : e);
        }).complete(i && function(e, t) {
            o.each(i, r || [ e.responseText, t, e ]);
        }), this;
    }, Z.each([ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function(e, t) {
        Z.fn[t] = function(e) {
            return this.on(t, e);
        };
    }), Z.expr.filters.animated = function(e) {
        return Z.grep(Z.timers, function(t) {
            return e === t.elem;
        }).length;
    };
    var Nt = e.document.documentElement;
    Z.offset = {
        "setOffset": function(e, t, i) {
            var n, s, r, o, a, l, h = Z.css(e, "position"), c = Z(e), u = {};
            "static" === h && (e.style.position = "relative"), a = c.offset(), r = Z.css(e, "top"), 
            l = Z.css(e, "left"), ("absolute" === h || "fixed" === h) && (r + l).indexOf("auto") > -1 ? (o = (n = c.position()).top, 
            s = n.left) : (o = parseFloat(r) || 0, s = parseFloat(l) || 0), Z.isFunction(t) && (t = t.call(e, i, a)), 
            null != t.top && (u.top = t.top - a.top + o), null != t.left && (u.left = t.left - a.left + s), 
            "using" in t ? t.using.call(e, u) : c.css(u);
        }
    }, Z.fn.extend({
        "offset": function(e) {
            if (arguments.length) return void 0 === e ? this : this.each(function(t) {
                Z.offset.setOffset(this, e, t);
            });
            var t, i, n = this[0], s = {
                "top": 0,
                "left": 0
            }, r = n && n.ownerDocument;
            if (r) return t = r.documentElement, Z.contains(t, n) ? (void 0 !== n.getBoundingClientRect && (s = n.getBoundingClientRect()), 
            i = $(r), {
                "top": s.top + i.pageYOffset - t.clientTop,
                "left": s.left + i.pageXOffset - t.clientLeft
            }) : s;
        },
        "position": function() {
            if (this[0]) {
                var e, t, i = this[0], n = {
                    "top": 0,
                    "left": 0
                };
                return "fixed" === Z.css(i, "position") ? t = i.getBoundingClientRect() : (e = this.offsetParent(), 
                t = this.offset(), Z.nodeName(e[0], "html") || (n = e.offset()), n.top += Z.css(e[0], "borderTopWidth", !0), 
                n.left += Z.css(e[0], "borderLeftWidth", !0)), {
                    "top": t.top - n.top - Z.css(i, "marginTop", !0),
                    "left": t.left - n.left - Z.css(i, "marginLeft", !0)
                };
            }
        },
        "offsetParent": function() {
            return this.map(function() {
                for (var e = this.offsetParent || Nt; e && !Z.nodeName(e, "html") && "static" === Z.css(e, "position"); ) e = e.offsetParent;
                return e || Nt;
            });
        }
    }), Z.each({
        "scrollLeft": "pageXOffset",
        "scrollTop": "pageYOffset"
    }, function(t, i) {
        var n = "pageYOffset" === i;
        Z.fn[t] = function(s) {
            return de(this, function(t, s, r) {
                var o = $(t);
                if (void 0 === r) return o ? o[i] : t[s];
                o ? o.scrollTo(n ? e.pageXOffset : r, n ? r : e.pageYOffset) : t[s] = r;
            }, t, s, arguments.length, null);
        };
    }), Z.each([ "top", "left" ], function(e, t) {
        Z.cssHooks[t] = C(K.pixelPosition, function(e, i) {
            if (i) return i = b(e, t), Be.test(i) ? Z(e).position()[t] + "px" : i;
        });
    }), Z.each({
        "Height": "height",
        "Width": "width"
    }, function(e, t) {
        Z.each({
            "padding": "inner" + e,
            "content": t,
            "": "outer" + e
        }, function(i, n) {
            Z.fn[n] = function(n, s) {
                var r = arguments.length && (i || "boolean" != typeof n), o = i || (!0 === n || !0 === s ? "margin" : "border");
                return de(this, function(t, i, n) {
                    var s;
                    return Z.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (s = t.documentElement, 
                    Math.max(t.body["scroll" + e], s["scroll" + e], t.body["offset" + e], s["offset" + e], s["client" + e])) : void 0 === n ? Z.css(t, i, o) : Z.style(t, i, n, o);
                }, t, r ? n : void 0, r, null);
            };
        });
    }), Z.fn.size = function() {
        return this.length;
    }, Z.fn.andSelf = Z.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
        return Z;
    });
    var Tt = e.jQuery, Mt = e.$;
    return Z.noConflict = function(t) {
        return e.$ === Z && (e.$ = Mt), t && e.jQuery === Z && (e.jQuery = Tt), Z;
    }, void 0 === t && (e.jQuery = e.$ = Z), Z;
}), function(e, t) {
    function i(t, i) {
        var s, r, o, a = t.nodeName.toLowerCase();
        return "area" === a ? (s = t.parentNode, r = s.name, !(!t.href || !r || "map" !== s.nodeName.toLowerCase()) && (!!(o = e("img[usemap=#" + r + "]")[0]) && n(o))) : (/input|select|textarea|button|object/.test(a) ? !t.disabled : "a" === a ? t.href || i : i) && n(t);
    }
    function n(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
            return "hidden" === e.css(this, "visibility");
        }).length;
    }
    var s = 0, r = /^ui-id-\d+$/;
    e.ui = e.ui || {}, e.extend(e.ui, {
        "version": "1.10.4",
        "keyCode": {
            "BACKSPACE": 8,
            "COMMA": 188,
            "DELETE": 46,
            "DOWN": 40,
            "END": 35,
            "ENTER": 13,
            "ESCAPE": 27,
            "HOME": 36,
            "LEFT": 37,
            "NUMPAD_ADD": 107,
            "NUMPAD_DECIMAL": 110,
            "NUMPAD_DIVIDE": 111,
            "NUMPAD_ENTER": 108,
            "NUMPAD_MULTIPLY": 106,
            "NUMPAD_SUBTRACT": 109,
            "PAGE_DOWN": 34,
            "PAGE_UP": 33,
            "PERIOD": 190,
            "RIGHT": 39,
            "SPACE": 32,
            "TAB": 9,
            "UP": 38
        }
    }), e.fn.extend({
        "focus": function(t) {
            return function(i, n) {
                return "number" == typeof i ? this.each(function() {
                    var t = this;
                    setTimeout(function() {
                        e(t).focus(), n && n.call(t);
                    }, i);
                }) : t.apply(this, arguments);
            };
        }(e.fn.focus),
        "scrollParent": function() {
            var t;
            return t = e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
                return /(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"));
            }).eq(0) : this.parents().filter(function() {
                return /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"));
            }).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t;
        },
        "zIndex": function(t) {
            if (void 0 !== t) return this.css("zIndex", t);
            if (this.length) for (var i, n, s = e(this[0]); s.length && s[0] !== document; ) {
                if (("absolute" === (i = s.css("position")) || "relative" === i || "fixed" === i) && (n = parseInt(s.css("zIndex"), 10), 
                !isNaN(n) && 0 !== n)) return n;
                s = s.parent();
            }
            return 0;
        },
        "uniqueId": function() {
            return this.each(function() {
                this.id || (this.id = "ui-id-" + ++s);
            });
        },
        "removeUniqueId": function() {
            return this.each(function() {
                r.test(this.id) && e(this).removeAttr("id");
            });
        }
    }), e.extend(e.expr[":"], {
        "data": e.expr.createPseudo ? e.expr.createPseudo(function(t) {
            return function(i) {
                return !!e.data(i, t);
            };
        }) : function(t, i, n) {
            return !!e.data(t, n[3]);
        },
        "focusable": function(t) {
            return i(t, !isNaN(e.attr(t, "tabindex")));
        },
        "tabbable": function(t) {
            var n = e.attr(t, "tabindex"), s = isNaN(n);
            return (s || n >= 0) && i(t, !s);
        }
    }), e("<a>").outerWidth(1).jquery || e.each([ "Width", "Height" ], function(t, i) {
        function n(t, i, n, r) {
            return e.each(s, function() {
                i -= parseFloat(e.css(t, "padding" + this)) || 0, n && (i -= parseFloat(e.css(t, "border" + this + "Width")) || 0), 
                r && (i -= parseFloat(e.css(t, "margin" + this)) || 0);
            }), i;
        }
        var s = "Width" === i ? [ "Left", "Right" ] : [ "Top", "Bottom" ], r = i.toLowerCase(), o = {
            "innerWidth": e.fn.innerWidth,
            "innerHeight": e.fn.innerHeight,
            "outerWidth": e.fn.outerWidth,
            "outerHeight": e.fn.outerHeight
        };
        e.fn["inner" + i] = function(t) {
            return void 0 === t ? o["inner" + i].call(this) : this.each(function() {
                e(this).css(r, n(this, t) + "px");
            });
        }, e.fn["outer" + i] = function(t, s) {
            return "number" != typeof t ? o["outer" + i].call(this, t) : this.each(function() {
                e(this).css(r, n(this, t, !0, s) + "px");
            });
        };
    }), e.fn.addBack || (e.fn.addBack = function(e) {
        return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
        return function(i) {
            return arguments.length ? t.call(this, e.camelCase(i)) : t.call(this);
        };
    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), 
    e.support.selectstart = "onselectstart" in document.createElement("div"), e.fn.extend({
        "disableSelection": function() {
            return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(e) {
                e.preventDefault();
            });
        },
        "enableSelection": function() {
            return this.unbind(".ui-disableSelection");
        }
    }), e.extend(e.ui, {
        "plugin": {
            "add": function(t, i, n) {
                var s, r = e.ui[t].prototype;
                for (s in n) r.plugins[s] = r.plugins[s] || [], r.plugins[s].push([ i, n[s] ]);
            },
            "call": function(e, t, i) {
                var n, s = e.plugins[t];
                if (s && e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType) for (n = 0; n < s.length; n++) e.options[s[n][0]] && s[n][1].apply(e.element, i);
            }
        },
        "hasScroll": function(t, i) {
            if ("hidden" === e(t).css("overflow")) return !1;
            var n = i && "left" === i ? "scrollLeft" : "scrollTop", s = !1;
            return t[n] > 0 || (t[n] = 1, s = t[n] > 0, t[n] = 0, s);
        }
    });
}(jQuery), function(e, t) {
    var i = 0, n = Array.prototype.slice, s = e.cleanData;
    e.cleanData = function(t) {
        for (var i, n = 0; null != (i = t[n]); n++) try {
            e(i).triggerHandler("remove");
        } catch (e) {}
        s(t);
    }, e.widget = function(t, i, n) {
        var s, r, o, a, l = {}, h = t.split(".")[0];
        t = t.split(".")[1], s = h + "-" + t, n || (n = i, i = e.Widget), e.expr[":"][s.toLowerCase()] = function(t) {
            return !!e.data(t, s);
        }, e[h] = e[h] || {}, r = e[h][t], o = e[h][t] = function(e, t) {
            if (!this._createWidget) return new o(e, t);
            arguments.length && this._createWidget(e, t);
        }, e.extend(o, r, {
            "version": n.version,
            "_proto": e.extend({}, n),
            "_childConstructors": []
        }), (a = new i()).options = e.widget.extend({}, a.options), e.each(n, function(t, n) {
            e.isFunction(n) ? l[t] = function() {
                var e = function() {
                    return i.prototype[t].apply(this, arguments);
                }, s = function(e) {
                    return i.prototype[t].apply(this, e);
                };
                return function() {
                    var t, i = this._super, r = this._superApply;
                    return this._super = e, this._superApply = s, t = n.apply(this, arguments), this._super = i, 
                    this._superApply = r, t;
                };
            }() : l[t] = n;
        }), o.prototype = e.widget.extend(a, {
            "widgetEventPrefix": r ? a.widgetEventPrefix || t : t
        }, l, {
            "constructor": o,
            "namespace": h,
            "widgetName": t,
            "widgetFullName": s
        }), r ? (e.each(r._childConstructors, function(t, i) {
            var n = i.prototype;
            e.widget(n.namespace + "." + n.widgetName, o, i._proto);
        }), delete r._childConstructors) : i._childConstructors.push(o), e.widget.bridge(t, o);
    }, e.widget.extend = function(t) {
        for (var i, s, r = n.call(arguments, 1), o = 0, a = r.length; o < a; o++) for (i in r[o]) s = r[o][i], 
        r[o].hasOwnProperty(i) && void 0 !== s && (e.isPlainObject(s) ? t[i] = e.isPlainObject(t[i]) ? e.widget.extend({}, t[i], s) : e.widget.extend({}, s) : t[i] = s);
        return t;
    }, e.widget.bridge = function(t, i) {
        var s = i.prototype.widgetFullName || t;
        e.fn[t] = function(r) {
            var o = "string" == typeof r, a = n.call(arguments, 1), l = this;
            return r = !o && a.length ? e.widget.extend.apply(null, [ r ].concat(a)) : r, o ? this.each(function() {
                var i, n = e.data(this, s);
                return n ? e.isFunction(n[r]) && "_" !== r.charAt(0) ? (i = n[r].apply(n, a)) !== n && void 0 !== i ? (l = i && i.jquery ? l.pushStack(i.get()) : i, 
                !1) : void 0 : e.error("no such method '" + r + "' for " + t + " widget instance") : e.error("cannot call methods on " + t + " prior to initialization; attempted to call method '" + r + "'");
            }) : this.each(function() {
                var t = e.data(this, s);
                t ? t.option(r || {})._init() : e.data(this, s, new i(r, this));
            }), l;
        };
    }, e.Widget = function() {}, e.Widget._childConstructors = [], e.Widget.prototype = {
        "widgetName": "widget",
        "widgetEventPrefix": "",
        "defaultElement": "<div>",
        "options": {
            "disabled": !1,
            "create": null
        },
        "_createWidget": function(t, n) {
            n = e(n || this.defaultElement || this)[0], this.element = e(n), this.uuid = i++, 
            this.eventNamespace = "." + this.widgetName + this.uuid, this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), 
            this.bindings = e(), this.hoverable = e(), this.focusable = e(), n !== this && (e.data(n, this.widgetFullName, this), 
            this._on(!0, this.element, {
                "remove": function(e) {
                    e.target === n && this.destroy();
                }
            }), this.document = e(n.style ? n.ownerDocument : n.document || n), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), 
            this._create(), this._trigger("create", null, this._getCreateEventData()), this._init();
        },
        "_getCreateOptions": e.noop,
        "_getCreateEventData": e.noop,
        "_create": e.noop,
        "_init": e.noop,
        "destroy": function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), 
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), 
            this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), 
            this.focusable.removeClass("ui-state-focus");
        },
        "_destroy": e.noop,
        "widget": function() {
            return this.element;
        },
        "option": function(t, i) {
            var n, s, r, o = t;
            if (0 === arguments.length) return e.widget.extend({}, this.options);
            if ("string" == typeof t) if (o = {}, n = t.split("."), t = n.shift(), n.length) {
                for (s = o[t] = e.widget.extend({}, this.options[t]), r = 0; r < n.length - 1; r++) s[n[r]] = s[n[r]] || {}, 
                s = s[n[r]];
                if (t = n.pop(), 1 === arguments.length) return void 0 === s[t] ? null : s[t];
                s[t] = i;
            } else {
                if (1 === arguments.length) return void 0 === this.options[t] ? null : this.options[t];
                o[t] = i;
            }
            return this._setOptions(o), this;
        },
        "_setOptions": function(e) {
            var t;
            for (t in e) this._setOption(t, e[t]);
            return this;
        },
        "_setOption": function(e, t) {
            return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!t).attr("aria-disabled", t), 
            this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), 
            this;
        },
        "enable": function() {
            return this._setOption("disabled", !1);
        },
        "disable": function() {
            return this._setOption("disabled", !0);
        },
        "_on": function(t, i, n) {
            var s, r = this;
            "boolean" != typeof t && (n = i, i = t, t = !1), n ? (i = s = e(i), this.bindings = this.bindings.add(i)) : (n = i, 
            i = this.element, s = this.widget()), e.each(n, function(n, o) {
                function a() {
                    if (t || !0 !== r.options.disabled && !e(this).hasClass("ui-state-disabled")) return ("string" == typeof o ? r[o] : o).apply(r, arguments);
                }
                "string" != typeof o && (a.guid = o.guid = o.guid || a.guid || e.guid++);
                var l = n.match(/^(\w+)\s*(.*)$/), h = l[1] + r.eventNamespace, c = l[2];
                c ? s.delegate(c, h, a) : i.bind(h, a);
            });
        },
        "_off": function(e, t) {
            t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, 
            e.unbind(t).undelegate(t);
        },
        "_delay": function(e, t) {
            var i = this;
            return setTimeout(function() {
                return ("string" == typeof e ? i[e] : e).apply(i, arguments);
            }, t || 0);
        },
        "_hoverable": function(t) {
            this.hoverable = this.hoverable.add(t), this._on(t, {
                "mouseenter": function(t) {
                    e(t.currentTarget).addClass("ui-state-hover");
                },
                "mouseleave": function(t) {
                    e(t.currentTarget).removeClass("ui-state-hover");
                }
            });
        },
        "_focusable": function(t) {
            this.focusable = this.focusable.add(t), this._on(t, {
                "focusin": function(t) {
                    e(t.currentTarget).addClass("ui-state-focus");
                },
                "focusout": function(t) {
                    e(t.currentTarget).removeClass("ui-state-focus");
                }
            });
        },
        "_trigger": function(t, i, n) {
            var s, r, o = this.options[t];
            if (n = n || {}, i = e.Event(i), i.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), 
            i.target = this.element[0], r = i.originalEvent) for (s in r) s in i || (i[s] = r[s]);
            return this.element.trigger(i, n), !(e.isFunction(o) && !1 === o.apply(this.element[0], [ i ].concat(n)) || i.isDefaultPrevented());
        }
    }, e.each({
        "show": "fadeIn",
        "hide": "fadeOut"
    }, function(t, i) {
        e.Widget.prototype["_" + t] = function(n, s, r) {
            "string" == typeof s && (s = {
                "effect": s
            });
            var o, a = s ? !0 === s || "number" == typeof s ? i : s.effect || i : t;
            "number" == typeof (s = s || {}) && (s = {
                "duration": s
            }), o = !e.isEmptyObject(s), s.complete = r, s.delay && n.delay(s.delay), o && e.effects && e.effects.effect[a] ? n[t](s) : a !== t && n[a] ? n[a](s.duration, s.easing, r) : n.queue(function(i) {
                e(this)[t](), r && r.call(n[0]), i();
            });
        };
    });
}(jQuery), function(e, t) {
    var i = !1;
    e(document).mouseup(function() {
        i = !1;
    }), e.widget("ui.mouse", {
        "version": "1.10.4",
        "options": {
            "cancel": "input,textarea,button,select,option",
            "distance": 1,
            "delay": 0
        },
        "_mouseInit": function() {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function(e) {
                return t._mouseDown(e);
            }).bind("click." + this.widgetName, function(i) {
                if (!0 === e.data(i.target, t.widgetName + ".preventClickEvent")) return e.removeData(i.target, t.widgetName + ".preventClickEvent"), 
                i.stopImmediatePropagation(), !1;
            }), this.started = !1;
        },
        "_mouseDestroy": function() {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
        },
        "_mouseDown": function(t) {
            if (!i) {
                this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
                var n = this, s = 1 === t.which, r = !("string" != typeof this.options.cancel || !t.target.nodeName) && e(t.target).closest(this.options.cancel).length;
                return !(s && !r && this._mouseCapture(t)) || (this.mouseDelayMet = !this.options.delay, 
                this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    n.mouseDelayMet = !0;
                }, this.options.delay)), this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(t), 
                !this._mouseStarted) ? (t.preventDefault(), !0) : (!0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), 
                this._mouseMoveDelegate = function(e) {
                    return n._mouseMove(e);
                }, this._mouseUpDelegate = function(e) {
                    return n._mouseUp(e);
                }, e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), 
                t.preventDefault(), i = !0, !0));
            }
        },
        "_mouseMove": function(t) {
            return e.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button ? this._mouseUp(t) : this._mouseStarted ? (this._mouseDrag(t), 
            t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(this._mouseDownEvent, t), 
            this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted);
        },
        "_mouseUp": function(t) {
            return e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), 
            this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), 
            this._mouseStop(t)), !1;
        },
        "_mouseDistanceMet": function(e) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance;
        },
        "_mouseDelayMet": function() {
            return this.mouseDelayMet;
        },
        "_mouseStart": function() {},
        "_mouseDrag": function() {},
        "_mouseStop": function() {},
        "_mouseCapture": function() {
            return !0;
        }
    });
}(jQuery), function(e, t) {
    function i(e, t, i) {
        return [ parseFloat(e[0]) * (d.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (d.test(e[1]) ? i / 100 : 1) ];
    }
    function n(t, i) {
        return parseInt(e.css(t, i), 10) || 0;
    }
    function s(t) {
        var i = t[0];
        return 9 === i.nodeType ? {
            "width": t.width(),
            "height": t.height(),
            "offset": {
                "top": 0,
                "left": 0
            }
        } : e.isWindow(i) ? {
            "width": t.width(),
            "height": t.height(),
            "offset": {
                "top": t.scrollTop(),
                "left": t.scrollLeft()
            }
        } : i.preventDefault ? {
            "width": 0,
            "height": 0,
            "offset": {
                "top": i.pageY,
                "left": i.pageX
            }
        } : {
            "width": t.outerWidth(),
            "height": t.outerHeight(),
            "offset": t.offset()
        };
    }
    e.ui = e.ui || {};
    var r, o = Math.max, a = Math.abs, l = Math.round, h = /left|center|right/, c = /top|center|bottom/, u = /[\+\-]\d+(\.[\d]+)?%?/, p = /^\w+/, d = /%$/, f = e.fn.position;
    e.position = {
        "scrollbarWidth": function() {
            if (void 0 !== r) return r;
            var t, i, n = e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), s = n.children()[0];
            return e("body").append(n), t = s.offsetWidth, n.css("overflow", "scroll"), i = s.offsetWidth, 
            t === i && (i = n[0].clientWidth), n.remove(), r = t - i;
        },
        "getScrollInfo": function(t) {
            var i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"), n = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"), s = "scroll" === i || "auto" === i && t.width < t.element[0].scrollWidth;
            return {
                "width": "scroll" === n || "auto" === n && t.height < t.element[0].scrollHeight ? e.position.scrollbarWidth() : 0,
                "height": s ? e.position.scrollbarWidth() : 0
            };
        },
        "getWithinInfo": function(t) {
            var i = e(t || window), n = e.isWindow(i[0]);
            return {
                "element": i,
                "isWindow": n,
                "isDocument": !!i[0] && 9 === i[0].nodeType,
                "offset": i.offset() || {
                    "left": 0,
                    "top": 0
                },
                "scrollLeft": i.scrollLeft(),
                "scrollTop": i.scrollTop(),
                "width": n ? i.width() : i.outerWidth(),
                "height": n ? i.height() : i.outerHeight()
            };
        }
    }, e.fn.position = function(t) {
        if (!t || !t.of) return f.apply(this, arguments);
        t = e.extend({}, t);
        var r, d, m, g, y, v, L = e(t.of), w = e.position.getWithinInfo(t.within), b = e.position.getScrollInfo(w), C = (t.collision || "flip").split(" "), O = {};
        return v = s(L), L[0].preventDefault && (t.at = "left top"), d = v.width, m = v.height, 
        g = v.offset, y = e.extend({}, g), e.each([ "my", "at" ], function() {
            var e, i, n = (t[this] || "").split(" ");
            1 === n.length && (n = h.test(n[0]) ? n.concat([ "center" ]) : c.test(n[0]) ? [ "center" ].concat(n) : [ "center", "center" ]), 
            n[0] = h.test(n[0]) ? n[0] : "center", n[1] = c.test(n[1]) ? n[1] : "center", e = u.exec(n[0]), 
            i = u.exec(n[1]), O[this] = [ e ? e[0] : 0, i ? i[0] : 0 ], t[this] = [ p.exec(n[0])[0], p.exec(n[1])[0] ];
        }), 1 === C.length && (C[1] = C[0]), "right" === t.at[0] ? y.left += d : "center" === t.at[0] && (y.left += d / 2), 
        "bottom" === t.at[1] ? y.top += m : "center" === t.at[1] && (y.top += m / 2), r = i(O.at, d, m), 
        y.left += r[0], y.top += r[1], this.each(function() {
            var s, h, c = e(this), u = c.outerWidth(), p = c.outerHeight(), f = n(this, "marginLeft"), v = n(this, "marginTop"), S = u + f + n(this, "marginRight") + b.width, x = p + v + n(this, "marginBottom") + b.height, E = e.extend({}, y), A = i(O.my, c.outerWidth(), c.outerHeight());
            "right" === t.my[0] ? E.left -= u : "center" === t.my[0] && (E.left -= u / 2), "bottom" === t.my[1] ? E.top -= p : "center" === t.my[1] && (E.top -= p / 2), 
            E.left += A[0], E.top += A[1], e.support.offsetFractions || (E.left = l(E.left), 
            E.top = l(E.top)), s = {
                "marginLeft": f,
                "marginTop": v
            }, e.each([ "left", "top" ], function(i, n) {
                e.ui.position[C[i]] && e.ui.position[C[i]][n](E, {
                    "targetWidth": d,
                    "targetHeight": m,
                    "elemWidth": u,
                    "elemHeight": p,
                    "collisionPosition": s,
                    "collisionWidth": S,
                    "collisionHeight": x,
                    "offset": [ r[0] + A[0], r[1] + A[1] ],
                    "my": t.my,
                    "at": t.at,
                    "within": w,
                    "elem": c
                });
            }), t.using && (h = function(e) {
                var i = g.left - E.left, n = i + d - u, s = g.top - E.top, r = s + m - p, l = {
                    "target": {
                        "element": L,
                        "left": g.left,
                        "top": g.top,
                        "width": d,
                        "height": m
                    },
                    "element": {
                        "element": c,
                        "left": E.left,
                        "top": E.top,
                        "width": u,
                        "height": p
                    },
                    "horizontal": n < 0 ? "left" : i > 0 ? "right" : "center",
                    "vertical": r < 0 ? "top" : s > 0 ? "bottom" : "middle"
                };
                d < u && a(i + n) < d && (l.horizontal = "center"), m < p && a(s + r) < m && (l.vertical = "middle"), 
                o(a(i), a(n)) > o(a(s), a(r)) ? l.important = "horizontal" : l.important = "vertical", 
                t.using.call(this, e, l);
            }), c.offset(e.extend(E, {
                "using": h
            }));
        });
    }, e.ui.position = {
        "fit": {
            "left": function(e, t) {
                var i, n = t.within, s = n.isWindow ? n.scrollLeft : n.offset.left, r = n.width, a = e.left - t.collisionPosition.marginLeft, l = s - a, h = a + t.collisionWidth - r - s;
                t.collisionWidth > r ? l > 0 && h <= 0 ? (i = e.left + l + t.collisionWidth - r - s, 
                e.left += l - i) : e.left = h > 0 && l <= 0 ? s : l > h ? s + r - t.collisionWidth : s : l > 0 ? e.left += l : h > 0 ? e.left -= h : e.left = o(e.left - a, e.left);
            },
            "top": function(e, t) {
                var i, n = t.within, s = n.isWindow ? n.scrollTop : n.offset.top, r = t.within.height, a = e.top - t.collisionPosition.marginTop, l = s - a, h = a + t.collisionHeight - r - s;
                t.collisionHeight > r ? l > 0 && h <= 0 ? (i = e.top + l + t.collisionHeight - r - s, 
                e.top += l - i) : e.top = h > 0 && l <= 0 ? s : l > h ? s + r - t.collisionHeight : s : l > 0 ? e.top += l : h > 0 ? e.top -= h : e.top = o(e.top - a, e.top);
            }
        },
        "flip": {
            "left": function(e, t) {
                var i, n, s = t.within, r = s.offset.left + s.scrollLeft, o = s.width, l = s.isWindow ? s.scrollLeft : s.offset.left, h = e.left - t.collisionPosition.marginLeft, c = h - l, u = h + t.collisionWidth - o - l, p = "left" === t.my[0] ? -t.elemWidth : "right" === t.my[0] ? t.elemWidth : 0, d = "left" === t.at[0] ? t.targetWidth : "right" === t.at[0] ? -t.targetWidth : 0, f = -2 * t.offset[0];
                c < 0 ? ((i = e.left + p + d + f + t.collisionWidth - o - r) < 0 || i < a(c)) && (e.left += p + d + f) : u > 0 && ((n = e.left - t.collisionPosition.marginLeft + p + d + f - l) > 0 || a(n) < u) && (e.left += p + d + f);
            },
            "top": function(e, t) {
                var i, n, s = t.within, r = s.offset.top + s.scrollTop, o = s.height, l = s.isWindow ? s.scrollTop : s.offset.top, h = e.top - t.collisionPosition.marginTop, c = h - l, u = h + t.collisionHeight - o - l, p = "top" === t.my[1] ? -t.elemHeight : "bottom" === t.my[1] ? t.elemHeight : 0, d = "top" === t.at[1] ? t.targetHeight : "bottom" === t.at[1] ? -t.targetHeight : 0, f = -2 * t.offset[1];
                c < 0 ? (n = e.top + p + d + f + t.collisionHeight - o - r, e.top + p + d + f > c && (n < 0 || n < a(c)) && (e.top += p + d + f)) : u > 0 && (i = e.top - t.collisionPosition.marginTop + p + d + f - l, 
                e.top + p + d + f > u && (i > 0 || a(i) < u) && (e.top += p + d + f));
            }
        },
        "flipfit": {
            "left": function() {
                e.ui.position.flip.left.apply(this, arguments), e.ui.position.fit.left.apply(this, arguments);
            },
            "top": function() {
                e.ui.position.flip.top.apply(this, arguments), e.ui.position.fit.top.apply(this, arguments);
            }
        }
    }, function() {
        var t, i, n, s, r, o = document.getElementsByTagName("body")[0], a = document.createElement("div");
        t = document.createElement(o ? "div" : "body"), n = {
            "visibility": "hidden",
            "width": 0,
            "height": 0,
            "border": 0,
            "margin": 0,
            "background": "none"
        }, o && e.extend(n, {
            "position": "absolute",
            "left": "-1000px",
            "top": "-1000px"
        });
        for (r in n) t.style[r] = n[r];
        t.appendChild(a), (i = o || document.documentElement).insertBefore(t, i.firstChild), 
        a.style.cssText = "position: absolute; left: 10.7432222px;", s = e(a).offset().left, 
        e.support.offsetFractions = s > 10 && s < 11, t.innerHTML = "", i.removeChild(t);
    }();
}(jQuery), function(e, t) {
    var i = 0, n = {}, s = {};
    n.height = n.paddingTop = n.paddingBottom = n.borderTopWidth = n.borderBottomWidth = "hide", 
    s.height = s.paddingTop = s.paddingBottom = s.borderTopWidth = s.borderBottomWidth = "show", 
    e.widget("ui.accordion", {
        "version": "1.10.4",
        "options": {
            "active": 0,
            "animate": {},
            "collapsible": !1,
            "event": "click",
            "header": "> li > :first-child,> :not(li):even",
            "heightStyle": "auto",
            "icons": {
                "activeHeader": "ui-icon-triangle-1-s",
                "header": "ui-icon-triangle-1-e"
            },
            "activate": null,
            "beforeActivate": null
        },
        "_create": function() {
            var t = this.options;
            this.prevShow = this.prevHide = e(), this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist"), 
            t.collapsible || !1 !== t.active && null != t.active || (t.active = 0), this._processPanels(), 
            t.active < 0 && (t.active += this.headers.length), this._refresh();
        },
        "_getCreateEventData": function() {
            return {
                "header": this.active,
                "panel": this.active.length ? this.active.next() : e(),
                "content": this.active.length ? this.active.next() : e()
            };
        },
        "_createIcons": function() {
            var t = this.options.icons;
            t && (e("<span>").addClass("ui-accordion-header-icon ui-icon " + t.header).prependTo(this.headers), 
            this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader), 
            this.headers.addClass("ui-accordion-icons"));
        },
        "_destroyIcons": function() {
            this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove();
        },
        "_destroy": function() {
            var e;
            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"), 
            this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function() {
                /^ui-accordion/.test(this.id) && this.removeAttribute("id");
            }), this._destroyIcons(), e = this.headers.next().css("display", "").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function() {
                /^ui-accordion/.test(this.id) && this.removeAttribute("id");
            }), "content" !== this.options.heightStyle && e.css("height", "");
        },
        "_setOption": function(e, t) {
            "active" !== e ? ("event" === e && (this.options.event && this._off(this.headers, this.options.event), 
            this._setupEvents(t)), this._super(e, t), "collapsible" !== e || t || !1 !== this.options.active || this._activate(0), 
            "icons" === e && (this._destroyIcons(), t && this._createIcons()), "disabled" === e && this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!t)) : this._activate(t);
        },
        "_keydown": function(t) {
            if (!t.altKey && !t.ctrlKey) {
                var i = e.ui.keyCode, n = this.headers.length, s = this.headers.index(t.target), r = !1;
                switch (t.keyCode) {
                  case i.RIGHT:
                  case i.DOWN:
                    r = this.headers[(s + 1) % n];
                    break;

                  case i.LEFT:
                  case i.UP:
                    r = this.headers[(s - 1 + n) % n];
                    break;

                  case i.SPACE:
                  case i.ENTER:
                    this._eventHandler(t);
                    break;

                  case i.HOME:
                    r = this.headers[0];
                    break;

                  case i.END:
                    r = this.headers[n - 1];
                }
                r && (e(t.target).attr("tabIndex", -1), e(r).attr("tabIndex", 0), r.focus(), t.preventDefault());
            }
        },
        "_panelKeyDown": function(t) {
            t.keyCode === e.ui.keyCode.UP && t.ctrlKey && e(t.currentTarget).prev().focus();
        },
        "refresh": function() {
            var t = this.options;
            this._processPanels(), !1 === t.active && !0 === t.collapsible || !this.headers.length ? (t.active = !1, 
            this.active = e()) : !1 === t.active ? this._activate(0) : this.active.length && !e.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (t.active = !1, 
            this.active = e()) : this._activate(Math.max(0, t.active - 1)) : t.active = this.headers.index(this.active), 
            this._destroyIcons(), this._refresh();
        },
        "_processPanels": function() {
            this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"), 
            this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();
        },
        "_refresh": function() {
            var t, n = this.options, s = n.heightStyle, r = this.element.parent(), o = this.accordionId = "ui-accordion-" + (this.element.attr("id") || ++i);
            this.active = this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"), 
            this.active.next().addClass("ui-accordion-content-active").show(), this.headers.attr("role", "tab").each(function(t) {
                var i = e(this), n = i.attr("id"), s = i.next(), r = s.attr("id");
                n || (n = o + "-header-" + t, i.attr("id", n)), r || (r = o + "-panel-" + t, s.attr("id", r)), 
                i.attr("aria-controls", r), s.attr("aria-labelledby", n);
            }).next().attr("role", "tabpanel"), this.headers.not(this.active).attr({
                "aria-selected": "false",
                "aria-expanded": "false",
                "tabIndex": -1
            }).next().attr({
                "aria-hidden": "true"
            }).hide(), this.active.length ? this.active.attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                "tabIndex": 0
            }).next().attr({
                "aria-hidden": "false"
            }) : this.headers.eq(0).attr("tabIndex", 0), this._createIcons(), this._setupEvents(n.event), 
            "fill" === s ? (t = r.height(), this.element.siblings(":visible").each(function() {
                var i = e(this), n = i.css("position");
                "absolute" !== n && "fixed" !== n && (t -= i.outerHeight(!0));
            }), this.headers.each(function() {
                t -= e(this).outerHeight(!0);
            }), this.headers.next().each(function() {
                e(this).height(Math.max(0, t - e(this).innerHeight() + e(this).height()));
            }).css("overflow", "auto")) : "auto" === s && (t = 0, this.headers.next().each(function() {
                t = Math.max(t, e(this).css("height", "").height());
            }).height(t));
        },
        "_activate": function(t) {
            var i = this._findActive(t)[0];
            i !== this.active[0] && (i = i || this.active[0], this._eventHandler({
                "target": i,
                "currentTarget": i,
                "preventDefault": e.noop
            }));
        },
        "_findActive": function(t) {
            return "number" == typeof t ? this.headers.eq(t) : e();
        },
        "_setupEvents": function(t) {
            var i = {
                "keydown": "_keydown"
            };
            t && e.each(t.split(" "), function(e, t) {
                i[t] = "_eventHandler";
            }), this._off(this.headers.add(this.headers.next())), this._on(this.headers, i), 
            this._on(this.headers.next(), {
                "keydown": "_panelKeyDown"
            }), this._hoverable(this.headers), this._focusable(this.headers);
        },
        "_eventHandler": function(t) {
            var i = this.options, n = this.active, s = e(t.currentTarget), r = s[0] === n[0], o = r && i.collapsible, a = o ? e() : s.next(), l = {
                "oldHeader": n,
                "oldPanel": n.next(),
                "newHeader": o ? e() : s,
                "newPanel": a
            };
            t.preventDefault(), r && !i.collapsible || !1 === this._trigger("beforeActivate", t, l) || (i.active = !o && this.headers.index(s), 
            this.active = r ? e() : s, this._toggle(l), n.removeClass("ui-accordion-header-active ui-state-active"), 
            i.icons && n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header), 
            r || (s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"), 
            i.icons && s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader), 
            s.next().addClass("ui-accordion-content-active")));
        },
        "_toggle": function(t) {
            var i = t.newPanel, n = this.prevShow.length ? this.prevShow : t.oldPanel;
            this.prevShow.add(this.prevHide).stop(!0, !0), this.prevShow = i, this.prevHide = n, 
            this.options.animate ? this._animate(i, n, t) : (n.hide(), i.show(), this._toggleComplete(t)), 
            n.attr({
                "aria-hidden": "true"
            }), n.prev().attr("aria-selected", "false"), i.length && n.length ? n.prev().attr({
                "tabIndex": -1,
                "aria-expanded": "false"
            }) : i.length && this.headers.filter(function() {
                return 0 === e(this).attr("tabIndex");
            }).attr("tabIndex", -1), i.attr("aria-hidden", "false").prev().attr({
                "aria-selected": "true",
                "tabIndex": 0,
                "aria-expanded": "true"
            });
        },
        "_animate": function(e, t, i) {
            var r, o, a, l = this, h = 0, c = e.length && (!t.length || e.index() < t.index()), u = this.options.animate || {}, p = c && u.down || u, d = function() {
                l._toggleComplete(i);
            };
            return "number" == typeof p && (a = p), "string" == typeof p && (o = p), o = o || p.easing || u.easing, 
            a = a || p.duration || u.duration, t.length ? e.length ? (r = e.show().outerHeight(), 
            t.animate(n, {
                "duration": a,
                "easing": o,
                "step": function(e, t) {
                    t.now = Math.round(e);
                }
            }), void e.hide().animate(s, {
                "duration": a,
                "easing": o,
                "complete": d,
                "step": function(e, i) {
                    i.now = Math.round(e), "height" !== i.prop ? h += i.now : "content" !== l.options.heightStyle && (i.now = Math.round(r - t.outerHeight() - h), 
                    h = 0);
                }
            })) : t.animate(n, a, o, d) : e.animate(s, a, o, d);
        },
        "_toggleComplete": function(e) {
            var t = e.oldPanel;
            t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"), 
            t.length && (t.parent()[0].className = t.parent()[0].className), this._trigger("activate", null, e);
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.autocomplete", {
        "version": "1.10.4",
        "defaultElement": "<input>",
        "options": {
            "appendTo": null,
            "autoFocus": !1,
            "delay": 300,
            "minLength": 1,
            "position": {
                "my": "left top",
                "at": "left bottom",
                "collision": "none"
            },
            "source": null,
            "change": null,
            "close": null,
            "focus": null,
            "open": null,
            "response": null,
            "search": null,
            "select": null
        },
        "requestIndex": 0,
        "pending": 0,
        "_create": function() {
            var t, i, n, s = this.element[0].nodeName.toLowerCase(), r = "textarea" === s, o = "input" === s;
            this.isMultiLine = !!r || !o && this.element.prop("isContentEditable"), this.valueMethod = this.element[r || o ? "val" : "text"], 
            this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), 
            this._on(this.element, {
                "keydown": function(s) {
                    if (this.element.prop("readOnly")) return t = !0, n = !0, void (i = !0);
                    t = !1, n = !1, i = !1;
                    var r = e.ui.keyCode;
                    switch (s.keyCode) {
                      case r.PAGE_UP:
                        t = !0, this._move("previousPage", s);
                        break;

                      case r.PAGE_DOWN:
                        t = !0, this._move("nextPage", s);
                        break;

                      case r.UP:
                        t = !0, this._keyEvent("previous", s);
                        break;

                      case r.DOWN:
                        t = !0, this._keyEvent("next", s);
                        break;

                      case r.ENTER:
                      case r.NUMPAD_ENTER:
                        this.menu.active && (t = !0, s.preventDefault(), this.menu.select(s));
                        break;

                      case r.TAB:
                        this.menu.active && this.menu.select(s);
                        break;

                      case r.ESCAPE:
                        this.menu.element.is(":visible") && (this._value(this.term), this.close(s), s.preventDefault());
                        break;

                      default:
                        i = !0, this._searchTimeout(s);
                    }
                },
                "keypress": function(n) {
                    if (t) return t = !1, void (this.isMultiLine && !this.menu.element.is(":visible") || n.preventDefault());
                    if (!i) {
                        var s = e.ui.keyCode;
                        switch (n.keyCode) {
                          case s.PAGE_UP:
                            this._move("previousPage", n);
                            break;

                          case s.PAGE_DOWN:
                            this._move("nextPage", n);
                            break;

                          case s.UP:
                            this._keyEvent("previous", n);
                            break;

                          case s.DOWN:
                            this._keyEvent("next", n);
                        }
                    }
                },
                "input": function(e) {
                    if (n) return n = !1, void e.preventDefault();
                    this._searchTimeout(e);
                },
                "focus": function() {
                    this.selectedItem = null, this.previous = this._value();
                },
                "blur": function(e) {
                    this.cancelBlur ? delete this.cancelBlur : (clearTimeout(this.searching), this.close(e), 
                    this._change(e));
                }
            }), this._initSource(), this.menu = e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({
                "role": null
            }).hide().data("ui-menu"), this._on(this.menu.element, {
                "mousedown": function(t) {
                    t.preventDefault(), this.cancelBlur = !0, this._delay(function() {
                        delete this.cancelBlur;
                    });
                    var i = this.menu.element[0];
                    e(t.target).closest(".ui-menu-item").length || this._delay(function() {
                        var t = this;
                        this.document.one("mousedown", function(n) {
                            n.target === t.element[0] || n.target === i || e.contains(i, n.target) || t.close();
                        });
                    });
                },
                "menufocus": function(t, i) {
                    if (this.isNewMenu && (this.isNewMenu = !1, t.originalEvent && /^mouse/.test(t.originalEvent.type))) return this.menu.blur(), 
                    void this.document.one("mousemove", function() {
                        e(t.target).trigger(t.originalEvent);
                    });
                    var n = i.item.data("ui-autocomplete-item");
                    !1 !== this._trigger("focus", t, {
                        "item": n
                    }) ? t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(n.value) : this.liveRegion.text(n.value);
                },
                "menuselect": function(e, t) {
                    var i = t.item.data("ui-autocomplete-item"), n = this.previous;
                    this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = n, 
                    this._delay(function() {
                        this.previous = n, this.selectedItem = i;
                    })), !1 !== this._trigger("select", e, {
                        "item": i
                    }) && this._value(i.value), this.term = this._value(), this.close(e), this.selectedItem = i;
                }
            }), this.liveRegion = e("<span>", {
                "role": "status",
                "aria-live": "polite"
            }).addClass("ui-helper-hidden-accessible").insertBefore(this.element), this._on(this.window, {
                "beforeunload": function() {
                    this.element.removeAttr("autocomplete");
                }
            });
        },
        "_destroy": function() {
            clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), 
            this.menu.element.remove(), this.liveRegion.remove();
        },
        "_setOption": function(e, t) {
            this._super(e, t), "source" === e && this._initSource(), "appendTo" === e && this.menu.element.appendTo(this._appendTo()), 
            "disabled" === e && t && this.xhr && this.xhr.abort();
        },
        "_appendTo": function() {
            var t = this.options.appendTo;
            return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t || (t = this.element.closest(".ui-front")), 
            t.length || (t = this.document[0].body), t;
        },
        "_initSource": function() {
            var t, i, n = this;
            e.isArray(this.options.source) ? (t = this.options.source, this.source = function(i, n) {
                n(e.ui.autocomplete.filter(t, i.term));
            }) : "string" == typeof this.options.source ? (i = this.options.source, this.source = function(t, s) {
                n.xhr && n.xhr.abort(), n.xhr = e.ajax({
                    "url": i,
                    "data": t,
                    "dataType": "json",
                    "success": function(e) {
                        s(e);
                    },
                    "error": function() {
                        s([]);
                    }
                });
            }) : this.source = this.options.source;
        },
        "_searchTimeout": function(e) {
            clearTimeout(this.searching), this.searching = this._delay(function() {
                this.term !== this._value() && (this.selectedItem = null, this.search(null, e));
            }, this.options.delay);
        },
        "search": function(e, t) {
            return e = null != e ? e : this._value(), this.term = this._value(), e.length < this.options.minLength ? this.close(t) : !1 !== this._trigger("search", t) ? this._search(e) : void 0;
        },
        "_search": function(e) {
            this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, 
            this.source({
                "term": e
            }, this._response());
        },
        "_response": function() {
            var t = ++this.requestIndex;
            return e.proxy(function(e) {
                t === this.requestIndex && this.__response(e), --this.pending || this.element.removeClass("ui-autocomplete-loading");
            }, this);
        },
        "__response": function(e) {
            e && (e = this._normalize(e)), this._trigger("response", null, {
                "content": e
            }), !this.options.disabled && e && e.length && !this.cancelSearch ? (this._suggest(e), 
            this._trigger("open")) : this._close();
        },
        "close": function(e) {
            this.cancelSearch = !0, this._close(e);
        },
        "_close": function(e) {
            this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), 
            this.isNewMenu = !0, this._trigger("close", e));
        },
        "_change": function(e) {
            this.previous !== this._value() && this._trigger("change", e, {
                "item": this.selectedItem
            });
        },
        "_normalize": function(t) {
            return t.length && t[0].label && t[0].value ? t : e.map(t, function(t) {
                return "string" == typeof t ? {
                    "label": t,
                    "value": t
                } : e.extend({
                    "label": t.label || t.value,
                    "value": t.value || t.label
                }, t);
            });
        },
        "_suggest": function(t) {
            var i = this.menu.element.empty();
            this._renderMenu(i, t), this.isNewMenu = !0, this.menu.refresh(), i.show(), this._resizeMenu(), 
            i.position(e.extend({
                "of": this.element
            }, this.options.position)), this.options.autoFocus && this.menu.next();
        },
        "_resizeMenu": function() {
            var e = this.menu.element;
            e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()));
        },
        "_renderMenu": function(t, i) {
            var n = this;
            e.each(i, function(e, i) {
                n._renderItemData(t, i);
            });
        },
        "_renderItemData": function(e, t) {
            return this._renderItem(e, t).data("ui-autocomplete-item", t);
        },
        "_renderItem": function(t, i) {
            return e("<li>").append(e("<a>").text(i.label)).appendTo(t);
        },
        "_move": function(e, t) {
            if (this.menu.element.is(":visible")) return this.menu.isFirstItem() && /^previous/.test(e) || this.menu.isLastItem() && /^next/.test(e) ? (this._value(this.term), 
            void this.menu.blur()) : void this.menu[e](t);
            this.search(null, t);
        },
        "widget": function() {
            return this.menu.element;
        },
        "_value": function() {
            return this.valueMethod.apply(this.element, arguments);
        },
        "_keyEvent": function(e, t) {
            this.isMultiLine && !this.menu.element.is(":visible") || (this._move(e, t), t.preventDefault());
        }
    }), e.extend(e.ui.autocomplete, {
        "escapeRegex": function(e) {
            return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
        },
        "filter": function(t, i) {
            var n = new RegExp(e.ui.autocomplete.escapeRegex(i), "i");
            return e.grep(t, function(e) {
                return n.test(e.label || e.value || e);
            });
        }
    }), e.widget("ui.autocomplete", e.ui.autocomplete, {
        "options": {
            "messages": {
                "noResults": "No search results.",
                "results": function(e) {
                    return e + (e > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate.";
                }
            }
        },
        "__response": function(e) {
            var t;
            this._superApply(arguments), this.options.disabled || this.cancelSearch || (t = e && e.length ? this.options.messages.results(e.length) : this.options.messages.noResults, 
            this.liveRegion.text(t));
        }
    });
}(jQuery), function(e, t) {
    var i, n = "ui-button ui-widget ui-state-default ui-corner-all", s = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", r = function() {
        var t = e(this);
        setTimeout(function() {
            t.find(":ui-button").button("refresh");
        }, 1);
    }, o = function(t) {
        var i = t.name, n = t.form, s = e([]);
        return i && (i = i.replace(/'/g, "\\'"), s = n ? e(n).find("[name='" + i + "']") : e("[name='" + i + "']", t.ownerDocument).filter(function() {
            return !this.form;
        })), s;
    };
    e.widget("ui.button", {
        "version": "1.10.4",
        "defaultElement": "<button>",
        "options": {
            "disabled": null,
            "text": !0,
            "label": null,
            "icons": {
                "primary": null,
                "secondary": null
            }
        },
        "_create": function() {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, r), 
            "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled), 
            this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title");
            var t = this, s = this.options, a = "checkbox" === this.type || "radio" === this.type, l = a ? "" : "ui-state-active";
            null === s.label && (s.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()), 
            this._hoverable(this.buttonElement), this.buttonElement.addClass(n).attr("role", "button").bind("mouseenter" + this.eventNamespace, function() {
                s.disabled || this === i && e(this).addClass("ui-state-active");
            }).bind("mouseleave" + this.eventNamespace, function() {
                s.disabled || e(this).removeClass(l);
            }).bind("click" + this.eventNamespace, function(e) {
                s.disabled && (e.preventDefault(), e.stopImmediatePropagation());
            }), this._on({
                "focus": function() {
                    this.buttonElement.addClass("ui-state-focus");
                },
                "blur": function() {
                    this.buttonElement.removeClass("ui-state-focus");
                }
            }), a && this.element.bind("change" + this.eventNamespace, function() {
                t.refresh();
            }), "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (s.disabled) return !1;
            }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (s.disabled) return !1;
                e(this).addClass("ui-state-active"), t.buttonElement.attr("aria-pressed", "true");
                var i = t.element[0];
                o(i).not(i).map(function() {
                    return e(this).button("widget")[0];
                }).removeClass("ui-state-active").attr("aria-pressed", "false");
            }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function() {
                if (s.disabled) return !1;
                e(this).addClass("ui-state-active"), i = this, t.document.one("mouseup", function() {
                    i = null;
                });
            }).bind("mouseup" + this.eventNamespace, function() {
                if (s.disabled) return !1;
                e(this).removeClass("ui-state-active");
            }).bind("keydown" + this.eventNamespace, function(t) {
                if (s.disabled) return !1;
                t.keyCode !== e.ui.keyCode.SPACE && t.keyCode !== e.ui.keyCode.ENTER || e(this).addClass("ui-state-active");
            }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
                e(this).removeClass("ui-state-active");
            }), this.buttonElement.is("a") && this.buttonElement.keyup(function(t) {
                t.keyCode === e.ui.keyCode.SPACE && e(this).click();
            })), this._setOption("disabled", s.disabled), this._resetButton();
        },
        "_determineButtonType": function() {
            var e, t, i;
            this.element.is("[type=checkbox]") ? this.type = "checkbox" : this.element.is("[type=radio]") ? this.type = "radio" : this.element.is("input") ? this.type = "input" : this.type = "button", 
            "checkbox" === this.type || "radio" === this.type ? (e = this.element.parents().last(), 
            t = "label[for='" + this.element.attr("id") + "']", this.buttonElement = e.find(t), 
            this.buttonElement.length || (e = e.length ? e.siblings() : this.element.siblings(), 
            this.buttonElement = e.filter(t), this.buttonElement.length || (this.buttonElement = e.find(t))), 
            this.element.addClass("ui-helper-hidden-accessible"), (i = this.element.is(":checked")) && this.buttonElement.addClass("ui-state-active"), 
            this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element;
        },
        "widget": function() {
            return this.buttonElement;
        },
        "_destroy": function() {
            this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(n + " ui-state-active " + s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), 
            this.hasTitle || this.buttonElement.removeAttr("title");
        },
        "_setOption": function(e, t) {
            if (this._super(e, t), "disabled" === e) return this.element.prop("disabled", !!t), 
            void (t && this.buttonElement.removeClass("ui-state-focus"));
            this._resetButton();
        },
        "refresh": function() {
            var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
            t !== this.options.disabled && this._setOption("disabled", t), "radio" === this.type ? o(this.element[0]).each(function() {
                e(this).is(":checked") ? e(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false");
            }) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"));
        },
        "_resetButton": function() {
            if ("input" !== this.type) {
                var t = this.buttonElement.removeClass(s), i = e("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(), n = this.options.icons, r = n.primary && n.secondary, o = [];
                n.primary || n.secondary ? (this.options.text && o.push("ui-button-text-icon" + (r ? "s" : n.primary ? "-primary" : "-secondary")), 
                n.primary && t.prepend("<span class='ui-button-icon-primary ui-icon " + n.primary + "'></span>"), 
                n.secondary && t.append("<span class='ui-button-icon-secondary ui-icon " + n.secondary + "'></span>"), 
                this.options.text || (o.push(r ? "ui-button-icons-only" : "ui-button-icon-only"), 
                this.hasTitle || t.attr("title", e.trim(i)))) : o.push("ui-button-text-only"), t.addClass(o.join(" "));
            } else this.options.label && this.element.val(this.options.label);
        }
    }), e.widget("ui.buttonset", {
        "version": "1.10.4",
        "options": {
            "items": "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
        },
        "_create": function() {
            this.element.addClass("ui-buttonset");
        },
        "_init": function() {
            this.refresh();
        },
        "_setOption": function(e, t) {
            "disabled" === e && this.buttons.button("option", e, t), this._super(e, t);
        },
        "refresh": function() {
            var t = "rtl" === this.element.css("direction");
            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
                return e(this).button("widget")[0];
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(t ? "ui-corner-left" : "ui-corner-right").end().end();
        },
        "_destroy": function() {
            this.element.removeClass("ui-buttonset"), this.buttons.map(function() {
                return e(this).button("widget")[0];
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
        }
    });
}(jQuery), function(e, t) {
    function i() {
        this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, 
        this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", 
        this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", 
        this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", 
        this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", 
        this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
            "closeText": "Done",
            "prevText": "Prev",
            "nextText": "Next",
            "currentText": "Today",
            "monthNames": [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ],
            "monthNamesShort": [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ],
            "dayNames": [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ],
            "dayNamesShort": [ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" ],
            "dayNamesMin": [ "Su", "Mo", "Tu", "We", "Th", "Fr", "Sa" ],
            "weekHeader": "Wk",
            "dateFormat": "mm/dd/yy",
            "firstDay": 0,
            "isRTL": !1,
            "showMonthAfterYear": !1,
            "yearSuffix": ""
        }, this._defaults = {
            "showOn": "focus",
            "showAnim": "fadeIn",
            "showOptions": {},
            "defaultDate": null,
            "appendText": "",
            "buttonText": "...",
            "buttonImage": "",
            "buttonImageOnly": !1,
            "hideIfNoPrevNext": !1,
            "navigationAsDateFormat": !1,
            "gotoCurrent": !1,
            "changeMonth": !1,
            "changeYear": !1,
            "yearRange": "c-10:c+10",
            "showOtherMonths": !1,
            "selectOtherMonths": !1,
            "showWeek": !1,
            "calculateWeek": this.iso8601Week,
            "shortYearCutoff": "+10",
            "minDate": null,
            "maxDate": null,
            "duration": "fast",
            "beforeShowDay": null,
            "beforeShow": null,
            "onSelect": null,
            "onChangeMonthYear": null,
            "onClose": null,
            "numberOfMonths": 1,
            "showCurrentAtPos": 0,
            "stepMonths": 1,
            "stepBigMonths": 12,
            "altField": "",
            "altFormat": "",
            "constrainInput": !0,
            "showButtonPanel": !1,
            "autoSize": !1,
            "disabled": !1
        }, e.extend(this._defaults, this.regional[""]), this.dpDiv = n(e("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));
    }
    function n(t) {
        var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return t.delegate(i, "mouseout", function() {
            e(this).removeClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).removeClass("ui-datepicker-prev-hover"), 
            -1 !== this.className.indexOf("ui-datepicker-next") && e(this).removeClass("ui-datepicker-next-hover");
        }).delegate(i, "mouseover", function() {
            e.datepicker._isDisabledDatepicker(r.inline ? t.parent()[0] : r.input[0]) || (e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), 
            e(this).addClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).addClass("ui-datepicker-prev-hover"), 
            -1 !== this.className.indexOf("ui-datepicker-next") && e(this).addClass("ui-datepicker-next-hover"));
        });
    }
    function s(t, i) {
        e.extend(t, i);
        for (var n in i) null == i[n] && (t[n] = i[n]);
        return t;
    }
    e.extend(e.ui, {
        "datepicker": {
            "version": "1.10.4"
        }
    });
    var r, o = "datepicker";
    e.extend(i.prototype, {
        "markerClassName": "hasDatepicker",
        "maxRows": 4,
        "_widgetDatepicker": function() {
            return this.dpDiv;
        },
        "setDefaults": function(e) {
            return s(this._defaults, e || {}), this;
        },
        "_attachDatepicker": function(t, i) {
            var n, s, r;
            s = "div" === (n = t.nodeName.toLowerCase()) || "span" === n, t.id || (this.uuid += 1, 
            t.id = "dp" + this.uuid), (r = this._newInst(e(t), s)).settings = e.extend({}, i || {}), 
            "input" === n ? this._connectDatepicker(t, r) : s && this._inlineDatepicker(t, r);
        },
        "_newInst": function(t, i) {
            return {
                "id": t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"),
                "input": t,
                "selectedDay": 0,
                "selectedMonth": 0,
                "selectedYear": 0,
                "drawMonth": 0,
                "drawYear": 0,
                "inline": i,
                "dpDiv": i ? n(e("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
            };
        },
        "_connectDatepicker": function(t, i) {
            var n = e(t);
            i.append = e([]), i.trigger = e([]), n.hasClass(this.markerClassName) || (this._attachments(n, i), 
            n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp), 
            this._autoSize(i), e.data(t, o, i), i.settings.disabled && this._disableDatepicker(t));
        },
        "_attachments": function(t, i) {
            var n, s, r, o = this._get(i, "appendText"), a = this._get(i, "isRTL");
            i.append && i.append.remove(), o && (i.append = e("<span class='" + this._appendClass + "'>" + o + "</span>"), 
            t[a ? "before" : "after"](i.append)), t.unbind("focus", this._showDatepicker), i.trigger && i.trigger.remove(), 
            "focus" !== (n = this._get(i, "showOn")) && "both" !== n || t.focus(this._showDatepicker), 
            "button" !== n && "both" !== n || (s = this._get(i, "buttonText"), r = this._get(i, "buttonImage"), 
            i.trigger = e(this._get(i, "buttonImageOnly") ? e("<img/>").addClass(this._triggerClass).attr({
                "src": r,
                "alt": s,
                "title": s
            }) : e("<button type='button'></button>").addClass(this._triggerClass).html(r ? e("<img/>").attr({
                "src": r,
                "alt": s,
                "title": s
            }) : s)), t[a ? "before" : "after"](i.trigger), i.trigger.click(function() {
                return e.datepicker._datepickerShowing && e.datepicker._lastInput === t[0] ? e.datepicker._hideDatepicker() : e.datepicker._datepickerShowing && e.datepicker._lastInput !== t[0] ? (e.datepicker._hideDatepicker(), 
                e.datepicker._showDatepicker(t[0])) : e.datepicker._showDatepicker(t[0]), !1;
            }));
        },
        "_autoSize": function(e) {
            if (this._get(e, "autoSize") && !e.inline) {
                var t, i, n, s, r = new Date(2009, 11, 20), o = this._get(e, "dateFormat");
                o.match(/[DM]/) && (t = function(e) {
                    for (i = 0, n = 0, s = 0; s < e.length; s++) e[s].length > i && (i = e[s].length, 
                    n = s);
                    return n;
                }, r.setMonth(t(this._get(e, o.match(/MM/) ? "monthNames" : "monthNamesShort"))), 
                r.setDate(t(this._get(e, o.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - r.getDay())), 
                e.input.attr("size", this._formatDate(e, r).length);
            }
        },
        "_inlineDatepicker": function(t, i) {
            var n = e(t);
            n.hasClass(this.markerClassName) || (n.addClass(this.markerClassName).append(i.dpDiv), 
            e.data(t, o, i), this._setDate(i, this._getDefaultDate(i), !0), this._updateDatepicker(i), 
            this._updateAlternate(i), i.settings.disabled && this._disableDatepicker(t), i.dpDiv.css("display", "block"));
        },
        "_dialogDatepicker": function(t, i, n, r, a) {
            var l, h, c, u, p, d = this._dialogInst;
            return d || (this.uuid += 1, l = "dp" + this.uuid, this._dialogInput = e("<input type='text' id='" + l + "' style='position: absolute; top: -100px; width: 0px;'/>"), 
            this._dialogInput.keydown(this._doKeyDown), e("body").append(this._dialogInput), 
            (d = this._dialogInst = this._newInst(this._dialogInput, !1)).settings = {}, e.data(this._dialogInput[0], o, d)), 
            s(d.settings, r || {}), i = i && i.constructor === Date ? this._formatDate(d, i) : i, 
            this._dialogInput.val(i), this._pos = a ? a.length ? a : [ a.pageX, a.pageY ] : null, 
            this._pos || (h = document.documentElement.clientWidth, c = document.documentElement.clientHeight, 
            u = document.documentElement.scrollLeft || document.body.scrollLeft, p = document.documentElement.scrollTop || document.body.scrollTop, 
            this._pos = [ h / 2 - 100 + u, c / 2 - 150 + p ]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), 
            d.settings.onSelect = n, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), 
            this._showDatepicker(this._dialogInput[0]), e.blockUI && e.blockUI(this.dpDiv), 
            e.data(this._dialogInput[0], o, d), this;
        },
        "_destroyDatepicker": function(t) {
            var i, n = e(t), s = e.data(t, o);
            n.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), e.removeData(t, o), 
            "input" === i ? (s.append.remove(), s.trigger.remove(), n.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : "div" !== i && "span" !== i || n.removeClass(this.markerClassName).empty());
        },
        "_enableDatepicker": function(t) {
            var i, n, s = e(t), r = e.data(t, o);
            s.hasClass(this.markerClassName) && ("input" === (i = t.nodeName.toLowerCase()) ? (t.disabled = !1, 
            r.trigger.filter("button").each(function() {
                this.disabled = !1;
            }).end().filter("img").css({
                "opacity": "1.0",
                "cursor": ""
            })) : "div" !== i && "span" !== i || ((n = s.children("." + this._inlineClass)).children().removeClass("ui-state-disabled"), 
            n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)), 
            this._disabledInputs = e.map(this._disabledInputs, function(e) {
                return e === t ? null : e;
            }));
        },
        "_disableDatepicker": function(t) {
            var i, n, s = e(t), r = e.data(t, o);
            s.hasClass(this.markerClassName) && ("input" === (i = t.nodeName.toLowerCase()) ? (t.disabled = !0, 
            r.trigger.filter("button").each(function() {
                this.disabled = !0;
            }).end().filter("img").css({
                "opacity": "0.5",
                "cursor": "default"
            })) : "div" !== i && "span" !== i || ((n = s.children("." + this._inlineClass)).children().addClass("ui-state-disabled"), 
            n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)), 
            this._disabledInputs = e.map(this._disabledInputs, function(e) {
                return e === t ? null : e;
            }), this._disabledInputs[this._disabledInputs.length] = t);
        },
        "_isDisabledDatepicker": function(e) {
            if (!e) return !1;
            for (var t = 0; t < this._disabledInputs.length; t++) if (this._disabledInputs[t] === e) return !0;
            return !1;
        },
        "_getInst": function(t) {
            try {
                return e.data(t, o);
            } catch (e) {
                throw "Missing instance data for this datepicker";
            }
        },
        "_optionDatepicker": function(t, i, n) {
            var r, o, a, l, h = this._getInst(t);
            if (2 === arguments.length && "string" == typeof i) return "defaults" === i ? e.extend({}, e.datepicker._defaults) : h ? "all" === i ? e.extend({}, h.settings) : this._get(h, i) : null;
            r = i || {}, "string" == typeof i && ((r = {})[i] = n), h && (this._curInst === h && this._hideDatepicker(), 
            o = this._getDateDatepicker(t, !0), a = this._getMinMaxDate(h, "min"), l = this._getMinMaxDate(h, "max"), 
            s(h.settings, r), null !== a && void 0 !== r.dateFormat && void 0 === r.minDate && (h.settings.minDate = this._formatDate(h, a)), 
            null !== l && void 0 !== r.dateFormat && void 0 === r.maxDate && (h.settings.maxDate = this._formatDate(h, l)), 
            "disabled" in r && (r.disabled ? this._disableDatepicker(t) : this._enableDatepicker(t)), 
            this._attachments(e(t), h), this._autoSize(h), this._setDate(h, o), this._updateAlternate(h), 
            this._updateDatepicker(h));
        },
        "_changeDatepicker": function(e, t, i) {
            this._optionDatepicker(e, t, i);
        },
        "_refreshDatepicker": function(e) {
            var t = this._getInst(e);
            t && this._updateDatepicker(t);
        },
        "_setDateDatepicker": function(e, t) {
            var i = this._getInst(e);
            i && (this._setDate(i, t), this._updateDatepicker(i), this._updateAlternate(i));
        },
        "_getDateDatepicker": function(e, t) {
            var i = this._getInst(e);
            return i && !i.inline && this._setDateFromField(i, t), i ? this._getDate(i) : null;
        },
        "_doKeyDown": function(t) {
            var i, n, s, r = e.datepicker._getInst(t.target), o = !0, a = r.dpDiv.is(".ui-datepicker-rtl");
            if (r._keyEvent = !0, e.datepicker._datepickerShowing) switch (t.keyCode) {
              case 9:
                e.datepicker._hideDatepicker(), o = !1;
                break;

              case 13:
                return (s = e("td." + e.datepicker._dayOverClass + ":not(." + e.datepicker._currentClass + ")", r.dpDiv))[0] && e.datepicker._selectDay(t.target, r.selectedMonth, r.selectedYear, s[0]), 
                (i = e.datepicker._get(r, "onSelect")) ? (n = e.datepicker._formatDate(r), i.apply(r.input ? r.input[0] : null, [ n, r ])) : e.datepicker._hideDatepicker(), 
                !1;

              case 27:
                e.datepicker._hideDatepicker();
                break;

              case 33:
                e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(r, "stepBigMonths") : -e.datepicker._get(r, "stepMonths"), "M");
                break;

              case 34:
                e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(r, "stepBigMonths") : +e.datepicker._get(r, "stepMonths"), "M");
                break;

              case 35:
                (t.ctrlKey || t.metaKey) && e.datepicker._clearDate(t.target), o = t.ctrlKey || t.metaKey;
                break;

              case 36:
                (t.ctrlKey || t.metaKey) && e.datepicker._gotoToday(t.target), o = t.ctrlKey || t.metaKey;
                break;

              case 37:
                (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, a ? 1 : -1, "D"), 
                o = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(r, "stepBigMonths") : -e.datepicker._get(r, "stepMonths"), "M");
                break;

              case 38:
                (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, -7, "D"), o = t.ctrlKey || t.metaKey;
                break;

              case 39:
                (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, a ? -1 : 1, "D"), 
                o = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(r, "stepBigMonths") : +e.datepicker._get(r, "stepMonths"), "M");
                break;

              case 40:
                (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, 7, "D"), o = t.ctrlKey || t.metaKey;
                break;

              default:
                o = !1;
            } else 36 === t.keyCode && t.ctrlKey ? e.datepicker._showDatepicker(this) : o = !1;
            o && (t.preventDefault(), t.stopPropagation());
        },
        "_doKeyPress": function(t) {
            var i, n, s = e.datepicker._getInst(t.target);
            if (e.datepicker._get(s, "constrainInput")) return i = e.datepicker._possibleChars(e.datepicker._get(s, "dateFormat")), 
            n = String.fromCharCode(null == t.charCode ? t.keyCode : t.charCode), t.ctrlKey || t.metaKey || n < " " || !i || i.indexOf(n) > -1;
        },
        "_doKeyUp": function(t) {
            var i = e.datepicker._getInst(t.target);
            if (i.input.val() !== i.lastVal) try {
                e.datepicker.parseDate(e.datepicker._get(i, "dateFormat"), i.input ? i.input.val() : null, e.datepicker._getFormatConfig(i)) && (e.datepicker._setDateFromField(i), 
                e.datepicker._updateAlternate(i), e.datepicker._updateDatepicker(i));
            } catch (e) {}
            return !0;
        },
        "_showDatepicker": function(t) {
            if ("input" !== (t = t.target || t).nodeName.toLowerCase() && (t = e("input", t.parentNode)[0]), 
            !e.datepicker._isDisabledDatepicker(t) && e.datepicker._lastInput !== t) {
                var i, n, r, o, a, l, h;
                i = e.datepicker._getInst(t), e.datepicker._curInst && e.datepicker._curInst !== i && (e.datepicker._curInst.dpDiv.stop(!0, !0), 
                i && e.datepicker._datepickerShowing && e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])), 
                !1 !== (r = (n = e.datepicker._get(i, "beforeShow")) ? n.apply(t, [ t, i ]) : {}) && (s(i.settings, r), 
                i.lastVal = null, e.datepicker._lastInput = t, e.datepicker._setDateFromField(i), 
                e.datepicker._inDialog && (t.value = ""), e.datepicker._pos || (e.datepicker._pos = e.datepicker._findPos(t), 
                e.datepicker._pos[1] += t.offsetHeight), o = !1, e(t).parents().each(function() {
                    return !(o |= "fixed" === e(this).css("position"));
                }), a = {
                    "left": e.datepicker._pos[0],
                    "top": e.datepicker._pos[1]
                }, e.datepicker._pos = null, i.dpDiv.empty(), i.dpDiv.css({
                    "position": "absolute",
                    "display": "block",
                    "top": "-1000px"
                }), e.datepicker._updateDatepicker(i), a = e.datepicker._checkOffset(i, a, o), i.dpDiv.css({
                    "position": e.datepicker._inDialog && e.blockUI ? "static" : o ? "fixed" : "absolute",
                    "display": "none",
                    "left": a.left + "px",
                    "top": a.top + "px"
                }), i.inline || (l = e.datepicker._get(i, "showAnim"), h = e.datepicker._get(i, "duration"), 
                i.dpDiv.zIndex(e(t).zIndex() + 1), e.datepicker._datepickerShowing = !0, e.effects && e.effects.effect[l] ? i.dpDiv.show(l, e.datepicker._get(i, "showOptions"), h) : i.dpDiv[l || "show"](l ? h : null), 
                e.datepicker._shouldFocusInput(i) && i.input.focus(), e.datepicker._curInst = i));
            }
        },
        "_updateDatepicker": function(t) {
            this.maxRows = 4, r = t, t.dpDiv.empty().append(this._generateHTML(t)), this._attachHandlers(t), 
            t.dpDiv.find("." + this._dayOverClass + " a").mouseover();
            var i, n = this._getNumberOfMonths(t), s = n[1];
            t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), 
            s > 1 && t.dpDiv.addClass("ui-datepicker-multi-" + s).css("width", 17 * s + "em"), 
            t.dpDiv[(1 !== n[0] || 1 !== n[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"), 
            t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), 
            t === e.datepicker._curInst && e.datepicker._datepickerShowing && e.datepicker._shouldFocusInput(t) && t.input.focus(), 
            t.yearshtml && (i = t.yearshtml, setTimeout(function() {
                i === t.yearshtml && t.yearshtml && t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml), 
                i = t.yearshtml = null;
            }, 0));
        },
        "_shouldFocusInput": function(e) {
            return e.input && e.input.is(":visible") && !e.input.is(":disabled") && !e.input.is(":focus");
        },
        "_checkOffset": function(t, i, n) {
            var s = t.dpDiv.outerWidth(), r = t.dpDiv.outerHeight(), o = t.input ? t.input.outerWidth() : 0, a = t.input ? t.input.outerHeight() : 0, l = document.documentElement.clientWidth + (n ? 0 : e(document).scrollLeft()), h = document.documentElement.clientHeight + (n ? 0 : e(document).scrollTop());
            return i.left -= this._get(t, "isRTL") ? s - o : 0, i.left -= n && i.left === t.input.offset().left ? e(document).scrollLeft() : 0, 
            i.top -= n && i.top === t.input.offset().top + a ? e(document).scrollTop() : 0, 
            i.left -= Math.min(i.left, i.left + s > l && l > s ? Math.abs(i.left + s - l) : 0), 
            i.top -= Math.min(i.top, i.top + r > h && h > r ? Math.abs(r + a) : 0), i;
        },
        "_findPos": function(t) {
            for (var i, n = this._getInst(t), s = this._get(n, "isRTL"); t && ("hidden" === t.type || 1 !== t.nodeType || e.expr.filters.hidden(t)); ) t = t[s ? "previousSibling" : "nextSibling"];
            return i = e(t).offset(), [ i.left, i.top ];
        },
        "_hideDatepicker": function(t) {
            var i, n, s, r, a = this._curInst;
            !a || t && a !== e.data(t, o) || this._datepickerShowing && (i = this._get(a, "showAnim"), 
            n = this._get(a, "duration"), s = function() {
                e.datepicker._tidyDialog(a);
            }, e.effects && (e.effects.effect[i] || e.effects[i]) ? a.dpDiv.hide(i, e.datepicker._get(a, "showOptions"), n, s) : a.dpDiv["slideDown" === i ? "slideUp" : "fadeIn" === i ? "fadeOut" : "hide"](i ? n : null, s), 
            i || s(), this._datepickerShowing = !1, (r = this._get(a, "onClose")) && r.apply(a.input ? a.input[0] : null, [ a.input ? a.input.val() : "", a ]), 
            this._lastInput = null, this._inDialog && (this._dialogInput.css({
                "position": "absolute",
                "left": "0",
                "top": "-100px"
            }), e.blockUI && (e.unblockUI(), e("body").append(this.dpDiv))), this._inDialog = !1);
        },
        "_tidyDialog": function(e) {
            e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
        },
        "_checkExternalClick": function(t) {
            if (e.datepicker._curInst) {
                var i = e(t.target), n = e.datepicker._getInst(i[0]);
                (i[0].id === e.datepicker._mainDivId || 0 !== i.parents("#" + e.datepicker._mainDivId).length || i.hasClass(e.datepicker.markerClassName) || i.closest("." + e.datepicker._triggerClass).length || !e.datepicker._datepickerShowing || e.datepicker._inDialog && e.blockUI) && (!i.hasClass(e.datepicker.markerClassName) || e.datepicker._curInst === n) || e.datepicker._hideDatepicker();
            }
        },
        "_adjustDate": function(t, i, n) {
            var s = e(t), r = this._getInst(s[0]);
            this._isDisabledDatepicker(s[0]) || (this._adjustInstDate(r, i + ("M" === n ? this._get(r, "showCurrentAtPos") : 0), n), 
            this._updateDatepicker(r));
        },
        "_gotoToday": function(t) {
            var i, n = e(t), s = this._getInst(n[0]);
            this._get(s, "gotoCurrent") && s.currentDay ? (s.selectedDay = s.currentDay, s.drawMonth = s.selectedMonth = s.currentMonth, 
            s.drawYear = s.selectedYear = s.currentYear) : (i = new Date(), s.selectedDay = i.getDate(), 
            s.drawMonth = s.selectedMonth = i.getMonth(), s.drawYear = s.selectedYear = i.getFullYear()), 
            this._notifyChange(s), this._adjustDate(n);
        },
        "_selectMonthYear": function(t, i, n) {
            var s = e(t), r = this._getInst(s[0]);
            r["selected" + ("M" === n ? "Month" : "Year")] = r["draw" + ("M" === n ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10), 
            this._notifyChange(r), this._adjustDate(s);
        },
        "_selectDay": function(t, i, n, s) {
            var r, o = e(t);
            e(s).hasClass(this._unselectableClass) || this._isDisabledDatepicker(o[0]) || ((r = this._getInst(o[0])).selectedDay = r.currentDay = e("a", s).html(), 
            r.selectedMonth = r.currentMonth = i, r.selectedYear = r.currentYear = n, this._selectDate(t, this._formatDate(r, r.currentDay, r.currentMonth, r.currentYear)));
        },
        "_clearDate": function(t) {
            var i = e(t);
            this._selectDate(i, "");
        },
        "_selectDate": function(t, i) {
            var n, s = e(t), r = this._getInst(s[0]);
            i = null != i ? i : this._formatDate(r), r.input && r.input.val(i), this._updateAlternate(r), 
            (n = this._get(r, "onSelect")) ? n.apply(r.input ? r.input[0] : null, [ i, r ]) : r.input && r.input.trigger("change"), 
            r.inline ? this._updateDatepicker(r) : (this._hideDatepicker(), this._lastInput = r.input[0], 
            "object" != typeof r.input[0] && r.input.focus(), this._lastInput = null);
        },
        "_updateAlternate": function(t) {
            var i, n, s, r = this._get(t, "altField");
            r && (i = this._get(t, "altFormat") || this._get(t, "dateFormat"), n = this._getDate(t), 
            s = this.formatDate(i, n, this._getFormatConfig(t)), e(r).each(function() {
                e(this).val(s);
            }));
        },
        "noWeekends": function(e) {
            var t = e.getDay();
            return [ t > 0 && t < 6, "" ];
        },
        "iso8601Week": function(e) {
            var t, i = new Date(e.getTime());
            return i.setDate(i.getDate() + 4 - (i.getDay() || 7)), t = i.getTime(), i.setMonth(0), 
            i.setDate(1), Math.floor(Math.round((t - i) / 864e5) / 7) + 1;
        },
        "parseDate": function(t, i, n) {
            if (null == t || null == i) throw "Invalid arguments";
            if ("" === (i = "object" == typeof i ? i.toString() : i + "")) return null;
            var s, r, o, a, l = 0, h = (n ? n.shortYearCutoff : null) || this._defaults.shortYearCutoff, c = "string" != typeof h ? h : new Date().getFullYear() % 100 + parseInt(h, 10), u = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort, p = (n ? n.dayNames : null) || this._defaults.dayNames, d = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort, f = (n ? n.monthNames : null) || this._defaults.monthNames, m = -1, g = -1, y = -1, v = -1, L = !1, w = function(e) {
                var i = s + 1 < t.length && t.charAt(s + 1) === e;
                return i && s++, i;
            }, b = function(e) {
                var t = w(e), n = "@" === e ? 14 : "!" === e ? 20 : "y" === e && t ? 4 : "o" === e ? 3 : 2, s = new RegExp("^\\d{1," + n + "}"), r = i.substring(l).match(s);
                if (!r) throw "Missing number at position " + l;
                return l += r[0].length, parseInt(r[0], 10);
            }, C = function(t, n, s) {
                var r = -1, o = e.map(w(t) ? s : n, function(e, t) {
                    return [ [ t, e ] ];
                }).sort(function(e, t) {
                    return -(e[1].length - t[1].length);
                });
                if (e.each(o, function(e, t) {
                    var n = t[1];
                    if (i.substr(l, n.length).toLowerCase() === n.toLowerCase()) return r = t[0], l += n.length, 
                    !1;
                }), -1 !== r) return r + 1;
                throw "Unknown name at position " + l;
            }, O = function() {
                if (i.charAt(l) !== t.charAt(s)) throw "Unexpected literal at position " + l;
                l++;
            };
            for (s = 0; s < t.length; s++) if (L) "'" !== t.charAt(s) || w("'") ? O() : L = !1; else switch (t.charAt(s)) {
              case "d":
                y = b("d");
                break;

              case "D":
                C("D", u, p);
                break;

              case "o":
                v = b("o");
                break;

              case "m":
                g = b("m");
                break;

              case "M":
                g = C("M", d, f);
                break;

              case "y":
                m = b("y");
                break;

              case "@":
                m = (a = new Date(b("@"))).getFullYear(), g = a.getMonth() + 1, y = a.getDate();
                break;

              case "!":
                m = (a = new Date((b("!") - this._ticksTo1970) / 1e4)).getFullYear(), g = a.getMonth() + 1, 
                y = a.getDate();
                break;

              case "'":
                w("'") ? O() : L = !0;
                break;

              default:
                O();
            }
            if (l < i.length && (o = i.substr(l), !/^\s+/.test(o))) throw "Extra/unparsed characters found in date: " + o;
            if (-1 === m ? m = new Date().getFullYear() : m < 100 && (m += new Date().getFullYear() - new Date().getFullYear() % 100 + (m <= c ? 0 : -100)), 
            v > -1) for (g = 1, y = v; ;) {
                if (r = this._getDaysInMonth(m, g - 1), y <= r) break;
                g++, y -= r;
            }
            if ((a = this._daylightSavingAdjust(new Date(m, g - 1, y))).getFullYear() !== m || a.getMonth() + 1 !== g || a.getDate() !== y) throw "Invalid date";
            return a;
        },
        "ATOM": "yy-mm-dd",
        "COOKIE": "D, dd M yy",
        "ISO_8601": "yy-mm-dd",
        "RFC_822": "D, d M y",
        "RFC_850": "DD, dd-M-y",
        "RFC_1036": "D, d M y",
        "RFC_1123": "D, d M yy",
        "RFC_2822": "D, d M yy",
        "RSS": "D, d M y",
        "TICKS": "!",
        "TIMESTAMP": "@",
        "W3C": "yy-mm-dd",
        "_ticksTo1970": 24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 60 * 60 * 1e7,
        "formatDate": function(e, t, i) {
            if (!t) return "";
            var n, s = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort, r = (i ? i.dayNames : null) || this._defaults.dayNames, o = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort, a = (i ? i.monthNames : null) || this._defaults.monthNames, l = function(t) {
                var i = n + 1 < e.length && e.charAt(n + 1) === t;
                return i && n++, i;
            }, h = function(e, t, i) {
                var n = "" + t;
                if (l(e)) for (;n.length < i; ) n = "0" + n;
                return n;
            }, c = function(e, t, i, n) {
                return l(e) ? n[t] : i[t];
            }, u = "", p = !1;
            if (t) for (n = 0; n < e.length; n++) if (p) "'" !== e.charAt(n) || l("'") ? u += e.charAt(n) : p = !1; else switch (e.charAt(n)) {
              case "d":
                u += h("d", t.getDate(), 2);
                break;

              case "D":
                u += c("D", t.getDay(), s, r);
                break;

              case "o":
                u += h("o", Math.round((new Date(t.getFullYear(), t.getMonth(), t.getDate()).getTime() - new Date(t.getFullYear(), 0, 0).getTime()) / 864e5), 3);
                break;

              case "m":
                u += h("m", t.getMonth() + 1, 2);
                break;

              case "M":
                u += c("M", t.getMonth(), o, a);
                break;

              case "y":
                u += l("y") ? t.getFullYear() : (t.getYear() % 100 < 10 ? "0" : "") + t.getYear() % 100;
                break;

              case "@":
                u += t.getTime();
                break;

              case "!":
                u += 1e4 * t.getTime() + this._ticksTo1970;
                break;

              case "'":
                l("'") ? u += "'" : p = !0;
                break;

              default:
                u += e.charAt(n);
            }
            return u;
        },
        "_possibleChars": function(e) {
            var t, i = "", n = !1, s = function(i) {
                var n = t + 1 < e.length && e.charAt(t + 1) === i;
                return n && t++, n;
            };
            for (t = 0; t < e.length; t++) if (n) "'" !== e.charAt(t) || s("'") ? i += e.charAt(t) : n = !1; else switch (e.charAt(t)) {
              case "d":
              case "m":
              case "y":
              case "@":
                i += "0123456789";
                break;

              case "D":
              case "M":
                return null;

              case "'":
                s("'") ? i += "'" : n = !0;
                break;

              default:
                i += e.charAt(t);
            }
            return i;
        },
        "_get": function(e, t) {
            return void 0 !== e.settings[t] ? e.settings[t] : this._defaults[t];
        },
        "_setDateFromField": function(e, t) {
            if (e.input.val() !== e.lastVal) {
                var i = this._get(e, "dateFormat"), n = e.lastVal = e.input ? e.input.val() : null, s = this._getDefaultDate(e), r = s, o = this._getFormatConfig(e);
                try {
                    r = this.parseDate(i, n, o) || s;
                } catch (e) {
                    n = t ? "" : n;
                }
                e.selectedDay = r.getDate(), e.drawMonth = e.selectedMonth = r.getMonth(), e.drawYear = e.selectedYear = r.getFullYear(), 
                e.currentDay = n ? r.getDate() : 0, e.currentMonth = n ? r.getMonth() : 0, e.currentYear = n ? r.getFullYear() : 0, 
                this._adjustInstDate(e);
            }
        },
        "_getDefaultDate": function(e) {
            return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date()));
        },
        "_determineDate": function(t, i, n) {
            var s = null == i || "" === i ? n : "string" == typeof i ? function(i) {
                try {
                    return e.datepicker.parseDate(e.datepicker._get(t, "dateFormat"), i, e.datepicker._getFormatConfig(t));
                } catch (e) {}
                for (var n = (i.toLowerCase().match(/^c/) ? e.datepicker._getDate(t) : null) || new Date(), s = n.getFullYear(), r = n.getMonth(), o = n.getDate(), a = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, l = a.exec(i); l; ) {
                    switch (l[2] || "d") {
                      case "d":
                      case "D":
                        o += parseInt(l[1], 10);
                        break;

                      case "w":
                      case "W":
                        o += 7 * parseInt(l[1], 10);
                        break;

                      case "m":
                      case "M":
                        r += parseInt(l[1], 10), o = Math.min(o, e.datepicker._getDaysInMonth(s, r));
                        break;

                      case "y":
                      case "Y":
                        s += parseInt(l[1], 10), o = Math.min(o, e.datepicker._getDaysInMonth(s, r));
                    }
                    l = a.exec(i);
                }
                return new Date(s, r, o);
            }(i) : "number" == typeof i ? isNaN(i) ? n : function(e) {
                var t = new Date();
                return t.setDate(t.getDate() + e), t;
            }(i) : new Date(i.getTime());
            return (s = s && "Invalid Date" === s.toString() ? n : s) && (s.setHours(0), s.setMinutes(0), 
            s.setSeconds(0), s.setMilliseconds(0)), this._daylightSavingAdjust(s);
        },
        "_daylightSavingAdjust": function(e) {
            return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null;
        },
        "_setDate": function(e, t, i) {
            var n = !t, s = e.selectedMonth, r = e.selectedYear, o = this._restrictMinMax(e, this._determineDate(e, t, new Date()));
            e.selectedDay = e.currentDay = o.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = o.getMonth(), 
            e.drawYear = e.selectedYear = e.currentYear = o.getFullYear(), s === e.selectedMonth && r === e.selectedYear || i || this._notifyChange(e), 
            this._adjustInstDate(e), e.input && e.input.val(n ? "" : this._formatDate(e));
        },
        "_getDate": function(e) {
            return !e.currentYear || e.input && "" === e.input.val() ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
        },
        "_attachHandlers": function(t) {
            var i = this._get(t, "stepMonths"), n = "#" + t.id.replace(/\\\\/g, "\\");
            t.dpDiv.find("[data-handler]").map(function() {
                var t = {
                    "prev": function() {
                        e.datepicker._adjustDate(n, -i, "M");
                    },
                    "next": function() {
                        e.datepicker._adjustDate(n, +i, "M");
                    },
                    "hide": function() {
                        e.datepicker._hideDatepicker();
                    },
                    "today": function() {
                        e.datepicker._gotoToday(n);
                    },
                    "selectDay": function() {
                        return e.datepicker._selectDay(n, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), 
                        !1;
                    },
                    "selectMonth": function() {
                        return e.datepicker._selectMonthYear(n, this, "M"), !1;
                    },
                    "selectYear": function() {
                        return e.datepicker._selectMonthYear(n, this, "Y"), !1;
                    }
                };
                e(this).bind(this.getAttribute("data-event"), t[this.getAttribute("data-handler")]);
            });
        },
        "_generateHTML": function(e) {
            var t, i, n, s, r, o, a, l, h, c, u, p, d, f, m, g, y, v, L, w, b, C, O, S, x, E, A, _, F, N, T, M, k, D, P, R, I, B, z, $ = new Date(), U = this._daylightSavingAdjust(new Date($.getFullYear(), $.getMonth(), $.getDate())), H = this._get(e, "isRTL"), W = this._get(e, "showButtonPanel"), G = this._get(e, "hideIfNoPrevNext"), V = this._get(e, "navigationAsDateFormat"), j = this._getNumberOfMonths(e), q = this._get(e, "showCurrentAtPos"), X = this._get(e, "stepMonths"), K = 1 !== j[0] || 1 !== j[1], Y = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)), Z = this._getMinMaxDate(e, "min"), Q = this._getMinMaxDate(e, "max"), J = e.drawMonth - q, ee = e.drawYear;
            if (J < 0 && (J += 12, ee--), Q) for (t = this._daylightSavingAdjust(new Date(Q.getFullYear(), Q.getMonth() - j[0] * j[1] + 1, Q.getDate())), 
            t = Z && t < Z ? Z : t; this._daylightSavingAdjust(new Date(ee, J, 1)) > t; ) --J < 0 && (J = 11, 
            ee--);
            for (e.drawMonth = J, e.drawYear = ee, i = this._get(e, "prevText"), i = V ? this.formatDate(i, this._daylightSavingAdjust(new Date(ee, J - X, 1)), this._getFormatConfig(e)) : i, 
            n = this._canAdjustMonth(e, -1, ee, J) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "e" : "w") + "'>" + i + "</span></a>" : G ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "e" : "w") + "'>" + i + "</span></a>", 
            s = this._get(e, "nextText"), s = V ? this.formatDate(s, this._daylightSavingAdjust(new Date(ee, J + X, 1)), this._getFormatConfig(e)) : s, 
            r = this._canAdjustMonth(e, 1, ee, J) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + s + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "w" : "e") + "'>" + s + "</span></a>" : G ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + s + "'><span class='ui-icon ui-icon-circle-triangle-" + (H ? "w" : "e") + "'>" + s + "</span></a>", 
            o = this._get(e, "currentText"), a = this._get(e, "gotoCurrent") && e.currentDay ? Y : U, 
            o = V ? this.formatDate(o, a, this._getFormatConfig(e)) : o, l = e.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(e, "closeText") + "</button>", 
            h = W ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (H ? l : "") + (this._isInRange(e, a) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + o + "</button>" : "") + (H ? "" : l) + "</div>" : "", 
            c = parseInt(this._get(e, "firstDay"), 10), c = isNaN(c) ? 0 : c, u = this._get(e, "showWeek"), 
            p = this._get(e, "dayNames"), d = this._get(e, "dayNamesMin"), f = this._get(e, "monthNames"), 
            m = this._get(e, "monthNamesShort"), g = this._get(e, "beforeShowDay"), y = this._get(e, "showOtherMonths"), 
            v = this._get(e, "selectOtherMonths"), L = this._getDefaultDate(e), w = "", C = 0; C < j[0]; C++) {
                for (O = "", this.maxRows = 4, S = 0; S < j[1]; S++) {
                    if (x = this._daylightSavingAdjust(new Date(ee, J, e.selectedDay)), E = " ui-corner-all", 
                    A = "", K) {
                        if (A += "<div class='ui-datepicker-group", j[1] > 1) switch (S) {
                          case 0:
                            A += " ui-datepicker-group-first", E = " ui-corner-" + (H ? "right" : "left");
                            break;

                          case j[1] - 1:
                            A += " ui-datepicker-group-last", E = " ui-corner-" + (H ? "left" : "right");
                            break;

                          default:
                            A += " ui-datepicker-group-middle", E = "";
                        }
                        A += "'>";
                    }
                    for (A += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + E + "'>" + (/all|left/.test(E) && 0 === C ? H ? r : n : "") + (/all|right/.test(E) && 0 === C ? H ? n : r : "") + this._generateMonthYearHeader(e, J, ee, Z, Q, C > 0 || S > 0, f, m) + "</div><table class='ui-datepicker-calendar'><thead><tr>", 
                    _ = u ? "<th class='ui-datepicker-week-col'>" + this._get(e, "weekHeader") + "</th>" : "", 
                    b = 0; b < 7; b++) F = (b + c) % 7, _ += "<th" + ((b + c + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + p[F] + "'>" + d[F] + "</span></th>";
                    for (A += _ + "</tr></thead><tbody>", N = this._getDaysInMonth(ee, J), ee === e.selectedYear && J === e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, N)), 
                    T = (this._getFirstDayOfMonth(ee, J) - c + 7) % 7, M = Math.ceil((T + N) / 7), k = K && this.maxRows > M ? this.maxRows : M, 
                    this.maxRows = k, D = this._daylightSavingAdjust(new Date(ee, J, 1 - T)), P = 0; P < k; P++) {
                        for (A += "<tr>", R = u ? "<td class='ui-datepicker-week-col'>" + this._get(e, "calculateWeek")(D) + "</td>" : "", 
                        b = 0; b < 7; b++) I = g ? g.apply(e.input ? e.input[0] : null, [ D ]) : [ !0, "" ], 
                        z = (B = D.getMonth() !== J) && !v || !I[0] || Z && D < Z || Q && D > Q, R += "<td class='" + ((b + c + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (B ? " ui-datepicker-other-month" : "") + (D.getTime() === x.getTime() && J === e.selectedMonth && e._keyEvent || L.getTime() === D.getTime() && L.getTime() === x.getTime() ? " " + this._dayOverClass : "") + (z ? " " + this._unselectableClass + " ui-state-disabled" : "") + (B && !y ? "" : " " + I[1] + (D.getTime() === Y.getTime() ? " " + this._currentClass : "") + (D.getTime() === U.getTime() ? " ui-datepicker-today" : "")) + "'" + (B && !y || !I[2] ? "" : " title='" + I[2].replace(/'/g, "&#39;") + "'") + (z ? "" : " data-handler='selectDay' data-event='click' data-month='" + D.getMonth() + "' data-year='" + D.getFullYear() + "'") + ">" + (B && !y ? "&#xa0;" : z ? "<span class='ui-state-default'>" + D.getDate() + "</span>" : "<a class='ui-state-default" + (D.getTime() === U.getTime() ? " ui-state-highlight" : "") + (D.getTime() === Y.getTime() ? " ui-state-active" : "") + (B ? " ui-priority-secondary" : "") + "' href='#'>" + D.getDate() + "</a>") + "</td>", 
                        D.setDate(D.getDate() + 1), D = this._daylightSavingAdjust(D);
                        A += R + "</tr>";
                    }
                    ++J > 11 && (J = 0, ee++), O += A += "</tbody></table>" + (K ? "</div>" + (j[0] > 0 && S === j[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : "");
                }
                w += O;
            }
            return w += h, e._keyEvent = !1, w;
        },
        "_generateMonthYearHeader": function(e, t, i, n, s, r, o, a) {
            var l, h, c, u, p, d, f, m, g = this._get(e, "changeMonth"), y = this._get(e, "changeYear"), v = this._get(e, "showMonthAfterYear"), L = "<div class='ui-datepicker-title'>", w = "";
            if (r || !g) w += "<span class='ui-datepicker-month'>" + o[t] + "</span>"; else {
                for (l = n && n.getFullYear() === i, h = s && s.getFullYear() === i, w += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>", 
                c = 0; c < 12; c++) (!l || c >= n.getMonth()) && (!h || c <= s.getMonth()) && (w += "<option value='" + c + "'" + (c === t ? " selected='selected'" : "") + ">" + a[c] + "</option>");
                w += "</select>";
            }
            if (v || (L += w + (!r && g && y ? "" : "&#xa0;")), !e.yearshtml) if (e.yearshtml = "", 
            r || !y) L += "<span class='ui-datepicker-year'>" + i + "</span>"; else {
                for (u = this._get(e, "yearRange").split(":"), p = new Date().getFullYear(), f = (d = function(e) {
                    var t = e.match(/c[+\-].*/) ? i + parseInt(e.substring(1), 10) : e.match(/[+\-].*/) ? p + parseInt(e, 10) : parseInt(e, 10);
                    return isNaN(t) ? p : t;
                })(u[0]), m = Math.max(f, d(u[1] || "")), f = n ? Math.max(f, n.getFullYear()) : f, 
                m = s ? Math.min(m, s.getFullYear()) : m, e.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; f <= m; f++) e.yearshtml += "<option value='" + f + "'" + (f === i ? " selected='selected'" : "") + ">" + f + "</option>";
                e.yearshtml += "</select>", L += e.yearshtml, e.yearshtml = null;
            }
            return L += this._get(e, "yearSuffix"), v && (L += (!r && g && y ? "" : "&#xa0;") + w), 
            L += "</div>";
        },
        "_adjustInstDate": function(e, t, i) {
            var n = e.drawYear + ("Y" === i ? t : 0), s = e.drawMonth + ("M" === i ? t : 0), r = Math.min(e.selectedDay, this._getDaysInMonth(n, s)) + ("D" === i ? t : 0), o = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(n, s, r)));
            e.selectedDay = o.getDate(), e.drawMonth = e.selectedMonth = o.getMonth(), e.drawYear = e.selectedYear = o.getFullYear(), 
            "M" !== i && "Y" !== i || this._notifyChange(e);
        },
        "_restrictMinMax": function(e, t) {
            var i = this._getMinMaxDate(e, "min"), n = this._getMinMaxDate(e, "max"), s = i && t < i ? i : t;
            return n && s > n ? n : s;
        },
        "_notifyChange": function(e) {
            var t = this._get(e, "onChangeMonthYear");
            t && t.apply(e.input ? e.input[0] : null, [ e.selectedYear, e.selectedMonth + 1, e ]);
        },
        "_getNumberOfMonths": function(e) {
            var t = this._get(e, "numberOfMonths");
            return null == t ? [ 1, 1 ] : "number" == typeof t ? [ 1, t ] : t;
        },
        "_getMinMaxDate": function(e, t) {
            return this._determineDate(e, this._get(e, t + "Date"), null);
        },
        "_getDaysInMonth": function(e, t) {
            return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate();
        },
        "_getFirstDayOfMonth": function(e, t) {
            return new Date(e, t, 1).getDay();
        },
        "_canAdjustMonth": function(e, t, i, n) {
            var s = this._getNumberOfMonths(e), r = this._daylightSavingAdjust(new Date(i, n + (t < 0 ? t : s[0] * s[1]), 1));
            return t < 0 && r.setDate(this._getDaysInMonth(r.getFullYear(), r.getMonth())), 
            this._isInRange(e, r);
        },
        "_isInRange": function(e, t) {
            var i, n, s = this._getMinMaxDate(e, "min"), r = this._getMinMaxDate(e, "max"), o = null, a = null, l = this._get(e, "yearRange");
            return l && (i = l.split(":"), n = new Date().getFullYear(), o = parseInt(i[0], 10), 
            a = parseInt(i[1], 10), i[0].match(/[+\-].*/) && (o += n), i[1].match(/[+\-].*/) && (a += n)), 
            (!s || t.getTime() >= s.getTime()) && (!r || t.getTime() <= r.getTime()) && (!o || t.getFullYear() >= o) && (!a || t.getFullYear() <= a);
        },
        "_getFormatConfig": function(e) {
            var t = this._get(e, "shortYearCutoff");
            return t = "string" != typeof t ? t : new Date().getFullYear() % 100 + parseInt(t, 10), 
            {
                "shortYearCutoff": t,
                "dayNamesShort": this._get(e, "dayNamesShort"),
                "dayNames": this._get(e, "dayNames"),
                "monthNamesShort": this._get(e, "monthNamesShort"),
                "monthNames": this._get(e, "monthNames")
            };
        },
        "_formatDate": function(e, t, i, n) {
            t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
            var s = t ? "object" == typeof t ? t : this._daylightSavingAdjust(new Date(n, i, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return this.formatDate(this._get(e, "dateFormat"), s, this._getFormatConfig(e));
        }
    }), e.fn.datepicker = function(t) {
        if (!this.length) return this;
        e.datepicker.initialized || (e(document).mousedown(e.datepicker._checkExternalClick), 
        e.datepicker.initialized = !0), 0 === e("#" + e.datepicker._mainDivId).length && e("body").append(e.datepicker.dpDiv);
        var i = Array.prototype.slice.call(arguments, 1);
        return "string" != typeof t || "isDisabled" !== t && "getDate" !== t && "widget" !== t ? "option" === t && 2 === arguments.length && "string" == typeof arguments[1] ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [ this[0] ].concat(i)) : this.each(function() {
            "string" == typeof t ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [ this ].concat(i)) : e.datepicker._attachDatepicker(this, t);
        }) : e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [ this[0] ].concat(i));
    }, e.datepicker = new i(), e.datepicker.initialized = !1, e.datepicker.uuid = new Date().getTime(), 
    e.datepicker.version = "1.10.4";
}(jQuery), function(e, t) {
    var i = {
        "buttons": !0,
        "height": !0,
        "maxHeight": !0,
        "maxWidth": !0,
        "minHeight": !0,
        "minWidth": !0,
        "width": !0
    }, n = {
        "maxHeight": !0,
        "maxWidth": !0,
        "minHeight": !0,
        "minWidth": !0
    };
    e.widget("ui.dialog", {
        "version": "1.10.4",
        "options": {
            "appendTo": "body",
            "autoOpen": !0,
            "buttons": [],
            "closeOnEscape": !0,
            "closeText": "close",
            "dialogClass": "",
            "draggable": !0,
            "hide": null,
            "height": "auto",
            "maxHeight": null,
            "maxWidth": null,
            "minHeight": 150,
            "minWidth": 150,
            "modal": !1,
            "position": {
                "my": "center",
                "at": "center",
                "of": window,
                "collision": "fit",
                "using": function(t) {
                    var i = e(this).css(t).offset().top;
                    i < 0 && e(this).css("top", t.top - i);
                }
            },
            "resizable": !0,
            "show": null,
            "title": null,
            "width": 300,
            "beforeClose": null,
            "close": null,
            "drag": null,
            "dragStart": null,
            "dragStop": null,
            "focus": null,
            "open": null,
            "resize": null,
            "resizeStart": null,
            "resizeStop": null
        },
        "_create": function() {
            this.originalCss = {
                "display": this.element[0].style.display,
                "width": this.element[0].style.width,
                "minHeight": this.element[0].style.minHeight,
                "maxHeight": this.element[0].style.maxHeight,
                "height": this.element[0].style.height
            }, this.originalPosition = {
                "parent": this.element.parent(),
                "index": this.element.parent().children().index(this.element)
            }, this.originalTitle = this.element.attr("title"), this.options.title = this.options.title || this.originalTitle, 
            this._createWrapper(), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog), 
            this._createTitlebar(), this._createButtonPane(), this.options.draggable && e.fn.draggable && this._makeDraggable(), 
            this.options.resizable && e.fn.resizable && this._makeResizable(), this._isOpen = !1;
        },
        "_init": function() {
            this.options.autoOpen && this.open();
        },
        "_appendTo": function() {
            var t = this.options.appendTo;
            return t && (t.jquery || t.nodeType) ? e(t) : this.document.find(t || "body").eq(0);
        },
        "_destroy": function() {
            var e, t = this.originalPosition;
            this._destroyOverlay(), this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(), 
            this.uiDialog.stop(!0, !0).remove(), this.originalTitle && this.element.attr("title", this.originalTitle), 
            (e = t.parent.children().eq(t.index)).length && e[0] !== this.element[0] ? e.before(this.element) : t.parent.append(this.element);
        },
        "widget": function() {
            return this.uiDialog;
        },
        "disable": e.noop,
        "enable": e.noop,
        "close": function(t) {
            var i, n = this;
            if (this._isOpen && !1 !== this._trigger("beforeClose", t)) {
                if (this._isOpen = !1, this._destroyOverlay(), !this.opener.filter(":focusable").focus().length) try {
                    (i = this.document[0].activeElement) && "body" !== i.nodeName.toLowerCase() && e(i).blur();
                } catch (e) {}
                this._hide(this.uiDialog, this.options.hide, function() {
                    n._trigger("close", t);
                });
            }
        },
        "isOpen": function() {
            return this._isOpen;
        },
        "moveToTop": function() {
            this._moveToTop();
        },
        "_moveToTop": function(e, t) {
            var i = !!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
            return i && !t && this._trigger("focus", e), i;
        },
        "open": function() {
            var t = this;
            this._isOpen ? this._moveToTop() && this._focusTabbable() : (this._isOpen = !0, 
            this.opener = e(this.document[0].activeElement), this._size(), this._position(), 
            this._createOverlay(), this._moveToTop(null, !0), this._show(this.uiDialog, this.options.show, function() {
                t._focusTabbable(), t._trigger("focus");
            }), this._trigger("open"));
        },
        "_focusTabbable": function() {
            var e = this.element.find("[autofocus]");
            e.length || (e = this.element.find(":tabbable")), e.length || (e = this.uiDialogButtonPane.find(":tabbable")), 
            e.length || (e = this.uiDialogTitlebarClose.filter(":tabbable")), e.length || (e = this.uiDialog), 
            e.eq(0).focus();
        },
        "_keepFocus": function(t) {
            function i() {
                var t = this.document[0].activeElement;
                this.uiDialog[0] === t || e.contains(this.uiDialog[0], t) || this._focusTabbable();
            }
            t.preventDefault(), i.call(this), this._delay(i);
        },
        "_createWrapper": function() {
            this.uiDialog = e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({
                "tabIndex": -1,
                "role": "dialog"
            }).appendTo(this._appendTo()), this._on(this.uiDialog, {
                "keydown": function(t) {
                    if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === e.ui.keyCode.ESCAPE) return t.preventDefault(), 
                    void this.close(t);
                    if (t.keyCode === e.ui.keyCode.TAB) {
                        var i = this.uiDialog.find(":tabbable"), n = i.filter(":first"), s = i.filter(":last");
                        t.target !== s[0] && t.target !== this.uiDialog[0] || t.shiftKey ? t.target !== n[0] && t.target !== this.uiDialog[0] || !t.shiftKey || (s.focus(1), 
                        t.preventDefault()) : (n.focus(1), t.preventDefault());
                    }
                },
                "mousedown": function(e) {
                    this._moveToTop(e) && this._focusTabbable();
                }
            }), this.element.find("[aria-describedby]").length || this.uiDialog.attr({
                "aria-describedby": this.element.uniqueId().attr("id")
            });
        },
        "_createTitlebar": function() {
            var t;
            this.uiDialogTitlebar = e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog), 
            this._on(this.uiDialogTitlebar, {
                "mousedown": function(t) {
                    e(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus();
                }
            }), this.uiDialogTitlebarClose = e("<button type='button'></button>").button({
                "label": this.options.closeText,
                "icons": {
                    "primary": "ui-icon-closethick"
                },
                "text": !1
            }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar), this._on(this.uiDialogTitlebarClose, {
                "click": function(e) {
                    e.preventDefault(), this.close(e);
                }
            }), t = e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar), 
            this._title(t), this.uiDialog.attr({
                "aria-labelledby": t.attr("id")
            });
        },
        "_title": function(e) {
            this.options.title || e.html("&#160;"), e.text(this.options.title);
        },
        "_createButtonPane": function() {
            this.uiDialogButtonPane = e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), 
            this.uiButtonSet = e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane), 
            this._createButtons();
        },
        "_createButtons": function() {
            var t = this, i = this.options.buttons;
            this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), e.isEmptyObject(i) || e.isArray(i) && !i.length ? this.uiDialog.removeClass("ui-dialog-buttons") : (e.each(i, function(i, n) {
                var s, r;
                n = e.isFunction(n) ? {
                    "click": n,
                    "text": i
                } : n, n = e.extend({
                    "type": "button"
                }, n), s = n.click, n.click = function() {
                    s.apply(t.element[0], arguments);
                }, r = {
                    "icons": n.icons,
                    "text": n.showText
                }, delete n.icons, delete n.showText, e("<button></button>", n).button(r).appendTo(t.uiButtonSet);
            }), this.uiDialog.addClass("ui-dialog-buttons"), this.uiDialogButtonPane.appendTo(this.uiDialog));
        },
        "_makeDraggable": function() {
            function t(e) {
                return {
                    "position": e.position,
                    "offset": e.offset
                };
            }
            var i = this, n = this.options;
            this.uiDialog.draggable({
                "cancel": ".ui-dialog-content, .ui-dialog-titlebar-close",
                "handle": ".ui-dialog-titlebar",
                "containment": "document",
                "start": function(n, s) {
                    e(this).addClass("ui-dialog-dragging"), i._blockFrames(), i._trigger("dragStart", n, t(s));
                },
                "drag": function(e, n) {
                    i._trigger("drag", e, t(n));
                },
                "stop": function(s, r) {
                    n.position = [ r.position.left - i.document.scrollLeft(), r.position.top - i.document.scrollTop() ], 
                    e(this).removeClass("ui-dialog-dragging"), i._unblockFrames(), i._trigger("dragStop", s, t(r));
                }
            });
        },
        "_makeResizable": function() {
            function t(e) {
                return {
                    "originalPosition": e.originalPosition,
                    "originalSize": e.originalSize,
                    "position": e.position,
                    "size": e.size
                };
            }
            var i = this, n = this.options, s = n.resizable, r = this.uiDialog.css("position"), o = "string" == typeof s ? s : "n,e,s,w,se,sw,ne,nw";
            this.uiDialog.resizable({
                "cancel": ".ui-dialog-content",
                "containment": "document",
                "alsoResize": this.element,
                "maxWidth": n.maxWidth,
                "maxHeight": n.maxHeight,
                "minWidth": n.minWidth,
                "minHeight": this._minHeight(),
                "handles": o,
                "start": function(n, s) {
                    e(this).addClass("ui-dialog-resizing"), i._blockFrames(), i._trigger("resizeStart", n, t(s));
                },
                "resize": function(e, n) {
                    i._trigger("resize", e, t(n));
                },
                "stop": function(s, r) {
                    n.height = e(this).height(), n.width = e(this).width(), e(this).removeClass("ui-dialog-resizing"), 
                    i._unblockFrames(), i._trigger("resizeStop", s, t(r));
                }
            }).css("position", r);
        },
        "_minHeight": function() {
            var e = this.options;
            return "auto" === e.height ? e.minHeight : Math.min(e.minHeight, e.height);
        },
        "_position": function() {
            var e = this.uiDialog.is(":visible");
            e || this.uiDialog.show(), this.uiDialog.position(this.options.position), e || this.uiDialog.hide();
        },
        "_setOptions": function(t) {
            var s = this, r = !1, o = {};
            e.each(t, function(e, t) {
                s._setOption(e, t), e in i && (r = !0), e in n && (o[e] = t);
            }), r && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", o);
        },
        "_setOption": function(e, t) {
            var i, n, s = this.uiDialog;
            "dialogClass" === e && s.removeClass(this.options.dialogClass).addClass(t), "disabled" !== e && (this._super(e, t), 
            "appendTo" === e && this.uiDialog.appendTo(this._appendTo()), "buttons" === e && this._createButtons(), 
            "closeText" === e && this.uiDialogTitlebarClose.button({
                "label": "" + t
            }), "draggable" === e && ((i = s.is(":data(ui-draggable)")) && !t && s.draggable("destroy"), 
            !i && t && this._makeDraggable()), "position" === e && this._position(), "resizable" === e && ((n = s.is(":data(ui-resizable)")) && !t && s.resizable("destroy"), 
            n && "string" == typeof t && s.resizable("option", "handles", t), n || !1 === t || this._makeResizable()), 
            "title" === e && this._title(this.uiDialogTitlebar.find(".ui-dialog-title")));
        },
        "_size": function() {
            var e, t, i, n = this.options;
            this.element.show().css({
                "width": "auto",
                "minHeight": 0,
                "maxHeight": "none",
                "height": 0
            }), n.minWidth > n.width && (n.width = n.minWidth), e = this.uiDialog.css({
                "height": "auto",
                "width": n.width
            }).outerHeight(), t = Math.max(0, n.minHeight - e), i = "number" == typeof n.maxHeight ? Math.max(0, n.maxHeight - e) : "none", 
            "auto" === n.height ? this.element.css({
                "minHeight": t,
                "maxHeight": i,
                "height": "auto"
            }) : this.element.height(Math.max(0, n.height - e)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight());
        },
        "_blockFrames": function() {
            this.iframeBlocks = this.document.find("iframe").map(function() {
                var t = e(this);
                return e("<div>").css({
                    "position": "absolute",
                    "width": t.outerWidth(),
                    "height": t.outerHeight()
                }).appendTo(t.parent()).offset(t.offset())[0];
            });
        },
        "_unblockFrames": function() {
            this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks);
        },
        "_allowInteraction": function(t) {
            return !!e(t.target).closest(".ui-dialog").length || !!e(t.target).closest(".ui-datepicker").length;
        },
        "_createOverlay": function() {
            if (this.options.modal) {
                var t = this, i = this.widgetFullName;
                e.ui.dialog.overlayInstances || this._delay(function() {
                    e.ui.dialog.overlayInstances && this.document.bind("focusin.dialog", function(n) {
                        t._allowInteraction(n) || (n.preventDefault(), e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable());
                    });
                }), this.overlay = e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()), 
                this._on(this.overlay, {
                    "mousedown": "_keepFocus"
                }), e.ui.dialog.overlayInstances++;
            }
        },
        "_destroyOverlay": function() {
            this.options.modal && this.overlay && (e.ui.dialog.overlayInstances--, e.ui.dialog.overlayInstances || this.document.unbind("focusin.dialog"), 
            this.overlay.remove(), this.overlay = null);
        }
    }), e.ui.dialog.overlayInstances = 0, !1 !== e.uiBackCompat && e.widget("ui.dialog", e.ui.dialog, {
        "_position": function() {
            var t, i = this.options.position, n = [], s = [ 0, 0 ];
            i ? (("string" == typeof i || "object" == typeof i && "0" in i) && (1 === (n = i.split ? i.split(" ") : [ i[0], i[1] ]).length && (n[1] = n[0]), 
            e.each([ "left", "top" ], function(e, t) {
                +n[e] === n[e] && (s[e] = n[e], n[e] = t);
            }), i = {
                "my": n[0] + (s[0] < 0 ? s[0] : "+" + s[0]) + " " + n[1] + (s[1] < 0 ? s[1] : "+" + s[1]),
                "at": n.join(" ")
            }), i = e.extend({}, e.ui.dialog.prototype.options.position, i)) : i = e.ui.dialog.prototype.options.position, 
            (t = this.uiDialog.is(":visible")) || this.uiDialog.show(), this.uiDialog.position(i), 
            t || this.uiDialog.hide();
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.draggable", e.ui.mouse, {
        "version": "1.10.4",
        "widgetEventPrefix": "drag",
        "options": {
            "addClasses": !0,
            "appendTo": "parent",
            "axis": !1,
            "connectToSortable": !1,
            "containment": !1,
            "cursor": "auto",
            "cursorAt": !1,
            "grid": !1,
            "handle": !1,
            "helper": "original",
            "iframeFix": !1,
            "opacity": !1,
            "refreshPositions": !1,
            "revert": !1,
            "revertDuration": 500,
            "scope": "default",
            "scroll": !0,
            "scrollSensitivity": 20,
            "scrollSpeed": 20,
            "snap": !1,
            "snapMode": "both",
            "snapTolerance": 20,
            "stack": !1,
            "zIndex": !1,
            "drag": null,
            "start": null,
            "stop": null
        },
        "_create": function() {
            "original" !== this.options.helper || /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative"), 
            this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), 
            this._mouseInit();
        },
        "_destroy": function() {
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), 
            this._mouseDestroy();
        },
        "_mouseCapture": function(t) {
            var i = this.options;
            return !(this.helper || i.disabled || e(t.target).closest(".ui-resizable-handle").length > 0) && (this.handle = this._getHandle(t), 
            !!this.handle && (e(!0 === i.iframeFix ? "iframe" : i.iframeFix).each(function() {
                e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({
                    "width": this.offsetWidth + "px",
                    "height": this.offsetHeight + "px",
                    "position": "absolute",
                    "opacity": "0.001",
                    "zIndex": 1e3
                }).css(e(this).offset()).appendTo("body");
            }), !0));
        },
        "_mouseStart": function(t) {
            var i = this.options;
            return this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), 
            this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), 
            this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(), 
            this.offsetParent = this.helper.offsetParent(), this.offsetParentCssPosition = this.offsetParent.css("position"), 
            this.offset = this.positionAbs = this.element.offset(), this.offset = {
                "top": this.offset.top - this.margins.top,
                "left": this.offset.left - this.margins.left
            }, this.offset.scroll = !1, e.extend(this.offset, {
                "click": {
                    "left": t.pageX - this.offset.left,
                    "top": t.pageY - this.offset.top
                },
                "parent": this._getParentOffset(),
                "relative": this._getRelativeOffset()
            }), this.originalPosition = this.position = this._generatePosition(t), this.originalPageX = t.pageX, 
            this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), 
            this._setContainment(), !1 === this._trigger("start", t) ? (this._clear(), !1) : (this._cacheHelperProportions(), 
            e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._mouseDrag(t, !0), 
            e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0);
        },
        "_mouseDrag": function(t, i) {
            if ("fixed" === this.offsetParentCssPosition && (this.offset.parent = this._getParentOffset()), 
            this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), 
            !i) {
                var n = this._uiHash();
                if (!1 === this._trigger("drag", t, n)) return this._mouseUp({}), !1;
                this.position = n.position;
            }
            return this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), 
            this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), 
            e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1;
        },
        "_mouseStop": function(t) {
            var i = this, n = !1;
            return e.ui.ddmanager && !this.options.dropBehaviour && (n = e.ui.ddmanager.drop(this, t)), 
            this.dropped && (n = this.dropped, this.dropped = !1), !("original" === this.options.helper && !e.contains(this.element[0].ownerDocument, this.element[0])) && ("invalid" === this.options.revert && !n || "valid" === this.options.revert && n || !0 === this.options.revert || e.isFunction(this.options.revert) && this.options.revert.call(this.element, n) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                !1 !== i._trigger("stop", t) && i._clear();
            }) : !1 !== this._trigger("stop", t) && this._clear(), !1);
        },
        "_mouseUp": function(t) {
            return e("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this);
            }), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), e.ui.mouse.prototype._mouseUp.call(this, t);
        },
        "cancel": function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), 
            this;
        },
        "_getHandle": function(t) {
            return !this.options.handle || !!e(t.target).closest(this.element.find(this.options.handle)).length;
        },
        "_createHelper": function(t) {
            var i = this.options, n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [ t ])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element;
            return n.parents("body").length || n.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), 
            n[0] === this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"), 
            n;
        },
        "_adjustOffsetFromHelper": function(t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                "left": +t[0],
                "top": +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), 
            "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top);
        },
        "_getParentOffset": function() {
            var t = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), 
            t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                "top": 0,
                "left": 0
            }), {
                "top": t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                "left": t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        "_getRelativeOffset": function() {
            if ("relative" === this.cssPosition) {
                var e = this.element.position();
                return {
                    "top": e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    "left": e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                };
            }
            return {
                "top": 0,
                "left": 0
            };
        },
        "_cacheMargins": function() {
            this.margins = {
                "left": parseInt(this.element.css("marginLeft"), 10) || 0,
                "top": parseInt(this.element.css("marginTop"), 10) || 0,
                "right": parseInt(this.element.css("marginRight"), 10) || 0,
                "bottom": parseInt(this.element.css("marginBottom"), 10) || 0
            };
        },
        "_cacheHelperProportions": function() {
            this.helperProportions = {
                "width": this.helper.outerWidth(),
                "height": this.helper.outerHeight()
            };
        },
        "_setContainment": function() {
            var t, i, n, s = this.options;
            s.containment ? "window" !== s.containment ? "document" !== s.containment ? s.containment.constructor !== Array ? ("parent" === s.containment && (s.containment = this.helper[0].parentNode), 
            (n = (i = e(s.containment))[0]) && (t = "hidden" !== i.css("overflow"), this.containment = [ (parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (t ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom ], 
            this.relative_container = i)) : this.containment = s.containment : this.containment = [ 0, 0, e(document).width() - this.helperProportions.width - this.margins.left, (e(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ] : this.containment = [ e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ] : this.containment = null;
        },
        "_convertPositionTo": function(t, i) {
            i || (i = this.position);
            var n = "absolute" === t ? 1 : -1, s = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent;
            return this.offset.scroll || (this.offset.scroll = {
                "top": s.scrollTop(),
                "left": s.scrollLeft()
            }), {
                "top": i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top) * n,
                "left": i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left) * n
            };
        },
        "_generatePosition": function(t) {
            var i, n, s, r, o = this.options, a = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, l = t.pageX, h = t.pageY;
            return this.offset.scroll || (this.offset.scroll = {
                "top": a.scrollTop(),
                "left": a.scrollLeft()
            }), this.originalPosition && (this.containment && (this.relative_container ? (n = this.relative_container.offset(), 
            i = [ this.containment[0] + n.left, this.containment[1] + n.top, this.containment[2] + n.left, this.containment[3] + n.top ]) : i = this.containment, 
            t.pageX - this.offset.click.left < i[0] && (l = i[0] + this.offset.click.left), 
            t.pageY - this.offset.click.top < i[1] && (h = i[1] + this.offset.click.top), t.pageX - this.offset.click.left > i[2] && (l = i[2] + this.offset.click.left), 
            t.pageY - this.offset.click.top > i[3] && (h = i[3] + this.offset.click.top)), o.grid && (s = o.grid[1] ? this.originalPageY + Math.round((h - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY, 
            h = i ? s - this.offset.click.top >= i[1] || s - this.offset.click.top > i[3] ? s : s - this.offset.click.top >= i[1] ? s - o.grid[1] : s + o.grid[1] : s, 
            r = o.grid[0] ? this.originalPageX + Math.round((l - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX, 
            l = i ? r - this.offset.click.left >= i[0] || r - this.offset.click.left > i[2] ? r : r - this.offset.click.left >= i[0] ? r - o.grid[0] : r + o.grid[0] : r)), 
            {
                "top": h - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top),
                "left": l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left)
            };
        },
        "_clear": function() {
            this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), 
            this.helper = null, this.cancelHelperRemoval = !1;
        },
        "_trigger": function(t, i, n) {
            return n = n || this._uiHash(), e.ui.plugin.call(this, t, [ i, n ]), "drag" === t && (this.positionAbs = this._convertPositionTo("absolute")), 
            e.Widget.prototype._trigger.call(this, t, i, n);
        },
        "plugins": {},
        "_uiHash": function() {
            return {
                "helper": this.helper,
                "position": this.position,
                "originalPosition": this.originalPosition,
                "offset": this.positionAbs
            };
        }
    }), e.ui.plugin.add("draggable", "connectToSortable", {
        "start": function(t, i) {
            var n = e(this).data("ui-draggable"), s = n.options, r = e.extend({}, i, {
                "item": n.element
            });
            n.sortables = [], e(s.connectToSortable).each(function() {
                var i = e.data(this, "ui-sortable");
                i && !i.options.disabled && (n.sortables.push({
                    "instance": i,
                    "shouldRevert": i.options.revert
                }), i.refreshPositions(), i._trigger("activate", t, r));
            });
        },
        "stop": function(t, i) {
            var n = e(this).data("ui-draggable"), s = e.extend({}, i, {
                "item": n.element
            });
            e.each(n.sortables, function() {
                this.instance.isOver ? (this.instance.isOver = 0, n.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, 
                this.shouldRevert && (this.instance.options.revert = this.shouldRevert), this.instance._mouseStop(t), 
                this.instance.options.helper = this.instance.options._helper, "original" === n.options.helper && this.instance.currentItem.css({
                    "top": "auto",
                    "left": "auto"
                })) : (this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", t, s));
            });
        },
        "drag": function(t, i) {
            var n = e(this).data("ui-draggable"), s = this;
            e.each(n.sortables, function() {
                var r = !1, o = this;
                this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, 
                this.instance.offset.click = n.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (r = !0, 
                e.each(n.sortables, function() {
                    return this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, 
                    this.instance.offset.click = n.offset.click, this !== o && this.instance._intersectsWith(this.instance.containerCache) && e.contains(o.instance.element[0], this.instance.element[0]) && (r = !1), 
                    r;
                })), r ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", !0), 
                this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function() {
                    return i.helper[0];
                }, t.target = this.instance.currentItem[0], this.instance._mouseCapture(t, !0), 
                this.instance._mouseStart(t, !0, !0), this.instance.offset.click.top = n.offset.click.top, 
                this.instance.offset.click.left = n.offset.click.left, this.instance.offset.parent.left -= n.offset.parent.left - this.instance.offset.parent.left, 
                this.instance.offset.parent.top -= n.offset.parent.top - this.instance.offset.parent.top, 
                n._trigger("toSortable", t), n.dropped = this.instance.element, n.currentItem = n.element, 
                this.instance.fromOutside = n), this.instance.currentItem && this.instance._mouseDrag(t)) : this.instance.isOver && (this.instance.isOver = 0, 
                this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", t, this.instance._uiHash(this.instance)), 
                this.instance._mouseStop(t, !0), this.instance.options.helper = this.instance.options._helper, 
                this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), 
                n._trigger("fromSortable", t), n.dropped = !1);
            });
        }
    }), e.ui.plugin.add("draggable", "cursor", {
        "start": function() {
            var t = e("body"), i = e(this).data("ui-draggable").options;
            t.css("cursor") && (i._cursor = t.css("cursor")), t.css("cursor", i.cursor);
        },
        "stop": function() {
            var t = e(this).data("ui-draggable").options;
            t._cursor && e("body").css("cursor", t._cursor);
        }
    }), e.ui.plugin.add("draggable", "opacity", {
        "start": function(t, i) {
            var n = e(i.helper), s = e(this).data("ui-draggable").options;
            n.css("opacity") && (s._opacity = n.css("opacity")), n.css("opacity", s.opacity);
        },
        "stop": function(t, i) {
            var n = e(this).data("ui-draggable").options;
            n._opacity && e(i.helper).css("opacity", n._opacity);
        }
    }), e.ui.plugin.add("draggable", "scroll", {
        "start": function() {
            var t = e(this).data("ui-draggable");
            t.scrollParent[0] !== document && "HTML" !== t.scrollParent[0].tagName && (t.overflowOffset = t.scrollParent.offset());
        },
        "drag": function(t) {
            var i = e(this).data("ui-draggable"), n = i.options, s = !1;
            i.scrollParent[0] !== document && "HTML" !== i.scrollParent[0].tagName ? (n.axis && "x" === n.axis || (i.overflowOffset.top + i.scrollParent[0].offsetHeight - t.pageY < n.scrollSensitivity ? i.scrollParent[0].scrollTop = s = i.scrollParent[0].scrollTop + n.scrollSpeed : t.pageY - i.overflowOffset.top < n.scrollSensitivity && (i.scrollParent[0].scrollTop = s = i.scrollParent[0].scrollTop - n.scrollSpeed)), 
            n.axis && "y" === n.axis || (i.overflowOffset.left + i.scrollParent[0].offsetWidth - t.pageX < n.scrollSensitivity ? i.scrollParent[0].scrollLeft = s = i.scrollParent[0].scrollLeft + n.scrollSpeed : t.pageX - i.overflowOffset.left < n.scrollSensitivity && (i.scrollParent[0].scrollLeft = s = i.scrollParent[0].scrollLeft - n.scrollSpeed))) : (n.axis && "x" === n.axis || (t.pageY - e(document).scrollTop() < n.scrollSensitivity ? s = e(document).scrollTop(e(document).scrollTop() - n.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < n.scrollSensitivity && (s = e(document).scrollTop(e(document).scrollTop() + n.scrollSpeed))), 
            n.axis && "y" === n.axis || (t.pageX - e(document).scrollLeft() < n.scrollSensitivity ? s = e(document).scrollLeft(e(document).scrollLeft() - n.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < n.scrollSensitivity && (s = e(document).scrollLeft(e(document).scrollLeft() + n.scrollSpeed)))), 
            !1 !== s && e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(i, t);
        }
    }), e.ui.plugin.add("draggable", "snap", {
        "start": function() {
            var t = e(this).data("ui-draggable"), i = t.options;
            t.snapElements = [], e(i.snap.constructor !== String ? i.snap.items || ":data(ui-draggable)" : i.snap).each(function() {
                var i = e(this), n = i.offset();
                this !== t.element[0] && t.snapElements.push({
                    "item": this,
                    "width": i.outerWidth(),
                    "height": i.outerHeight(),
                    "top": n.top,
                    "left": n.left
                });
            });
        },
        "drag": function(t, i) {
            var n, s, r, o, a, l, h, c, u, p, d = e(this).data("ui-draggable"), f = d.options, m = f.snapTolerance, g = i.offset.left, y = g + d.helperProportions.width, v = i.offset.top, L = v + d.helperProportions.height;
            for (u = d.snapElements.length - 1; u >= 0; u--) l = (a = d.snapElements[u].left) + d.snapElements[u].width, 
            c = (h = d.snapElements[u].top) + d.snapElements[u].height, y < a - m || g > l + m || L < h - m || v > c + m || !e.contains(d.snapElements[u].item.ownerDocument, d.snapElements[u].item) ? (d.snapElements[u].snapping && d.options.snap.release && d.options.snap.release.call(d.element, t, e.extend(d._uiHash(), {
                "snapItem": d.snapElements[u].item
            })), d.snapElements[u].snapping = !1) : ("inner" !== f.snapMode && (n = Math.abs(h - L) <= m, 
            s = Math.abs(c - v) <= m, r = Math.abs(a - y) <= m, o = Math.abs(l - g) <= m, n && (i.position.top = d._convertPositionTo("relative", {
                "top": h - d.helperProportions.height,
                "left": 0
            }).top - d.margins.top), s && (i.position.top = d._convertPositionTo("relative", {
                "top": c,
                "left": 0
            }).top - d.margins.top), r && (i.position.left = d._convertPositionTo("relative", {
                "top": 0,
                "left": a - d.helperProportions.width
            }).left - d.margins.left), o && (i.position.left = d._convertPositionTo("relative", {
                "top": 0,
                "left": l
            }).left - d.margins.left)), p = n || s || r || o, "outer" !== f.snapMode && (n = Math.abs(h - v) <= m, 
            s = Math.abs(c - L) <= m, r = Math.abs(a - g) <= m, o = Math.abs(l - y) <= m, n && (i.position.top = d._convertPositionTo("relative", {
                "top": h,
                "left": 0
            }).top - d.margins.top), s && (i.position.top = d._convertPositionTo("relative", {
                "top": c - d.helperProportions.height,
                "left": 0
            }).top - d.margins.top), r && (i.position.left = d._convertPositionTo("relative", {
                "top": 0,
                "left": a
            }).left - d.margins.left), o && (i.position.left = d._convertPositionTo("relative", {
                "top": 0,
                "left": l - d.helperProportions.width
            }).left - d.margins.left)), !d.snapElements[u].snapping && (n || s || r || o || p) && d.options.snap.snap && d.options.snap.snap.call(d.element, t, e.extend(d._uiHash(), {
                "snapItem": d.snapElements[u].item
            })), d.snapElements[u].snapping = n || s || r || o || p);
        }
    }), e.ui.plugin.add("draggable", "stack", {
        "start": function() {
            var t, i = this.data("ui-draggable").options, n = e.makeArray(e(i.stack)).sort(function(t, i) {
                return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(i).css("zIndex"), 10) || 0);
            });
            n.length && (t = parseInt(e(n[0]).css("zIndex"), 10) || 0, e(n).each(function(i) {
                e(this).css("zIndex", t + i);
            }), this.css("zIndex", t + n.length));
        }
    }), e.ui.plugin.add("draggable", "zIndex", {
        "start": function(t, i) {
            var n = e(i.helper), s = e(this).data("ui-draggable").options;
            n.css("zIndex") && (s._zIndex = n.css("zIndex")), n.css("zIndex", s.zIndex);
        },
        "stop": function(t, i) {
            var n = e(this).data("ui-draggable").options;
            n._zIndex && e(i.helper).css("zIndex", n._zIndex);
        }
    });
}(jQuery), function(e, t) {
    function i(e, t, i) {
        return e > t && e < t + i;
    }
    e.widget("ui.droppable", {
        "version": "1.10.4",
        "widgetEventPrefix": "drop",
        "options": {
            "accept": "*",
            "activeClass": !1,
            "addClasses": !0,
            "greedy": !1,
            "hoverClass": !1,
            "scope": "default",
            "tolerance": "intersect",
            "activate": null,
            "deactivate": null,
            "drop": null,
            "out": null,
            "over": null
        },
        "_create": function() {
            var t, i = this.options, n = i.accept;
            this.isover = !1, this.isout = !0, this.accept = e.isFunction(n) ? n : function(e) {
                return e.is(n);
            }, this.proportions = function() {
                if (!arguments.length) return t || (t = {
                    "width": this.element[0].offsetWidth,
                    "height": this.element[0].offsetHeight
                });
                t = arguments[0];
            }, e.ui.ddmanager.droppables[i.scope] = e.ui.ddmanager.droppables[i.scope] || [], 
            e.ui.ddmanager.droppables[i.scope].push(this), i.addClasses && this.element.addClass("ui-droppable");
        },
        "_destroy": function() {
            for (var t = 0, i = e.ui.ddmanager.droppables[this.options.scope]; t < i.length; t++) i[t] === this && i.splice(t, 1);
            this.element.removeClass("ui-droppable ui-droppable-disabled");
        },
        "_setOption": function(t, i) {
            "accept" === t && (this.accept = e.isFunction(i) ? i : function(e) {
                return e.is(i);
            }), e.Widget.prototype._setOption.apply(this, arguments);
        },
        "_activate": function(t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass), i && this._trigger("activate", t, this.ui(i));
        },
        "_deactivate": function(t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass), 
            i && this._trigger("deactivate", t, this.ui(i));
        },
        "_over": function(t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), 
            this._trigger("over", t, this.ui(i)));
        },
        "_out": function(t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), 
            this._trigger("out", t, this.ui(i)));
        },
        "_drop": function(t, i) {
            var n = i || e.ui.ddmanager.current, s = !1;
            return !(!n || (n.currentItem || n.element)[0] === this.element[0]) && (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                var t = e.data(this, "ui-droppable");
                if (t.options.greedy && !t.options.disabled && t.options.scope === n.options.scope && t.accept.call(t.element[0], n.currentItem || n.element) && e.ui.intersect(n, e.extend(t, {
                    "offset": t.element.offset()
                }), t.options.tolerance)) return s = !0, !1;
            }), !s && (!!this.accept.call(this.element[0], n.currentItem || n.element) && (this.options.activeClass && this.element.removeClass(this.options.activeClass), 
            this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(n)), 
            this.element)));
        },
        "ui": function(e) {
            return {
                "draggable": e.currentItem || e.element,
                "helper": e.helper,
                "position": e.position,
                "offset": e.positionAbs
            };
        }
    }), e.ui.intersect = function(e, t, n) {
        if (!t.offset) return !1;
        var s, r, o = (e.positionAbs || e.position.absolute).left, a = (e.positionAbs || e.position.absolute).top, l = o + e.helperProportions.width, h = a + e.helperProportions.height, c = t.offset.left, u = t.offset.top, p = c + t.proportions().width, d = u + t.proportions().height;
        switch (n) {
          case "fit":
            return c <= o && l <= p && u <= a && h <= d;

          case "intersect":
            return c < o + e.helperProportions.width / 2 && l - e.helperProportions.width / 2 < p && u < a + e.helperProportions.height / 2 && h - e.helperProportions.height / 2 < d;

          case "pointer":
            return s = (e.positionAbs || e.position.absolute).left + (e.clickOffset || e.offset.click).left, 
            r = (e.positionAbs || e.position.absolute).top + (e.clickOffset || e.offset.click).top, 
            i(r, u, t.proportions().height) && i(s, c, t.proportions().width);

          case "touch":
            return (a >= u && a <= d || h >= u && h <= d || a < u && h > d) && (o >= c && o <= p || l >= c && l <= p || o < c && l > p);

          default:
            return !1;
        }
    }, e.ui.ddmanager = {
        "current": null,
        "droppables": {
            "default": []
        },
        "prepareOffsets": function(t, i) {
            var n, s, r = e.ui.ddmanager.droppables[t.options.scope] || [], o = i ? i.type : null, a = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
            e: for (n = 0; n < r.length; n++) if (!(r[n].options.disabled || t && !r[n].accept.call(r[n].element[0], t.currentItem || t.element))) {
                for (s = 0; s < a.length; s++) if (a[s] === r[n].element[0]) {
                    r[n].proportions().height = 0;
                    continue e;
                }
                r[n].visible = "none" !== r[n].element.css("display"), r[n].visible && ("mousedown" === o && r[n]._activate.call(r[n], i), 
                r[n].offset = r[n].element.offset(), r[n].proportions({
                    "width": r[n].element[0].offsetWidth,
                    "height": r[n].element[0].offsetHeight
                }));
            }
        },
        "drop": function(t, i) {
            var n = !1;
            return e.each((e.ui.ddmanager.droppables[t.options.scope] || []).slice(), function() {
                this.options && (!this.options.disabled && this.visible && e.ui.intersect(t, this, this.options.tolerance) && (n = this._drop.call(this, i) || n), 
                !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, 
                this.isover = !1, this._deactivate.call(this, i)));
            }), n;
        },
        "dragStart": function(t, i) {
            t.element.parentsUntil("body").bind("scroll.droppable", function() {
                t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i);
            });
        },
        "drag": function(t, i) {
            t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, i), e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function() {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var n, s, r, o = e.ui.intersect(t, this, this.options.tolerance), a = !o && this.isover ? "isout" : o && !this.isover ? "isover" : null;
                    a && (this.options.greedy && (s = this.options.scope, (r = this.element.parents(":data(ui-droppable)").filter(function() {
                        return e.data(this, "ui-droppable").options.scope === s;
                    })).length && ((n = e.data(r[0], "ui-droppable")).greedyChild = "isover" === a)), 
                    n && "isover" === a && (n.isover = !1, n.isout = !0, n._out.call(n, i)), this[a] = !0, 
                    this["isout" === a ? "isover" : "isout"] = !1, this["isover" === a ? "_over" : "_out"].call(this, i), 
                    n && "isout" === a && (n.isout = !1, n.isover = !0, n._over.call(n, i)));
                }
            });
        },
        "dragStop": function(t, i) {
            t.element.parentsUntil("body").unbind("scroll.droppable"), t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i);
        }
    };
}(jQuery), function(e, t) {
    e.effects = {
        "effect": {}
    }, function(e, t) {
        function i(e, t, i) {
            var n = c[t.type] || {};
            return null == e ? i || !t.def ? null : t.def : (e = n.floor ? ~~e : parseFloat(e), 
            isNaN(e) ? t.def : n.mod ? (e + n.mod) % n.mod : 0 > e ? 0 : n.max < e ? n.max : e);
        }
        function n(t) {
            var i = l(), n = i._rgba = [];
            return t = t.toLowerCase(), d(a, function(e, s) {
                var r, o = s.re.exec(t), a = o && s.parse(o), l = s.space || "rgba";
                if (a) return r = i[l](a), i[h[l].cache] = r[h[l].cache], n = i._rgba = r._rgba, 
                !1;
            }), n.length ? ("0,0,0,0" === n.join() && e.extend(n, r.transparent), i) : r[t];
        }
        function s(e, t, i) {
            return 6 * (i = (i + 1) % 1) < 1 ? e + (t - e) * i * 6 : 2 * i < 1 ? t : 3 * i < 2 ? e + (t - e) * (2 / 3 - i) * 6 : e;
        }
        var r, o = /^([\-+])=\s*(\d+\.?\d*)/, a = [ {
            "re": /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            "parse": function(e) {
                return [ e[1], e[2], e[3], e[4] ];
            }
        }, {
            "re": /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            "parse": function(e) {
                return [ 2.55 * e[1], 2.55 * e[2], 2.55 * e[3], e[4] ];
            }
        }, {
            "re": /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
            "parse": function(e) {
                return [ parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16) ];
            }
        }, {
            "re": /#([a-f0-9])([a-f0-9])([a-f0-9])/,
            "parse": function(e) {
                return [ parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16) ];
            }
        }, {
            "re": /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            "space": "hsla",
            "parse": function(e) {
                return [ e[1], e[2] / 100, e[3] / 100, e[4] ];
            }
        } ], l = e.Color = function(t, i, n, s) {
            return new e.Color.fn.parse(t, i, n, s);
        }, h = {
            "rgba": {
                "props": {
                    "red": {
                        "idx": 0,
                        "type": "byte"
                    },
                    "green": {
                        "idx": 1,
                        "type": "byte"
                    },
                    "blue": {
                        "idx": 2,
                        "type": "byte"
                    }
                }
            },
            "hsla": {
                "props": {
                    "hue": {
                        "idx": 0,
                        "type": "degrees"
                    },
                    "saturation": {
                        "idx": 1,
                        "type": "percent"
                    },
                    "lightness": {
                        "idx": 2,
                        "type": "percent"
                    }
                }
            }
        }, c = {
            "byte": {
                "floor": !0,
                "max": 255
            },
            "percent": {
                "max": 1
            },
            "degrees": {
                "mod": 360,
                "floor": !0
            }
        }, u = l.support = {}, p = e("<p>")[0], d = e.each;
        p.style.cssText = "background-color:rgba(1,1,1,.5)", u.rgba = p.style.backgroundColor.indexOf("rgba") > -1, 
        d(h, function(e, t) {
            t.cache = "_" + e, t.props.alpha = {
                "idx": 3,
                "type": "percent",
                "def": 1
            };
        }), l.fn = e.extend(l.prototype, {
            "parse": function(t, s, o, a) {
                if (void 0 === t) return this._rgba = [ null, null, null, null ], this;
                (t.jquery || t.nodeType) && (t = e(t).css(s), s = void 0);
                var c = this, u = e.type(t), p = this._rgba = [];
                return void 0 !== s && (t = [ t, s, o, a ], u = "array"), "string" === u ? this.parse(n(t) || r._default) : "array" === u ? (d(h.rgba.props, function(e, n) {
                    p[n.idx] = i(t[n.idx], n);
                }), this) : "object" === u ? (t instanceof l ? d(h, function(e, i) {
                    t[i.cache] && (c[i.cache] = t[i.cache].slice());
                }) : d(h, function(n, s) {
                    var r = s.cache;
                    d(s.props, function(e, n) {
                        if (!c[r] && s.to) {
                            if ("alpha" === e || null == t[e]) return;
                            c[r] = s.to(c._rgba);
                        }
                        c[r][n.idx] = i(t[e], n, !0);
                    }), c[r] && e.inArray(null, c[r].slice(0, 3)) < 0 && (c[r][3] = 1, s.from && (c._rgba = s.from(c[r])));
                }), this) : void 0;
            },
            "is": function(e) {
                var t = l(e), i = !0, n = this;
                return d(h, function(e, s) {
                    var r, o = t[s.cache];
                    return o && (r = n[s.cache] || s.to && s.to(n._rgba) || [], d(s.props, function(e, t) {
                        if (null != o[t.idx]) return i = o[t.idx] === r[t.idx];
                    })), i;
                }), i;
            },
            "_space": function() {
                var e = [], t = this;
                return d(h, function(i, n) {
                    t[n.cache] && e.push(i);
                }), e.pop();
            },
            "transition": function(e, t) {
                var n = l(e), s = n._space(), r = h[s], o = 0 === this.alpha() ? l("transparent") : this, a = o[r.cache] || r.to(o._rgba), u = a.slice();
                return n = n[r.cache], d(r.props, function(e, s) {
                    var r = s.idx, o = a[r], l = n[r], h = c[s.type] || {};
                    null !== l && (null === o ? u[r] = l : (h.mod && (l - o > h.mod / 2 ? o += h.mod : o - l > h.mod / 2 && (o -= h.mod)), 
                    u[r] = i((l - o) * t + o, s)));
                }), this[s](u);
            },
            "blend": function(t) {
                if (1 === this._rgba[3]) return this;
                var i = this._rgba.slice(), n = i.pop(), s = l(t)._rgba;
                return l(e.map(i, function(e, t) {
                    return (1 - n) * s[t] + n * e;
                }));
            },
            "toRgbaString": function() {
                var t = "rgba(", i = e.map(this._rgba, function(e, t) {
                    return null == e ? t > 2 ? 1 : 0 : e;
                });
                return 1 === i[3] && (i.pop(), t = "rgb("), t + i.join() + ")";
            },
            "toHslaString": function() {
                var t = "hsla(", i = e.map(this.hsla(), function(e, t) {
                    return null == e && (e = t > 2 ? 1 : 0), t && t < 3 && (e = Math.round(100 * e) + "%"), 
                    e;
                });
                return 1 === i[3] && (i.pop(), t = "hsl("), t + i.join() + ")";
            },
            "toHexString": function(t) {
                var i = this._rgba.slice(), n = i.pop();
                return t && i.push(~~(255 * n)), "#" + e.map(i, function(e) {
                    return 1 === (e = (e || 0).toString(16)).length ? "0" + e : e;
                }).join("");
            },
            "toString": function() {
                return 0 === this._rgba[3] ? "transparent" : this.toRgbaString();
            }
        }), l.fn.parse.prototype = l.fn, h.hsla.to = function(e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [ null, null, null, e[3] ];
            var t, i, n = e[0] / 255, s = e[1] / 255, r = e[2] / 255, o = e[3], a = Math.max(n, s, r), l = Math.min(n, s, r), h = a - l, c = a + l, u = .5 * c;
            return t = l === a ? 0 : n === a ? 60 * (s - r) / h + 360 : s === a ? 60 * (r - n) / h + 120 : 60 * (n - s) / h + 240, 
            i = 0 === h ? 0 : u <= .5 ? h / c : h / (2 - c), [ Math.round(t) % 360, i, u, null == o ? 1 : o ];
        }, h.hsla.from = function(e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [ null, null, null, e[3] ];
            var t = e[0] / 360, i = e[1], n = e[2], r = e[3], o = n <= .5 ? n * (1 + i) : n + i - n * i, a = 2 * n - o;
            return [ Math.round(255 * s(a, o, t + 1 / 3)), Math.round(255 * s(a, o, t)), Math.round(255 * s(a, o, t - 1 / 3)), r ];
        }, d(h, function(t, n) {
            var s = n.props, r = n.cache, a = n.to, h = n.from;
            l.fn[t] = function(t) {
                if (a && !this[r] && (this[r] = a(this._rgba)), void 0 === t) return this[r].slice();
                var n, o = e.type(t), c = "array" === o || "object" === o ? t : arguments, u = this[r].slice();
                return d(s, function(e, t) {
                    var n = c["object" === o ? e : t.idx];
                    null == n && (n = u[t.idx]), u[t.idx] = i(n, t);
                }), h ? (n = l(h(u)), n[r] = u, n) : l(u);
            }, d(s, function(i, n) {
                l.fn[i] || (l.fn[i] = function(s) {
                    var r, a = e.type(s), l = "alpha" === i ? this._hsla ? "hsla" : "rgba" : t, h = this[l](), c = h[n.idx];
                    return "undefined" === a ? c : ("function" === a && (s = s.call(this, c), a = e.type(s)), 
                    null == s && n.empty ? this : ("string" === a && (r = o.exec(s)) && (s = c + parseFloat(r[2]) * ("+" === r[1] ? 1 : -1)), 
                    h[n.idx] = s, this[l](h)));
                });
            });
        }), l.hook = function(t) {
            var i = t.split(" ");
            d(i, function(t, i) {
                e.cssHooks[i] = {
                    "set": function(t, s) {
                        var r, o, a = "";
                        if ("transparent" !== s && ("string" !== e.type(s) || (r = n(s)))) {
                            if (s = l(r || s), !u.rgba && 1 !== s._rgba[3]) {
                                for (o = "backgroundColor" === i ? t.parentNode : t; ("" === a || "transparent" === a) && o && o.style; ) try {
                                    a = e.css(o, "backgroundColor"), o = o.parentNode;
                                } catch (e) {}
                                s = s.blend(a && "transparent" !== a ? a : "_default");
                            }
                            s = s.toRgbaString();
                        }
                        try {
                            t.style[i] = s;
                        } catch (e) {}
                    }
                }, e.fx.step[i] = function(t) {
                    t.colorInit || (t.start = l(t.elem, i), t.end = l(t.end), t.colorInit = !0), e.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos));
                };
            });
        }, l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"), 
        e.cssHooks.borderColor = {
            "expand": function(e) {
                var t = {};
                return d([ "Top", "Right", "Bottom", "Left" ], function(i, n) {
                    t["border" + n + "Color"] = e;
                }), t;
            }
        }, r = e.Color.names = {
            "aqua": "#00ffff",
            "black": "#000000",
            "blue": "#0000ff",
            "fuchsia": "#ff00ff",
            "gray": "#808080",
            "green": "#008000",
            "lime": "#00ff00",
            "maroon": "#800000",
            "navy": "#000080",
            "olive": "#808000",
            "purple": "#800080",
            "red": "#ff0000",
            "silver": "#c0c0c0",
            "teal": "#008080",
            "white": "#ffffff",
            "yellow": "#ffff00",
            "transparent": [ null, null, null, 0 ],
            "_default": "#ffffff"
        };
    }(jQuery), function() {
        function t(t) {
            var i, n, s = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle, r = {};
            if (s && s.length && s[0] && s[s[0]]) for (n = s.length; n--; ) "string" == typeof s[i = s[n]] && (r[e.camelCase(i)] = s[i]); else for (i in s) "string" == typeof s[i] && (r[i] = s[i]);
            return r;
        }
        function i(t, i) {
            var n, r, o = {};
            for (n in i) r = i[n], t[n] !== r && (s[n] || !e.fx.step[n] && isNaN(parseFloat(r)) || (o[n] = r));
            return o;
        }
        var n = [ "add", "remove", "toggle" ], s = {
            "border": 1,
            "borderBottom": 1,
            "borderColor": 1,
            "borderLeft": 1,
            "borderRight": 1,
            "borderTop": 1,
            "borderWidth": 1,
            "margin": 1,
            "padding": 1
        };
        e.each([ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ], function(t, i) {
            e.fx.step[i] = function(e) {
                ("none" !== e.end && !e.setAttr || 1 === e.pos && !e.setAttr) && (jQuery.style(e.elem, i, e.end), 
                e.setAttr = !0);
            };
        }), e.fn.addBack || (e.fn.addBack = function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
        }), e.effects.animateClass = function(s, r, o, a) {
            var l = e.speed(r, o, a);
            return this.queue(function() {
                var r, o = e(this), a = o.attr("class") || "", h = l.children ? o.find("*").addBack() : o;
                h = h.map(function() {
                    return {
                        "el": e(this),
                        "start": t(this)
                    };
                }), (r = function() {
                    e.each(n, function(e, t) {
                        s[t] && o[t + "Class"](s[t]);
                    });
                })(), h = h.map(function() {
                    return this.end = t(this.el[0]), this.diff = i(this.start, this.end), this;
                }), o.attr("class", a), h = h.map(function() {
                    var t = this, i = e.Deferred(), n = e.extend({}, l, {
                        "queue": !1,
                        "complete": function() {
                            i.resolve(t);
                        }
                    });
                    return this.el.animate(this.diff, n), i.promise();
                }), e.when.apply(e, h.get()).done(function() {
                    r(), e.each(arguments, function() {
                        var t = this.el;
                        e.each(this.diff, function(e) {
                            t.css(e, "");
                        });
                    }), l.complete.call(o[0]);
                });
            });
        }, e.fn.extend({
            "addClass": function(t) {
                return function(i, n, s, r) {
                    return n ? e.effects.animateClass.call(this, {
                        "add": i
                    }, n, s, r) : t.apply(this, arguments);
                };
            }(e.fn.addClass),
            "removeClass": function(t) {
                return function(i, n, s, r) {
                    return arguments.length > 1 ? e.effects.animateClass.call(this, {
                        "remove": i
                    }, n, s, r) : t.apply(this, arguments);
                };
            }(e.fn.removeClass),
            "toggleClass": function(t) {
                return function(i, n, s, r, o) {
                    return "boolean" == typeof n || void 0 === n ? s ? e.effects.animateClass.call(this, n ? {
                        "add": i
                    } : {
                        "remove": i
                    }, s, r, o) : t.apply(this, arguments) : e.effects.animateClass.call(this, {
                        "toggle": i
                    }, n, s, r);
                };
            }(e.fn.toggleClass),
            "switchClass": function(t, i, n, s, r) {
                return e.effects.animateClass.call(this, {
                    "add": i,
                    "remove": t
                }, n, s, r);
            }
        });
    }(), function() {
        function t(t, i, n, s) {
            return e.isPlainObject(t) && (i = t, t = t.effect), t = {
                "effect": t
            }, null == i && (i = {}), e.isFunction(i) && (s = i, n = null, i = {}), ("number" == typeof i || e.fx.speeds[i]) && (s = n, 
            n = i, i = {}), e.isFunction(n) && (s = n, n = null), i && e.extend(t, i), n = n || i.duration, 
            t.duration = e.fx.off ? 0 : "number" == typeof n ? n : n in e.fx.speeds ? e.fx.speeds[n] : e.fx.speeds._default, 
            t.complete = s || i.complete, t;
        }
        function i(t) {
            return !(t && "number" != typeof t && !e.fx.speeds[t]) || ("string" == typeof t && !e.effects.effect[t] || (!!e.isFunction(t) || "object" == typeof t && !t.effect));
        }
        e.extend(e.effects, {
            "version": "1.10.4",
            "save": function(e, t) {
                for (var i = 0; i < t.length; i++) null !== t[i] && e.data("ui-effects-" + t[i], e[0].style[t[i]]);
            },
            "restore": function(e, t) {
                var i, n;
                for (n = 0; n < t.length; n++) null !== t[n] && (void 0 === (i = e.data("ui-effects-" + t[n])) && (i = ""), 
                e.css(t[n], i));
            },
            "setMode": function(e, t) {
                return "toggle" === t && (t = e.is(":hidden") ? "show" : "hide"), t;
            },
            "getBaseline": function(e, t) {
                var i, n;
                switch (e[0]) {
                  case "top":
                    i = 0;
                    break;

                  case "middle":
                    i = .5;
                    break;

                  case "bottom":
                    i = 1;
                    break;

                  default:
                    i = e[0] / t.height;
                }
                switch (e[1]) {
                  case "left":
                    n = 0;
                    break;

                  case "center":
                    n = .5;
                    break;

                  case "right":
                    n = 1;
                    break;

                  default:
                    n = e[1] / t.width;
                }
                return {
                    "x": n,
                    "y": i
                };
            },
            "createWrapper": function(t) {
                if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                var i = {
                    "width": t.outerWidth(!0),
                    "height": t.outerHeight(!0),
                    "float": t.css("float")
                }, n = e("<div></div>").addClass("ui-effects-wrapper").css({
                    "fontSize": "100%",
                    "background": "transparent",
                    "border": "none",
                    "margin": 0,
                    "padding": 0
                }), s = {
                    "width": t.width(),
                    "height": t.height()
                }, r = document.activeElement;
                try {
                    r.id;
                } catch (e) {
                    r = document.body;
                }
                return t.wrap(n), (t[0] === r || e.contains(t[0], r)) && e(r).focus(), n = t.parent(), 
                "static" === t.css("position") ? (n.css({
                    "position": "relative"
                }), t.css({
                    "position": "relative"
                })) : (e.extend(i, {
                    "position": t.css("position"),
                    "zIndex": t.css("z-index")
                }), e.each([ "top", "left", "bottom", "right" ], function(e, n) {
                    i[n] = t.css(n), isNaN(parseInt(i[n], 10)) && (i[n] = "auto");
                }), t.css({
                    "position": "relative",
                    "top": 0,
                    "left": 0,
                    "right": "auto",
                    "bottom": "auto"
                })), t.css(s), n.css(i).show();
            },
            "removeWrapper": function(t) {
                var i = document.activeElement;
                return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), (t[0] === i || e.contains(t[0], i)) && e(i).focus()), 
                t;
            },
            "setTransition": function(t, i, n, s) {
                return s = s || {}, e.each(i, function(e, i) {
                    var r = t.cssUnit(i);
                    r[0] > 0 && (s[i] = r[0] * n + r[1]);
                }), s;
            }
        }), e.fn.extend({
            "effect": function() {
                function i(t) {
                    function i() {
                        e.isFunction(r) && r.call(s[0]), e.isFunction(t) && t();
                    }
                    var s = e(this), r = n.complete, a = n.mode;
                    (s.is(":hidden") ? "hide" === a : "show" === a) ? (s[a](), i()) : o.call(s[0], n, i);
                }
                var n = t.apply(this, arguments), s = n.mode, r = n.queue, o = e.effects.effect[n.effect];
                return e.fx.off || !o ? s ? this[s](n.duration, n.complete) : this.each(function() {
                    n.complete && n.complete.call(this);
                }) : !1 === r ? this.each(i) : this.queue(r || "fx", i);
            },
            "show": function(e) {
                return function(n) {
                    if (i(n)) return e.apply(this, arguments);
                    var s = t.apply(this, arguments);
                    return s.mode = "show", this.effect.call(this, s);
                };
            }(e.fn.show),
            "hide": function(e) {
                return function(n) {
                    if (i(n)) return e.apply(this, arguments);
                    var s = t.apply(this, arguments);
                    return s.mode = "hide", this.effect.call(this, s);
                };
            }(e.fn.hide),
            "toggle": function(e) {
                return function(n) {
                    if (i(n) || "boolean" == typeof n) return e.apply(this, arguments);
                    var s = t.apply(this, arguments);
                    return s.mode = "toggle", this.effect.call(this, s);
                };
            }(e.fn.toggle),
            "cssUnit": function(t) {
                var i = this.css(t), n = [];
                return e.each([ "em", "px", "%", "pt" ], function(e, t) {
                    i.indexOf(t) > 0 && (n = [ parseFloat(i), t ]);
                }), n;
            }
        });
    }(), function() {
        var t = {};
        e.each([ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function(e, i) {
            t[i] = function(t) {
                return Math.pow(t, e + 2);
            };
        }), e.extend(t, {
            "Sine": function(e) {
                return 1 - Math.cos(e * Math.PI / 2);
            },
            "Circ": function(e) {
                return 1 - Math.sqrt(1 - e * e);
            },
            "Elastic": function(e) {
                return 0 === e || 1 === e ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin((80 * (e - 1) - 7.5) * Math.PI / 15);
            },
            "Back": function(e) {
                return e * e * (3 * e - 2);
            },
            "Bounce": function(e) {
                for (var t, i = 4; e < ((t = Math.pow(2, --i)) - 1) / 11; ) ;
                return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * t - 2) / 22 - e, 2);
            }
        }), e.each(t, function(t, i) {
            e.easing["easeIn" + t] = i, e.easing["easeOut" + t] = function(e) {
                return 1 - i(1 - e);
            }, e.easing["easeInOut" + t] = function(e) {
                return e < .5 ? i(2 * e) / 2 : 1 - i(-2 * e + 2) / 2;
            };
        });
    }();
}(jQuery), function(e, t) {
    var i = /up|down|vertical/, n = /up|left|vertical|horizontal/;
    e.effects.effect.blind = function(t, s) {
        var r, o, a, l = e(this), h = [ "position", "top", "bottom", "left", "right", "height", "width" ], c = e.effects.setMode(l, t.mode || "hide"), u = t.direction || "up", p = i.test(u), d = p ? "height" : "width", f = p ? "top" : "left", m = n.test(u), g = {}, y = "show" === c;
        l.parent().is(".ui-effects-wrapper") ? e.effects.save(l.parent(), h) : e.effects.save(l, h), 
        l.show(), o = (r = e.effects.createWrapper(l).css({
            "overflow": "hidden"
        }))[d](), a = parseFloat(r.css(f)) || 0, g[d] = y ? o : 0, m || (l.css(p ? "bottom" : "right", 0).css(p ? "top" : "left", "auto").css({
            "position": "absolute"
        }), g[f] = y ? a : o + a), y && (r.css(d, 0), m || r.css(f, a + o)), r.animate(g, {
            "duration": t.duration,
            "easing": t.easing,
            "queue": !1,
            "complete": function() {
                "hide" === c && l.hide(), e.effects.restore(l, h), e.effects.removeWrapper(l), s();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.bounce = function(t, i) {
        var n, s, r, o = e(this), a = [ "position", "top", "bottom", "left", "right", "height", "width" ], l = e.effects.setMode(o, t.mode || "effect"), h = "hide" === l, c = "show" === l, u = t.direction || "up", p = t.distance, d = t.times || 5, f = 2 * d + (c || h ? 1 : 0), m = t.duration / f, g = t.easing, y = "up" === u || "down" === u ? "top" : "left", v = "up" === u || "left" === u, L = o.queue(), w = L.length;
        for ((c || h) && a.push("opacity"), e.effects.save(o, a), o.show(), e.effects.createWrapper(o), 
        p || (p = o["top" === y ? "outerHeight" : "outerWidth"]() / 3), c && ((r = {
            "opacity": 1
        })[y] = 0, o.css("opacity", 0).css(y, v ? 2 * -p : 2 * p).animate(r, m, g)), h && (p /= Math.pow(2, d - 1)), 
        (r = {})[y] = 0, n = 0; n < d; n++) (s = {})[y] = (v ? "-=" : "+=") + p, o.animate(s, m, g).animate(r, m, g), 
        p = h ? 2 * p : p / 2;
        h && ((s = {
            "opacity": 0
        })[y] = (v ? "-=" : "+=") + p, o.animate(s, m, g)), o.queue(function() {
            h && o.hide(), e.effects.restore(o, a), e.effects.removeWrapper(o), i();
        }), w > 1 && L.splice.apply(L, [ 1, 0 ].concat(L.splice(w, f + 1))), o.dequeue();
    };
}(jQuery), function(e, t) {
    e.effects.effect.clip = function(t, i) {
        var n, s, r, o = e(this), a = [ "position", "top", "bottom", "left", "right", "height", "width" ], l = "show" === e.effects.setMode(o, t.mode || "hide"), h = "vertical" === (t.direction || "vertical"), c = h ? "height" : "width", u = h ? "top" : "left", p = {};
        e.effects.save(o, a), o.show(), n = e.effects.createWrapper(o).css({
            "overflow": "hidden"
        }), r = (s = "IMG" === o[0].tagName ? n : o)[c](), l && (s.css(c, 0), s.css(u, r / 2)), 
        p[c] = l ? r : 0, p[u] = l ? 0 : r / 2, s.animate(p, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                l || o.hide(), e.effects.restore(o, a), e.effects.removeWrapper(o), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.drop = function(t, i) {
        var n, s = e(this), r = [ "position", "top", "bottom", "left", "right", "opacity", "height", "width" ], o = e.effects.setMode(s, t.mode || "hide"), a = "show" === o, l = t.direction || "left", h = "up" === l || "down" === l ? "top" : "left", c = "up" === l || "left" === l ? "pos" : "neg", u = {
            "opacity": a ? 1 : 0
        };
        e.effects.save(s, r), s.show(), e.effects.createWrapper(s), n = t.distance || s["top" === h ? "outerHeight" : "outerWidth"](!0) / 2, 
        a && s.css("opacity", 0).css(h, "pos" === c ? -n : n), u[h] = (a ? "pos" === c ? "+=" : "-=" : "pos" === c ? "-=" : "+=") + n, 
        s.animate(u, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                "hide" === o && s.hide(), e.effects.restore(s, r), e.effects.removeWrapper(s), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.explode = function(t, i) {
        function n() {
            p.css({
                "visibility": "visible"
            }), e(y).remove(), d || p.hide(), i();
        }
        var s, r, o, a, l, h, c = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3, u = c, p = e(this), d = "show" === e.effects.setMode(p, t.mode || "hide"), f = p.show().css("visibility", "hidden").offset(), m = Math.ceil(p.outerWidth() / u), g = Math.ceil(p.outerHeight() / c), y = [];
        for (s = 0; s < c; s++) for (a = f.top + s * g, h = s - (c - 1) / 2, r = 0; r < u; r++) o = f.left + r * m, 
        l = r - (u - 1) / 2, p.clone().appendTo("body").wrap("<div></div>").css({
            "position": "absolute",
            "visibility": "visible",
            "left": -r * m,
            "top": -s * g
        }).parent().addClass("ui-effects-explode").css({
            "position": "absolute",
            "overflow": "hidden",
            "width": m,
            "height": g,
            "left": o + (d ? l * m : 0),
            "top": a + (d ? h * g : 0),
            "opacity": d ? 0 : 1
        }).animate({
            "left": o + (d ? 0 : l * m),
            "top": a + (d ? 0 : h * g),
            "opacity": d ? 1 : 0
        }, t.duration || 500, t.easing, function() {
            y.push(this), y.length === c * u && n();
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.fade = function(t, i) {
        var n = e(this), s = e.effects.setMode(n, t.mode || "toggle");
        n.animate({
            "opacity": s
        }, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": i
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.fold = function(t, i) {
        var n, s, r = e(this), o = [ "position", "top", "bottom", "left", "right", "height", "width" ], a = e.effects.setMode(r, t.mode || "hide"), l = "show" === a, h = "hide" === a, c = t.size || 15, u = /([0-9]+)%/.exec(c), p = !!t.horizFirst, d = l !== p, f = d ? [ "width", "height" ] : [ "height", "width" ], m = t.duration / 2, g = {}, y = {};
        e.effects.save(r, o), r.show(), n = e.effects.createWrapper(r).css({
            "overflow": "hidden"
        }), s = d ? [ n.width(), n.height() ] : [ n.height(), n.width() ], u && (c = parseInt(u[1], 10) / 100 * s[h ? 0 : 1]), 
        l && n.css(p ? {
            "height": 0,
            "width": c
        } : {
            "height": c,
            "width": 0
        }), g[f[0]] = l ? s[0] : c, y[f[1]] = l ? s[1] : 0, n.animate(g, m, t.easing).animate(y, m, t.easing, function() {
            h && r.hide(), e.effects.restore(r, o), e.effects.removeWrapper(r), i();
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.highlight = function(t, i) {
        var n = e(this), s = [ "backgroundImage", "backgroundColor", "opacity" ], r = e.effects.setMode(n, t.mode || "show"), o = {
            "backgroundColor": n.css("backgroundColor")
        };
        "hide" === r && (o.opacity = 0), e.effects.save(n, s), n.show().css({
            "backgroundImage": "none",
            "backgroundColor": t.color || "#ffff99"
        }).animate(o, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                "hide" === r && n.hide(), e.effects.restore(n, s), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.pulsate = function(t, i) {
        var n, s = e(this), r = e.effects.setMode(s, t.mode || "show"), o = "show" === r, a = "hide" === r, l = o || "hide" === r, h = 2 * (t.times || 5) + (l ? 1 : 0), c = t.duration / h, u = 0, p = s.queue(), d = p.length;
        for (!o && s.is(":visible") || (s.css("opacity", 0).show(), u = 1), n = 1; n < h; n++) s.animate({
            "opacity": u
        }, c, t.easing), u = 1 - u;
        s.animate({
            "opacity": u
        }, c, t.easing), s.queue(function() {
            a && s.hide(), i();
        }), d > 1 && p.splice.apply(p, [ 1, 0 ].concat(p.splice(d, h + 1))), s.dequeue();
    };
}(jQuery), function(e, t) {
    e.effects.effect.puff = function(t, i) {
        var n = e(this), s = e.effects.setMode(n, t.mode || "hide"), r = "hide" === s, o = parseInt(t.percent, 10) || 150, a = o / 100, l = {
            "height": n.height(),
            "width": n.width(),
            "outerHeight": n.outerHeight(),
            "outerWidth": n.outerWidth()
        };
        e.extend(t, {
            "effect": "scale",
            "queue": !1,
            "fade": !0,
            "mode": s,
            "complete": i,
            "percent": r ? o : 100,
            "from": r ? l : {
                "height": l.height * a,
                "width": l.width * a,
                "outerHeight": l.outerHeight * a,
                "outerWidth": l.outerWidth * a
            }
        }), n.effect(t);
    }, e.effects.effect.scale = function(t, i) {
        var n = e(this), s = e.extend(!0, {}, t), r = e.effects.setMode(n, t.mode || "effect"), o = parseInt(t.percent, 10) || (0 === parseInt(t.percent, 10) ? 0 : "hide" === r ? 0 : 100), a = t.direction || "both", l = t.origin, h = {
            "height": n.height(),
            "width": n.width(),
            "outerHeight": n.outerHeight(),
            "outerWidth": n.outerWidth()
        }, c = {
            "y": "horizontal" !== a ? o / 100 : 1,
            "x": "vertical" !== a ? o / 100 : 1
        };
        s.effect = "size", s.queue = !1, s.complete = i, "effect" !== r && (s.origin = l || [ "middle", "center" ], 
        s.restore = !0), s.from = t.from || ("show" === r ? {
            "height": 0,
            "width": 0,
            "outerHeight": 0,
            "outerWidth": 0
        } : h), s.to = {
            "height": h.height * c.y,
            "width": h.width * c.x,
            "outerHeight": h.outerHeight * c.y,
            "outerWidth": h.outerWidth * c.x
        }, s.fade && ("show" === r && (s.from.opacity = 0, s.to.opacity = 1), "hide" === r && (s.from.opacity = 1, 
        s.to.opacity = 0)), n.effect(s);
    }, e.effects.effect.size = function(t, i) {
        var n, s, r, o = e(this), a = [ "position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity" ], l = [ "position", "top", "bottom", "left", "right", "overflow", "opacity" ], h = [ "width", "height", "overflow" ], c = [ "fontSize" ], u = [ "borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom" ], p = [ "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight" ], d = e.effects.setMode(o, t.mode || "effect"), f = t.restore || "effect" !== d, m = t.scale || "both", g = t.origin || [ "middle", "center" ], y = o.css("position"), v = f ? a : l, L = {
            "height": 0,
            "width": 0,
            "outerHeight": 0,
            "outerWidth": 0
        };
        "show" === d && o.show(), n = {
            "height": o.height(),
            "width": o.width(),
            "outerHeight": o.outerHeight(),
            "outerWidth": o.outerWidth()
        }, "toggle" === t.mode && "show" === d ? (o.from = t.to || L, o.to = t.from || n) : (o.from = t.from || ("show" === d ? L : n), 
        o.to = t.to || ("hide" === d ? L : n)), r = {
            "from": {
                "y": o.from.height / n.height,
                "x": o.from.width / n.width
            },
            "to": {
                "y": o.to.height / n.height,
                "x": o.to.width / n.width
            }
        }, "box" !== m && "both" !== m || (r.from.y !== r.to.y && (v = v.concat(u), o.from = e.effects.setTransition(o, u, r.from.y, o.from), 
        o.to = e.effects.setTransition(o, u, r.to.y, o.to)), r.from.x !== r.to.x && (v = v.concat(p), 
        o.from = e.effects.setTransition(o, p, r.from.x, o.from), o.to = e.effects.setTransition(o, p, r.to.x, o.to))), 
        "content" !== m && "both" !== m || r.from.y !== r.to.y && (v = v.concat(c).concat(h), 
        o.from = e.effects.setTransition(o, c, r.from.y, o.from), o.to = e.effects.setTransition(o, c, r.to.y, o.to)), 
        e.effects.save(o, v), o.show(), e.effects.createWrapper(o), o.css("overflow", "hidden").css(o.from), 
        g && (s = e.effects.getBaseline(g, n), o.from.top = (n.outerHeight - o.outerHeight()) * s.y, 
        o.from.left = (n.outerWidth - o.outerWidth()) * s.x, o.to.top = (n.outerHeight - o.to.outerHeight) * s.y, 
        o.to.left = (n.outerWidth - o.to.outerWidth) * s.x), o.css(o.from), "content" !== m && "both" !== m || (u = u.concat([ "marginTop", "marginBottom" ]).concat(c), 
        p = p.concat([ "marginLeft", "marginRight" ]), h = a.concat(u).concat(p), o.find("*[width]").each(function() {
            var i = e(this), n = {
                "height": i.height(),
                "width": i.width(),
                "outerHeight": i.outerHeight(),
                "outerWidth": i.outerWidth()
            };
            f && e.effects.save(i, h), i.from = {
                "height": n.height * r.from.y,
                "width": n.width * r.from.x,
                "outerHeight": n.outerHeight * r.from.y,
                "outerWidth": n.outerWidth * r.from.x
            }, i.to = {
                "height": n.height * r.to.y,
                "width": n.width * r.to.x,
                "outerHeight": n.height * r.to.y,
                "outerWidth": n.width * r.to.x
            }, r.from.y !== r.to.y && (i.from = e.effects.setTransition(i, u, r.from.y, i.from), 
            i.to = e.effects.setTransition(i, u, r.to.y, i.to)), r.from.x !== r.to.x && (i.from = e.effects.setTransition(i, p, r.from.x, i.from), 
            i.to = e.effects.setTransition(i, p, r.to.x, i.to)), i.css(i.from), i.animate(i.to, t.duration, t.easing, function() {
                f && e.effects.restore(i, h);
            });
        })), o.animate(o.to, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                0 === o.to.opacity && o.css("opacity", o.from.opacity), "hide" === d && o.hide(), 
                e.effects.restore(o, v), f || ("static" === y ? o.css({
                    "position": "relative",
                    "top": o.to.top,
                    "left": o.to.left
                }) : e.each([ "top", "left" ], function(e, t) {
                    o.css(t, function(t, i) {
                        var n = parseInt(i, 10), s = e ? o.to.left : o.to.top;
                        return "auto" === i ? s + "px" : n + s + "px";
                    });
                })), e.effects.removeWrapper(o), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.shake = function(t, i) {
        var n, s = e(this), r = [ "position", "top", "bottom", "left", "right", "height", "width" ], o = e.effects.setMode(s, t.mode || "effect"), a = t.direction || "left", l = t.distance || 20, h = t.times || 3, c = 2 * h + 1, u = Math.round(t.duration / c), p = "up" === a || "down" === a ? "top" : "left", d = "up" === a || "left" === a, f = {}, m = {}, g = {}, y = s.queue(), v = y.length;
        for (e.effects.save(s, r), s.show(), e.effects.createWrapper(s), f[p] = (d ? "-=" : "+=") + l, 
        m[p] = (d ? "+=" : "-=") + 2 * l, g[p] = (d ? "-=" : "+=") + 2 * l, s.animate(f, u, t.easing), 
        n = 1; n < h; n++) s.animate(m, u, t.easing).animate(g, u, t.easing);
        s.animate(m, u, t.easing).animate(f, u / 2, t.easing).queue(function() {
            "hide" === o && s.hide(), e.effects.restore(s, r), e.effects.removeWrapper(s), i();
        }), v > 1 && y.splice.apply(y, [ 1, 0 ].concat(y.splice(v, c + 1))), s.dequeue();
    };
}(jQuery), function(e, t) {
    e.effects.effect.slide = function(t, i) {
        var n, s = e(this), r = [ "position", "top", "bottom", "left", "right", "width", "height" ], o = e.effects.setMode(s, t.mode || "show"), a = "show" === o, l = t.direction || "left", h = "up" === l || "down" === l ? "top" : "left", c = "up" === l || "left" === l, u = {};
        e.effects.save(s, r), s.show(), n = t.distance || s["top" === h ? "outerHeight" : "outerWidth"](!0), 
        e.effects.createWrapper(s).css({
            "overflow": "hidden"
        }), a && s.css(h, c ? isNaN(n) ? "-" + n : -n : n), u[h] = (a ? c ? "+=" : "-=" : c ? "-=" : "+=") + n, 
        s.animate(u, {
            "queue": !1,
            "duration": t.duration,
            "easing": t.easing,
            "complete": function() {
                "hide" === o && s.hide(), e.effects.restore(s, r), e.effects.removeWrapper(s), i();
            }
        });
    };
}(jQuery), function(e, t) {
    e.effects.effect.transfer = function(t, i) {
        var n = e(this), s = e(t.to), r = "fixed" === s.css("position"), o = e("body"), a = r ? o.scrollTop() : 0, l = r ? o.scrollLeft() : 0, h = s.offset(), c = {
            "top": h.top - a,
            "left": h.left - l,
            "height": s.innerHeight(),
            "width": s.innerWidth()
        }, u = n.offset(), p = e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({
            "top": u.top - a,
            "left": u.left - l,
            "height": n.innerHeight(),
            "width": n.innerWidth(),
            "position": r ? "fixed" : "absolute"
        }).animate(c, t.duration, t.easing, function() {
            p.remove(), i();
        });
    };
}(jQuery), function(e, t) {
    e.widget("ui.menu", {
        "version": "1.10.4",
        "defaultElement": "<ul>",
        "delay": 300,
        "options": {
            "icons": {
                "submenu": "ui-icon-carat-1-e"
            },
            "menus": "ul",
            "position": {
                "my": "left top",
                "at": "right top"
            },
            "role": "menu",
            "blur": null,
            "focus": null,
            "select": null
        },
        "_create": function() {
            this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({
                "role": this.options.role,
                "tabIndex": 0
            }).bind("click" + this.eventNamespace, e.proxy(function(e) {
                this.options.disabled && e.preventDefault();
            }, this)), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), 
            this._on({
                "mousedown .ui-menu-item > a": function(e) {
                    e.preventDefault();
                },
                "click .ui-state-disabled > a": function(e) {
                    e.preventDefault();
                },
                "click .ui-menu-item:has(a)": function(t) {
                    var i = e(t.target).closest(".ui-menu-item");
                    !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), 
                    i.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && e(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [ !0 ]), 
                    this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer)));
                },
                "mouseenter .ui-menu-item": function(t) {
                    var i = e(t.currentTarget);
                    i.siblings().children(".ui-state-active").removeClass("ui-state-active"), this.focus(t, i);
                },
                "mouseleave": "collapseAll",
                "mouseleave .ui-menu": "collapseAll",
                "focus": function(e, t) {
                    var i = this.active || this.element.children(".ui-menu-item").eq(0);
                    t || this.focus(e, i);
                },
                "blur": function(t) {
                    this._delay(function() {
                        e.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t);
                    });
                },
                "keydown": "_keydown"
            }), this.refresh(), this._on(this.document, {
                "click": function(t) {
                    e(t.target).closest(".ui-menu").length || this.collapseAll(t), this.mouseHandled = !1;
                }
            });
        },
        "_destroy": function() {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), 
            this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function() {
                var t = e(this);
                t.data("ui-menu-submenu-carat") && t.remove();
            }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");
        },
        "_keydown": function(t) {
            function i(e) {
                return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
            }
            var n, s, r, o, a, l = !0;
            switch (t.keyCode) {
              case e.ui.keyCode.PAGE_UP:
                this.previousPage(t);
                break;

              case e.ui.keyCode.PAGE_DOWN:
                this.nextPage(t);
                break;

              case e.ui.keyCode.HOME:
                this._move("first", "first", t);
                break;

              case e.ui.keyCode.END:
                this._move("last", "last", t);
                break;

              case e.ui.keyCode.UP:
                this.previous(t);
                break;

              case e.ui.keyCode.DOWN:
                this.next(t);
                break;

              case e.ui.keyCode.LEFT:
                this.collapse(t);
                break;

              case e.ui.keyCode.RIGHT:
                this.active && !this.active.is(".ui-state-disabled") && this.expand(t);
                break;

              case e.ui.keyCode.ENTER:
              case e.ui.keyCode.SPACE:
                this._activate(t);
                break;

              case e.ui.keyCode.ESCAPE:
                this.collapse(t);
                break;

              default:
                l = !1, s = this.previousFilter || "", r = String.fromCharCode(t.keyCode), o = !1, 
                clearTimeout(this.filterTimer), r === s ? o = !0 : r = s + r, a = new RegExp("^" + i(r), "i"), 
                n = this.activeMenu.children(".ui-menu-item").filter(function() {
                    return a.test(e(this).children("a").text());
                }), (n = o && -1 !== n.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") : n).length || (r = String.fromCharCode(t.keyCode), 
                a = new RegExp("^" + i(r), "i"), n = this.activeMenu.children(".ui-menu-item").filter(function() {
                    return a.test(e(this).children("a").text());
                })), n.length ? (this.focus(t, n), n.length > 1 ? (this.previousFilter = r, this.filterTimer = this._delay(function() {
                    delete this.previousFilter;
                }, 1e3)) : delete this.previousFilter) : delete this.previousFilter;
            }
            l && t.preventDefault();
        },
        "_activate": function(e) {
            this.active.is(".ui-state-disabled") || (this.active.children("a[aria-haspopup='true']").length ? this.expand(e) : this.select(e));
        },
        "refresh": function() {
            var t, i = this.options.icons.submenu, n = this.element.find(this.options.menus);
            this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length), 
            n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({
                "role": this.options.role,
                "aria-hidden": "true",
                "aria-expanded": "false"
            }).each(function() {
                var t = e(this), n = t.prev("a"), s = e("<span>").addClass("ui-menu-icon ui-icon " + i).data("ui-menu-submenu-carat", !0);
                n.attr("aria-haspopup", "true").prepend(s), t.attr("aria-labelledby", n.attr("id"));
            }), (t = n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "presentation").children("a").uniqueId().addClass("ui-corner-all").attr({
                "tabIndex": -1,
                "role": this._itemRole()
            }), t.children(":not(.ui-menu-item)").each(function() {
                var t = e(this);
                /[^\-\u2014\u2013\s]/.test(t.text()) || t.addClass("ui-widget-content ui-menu-divider");
            }), t.children(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !e.contains(this.element[0], this.active[0]) && this.blur();
        },
        "_itemRole": function() {
            return {
                "menu": "menuitem",
                "listbox": "option"
            }[this.options.role];
        },
        "_setOption": function(e, t) {
            "icons" === e && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu), 
            this._super(e, t);
        },
        "focus": function(e, t) {
            var i, n;
            this.blur(e, e && "focus" === e.type), this._scrollIntoView(t), this.active = t.first(), 
            n = this.active.children("a").addClass("ui-state-focus"), this.options.role && this.element.attr("aria-activedescendant", n.attr("id")), 
            this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"), 
            e && "keydown" === e.type ? this._close() : this.timer = this._delay(function() {
                this._close();
            }, this.delay), (i = t.children(".ui-menu")).length && e && /^mouse/.test(e.type) && this._startOpening(i), 
            this.activeMenu = t.parent(), this._trigger("focus", e, {
                "item": t
            });
        },
        "_scrollIntoView": function(t) {
            var i, n, s, r, o, a;
            this._hasScroll() && (i = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0, 
            n = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0, s = t.offset().top - this.activeMenu.offset().top - i - n, 
            r = this.activeMenu.scrollTop(), o = this.activeMenu.height(), a = t.height(), s < 0 ? this.activeMenu.scrollTop(r + s) : s + a > o && this.activeMenu.scrollTop(r + s - o + a));
        },
        "blur": function(e, t) {
            t || clearTimeout(this.timer), this.active && (this.active.children("a").removeClass("ui-state-focus"), 
            this.active = null, this._trigger("blur", e, {
                "item": this.active
            }));
        },
        "_startOpening": function(e) {
            clearTimeout(this.timer), "true" === e.attr("aria-hidden") && (this.timer = this._delay(function() {
                this._close(), this._open(e);
            }, this.delay));
        },
        "_open": function(t) {
            var i = e.extend({
                "of": this.active
            }, this.options.position);
            clearTimeout(this.timer), this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"), 
            t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i);
        },
        "collapseAll": function(t, i) {
            clearTimeout(this.timer), this.timer = this._delay(function() {
                var n = i ? this.element : e(t && t.target).closest(this.element.find(".ui-menu"));
                n.length || (n = this.element), this._close(n), this.blur(t), this.activeMenu = n;
            }, this.delay);
        },
        "_close": function(e) {
            e || (e = this.active ? this.active.parent() : this.element), e.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find("a.ui-state-active").removeClass("ui-state-active");
        },
        "collapse": function(e) {
            var t = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            t && t.length && (this._close(), this.focus(e, t));
        },
        "expand": function(e) {
            var t = this.active && this.active.children(".ui-menu ").children(".ui-menu-item").first();
            t && t.length && (this._open(t.parent()), this._delay(function() {
                this.focus(e, t);
            }));
        },
        "next": function(e) {
            this._move("next", "first", e);
        },
        "previous": function(e) {
            this._move("prev", "last", e);
        },
        "isFirstItem": function() {
            return this.active && !this.active.prevAll(".ui-menu-item").length;
        },
        "isLastItem": function() {
            return this.active && !this.active.nextAll(".ui-menu-item").length;
        },
        "_move": function(e, t, i) {
            var n;
            this.active && (n = "first" === e || "last" === e ? this.active["first" === e ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[e + "All"](".ui-menu-item").eq(0)), 
            n && n.length && this.active || (n = this.activeMenu.children(".ui-menu-item")[t]()), 
            this.focus(i, n);
        },
        "nextPage": function(t) {
            var i, n, s;
            this.active ? this.isLastItem() || (this._hasScroll() ? (n = this.active.offset().top, 
            s = this.element.height(), this.active.nextAll(".ui-menu-item").each(function() {
                return (i = e(this)).offset().top - n - s < 0;
            }), this.focus(t, i)) : this.focus(t, this.activeMenu.children(".ui-menu-item")[this.active ? "last" : "first"]())) : this.next(t);
        },
        "previousPage": function(t) {
            var i, n, s;
            this.active ? this.isFirstItem() || (this._hasScroll() ? (n = this.active.offset().top, 
            s = this.element.height(), this.active.prevAll(".ui-menu-item").each(function() {
                return (i = e(this)).offset().top - n + s > 0;
            }), this.focus(t, i)) : this.focus(t, this.activeMenu.children(".ui-menu-item").first())) : this.next(t);
        },
        "_hasScroll": function() {
            return this.element.outerHeight() < this.element.prop("scrollHeight");
        },
        "select": function(t) {
            this.active = this.active || e(t.target).closest(".ui-menu-item");
            var i = {
                "item": this.active
            };
            this.active.has(".ui-menu").length || this.collapseAll(t, !0), this._trigger("select", t, i);
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.progressbar", {
        "version": "1.10.4",
        "options": {
            "max": 100,
            "value": 0,
            "change": null,
            "complete": null
        },
        "min": 0,
        "_create": function() {
            this.oldValue = this.options.value = this._constrainedValue(), this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({
                "role": "progressbar",
                "aria-valuemin": this.min
            }), this.valueDiv = e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element), 
            this._refreshValue();
        },
        "_destroy": function() {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), 
            this.valueDiv.remove();
        },
        "value": function(e) {
            if (void 0 === e) return this.options.value;
            this.options.value = this._constrainedValue(e), this._refreshValue();
        },
        "_constrainedValue": function(e) {
            return void 0 === e && (e = this.options.value), this.indeterminate = !1 === e, 
            "number" != typeof e && (e = 0), !this.indeterminate && Math.min(this.options.max, Math.max(this.min, e));
        },
        "_setOptions": function(e) {
            var t = e.value;
            delete e.value, this._super(e), this.options.value = this._constrainedValue(t), 
            this._refreshValue();
        },
        "_setOption": function(e, t) {
            "max" === e && (t = Math.max(this.min, t)), this._super(e, t);
        },
        "_percentage": function() {
            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min);
        },
        "_refreshValue": function() {
            var t = this.options.value, i = this._percentage();
            this.valueDiv.toggle(this.indeterminate || t > this.min).toggleClass("ui-corner-right", t === this.options.max).width(i.toFixed(0) + "%"), 
            this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate), this.indeterminate ? (this.element.removeAttr("aria-valuenow"), 
            this.overlayDiv || (this.overlayDiv = e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))) : (this.element.attr({
                "aria-valuemax": this.options.max,
                "aria-valuenow": t
            }), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)), this.oldValue !== t && (this.oldValue = t, 
            this._trigger("change")), t === this.options.max && this._trigger("complete");
        }
    });
}(jQuery), function(e, t) {
    function i(e) {
        return parseInt(e, 10) || 0;
    }
    function n(e) {
        return !isNaN(parseInt(e, 10));
    }
    e.widget("ui.resizable", e.ui.mouse, {
        "version": "1.10.4",
        "widgetEventPrefix": "resize",
        "options": {
            "alsoResize": !1,
            "animate": !1,
            "animateDuration": "slow",
            "animateEasing": "swing",
            "aspectRatio": !1,
            "autoHide": !1,
            "containment": !1,
            "ghost": !1,
            "grid": !1,
            "handles": "e,s,se",
            "helper": !1,
            "maxHeight": null,
            "maxWidth": null,
            "minHeight": 10,
            "minWidth": 10,
            "zIndex": 90,
            "resize": null,
            "start": null,
            "stop": null
        },
        "_create": function() {
            var t, i, n, s, r = this, o = this.options;
            if (this.element.addClass("ui-resizable"), e.extend(this, {
                "_aspectRatio": !!o.aspectRatio,
                "aspectRatio": o.aspectRatio,
                "originalElement": this.element,
                "_proportionallyResizeElements": [],
                "_helper": o.helper || o.ghost || o.animate ? o.helper || "ui-resizable-helper" : null
            }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                "position": this.element.css("position"),
                "width": this.element.outerWidth(),
                "height": this.element.outerHeight(),
                "top": this.element.css("top"),
                "left": this.element.css("left")
            })), this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable")), 
            this.elementIsWrapper = !0, this.element.css({
                "marginLeft": this.originalElement.css("marginLeft"),
                "marginTop": this.originalElement.css("marginTop"),
                "marginRight": this.originalElement.css("marginRight"),
                "marginBottom": this.originalElement.css("marginBottom")
            }), this.originalElement.css({
                "marginLeft": 0,
                "marginTop": 0,
                "marginRight": 0,
                "marginBottom": 0
            }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), 
            this._proportionallyResizeElements.push(this.originalElement.css({
                "position": "static",
                "zoom": 1,
                "display": "block"
            })), this.originalElement.css({
                "margin": this.originalElement.css("margin")
            }), this._proportionallyResize()), this.handles = o.handles || (e(".ui-resizable-handle", this.element).length ? {
                "n": ".ui-resizable-n",
                "e": ".ui-resizable-e",
                "s": ".ui-resizable-s",
                "w": ".ui-resizable-w",
                "se": ".ui-resizable-se",
                "sw": ".ui-resizable-sw",
                "ne": ".ui-resizable-ne",
                "nw": ".ui-resizable-nw"
            } : "e,s,se"), this.handles.constructor === String) for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), 
            t = this.handles.split(","), this.handles = {}, i = 0; i < t.length; i++) n = e.trim(t[i]), 
            (s = e("<div class='ui-resizable-handle " + ("ui-resizable-" + n) + "'></div>")).css({
                "zIndex": o.zIndex
            }), "se" === n && s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[n] = ".ui-resizable-" + n, 
            this.element.append(s);
            this._renderAxis = function(t) {
                var i, n, s, r;
                t = t || this.element;
                for (i in this.handles) this.handles[i].constructor === String && (this.handles[i] = e(this.handles[i], this.element).show()), 
                this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (n = e(this.handles[i], this.element), 
                r = /sw|ne|nw|se|n|s/.test(i) ? n.outerHeight() : n.outerWidth(), s = [ "padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left" ].join(""), 
                t.css(s, r), this._proportionallyResize()), e(this.handles[i]).length;
            }, this._renderAxis(this.element), this._handles = e(".ui-resizable-handle", this.element).disableSelection(), 
            this._handles.mouseover(function() {
                r.resizing || (this.className && (s = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), 
                r.axis = s && s[1] ? s[1] : "se");
            }), o.autoHide && (this._handles.hide(), e(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                o.disabled || (e(this).removeClass("ui-resizable-autohide"), r._handles.show());
            }).mouseleave(function() {
                o.disabled || r.resizing || (e(this).addClass("ui-resizable-autohide"), r._handles.hide());
            })), this._mouseInit();
        },
        "_destroy": function() {
            this._mouseDestroy();
            var t, i = function(t) {
                e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
            };
            return this.elementIsWrapper && (i(this.element), t = this.element, this.originalElement.css({
                "position": t.css("position"),
                "width": t.outerWidth(),
                "height": t.outerHeight(),
                "top": t.css("top"),
                "left": t.css("left")
            }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), 
            i(this.originalElement), this;
        },
        "_mouseCapture": function(t) {
            var i, n, s = !1;
            for (i in this.handles) ((n = e(this.handles[i])[0]) === t.target || e.contains(n, t.target)) && (s = !0);
            return !this.options.disabled && s;
        },
        "_mouseStart": function(t) {
            var n, s, r, o = this.options, a = this.element.position(), l = this.element;
            return this.resizing = !0, /absolute/.test(l.css("position")) ? l.css({
                "position": "absolute",
                "top": l.css("top"),
                "left": l.css("left")
            }) : l.is(".ui-draggable") && l.css({
                "position": "absolute",
                "top": a.top,
                "left": a.left
            }), this._renderProxy(), n = i(this.helper.css("left")), s = i(this.helper.css("top")), 
            o.containment && (n += e(o.containment).scrollLeft() || 0, s += e(o.containment).scrollTop() || 0), 
            this.offset = this.helper.offset(), this.position = {
                "left": n,
                "top": s
            }, this.size = this._helper ? {
                "width": this.helper.width(),
                "height": this.helper.height()
            } : {
                "width": l.width(),
                "height": l.height()
            }, this.originalSize = this._helper ? {
                "width": l.outerWidth(),
                "height": l.outerHeight()
            } : {
                "width": l.width(),
                "height": l.height()
            }, this.originalPosition = {
                "left": n,
                "top": s
            }, this.sizeDiff = {
                "width": l.outerWidth() - l.width(),
                "height": l.outerHeight() - l.height()
            }, this.originalMousePosition = {
                "left": t.pageX,
                "top": t.pageY
            }, this.aspectRatio = "number" == typeof o.aspectRatio ? o.aspectRatio : this.originalSize.width / this.originalSize.height || 1, 
            r = e(".ui-resizable-" + this.axis).css("cursor"), e("body").css("cursor", "auto" === r ? this.axis + "-resize" : r), 
            l.addClass("ui-resizable-resizing"), this._propagate("start", t), !0;
        },
        "_mouseDrag": function(t) {
            var i, n = this.helper, s = {}, r = this.originalMousePosition, o = this.axis, a = this.position.top, l = this.position.left, h = this.size.width, c = this.size.height, u = t.pageX - r.left || 0, p = t.pageY - r.top || 0, d = this._change[o];
            return !!d && (i = d.apply(this, [ t, u, p ]), this._updateVirtualBoundaries(t.shiftKey), 
            (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)), i = this._respectSize(i, t), 
            this._updateCache(i), this._propagate("resize", t), this.position.top !== a && (s.top = this.position.top + "px"), 
            this.position.left !== l && (s.left = this.position.left + "px"), this.size.width !== h && (s.width = this.size.width + "px"), 
            this.size.height !== c && (s.height = this.size.height + "px"), n.css(s), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), 
            e.isEmptyObject(s) || this._trigger("resize", t, this.ui()), !1);
        },
        "_mouseStop": function(t) {
            this.resizing = !1;
            var i, n, s, r, o, a, l, h = this.options, c = this;
            return this._helper && (s = (n = (i = this._proportionallyResizeElements).length && /textarea/i.test(i[0].nodeName)) && e.ui.hasScroll(i[0], "left") ? 0 : c.sizeDiff.height, 
            r = n ? 0 : c.sizeDiff.width, o = {
                "width": c.helper.width() - r,
                "height": c.helper.height() - s
            }, a = parseInt(c.element.css("left"), 10) + (c.position.left - c.originalPosition.left) || null, 
            l = parseInt(c.element.css("top"), 10) + (c.position.top - c.originalPosition.top) || null, 
            h.animate || this.element.css(e.extend(o, {
                "top": l,
                "left": a
            })), c.helper.height(c.size.height), c.helper.width(c.size.width), this._helper && !h.animate && this._proportionallyResize()), 
            e("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), 
            this._propagate("stop", t), this._helper && this.helper.remove(), !1;
        },
        "_updateVirtualBoundaries": function(e) {
            var t, i, s, r, o, a = this.options;
            o = {
                "minWidth": n(a.minWidth) ? a.minWidth : 0,
                "maxWidth": n(a.maxWidth) ? a.maxWidth : 1 / 0,
                "minHeight": n(a.minHeight) ? a.minHeight : 0,
                "maxHeight": n(a.maxHeight) ? a.maxHeight : 1 / 0
            }, (this._aspectRatio || e) && (t = o.minHeight * this.aspectRatio, s = o.minWidth / this.aspectRatio, 
            i = o.maxHeight * this.aspectRatio, r = o.maxWidth / this.aspectRatio, t > o.minWidth && (o.minWidth = t), 
            s > o.minHeight && (o.minHeight = s), i < o.maxWidth && (o.maxWidth = i), r < o.maxHeight && (o.maxHeight = r)), 
            this._vBoundaries = o;
        },
        "_updateCache": function(e) {
            this.offset = this.helper.offset(), n(e.left) && (this.position.left = e.left), 
            n(e.top) && (this.position.top = e.top), n(e.height) && (this.size.height = e.height), 
            n(e.width) && (this.size.width = e.width);
        },
        "_updateRatio": function(e) {
            var t = this.position, i = this.size, s = this.axis;
            return n(e.height) ? e.width = e.height * this.aspectRatio : n(e.width) && (e.height = e.width / this.aspectRatio), 
            "sw" === s && (e.left = t.left + (i.width - e.width), e.top = null), "nw" === s && (e.top = t.top + (i.height - e.height), 
            e.left = t.left + (i.width - e.width)), e;
        },
        "_respectSize": function(e) {
            var t = this._vBoundaries, i = this.axis, s = n(e.width) && t.maxWidth && t.maxWidth < e.width, r = n(e.height) && t.maxHeight && t.maxHeight < e.height, o = n(e.width) && t.minWidth && t.minWidth > e.width, a = n(e.height) && t.minHeight && t.minHeight > e.height, l = this.originalPosition.left + this.originalSize.width, h = this.position.top + this.size.height, c = /sw|nw|w/.test(i), u = /nw|ne|n/.test(i);
            return o && (e.width = t.minWidth), a && (e.height = t.minHeight), s && (e.width = t.maxWidth), 
            r && (e.height = t.maxHeight), o && c && (e.left = l - t.minWidth), s && c && (e.left = l - t.maxWidth), 
            a && u && (e.top = h - t.minHeight), r && u && (e.top = h - t.maxHeight), e.width || e.height || e.left || !e.top ? e.width || e.height || e.top || !e.left || (e.left = null) : e.top = null, 
            e;
        },
        "_proportionallyResize": function() {
            if (this._proportionallyResizeElements.length) {
                var e, t, i, n, s, r = this.helper || this.element;
                for (e = 0; e < this._proportionallyResizeElements.length; e++) {
                    if (s = this._proportionallyResizeElements[e], !this.borderDif) for (this.borderDif = [], 
                    i = [ s.css("borderTopWidth"), s.css("borderRightWidth"), s.css("borderBottomWidth"), s.css("borderLeftWidth") ], 
                    n = [ s.css("paddingTop"), s.css("paddingRight"), s.css("paddingBottom"), s.css("paddingLeft") ], 
                    t = 0; t < i.length; t++) this.borderDif[t] = (parseInt(i[t], 10) || 0) + (parseInt(n[t], 10) || 0);
                    s.css({
                        "height": r.height() - this.borderDif[0] - this.borderDif[2] || 0,
                        "width": r.width() - this.borderDif[1] - this.borderDif[3] || 0
                    });
                }
            }
        },
        "_renderProxy": function() {
            var t = this.element, i = this.options;
            this.elementOffset = t.offset(), this._helper ? (this.helper = this.helper || e("<div style='overflow:hidden;'></div>"), 
            this.helper.addClass(this._helper).css({
                "width": this.element.outerWidth() - 1,
                "height": this.element.outerHeight() - 1,
                "position": "absolute",
                "left": this.elementOffset.left + "px",
                "top": this.elementOffset.top + "px",
                "zIndex": ++i.zIndex
            }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element;
        },
        "_change": {
            "e": function(e, t) {
                return {
                    "width": this.originalSize.width + t
                };
            },
            "w": function(e, t) {
                var i = this.originalSize;
                return {
                    "left": this.originalPosition.left + t,
                    "width": i.width - t
                };
            },
            "n": function(e, t, i) {
                var n = this.originalSize;
                return {
                    "top": this.originalPosition.top + i,
                    "height": n.height - i
                };
            },
            "s": function(e, t, i) {
                return {
                    "height": this.originalSize.height + i
                };
            },
            "se": function(t, i, n) {
                return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [ t, i, n ]));
            },
            "sw": function(t, i, n) {
                return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [ t, i, n ]));
            },
            "ne": function(t, i, n) {
                return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [ t, i, n ]));
            },
            "nw": function(t, i, n) {
                return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [ t, i, n ]));
            }
        },
        "_propagate": function(t, i) {
            e.ui.plugin.call(this, t, [ i, this.ui() ]), "resize" !== t && this._trigger(t, i, this.ui());
        },
        "plugins": {},
        "ui": function() {
            return {
                "originalElement": this.originalElement,
                "element": this.element,
                "helper": this.helper,
                "position": this.position,
                "size": this.size,
                "originalSize": this.originalSize,
                "originalPosition": this.originalPosition
            };
        }
    }), e.ui.plugin.add("resizable", "animate", {
        "stop": function(t) {
            var i = e(this).data("ui-resizable"), n = i.options, s = i._proportionallyResizeElements, r = s.length && /textarea/i.test(s[0].nodeName), o = r && e.ui.hasScroll(s[0], "left") ? 0 : i.sizeDiff.height, a = r ? 0 : i.sizeDiff.width, l = {
                "width": i.size.width - a,
                "height": i.size.height - o
            }, h = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, c = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null;
            i.element.animate(e.extend(l, c && h ? {
                "top": c,
                "left": h
            } : {}), {
                "duration": n.animateDuration,
                "easing": n.animateEasing,
                "step": function() {
                    var n = {
                        "width": parseInt(i.element.css("width"), 10),
                        "height": parseInt(i.element.css("height"), 10),
                        "top": parseInt(i.element.css("top"), 10),
                        "left": parseInt(i.element.css("left"), 10)
                    };
                    s && s.length && e(s[0]).css({
                        "width": n.width,
                        "height": n.height
                    }), i._updateCache(n), i._propagate("resize", t);
                }
            });
        }
    }), e.ui.plugin.add("resizable", "containment", {
        "start": function() {
            var t, n, s, r, o, a, l, h = e(this).data("ui-resizable"), c = h.options, u = h.element, p = c.containment, d = p instanceof e ? p.get(0) : /parent/.test(p) ? u.parent().get(0) : p;
            d && (h.containerElement = e(d), /document/.test(p) || p === document ? (h.containerOffset = {
                "left": 0,
                "top": 0
            }, h.containerPosition = {
                "left": 0,
                "top": 0
            }, h.parentData = {
                "element": e(document),
                "left": 0,
                "top": 0,
                "width": e(document).width(),
                "height": e(document).height() || document.body.parentNode.scrollHeight
            }) : (t = e(d), n = [], e([ "Top", "Right", "Left", "Bottom" ]).each(function(e, s) {
                n[e] = i(t.css("padding" + s));
            }), h.containerOffset = t.offset(), h.containerPosition = t.position(), h.containerSize = {
                "height": t.innerHeight() - n[3],
                "width": t.innerWidth() - n[1]
            }, s = h.containerOffset, r = h.containerSize.height, o = h.containerSize.width, 
            a = e.ui.hasScroll(d, "left") ? d.scrollWidth : o, l = e.ui.hasScroll(d) ? d.scrollHeight : r, 
            h.parentData = {
                "element": d,
                "left": s.left,
                "top": s.top,
                "width": a,
                "height": l
            }));
        },
        "resize": function(t) {
            var i, n, s, r, o = e(this).data("ui-resizable"), a = o.options, l = o.containerOffset, h = o.position, c = o._aspectRatio || t.shiftKey, u = {
                "top": 0,
                "left": 0
            }, p = o.containerElement;
            p[0] !== document && /static/.test(p.css("position")) && (u = l), h.left < (o._helper ? l.left : 0) && (o.size.width = o.size.width + (o._helper ? o.position.left - l.left : o.position.left - u.left), 
            c && (o.size.height = o.size.width / o.aspectRatio), o.position.left = a.helper ? l.left : 0), 
            h.top < (o._helper ? l.top : 0) && (o.size.height = o.size.height + (o._helper ? o.position.top - l.top : o.position.top), 
            c && (o.size.width = o.size.height * o.aspectRatio), o.position.top = o._helper ? l.top : 0), 
            o.offset.left = o.parentData.left + o.position.left, o.offset.top = o.parentData.top + o.position.top, 
            i = Math.abs((o._helper, o.offset.left - u.left + o.sizeDiff.width)), n = Math.abs((o._helper ? o.offset.top - u.top : o.offset.top - l.top) + o.sizeDiff.height), 
            s = o.containerElement.get(0) === o.element.parent().get(0), r = /relative|absolute/.test(o.containerElement.css("position")), 
            s && r && (i -= Math.abs(o.parentData.left)), i + o.size.width >= o.parentData.width && (o.size.width = o.parentData.width - i, 
            c && (o.size.height = o.size.width / o.aspectRatio)), n + o.size.height >= o.parentData.height && (o.size.height = o.parentData.height - n, 
            c && (o.size.width = o.size.height * o.aspectRatio));
        },
        "stop": function() {
            var t = e(this).data("ui-resizable"), i = t.options, n = t.containerOffset, s = t.containerPosition, r = t.containerElement, o = e(t.helper), a = o.offset(), l = o.outerWidth() - t.sizeDiff.width, h = o.outerHeight() - t.sizeDiff.height;
            t._helper && !i.animate && /relative/.test(r.css("position")) && e(this).css({
                "left": a.left - s.left - n.left,
                "width": l,
                "height": h
            }), t._helper && !i.animate && /static/.test(r.css("position")) && e(this).css({
                "left": a.left - s.left - n.left,
                "width": l,
                "height": h
            });
        }
    }), e.ui.plugin.add("resizable", "alsoResize", {
        "start": function() {
            var t = e(this).data("ui-resizable").options, i = function(t) {
                e(t).each(function() {
                    var t = e(this);
                    t.data("ui-resizable-alsoresize", {
                        "width": parseInt(t.width(), 10),
                        "height": parseInt(t.height(), 10),
                        "left": parseInt(t.css("left"), 10),
                        "top": parseInt(t.css("top"), 10)
                    });
                });
            };
            "object" != typeof t.alsoResize || t.alsoResize.parentNode ? i(t.alsoResize) : t.alsoResize.length ? (t.alsoResize = t.alsoResize[0], 
            i(t.alsoResize)) : e.each(t.alsoResize, function(e) {
                i(e);
            });
        },
        "resize": function(t, i) {
            var n = e(this).data("ui-resizable"), s = n.options, r = n.originalSize, o = n.originalPosition, a = {
                "height": n.size.height - r.height || 0,
                "width": n.size.width - r.width || 0,
                "top": n.position.top - o.top || 0,
                "left": n.position.left - o.left || 0
            }, l = function(t, n) {
                e(t).each(function() {
                    var t = e(this), s = e(this).data("ui-resizable-alsoresize"), r = {}, o = n && n.length ? n : t.parents(i.originalElement[0]).length ? [ "width", "height" ] : [ "width", "height", "top", "left" ];
                    e.each(o, function(e, t) {
                        var i = (s[t] || 0) + (a[t] || 0);
                        i && i >= 0 && (r[t] = i || null);
                    }), t.css(r);
                });
            };
            "object" != typeof s.alsoResize || s.alsoResize.nodeType ? l(s.alsoResize) : e.each(s.alsoResize, function(e, t) {
                l(e, t);
            });
        },
        "stop": function() {
            e(this).removeData("resizable-alsoresize");
        }
    }), e.ui.plugin.add("resizable", "ghost", {
        "start": function() {
            var t = e(this).data("ui-resizable"), i = t.options, n = t.size;
            t.ghost = t.originalElement.clone(), t.ghost.css({
                "opacity": .25,
                "display": "block",
                "position": "relative",
                "height": n.height,
                "width": n.width,
                "margin": 0,
                "left": 0,
                "top": 0
            }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost : ""), 
            t.ghost.appendTo(t.helper);
        },
        "resize": function() {
            var t = e(this).data("ui-resizable");
            t.ghost && t.ghost.css({
                "position": "relative",
                "height": t.size.height,
                "width": t.size.width
            });
        },
        "stop": function() {
            var t = e(this).data("ui-resizable");
            t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0));
        }
    }), e.ui.plugin.add("resizable", "grid", {
        "resize": function() {
            var t = e(this).data("ui-resizable"), i = t.options, n = t.size, s = t.originalSize, r = t.originalPosition, o = t.axis, a = "number" == typeof i.grid ? [ i.grid, i.grid ] : i.grid, l = a[0] || 1, h = a[1] || 1, c = Math.round((n.width - s.width) / l) * l, u = Math.round((n.height - s.height) / h) * h, p = s.width + c, d = s.height + u, f = i.maxWidth && i.maxWidth < p, m = i.maxHeight && i.maxHeight < d, g = i.minWidth && i.minWidth > p, y = i.minHeight && i.minHeight > d;
            i.grid = a, g && (p += l), y && (d += h), f && (p -= l), m && (d -= h), /^(se|s|e)$/.test(o) ? (t.size.width = p, 
            t.size.height = d) : /^(ne)$/.test(o) ? (t.size.width = p, t.size.height = d, t.position.top = r.top - u) : /^(sw)$/.test(o) ? (t.size.width = p, 
            t.size.height = d, t.position.left = r.left - c) : (d - h > 0 ? (t.size.height = d, 
            t.position.top = r.top - u) : (t.size.height = h, t.position.top = r.top + s.height - h), 
            p - l > 0 ? (t.size.width = p, t.position.left = r.left - c) : (t.size.width = l, 
            t.position.left = r.left + s.width - l));
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.selectable", e.ui.mouse, {
        "version": "1.10.4",
        "options": {
            "appendTo": "body",
            "autoRefresh": !0,
            "distance": 0,
            "filter": "*",
            "tolerance": "touch",
            "selected": null,
            "selecting": null,
            "start": null,
            "stop": null,
            "unselected": null,
            "unselecting": null
        },
        "_create": function() {
            var t, i = this;
            this.element.addClass("ui-selectable"), this.dragged = !1, this.refresh = function() {
                (t = e(i.options.filter, i.element[0])).addClass("ui-selectee"), t.each(function() {
                    var t = e(this), i = t.offset();
                    e.data(this, "selectable-item", {
                        "element": this,
                        "$element": t,
                        "left": i.left,
                        "top": i.top,
                        "right": i.left + t.outerWidth(),
                        "bottom": i.top + t.outerHeight(),
                        "startselected": !1,
                        "selected": t.hasClass("ui-selected"),
                        "selecting": t.hasClass("ui-selecting"),
                        "unselecting": t.hasClass("ui-unselecting")
                    });
                });
            }, this.refresh(), this.selectees = t.addClass("ui-selectee"), this._mouseInit(), 
            this.helper = e("<div class='ui-selectable-helper'></div>");
        },
        "_destroy": function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), 
            this._mouseDestroy();
        },
        "_mouseStart": function(t) {
            var i = this, n = this.options;
            this.opos = [ t.pageX, t.pageY ], this.options.disabled || (this.selectees = e(n.filter, this.element[0]), 
            this._trigger("start", t), e(n.appendTo).append(this.helper), this.helper.css({
                "left": t.pageX,
                "top": t.pageY,
                "width": 0,
                "height": 0
            }), n.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function() {
                var n = e.data(this, "selectable-item");
                n.startselected = !0, t.metaKey || t.ctrlKey || (n.$element.removeClass("ui-selected"), 
                n.selected = !1, n.$element.addClass("ui-unselecting"), n.unselecting = !0, i._trigger("unselecting", t, {
                    "unselecting": n.element
                }));
            }), e(t.target).parents().addBack().each(function() {
                var n, s = e.data(this, "selectable-item");
                if (s) return n = !t.metaKey && !t.ctrlKey || !s.$element.hasClass("ui-selected"), 
                s.$element.removeClass(n ? "ui-unselecting" : "ui-selected").addClass(n ? "ui-selecting" : "ui-unselecting"), 
                s.unselecting = !n, s.selecting = n, s.selected = n, n ? i._trigger("selecting", t, {
                    "selecting": s.element
                }) : i._trigger("unselecting", t, {
                    "unselecting": s.element
                }), !1;
            }));
        },
        "_mouseDrag": function(t) {
            if (this.dragged = !0, !this.options.disabled) {
                var i, n = this, s = this.options, r = this.opos[0], o = this.opos[1], a = t.pageX, l = t.pageY;
                return r > a && (i = a, a = r, r = i), o > l && (i = l, l = o, o = i), this.helper.css({
                    "left": r,
                    "top": o,
                    "width": a - r,
                    "height": l - o
                }), this.selectees.each(function() {
                    var i = e.data(this, "selectable-item"), h = !1;
                    i && i.element !== n.element[0] && ("touch" === s.tolerance ? h = !(i.left > a || i.right < r || i.top > l || i.bottom < o) : "fit" === s.tolerance && (h = i.left > r && i.right < a && i.top > o && i.bottom < l), 
                    h ? (i.selected && (i.$element.removeClass("ui-selected"), i.selected = !1), i.unselecting && (i.$element.removeClass("ui-unselecting"), 
                    i.unselecting = !1), i.selecting || (i.$element.addClass("ui-selecting"), i.selecting = !0, 
                    n._trigger("selecting", t, {
                        "selecting": i.element
                    }))) : (i.selecting && ((t.metaKey || t.ctrlKey) && i.startselected ? (i.$element.removeClass("ui-selecting"), 
                    i.selecting = !1, i.$element.addClass("ui-selected"), i.selected = !0) : (i.$element.removeClass("ui-selecting"), 
                    i.selecting = !1, i.startselected && (i.$element.addClass("ui-unselecting"), i.unselecting = !0), 
                    n._trigger("unselecting", t, {
                        "unselecting": i.element
                    }))), i.selected && (t.metaKey || t.ctrlKey || i.startselected || (i.$element.removeClass("ui-selected"), 
                    i.selected = !1, i.$element.addClass("ui-unselecting"), i.unselecting = !0, n._trigger("unselecting", t, {
                        "unselecting": i.element
                    })))));
                }), !1;
            }
        },
        "_mouseStop": function(t) {
            var i = this;
            return this.dragged = !1, e(".ui-unselecting", this.element[0]).each(function() {
                var n = e.data(this, "selectable-item");
                n.$element.removeClass("ui-unselecting"), n.unselecting = !1, n.startselected = !1, 
                i._trigger("unselected", t, {
                    "unselected": n.element
                });
            }), e(".ui-selecting", this.element[0]).each(function() {
                var n = e.data(this, "selectable-item");
                n.$element.removeClass("ui-selecting").addClass("ui-selected"), n.selecting = !1, 
                n.selected = !0, n.startselected = !0, i._trigger("selected", t, {
                    "selected": n.element
                });
            }), this._trigger("stop", t), this.helper.remove(), !1;
        }
    });
}(jQuery), function(e, t) {
    e.widget("ui.slider", e.ui.mouse, {
        "version": "1.10.4",
        "widgetEventPrefix": "slide",
        "options": {
            "animate": !1,
            "distance": 0,
            "max": 100,
            "min": 0,
            "orientation": "horizontal",
            "range": !1,
            "step": 1,
            "value": 0,
            "values": null,
            "change": null,
            "slide": null,
            "start": null,
            "stop": null
        },
        "_create": function() {
            this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, 
            this._detectOrientation(), this._mouseInit(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all"), 
            this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1;
        },
        "_refresh": function() {
            this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue();
        },
        "_createHandles": function() {
            var t, i, n = this.options, s = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), r = [];
            for (i = n.values && n.values.length || 1, s.length > i && (s.slice(i).remove(), 
            s = s.slice(0, i)), t = s.length; t < i; t++) r.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
            this.handles = s.add(e(r.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), 
            this.handles.each(function(t) {
                e(this).data("ui-slider-handle-index", t);
            });
        },
        "_createRange": function() {
            var t = this.options, i = "";
            t.range ? (!0 === t.range && (t.values ? t.values.length && 2 !== t.values.length ? t.values = [ t.values[0], t.values[0] ] : e.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [ this._valueMin(), this._valueMin() ]), 
            this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                "left": "",
                "bottom": ""
            }) : (this.range = e("<div></div>").appendTo(this.element), i = "ui-slider-range ui-widget-header ui-corner-all"), 
            this.range.addClass(i + ("min" === t.range || "max" === t.range ? " ui-slider-range-" + t.range : ""))) : (this.range && this.range.remove(), 
            this.range = null);
        },
        "_setupEvents": function() {
            var e = this.handles.add(this.range).filter("a");
            this._off(e), this._on(e, this._handleEvents), this._hoverable(e), this._focusable(e);
        },
        "_destroy": function() {
            this.handles.remove(), this.range && this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), 
            this._mouseDestroy();
        },
        "_mouseCapture": function(t) {
            var i, n, s, r, o, a, l, h = this, c = this.options;
            return !c.disabled && (this.elementSize = {
                "width": this.element.outerWidth(),
                "height": this.element.outerHeight()
            }, this.elementOffset = this.element.offset(), i = {
                "x": t.pageX,
                "y": t.pageY
            }, n = this._normValueFromMouse(i), s = this._valueMax() - this._valueMin() + 1, 
            this.handles.each(function(t) {
                var i = Math.abs(n - h.values(t));
                (s > i || s === i && (t === h._lastChangedValue || h.values(t) === c.min)) && (s = i, 
                r = e(this), o = t);
            }), !1 !== this._start(t, o) && (this._mouseSliding = !0, this._handleIndex = o, 
            r.addClass("ui-state-active").focus(), a = r.offset(), l = !e(t.target).parents().addBack().is(".ui-slider-handle"), 
            this._clickOffset = l ? {
                "left": 0,
                "top": 0
            } : {
                "left": t.pageX - a.left - r.width() / 2,
                "top": t.pageY - a.top - r.height() / 2 - (parseInt(r.css("borderTopWidth"), 10) || 0) - (parseInt(r.css("borderBottomWidth"), 10) || 0) + (parseInt(r.css("marginTop"), 10) || 0)
            }, this.handles.hasClass("ui-state-hover") || this._slide(t, o, n), this._animateOff = !0, 
            !0));
        },
        "_mouseStart": function() {
            return !0;
        },
        "_mouseDrag": function(e) {
            var t = {
                "x": e.pageX,
                "y": e.pageY
            }, i = this._normValueFromMouse(t);
            return this._slide(e, this._handleIndex, i), !1;
        },
        "_mouseStop": function(e) {
            return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), 
            this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, 
            this._animateOff = !1, !1;
        },
        "_detectOrientation": function() {
            this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal";
        },
        "_normValueFromMouse": function(e) {
            var t, i, n, s, r;
            return "horizontal" === this.orientation ? (t = this.elementSize.width, i = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, 
            i = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), 
            (n = i / t) > 1 && (n = 1), n < 0 && (n = 0), "vertical" === this.orientation && (n = 1 - n), 
            s = this._valueMax() - this._valueMin(), r = this._valueMin() + n * s, this._trimAlignValue(r);
        },
        "_start": function(e, t) {
            var i = {
                "handle": this.handles[t],
                "value": this.value()
            };
            return this.options.values && this.options.values.length && (i.value = this.values(t), 
            i.values = this.values()), this._trigger("start", e, i);
        },
        "_slide": function(e, t, i) {
            var n, s, r;
            this.options.values && this.options.values.length ? (n = this.values(t ? 0 : 1), 
            2 === this.options.values.length && !0 === this.options.range && (0 === t && i > n || 1 === t && i < n) && (i = n), 
            i !== this.values(t) && ((s = this.values())[t] = i, r = this._trigger("slide", e, {
                "handle": this.handles[t],
                "value": i,
                "values": s
            }), n = this.values(t ? 0 : 1), !1 !== r && this.values(t, i))) : i !== this.value() && !1 !== (r = this._trigger("slide", e, {
                "handle": this.handles[t],
                "value": i
            })) && this.value(i);
        },
        "_stop": function(e, t) {
            var i = {
                "handle": this.handles[t],
                "value": this.value()
            };
            this.options.values && this.options.values.length && (i.value = this.values(t), 
            i.values = this.values()), this._trigger("stop", e, i);
        },
        "_change": function(e, t) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {
                    "handle": this.handles[t],
                    "value": this.value()
                };
                this.options.values && this.options.values.length && (i.value = this.values(t), 
                i.values = this.values()), this._lastChangedValue = t, this._trigger("change", e, i);
            }
        },
        "value": function(e) {
            return arguments.length ? (this.options.value = this._trimAlignValue(e), this._refreshValue(), 
            void this._change(null, 0)) : this._value();
        },
        "values": function(t, i) {
            var n, s, r;
            if (arguments.length > 1) return this.options.values[t] = this._trimAlignValue(i), 
            this._refreshValue(), void this._change(null, t);
            if (!arguments.length) return this._values();
            if (!e.isArray(arguments[0])) return this.options.values && this.options.values.length ? this._values(t) : this.value();
            for (n = this.options.values, s = arguments[0], r = 0; r < n.length; r += 1) n[r] = this._trimAlignValue(s[r]), 
            this._change(null, r);
            this._refreshValue();
        },
        "_setOption": function(t, i) {
            var n, s = 0;
            switch ("range" === t && !0 === this.options.range && ("min" === i ? (this.options.value = this._values(0), 
            this.options.values = null) : "max" === i && (this.options.value = this._values(this.options.values.length - 1), 
            this.options.values = null)), e.isArray(this.options.values) && (s = this.options.values.length), 
            e.Widget.prototype._setOption.apply(this, arguments), t) {
              case "orientation":
                this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), 
                this._refreshValue();
                break;

              case "value":
                this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                break;

              case "values":
                for (this._animateOff = !0, this._refreshValue(), n = 0; n < s; n += 1) this._change(null, n);
                this._animateOff = !1;
                break;

              case "min":
              case "max":
                this._animateOff = !0, this._refreshValue(), this._animateOff = !1;
                break;

              case "range":
                this._animateOff = !0, this._refresh(), this._animateOff = !1;
            }
        },
        "_value": function() {
            var e = this.options.value;
            return e = this._trimAlignValue(e);
        },
        "_values": function(e) {
            var t, i, n;
            if (arguments.length) return t = this.options.values[e], t = this._trimAlignValue(t);
            if (this.options.values && this.options.values.length) {
                for (i = this.options.values.slice(), n = 0; n < i.length; n += 1) i[n] = this._trimAlignValue(i[n]);
                return i;
            }
            return [];
        },
        "_trimAlignValue": function(e) {
            if (e <= this._valueMin()) return this._valueMin();
            if (e >= this._valueMax()) return this._valueMax();
            var t = this.options.step > 0 ? this.options.step : 1, i = (e - this._valueMin()) % t, n = e - i;
            return 2 * Math.abs(i) >= t && (n += i > 0 ? t : -t), parseFloat(n.toFixed(5));
        },
        "_valueMin": function() {
            return this.options.min;
        },
        "_valueMax": function() {
            return this.options.max;
        },
        "_refreshValue": function() {
            var t, i, n, s, r, o = this.options.range, a = this.options, l = this, h = !this._animateOff && a.animate, c = {};
            this.options.values && this.options.values.length ? this.handles.each(function(n) {
                i = (l.values(n) - l._valueMin()) / (l._valueMax() - l._valueMin()) * 100, c["horizontal" === l.orientation ? "left" : "bottom"] = i + "%", 
                e(this).stop(1, 1)[h ? "animate" : "css"](c, a.animate), !0 === l.options.range && ("horizontal" === l.orientation ? (0 === n && l.range.stop(1, 1)[h ? "animate" : "css"]({
                    "left": i + "%"
                }, a.animate), 1 === n && l.range[h ? "animate" : "css"]({
                    "width": i - t + "%"
                }, {
                    "queue": !1,
                    "duration": a.animate
                })) : (0 === n && l.range.stop(1, 1)[h ? "animate" : "css"]({
                    "bottom": i + "%"
                }, a.animate), 1 === n && l.range[h ? "animate" : "css"]({
                    "height": i - t + "%"
                }, {
                    "queue": !1,
                    "duration": a.animate
                }))), t = i;
            }) : (n = this.value(), s = this._valueMin(), r = this._valueMax(), i = r !== s ? (n - s) / (r - s) * 100 : 0, 
            c["horizontal" === this.orientation ? "left" : "bottom"] = i + "%", this.handle.stop(1, 1)[h ? "animate" : "css"](c, a.animate), 
            "min" === o && "horizontal" === this.orientation && this.range.stop(1, 1)[h ? "animate" : "css"]({
                "width": i + "%"
            }, a.animate), "max" === o && "horizontal" === this.orientation && this.range[h ? "animate" : "css"]({
                "width": 100 - i + "%"
            }, {
                "queue": !1,
                "duration": a.animate
            }), "min" === o && "vertical" === this.orientation && this.range.stop(1, 1)[h ? "animate" : "css"]({
                "height": i + "%"
            }, a.animate), "max" === o && "vertical" === this.orientation && this.range[h ? "animate" : "css"]({
                "height": 100 - i + "%"
            }, {
                "queue": !1,
                "duration": a.animate
            }));
        },
        "_handleEvents": {
            "keydown": function(t) {
                var i, n, s, r = e(t.target).data("ui-slider-handle-index");
                switch (t.keyCode) {
                  case e.ui.keyCode.HOME:
                  case e.ui.keyCode.END:
                  case e.ui.keyCode.PAGE_UP:
                  case e.ui.keyCode.PAGE_DOWN:
                  case e.ui.keyCode.UP:
                  case e.ui.keyCode.RIGHT:
                  case e.ui.keyCode.DOWN:
                  case e.ui.keyCode.LEFT:
                    if (t.preventDefault(), !this._keySliding && (this._keySliding = !0, e(t.target).addClass("ui-state-active"), 
                    !1 === this._start(t, r))) return;
                }
                switch (s = this.options.step, i = n = this.options.values && this.options.values.length ? this.values(r) : this.value(), 
                t.keyCode) {
                  case e.ui.keyCode.HOME:
                    n = this._valueMin();
                    break;

                  case e.ui.keyCode.END:
                    n = this._valueMax();
                    break;

                  case e.ui.keyCode.PAGE_UP:
                    n = this._trimAlignValue(i + (this._valueMax() - this._valueMin()) / 5);
                    break;

                  case e.ui.keyCode.PAGE_DOWN:
                    n = this._trimAlignValue(i - (this._valueMax() - this._valueMin()) / 5);
                    break;

                  case e.ui.keyCode.UP:
                  case e.ui.keyCode.RIGHT:
                    if (i === this._valueMax()) return;
                    n = this._trimAlignValue(i + s);
                    break;

                  case e.ui.keyCode.DOWN:
                  case e.ui.keyCode.LEFT:
                    if (i === this._valueMin()) return;
                    n = this._trimAlignValue(i - s);
                }
                this._slide(t, r, n);
            },
            "click": function(e) {
                e.preventDefault();
            },
            "keyup": function(t) {
                var i = e(t.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1, this._stop(t, i), this._change(t, i), 
                e(t.target).removeClass("ui-state-active"));
            }
        }
    });
}(jQuery), function(e, t) {
    function i(e, t, i) {
        return e > t && e < t + i;
    }
    function n(e) {
        return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display"));
    }
    e.widget("ui.sortable", e.ui.mouse, {
        "version": "1.10.4",
        "widgetEventPrefix": "sort",
        "ready": !1,
        "options": {
            "appendTo": "parent",
            "axis": !1,
            "connectWith": !1,
            "containment": !1,
            "cursor": "auto",
            "cursorAt": !1,
            "dropOnEmpty": !0,
            "forcePlaceholderSize": !1,
            "forceHelperSize": !1,
            "grid": !1,
            "handle": !1,
            "helper": "original",
            "items": "> *",
            "opacity": !1,
            "placeholder": !1,
            "revert": !1,
            "scroll": !0,
            "scrollSensitivity": 20,
            "scrollSpeed": 20,
            "scope": "default",
            "tolerance": "intersect",
            "zIndex": 1e3,
            "activate": null,
            "beforeStop": null,
            "change": null,
            "deactivate": null,
            "out": null,
            "over": null,
            "receive": null,
            "remove": null,
            "sort": null,
            "start": null,
            "stop": null,
            "update": null
        },
        "_create": function() {
            var e = this.options;
            this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), 
            this.floating = !!this.items.length && ("x" === e.axis || n(this.items[0].item)), 
            this.offset = this.element.offset(), this._mouseInit(), this.ready = !0;
        },
        "_destroy": function() {
            this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
            for (var e = this.items.length - 1; e >= 0; e--) this.items[e].item.removeData(this.widgetName + "-item");
            return this;
        },
        "_setOption": function(t, i) {
            "disabled" === t ? (this.options[t] = i, this.widget().toggleClass("ui-sortable-disabled", !!i)) : e.Widget.prototype._setOption.apply(this, arguments);
        },
        "_mouseCapture": function(t, i) {
            var n = null, s = !1, r = this;
            return !this.reverting && (!this.options.disabled && "static" !== this.options.type && (this._refreshItems(t), 
            e(t.target).parents().each(function() {
                if (e.data(this, r.widgetName + "-item") === r) return n = e(this), !1;
            }), e.data(t.target, r.widgetName + "-item") === r && (n = e(t.target)), !!n && (!(this.options.handle && !i && (e(this.options.handle, n).find("*").addBack().each(function() {
                this === t.target && (s = !0);
            }), !s)) && (this.currentItem = n, this._removeCurrentsFromItems(), !0))));
        },
        "_mouseStart": function(t, i, n) {
            var s, r, o = this.options;
            if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), 
            this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), 
            this.offset = this.currentItem.offset(), this.offset = {
                "top": this.offset.top - this.margins.top,
                "left": this.offset.left - this.margins.left
            }, e.extend(this.offset, {
                "click": {
                    "left": t.pageX - this.offset.left,
                    "top": t.pageY - this.offset.top
                },
                "parent": this._getParentOffset(),
                "relative": this._getRelativeOffset()
            }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), 
            this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, 
            this.originalPageY = t.pageY, o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt), 
            this.domPosition = {
                "prev": this.currentItem.prev()[0],
                "parent": this.currentItem.parent()[0]
            }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), 
            o.containment && this._setContainment(), o.cursor && "auto" !== o.cursor && (r = this.document.find("body"), 
            this.storedCursor = r.css("cursor"), r.css("cursor", o.cursor), this.storedStylesheet = e("<style>*{ cursor: " + o.cursor + " !important; }</style>").appendTo(r)), 
            o.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), 
            this.helper.css("opacity", o.opacity)), o.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), 
            this.helper.css("zIndex", o.zIndex)), this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), 
            this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), 
            !n) for (s = this.containers.length - 1; s >= 0; s--) this.containers[s]._trigger("activate", t, this._uiHash(this));
            return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), 
            this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), 
            !0;
        },
        "_mouseDrag": function(t) {
            var i, n, s, r, o = this.options, a = !1;
            for (this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), 
            this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < o.scrollSensitivity ? this.scrollParent[0].scrollTop = a = this.scrollParent[0].scrollTop + o.scrollSpeed : t.pageY - this.overflowOffset.top < o.scrollSensitivity && (this.scrollParent[0].scrollTop = a = this.scrollParent[0].scrollTop - o.scrollSpeed), 
            this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < o.scrollSensitivity ? this.scrollParent[0].scrollLeft = a = this.scrollParent[0].scrollLeft + o.scrollSpeed : t.pageX - this.overflowOffset.left < o.scrollSensitivity && (this.scrollParent[0].scrollLeft = a = this.scrollParent[0].scrollLeft - o.scrollSpeed)) : (t.pageY - e(document).scrollTop() < o.scrollSensitivity ? a = e(document).scrollTop(e(document).scrollTop() - o.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < o.scrollSensitivity && (a = e(document).scrollTop(e(document).scrollTop() + o.scrollSpeed)), 
            t.pageX - e(document).scrollLeft() < o.scrollSensitivity ? a = e(document).scrollLeft(e(document).scrollLeft() - o.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < o.scrollSensitivity && (a = e(document).scrollLeft(e(document).scrollLeft() + o.scrollSpeed))), 
            !1 !== a && e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), 
            this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), 
            this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), 
            i = this.items.length - 1; i >= 0; i--) if (n = this.items[i], s = n.item[0], (r = this._intersectsWithPointer(n)) && n.instance === this.currentContainer && !(s === this.currentItem[0] || this.placeholder[1 === r ? "next" : "prev"]()[0] === s || e.contains(this.placeholder[0], s) || "semi-dynamic" === this.options.type && e.contains(this.element[0], s))) {
                if (this.direction = 1 === r ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(n)) break;
                this._rearrange(t, n), this._trigger("change", t, this._uiHash());
                break;
            }
            return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), 
            this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, 
            !1;
        },
        "_mouseStop": function(t, i) {
            if (t) {
                if (e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t), 
                this.options.revert) {
                    var n = this, s = this.placeholder.offset(), r = this.options.axis, o = {};
                    r && "x" !== r || (o.left = s.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)), 
                    r && "y" !== r || (o.top = s.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)), 
                    this.reverting = !0, e(this.helper).animate(o, parseInt(this.options.revert, 10) || 500, function() {
                        n._clear(t);
                    });
                } else this._clear(t, i);
                return !1;
            }
        },
        "cancel": function() {
            if (this.dragging) {
                this._mouseUp({
                    "target": null
                }), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                for (var t = this.containers.length - 1; t >= 0; t--) this.containers[t]._trigger("deactivate", null, this._uiHash(this)), 
                this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), 
                this.containers[t].containerCache.over = 0);
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), 
            "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), 
            e.extend(this, {
                "helper": null,
                "dragging": !1,
                "reverting": !1,
                "_noFinalSort": null
            }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), 
            this;
        },
        "serialize": function(t) {
            var i = this._getItemsAsjQuery(t && t.connected), n = [];
            return t = t || {}, e(i).each(function() {
                var i = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                i && n.push((t.key || i[1] + "[]") + "=" + (t.key && t.expression ? i[1] : i[2]));
            }), !n.length && t.key && n.push(t.key + "="), n.join("&");
        },
        "toArray": function(t) {
            var i = this._getItemsAsjQuery(t && t.connected), n = [];
            return t = t || {}, i.each(function() {
                n.push(e(t.item || this).attr(t.attribute || "id") || "");
            }), n;
        },
        "_intersectsWith": function(e) {
            var t = this.positionAbs.left, i = t + this.helperProportions.width, n = this.positionAbs.top, s = n + this.helperProportions.height, r = e.left, o = r + e.width, a = e.top, l = a + e.height, h = this.offset.click.top, c = this.offset.click.left, u = "x" === this.options.axis || n + h > a && n + h < l, p = "y" === this.options.axis || t + c > r && t + c < o, d = u && p;
            return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? d : r < t + this.helperProportions.width / 2 && i - this.helperProportions.width / 2 < o && a < n + this.helperProportions.height / 2 && s - this.helperProportions.height / 2 < l;
        },
        "_intersectsWithPointer": function(e) {
            var t = "x" === this.options.axis || i(this.positionAbs.top + this.offset.click.top, e.top, e.height), n = "y" === this.options.axis || i(this.positionAbs.left + this.offset.click.left, e.left, e.width), s = t && n, r = this._getDragVerticalDirection(), o = this._getDragHorizontalDirection();
            return !!s && (this.floating ? o && "right" === o || "down" === r ? 2 : 1 : r && ("down" === r ? 2 : 1));
        },
        "_intersectsWithSides": function(e) {
            var t = i(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height), n = i(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width), s = this._getDragVerticalDirection(), r = this._getDragHorizontalDirection();
            return this.floating && r ? "right" === r && n || "left" === r && !n : s && ("down" === s && t || "up" === s && !t);
        },
        "_getDragVerticalDirection": function() {
            var e = this.positionAbs.top - this.lastPositionAbs.top;
            return 0 !== e && (e > 0 ? "down" : "up");
        },
        "_getDragHorizontalDirection": function() {
            var e = this.positionAbs.left - this.lastPositionAbs.left;
            return 0 !== e && (e > 0 ? "right" : "left");
        },
        "refresh": function(e) {
            return this._refreshItems(e), this.refreshPositions(), this;
        },
        "_connectWith": function() {
            var e = this.options;
            return e.connectWith.constructor === String ? [ e.connectWith ] : e.connectWith;
        },
        "_getItemsAsjQuery": function(t) {
            var i, n, s, r, o = [], a = [], l = this._connectWith();
            if (l && t) for (i = l.length - 1; i >= 0; i--) for (n = (s = e(l[i])).length - 1; n >= 0; n--) (r = e.data(s[n], this.widgetFullName)) && r !== this && !r.options.disabled && a.push([ e.isFunction(r.options.items) ? r.options.items.call(r.element) : e(r.options.items, r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), r ]);
            for (a.push([ e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                "options": this.options,
                "item": this.currentItem
            }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this ]), 
            i = a.length - 1; i >= 0; i--) a[i][0].each(function() {
                o.push(this);
            });
            return e(o);
        },
        "_removeCurrentsFromItems": function() {
            var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = e.grep(this.items, function(e) {
                for (var i = 0; i < t.length; i++) if (t[i] === e.item[0]) return !1;
                return !0;
            });
        },
        "_refreshItems": function(t) {
            this.items = [], this.containers = [ this ];
            var i, n, s, r, o, a, l, h, c = this.items, u = [ [ e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                "item": this.currentItem
            }) : e(this.options.items, this.element), this ] ], p = this._connectWith();
            if (p && this.ready) for (i = p.length - 1; i >= 0; i--) for (n = (s = e(p[i])).length - 1; n >= 0; n--) (r = e.data(s[n], this.widgetFullName)) && r !== this && !r.options.disabled && (u.push([ e.isFunction(r.options.items) ? r.options.items.call(r.element[0], t, {
                "item": this.currentItem
            }) : e(r.options.items, r.element), r ]), this.containers.push(r));
            for (i = u.length - 1; i >= 0; i--) for (o = u[i][1], n = 0, h = (a = u[i][0]).length; n < h; n++) (l = e(a[n])).data(this.widgetName + "-item", o), 
            c.push({
                "item": l,
                "instance": o,
                "width": 0,
                "height": 0,
                "left": 0,
                "top": 0
            });
        },
        "refreshPositions": function(t) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            var i, n, s, r;
            for (i = this.items.length - 1; i >= 0; i--) (n = this.items[i]).instance !== this.currentContainer && this.currentContainer && n.item[0] !== this.currentItem[0] || (s = this.options.toleranceElement ? e(this.options.toleranceElement, n.item) : n.item, 
            t || (n.width = s.outerWidth(), n.height = s.outerHeight()), r = s.offset(), n.left = r.left, 
            n.top = r.top);
            if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this); else for (i = this.containers.length - 1; i >= 0; i--) r = this.containers[i].element.offset(), 
            this.containers[i].containerCache.left = r.left, this.containers[i].containerCache.top = r.top, 
            this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), 
            this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
            return this;
        },
        "_createPlaceholder": function(t) {
            var i, n = (t = t || this).options;
            n.placeholder && n.placeholder.constructor !== String || (i = n.placeholder, n.placeholder = {
                "element": function() {
                    var n = t.currentItem[0].nodeName.toLowerCase(), s = e("<" + n + ">", t.document[0]).addClass(i || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                    return "tr" === n ? t.currentItem.children().each(function() {
                        e("<td>&#160;</td>", t.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(s);
                    }) : "img" === n && s.attr("src", t.currentItem.attr("src")), i || s.css("visibility", "hidden"), 
                    s;
                },
                "update": function(e, s) {
                    i && !n.forcePlaceholderSize || (s.height() || s.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), 
                    s.width() || s.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10)));
                }
            }), t.placeholder = e(n.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), 
            n.placeholder.update(t, t.placeholder);
        },
        "_contactContainers": function(t) {
            var s, r, o, a, l, h, c, u, p, d, f = null, m = null;
            for (s = this.containers.length - 1; s >= 0; s--) if (!e.contains(this.currentItem[0], this.containers[s].element[0])) if (this._intersectsWith(this.containers[s].containerCache)) {
                if (f && e.contains(this.containers[s].element[0], f.element[0])) continue;
                f = this.containers[s], m = s;
            } else this.containers[s].containerCache.over && (this.containers[s]._trigger("out", t, this._uiHash(this)), 
            this.containers[s].containerCache.over = 0);
            if (f) if (1 === this.containers.length) this.containers[m].containerCache.over || (this.containers[m]._trigger("over", t, this._uiHash(this)), 
            this.containers[m].containerCache.over = 1); else {
                for (o = 1e4, a = null, l = (d = f.floating || n(this.currentItem)) ? "left" : "top", 
                h = d ? "width" : "height", c = this.positionAbs[l] + this.offset.click[l], r = this.items.length - 1; r >= 0; r--) e.contains(this.containers[m].element[0], this.items[r].item[0]) && this.items[r].item[0] !== this.currentItem[0] && (d && !i(this.positionAbs.top + this.offset.click.top, this.items[r].top, this.items[r].height) || (u = this.items[r].item.offset()[l], 
                p = !1, Math.abs(u - c) > Math.abs(u + this.items[r][h] - c) && (p = !0, u += this.items[r][h]), 
                Math.abs(u - c) < o && (o = Math.abs(u - c), a = this.items[r], this.direction = p ? "up" : "down")));
                if (!a && !this.options.dropOnEmpty) return;
                if (this.currentContainer === this.containers[m]) return;
                a ? this._rearrange(t, a, null, !0) : this._rearrange(t, null, this.containers[m].element, !0), 
                this._trigger("change", t, this._uiHash()), this.containers[m]._trigger("change", t, this._uiHash(this)), 
                this.currentContainer = this.containers[m], this.options.placeholder.update(this.currentContainer, this.placeholder), 
                this.containers[m]._trigger("over", t, this._uiHash(this)), this.containers[m].containerCache.over = 1;
            }
        },
        "_createHelper": function(t) {
            var i = this.options, n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [ t, this.currentItem ])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem;
            return n.parents("body").length || e("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(n[0]), 
            n[0] === this.currentItem[0] && (this._storedCSS = {
                "width": this.currentItem[0].style.width,
                "height": this.currentItem[0].style.height,
                "position": this.currentItem.css("position"),
                "top": this.currentItem.css("top"),
                "left": this.currentItem.css("left")
            }), n[0].style.width && !i.forceHelperSize || n.width(this.currentItem.width()), 
            n[0].style.height && !i.forceHelperSize || n.height(this.currentItem.height()), 
            n;
        },
        "_adjustOffsetFromHelper": function(t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                "left": +t[0],
                "top": +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), 
            "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top);
        },
        "_getParentOffset": function() {
            this.offsetParent = this.helper.offsetParent();
            var t = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), 
            t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                "top": 0,
                "left": 0
            }), {
                "top": t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                "left": t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        "_getRelativeOffset": function() {
            if ("relative" === this.cssPosition) {
                var e = this.currentItem.position();
                return {
                    "top": e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    "left": e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                };
            }
            return {
                "top": 0,
                "left": 0
            };
        },
        "_cacheMargins": function() {
            this.margins = {
                "left": parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                "top": parseInt(this.currentItem.css("marginTop"), 10) || 0
            };
        },
        "_cacheHelperProportions": function() {
            this.helperProportions = {
                "width": this.helper.outerWidth(),
                "height": this.helper.outerHeight()
            };
        },
        "_setContainment": function() {
            var t, i, n, s = this.options;
            "parent" === s.containment && (s.containment = this.helper[0].parentNode), "document" !== s.containment && "window" !== s.containment || (this.containment = [ 0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e("document" === s.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (e("document" === s.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ]), 
            /^(document|window|parent)$/.test(s.containment) || (t = e(s.containment)[0], i = e(s.containment).offset(), 
            n = "hidden" !== e(t).css("overflow"), this.containment = [ i.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (n ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (n ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top ]);
        },
        "_convertPositionTo": function(t, i) {
            i || (i = this.position);
            var n = "absolute" === t ? 1 : -1, s = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, r = /(html|body)/i.test(s[0].tagName);
            return {
                "top": i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : r ? 0 : s.scrollTop()) * n,
                "left": i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : r ? 0 : s.scrollLeft()) * n
            };
        },
        "_generatePosition": function(t) {
            var i, n, s = this.options, r = t.pageX, o = t.pageY, a = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, l = /(html|body)/i.test(a[0].tagName);
            return "relative" !== this.cssPosition || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), 
            this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (r = this.containment[0] + this.offset.click.left), 
            t.pageY - this.offset.click.top < this.containment[1] && (o = this.containment[1] + this.offset.click.top), 
            t.pageX - this.offset.click.left > this.containment[2] && (r = this.containment[2] + this.offset.click.left), 
            t.pageY - this.offset.click.top > this.containment[3] && (o = this.containment[3] + this.offset.click.top)), 
            s.grid && (i = this.originalPageY + Math.round((o - this.originalPageY) / s.grid[1]) * s.grid[1], 
            o = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - s.grid[1] : i + s.grid[1] : i, 
            n = this.originalPageX + Math.round((r - this.originalPageX) / s.grid[0]) * s.grid[0], 
            r = this.containment ? n - this.offset.click.left >= this.containment[0] && n - this.offset.click.left <= this.containment[2] ? n : n - this.offset.click.left >= this.containment[0] ? n - s.grid[0] : n + s.grid[0] : n)), 
            {
                "top": o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : a.scrollTop()),
                "left": r - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : a.scrollLeft())
            };
        },
        "_rearrange": function(e, t, i, n) {
            i ? i[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? t.item[0] : t.item[0].nextSibling), 
            this.counter = this.counter ? ++this.counter : 1;
            var s = this.counter;
            this._delay(function() {
                s === this.counter && this.refreshPositions(!n);
            });
        },
        "_clear": function(e, t) {
            function i(e, t, i) {
                return function(n) {
                    i._trigger(e, n, t._uiHash(t));
                };
            }
            this.reverting = !1;
            var n, s = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), 
            this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                for (n in this._storedCSS) "auto" !== this._storedCSS[n] && "static" !== this._storedCSS[n] || (this._storedCSS[n] = "");
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
            } else this.currentItem.show();
            for (this.fromOutside && !t && s.push(function(e) {
                this._trigger("receive", e, this._uiHash(this.fromOutside));
            }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || t || s.push(function(e) {
                this._trigger("update", e, this._uiHash());
            }), this !== this.currentContainer && (t || (s.push(function(e) {
                this._trigger("remove", e, this._uiHash());
            }), s.push(function(e) {
                return function(t) {
                    e._trigger("receive", t, this._uiHash(this));
                };
            }.call(this, this.currentContainer)), s.push(function(e) {
                return function(t) {
                    e._trigger("update", t, this._uiHash(this));
                };
            }.call(this, this.currentContainer)))), n = this.containers.length - 1; n >= 0; n--) t || s.push(i("deactivate", this, this.containers[n])), 
            this.containers[n].containerCache.over && (s.push(i("out", this, this.containers[n])), 
            this.containers[n].containerCache.over = 0);
            if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), 
            this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), 
            this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), 
            this.dragging = !1, this.cancelHelperRemoval) {
                if (!t) {
                    for (this._trigger("beforeStop", e, this._uiHash()), n = 0; n < s.length; n++) s[n].call(this, e);
                    this._trigger("stop", e, this._uiHash());
                }
                return this.fromOutside = !1, !1;
            }
            if (t || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), 
            this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null, 
            !t) {
                for (n = 0; n < s.length; n++) s[n].call(this, e);
                this._trigger("stop", e, this._uiHash());
            }
            return this.fromOutside = !1, !0;
        },
        "_trigger": function() {
            !1 === e.Widget.prototype._trigger.apply(this, arguments) && this.cancel();
        },
        "_uiHash": function(t) {
            var i = t || this;
            return {
                "helper": i.helper,
                "placeholder": i.placeholder || e([]),
                "position": i.position,
                "originalPosition": i.originalPosition,
                "offset": i.positionAbs,
                "item": i.currentItem,
                "sender": t ? t.element : null
            };
        }
    });
}(jQuery), function(e) {
    function t(e) {
        return function() {
            var t = this.element.val();
            e.apply(this, arguments), this._refresh(), t !== this.element.val() && this._trigger("change");
        };
    }
    e.widget("ui.spinner", {
        "version": "1.10.4",
        "defaultElement": "<input>",
        "widgetEventPrefix": "spin",
        "options": {
            "culture": null,
            "icons": {
                "down": "ui-icon-triangle-1-s",
                "up": "ui-icon-triangle-1-n"
            },
            "incremental": !0,
            "max": null,
            "min": null,
            "numberFormat": null,
            "page": 10,
            "step": 1,
            "change": null,
            "spin": null,
            "start": null,
            "stop": null
        },
        "_create": function() {
            this._setOption("max", this.options.max), this._setOption("min", this.options.min), 
            this._setOption("step", this.options.step), "" !== this.value() && this._value(this.element.val(), !0), 
            this._draw(), this._on(this._events), this._refresh(), this._on(this.window, {
                "beforeunload": function() {
                    this.element.removeAttr("autocomplete");
                }
            });
        },
        "_getCreateOptions": function() {
            var t = {}, i = this.element;
            return e.each([ "min", "max", "step" ], function(e, n) {
                var s = i.attr(n);
                void 0 !== s && s.length && (t[n] = s);
            }), t;
        },
        "_events": {
            "keydown": function(e) {
                this._start(e) && this._keydown(e) && e.preventDefault();
            },
            "keyup": "_stop",
            "focus": function() {
                this.previous = this.element.val();
            },
            "blur": function(e) {
                this.cancelBlur ? delete this.cancelBlur : (this._stop(), this._refresh(), this.previous !== this.element.val() && this._trigger("change", e));
            },
            "mousewheel": function(e, t) {
                if (t) {
                    if (!this.spinning && !this._start(e)) return !1;
                    this._spin((t > 0 ? 1 : -1) * this.options.step, e), clearTimeout(this.mousewheelTimer), 
                    this.mousewheelTimer = this._delay(function() {
                        this.spinning && this._stop(e);
                    }, 100), e.preventDefault();
                }
            },
            "mousedown .ui-spinner-button": function(t) {
                function i() {
                    this.element[0] === this.document[0].activeElement || (this.element.focus(), this.previous = n, 
                    this._delay(function() {
                        this.previous = n;
                    }));
                }
                var n;
                n = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val(), 
                t.preventDefault(), i.call(this), this.cancelBlur = !0, this._delay(function() {
                    delete this.cancelBlur, i.call(this);
                }), !1 !== this._start(t) && this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t);
            },
            "mouseup .ui-spinner-button": "_stop",
            "mouseenter .ui-spinner-button": function(t) {
                if (e(t.currentTarget).hasClass("ui-state-active")) return !1 !== this._start(t) && void this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t);
            },
            "mouseleave .ui-spinner-button": "_stop"
        },
        "_draw": function() {
            var e = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
            this.element.attr("role", "spinbutton"), this.buttons = e.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all"), 
            this.buttons.height() > Math.ceil(.5 * e.height()) && e.height() > 0 && e.height(e.height()), 
            this.options.disabled && this.disable();
        },
        "_keydown": function(t) {
            var i = this.options, n = e.ui.keyCode;
            switch (t.keyCode) {
              case n.UP:
                return this._repeat(null, 1, t), !0;

              case n.DOWN:
                return this._repeat(null, -1, t), !0;

              case n.PAGE_UP:
                return this._repeat(null, i.page, t), !0;

              case n.PAGE_DOWN:
                return this._repeat(null, -i.page, t), !0;
            }
            return !1;
        },
        "_uiSpinnerHtml": function() {
            return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";
        },
        "_buttonHtml": function() {
            return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon " + this.options.icons.down + "'>&#9660;</span></a>";
        },
        "_start": function(e) {
            return !(!this.spinning && !1 === this._trigger("start", e)) && (this.counter || (this.counter = 1), 
            this.spinning = !0, !0);
        },
        "_repeat": function(e, t, i) {
            e = e || 500, clearTimeout(this.timer), this.timer = this._delay(function() {
                this._repeat(40, t, i);
            }, e), this._spin(t * this.options.step, i);
        },
        "_spin": function(e, t) {
            var i = this.value() || 0;
            this.counter || (this.counter = 1), i = this._adjustValue(i + e * this._increment(this.counter)), 
            this.spinning && !1 === this._trigger("spin", t, {
                "value": i
            }) || (this._value(i), this.counter++);
        },
        "_increment": function(t) {
            var i = this.options.incremental;
            return i ? e.isFunction(i) ? i(t) : Math.floor(t * t * t / 5e4 - t * t / 500 + 17 * t / 200 + 1) : 1;
        },
        "_precision": function() {
            var e = this._precisionOf(this.options.step);
            return null !== this.options.min && (e = Math.max(e, this._precisionOf(this.options.min))), 
            e;
        },
        "_precisionOf": function(e) {
            var t = e.toString(), i = t.indexOf(".");
            return -1 === i ? 0 : t.length - i - 1;
        },
        "_adjustValue": function(e) {
            var t, i, n = this.options;
            return t = null !== n.min ? n.min : 0, i = e - t, i = Math.round(i / n.step) * n.step, 
            e = t + i, e = parseFloat(e.toFixed(this._precision())), null !== n.max && e > n.max ? n.max : null !== n.min && e < n.min ? n.min : e;
        },
        "_stop": function(e) {
            this.spinning && (clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), 
            this.counter = 0, this.spinning = !1, this._trigger("stop", e));
        },
        "_setOption": function(e, t) {
            if ("culture" === e || "numberFormat" === e) {
                var i = this._parse(this.element.val());
                return this.options[e] = t, void this.element.val(this._format(i));
            }
            "max" !== e && "min" !== e && "step" !== e || "string" == typeof t && (t = this._parse(t)), 
            "icons" === e && (this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up), 
            this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)), 
            this._super(e, t), "disabled" === e && (t ? (this.element.prop("disabled", !0), 
            this.buttons.button("disable")) : (this.element.prop("disabled", !1), this.buttons.button("enable")));
        },
        "_setOptions": t(function(e) {
            this._super(e), this._value(this.element.val());
        }),
        "_parse": function(e) {
            return "string" == typeof e && "" !== e && (e = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(e, 10, this.options.culture) : +e), 
            "" === e || isNaN(e) ? null : e;
        },
        "_format": function(e) {
            return "" === e ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(e, this.options.numberFormat, this.options.culture) : e;
        },
        "_refresh": function() {
            this.element.attr({
                "aria-valuemin": this.options.min,
                "aria-valuemax": this.options.max,
                "aria-valuenow": this._parse(this.element.val())
            });
        },
        "_value": function(e, t) {
            var i;
            "" !== e && null !== (i = this._parse(e)) && (t || (i = this._adjustValue(i)), e = this._format(i)), 
            this.element.val(e), this._refresh();
        },
        "_destroy": function() {
            this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), 
            this.uiSpinner.replaceWith(this.element);
        },
        "stepUp": t(function(e) {
            this._stepUp(e);
        }),
        "_stepUp": function(e) {
            this._start() && (this._spin((e || 1) * this.options.step), this._stop());
        },
        "stepDown": t(function(e) {
            this._stepDown(e);
        }),
        "_stepDown": function(e) {
            this._start() && (this._spin((e || 1) * -this.options.step), this._stop());
        },
        "pageUp": t(function(e) {
            this._stepUp((e || 1) * this.options.page);
        }),
        "pageDown": t(function(e) {
            this._stepDown((e || 1) * this.options.page);
        }),
        "value": function(e) {
            if (!arguments.length) return this._parse(this.element.val());
            t(this._value).call(this, e);
        },
        "widget": function() {
            return this.uiSpinner;
        }
    });
}(jQuery), function(e, t) {
    function i() {
        return ++s;
    }
    function n(e) {
        return (e = e.cloneNode(!1)).hash.length > 1 && decodeURIComponent(e.href.replace(r, "")) === decodeURIComponent(location.href.replace(r, ""));
    }
    var s = 0, r = /#.*$/;
    e.widget("ui.tabs", {
        "version": "1.10.4",
        "delay": 300,
        "options": {
            "active": null,
            "collapsible": !1,
            "event": "click",
            "heightStyle": "content",
            "hide": null,
            "show": null,
            "activate": null,
            "beforeActivate": null,
            "beforeLoad": null,
            "load": null
        },
        "_create": function() {
            var t = this, i = this.options;
            this.running = !1, this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", i.collapsible).delegate(".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function(t) {
                e(this).is(".ui-state-disabled") && t.preventDefault();
            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                e(this).closest("li").is(".ui-state-disabled") && this.blur();
            }), this._processTabs(), i.active = this._initialActive(), e.isArray(i.disabled) && (i.disabled = e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"), function(e) {
                return t.tabs.index(e);
            }))).sort()), !1 !== this.options.active && this.anchors.length ? this.active = this._findActive(i.active) : this.active = e(), 
            this._refresh(), this.active.length && this.load(i.active);
        },
        "_initialActive": function() {
            var t = this.options.active, i = this.options.collapsible, n = location.hash.substring(1);
            return null === t && (n && this.tabs.each(function(i, s) {
                if (e(s).attr("aria-controls") === n) return t = i, !1;
            }), null === t && (t = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), null !== t && -1 !== t || (t = !!this.tabs.length && 0)), 
            !1 !== t && -1 === (t = this.tabs.index(this.tabs.eq(t))) && (t = !i && 0), !i && !1 === t && this.anchors.length && (t = 0), 
            t;
        },
        "_getCreateEventData": function() {
            return {
                "tab": this.active,
                "panel": this.active.length ? this._getPanelForTab(this.active) : e()
            };
        },
        "_tabKeydown": function(t) {
            var i = e(this.document[0].activeElement).closest("li"), n = this.tabs.index(i), s = !0;
            if (!this._handlePageNav(t)) {
                switch (t.keyCode) {
                  case e.ui.keyCode.RIGHT:
                  case e.ui.keyCode.DOWN:
                    n++;
                    break;

                  case e.ui.keyCode.UP:
                  case e.ui.keyCode.LEFT:
                    s = !1, n--;
                    break;

                  case e.ui.keyCode.END:
                    n = this.anchors.length - 1;
                    break;

                  case e.ui.keyCode.HOME:
                    n = 0;
                    break;

                  case e.ui.keyCode.SPACE:
                    return t.preventDefault(), clearTimeout(this.activating), void this._activate(n);

                  case e.ui.keyCode.ENTER:
                    return t.preventDefault(), clearTimeout(this.activating), void this._activate(n !== this.options.active && n);

                  default:
                    return;
                }
                t.preventDefault(), clearTimeout(this.activating), n = this._focusNextTab(n, s), 
                t.ctrlKey || (i.attr("aria-selected", "false"), this.tabs.eq(n).attr("aria-selected", "true"), 
                this.activating = this._delay(function() {
                    this.option("active", n);
                }, this.delay));
            }
        },
        "_panelKeydown": function(t) {
            this._handlePageNav(t) || t.ctrlKey && t.keyCode === e.ui.keyCode.UP && (t.preventDefault(), 
            this.active.focus());
        },
        "_handlePageNav": function(t) {
            return t.altKey && t.keyCode === e.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), 
            !0) : t.altKey && t.keyCode === e.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), 
            !0) : void 0;
        },
        "_findNextTab": function(t, i) {
            for (var n = this.tabs.length - 1; -1 !== e.inArray((t > n && (t = 0), t < 0 && (t = n), 
            t), this.options.disabled); ) t = i ? t + 1 : t - 1;
            return t;
        },
        "_focusNextTab": function(e, t) {
            return e = this._findNextTab(e, t), this.tabs.eq(e).focus(), e;
        },
        "_setOption": function(e, t) {
            "active" !== e ? "disabled" !== e ? (this._super(e, t), "collapsible" === e && (this.element.toggleClass("ui-tabs-collapsible", t), 
            t || !1 !== this.options.active || this._activate(0)), "event" === e && this._setupEvents(t), 
            "heightStyle" === e && this._setupHeightStyle(t)) : this._setupDisabled(t) : this._activate(t);
        },
        "_tabId": function(e) {
            return e.attr("aria-controls") || "ui-tabs-" + i();
        },
        "_sanitizeSelector": function(e) {
            return e ? e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : "";
        },
        "refresh": function() {
            var t = this.options, i = this.tablist.children(":has(a[href])");
            t.disabled = e.map(i.filter(".ui-state-disabled"), function(e) {
                return i.index(e);
            }), this._processTabs(), !1 !== t.active && this.anchors.length ? this.active.length && !e.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1, 
            this.active = e()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active) : (t.active = !1, 
            this.active = e()), this._refresh();
        },
        "_refresh": function() {
            this._setupDisabled(this.options.disabled), this._setupEvents(this.options.event), 
            this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({
                "aria-selected": "false",
                "tabIndex": -1
            }), this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            }), this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({
                "aria-selected": "true",
                "tabIndex": 0
            }), this._getPanelForTab(this.active).show().attr({
                "aria-expanded": "true",
                "aria-hidden": "false"
            })) : this.tabs.eq(0).attr("tabIndex", 0);
        },
        "_processTabs": function() {
            var t = this;
            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist"), 
            this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({
                "role": "tab",
                "tabIndex": -1
            }), this.anchors = this.tabs.map(function() {
                return e("a", this)[0];
            }).addClass("ui-tabs-anchor").attr({
                "role": "presentation",
                "tabIndex": -1
            }), this.panels = e(), this.anchors.each(function(i, s) {
                var r, o, a, l = e(s).uniqueId().attr("id"), h = e(s).closest("li"), c = h.attr("aria-controls");
                n(s) ? (r = s.hash, o = t.element.find(t._sanitizeSelector(r))) : (r = "#" + (a = t._tabId(h)), 
                (o = t.element.find(r)).length || (o = t._createPanel(a)).insertAfter(t.panels[i - 1] || t.tablist), 
                o.attr("aria-live", "polite")), o.length && (t.panels = t.panels.add(o)), c && h.data("ui-tabs-aria-controls", c), 
                h.attr({
                    "aria-controls": r.substring(1),
                    "aria-labelledby": l
                }), o.attr("aria-labelledby", l);
            }), this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel");
        },
        "_getList": function() {
            return this.tablist || this.element.find("ol,ul").eq(0);
        },
        "_createPanel": function(t) {
            return e("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0);
        },
        "_setupDisabled": function(t) {
            e.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1);
            for (var i, n = 0; i = this.tabs[n]; n++) !0 === t || -1 !== e.inArray(n, t) ? e(i).addClass("ui-state-disabled").attr("aria-disabled", "true") : e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");
            this.options.disabled = t;
        },
        "_setupEvents": function(t) {
            var i = {
                "click": function(e) {
                    e.preventDefault();
                }
            };
            t && e.each(t.split(" "), function(e, t) {
                i[t] = "_eventHandler";
            }), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(this.anchors, i), 
            this._on(this.tabs, {
                "keydown": "_tabKeydown"
            }), this._on(this.panels, {
                "keydown": "_panelKeydown"
            }), this._focusable(this.tabs), this._hoverable(this.tabs);
        },
        "_setupHeightStyle": function(t) {
            var i, n = this.element.parent();
            "fill" === t ? (i = n.height(), i -= this.element.outerHeight() - this.element.height(), 
            this.element.siblings(":visible").each(function() {
                var t = e(this), n = t.css("position");
                "absolute" !== n && "fixed" !== n && (i -= t.outerHeight(!0));
            }), this.element.children().not(this.panels).each(function() {
                i -= e(this).outerHeight(!0);
            }), this.panels.each(function() {
                e(this).height(Math.max(0, i - e(this).innerHeight() + e(this).height()));
            }).css("overflow", "auto")) : "auto" === t && (i = 0, this.panels.each(function() {
                i = Math.max(i, e(this).height("").height());
            }).height(i));
        },
        "_eventHandler": function(t) {
            var i = this.options, n = this.active, s = e(t.currentTarget).closest("li"), r = s[0] === n[0], o = r && i.collapsible, a = o ? e() : this._getPanelForTab(s), l = n.length ? this._getPanelForTab(n) : e(), h = {
                "oldTab": n,
                "oldPanel": l,
                "newTab": o ? e() : s,
                "newPanel": a
            };
            t.preventDefault(), s.hasClass("ui-state-disabled") || s.hasClass("ui-tabs-loading") || this.running || r && !i.collapsible || !1 === this._trigger("beforeActivate", t, h) || (i.active = !o && this.tabs.index(s), 
            this.active = r ? e() : s, this.xhr && this.xhr.abort(), l.length || a.length || e.error("jQuery UI Tabs: Mismatching fragment identifier."), 
            a.length && this.load(this.tabs.index(s), t), this._toggle(t, h));
        },
        "_toggle": function(t, i) {
            function n() {
                r.running = !1, r._trigger("activate", t, i);
            }
            function s() {
                i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), o.length && r.options.show ? r._show(o, r.options.show, n) : (o.show(), 
                n());
            }
            var r = this, o = i.newPanel, a = i.oldPanel;
            this.running = !0, a.length && this.options.hide ? this._hide(a, this.options.hide, function() {
                i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), s();
            }) : (i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), a.hide(), 
            s()), a.attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            }), i.oldTab.attr("aria-selected", "false"), o.length && a.length ? i.oldTab.attr("tabIndex", -1) : o.length && this.tabs.filter(function() {
                return 0 === e(this).attr("tabIndex");
            }).attr("tabIndex", -1), o.attr({
                "aria-expanded": "true",
                "aria-hidden": "false"
            }), i.newTab.attr({
                "aria-selected": "true",
                "tabIndex": 0
            });
        },
        "_activate": function(t) {
            var i, n = this._findActive(t);
            n[0] !== this.active[0] && (n.length || (n = this.active), i = n.find(".ui-tabs-anchor")[0], 
            this._eventHandler({
                "target": i,
                "currentTarget": i,
                "preventDefault": e.noop
            }));
        },
        "_findActive": function(t) {
            return !1 === t ? e() : this.tabs.eq(t);
        },
        "_getIndex": function(e) {
            return "string" == typeof e && (e = this.anchors.index(this.anchors.filter("[href$='" + e + "']"))), 
            e;
        },
        "_destroy": function() {
            this.xhr && this.xhr.abort(), this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"), 
            this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"), 
            this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(), 
            this.tabs.add(this.panels).each(function() {
                e.data(this, "ui-tabs-destroy") ? e(this).remove() : e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");
            }), this.tabs.each(function() {
                var t = e(this), i = t.data("ui-tabs-aria-controls");
                i ? t.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls");
            }), this.panels.show(), "content" !== this.options.heightStyle && this.panels.css("height", "");
        },
        "enable": function(t) {
            var i = this.options.disabled;
            !1 !== i && (void 0 === t ? i = !1 : (t = this._getIndex(t), i = e.isArray(i) ? e.map(i, function(e) {
                return e !== t ? e : null;
            }) : e.map(this.tabs, function(e, i) {
                return i !== t ? i : null;
            })), this._setupDisabled(i));
        },
        "disable": function(t) {
            var i = this.options.disabled;
            if (!0 !== i) {
                if (void 0 === t) i = !0; else {
                    if (t = this._getIndex(t), -1 !== e.inArray(t, i)) return;
                    i = e.isArray(i) ? e.merge([ t ], i).sort() : [ t ];
                }
                this._setupDisabled(i);
            }
        },
        "load": function(t, i) {
            t = this._getIndex(t);
            var s = this, r = this.tabs.eq(t), o = r.find(".ui-tabs-anchor"), a = this._getPanelForTab(r), l = {
                "tab": r,
                "panel": a
            };
            n(o[0]) || (this.xhr = e.ajax(this._ajaxSettings(o, i, l)), this.xhr && "canceled" !== this.xhr.statusText && (r.addClass("ui-tabs-loading"), 
            a.attr("aria-busy", "true"), this.xhr.success(function(e) {
                setTimeout(function() {
                    a.html(e), s._trigger("load", i, l);
                }, 1);
            }).complete(function(e, t) {
                setTimeout(function() {
                    "abort" === t && s.panels.stop(!1, !0), r.removeClass("ui-tabs-loading"), a.removeAttr("aria-busy"), 
                    e === s.xhr && delete s.xhr;
                }, 1);
            })));
        },
        "_ajaxSettings": function(t, i, n) {
            var s = this;
            return {
                "url": t.attr("href"),
                "beforeSend": function(t, r) {
                    return s._trigger("beforeLoad", i, e.extend({
                        "jqXHR": t,
                        "ajaxSettings": r
                    }, n));
                }
            };
        },
        "_getPanelForTab": function(t) {
            var i = e(t).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + i));
        }
    });
}(jQuery), function(e) {
    function t(t, i) {
        var n = (t.attr("aria-describedby") || "").split(/\s+/);
        n.push(i), t.data("ui-tooltip-id", i).attr("aria-describedby", e.trim(n.join(" ")));
    }
    function i(t) {
        var i = t.data("ui-tooltip-id"), n = (t.attr("aria-describedby") || "").split(/\s+/), s = e.inArray(i, n);
        -1 !== s && n.splice(s, 1), t.removeData("ui-tooltip-id"), (n = e.trim(n.join(" "))) ? t.attr("aria-describedby", n) : t.removeAttr("aria-describedby");
    }
    var n = 0;
    e.widget("ui.tooltip", {
        "version": "1.10.4",
        "options": {
            "content": function() {
                var t = e(this).attr("title") || "";
                return e("<a>").text(t).html();
            },
            "hide": !0,
            "items": "[title]:not([disabled])",
            "position": {
                "my": "left top+15",
                "at": "left bottom",
                "collision": "flipfit flip"
            },
            "show": !0,
            "tooltipClass": null,
            "track": !1,
            "close": null,
            "open": null
        },
        "_create": function() {
            this._on({
                "mouseover": "open",
                "focusin": "open"
            }), this.tooltips = {}, this.parents = {}, this.options.disabled && this._disable();
        },
        "_setOption": function(t, i) {
            var n = this;
            if ("disabled" === t) return this[i ? "_disable" : "_enable"](), void (this.options[t] = i);
            this._super(t, i), "content" === t && e.each(this.tooltips, function(e, t) {
                n._updateContent(t);
            });
        },
        "_disable": function() {
            var t = this;
            e.each(this.tooltips, function(i, n) {
                var s = e.Event("blur");
                s.target = s.currentTarget = n[0], t.close(s, !0);
            }), this.element.find(this.options.items).addBack().each(function() {
                var t = e(this);
                t.is("[title]") && t.data("ui-tooltip-title", t.attr("title")).attr("title", "");
            });
        },
        "_enable": function() {
            this.element.find(this.options.items).addBack().each(function() {
                var t = e(this);
                t.data("ui-tooltip-title") && t.attr("title", t.data("ui-tooltip-title"));
            });
        },
        "open": function(t) {
            var i = this, n = e(t ? t.target : this.element).closest(this.options.items);
            n.length && !n.data("ui-tooltip-id") && (n.attr("title") && n.data("ui-tooltip-title", n.attr("title")), 
            n.data("ui-tooltip-open", !0), t && "mouseover" === t.type && n.parents().each(function() {
                var t, n = e(this);
                n.data("ui-tooltip-open") && ((t = e.Event("blur")).target = t.currentTarget = this, 
                i.close(t, !0)), n.attr("title") && (n.uniqueId(), i.parents[this.id] = {
                    "element": this,
                    "title": n.attr("title")
                }, n.attr("title", ""));
            }), this._updateContent(n, t));
        },
        "_updateContent": function(e, t) {
            var i, n = this.options.content, s = this, r = t ? t.type : null;
            if ("string" == typeof n) return this._open(t, e, n);
            (i = n.call(e[0], function(i) {
                e.data("ui-tooltip-open") && s._delay(function() {
                    t && (t.type = r), this._open(t, e, i);
                });
            })) && this._open(t, e, i);
        },
        "_open": function(i, n, s) {
            function r(e) {
                h.of = e, o.is(":hidden") || o.position(h);
            }
            var o, a, l, h = e.extend({}, this.options.position);
            s && ((o = this._find(n)).length ? o.find(".ui-tooltip-content").html(s) : (n.is("[title]") && (i && "mouseover" === i.type ? n.attr("title", "") : n.removeAttr("title")), 
            o = this._tooltip(n), t(n, o.attr("id")), o.find(".ui-tooltip-content").html(s), 
            this.options.track && i && /^mouse/.test(i.type) ? (this._on(this.document, {
                "mousemove": r
            }), r(i)) : o.position(e.extend({
                "of": n
            }, this.options.position)), o.hide(), this._show(o, this.options.show), this.options.show && this.options.show.delay && (l = this.delayedShow = setInterval(function() {
                o.is(":visible") && (r(h.of), clearInterval(l));
            }, e.fx.interval)), this._trigger("open", i, {
                "tooltip": o
            }), a = {
                "keyup": function(t) {
                    if (t.keyCode === e.ui.keyCode.ESCAPE) {
                        var i = e.Event(t);
                        i.currentTarget = n[0], this.close(i, !0);
                    }
                },
                "remove": function() {
                    this._removeTooltip(o);
                }
            }, i && "mouseover" !== i.type || (a.mouseleave = "close"), i && "focusin" !== i.type || (a.focusout = "close"), 
            this._on(!0, n, a)));
        },
        "close": function(t) {
            var n = this, s = e(t ? t.currentTarget : this.element), r = this._find(s);
            this.closing || (clearInterval(this.delayedShow), s.data("ui-tooltip-title") && s.attr("title", s.data("ui-tooltip-title")), 
            i(s), r.stop(!0), this._hide(r, this.options.hide, function() {
                n._removeTooltip(e(this));
            }), s.removeData("ui-tooltip-open"), this._off(s, "mouseleave focusout keyup"), 
            s[0] !== this.element[0] && this._off(s, "remove"), this._off(this.document, "mousemove"), 
            t && "mouseleave" === t.type && e.each(this.parents, function(t, i) {
                e(i.element).attr("title", i.title), delete n.parents[t];
            }), this.closing = !0, this._trigger("close", t, {
                "tooltip": r
            }), this.closing = !1);
        },
        "_tooltip": function(t) {
            var i = "ui-tooltip-" + n++, s = e("<div>").attr({
                "id": i,
                "role": "tooltip"
            }).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || ""));
            return e("<div>").addClass("ui-tooltip-content").appendTo(s), s.appendTo(this.document[0].body), 
            this.tooltips[i] = t, s;
        },
        "_find": function(t) {
            var i = t.data("ui-tooltip-id");
            return i ? e("#" + i) : e();
        },
        "_removeTooltip": function(e) {
            e.remove(), delete this.tooltips[e.attr("id")];
        },
        "_destroy": function() {
            var t = this;
            e.each(this.tooltips, function(i, n) {
                var s = e.Event("blur");
                s.target = s.currentTarget = n[0], t.close(s, !0), e("#" + i).remove(), n.data("ui-tooltip-title") && (n.attr("title", n.data("ui-tooltip-title")), 
                n.removeData("ui-tooltip-title"));
            });
        }
    });
}(jQuery), function() {
    function e(e, t, i) {
        for (var n = (i || 0) - 1, s = e ? e.length : 0; ++n < s; ) if (e[n] === t) return n;
        return -1;
    }
    function t(t, i) {
        var n = typeof i;
        if (t = t.cache, "boolean" == n || null == i) return t[i] ? 0 : -1;
        "number" != n && "string" != n && (n = "object");
        var s = "number" == n ? i : y + i;
        return t = (t = t[n]) && t[s], "object" == n ? t && e(t, i) > -1 ? 0 : -1 : t ? 0 : -1;
    }
    function i(e) {
        var t = this.cache, i = typeof e;
        if ("boolean" == i || null == e) t[e] = !0; else {
            "number" != i && "string" != i && (i = "object");
            var n = "number" == i ? e : y + e, s = t[i] || (t[i] = {});
            "object" == i ? (s[n] || (s[n] = [])).push(e) : s[n] = !0;
        }
    }
    function n(e) {
        return e.charCodeAt(0);
    }
    function s(e, t) {
        for (var i = e.criteria, n = t.criteria, s = -1, r = i.length; ++s < r; ) {
            var o = i[s], a = n[s];
            if (o !== a) {
                if (o > a || void 0 === o) return 1;
                if (o < a || void 0 === a) return -1;
            }
        }
        return e.index - t.index;
    }
    function r(e) {
        var t = -1, n = e.length, s = e[0], r = e[n / 2 | 0], o = e[n - 1];
        if (s && "object" == typeof s && r && "object" == typeof r && o && "object" == typeof o) return !1;
        var a = l();
        a.false = a.null = a.true = a.undefined = !1;
        var h = l();
        for (h.array = e, h.cache = a, h.push = i; ++t < n; ) h.push(e[t]);
        return h;
    }
    function o(e) {
        return "\\" + q[e];
    }
    function a() {
        return f.pop() || [];
    }
    function l() {
        return m.pop() || {
            "array": null,
            "cache": null,
            "criteria": null,
            "false": !1,
            "index": 0,
            "null": !1,
            "number": null,
            "object": null,
            "push": null,
            "string": null,
            "true": !1,
            "undefined": !1,
            "value": null
        };
    }
    function h(e) {
        e.length = 0, f.length < L && f.push(e);
    }
    function c(e) {
        var t = e.cache;
        t && c(t), e.array = e.cache = e.criteria = e.object = e.number = e.string = e.value = null, 
        m.length < L && m.push(e);
    }
    function u(e, t, i) {
        t || (t = 0), void 0 === i && (i = e ? e.length : 0);
        for (var n = -1, s = i - t || 0, r = Array(s < 0 ? 0 : s); ++n < s; ) r[n] = e[t + n];
        return r;
    }
    function p(i) {
        function f(e) {
            return e && "object" == typeof e && !Tt(e) && dt.call(e, "__wrapped__") ? e : new m(e);
        }
        function m(e, t) {
            this.__chain__ = !!t, this.__wrapped__ = e;
        }
        function L(e) {
            function t() {
                if (n) {
                    var e = u(n);
                    ft.apply(e, arguments);
                }
                if (this instanceof t) {
                    var r = K(i.prototype), o = i.apply(r, e || arguments);
                    return ye(o) ? o : r;
                }
                return i.apply(s, e || arguments);
            }
            var i = e[0], n = e[2], s = e[4];
            return Nt(t, e), t;
        }
        function q(e, t, i, n, s) {
            if (i) {
                var r = i(e);
                if (void 0 !== r) return r;
            }
            if (!ye(e)) return e;
            var o = ot.call(e);
            if (!W[o]) return e;
            var l = _t[o];
            switch (o) {
              case R:
              case I:
                return new l(+e);

              case z:
              case H:
                return new l(e);

              case U:
                return r = l(e.source, x.exec(e)), r.lastIndex = e.lastIndex, r;
            }
            var c = Tt(e);
            if (t) {
                var p = !n;
                n || (n = a()), s || (s = a());
                for (var d = n.length; d--; ) if (n[d] == e) return s[d];
                r = c ? l(e.length) : {};
            } else r = c ? u(e) : It({}, e);
            return c && (dt.call(e, "index") && (r.index = e.index), dt.call(e, "input") && (r.input = e.input)), 
            t ? (n.push(e), s.push(r), (c ? xe : $t)(e, function(e, o) {
                r[o] = q(e, t, i, n, s);
            }), p && (h(n), h(s)), r) : r;
        }
        function K(e, t) {
            return ye(e) ? Lt(e) : {};
        }
        function Y(e, t, i) {
            if ("function" != typeof e) return He;
            if (void 0 === t || !("prototype" in e)) return e;
            var n = e.__bindData__;
            if (void 0 === n && (Ft.funcNames && (n = !e.name), !(n = n || !Ft.funcDecomp))) {
                var s = ut.call(e);
                Ft.funcNames || (n = !E.test(s)), n || (n = N.test(s), Nt(e, n));
            }
            if (!1 === n || !0 !== n && 1 & n[1]) return e;
            switch (i) {
              case 1:
                return function(i) {
                    return e.call(t, i);
                };

              case 2:
                return function(i, n) {
                    return e.call(t, i, n);
                };

              case 3:
                return function(i, n, s) {
                    return e.call(t, i, n, s);
                };

              case 4:
                return function(i, n, s, r) {
                    return e.call(t, i, n, s, r);
                };
            }
            return $e(e, t);
        }
        function Z(e) {
            function t() {
                var e = l ? o : this;
                if (s) {
                    var f = u(s);
                    ft.apply(f, arguments);
                }
                if ((r || c) && (f || (f = u(arguments)), r && ft.apply(f, r), c && f.length < a)) return n |= 16, 
                Z([ i, p ? n : -4 & n, f, null, o, a ]);
                if (f || (f = arguments), h && (i = e[d]), this instanceof t) {
                    e = K(i.prototype);
                    var m = i.apply(e, f);
                    return ye(m) ? m : e;
                }
                return i.apply(e, f);
            }
            var i = e[0], n = e[1], s = e[2], r = e[3], o = e[4], a = e[5], l = 1 & n, h = 2 & n, c = 4 & n, p = 8 & n, d = i;
            return Nt(t, e), t;
        }
        function Q(i, n) {
            var s = -1, o = le(), a = i ? i.length : 0, l = a >= v && o === e, h = [];
            if (l) {
                var u = r(n);
                u ? (o = t, n = u) : l = !1;
            }
            for (;++s < a; ) {
                var p = i[s];
                o(n, p) < 0 && h.push(p);
            }
            return l && c(n), h;
        }
        function ee(e, t, i, n) {
            for (var s = (n || 0) - 1, r = e ? e.length : 0, o = []; ++s < r; ) {
                var a = e[s];
                if (a && "object" == typeof a && "number" == typeof a.length && (Tt(a) || pe(a))) {
                    t || (a = ee(a, t, i));
                    var l = -1, h = a.length, c = o.length;
                    for (o.length += h; ++l < h; ) o[c++] = a[l];
                } else i || o.push(a);
            }
            return o;
        }
        function te(e, t, i, n, s, r) {
            if (i) {
                var o = i(e, t);
                if (void 0 !== o) return !!o;
            }
            if (e === t) return 0 !== e || 1 / e == 1 / t;
            var l = typeof e, c = typeof t;
            if (!(e !== e || e && j[l] || t && j[c])) return !1;
            if (null == e || null == t) return e === t;
            var u = ot.call(e), p = ot.call(t);
            if (u == D && (u = $), p == D && (p = $), u != p) return !1;
            switch (u) {
              case R:
              case I:
                return +e == +t;

              case z:
                return e != +e ? t != +t : 0 == e ? 1 / e == 1 / t : e == +t;

              case U:
              case H:
                return e == tt(t);
            }
            var d = u == P;
            if (!d) {
                var f = dt.call(e, "__wrapped__"), m = dt.call(t, "__wrapped__");
                if (f || m) return te(f ? e.__wrapped__ : e, m ? t.__wrapped__ : t, i, n, s, r);
                if (u != $) return !1;
                var g = e.constructor, y = t.constructor;
                if (g != y && !(ge(g) && g instanceof g && ge(y) && y instanceof y) && "constructor" in e && "constructor" in t) return !1;
            }
            var v = !s;
            s || (s = a()), r || (r = a());
            for (var L = s.length; L--; ) if (s[L] == e) return r[L] == t;
            var w = 0;
            if (o = !0, s.push(e), r.push(t), d) {
                if (L = e.length, w = t.length, (o = w == L) || n) for (;w--; ) {
                    var b = L, C = t[w];
                    if (n) for (;b-- && !(o = te(e[b], C, i, n, s, r)); ) ; else if (!(o = te(e[w], C, i, n, s, r))) break;
                }
            } else zt(t, function(t, a, l) {
                if (dt.call(l, a)) return w++, o = dt.call(e, a) && te(e[a], t, i, n, s, r);
            }), o && !n && zt(e, function(e, t, i) {
                if (dt.call(i, t)) return o = --w > -1;
            });
            return s.pop(), r.pop(), v && (h(s), h(r)), o;
        }
        function ie(e, t, i, n, s) {
            (Tt(t) ? xe : $t)(t, function(t, r) {
                var o, a, l = t, h = e[r];
                if (t && ((a = Tt(t)) || Ut(t))) {
                    for (var c = n.length; c--; ) if (o = n[c] == t) {
                        h = s[c];
                        break;
                    }
                    if (!o) {
                        var u;
                        i && (u = void 0 !== (l = i(h, t))) && (h = l), u || (h = a ? Tt(h) ? h : [] : Ut(h) ? h : {}), 
                        n.push(t), s.push(h), u || ie(h, t, i, n, s);
                    }
                } else i && void 0 === (l = i(h, t)) && (l = t), void 0 !== l && (h = l);
                e[r] = h;
            });
        }
        function ne(e, t) {
            return e + ct(At() * (t - e + 1));
        }
        function se(i, n, s) {
            var o = -1, l = le(), u = i ? i.length : 0, p = [], d = !n && u >= v && l === e, f = s || d ? a() : p;
            for (d && (l = t, f = r(f)); ++o < u; ) {
                var m = i[o], g = s ? s(m, o, i) : m;
                (n ? !o || f[f.length - 1] !== g : l(f, g) < 0) && ((s || d) && f.push(g), p.push(m));
            }
            return d ? (h(f.array), c(f)) : s && h(f), p;
        }
        function re(e) {
            return function(t, i, n) {
                var s = {};
                i = f.createCallback(i, n, 3);
                var r = -1, o = t ? t.length : 0;
                if ("number" == typeof o) for (;++r < o; ) {
                    var a = t[r];
                    e(s, a, i(a, r, t), t);
                } else $t(t, function(t, n, r) {
                    e(s, t, i(t, n, r), r);
                });
                return s;
            };
        }
        function oe(e, t, i, n, s, r) {
            var o = 1 & t, a = 4 & t, l = 16 & t, h = 32 & t;
            if (!(2 & t) && !ge(e)) throw new it();
            l && !i.length && (t &= -17, l = i = !1), h && !n.length && (t &= -33, h = n = !1);
            var c = e && e.__bindData__;
            return c && !0 !== c ? ((c = u(c))[2] && (c[2] = u(c[2])), c[3] && (c[3] = u(c[3])), 
            !o || 1 & c[1] || (c[4] = s), !o && 1 & c[1] && (t |= 8), !a || 4 & c[1] || (c[5] = r), 
            l && ft.apply(c[2] || (c[2] = []), i), h && yt.apply(c[3] || (c[3] = []), n), c[1] |= t, 
            oe.apply(null, c)) : (1 == t || 17 === t ? L : Z)([ e, t, i, n, s, r ]);
        }
        function ae(e) {
            return kt[e];
        }
        function le() {
            var t = (t = f.indexOf) === De ? e : t;
            return t;
        }
        function he(e) {
            return "function" == typeof e && at.test(e);
        }
        function ce(e) {
            var t, i;
            return !!(e && ot.call(e) == $ && (t = e.constructor, !ge(t) || t instanceof t)) && (zt(e, function(e, t) {
                i = t;
            }), void 0 === i || dt.call(e, i));
        }
        function ue(e) {
            return Dt[e];
        }
        function pe(e) {
            return e && "object" == typeof e && "number" == typeof e.length && ot.call(e) == D || !1;
        }
        function de(e, t, i) {
            var n = Mt(e), s = n.length;
            for (t = Y(t, i, 3); s--; ) {
                var r = n[s];
                if (!1 === t(e[r], r, e)) break;
            }
            return e;
        }
        function fe(e) {
            var t = [];
            return zt(e, function(e, i) {
                ge(e) && t.push(i);
            }), t.sort();
        }
        function me(e) {
            for (var t = -1, i = Mt(e), n = i.length, s = {}; ++t < n; ) {
                var r = i[t];
                s[e[r]] = r;
            }
            return s;
        }
        function ge(e) {
            return "function" == typeof e;
        }
        function ye(e) {
            return !(!e || !j[typeof e]);
        }
        function ve(e) {
            return "number" == typeof e || e && "object" == typeof e && ot.call(e) == z || !1;
        }
        function Le(e) {
            return "string" == typeof e || e && "object" == typeof e && ot.call(e) == H || !1;
        }
        function we(e) {
            for (var t = -1, i = Mt(e), n = i.length, s = qe(n); ++t < n; ) s[t] = e[i[t]];
            return s;
        }
        function be(e, t, i) {
            var n = -1, s = le(), r = e ? e.length : 0, o = !1;
            return i = (i < 0 ? St(0, r + i) : i) || 0, Tt(e) ? o = s(e, t, i) > -1 : "number" == typeof r ? o = (Le(e) ? e.indexOf(t, i) : s(e, t, i)) > -1 : $t(e, function(e) {
                if (++n >= i) return !(o = e === t);
            }), o;
        }
        function Ce(e, t, i) {
            var n = !0;
            t = f.createCallback(t, i, 3);
            var s = -1, r = e ? e.length : 0;
            if ("number" == typeof r) for (;++s < r && (n = !!t(e[s], s, e)); ) ; else $t(e, function(e, i, s) {
                return n = !!t(e, i, s);
            });
            return n;
        }
        function Oe(e, t, i) {
            var n = [];
            t = f.createCallback(t, i, 3);
            var s = -1, r = e ? e.length : 0;
            if ("number" == typeof r) for (;++s < r; ) {
                var o = e[s];
                t(o, s, e) && n.push(o);
            } else $t(e, function(e, i, s) {
                t(e, i, s) && n.push(e);
            });
            return n;
        }
        function Se(e, t, i) {
            t = f.createCallback(t, i, 3);
            var n = -1, s = e ? e.length : 0;
            if ("number" != typeof s) {
                var r;
                return $t(e, function(e, i, n) {
                    if (t(e, i, n)) return r = e, !1;
                }), r;
            }
            for (;++n < s; ) {
                var o = e[n];
                if (t(o, n, e)) return o;
            }
        }
        function xe(e, t, i) {
            var n = -1, s = e ? e.length : 0;
            if (t = t && void 0 === i ? t : Y(t, i, 3), "number" == typeof s) for (;++n < s && !1 !== t(e[n], n, e); ) ; else $t(e, t);
            return e;
        }
        function Ee(e, t, i) {
            var n = e ? e.length : 0;
            if (t = t && void 0 === i ? t : Y(t, i, 3), "number" == typeof n) for (;n-- && !1 !== t(e[n], n, e); ) ; else {
                var s = Mt(e);
                n = s.length, $t(e, function(e, i, r) {
                    return i = s ? s[--n] : --n, t(r[i], i, r);
                });
            }
            return e;
        }
        function Ae(e, t, i) {
            var n = -1, s = e ? e.length : 0;
            if (t = f.createCallback(t, i, 3), "number" == typeof s) for (var r = qe(s); ++n < s; ) r[n] = t(e[n], n, e); else r = [], 
            $t(e, function(e, i, s) {
                r[++n] = t(e, i, s);
            });
            return r;
        }
        function _e(e, t, i) {
            var s = -1 / 0, r = s;
            if ("function" != typeof t && i && i[t] === e && (t = null), null == t && Tt(e)) for (var o = -1, a = e.length; ++o < a; ) {
                var l = e[o];
                l > r && (r = l);
            } else t = null == t && Le(e) ? n : f.createCallback(t, i, 3), xe(e, function(e, i, n) {
                var o = t(e, i, n);
                o > s && (s = o, r = e);
            });
            return r;
        }
        function Fe(e, t, i, n) {
            if (!e) return i;
            var s = arguments.length < 3;
            t = f.createCallback(t, n, 4);
            var r = -1, o = e.length;
            if ("number" == typeof o) for (s && (i = e[++r]); ++r < o; ) i = t(i, e[r], r, e); else $t(e, function(e, n, r) {
                i = s ? (s = !1, e) : t(i, e, n, r);
            });
            return i;
        }
        function Ne(e, t, i, n) {
            var s = arguments.length < 3;
            return t = f.createCallback(t, n, 4), Ee(e, function(e, n, r) {
                i = s ? (s = !1, e) : t(i, e, n, r);
            }), i;
        }
        function Te(e) {
            var t = -1, i = e ? e.length : 0, n = qe("number" == typeof i ? i : 0);
            return xe(e, function(e) {
                var i = ne(0, ++t);
                n[t] = n[i], n[i] = e;
            }), n;
        }
        function Me(e, t, i) {
            var n;
            t = f.createCallback(t, i, 3);
            var s = -1, r = e ? e.length : 0;
            if ("number" == typeof r) for (;++s < r && !(n = t(e[s], s, e)); ) ; else $t(e, function(e, i, s) {
                return !(n = t(e, i, s));
            });
            return !!n;
        }
        function ke(e, t, i) {
            var n = 0, s = e ? e.length : 0;
            if ("number" != typeof t && null != t) {
                var r = -1;
                for (t = f.createCallback(t, i, 3); ++r < s && t(e[r], r, e); ) n++;
            } else if (null == (n = t) || i) return e ? e[0] : d;
            return u(e, 0, xt(St(0, n), s));
        }
        function De(t, i, n) {
            if ("number" == typeof n) {
                var s = t ? t.length : 0;
                n = n < 0 ? St(0, s + n) : n || 0;
            } else if (n) {
                var r = Re(t, i);
                return t[r] === i ? r : -1;
            }
            return e(t, i, n);
        }
        function Pe(e, t, i) {
            if ("number" != typeof t && null != t) {
                var n = 0, s = -1, r = e ? e.length : 0;
                for (t = f.createCallback(t, i, 3); ++s < r && t(e[s], s, e); ) n++;
            } else n = null == t || i ? 1 : St(0, t);
            return u(e, n);
        }
        function Re(e, t, i, n) {
            var s = 0, r = e ? e.length : s;
            for (t = (i = i ? f.createCallback(i, n, 1) : He)(t); s < r; ) {
                var o = s + r >>> 1;
                i(e[o]) < t ? s = o + 1 : r = o;
            }
            return s;
        }
        function Ie(e, t, i, n) {
            return "boolean" != typeof t && null != t && (n = i, i = "function" != typeof t && n && n[t] === e ? null : t, 
            t = !1), null != i && (i = f.createCallback(i, n, 3)), se(e, t, i);
        }
        function Be() {
            for (var e = arguments.length > 1 ? arguments : arguments[0], t = -1, i = e ? _e(Vt(e, "length")) : 0, n = qe(i < 0 ? 0 : i); ++t < i; ) n[t] = Vt(e, t);
            return n;
        }
        function ze(e, t) {
            var i = -1, n = e ? e.length : 0, s = {};
            for (t || !n || Tt(e[0]) || (t = []); ++i < n; ) {
                var r = e[i];
                t ? s[r] = t[i] : r && (s[r[0]] = r[1]);
            }
            return s;
        }
        function $e(e, t) {
            return arguments.length > 2 ? oe(e, 17, u(arguments, 2), null, t) : oe(e, 1, null, null, t);
        }
        function Ue(e, t, i) {
            var n, s, r, o, a, l, h, c = 0, u = !1, p = !0;
            if (!ge(e)) throw new it();
            if (t = St(0, t) || 0, !0 === i) {
                var f = !0;
                p = !1;
            } else ye(i) && (f = i.leading, u = "maxWait" in i && (St(t, i.maxWait) || 0), p = "trailing" in i ? i.trailing : p);
            var m = function() {
                var i = t - (qt() - o);
                if (i <= 0) {
                    s && ht(s);
                    var u = h;
                    s = l = h = d, u && (c = qt(), r = e.apply(a, n), l || s || (n = a = null));
                } else l = mt(m, i);
            }, g = function() {
                l && ht(l), s = l = h = d, (p || u !== t) && (c = qt(), r = e.apply(a, n), l || s || (n = a = null));
            };
            return function() {
                if (n = arguments, o = qt(), a = this, h = p && (l || !f), !1 === u) var i = f && !l; else {
                    s || f || (c = o);
                    var d = u - (o - c), y = d <= 0;
                    y ? (s && (s = ht(s)), c = o, r = e.apply(a, n)) : s || (s = mt(g, d));
                }
                return y && l ? l = ht(l) : l || t === u || (l = mt(m, t)), i && (y = !0, r = e.apply(a, n)), 
                !y || l || s || (n = a = null), r;
            };
        }
        function He(e) {
            return e;
        }
        function We(e, t, i) {
            var n = !0, s = t && fe(t);
            t && (i || s.length) || (null == i && (i = t), r = m, t = e, e = f, s = fe(t)), 
            !1 === i ? n = !1 : ye(i) && "chain" in i && (n = i.chain);
            var r = e, o = ge(r);
            xe(s, function(i) {
                var s = e[i] = t[i];
                o && (r.prototype[i] = function() {
                    var t = this.__chain__, i = this.__wrapped__, o = [ i ];
                    ft.apply(o, arguments);
                    var a = s.apply(e, o);
                    if (n || t) {
                        if (i === a && ye(a)) return this;
                        (a = new r(a)).__chain__ = t;
                    }
                    return a;
                });
            });
        }
        function Ge() {}
        function Ve(e) {
            return function(t) {
                return t[e];
            };
        }
        function je() {
            return this.__wrapped__;
        }
        var qe = (i = i ? J.defaults(X.Object(), i, J.pick(X, M)) : X).Array, Xe = i.Boolean, Ke = i.Date, Ye = i.Function, Ze = i.Math, Qe = i.Number, Je = i.Object, et = i.RegExp, tt = i.String, it = i.TypeError, nt = [], st = Je.prototype, rt = i._, ot = st.toString, at = et("^" + tt(ot).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace(/toString| for [^\]]+/g, ".*?") + "$"), lt = Ze.ceil, ht = i.clearTimeout, ct = Ze.floor, ut = Ye.prototype.toString, pt = he(pt = Je.getPrototypeOf) && pt, dt = st.hasOwnProperty, ft = nt.push, mt = i.setTimeout, gt = nt.splice, yt = nt.unshift, vt = function() {
            try {
                var e = {}, t = he(t = Je.defineProperty) && t, i = t(e, e, e) && t;
            } catch (e) {}
            return i;
        }(), Lt = he(Lt = Je.create) && Lt, wt = he(wt = qe.isArray) && wt, bt = i.isFinite, Ct = i.isNaN, Ot = he(Ot = Je.keys) && Ot, St = Ze.max, xt = Ze.min, Et = i.parseInt, At = Ze.random, _t = {};
        _t[P] = qe, _t[R] = Xe, _t[I] = Ke, _t[B] = Ye, _t[$] = Je, _t[z] = Qe, _t[U] = et, 
        _t[H] = tt, m.prototype = f.prototype;
        var Ft = f.support = {};
        Ft.funcDecomp = !he(i.WinRTError) && N.test(p), Ft.funcNames = "string" == typeof Ye.name, 
        f.templateSettings = {
            "escape": /<%-([\s\S]+?)%>/g,
            "evaluate": /<%([\s\S]+?)%>/g,
            "interpolate": A,
            "variable": "",
            "imports": {
                "_": f
            }
        }, Lt || (K = function() {
            function e() {}
            return function(t) {
                if (ye(t)) {
                    e.prototype = t;
                    var n = new e();
                    e.prototype = null;
                }
                return n || i.Object();
            };
        }());
        var Nt = vt ? function(e, t) {
            V.value = t, vt(e, "__bindData__", V), V.value = null;
        } : Ge, Tt = wt || function(e) {
            return e && "object" == typeof e && "number" == typeof e.length && ot.call(e) == P || !1;
        }, Mt = Ot ? function(e) {
            return ye(e) ? Ot(e) : [];
        } : function(e) {
            var t, i = e, n = [];
            if (!i) return n;
            if (!j[typeof e]) return n;
            for (t in i) dt.call(i, t) && n.push(t);
            return n;
        }, kt = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;"
        }, Dt = me(kt), Pt = et("(" + Mt(Dt).join("|") + ")", "g"), Rt = et("[" + Mt(kt).join("") + "]", "g"), It = function(e, t, i) {
            var n, s = e, r = s;
            if (!s) return r;
            var o = arguments, a = 0, l = "number" == typeof i ? 2 : o.length;
            if (l > 3 && "function" == typeof o[l - 2]) var h = Y(o[--l - 1], o[l--], 2); else l > 2 && "function" == typeof o[l - 1] && (h = o[--l]);
            for (;++a < l; ) if ((s = o[a]) && j[typeof s]) for (var c = -1, u = j[typeof s] && Mt(s), p = u ? u.length : 0; ++c < p; ) r[n = u[c]] = h ? h(r[n], s[n]) : s[n];
            return r;
        }, Bt = function(e, t, i) {
            var n, s = e, r = s;
            if (!s) return r;
            for (var o = arguments, a = 0, l = "number" == typeof i ? 2 : o.length; ++a < l; ) if ((s = o[a]) && j[typeof s]) for (var h = -1, c = j[typeof s] && Mt(s), u = c ? c.length : 0; ++h < u; ) void 0 === r[n = c[h]] && (r[n] = s[n]);
            return r;
        }, zt = function(e, t, i) {
            var n, s = e, r = s;
            if (!s) return r;
            if (!j[typeof s]) return r;
            t = t && void 0 === i ? t : Y(t, i, 3);
            for (n in s) if (!1 === t(s[n], n, e)) return r;
            return r;
        }, $t = function(e, t, i) {
            var n, s = e, r = s;
            if (!s) return r;
            if (!j[typeof s]) return r;
            t = t && void 0 === i ? t : Y(t, i, 3);
            for (var o = -1, a = j[typeof s] && Mt(s), l = a ? a.length : 0; ++o < l; ) if (n = a[o], 
            !1 === t(s[n], n, e)) return r;
            return r;
        }, Ut = pt ? function(e) {
            if (!e || ot.call(e) != $) return !1;
            var t = e.valueOf, i = he(t) && (i = pt(t)) && pt(i);
            return i ? e == i || pt(e) == i : ce(e);
        } : ce, Ht = re(function(e, t, i) {
            dt.call(e, i) ? e[i]++ : e[i] = 1;
        }), Wt = re(function(e, t, i) {
            (dt.call(e, i) ? e[i] : e[i] = []).push(t);
        }), Gt = re(function(e, t, i) {
            e[i] = t;
        }), Vt = Ae, jt = Oe, qt = he(qt = Ke.now) && qt || function() {
            return new Ke().getTime();
        }, Xt = 8 == Et(w + "08") ? Et : function(e, t) {
            return Et(Le(e) ? e.replace(_, "") : e, t || 0);
        };
        return f.after = function(e, t) {
            if (!ge(t)) throw new it();
            return function() {
                if (--e < 1) return t.apply(this, arguments);
            };
        }, f.assign = It, f.at = function(e) {
            for (var t = arguments, i = -1, n = ee(t, !0, !1, 1), s = t[2] && t[2][t[1]] === e ? 1 : n.length, r = qe(s); ++i < s; ) r[i] = e[n[i]];
            return r;
        }, f.bind = $e, f.bindAll = function(e) {
            for (var t = arguments.length > 1 ? ee(arguments, !0, !1, 1) : fe(e), i = -1, n = t.length; ++i < n; ) {
                var s = t[i];
                e[s] = oe(e[s], 1, null, null, e);
            }
            return e;
        }, f.bindKey = function(e, t) {
            return arguments.length > 2 ? oe(t, 19, u(arguments, 2), null, e) : oe(t, 3, null, null, e);
        }, f.chain = function(e) {
            return e = new m(e), e.__chain__ = !0, e;
        }, f.compact = function(e) {
            for (var t = -1, i = e ? e.length : 0, n = []; ++t < i; ) {
                var s = e[t];
                s && n.push(s);
            }
            return n;
        }, f.compose = function() {
            for (var e = arguments, t = e.length; t--; ) if (!ge(e[t])) throw new it();
            return function() {
                for (var t = arguments, i = e.length; i--; ) t = [ e[i].apply(this, t) ];
                return t[0];
            };
        }, f.constant = function(e) {
            return function() {
                return e;
            };
        }, f.countBy = Ht, f.create = function(e, t) {
            var i = K(e);
            return t ? It(i, t) : i;
        }, f.createCallback = function(e, t, i) {
            var n = typeof e;
            if (null == e || "function" == n) return Y(e, t, i);
            if ("object" != n) return Ve(e);
            var s = Mt(e), r = s[0], o = e[r];
            return 1 != s.length || o !== o || ye(o) ? function(t) {
                for (var i = s.length, n = !1; i-- && (n = te(t[s[i]], e[s[i]], null, !0)); ) ;
                return n;
            } : function(e) {
                var t = e[r];
                return o === t && (0 !== o || 1 / o == 1 / t);
            };
        }, f.curry = function(e, t) {
            return t = "number" == typeof t ? t : +t || e.length, oe(e, 4, null, null, null, t);
        }, f.debounce = Ue, f.defaults = Bt, f.defer = function(e) {
            if (!ge(e)) throw new it();
            var t = u(arguments, 1);
            return mt(function() {
                e.apply(d, t);
            }, 1);
        }, f.delay = function(e, t) {
            if (!ge(e)) throw new it();
            var i = u(arguments, 2);
            return mt(function() {
                e.apply(d, i);
            }, t);
        }, f.difference = function(e) {
            return Q(e, ee(arguments, !0, !0, 1));
        }, f.filter = Oe, f.flatten = function(e, t, i, n) {
            return "boolean" != typeof t && null != t && (n = i, i = "function" != typeof t && n && n[t] === e ? null : t, 
            t = !1), null != i && (e = Ae(e, i, n)), ee(e, t);
        }, f.forEach = xe, f.forEachRight = Ee, f.forIn = zt, f.forInRight = function(e, t, i) {
            var n = [];
            zt(e, function(e, t) {
                n.push(t, e);
            });
            var s = n.length;
            for (t = Y(t, i, 3); s-- && !1 !== t(n[s--], n[s], e); ) ;
            return e;
        }, f.forOwn = $t, f.forOwnRight = de, f.functions = fe, f.groupBy = Wt, f.indexBy = Gt, 
        f.initial = function(e, t, i) {
            var n = 0, s = e ? e.length : 0;
            if ("number" != typeof t && null != t) {
                var r = s;
                for (t = f.createCallback(t, i, 3); r-- && t(e[r], r, e); ) n++;
            } else n = null == t || i ? 1 : t || n;
            return u(e, 0, xt(St(0, s - n), s));
        }, f.intersection = function() {
            for (var i = [], n = -1, s = arguments.length, o = a(), l = le(), u = l === e, p = a(); ++n < s; ) {
                var d = arguments[n];
                (Tt(d) || pe(d)) && (i.push(d), o.push(u && d.length >= v && r(n ? i[n] : p)));
            }
            var f = i[0], m = -1, g = f ? f.length : 0, y = [];
            e: for (;++m < g; ) {
                var L = o[0];
                if (d = f[m], (L ? t(L, d) : l(p, d)) < 0) {
                    for (n = s, (L || p).push(d); --n; ) if (((L = o[n]) ? t(L, d) : l(i[n], d)) < 0) continue e;
                    y.push(d);
                }
            }
            for (;s--; ) (L = o[s]) && c(L);
            return h(o), h(p), y;
        }, f.invert = me, f.invoke = function(e, t) {
            var i = u(arguments, 2), n = -1, s = "function" == typeof t, r = e ? e.length : 0, o = qe("number" == typeof r ? r : 0);
            return xe(e, function(e) {
                o[++n] = (s ? t : e[t]).apply(e, i);
            }), o;
        }, f.keys = Mt, f.map = Ae, f.mapValues = function(e, t, i) {
            var n = {};
            return t = f.createCallback(t, i, 3), $t(e, function(e, i, s) {
                n[i] = t(e, i, s);
            }), n;
        }, f.max = _e, f.memoize = function(e, t) {
            if (!ge(e)) throw new it();
            var i = function() {
                var n = i.cache, s = t ? t.apply(this, arguments) : y + arguments[0];
                return dt.call(n, s) ? n[s] : n[s] = e.apply(this, arguments);
            };
            return i.cache = {}, i;
        }, f.merge = function(e) {
            var t = arguments, i = 2;
            if (!ye(e)) return e;
            if ("number" != typeof t[2] && (i = t.length), i > 3 && "function" == typeof t[i - 2]) var n = Y(t[--i - 1], t[i--], 2); else i > 2 && "function" == typeof t[i - 1] && (n = t[--i]);
            for (var s = u(arguments, 1, i), r = -1, o = a(), l = a(); ++r < i; ) ie(e, s[r], n, o, l);
            return h(o), h(l), e;
        }, f.min = function(e, t, i) {
            var s = 1 / 0, r = s;
            if ("function" != typeof t && i && i[t] === e && (t = null), null == t && Tt(e)) for (var o = -1, a = e.length; ++o < a; ) {
                var l = e[o];
                l < r && (r = l);
            } else t = null == t && Le(e) ? n : f.createCallback(t, i, 3), xe(e, function(e, i, n) {
                var o = t(e, i, n);
                o < s && (s = o, r = e);
            });
            return r;
        }, f.omit = function(e, t, i) {
            var n = {};
            if ("function" != typeof t) {
                var s = [];
                zt(e, function(e, t) {
                    s.push(t);
                });
                for (var r = -1, o = (s = Q(s, ee(arguments, !0, !1, 1))).length; ++r < o; ) {
                    var a = s[r];
                    n[a] = e[a];
                }
            } else t = f.createCallback(t, i, 3), zt(e, function(e, i, s) {
                t(e, i, s) || (n[i] = e);
            });
            return n;
        }, f.once = function(e) {
            var t, i;
            if (!ge(e)) throw new it();
            return function() {
                return t ? i : (t = !0, i = e.apply(this, arguments), e = null, i);
            };
        }, f.pairs = function(e) {
            for (var t = -1, i = Mt(e), n = i.length, s = qe(n); ++t < n; ) {
                var r = i[t];
                s[t] = [ r, e[r] ];
            }
            return s;
        }, f.partial = function(e) {
            return oe(e, 16, u(arguments, 1));
        }, f.partialRight = function(e) {
            return oe(e, 32, null, u(arguments, 1));
        }, f.pick = function(e, t, i) {
            var n = {};
            if ("function" != typeof t) for (var s = -1, r = ee(arguments, !0, !1, 1), o = ye(e) ? r.length : 0; ++s < o; ) {
                var a = r[s];
                a in e && (n[a] = e[a]);
            } else t = f.createCallback(t, i, 3), zt(e, function(e, i, s) {
                t(e, i, s) && (n[i] = e);
            });
            return n;
        }, f.pluck = Vt, f.property = Ve, f.pull = function(e) {
            for (var t = arguments, i = 0, n = t.length, s = e ? e.length : 0; ++i < n; ) for (var r = -1, o = t[i]; ++r < s; ) e[r] === o && (gt.call(e, r--, 1), 
            s--);
            return e;
        }, f.range = function(e, t, i) {
            e = +e || 0, i = "number" == typeof i ? i : +i || 1, null == t && (t = e, e = 0);
            for (var n = -1, s = St(0, lt((t - e) / (i || 1))), r = qe(s); ++n < s; ) r[n] = e, 
            e += i;
            return r;
        }, f.reject = function(e, t, i) {
            return t = f.createCallback(t, i, 3), Oe(e, function(e, i, n) {
                return !t(e, i, n);
            });
        }, f.remove = function(e, t, i) {
            var n = -1, s = e ? e.length : 0, r = [];
            for (t = f.createCallback(t, i, 3); ++n < s; ) {
                var o = e[n];
                t(o, n, e) && (r.push(o), gt.call(e, n--, 1), s--);
            }
            return r;
        }, f.rest = Pe, f.shuffle = Te, f.sortBy = function(e, t, i) {
            var n = -1, r = Tt(t), o = e ? e.length : 0, u = qe("number" == typeof o ? o : 0);
            for (r || (t = f.createCallback(t, i, 3)), xe(e, function(e, i, s) {
                var o = u[++n] = l();
                r ? o.criteria = Ae(t, function(t) {
                    return e[t];
                }) : (o.criteria = a())[0] = t(e, i, s), o.index = n, o.value = e;
            }), o = u.length, u.sort(s); o--; ) {
                var p = u[o];
                u[o] = p.value, r || h(p.criteria), c(p);
            }
            return u;
        }, f.tap = function(e, t) {
            return t(e), e;
        }, f.throttle = function(e, t, i) {
            var n = !0, s = !0;
            if (!ge(e)) throw new it();
            return !1 === i ? n = !1 : ye(i) && (n = "leading" in i ? i.leading : n, s = "trailing" in i ? i.trailing : s), 
            G.leading = n, G.maxWait = t, G.trailing = s, Ue(e, t, G);
        }, f.times = function(e, t, i) {
            e = (e = +e) > -1 ? e : 0;
            var n = -1, s = qe(e);
            for (t = Y(t, i, 1); ++n < e; ) s[n] = t(n);
            return s;
        }, f.toArray = function(e) {
            return e && "number" == typeof e.length ? u(e) : we(e);
        }, f.transform = function(e, t, i, n) {
            var s = Tt(e);
            if (null == i) if (s) i = []; else {
                var r = e && e.constructor, o = r && r.prototype;
                i = K(o);
            }
            return t && (t = f.createCallback(t, n, 4), (s ? xe : $t)(e, function(e, n, s) {
                return t(i, e, n, s);
            })), i;
        }, f.union = function() {
            return se(ee(arguments, !0, !0));
        }, f.uniq = Ie, f.values = we, f.where = jt, f.without = function(e) {
            return Q(e, u(arguments, 1));
        }, f.wrap = function(e, t) {
            return oe(t, 16, [ e ]);
        }, f.xor = function() {
            for (var e = -1, t = arguments.length; ++e < t; ) {
                var i = arguments[e];
                if (Tt(i) || pe(i)) var n = n ? se(Q(n, i).concat(Q(i, n))) : i;
            }
            return n || [];
        }, f.zip = Be, f.zipObject = ze, f.collect = Ae, f.drop = Pe, f.each = xe, f.eachRight = Ee, 
        f.extend = It, f.methods = fe, f.object = ze, f.select = Oe, f.tail = Pe, f.unique = Ie, 
        f.unzip = Be, We(f), f.clone = function(e, t, i, n) {
            return "boolean" != typeof t && null != t && (n = i, i = t, t = !1), q(e, t, "function" == typeof i && Y(i, n, 1));
        }, f.cloneDeep = function(e, t, i) {
            return q(e, !0, "function" == typeof t && Y(t, i, 1));
        }, f.contains = be, f.escape = function(e) {
            return null == e ? "" : tt(e).replace(Rt, ae);
        }, f.every = Ce, f.find = Se, f.findIndex = function(e, t, i) {
            var n = -1, s = e ? e.length : 0;
            for (t = f.createCallback(t, i, 3); ++n < s; ) if (t(e[n], n, e)) return n;
            return -1;
        }, f.findKey = function(e, t, i) {
            var n;
            return t = f.createCallback(t, i, 3), $t(e, function(e, i, s) {
                if (t(e, i, s)) return n = i, !1;
            }), n;
        }, f.findLast = function(e, t, i) {
            var n;
            return t = f.createCallback(t, i, 3), Ee(e, function(e, i, s) {
                if (t(e, i, s)) return n = e, !1;
            }), n;
        }, f.findLastIndex = function(e, t, i) {
            var n = e ? e.length : 0;
            for (t = f.createCallback(t, i, 3); n--; ) if (t(e[n], n, e)) return n;
            return -1;
        }, f.findLastKey = function(e, t, i) {
            var n;
            return t = f.createCallback(t, i, 3), de(e, function(e, i, s) {
                if (t(e, i, s)) return n = i, !1;
            }), n;
        }, f.has = function(e, t) {
            return !!e && dt.call(e, t);
        }, f.identity = He, f.indexOf = De, f.isArguments = pe, f.isArray = Tt, f.isBoolean = function(e) {
            return !0 === e || !1 === e || e && "object" == typeof e && ot.call(e) == R || !1;
        }, f.isDate = function(e) {
            return e && "object" == typeof e && ot.call(e) == I || !1;
        }, f.isElement = function(e) {
            return e && 1 === e.nodeType || !1;
        }, f.isEmpty = function(e) {
            var t = !0;
            if (!e) return t;
            var i = ot.call(e), n = e.length;
            return i == P || i == H || i == D || i == $ && "number" == typeof n && ge(e.splice) ? !n : ($t(e, function() {
                return t = !1;
            }), t);
        }, f.isEqual = function(e, t, i, n) {
            return te(e, t, "function" == typeof i && Y(i, n, 2));
        }, f.isFinite = function(e) {
            return bt(e) && !Ct(parseFloat(e));
        }, f.isFunction = ge, f.isNaN = function(e) {
            return ve(e) && e != +e;
        }, f.isNull = function(e) {
            return null === e;
        }, f.isNumber = ve, f.isObject = ye, f.isPlainObject = Ut, f.isRegExp = function(e) {
            return e && "object" == typeof e && ot.call(e) == U || !1;
        }, f.isString = Le, f.isUndefined = function(e) {
            return void 0 === e;
        }, f.lastIndexOf = function(e, t, i) {
            var n = e ? e.length : 0;
            for ("number" == typeof i && (n = (i < 0 ? St(0, n + i) : xt(i, n - 1)) + 1); n--; ) if (e[n] === t) return n;
            return -1;
        }, f.mixin = We, f.noConflict = function() {
            return i._ = rt, this;
        }, f.noop = Ge, f.now = qt, f.parseInt = Xt, f.random = function(e, t, i) {
            var n = null == e, s = null == t;
            if (null == i && ("boolean" == typeof e && s ? (i = e, e = 1) : s || "boolean" != typeof t || (i = t, 
            s = !0)), n && s && (t = 1), e = +e || 0, s ? (t = e, e = 0) : t = +t || 0, i || e % 1 || t % 1) {
                var r = At();
                return xt(e + r * (t - e + parseFloat("1e-" + ((r + "").length - 1))), t);
            }
            return ne(e, t);
        }, f.reduce = Fe, f.reduceRight = Ne, f.result = function(e, t) {
            if (e) {
                var i = e[t];
                return ge(i) ? e[t]() : i;
            }
        }, f.runInContext = p, f.size = function(e) {
            var t = e ? e.length : 0;
            return "number" == typeof t ? t : Mt(e).length;
        }, f.some = Me, f.sortedIndex = Re, f.template = function(e, t, i) {
            var n = f.templateSettings;
            e = tt(e || ""), i = Bt({}, i, n);
            var s, r = Bt({}, i.imports, n.imports), a = Mt(r), l = we(r), h = 0, c = i.interpolate || F, u = "__p += '", p = et((i.escape || F).source + "|" + c.source + "|" + (c === A ? S : F).source + "|" + (i.evaluate || F).source + "|$", "g");
            e.replace(p, function(t, i, n, r, a, l) {
                return n || (n = r), u += e.slice(h, l).replace(T, o), i && (u += "' +\n__e(" + i + ") +\n'"), 
                a && (s = !0, u += "';\n" + a + ";\n__p += '"), n && (u += "' +\n((__t = (" + n + ")) == null ? '' : __t) +\n'"), 
                h = l + t.length, t;
            }), u += "';\n";
            var m = i.variable, g = m;
            g || (u = "with (" + (m = "obj") + ") {\n" + u + "\n}\n"), u = (s ? u.replace(b, "") : u).replace(C, "$1").replace(O, "$1;"), 
            u = "function(" + m + ") {\n" + (g ? "" : m + " || (" + m + " = {});\n") + "var __t, __p = '', __e = _.escape" + (s ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + u + "return __p\n}";
            var y = "\n/*\n//# sourceURL=" + (i.sourceURL || "/lodash/template/source[" + k++ + "]") + "\n*/";
            try {
                var v = Ye(a, "return " + u + y).apply(d, l);
            } catch (e) {
                throw e.source = u, e;
            }
            return t ? v(t) : (v.source = u, v);
        }, f.unescape = function(e) {
            return null == e ? "" : tt(e).replace(Pt, ue);
        }, f.uniqueId = function(e) {
            var t = ++g;
            return tt(null == e ? "" : e) + t;
        }, f.all = Ce, f.any = Me, f.detect = Se, f.findWhere = Se, f.foldl = Fe, f.foldr = Ne, 
        f.include = be, f.inject = Fe, We(function() {
            var e = {};
            return $t(f, function(t, i) {
                f.prototype[i] || (e[i] = t);
            }), e;
        }(), !1), f.first = ke, f.last = function(e, t, i) {
            var n = 0, s = e ? e.length : 0;
            if ("number" != typeof t && null != t) {
                var r = s;
                for (t = f.createCallback(t, i, 3); r-- && t(e[r], r, e); ) n++;
            } else if (null == (n = t) || i) return e ? e[s - 1] : d;
            return u(e, St(0, s - n));
        }, f.sample = function(e, t, i) {
            if (e && "number" != typeof e.length && (e = we(e)), null == t || i) return e ? e[ne(0, e.length - 1)] : d;
            var n = Te(e);
            return n.length = xt(St(0, t), n.length), n;
        }, f.take = ke, f.head = ke, $t(f, function(e, t) {
            var i = "sample" !== t;
            f.prototype[t] || (f.prototype[t] = function(t, n) {
                var s = this.__chain__, r = e(this.__wrapped__, t, n);
                return s || null != t && (!n || i && "function" == typeof t) ? new m(r, s) : r;
            });
        }), f.VERSION = "2.4.2", f.prototype.chain = function() {
            return this.__chain__ = !0, this;
        }, f.prototype.toString = function() {
            return tt(this.__wrapped__);
        }, f.prototype.value = je, f.prototype.valueOf = je, xe([ "join", "pop", "shift" ], function(e) {
            var t = nt[e];
            f.prototype[e] = function() {
                var e = this.__chain__, i = t.apply(this.__wrapped__, arguments);
                return e ? new m(i, e) : i;
            };
        }), xe([ "push", "reverse", "sort", "unshift" ], function(e) {
            var t = nt[e];
            f.prototype[e] = function() {
                return t.apply(this.__wrapped__, arguments), this;
            };
        }), xe([ "concat", "slice", "splice" ], function(e) {
            var t = nt[e];
            f.prototype[e] = function() {
                return new m(t.apply(this.__wrapped__, arguments), this.__chain__);
            };
        }), f;
    }
    var d, f = [], m = [], g = 0, y = +new Date() + "", v = 75, L = 40, w = " \t\v\f \ufeff\n\r\u2028\u2029 ᠎             　", b = /\b__p \+= '';/g, C = /\b(__p \+=) '' \+/g, O = /(__e\(.*?\)|\b__t\)) \+\n'';/g, S = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, x = /\w*$/, E = /^\s*function[ \n\r\t]+\w/, A = /<%=([\s\S]+?)%>/g, _ = RegExp("^[" + w + "]*0+(?=.$)"), F = /($^)/, N = /\bthis\b/, T = /['\n\r\t\u2028\u2029\\]/g, M = [ "Array", "Boolean", "Date", "Function", "Math", "Number", "Object", "RegExp", "String", "_", "attachEvent", "clearTimeout", "isFinite", "isNaN", "parseInt", "setTimeout" ], k = 0, D = "[object Arguments]", P = "[object Array]", R = "[object Boolean]", I = "[object Date]", B = "[object Function]", z = "[object Number]", $ = "[object Object]", U = "[object RegExp]", H = "[object String]", W = {};
    W[B] = !1, W[D] = W[P] = W[R] = W[I] = W[z] = W[$] = W[U] = W[H] = !0;
    var G = {
        "leading": !1,
        "maxWait": 0,
        "trailing": !1
    }, V = {
        "configurable": !1,
        "enumerable": !1,
        "value": null,
        "writable": !1
    }, j = {
        "boolean": !1,
        "function": !0,
        "object": !0,
        "number": !1,
        "string": !1,
        "undefined": !1
    }, q = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "\t": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }, X = j[typeof window] && window || this, K = j[typeof exports] && exports && !exports.nodeType && exports, Y = j[typeof module] && module && !module.nodeType && module, Z = Y && Y.exports === K && K, Q = j[typeof global] && global;
    !Q || Q.global !== Q && Q.window !== Q || (X = Q);
    var J = p();
    "function" == typeof define && "object" == typeof define.amd && define.amd ? (X._ = J, 
    define(function() {
        return J;
    })) : K && Y ? Z ? (Y.exports = J)._ = J : K._ = J : X._ = J;
}.call(this), function(e, t) {
    "use strict";
    function i(e, t) {
        var i, n, s = e.toLowerCase();
        for (t = [].concat(t), i = 0; i < t.length; i += 1) if (n = t[i]) {
            if (n.test && n.test(e)) return !0;
            if (n.toLowerCase() === s) return !0;
        }
    }
    var n = t.prototype.trim, s = t.prototype.trimRight, r = t.prototype.trimLeft, o = function(e) {
        return 1 * e || 0;
    }, a = function(e, t) {
        if (t < 1) return "";
        for (var i = ""; t > 0; ) 1 & t && (i += e), t >>= 1, e += e;
        return i;
    }, l = [].slice, h = function(e) {
        return null == e ? "\\s" : e.source ? e.source : "[" + f.escapeRegExp(e) + "]";
    }, c = {
        "lt": "<",
        "gt": ">",
        "quot": '"',
        "amp": "&",
        "apos": "'"
    }, u = {};
    for (var p in c) u[c[p]] = p;
    u["'"] = "#39";
    var d = function() {
        function e(e) {
            return Object.prototype.toString.call(e).slice(8, -1).toLowerCase();
        }
        var i = a, n = function() {
            return n.cache.hasOwnProperty(arguments[0]) || (n.cache[arguments[0]] = n.parse(arguments[0])), 
            n.format.call(null, n.cache[arguments[0]], arguments);
        };
        return n.format = function(n, s) {
            var r, o, a, l, h, c, u, p = 1, f = n.length, m = "", g = [];
            for (o = 0; o < f; o++) if ("string" === (m = e(n[o]))) g.push(n[o]); else if ("array" === m) {
                if ((l = n[o])[2]) for (r = s[p], a = 0; a < l[2].length; a++) {
                    if (!r.hasOwnProperty(l[2][a])) throw new Error(d('[_.sprintf] property "%s" does not exist', l[2][a]));
                    r = r[l[2][a]];
                } else r = l[1] ? s[l[1]] : s[p++];
                if (/[^s]/.test(l[8]) && "number" != e(r)) throw new Error(d("[_.sprintf] expecting number but found %s", e(r)));
                switch (l[8]) {
                  case "b":
                    r = r.toString(2);
                    break;

                  case "c":
                    r = t.fromCharCode(r);
                    break;

                  case "d":
                    r = parseInt(r, 10);
                    break;

                  case "e":
                    r = l[7] ? r.toExponential(l[7]) : r.toExponential();
                    break;

                  case "f":
                    r = l[7] ? parseFloat(r).toFixed(l[7]) : parseFloat(r);
                    break;

                  case "o":
                    r = r.toString(8);
                    break;

                  case "s":
                    r = (r = t(r)) && l[7] ? r.substring(0, l[7]) : r;
                    break;

                  case "u":
                    r = Math.abs(r);
                    break;

                  case "x":
                    r = r.toString(16);
                    break;

                  case "X":
                    r = r.toString(16).toUpperCase();
                }
                r = /[def]/.test(l[8]) && l[3] && r >= 0 ? "+" + r : r, c = l[4] ? "0" == l[4] ? "0" : l[4].charAt(1) : " ", 
                u = l[6] - t(r).length, h = l[6] ? i(c, u) : "", g.push(l[5] ? r + h : h + r);
            }
            return g.join("");
        }, n.cache = {}, n.parse = function(e) {
            for (var t = e, i = [], n = [], s = 0; t; ) {
                if (null !== (i = /^[^\x25]+/.exec(t))) n.push(i[0]); else if (null !== (i = /^\x25{2}/.exec(t))) n.push("%"); else {
                    if (null === (i = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))) throw new Error("[_.sprintf] huh?");
                    if (i[2]) {
                        s |= 1;
                        var r = [], o = i[2], a = [];
                        if (null === (a = /^([a-z_][a-z_\d]*)/i.exec(o))) throw new Error("[_.sprintf] huh?");
                        for (r.push(a[1]); "" !== (o = o.substring(a[0].length)); ) if (null !== (a = /^\.([a-z_][a-z_\d]*)/i.exec(o))) r.push(a[1]); else {
                            if (null === (a = /^\[(\d+)\]/.exec(o))) throw new Error("[_.sprintf] huh?");
                            r.push(a[1]);
                        }
                        i[2] = r;
                    } else s |= 2;
                    if (3 === s) throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");
                    n.push(i);
                }
                t = t.substring(i[0].length);
            }
            return n;
        }, n;
    }(), f = {
        "VERSION": "2.3.0",
        "isBlank": function(e) {
            return null == e && (e = ""), /^\s*$/.test(e);
        },
        "stripTags": function(e) {
            return null == e ? "" : t(e).replace(/<\/?[^>]+>/g, "");
        },
        "capitalize": function(e) {
            return (e = null == e ? "" : t(e)).charAt(0).toUpperCase() + e.slice(1);
        },
        "chop": function(e, i) {
            return null == e ? [] : (e = t(e), (i = ~~i) > 0 ? e.match(new RegExp(".{1," + i + "}", "g")) : [ e ]);
        },
        "clean": function(e) {
            return f.strip(e).replace(/\s+/g, " ");
        },
        "count": function(e, i) {
            if (null == e || null == i) return 0;
            e = t(e);
            for (var n = 0, s = 0, r = (i = t(i)).length; ;) {
                if (-1 === (s = e.indexOf(i, s))) break;
                n++, s += r;
            }
            return n;
        },
        "chars": function(e) {
            return null == e ? [] : t(e).split("");
        },
        "swapCase": function(e) {
            return null == e ? "" : t(e).replace(/\S/g, function(e) {
                return e === e.toUpperCase() ? e.toLowerCase() : e.toUpperCase();
            });
        },
        "escapeHTML": function(e) {
            return null == e ? "" : t(e).replace(/[&<>"']/g, function(e) {
                return "&" + u[e] + ";";
            });
        },
        "unescapeHTML": function(e) {
            return null == e ? "" : t(e).replace(/\&([^;]+);/g, function(e, i) {
                var n;
                return i in c ? c[i] : (n = i.match(/^#x([\da-fA-F]+)$/)) ? t.fromCharCode(parseInt(n[1], 16)) : (n = i.match(/^#(\d+)$/)) ? t.fromCharCode(~~n[1]) : e;
            });
        },
        "escapeRegExp": function(e) {
            return null == e ? "" : t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1");
        },
        "splice": function(e, t, i, n) {
            var s = f.chars(e);
            return s.splice(~~t, ~~i, n), s.join("");
        },
        "insert": function(e, t, i) {
            return f.splice(e, t, 0, i);
        },
        "include": function(e, i) {
            return "" === i || null != e && -1 !== t(e).indexOf(i);
        },
        "join": function() {
            var e = l.call(arguments), t = e.shift();
            return null == t && (t = ""), e.join(t);
        },
        "lines": function(e) {
            return null == e ? [] : t(e).split("\n");
        },
        "reverse": function(e) {
            return f.chars(e).reverse().join("");
        },
        "startsWith": function(e, i) {
            return "" === i || null != e && null != i && (e = t(e), i = t(i), e.length >= i.length && e.slice(0, i.length) === i);
        },
        "endsWith": function(e, i) {
            return "" === i || null != e && null != i && (e = t(e), i = t(i), e.length >= i.length && e.slice(e.length - i.length) === i);
        },
        "succ": function(e) {
            return null == e ? "" : (e = t(e)).slice(0, -1) + t.fromCharCode(e.charCodeAt(e.length - 1) + 1);
        },
        "titleize": function(e) {
            return null == e ? "" : (e = t(e).toLowerCase()).replace(/(?:^|\s|-)\S/g, function(e) {
                return e.toUpperCase();
            });
        },
        "camelize": function(e) {
            return f.trim(e).replace(/[-_\s]+(.)?/g, function(e, t) {
                return t ? t.toUpperCase() : "";
            });
        },
        "underscored": function(e) {
            return f.trim(e).replace(/([a-z\d])([A-Z]+)/g, "$1_$2").replace(/[-\s]+/g, "_").toLowerCase();
        },
        "dasherize": function(e) {
            return f.trim(e).replace(/([A-Z])/g, "-$1").replace(/[-_\s]+/g, "-").toLowerCase();
        },
        "classify": function(e) {
            return f.titleize(t(e).replace(/[\W_]/g, " ")).replace(/\s/g, "");
        },
        "humanize": function(e) {
            return f.capitalize(f.underscored(e).replace(/_id$/, "").replace(/_/g, " "));
        },
        "trim": function(e, i) {
            return null == e ? "" : !i && n ? n.call(e) : (i = h(i), t(e).replace(new RegExp("^" + i + "+|" + i + "+$", "g"), ""));
        },
        "ltrim": function(e, i) {
            return null == e ? "" : !i && r ? r.call(e) : (i = h(i), t(e).replace(new RegExp("^" + i + "+"), ""));
        },
        "rtrim": function(e, i) {
            return null == e ? "" : !i && s ? s.call(e) : (i = h(i), t(e).replace(new RegExp(i + "+$"), ""));
        },
        "truncate": function(e, i, n) {
            return null == e ? "" : (e = t(e), n = n || "...", i = ~~i, e.length > i ? e.slice(0, i) + n : e);
        },
        "prune": function(e, i, n) {
            if (null == e) return "";
            if (e = t(e), i = ~~i, n = null != n ? t(n) : "...", e.length <= i) return e;
            var s = e.slice(0, i + 1).replace(/.(?=\W*\w*$)/g, function(e) {
                return e.toUpperCase() !== e.toLowerCase() ? "A" : " ";
            });
            return ((s = s.slice(s.length - 2).match(/\w\w/) ? s.replace(/\s*\S+$/, "") : f.rtrim(s.slice(0, s.length - 1))) + n).length > e.length ? e : e.slice(0, s.length) + n;
        },
        "words": function(e, t) {
            return f.isBlank(e) ? [] : f.trim(e, t).split(t || /\s+/);
        },
        "pad": function(e, i, n, s) {
            e = null == e ? "" : t(e), i = ~~i;
            var r = 0;
            switch (n ? n.length > 1 && (n = n.charAt(0)) : n = " ", s) {
              case "right":
                return r = i - e.length, e + a(n, r);

              case "both":
                return r = i - e.length, a(n, Math.ceil(r / 2)) + e + a(n, Math.floor(r / 2));

              default:
                return r = i - e.length, a(n, r) + e;
            }
        },
        "lpad": function(e, t, i) {
            return f.pad(e, t, i);
        },
        "rpad": function(e, t, i) {
            return f.pad(e, t, i, "right");
        },
        "lrpad": function(e, t, i) {
            return f.pad(e, t, i, "both");
        },
        "sprintf": d,
        "vsprintf": function(e, t) {
            return t.unshift(e), d.apply(null, t);
        },
        "toNumber": function(e, t) {
            return e ? (e = f.trim(e)).match(/^-?\d+(?:\.\d+)?$/) ? o(o(e).toFixed(~~t)) : NaN : 0;
        },
        "numberFormat": function(e, t, i, n) {
            if (isNaN(e) || null == e) return "";
            e = e.toFixed(~~t), n = "string" == typeof n ? n : ",";
            var s = e.split("."), r = s[0], o = s[1] ? (i || ".") + s[1] : "";
            return r.replace(/(\d)(?=(?:\d{3})+$)/g, "$1" + n) + o;
        },
        "strRight": function(e, i) {
            if (null == e) return "";
            e = t(e);
            var n = (i = null != i ? t(i) : i) ? e.indexOf(i) : -1;
            return ~n ? e.slice(n + i.length, e.length) : e;
        },
        "strRightBack": function(e, i) {
            if (null == e) return "";
            e = t(e);
            var n = (i = null != i ? t(i) : i) ? e.lastIndexOf(i) : -1;
            return ~n ? e.slice(n + i.length, e.length) : e;
        },
        "strLeft": function(e, i) {
            if (null == e) return "";
            e = t(e);
            var n = (i = null != i ? t(i) : i) ? e.indexOf(i) : -1;
            return ~n ? e.slice(0, n) : e;
        },
        "strLeftBack": function(e, t) {
            if (null == e) return "";
            e += "", t = null != t ? "" + t : t;
            var i = e.lastIndexOf(t);
            return ~i ? e.slice(0, i) : e;
        },
        "toSentence": function(e, t, i, n) {
            t = t || ", ", i = i || " and ";
            var s = e.slice(), r = s.pop();
            return e.length > 2 && n && (i = f.rtrim(t) + i), s.length ? s.join(t) + i + r : r;
        },
        "toSentenceSerial": function() {
            var e = l.call(arguments);
            return e[3] = !0, f.toSentence.apply(f, e);
        },
        "slugify": function(e) {
            if (null == e) return "";
            var i = "ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź", n = new RegExp(h(i), "g");
            return e = t(e).toLowerCase().replace(n, function(e) {
                var t = i.indexOf(e);
                return "aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz".charAt(t) || "-";
            }), f.dasherize(e.replace(/[^\w\s-]/g, ""));
        },
        "surround": function(e, t) {
            return [ t, e, t ].join("");
        },
        "quote": function(e, t) {
            return f.surround(e, t || '"');
        },
        "unquote": function(e, t) {
            return t = t || '"', e[0] === t && e[e.length - 1] === t ? e.slice(1, e.length - 1) : e;
        },
        "exports": function() {
            var e = {};
            for (var t in this) this.hasOwnProperty(t) && !t.match(/^(?:include|contains|reverse)$/) && (e[t] = this[t]);
            return e;
        },
        "repeat": function(e, i, n) {
            if (null == e) return "";
            if (i = ~~i, null == n) return a(t(e), i);
            for (var s = []; i > 0; s[--i] = e) ;
            return s.join(n);
        },
        "naturalCmp": function(e, i) {
            if (e == i) return 0;
            if (!e) return -1;
            if (!i) return 1;
            for (var n = /(\.\d+)|(\d+)|(\D+)/g, s = t(e).toLowerCase().match(n), r = t(i).toLowerCase().match(n), o = Math.min(s.length, r.length), a = 0; a < o; a++) {
                var l = s[a], h = r[a];
                if (l !== h) {
                    var c = parseInt(l, 10);
                    if (!isNaN(c)) {
                        var u = parseInt(h, 10);
                        if (!isNaN(u) && c - u) return c - u;
                    }
                    return l < h ? -1 : 1;
                }
            }
            return s.length === r.length ? s.length - r.length : e < i ? -1 : 1;
        },
        "levenshtein": function(e, i) {
            if (null == e && null == i) return 0;
            if (null == e) return t(i).length;
            if (null == i) return t(e).length;
            e = t(e), i = t(i);
            for (var n, s, r = [], o = 0; o <= i.length; o++) for (var a = 0; a <= e.length; a++) s = o && a ? e.charAt(a - 1) === i.charAt(o - 1) ? n : Math.min(r[a], r[a - 1], n) + 1 : o + a, 
            n = r[a], r[a] = s;
            return r.pop();
        },
        "toBoolean": function(e, t, n) {
            return "number" == typeof e && (e = "" + e), "string" != typeof e ? !!e : (e = f.trim(e), 
            !!i(e, t || [ "true", "1" ]) || !i(e, n || [ "false", "0" ]) && void 0);
        }
    };
    f.strip = f.trim, f.lstrip = f.ltrim, f.rstrip = f.rtrim, f.center = f.lrpad, f.rjust = f.lpad, 
    f.ljust = f.rpad, f.contains = f.include, f.q = f.quote, f.toBool = f.toBoolean, 
    "undefined" != typeof exports && ("undefined" != typeof module && module.exports && (module.exports = f), 
    exports._s = f), "function" == typeof define && define.amd && define("underscore.string", [], function() {
        return f;
    }), e._ = e._ || {}, e._.string = e._.str = f;
}(this, String), function(e, t) {
    if ("function" == typeof define && define.amd) define([ "underscore", "jquery", "exports" ], function(i, n, s) {
        e.Backbone = t(e, s, i, n);
    }); else if ("undefined" != typeof exports) {
        var i = require("underscore");
        t(e, exports, i);
    } else e.Backbone = t(e, {}, e._, e.jQuery || e.Zepto || e.ender || e.$);
}(this, function(e, t, i, n) {
    var s = e.Backbone, r = [], o = r.slice;
    t.VERSION = "1.1.2", t.$ = n, t.noConflict = function() {
        return e.Backbone = s, this;
    }, t.emulateHTTP = !1, t.emulateJSON = !1;
    var a = t.Events = {
        "on": function(e, t, i) {
            return h(this, "on", e, [ t, i ]) && t ? (this._events || (this._events = {}), (this._events[e] || (this._events[e] = [])).push({
                "callback": t,
                "context": i,
                "ctx": i || this
            }), this) : this;
        },
        "once": function(e, t, n) {
            if (!h(this, "once", e, [ t, n ]) || !t) return this;
            var s = this, r = i.once(function() {
                s.off(e, r), t.apply(this, arguments);
            });
            return r._callback = t, this.on(e, r, n);
        },
        "off": function(e, t, n) {
            var s, r, o, a, l, c, u, p;
            if (!this._events || !h(this, "off", e, [ t, n ])) return this;
            if (!e && !t && !n) return this._events = void 0, this;
            for (l = 0, c = (a = e ? [ e ] : i.keys(this._events)).length; l < c; l++) if (e = a[l], 
            o = this._events[e]) {
                if (this._events[e] = s = [], t || n) for (u = 0, p = o.length; u < p; u++) r = o[u], 
                (t && t !== r.callback && t !== r.callback._callback || n && n !== r.context) && s.push(r);
                s.length || delete this._events[e];
            }
            return this;
        },
        "trigger": function(e) {
            if (!this._events) return this;
            var t = o.call(arguments, 1);
            if (!h(this, "trigger", e, t)) return this;
            var i = this._events[e], n = this._events.all;
            return i && c(i, t), n && c(n, arguments), this;
        },
        "stopListening": function(e, t, n) {
            var s = this._listeningTo;
            if (!s) return this;
            var r = !t && !n;
            n || "object" != typeof t || (n = this), e && ((s = {})[e._listenId] = e);
            for (var o in s) (e = s[o]).off(t, n, this), (r || i.isEmpty(e._events)) && delete this._listeningTo[o];
            return this;
        }
    }, l = /\s+/, h = function(e, t, i, n) {
        if (!i) return !0;
        if ("object" == typeof i) {
            for (var s in i) e[t].apply(e, [ s, i[s] ].concat(n));
            return !1;
        }
        if (l.test(i)) {
            for (var r = i.split(l), o = 0, a = r.length; o < a; o++) e[t].apply(e, [ r[o] ].concat(n));
            return !1;
        }
        return !0;
    }, c = function(e, t) {
        var i, n = -1, s = e.length, r = t[0], o = t[1], a = t[2];
        switch (t.length) {
          case 0:
            for (;++n < s; ) (i = e[n]).callback.call(i.ctx);
            return;

          case 1:
            for (;++n < s; ) (i = e[n]).callback.call(i.ctx, r);
            return;

          case 2:
            for (;++n < s; ) (i = e[n]).callback.call(i.ctx, r, o);
            return;

          case 3:
            for (;++n < s; ) (i = e[n]).callback.call(i.ctx, r, o, a);
            return;

          default:
            for (;++n < s; ) (i = e[n]).callback.apply(i.ctx, t);
            return;
        }
    }, u = {
        "listenTo": "on",
        "listenToOnce": "once"
    };
    i.each(u, function(e, t) {
        a[t] = function(t, n, s) {
            return (this._listeningTo || (this._listeningTo = {}))[t._listenId || (t._listenId = i.uniqueId("l"))] = t, 
            s || "object" != typeof n || (s = this), t[e](n, s, this), this;
        };
    }), a.bind = a.on, a.unbind = a.off, i.extend(t, a);
    var p = t.Model = function(e, t) {
        var n = e || {};
        t || (t = {}), this.cid = i.uniqueId("c"), this.attributes = {}, t.collection && (this.collection = t.collection), 
        t.parse && (n = this.parse(n, t) || {}), n = i.defaults({}, n, i.result(this, "defaults")), 
        this.set(n, t), this.changed = {}, this.initialize.apply(this, arguments);
    };
    i.extend(p.prototype, a, {
        "changed": null,
        "validationError": null,
        "idAttribute": "id",
        "initialize": function() {},
        "toJSON": function(e) {
            return i.clone(this.attributes);
        },
        "sync": function() {
            return t.sync.apply(this, arguments);
        },
        "get": function(e) {
            return this.attributes[e];
        },
        "escape": function(e) {
            return i.escape(this.get(e));
        },
        "has": function(e) {
            return null != this.get(e);
        },
        "set": function(e, t, n) {
            var s, r, o, a, l, h, c, u;
            if (null == e) return this;
            if ("object" == typeof e ? (r = e, n = t) : (r = {})[e] = t, n || (n = {}), !this._validate(r, n)) return !1;
            o = n.unset, l = n.silent, a = [], h = this._changing, this._changing = !0, h || (this._previousAttributes = i.clone(this.attributes), 
            this.changed = {}), u = this.attributes, c = this._previousAttributes, this.idAttribute in r && (this.id = r[this.idAttribute]);
            for (s in r) t = r[s], i.isEqual(u[s], t) || a.push(s), i.isEqual(c[s], t) ? delete this.changed[s] : this.changed[s] = t, 
            o ? delete u[s] : u[s] = t;
            if (!l) {
                a.length && (this._pending = n);
                for (var p = 0, d = a.length; p < d; p++) this.trigger("change:" + a[p], this, u[a[p]], n);
            }
            if (h) return this;
            if (!l) for (;this._pending; ) n = this._pending, this._pending = !1, this.trigger("change", this, n);
            return this._pending = !1, this._changing = !1, this;
        },
        "unset": function(e, t) {
            return this.set(e, void 0, i.extend({}, t, {
                "unset": !0
            }));
        },
        "clear": function(e) {
            var t = {};
            for (var n in this.attributes) t[n] = void 0;
            return this.set(t, i.extend({}, e, {
                "unset": !0
            }));
        },
        "hasChanged": function(e) {
            return null == e ? !i.isEmpty(this.changed) : i.has(this.changed, e);
        },
        "changedAttributes": function(e) {
            if (!e) return !!this.hasChanged() && i.clone(this.changed);
            var t, n = !1, s = this._changing ? this._previousAttributes : this.attributes;
            for (var r in e) i.isEqual(s[r], t = e[r]) || ((n || (n = {}))[r] = t);
            return n;
        },
        "previous": function(e) {
            return null != e && this._previousAttributes ? this._previousAttributes[e] : null;
        },
        "previousAttributes": function() {
            return i.clone(this._previousAttributes);
        },
        "fetch": function(e) {
            void 0 === (e = e ? i.clone(e) : {}).parse && (e.parse = !0);
            var t = this, n = e.success;
            return e.success = function(i) {
                if (!t.set(t.parse(i, e), e)) return !1;
                n && n(t, i, e), t.trigger("sync", t, i, e);
            }, R(this, e), this.sync("read", this, e);
        },
        "save": function(e, t, n) {
            var s, r, o, a = this.attributes;
            if (null == e || "object" == typeof e ? (s = e, n = t) : (s = {})[e] = t, n = i.extend({
                "validate": !0
            }, n), s && !n.wait) {
                if (!this.set(s, n)) return !1;
            } else if (!this._validate(s, n)) return !1;
            s && n.wait && (this.attributes = i.extend({}, a, s)), void 0 === n.parse && (n.parse = !0);
            var l = this, h = n.success;
            return n.success = function(e) {
                l.attributes = a;
                var t = l.parse(e, n);
                if (n.wait && (t = i.extend(s || {}, t)), i.isObject(t) && !l.set(t, n)) return !1;
                h && h(l, e, n), l.trigger("sync", l, e, n);
            }, R(this, n), "patch" === (r = this.isNew() ? "create" : n.patch ? "patch" : "update") && (n.attrs = s), 
            o = this.sync(r, this, n), s && n.wait && (this.attributes = a), o;
        },
        "destroy": function(e) {
            var t = this, n = (e = e ? i.clone(e) : {}).success, s = function() {
                t.trigger("destroy", t, t.collection, e);
            };
            if (e.success = function(i) {
                (e.wait || t.isNew()) && s(), n && n(t, i, e), t.isNew() || t.trigger("sync", t, i, e);
            }, this.isNew()) return e.success(), !1;
            R(this, e);
            var r = this.sync("delete", this, e);
            return e.wait || s(), r;
        },
        "url": function() {
            var e = i.result(this, "urlRoot") || i.result(this.collection, "url") || P();
            return this.isNew() ? e : e.replace(/([^\/])$/, "$1/") + encodeURIComponent(this.id);
        },
        "parse": function(e, t) {
            return e;
        },
        "clone": function() {
            return new this.constructor(this.attributes);
        },
        "isNew": function() {
            return !this.has(this.idAttribute);
        },
        "isValid": function(e) {
            return this._validate({}, i.extend(e || {}, {
                "validate": !0
            }));
        },
        "_validate": function(e, t) {
            if (!t.validate || !this.validate) return !0;
            e = i.extend({}, this.attributes, e);
            var n = this.validationError = this.validate(e, t) || null;
            return !n || (this.trigger("invalid", this, n, i.extend(t, {
                "validationError": n
            })), !1);
        }
    });
    var d = [ "keys", "values", "pairs", "invert", "pick", "omit" ];
    i.each(d, function(e) {
        p.prototype[e] = function() {
            var t = o.call(arguments);
            return t.unshift(this.attributes), i[e].apply(i, t);
        };
    });
    var f = t.Collection = function(e, t) {
        t || (t = {}), t.model && (this.model = t.model), void 0 !== t.comparator && (this.comparator = t.comparator), 
        this._reset(), this.initialize.apply(this, arguments), e && this.reset(e, i.extend({
            "silent": !0
        }, t));
    }, m = {
        "add": !0,
        "remove": !0,
        "merge": !0
    }, g = {
        "add": !0,
        "remove": !1
    };
    i.extend(f.prototype, a, {
        "model": p,
        "initialize": function() {},
        "toJSON": function(e) {
            return this.map(function(t) {
                return t.toJSON(e);
            });
        },
        "sync": function() {
            return t.sync.apply(this, arguments);
        },
        "add": function(e, t) {
            return this.set(e, i.extend({
                "merge": !1
            }, t, g));
        },
        "remove": function(e, t) {
            var n = !i.isArray(e);
            e = n ? [ e ] : i.clone(e), t || (t = {});
            var s, r, o, a;
            for (s = 0, r = e.length; s < r; s++) (a = e[s] = this.get(e[s])) && (delete this._byId[a.id], 
            delete this._byId[a.cid], o = this.indexOf(a), this.models.splice(o, 1), this.length--, 
            t.silent || (t.index = o, a.trigger("remove", a, this, t)), this._removeReference(a, t));
            return n ? e[0] : e;
        },
        "set": function(e, t) {
            (t = i.defaults({}, t, m)).parse && (e = this.parse(e, t));
            var n = !i.isArray(e);
            e = n ? e ? [ e ] : [] : i.clone(e);
            var s, r, o, a, l, h, c, u = t.at, d = this.model, f = this.comparator && null == u && !1 !== t.sort, g = i.isString(this.comparator) ? this.comparator : null, y = [], v = [], L = {}, w = t.add, b = t.merge, C = t.remove, O = !(f || !w || !C) && [];
            for (s = 0, r = e.length; s < r; s++) {
                if (l = e[s] || {}, o = l instanceof p ? a = l : l[d.prototype.idAttribute || "id"], 
                h = this.get(o)) C && (L[h.cid] = !0), b && (l = l === a ? a.attributes : l, t.parse && (l = h.parse(l, t)), 
                h.set(l, t), f && !c && h.hasChanged(g) && (c = !0)), e[s] = h; else if (w) {
                    if (!(a = e[s] = this._prepareModel(l, t))) continue;
                    y.push(a), this._addReference(a, t);
                }
                a = h || a, !O || !a.isNew() && L[a.id] || O.push(a), L[a.id] = !0;
            }
            if (C) {
                for (s = 0, r = this.length; s < r; ++s) L[(a = this.models[s]).cid] || v.push(a);
                v.length && this.remove(v, t);
            }
            if (y.length || O && O.length) if (f && (c = !0), this.length += y.length, null != u) for (s = 0, 
            r = y.length; s < r; s++) this.models.splice(u + s, 0, y[s]); else {
                O && (this.models.length = 0);
                var S = O || y;
                for (s = 0, r = S.length; s < r; s++) this.models.push(S[s]);
            }
            if (c && this.sort({
                "silent": !0
            }), !t.silent) {
                for (s = 0, r = y.length; s < r; s++) (a = y[s]).trigger("add", a, this, t);
                (c || O && O.length) && this.trigger("sort", this, t);
            }
            return n ? e[0] : e;
        },
        "reset": function(e, t) {
            t || (t = {});
            for (var n = 0, s = this.models.length; n < s; n++) this._removeReference(this.models[n], t);
            return t.previousModels = this.models, this._reset(), e = this.add(e, i.extend({
                "silent": !0
            }, t)), t.silent || this.trigger("reset", this, t), e;
        },
        "push": function(e, t) {
            return this.add(e, i.extend({
                "at": this.length
            }, t));
        },
        "pop": function(e) {
            var t = this.at(this.length - 1);
            return this.remove(t, e), t;
        },
        "unshift": function(e, t) {
            return this.add(e, i.extend({
                "at": 0
            }, t));
        },
        "shift": function(e) {
            var t = this.at(0);
            return this.remove(t, e), t;
        },
        "slice": function() {
            return o.apply(this.models, arguments);
        },
        "get": function(e) {
            if (null != e) return this._byId[e] || this._byId[e.id] || this._byId[e.cid];
        },
        "at": function(e) {
            return this.models[e];
        },
        "where": function(e, t) {
            return i.isEmpty(e) ? t ? void 0 : [] : this[t ? "find" : "filter"](function(t) {
                for (var i in e) if (e[i] !== t.get(i)) return !1;
                return !0;
            });
        },
        "findWhere": function(e) {
            return this.where(e, !0);
        },
        "sort": function(e) {
            if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
            return e || (e = {}), i.isString(this.comparator) || 1 === this.comparator.length ? this.models = this.sortBy(this.comparator, this) : this.models.sort(i.bind(this.comparator, this)), 
            e.silent || this.trigger("sort", this, e), this;
        },
        "pluck": function(e) {
            return i.invoke(this.models, "get", e);
        },
        "fetch": function(e) {
            void 0 === (e = e ? i.clone(e) : {}).parse && (e.parse = !0);
            var t = e.success, n = this;
            return e.success = function(i) {
                var s = e.reset ? "reset" : "set";
                n[s](i, e), t && t(n, i, e), n.trigger("sync", n, i, e);
            }, R(this, e), this.sync("read", this, e);
        },
        "create": function(e, t) {
            if (t = t ? i.clone(t) : {}, !(e = this._prepareModel(e, t))) return !1;
            t.wait || this.add(e, t);
            var n = this, s = t.success;
            return t.success = function(e, i) {
                t.wait && n.add(e, t), s && s(e, i, t);
            }, e.save(null, t), e;
        },
        "parse": function(e, t) {
            return e;
        },
        "clone": function() {
            return new this.constructor(this.models);
        },
        "_reset": function() {
            this.length = 0, this.models = [], this._byId = {};
        },
        "_prepareModel": function(e, t) {
            if (e instanceof p) return e;
            (t = t ? i.clone(t) : {}).collection = this;
            var n = new this.model(e, t);
            return n.validationError ? (this.trigger("invalid", this, n.validationError, t), 
            !1) : n;
        },
        "_addReference": function(e, t) {
            this._byId[e.cid] = e, null != e.id && (this._byId[e.id] = e), e.collection || (e.collection = this), 
            e.on("all", this._onModelEvent, this);
        },
        "_removeReference": function(e, t) {
            this === e.collection && delete e.collection, e.off("all", this._onModelEvent, this);
        },
        "_onModelEvent": function(e, t, i, n) {
            ("add" !== e && "remove" !== e || i === this) && ("destroy" === e && this.remove(t, n), 
            t && e === "change:" + t.idAttribute && (delete this._byId[t.previous(t.idAttribute)], 
            null != t.id && (this._byId[t.id] = t)), this.trigger.apply(this, arguments));
        }
    });
    var y = [ "forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "difference", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain", "sample" ];
    i.each(y, function(e) {
        f.prototype[e] = function() {
            var t = o.call(arguments);
            return t.unshift(this.models), i[e].apply(i, t);
        };
    });
    var v = [ "groupBy", "countBy", "sortBy", "indexBy" ];
    i.each(v, function(e) {
        f.prototype[e] = function(t, n) {
            var s = i.isFunction(t) ? t : function(e) {
                return e.get(t);
            };
            return i[e](this.models, s, n);
        };
    });
    var L = t.View = function(e) {
        this.cid = i.uniqueId("view"), e || (e = {}), i.extend(this, i.pick(e, b)), this._ensureElement(), 
        this.initialize.apply(this, arguments), this.delegateEvents();
    }, w = /^(\S+)\s*(.*)$/, b = [ "model", "collection", "el", "id", "attributes", "className", "tagName", "events" ];
    i.extend(L.prototype, a, {
        "tagName": "div",
        "$": function(e) {
            return this.$el.find(e);
        },
        "initialize": function() {},
        "render": function() {
            return this;
        },
        "remove": function() {
            return this.$el.remove(), this.stopListening(), this;
        },
        "setElement": function(e, i) {
            return this.$el && this.undelegateEvents(), this.$el = e instanceof t.$ ? e : t.$(e), 
            this.el = this.$el[0], !1 !== i && this.delegateEvents(), this;
        },
        "delegateEvents": function(e) {
            if (!e && !(e = i.result(this, "events"))) return this;
            this.undelegateEvents();
            for (var t in e) {
                var n = e[t];
                if (i.isFunction(n) || (n = this[e[t]]), n) {
                    var s = t.match(w), r = s[1], o = s[2];
                    n = i.bind(n, this), r += ".delegateEvents" + this.cid, "" === o ? this.$el.on(r, n) : this.$el.on(r, o, n);
                }
            }
            return this;
        },
        "undelegateEvents": function() {
            return this.$el.off(".delegateEvents" + this.cid), this;
        },
        "_ensureElement": function() {
            if (this.el) this.setElement(i.result(this, "el"), !1); else {
                var e = i.extend({}, i.result(this, "attributes"));
                this.id && (e.id = i.result(this, "id")), this.className && (e.class = i.result(this, "className"));
                var n = t.$("<" + i.result(this, "tagName") + ">").attr(e);
                this.setElement(n, !1);
            }
        }
    }), t.sync = function(e, n, s) {
        var r = O[e];
        i.defaults(s || (s = {}), {
            "emulateHTTP": t.emulateHTTP,
            "emulateJSON": t.emulateJSON
        });
        var o = {
            "type": r,
            "dataType": "json"
        };
        if (s.url || (o.url = i.result(n, "url") || P()), null != s.data || !n || "create" !== e && "update" !== e && "patch" !== e || (o.contentType = "application/json", 
        o.data = JSON.stringify(s.attrs || n.toJSON(s))), s.emulateJSON && (o.contentType = "application/x-www-form-urlencoded", 
        o.data = o.data ? {
            "model": o.data
        } : {}), s.emulateHTTP && ("PUT" === r || "DELETE" === r || "PATCH" === r)) {
            o.type = "POST", s.emulateJSON && (o.data._method = r);
            var a = s.beforeSend;
            s.beforeSend = function(e) {
                if (e.setRequestHeader("X-HTTP-Method-Override", r), a) return a.apply(this, arguments);
            };
        }
        "GET" === o.type || s.emulateJSON || (o.processData = !1), "PATCH" === o.type && C && (o.xhr = function() {
            return new ActiveXObject("Microsoft.XMLHTTP");
        });
        var l = s.xhr = t.ajax(i.extend(o, s));
        return n.trigger("request", n, l, s), l;
    };
    var C = !("undefined" == typeof window || !window.ActiveXObject || window.XMLHttpRequest && new XMLHttpRequest().dispatchEvent), O = {
        "create": "POST",
        "update": "PUT",
        "patch": "PATCH",
        "delete": "DELETE",
        "read": "GET"
    };
    t.ajax = function() {
        return t.$.ajax.apply(t.$, arguments);
    };
    var S = t.Router = function(e) {
        e || (e = {}), e.routes && (this.routes = e.routes), this._bindRoutes(), this.initialize.apply(this, arguments);
    }, x = /\((.*?)\)/g, E = /(\(\?)?:\w+/g, A = /\*\w+/g, _ = /[\-{}\[\]+?.,\\\^$|#\s]/g;
    i.extend(S.prototype, a, {
        "initialize": function() {},
        "route": function(e, n, s) {
            i.isRegExp(e) || (e = this._routeToRegExp(e)), i.isFunction(n) && (s = n, n = ""), 
            s || (s = this[n]);
            var r = this;
            return t.history.route(e, function(i) {
                var o = r._extractParameters(e, i);
                r.execute(s, o), r.trigger.apply(r, [ "route:" + n ].concat(o)), r.trigger("route", n, o), 
                t.history.trigger("route", r, n, o);
            }), this;
        },
        "execute": function(e, t) {
            e && e.apply(this, t);
        },
        "navigate": function(e, i) {
            return t.history.navigate(e, i), this;
        },
        "_bindRoutes": function() {
            if (this.routes) {
                this.routes = i.result(this, "routes");
                for (var e, t = i.keys(this.routes); null != (e = t.pop()); ) this.route(e, this.routes[e]);
            }
        },
        "_routeToRegExp": function(e) {
            return e = e.replace(_, "\\$&").replace(x, "(?:$1)?").replace(E, function(e, t) {
                return t ? e : "([^/?]+)";
            }).replace(A, "([^?]*?)"), new RegExp("^" + e + "(?:\\?([\\s\\S]*))?$");
        },
        "_extractParameters": function(e, t) {
            var n = e.exec(t).slice(1);
            return i.map(n, function(e, t) {
                return t === n.length - 1 ? e || null : e ? decodeURIComponent(e) : null;
            });
        }
    });
    var F = t.History = function() {
        this.handlers = [], i.bindAll(this, "checkUrl"), "undefined" != typeof window && (this.location = window.location, 
        this.history = window.history);
    }, N = /^[#\/]|\s+$/g, T = /^\/+|\/+$/g, M = /msie [\w.]+/, k = /\/$/, D = /#.*$/;
    F.started = !1, i.extend(F.prototype, a, {
        "interval": 50,
        "atRoot": function() {
            return this.location.pathname.replace(/[^\/]$/, "$&/") === this.root;
        },
        "getHash": function(e) {
            var t = (e || this).location.href.match(/#(.*)$/);
            return t ? t[1] : "";
        },
        "getFragment": function(e, t) {
            if (null == e) if (this._hasPushState || !this._wantsHashChange || t) {
                e = decodeURI(this.location.pathname + this.location.search);
                var i = this.root.replace(k, "");
                e.indexOf(i) || (e = e.slice(i.length));
            } else e = this.getHash();
            return e.replace(N, "");
        },
        "start": function(e) {
            if (F.started) throw new Error("Backbone.history has already been started");
            F.started = !0, this.options = i.extend({
                "root": "/"
            }, this.options, e), this.root = this.options.root, this._wantsHashChange = !1 !== this.options.hashChange, 
            this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
            var n = this.getFragment(), s = document.documentMode, r = M.exec(navigator.userAgent.toLowerCase()) && (!s || s <= 7);
            if (this.root = ("/" + this.root + "/").replace(T, "/"), r && this._wantsHashChange) {
                var o = t.$('<iframe src="javascript:0" tabindex="-1">');
                this.iframe = o.hide().appendTo("body")[0].contentWindow, this.navigate(n);
            }
            this._hasPushState ? t.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !r ? t.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), 
            this.fragment = n;
            var a = this.location;
            if (this._wantsHashChange && this._wantsPushState) {
                if (!this._hasPushState && !this.atRoot()) return this.fragment = this.getFragment(null, !0), 
                this.location.replace(this.root + "#" + this.fragment), !0;
                this._hasPushState && this.atRoot() && a.hash && (this.fragment = this.getHash().replace(N, ""), 
                this.history.replaceState({}, document.title, this.root + this.fragment));
            }
            if (!this.options.silent) return this.loadUrl();
        },
        "stop": function() {
            t.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl), this._checkUrlInterval && clearInterval(this._checkUrlInterval), 
            F.started = !1;
        },
        "route": function(e, t) {
            this.handlers.unshift({
                "route": e,
                "callback": t
            });
        },
        "checkUrl": function(e) {
            var t = this.getFragment();
            if (t === this.fragment && this.iframe && (t = this.getFragment(this.getHash(this.iframe))), 
            t === this.fragment) return !1;
            this.iframe && this.navigate(t), this.loadUrl();
        },
        "loadUrl": function(e) {
            return e = this.fragment = this.getFragment(e), i.any(this.handlers, function(t) {
                if (t.route.test(e)) return t.callback(e), !0;
            });
        },
        "navigate": function(e, t) {
            if (!F.started) return !1;
            t && !0 !== t || (t = {
                "trigger": !!t
            });
            var i = this.root + (e = this.getFragment(e || ""));
            if (e = e.replace(D, ""), this.fragment !== e) {
                if (this.fragment = e, "" === e && "/" !== i && (i = i.slice(0, -1)), this._hasPushState) this.history[t.replace ? "replaceState" : "pushState"]({}, document.title, i); else {
                    if (!this._wantsHashChange) return this.location.assign(i);
                    this._updateHash(this.location, e, t.replace), this.iframe && e !== this.getFragment(this.getHash(this.iframe)) && (t.replace || this.iframe.document.open().close(), 
                    this._updateHash(this.iframe.location, e, t.replace));
                }
                return t.trigger ? this.loadUrl(e) : void 0;
            }
        },
        "_updateHash": function(e, t, i) {
            if (i) {
                var n = e.href.replace(/(javascript:|#).*$/, "");
                e.replace(n + "#" + t);
            } else e.hash = "#" + t;
        }
    }), t.history = new F();
    p.extend = f.extend = S.extend = L.extend = F.extend = function(e, t) {
        var n, s = this;
        n = e && i.has(e, "constructor") ? e.constructor : function() {
            return s.apply(this, arguments);
        }, i.extend(n, s, t);
        var r = function() {
            this.constructor = n;
        };
        return r.prototype = s.prototype, n.prototype = new r(), e && i.extend(n.prototype, e), 
        n.__super__ = s.prototype, n;
    };
    var P = function() {
        throw new Error('A "url" property or function must be specified');
    }, R = function(e, t) {
        var i = t.error;
        t.error = function(n) {
            i && i(e, n, t), e.trigger("error", e, n, t);
        };
    };
    return t;
}), function(e, t, i) {
    "use strict";
    "object" == typeof exports ? module.exports = t(require("underscore"), require("backbone")) : "function" == typeof define && define.amd ? define([ "underscore", "backbone" ], function(i, n) {
        return i = void 0 === i ? e._ : i, n = void 0 === n ? e.Backbone : n, e.returnExportsGlobal = t(i, n, e);
    }) : e.returnExportsGlobal = t(e._, e.Backbone);
}(this, function(e, t, i, n) {
    "use strict";
    t = t === n ? i.Backbone : t, e = e === n ? i._ : e;
    var s = function() {}, r = t.Model.prototype.get, o = t.Model.prototype.set, a = t.Model.prototype.toJSON;
    return s.prototype.mutators = {}, s.prototype.get = function(t) {
        var i = this.mutators !== n;
        return !0 === i && !0 === e.isFunction(this.mutators[t]) ? this.mutators[t].call(this) : !0 === i && !0 === e.isObject(this.mutators[t]) && !0 === e.isFunction(this.mutators[t].get) ? this.mutators[t].get.call(this) : r.call(this, t);
    }, s.prototype.set = function(t, i, s) {
        var r = this.mutators !== n, a = null, l = null;
        return a = o.call(this, t, i, s), e.isObject(t) || null === t ? (l = t, s = i) : (l = {})[t] = i, 
        !0 !== r || e.isObject(t) || !0 !== e.isObject(this.mutators[t]) || (!0 === e.isFunction(this.mutators[t].set) ? a = this.mutators[t].set.call(this, t, l[t], s, e.bind(o, this)) : e.isFunction(this.mutators[t]) && (a = this.mutators[t].call(this, t, l[t], s, e.bind(o, this)))), 
        !0 === r && e.isObject(l) && e.each(l, e.bind(function(t, i) {
            if (!0 === e.isObject(this.mutators[i])) {
                var r = this.mutators[i];
                e.isFunction(r.set) && (r = r.set), e.isFunction(r) && ((s === n || !0 === e.isObject(s) && !0 !== s.silent && s.mutators !== n && !0 !== s.mutators.silent) && this.trigger("mutators:set:" + i), 
                r.call(this, i, t, s, e.bind(o, this)));
            }
        }, this)), a;
    }, s.prototype.toJSON = function(t) {
        var i, n, s = a.call(this);
        return e.each(this.mutators, e.bind(function(r, o) {
            !0 === e.isObject(this.mutators[o]) && e.isFunction(this.mutators[o].get) ? (i = this.isSaving ? this.isSaving(t, r, o) : e.has(t || {}, "emulateHTTP"), 
            n = this.mutators[o].transient, i && n || (s[o] = e.bind(this.mutators[o].get, this)())) : e.isFunction(this.mutators[o]) && (s[o] = e.bind(this.mutators[o], this)());
        }, this)), s;
    }, s.prototype.escape = function(t) {
        var i = this.get(t);
        return e.escape(null == i ? "" : "" + i);
    }, e.extend(t.Model.prototype, s.prototype), t.Mutators = s, s;
}), function(e) {
    "use strict";
    var t = "object" == typeof module && "object" == typeof exports, i = t ? {
        "_": require("underscore"),
        "Backbone": require("backbone"),
        "Globalize": require("globalize")
    } : window;
    (t ? exports : Backbone).Schema = e(i);
}(function(e) {
    "use strict";
    var t = e._, i = e.Backbone, n = e.Globalize, s = i.Schema = function(e) {
        if (!(this instanceof s)) return new s(e);
        this.model = e, this.attributes = {}, e.schema = this, t.extend(e, {
            "toJSON": t.wrap(e.toJSON, function(e, n) {
                var s = e.call(this, n);
                return t.each(s, function(e, s, r) {
                    e instanceof i.Model ? e = e.source ? e.id : e.toJSON(n) : e instanceof i.Collection && (e = e.source ? t.pluck(e.models, "id") : e.toJSON(n)), 
                    r[s] = e;
                }), s;
            }),
            "get": t.wrap(e.get, function(e, t) {
                var i = this.schema.attributes[t], n = i && i.getter, s = e.call(this, t);
                return n ? n(t, s) : s;
            }),
            "set": t.wrap(e.set, function(e, i, n, s) {
                var r;
                !i || t.isObject(i) ? (r = i, s = n) : (r = {})[i] = n;
                var o = {};
                return t.each(r, function(e, i, n) {
                    var s = this.schema.attributes[i], r = s && s.setter, a = r ? r(i, e) : t.pick(n, i);
                    t.each(a, function(e, t) {
                        o[t] = e;
                    });
                }, this), e.call(this, o, s);
            })
        });
    };
    return t.extend(s, {
        "extend": i.Model.extend
    }, {
        "handlers": {
            "string": {
                "getter": function(e, t) {
                    return t;
                },
                "setter": function(e, i) {
                    return t.isString(i) ? i : String(i);
                }
            },
            "boolean": {
                "getter": function(e, t) {
                    return t;
                },
                "setter": function(e, i) {
                    return t.isBoolean(i) ? i : Boolean(i);
                }
            },
            "number": {
                "getter": function(e, t, i) {
                    var s = i.culture, r = i.format;
                    return r ? n.format(t, r, s) : t;
                },
                "setter": function(e, i, s) {
                    var r = s.culture, o = Number(i);
                    return isNaN(o) && (o = t.isString(i) ? i : String(i)), t.isNumber(o) ? o : n.parseFloat(o, r) || "NaN";
                }
            },
            "datetime": {
                "getter": function(e, i, s) {
                    var r = s.culture, o = s.format;
                    return t.isDate(i) || (i = new Date(i)), o ? n.format(i, o, r) : i;
                },
                "setter": function(e, t, i) {
                    var s = i.culture, r = i.format, o = i.standard;
                    t = r ? n.parseDate(t, r, s) || new Date(t) : new Date(t);
                    var a;
                    switch (o) {
                      case "iso":
                        a = t.toJSON() ? t.toISOString() : t.toString();
                        break;

                      case "unix":
                        a = t.getTime();
                        break;

                      default:
                        a = t;
                    }
                    return a;
                }
            },
            "locale": {
                "getter": function(e, t, i) {
                    var s = i.culture;
                    return n.localize(t, s) || t;
                },
                "setter": function(e, i, s) {
                    var r, o = s.culture, a = n.findClosestCulture(o).messages;
                    return t.find(a, function(e, t) {
                        return e === i && (r = t);
                    }), r || String(i);
                }
            },
            "model": {
                "getter": function(e, t) {
                    return t;
                },
                "setter": function(e, n, s) {
                    var r, o = (s = t.clone(s)).source, a = s.clear;
                    r = s.model || o.model;
                    var l, h = this.model.get(e);
                    return (l = n instanceof i.Model ? n === h ? n : t.clone(n.attributes) : o ? o.get(n) : n) instanceof r ? h = l : h instanceof r ? a ? h.clear().set(l, s) : h.set(l, s) : h = new r(l, s), 
                    h.source = o || null, h;
                }
            },
            "collection": {
                "getter": function(e, t) {
                    return t;
                },
                "setter": function(e, n, s) {
                    var r, o = (s = t.clone(s)).source, a = s.reset;
                    r = s.collection || o.constructor;
                    var l, h = this.model.get(e);
                    return (l = n instanceof i.Collection ? n === h ? n : t.clone(n.models) : o ? o.filter(function(e) {
                        return t.contains(n, e.id);
                    }) : n) instanceof r ? h = l : h instanceof r ? a ? h.reset(l, s) : h.set(l, s) : h = new r(l, s), 
                    h.source = o || null, h;
                }
            }
        }
    }), t.extend(s.prototype, {
        "constructor": s
    }, {
        "define": function(e, i) {
            var n;
            return !e || t.isObject(e) ? n = e : (n = {})[e] = i, t.each(n, function(e, t) {
                e = e || {}, this._addAttribute(t, e);
            }, this), this.refresh(), this;
        },
        "refresh": function() {
            var e = this.attributes, i = {};
            return t.each(e, function(e, t) {
                i[t] = this.model.attributes[t];
            }, this), this.model.set(i), this;
        },
        "defaultValue": function(e) {
            var i = t.result(this.model, "defaults");
            return i && t.has(i, e) ? i[e] : null;
        },
        "_addAttribute": function(e, i) {
            var n = i.type, s = i.array, r = i.model, o = i.collection;
            n || (s ? n = s : r ? n = "model" : o && (n = "collection"));
            var a = this.constructor.handlers[n], l = a && a.getter, h = a && a.setter;
            return this.attributes[e] = t.defaults(i, {
                "getter": t.wrap(l, function(e, n, r) {
                    var o = [], a = s ? r : [ r ];
                    return t.each(a, function(s) {
                        var r;
                        r = t.isNull(s) ? s : e ? e.call(this, n, s, i) : s, o.push(r);
                    }, this), s ? o : o[0];
                }),
                "setter": t.wrap(h, function(e, r, o) {
                    var a = [], l = s ? o : [ o ];
                    return t.each(l, function(s) {
                        t.isUndefined(s) && (s = this.defaultValue(r));
                        var o;
                        if (t.isNull(s)) switch (n) {
                          case "model":
                            o = e ? e.call(this, r, {}, i) : s;
                            break;

                          case "collection":
                            o = e ? e.call(this, r, [], i) : s;
                            break;

                          default:
                            o = s;
                        } else o = e ? e.call(this, r, s, i) : s;
                        a.push(o);
                    }, this), t.object([ r ], [ s ? a : a[0] ]);
                })
            }), this._bindHandlers(i), this;
        },
        "_bindHandlers": function(e) {
            var i = e.getter, n = e.setter;
            return i && (e.getter = t.bind(i, this)), n && (e.setter = t.bind(n, this)), this;
        }
    }), s;
});

var Marionette = function(e, t, i) {
    "use strict";
    function n(e, t) {
        var i = new Error(e);
        throw i.name = t || "Error", i;
    }
    !function(e, t) {
        var i = e.ChildViewContainer;
        e.ChildViewContainer = function(e, t) {
            var i = function(e) {
                this._views = {}, this._indexByModel = {}, this._indexByCustom = {}, this._updateLength(), 
                t.each(e, this.add, this);
            };
            t.extend(i.prototype, {
                "add": function(e, t) {
                    var i = e.cid;
                    return this._views[i] = e, e.model && (this._indexByModel[e.model.cid] = i), t && (this._indexByCustom[t] = i), 
                    this._updateLength(), this;
                },
                "findByModel": function(e) {
                    return this.findByModelCid(e.cid);
                },
                "findByModelCid": function(e) {
                    var t = this._indexByModel[e];
                    return this.findByCid(t);
                },
                "findByCustom": function(e) {
                    var t = this._indexByCustom[e];
                    return this.findByCid(t);
                },
                "findByIndex": function(e) {
                    return t.values(this._views)[e];
                },
                "findByCid": function(e) {
                    return this._views[e];
                },
                "remove": function(e) {
                    var i = e.cid;
                    return e.model && delete this._indexByModel[e.model.cid], t.any(this._indexByCustom, function(e, t) {
                        if (e === i) return delete this._indexByCustom[t], !0;
                    }, this), delete this._views[i], this._updateLength(), this;
                },
                "call": function(e) {
                    this.apply(e, t.tail(arguments));
                },
                "apply": function(e, i) {
                    t.each(this._views, function(n) {
                        t.isFunction(n[e]) && n[e].apply(n, i || []);
                    });
                },
                "_updateLength": function() {
                    this.length = t.size(this._views);
                }
            });
            var n = [ "forEach", "each", "map", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "toArray", "first", "initial", "rest", "last", "without", "isEmpty", "pluck" ];
            return t.each(n, function(e) {
                i.prototype[e] = function() {
                    var i = [ t.values(this._views) ].concat(t.toArray(arguments));
                    return t[e].apply(t, i);
                };
            }), i;
        }(0, t), e.ChildViewContainer.VERSION = "0.1.4", e.ChildViewContainer.noConflict = function() {
            return e.ChildViewContainer = i, this;
        }, e.ChildViewContainer;
    }(t, i), function(e, t) {
        var i = e.Wreqr, n = e.Wreqr = {};
        e.Wreqr.VERSION = "1.3.1", e.Wreqr.noConflict = function() {
            return e.Wreqr = i, this;
        }, n.Handlers = function(e, t) {
            var i = function(e) {
                this.options = e, this._wreqrHandlers = {}, t.isFunction(this.initialize) && this.initialize(e);
            };
            return i.extend = e.Model.extend, t.extend(i.prototype, e.Events, {
                "setHandlers": function(e) {
                    t.each(e, function(e, i) {
                        var n = null;
                        t.isObject(e) && !t.isFunction(e) && (n = e.context, e = e.callback), this.setHandler(i, e, n);
                    }, this);
                },
                "setHandler": function(e, t, i) {
                    var n = {
                        "callback": t,
                        "context": i
                    };
                    this._wreqrHandlers[e] = n, this.trigger("handler:add", e, t, i);
                },
                "hasHandler": function(e) {
                    return !!this._wreqrHandlers[e];
                },
                "getHandler": function(e) {
                    var t = this._wreqrHandlers[e];
                    if (t) return function() {
                        var e = Array.prototype.slice.apply(arguments);
                        return t.callback.apply(t.context, e);
                    };
                },
                "removeHandler": function(e) {
                    delete this._wreqrHandlers[e];
                },
                "removeAllHandlers": function() {
                    this._wreqrHandlers = {};
                }
            }), i;
        }(e, t), n.CommandStorage = function() {
            var i = function(e) {
                this.options = e, this._commands = {}, t.isFunction(this.initialize) && this.initialize(e);
            };
            return t.extend(i.prototype, e.Events, {
                "getCommands": function(e) {
                    var t = this._commands[e];
                    return t || (t = {
                        "command": e,
                        "instances": []
                    }, this._commands[e] = t), t;
                },
                "addCommand": function(e, t) {
                    this.getCommands(e).instances.push(t);
                },
                "clearCommands": function(e) {
                    this.getCommands(e).instances = [];
                }
            }), i;
        }(), n.Commands = function(e) {
            return e.Handlers.extend({
                "storageType": e.CommandStorage,
                "constructor": function(t) {
                    this.options = t || {}, this._initializeStorage(this.options), this.on("handler:add", this._executeCommands, this);
                    var i = Array.prototype.slice.call(arguments);
                    e.Handlers.prototype.constructor.apply(this, i);
                },
                "execute": function(e, t) {
                    e = arguments[0], t = Array.prototype.slice.call(arguments, 1), this.hasHandler(e) ? this.getHandler(e).apply(this, t) : this.storage.addCommand(e, t);
                },
                "_executeCommands": function(e, i, n) {
                    var s = this.storage.getCommands(e);
                    t.each(s.instances, function(e) {
                        i.apply(n, e);
                    }), this.storage.clearCommands(e);
                },
                "_initializeStorage": function(e) {
                    var i, n = e.storageType || this.storageType;
                    i = t.isFunction(n) ? new n() : n, this.storage = i;
                }
            });
        }(n), n.RequestResponse = function(e) {
            return e.Handlers.extend({
                "request": function() {
                    var e = arguments[0], t = Array.prototype.slice.call(arguments, 1);
                    if (this.hasHandler(e)) return this.getHandler(e).apply(this, t);
                }
            });
        }(n), n.EventAggregator = function(e, t) {
            var i = function() {};
            return i.extend = e.Model.extend, t.extend(i.prototype, e.Events), i;
        }(e, t), n.Channel = function(i) {
            var n = function(t) {
                this.vent = new e.Wreqr.EventAggregator(), this.reqres = new e.Wreqr.RequestResponse(), 
                this.commands = new e.Wreqr.Commands(), this.channelName = t;
            };
            return t.extend(n.prototype, {
                "reset": function() {
                    return this.vent.off(), this.vent.stopListening(), this.reqres.removeAllHandlers(), 
                    this.commands.removeAllHandlers(), this;
                },
                "connectEvents": function(e, t) {
                    return this._connect("vent", e, t), this;
                },
                "connectCommands": function(e, t) {
                    return this._connect("commands", e, t), this;
                },
                "connectRequests": function(e, t) {
                    return this._connect("reqres", e, t), this;
                },
                "_connect": function(e, i, n) {
                    if (i) {
                        n = n || this;
                        var s = "vent" === e ? "on" : "setHandler";
                        t.each(i, function(i, r) {
                            this[e][s](r, t.bind(i, n));
                        }, this);
                    }
                }
            }), n;
        }(), n.radio = function(e) {
            var i = function() {
                this._channels = {}, this.vent = {}, this.commands = {}, this.reqres = {}, this._proxyMethods();
            };
            t.extend(i.prototype, {
                "channel": function(e) {
                    if (!e) throw new Error("Channel must receive a name");
                    return this._getChannel(e);
                },
                "_getChannel": function(t) {
                    var i = this._channels[t];
                    return i || (i = new e.Channel(t), this._channels[t] = i), i;
                },
                "_proxyMethods": function() {
                    t.each([ "vent", "commands", "reqres" ], function(e) {
                        t.each(n[e], function(t) {
                            this[e][t] = s(this, e, t);
                        }, this);
                    }, this);
                }
            });
            var n = {
                "vent": [ "on", "off", "trigger", "once", "stopListening", "listenTo", "listenToOnce" ],
                "commands": [ "execute", "setHandler", "setHandlers", "removeHandler", "removeAllHandlers" ],
                "reqres": [ "request", "setHandler", "setHandlers", "removeHandler", "removeAllHandlers" ]
            }, s = function(e, t, i) {
                return function(n) {
                    var s = e._getChannel(n)[t], r = Array.prototype.slice.call(arguments, 1);
                    return s[i].apply(s, r);
                };
            };
            return new i();
        }(n), e.Wreqr;
    }(t, i);
    var s = {};
    t.Marionette = s, s.$ = t.$;
    var r = Array.prototype.slice;
    return s.extend = t.Model.extend, s.getOption = function(e, t) {
        if (e && t) {
            return e.options && t in e.options && void 0 !== e.options[t] ? e.options[t] : e[t];
        }
    }, s.normalizeMethods = function(e) {
        var t, n = {};
        return i.each(e, function(e, s) {
            t = e, i.isFunction(t) || (t = this[t]), t && (n[s] = t);
        }, this), n;
    }, s.normalizeUIKeys = function(e, t) {
        if (void 0 !== e) return i.each(i.keys(e), function(i) {
            var n = /@ui.[a-zA-Z_$0-9]*/g;
            i.match(n) && (e[i.replace(n, function(e) {
                return t[e.slice(4)];
            })] = e[i], delete e[i]);
        }), e;
    }, s.actAsCollection = function(e, t) {
        var n = [ "forEach", "each", "map", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "toArray", "first", "initial", "rest", "last", "without", "isEmpty", "pluck" ];
        i.each(n, function(n) {
            e[n] = function() {
                var e = [ i.values(i.result(this, t)) ].concat(i.toArray(arguments));
                return i[n].apply(i, e);
            };
        });
    }, s.triggerMethod = function() {
        function e(e, t, i) {
            return i.toUpperCase();
        }
        var t = /(^|:)(\w)/gi;
        return function(n) {
            var s = this["on" + n.replace(t, e)];
            if (i.isFunction(this.trigger) && this.trigger.apply(this, arguments), i.isFunction(s)) return s.apply(this, i.tail(arguments));
        };
    }(), s.MonitorDOMRefresh = function(e) {
        function t(e) {
            e._isShown = !0, s(e);
        }
        function n(e) {
            e._isRendered = !0, s(e);
        }
        function s(e) {
            e._isShown && e._isRendered && r(e) && i.isFunction(e.triggerMethod) && e.triggerMethod("dom:refresh");
        }
        function r(t) {
            return e.contains(t.el);
        }
        return function(e) {
            e.listenTo(e, "show", function() {
                t(e);
            }), e.listenTo(e, "render", function() {
                n(e);
            });
        };
    }(document.documentElement), function(e) {
        function t(e, t, s, r) {
            var o = r.split(/\s+/);
            i.each(o, function(i) {
                var r = e[i];
                r || n("Method '" + i + "' was configured as an event handler, but does not exist."), 
                e.listenTo(t, s, r);
            });
        }
        function s(e, t, i, n) {
            e.listenTo(t, i, n);
        }
        function r(e, t, n, s) {
            var r = s.split(/\s+/);
            i.each(r, function(i) {
                var s = e[i];
                e.stopListening(t, n, s);
            });
        }
        function o(e, t, i, n) {
            e.stopListening(t, i, n);
        }
        function a(e, t, n, s, r) {
            t && n && (i.isFunction(n) && (n = n.call(e)), i.each(n, function(n, o) {
                i.isFunction(n) ? s(e, t, o, n) : r(e, t, o, n);
            }));
        }
        e.bindEntityEvents = function(e, i, n) {
            a(e, i, n, s, t);
        }, e.unbindEntityEvents = function(e, t, i) {
            a(e, t, i, o, r);
        };
    }(s), s.Callbacks = function() {
        this._deferred = s.$.Deferred(), this._callbacks = [];
    }, i.extend(s.Callbacks.prototype, {
        "add": function(e, t) {
            this._callbacks.push({
                "cb": e,
                "ctx": t
            }), this._deferred.done(function(i, n) {
                t && (i = t), e.call(i, n);
            });
        },
        "run": function(e, t) {
            this._deferred.resolve(t, e);
        },
        "reset": function() {
            var e = this._callbacks;
            this._deferred = s.$.Deferred(), this._callbacks = [], i.each(e, function(e) {
                this.add(e.cb, e.ctx);
            }, this);
        }
    }), s.Controller = function(e) {
        this.triggerMethod = s.triggerMethod, this.options = e || {}, i.isFunction(this.initialize) && this.initialize(this.options);
    }, s.Controller.extend = s.extend, i.extend(s.Controller.prototype, t.Events, {
        "close": function() {
            this.stopListening();
            var e = Array.prototype.slice.call(arguments);
            this.triggerMethod.apply(this, [ "close" ].concat(e)), this.off();
        }
    }), s.Region = function(e) {
        if (this.options = e || {}, this.el = s.getOption(this, "el"), this.el || n("An 'el' must be specified for a region.", "NoElError"), 
        this.initialize) {
            var t = Array.prototype.slice.apply(arguments);
            this.initialize.apply(this, t);
        }
    }, i.extend(s.Region, {
        "buildRegion": function(e, t) {
            var s = i.isString(e), r = i.isString(e.selector), o = i.isUndefined(e.regionType), a = i.isFunction(e);
            a || s || r || n("Region must be specified as a Region type, a selector string or an object with selector property");
            var l, h;
            s && (l = e), e.selector && (l = e.selector, delete e.selector), a && (h = e), !a && o && (h = t), 
            e.regionType && (h = e.regionType, delete e.regionType), (s || a) && (e = {}), e.el = l;
            var c = new h(e);
            return e.parentEl && (c.getEl = function(t) {
                var n = e.parentEl;
                return i.isFunction(n) && (n = n()), n.find(t);
            }), c;
        }
    }), i.extend(s.Region.prototype, t.Events, {
        "show": function(e, t) {
            this.ensureEl();
            var n = t || {}, r = e.isClosed || i.isUndefined(e.$el), o = e !== this.currentView;
            return !!!n.preventClose && o && this.close(), e.render(), s.triggerMethod.call(this, "before:show", e), 
            i.isFunction(e.triggerMethod) ? e.triggerMethod("before:show") : s.triggerMethod.call(e, "before:show"), 
            (o || r) && this.open(e), this.currentView = e, s.triggerMethod.call(this, "show", e), 
            i.isFunction(e.triggerMethod) ? e.triggerMethod("show") : s.triggerMethod.call(e, "show"), 
            this;
        },
        "ensureEl": function() {
            this.$el && 0 !== this.$el.length || (this.$el = this.getEl(this.el));
        },
        "getEl": function(e) {
            return s.$(e);
        },
        "open": function(e) {
            this.$el.empty().append(e.el);
        },
        "close": function() {
            var e = this.currentView;
            e && !e.isClosed && (e.close ? e.close() : e.remove && e.remove(), s.triggerMethod.call(this, "close", e), 
            delete this.currentView);
        },
        "attachView": function(e) {
            this.currentView = e;
        },
        "reset": function() {
            this.close(), delete this.$el;
        }
    }), s.Region.extend = s.extend, s.RegionManager = function(e) {
        var t = e.Controller.extend({
            "constructor": function(t) {
                this._regions = {}, e.Controller.prototype.constructor.call(this, t);
            },
            "addRegions": function(e, t) {
                var n = {};
                return i.each(e, function(e, s) {
                    i.isString(e) && (e = {
                        "selector": e
                    }), e.selector && (e = i.defaults({}, e, t));
                    var r = this.addRegion(s, e);
                    n[s] = r;
                }, this), n;
            },
            "addRegion": function(t, n) {
                var s, r = i.isObject(n), o = i.isString(n), a = !!n.selector;
                return s = o || r && a ? e.Region.buildRegion(n, e.Region) : i.isFunction(n) ? e.Region.buildRegion(n, e.Region) : n, 
                this._store(t, s), this.triggerMethod("region:add", t, s), s;
            },
            "get": function(e) {
                return this._regions[e];
            },
            "removeRegion": function(e) {
                var t = this._regions[e];
                this._remove(e, t);
            },
            "removeRegions": function() {
                i.each(this._regions, function(e, t) {
                    this._remove(t, e);
                }, this);
            },
            "closeRegions": function() {
                i.each(this._regions, function(e, t) {
                    e.close();
                }, this);
            },
            "close": function() {
                this.removeRegions(), e.Controller.prototype.close.apply(this, arguments);
            },
            "_store": function(e, t) {
                this._regions[e] = t, this._setLength();
            },
            "_remove": function(e, t) {
                t.close(), t.stopListening(), delete this._regions[e], this._setLength(), this.triggerMethod("region:remove", e, t);
            },
            "_setLength": function() {
                this.length = i.size(this._regions);
            }
        });
        return e.actAsCollection(t.prototype, "_regions"), t;
    }(s), s.TemplateCache = function(e) {
        this.templateId = e;
    }, i.extend(s.TemplateCache, {
        "templateCaches": {},
        "get": function(e) {
            var t = this.templateCaches[e];
            return t || (t = new s.TemplateCache(e), this.templateCaches[e] = t), t.load();
        },
        "clear": function() {
            var e, t = r.call(arguments), i = t.length;
            if (i > 0) for (e = 0; e < i; e++) delete this.templateCaches[t[e]]; else this.templateCaches = {};
        }
    }), i.extend(s.TemplateCache.prototype, {
        "load": function() {
            if (this.compiledTemplate) return this.compiledTemplate;
            var e = this.loadTemplate(this.templateId);
            return this.compiledTemplate = this.compileTemplate(e), this.compiledTemplate;
        },
        "loadTemplate": function(e) {
            var t = s.$(e).html();
            return t && 0 !== t.length || n("Could not find template: '" + e + "'", "NoTemplateError"), 
            t;
        },
        "compileTemplate": function(e) {
            return i.template(e);
        }
    }), s.Renderer = {
        "render": function(e, t) {
            e || n("Cannot render the template since it's false, null or undefined.", "TemplateNotFoundError");
            return ("function" == typeof e ? e : s.TemplateCache.get(e))(t);
        }
    }, s.View = t.View.extend({
        "constructor": function(e) {
            i.bindAll(this, "render"), this.options = i.extend({}, i.result(this, "options"), i.isFunction(e) ? e.call(this) : e), 
            this.events = this.normalizeUIKeys(i.result(this, "events")), i.isObject(this.behaviors) && new s.Behaviors(this), 
            t.View.prototype.constructor.apply(this, arguments), s.MonitorDOMRefresh(this), 
            this.listenTo(this, "show", this.onShowCalled);
        },
        "triggerMethod": s.triggerMethod,
        "normalizeMethods": s.normalizeMethods,
        "getTemplate": function() {
            return s.getOption(this, "template");
        },
        "mixinTemplateHelpers": function(e) {
            e = e || {};
            var t = s.getOption(this, "templateHelpers");
            return i.isFunction(t) && (t = t.call(this)), i.extend(e, t);
        },
        "normalizeUIKeys": function(e) {
            var t = i.result(this, "ui");
            return s.normalizeUIKeys(e, t);
        },
        "configureTriggers": function() {
            if (this.triggers) {
                var e = {}, t = this.normalizeUIKeys(i.result(this, "triggers"));
                return i.each(t, function(t, n) {
                    var s = i.isObject(t), r = s ? t.event : t;
                    e[n] = function(e) {
                        if (e) {
                            var i = e.preventDefault, n = e.stopPropagation, o = s ? t.preventDefault : i, a = s ? t.stopPropagation : n;
                            o && i && i.apply(e), a && n && n.apply(e);
                        }
                        var l = {
                            "view": this,
                            "model": this.model,
                            "collection": this.collection
                        };
                        this.triggerMethod(r, l);
                    };
                }, this), e;
            }
        },
        "delegateEvents": function(e) {
            this._delegateDOMEvents(e), s.bindEntityEvents(this, this.model, s.getOption(this, "modelEvents")), 
            s.bindEntityEvents(this, this.collection, s.getOption(this, "collectionEvents"));
        },
        "_delegateDOMEvents": function(e) {
            e = e || this.events, i.isFunction(e) && (e = e.call(this));
            var n = {}, s = i.result(this, "behaviorEvents") || {}, r = this.configureTriggers();
            i.extend(n, s, e, r), t.View.prototype.delegateEvents.call(this, n);
        },
        "undelegateEvents": function() {
            var e = Array.prototype.slice.call(arguments);
            t.View.prototype.undelegateEvents.apply(this, e), s.unbindEntityEvents(this, this.model, s.getOption(this, "modelEvents")), 
            s.unbindEntityEvents(this, this.collection, s.getOption(this, "collectionEvents"));
        },
        "onShowCalled": function() {},
        "close": function() {
            if (!this.isClosed) {
                var e = Array.prototype.slice.call(arguments);
                !1 !== this.triggerMethod.apply(this, [ "before:close" ].concat(e)) && (this.isClosed = !0, 
                this.triggerMethod.apply(this, [ "close" ].concat(e)), this.unbindUIElements(), 
                this.remove());
            }
        },
        "bindUIElements": function() {
            if (this.ui) {
                this._uiBindings || (this._uiBindings = this.ui);
                var e = i.result(this, "_uiBindings");
                this.ui = {}, i.each(i.keys(e), function(t) {
                    var i = e[t];
                    this.ui[t] = this.$(i);
                }, this);
            }
        },
        "unbindUIElements": function() {
            this.ui && this._uiBindings && (i.each(this.ui, function(e, t) {
                delete this.ui[t];
            }, this), this.ui = this._uiBindings, delete this._uiBindings);
        }
    }), s.ItemView = s.View.extend({
        "constructor": function() {
            s.View.prototype.constructor.apply(this, arguments);
        },
        "serializeData": function() {
            var e = {};
            return this.model ? e = this.model.toJSON() : this.collection && (e = {
                "items": this.collection.toJSON()
            }), e;
        },
        "render": function() {
            this.isClosed = !1, this.triggerMethod("before:render", this), this.triggerMethod("item:before:render", this);
            var e = this.serializeData();
            e = this.mixinTemplateHelpers(e);
            var t = this.getTemplate(), i = s.Renderer.render(t, e);
            return this.$el.html(i), this.bindUIElements(), this.triggerMethod("render", this), 
            this.triggerMethod("item:rendered", this), this;
        },
        "close": function() {
            this.isClosed || (this.triggerMethod("item:before:close"), s.View.prototype.close.apply(this, arguments), 
            this.triggerMethod("item:closed"));
        }
    }), s.CollectionView = s.View.extend({
        "itemViewEventPrefix": "itemview",
        "constructor": function(e) {
            this._initChildViewStorage(), s.View.prototype.constructor.apply(this, arguments), 
            this._initialEvents(), this.initRenderBuffer();
        },
        "initRenderBuffer": function() {
            this.elBuffer = document.createDocumentFragment(), this._bufferedChildren = [];
        },
        "startBuffering": function() {
            this.initRenderBuffer(), this.isBuffering = !0;
        },
        "endBuffering": function() {
            this.isBuffering = !1, this.appendBuffer(this, this.elBuffer), this._triggerShowBufferedChildren(), 
            this.initRenderBuffer();
        },
        "_triggerShowBufferedChildren": function() {
            this._isShown && (i.each(this._bufferedChildren, function(e) {
                i.isFunction(e.triggerMethod) ? e.triggerMethod("show") : s.triggerMethod.call(e, "show");
            }), this._bufferedChildren = []);
        },
        "_initialEvents": function() {
            this.collection && (this.listenTo(this.collection, "add", this.addChildView), this.listenTo(this.collection, "remove", this.removeItemView), 
            this.listenTo(this.collection, "reset", this.render));
        },
        "addChildView": function(e, t, i) {
            this.closeEmptyView();
            var n = this.getItemView(e), s = this.collection.indexOf(e);
            this.addItemView(e, n, s);
        },
        "onShowCalled": function() {
            this.children.each(function(e) {
                i.isFunction(e.triggerMethod) ? e.triggerMethod("show") : s.triggerMethod.call(e, "show");
            });
        },
        "triggerBeforeRender": function() {
            this.triggerMethod("before:render", this), this.triggerMethod("collection:before:render", this);
        },
        "triggerRendered": function() {
            this.triggerMethod("render", this), this.triggerMethod("collection:rendered", this);
        },
        "render": function() {
            return this.isClosed = !1, this.triggerBeforeRender(), this._renderChildren(), this.triggerRendered(), 
            this;
        },
        "_renderChildren": function() {
            this.startBuffering(), this.closeEmptyView(), this.closeChildren(), this.isEmpty(this.collection) ? this.showEmptyView() : this.showCollection(), 
            this.endBuffering();
        },
        "showCollection": function() {
            var e;
            this.collection.each(function(t, i) {
                e = this.getItemView(t), this.addItemView(t, e, i);
            }, this);
        },
        "showEmptyView": function() {
            var e = this.getEmptyView();
            if (e && !this._showingEmptyView) {
                this._showingEmptyView = !0;
                var i = new t.Model();
                this.addItemView(i, e, 0);
            }
        },
        "closeEmptyView": function() {
            this._showingEmptyView && (this.closeChildren(), delete this._showingEmptyView);
        },
        "getEmptyView": function() {
            return s.getOption(this, "emptyView");
        },
        "getItemView": function(e) {
            var t = s.getOption(this, "itemView");
            return t || n("An `itemView` must be specified", "NoItemViewError"), t;
        },
        "addItemView": function(e, t, n) {
            var r = s.getOption(this, "itemViewOptions");
            i.isFunction(r) && (r = r.call(this, e, n));
            var o = this.buildItemView(e, t, r);
            return this.addChildViewEventForwarding(o), this.triggerMethod("before:item:added", o), 
            this.children.add(o), this.renderItemView(o, n), this._isShown && !this.isBuffering && (i.isFunction(o.triggerMethod) ? o.triggerMethod("show") : s.triggerMethod.call(o, "show")), 
            this.triggerMethod("after:item:added", o), o;
        },
        "addChildViewEventForwarding": function(e) {
            var t = s.getOption(this, "itemViewEventPrefix");
            this.listenTo(e, "all", function() {
                var n = r.call(arguments), o = n[0], a = this.normalizeMethods(this.getItemEvents());
                n[0] = t + ":" + o, n.splice(1, 0, e), void 0 !== a && i.isFunction(a[o]) && a[o].apply(this, n), 
                s.triggerMethod.apply(this, n);
            }, this);
        },
        "getItemEvents": function() {
            return i.isFunction(this.itemEvents) ? this.itemEvents.call(this) : this.itemEvents;
        },
        "renderItemView": function(e, t) {
            e.render(), this.appendHtml(this, e, t);
        },
        "buildItemView": function(e, t, n) {
            return new t(i.extend({
                "model": e
            }, n));
        },
        "removeItemView": function(e) {
            var t = this.children.findByModel(e);
            this.removeChildView(t), this.checkEmpty();
        },
        "removeChildView": function(e) {
            e && (e.close ? e.close() : e.remove && e.remove(), this.stopListening(e), this.children.remove(e)), 
            this.triggerMethod("item:removed", e);
        },
        "isEmpty": function(e) {
            return !this.collection || 0 === this.collection.length;
        },
        "checkEmpty": function() {
            this.isEmpty(this.collection) && this.showEmptyView();
        },
        "appendBuffer": function(e, t) {
            e.$el.append(t);
        },
        "appendHtml": function(e, t, i) {
            e.isBuffering ? (e.elBuffer.appendChild(t.el), e._bufferedChildren.push(t)) : e.$el.append(t.el);
        },
        "_initChildViewStorage": function() {
            this.children = new t.ChildViewContainer();
        },
        "close": function() {
            this.isClosed || (this.triggerMethod("collection:before:close"), this.closeChildren(), 
            this.triggerMethod("collection:closed"), s.View.prototype.close.apply(this, arguments));
        },
        "closeChildren": function() {
            this.children.each(function(e) {
                this.removeChildView(e);
            }, this), this.checkEmpty();
        }
    }), s.CompositeView = s.CollectionView.extend({
        "constructor": function() {
            s.CollectionView.prototype.constructor.apply(this, arguments);
        },
        "_initialEvents": function() {
            this.once("render", function() {
                this.collection && (this.listenTo(this.collection, "add", this.addChildView), this.listenTo(this.collection, "remove", this.removeItemView), 
                this.listenTo(this.collection, "reset", this._renderChildren));
            });
        },
        "getItemView": function(e) {
            var t = s.getOption(this, "itemView") || this.constructor;
            return t || n("An `itemView` must be specified", "NoItemViewError"), t;
        },
        "serializeData": function() {
            var e = {};
            return this.model && (e = this.model.toJSON()), e;
        },
        "render": function() {
            this.isRendered = !0, this.isClosed = !1, this.resetItemViewContainer(), this.triggerBeforeRender();
            var e = this.renderModel();
            return this.$el.html(e), this.bindUIElements(), this.triggerMethod("composite:model:rendered"), 
            this._renderChildren(), this.triggerMethod("composite:rendered"), this.triggerRendered(), 
            this;
        },
        "_renderChildren": function() {
            this.isRendered && (this.triggerMethod("composite:collection:before:render"), s.CollectionView.prototype._renderChildren.call(this), 
            this.triggerMethod("composite:collection:rendered"));
        },
        "renderModel": function() {
            var e = {};
            e = this.serializeData(), e = this.mixinTemplateHelpers(e);
            var t = this.getTemplate();
            return s.Renderer.render(t, e);
        },
        "appendBuffer": function(e, t) {
            this.getItemViewContainer(e).append(t);
        },
        "appendHtml": function(e, t, i) {
            e.isBuffering ? (e.elBuffer.appendChild(t.el), e._bufferedChildren.push(t)) : this.getItemViewContainer(e).append(t.el);
        },
        "getItemViewContainer": function(e) {
            if ("$itemViewContainer" in e) return e.$itemViewContainer;
            var t, r = s.getOption(e, "itemViewContainer");
            if (r) {
                var o = i.isFunction(r) ? r.call(e) : r;
                (t = "@" === o.charAt(0) && e.ui ? e.ui[o.substr(4)] : e.$(o)).length <= 0 && n("The specified `itemViewContainer` was not found: " + e.itemViewContainer, "ItemViewContainerMissingError");
            } else t = e.$el;
            return e.$itemViewContainer = t, t;
        },
        "resetItemViewContainer": function() {
            this.$itemViewContainer && delete this.$itemViewContainer;
        }
    }), s.Layout = s.ItemView.extend({
        "regionType": s.Region,
        "constructor": function(e) {
            e = e || {}, this._firstRender = !0, this._initializeRegions(e), s.ItemView.prototype.constructor.call(this, e);
        },
        "render": function() {
            return this.isClosed && this._initializeRegions(), this._firstRender ? this._firstRender = !1 : this.isClosed || this._reInitializeRegions(), 
            s.ItemView.prototype.render.apply(this, arguments);
        },
        "close": function() {
            this.isClosed || (this.regionManager.close(), s.ItemView.prototype.close.apply(this, arguments));
        },
        "addRegion": function(e, t) {
            var i = {};
            return i[e] = t, this._buildRegions(i)[e];
        },
        "addRegions": function(e) {
            return this.regions = i.extend({}, this.regions, e), this._buildRegions(e);
        },
        "removeRegion": function(e) {
            return delete this.regions[e], this.regionManager.removeRegion(e);
        },
        "getRegion": function(e) {
            return this.regionManager.get(e);
        },
        "_buildRegions": function(e) {
            var t = this, i = {
                "regionType": s.getOption(this, "regionType"),
                "parentEl": function() {
                    return t.$el;
                }
            };
            return this.regionManager.addRegions(e, i);
        },
        "_initializeRegions": function(e) {
            var t;
            this._initRegionManager(), t = i.isFunction(this.regions) ? this.regions(e) : this.regions || {}, 
            this.addRegions(t);
        },
        "_reInitializeRegions": function() {
            this.regionManager.closeRegions(), this.regionManager.each(function(e) {
                e.reset();
            });
        },
        "_initRegionManager": function() {
            this.regionManager = new s.RegionManager(), this.listenTo(this.regionManager, "region:add", function(e, t) {
                this[e] = t, this.trigger("region:add", e, t);
            }), this.listenTo(this.regionManager, "region:remove", function(e, t) {
                delete this[e], this.trigger("region:remove", e, t);
            });
        }
    }), s.Behavior = function(e, t) {
        function i(t, i) {
            this.view = i, this.defaults = e.result(this, "defaults") || {}, this.options = e.extend({}, this.defaults, t), 
            this.$ = function() {
                return this.view.$.apply(this.view, arguments);
            }, this.initialize.apply(this, arguments);
        }
        return e.extend(i.prototype, t.Events, {
            "initialize": function() {},
            "close": function() {
                this.stopListening();
            },
            "triggerMethod": s.triggerMethod
        }), i.extend = s.extend, i;
    }(i, t), s.Behaviors = function(e, t) {
        function i(e) {
            this.behaviors = i.parseBehaviors(e, t.result(e, "behaviors")), i.wrap(e, this.behaviors, [ "bindUIElements", "unbindUIElements", "delegateEvents", "undelegateEvents", "behaviorEvents", "triggerMethod", "setElement", "close" ]);
        }
        var n = {
            "setElement": function(e, i) {
                e.apply(this, t.tail(arguments, 2)), t.each(i, function(e) {
                    e.$el = this.$el;
                }, this);
            },
            "close": function(e, i) {
                var n = t.tail(arguments, 2);
                e.apply(this, n), t.invoke(i, "close", n);
            },
            "bindUIElements": function(e, i) {
                e.apply(this), t.invoke(i, e);
            },
            "unbindUIElements": function(e, i) {
                e.apply(this), t.invoke(i, e);
            },
            "triggerMethod": function(e, i) {
                var n = t.tail(arguments, 2);
                e.apply(this, n), t.each(i, function(t) {
                    e.apply(t, n);
                });
            },
            "delegateEvents": function(i, n) {
                var s = t.tail(arguments, 2);
                i.apply(this, s), t.each(n, function(t) {
                    e.bindEntityEvents(t, this.model, e.getOption(t, "modelEvents")), e.bindEntityEvents(t, this.collection, e.getOption(t, "collectionEvents"));
                }, this);
            },
            "undelegateEvents": function(i, n) {
                var s = t.tail(arguments, 2);
                i.apply(this, s), t.each(n, function(t) {
                    e.unbindEntityEvents(t, this.model, e.getOption(t, "modelEvents")), e.unbindEntityEvents(t, this.collection, e.getOption(t, "collectionEvents"));
                }, this);
            },
            "behaviorEvents": function(i, n) {
                var s = {}, r = t.result(this, "ui");
                return t.each(n, function(i, n) {
                    var o = {}, a = t.clone(t.result(i, "events")) || {}, l = t.result(i, "ui"), h = t.extend({}, r, l);
                    a = e.normalizeUIKeys(a, h), t.each(t.keys(a), function(e) {
                        var s = e + new Array(n + 2).join(" "), r = t.isFunction(a[e]) ? a[e] : i[a[e]];
                        o[s] = t.bind(r, i);
                    }), s = t.extend(s, o);
                }), s;
            }
        };
        return t.extend(i, {
            "behaviorsLookup": function() {
                throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
            },
            "getBehaviorClass": function(e, n) {
                return e.behaviorClass ? e.behaviorClass : t.isFunction(i.behaviorsLookup) ? i.behaviorsLookup.apply(this, arguments)[n] : i.behaviorsLookup[n];
            },
            "parseBehaviors": function(e, n) {
                return t.map(n, function(t, n) {
                    return new (i.getBehaviorClass(t, n))(t, e);
                });
            },
            "wrap": function(e, i, s) {
                t.each(s, function(s) {
                    e[s] = t.partial(n[s], e[s], i);
                });
            }
        }), i;
    }(s, i), s.AppRouter = t.Router.extend({
        "constructor": function(e) {
            t.Router.prototype.constructor.apply(this, arguments), this.options = e || {};
            var i = s.getOption(this, "appRoutes"), n = this._getController();
            this.processAppRoutes(n, i), this.on("route", this._processOnRoute, this);
        },
        "appRoute": function(e, t) {
            var i = this._getController();
            this._addAppRoute(i, e, t);
        },
        "_processOnRoute": function(e, t) {
            var n = i.invert(this.appRoutes)[e];
            i.isFunction(this.onRoute) && this.onRoute(e, n, t);
        },
        "processAppRoutes": function(e, t) {
            if (t) {
                var n = i.keys(t).reverse();
                i.each(n, function(i) {
                    this._addAppRoute(e, i, t[i]);
                }, this);
            }
        },
        "_getController": function() {
            return s.getOption(this, "controller");
        },
        "_addAppRoute": function(e, t, s) {
            var r = e[s];
            r || n("Method '" + s + "' was not found on the controller"), this.route(t, s, i.bind(r, e));
        }
    }), s.Application = function(e) {
        this._initRegionManager(), this._initCallbacks = new s.Callbacks(), this.vent = new t.Wreqr.EventAggregator(), 
        this.commands = new t.Wreqr.Commands(), this.reqres = new t.Wreqr.RequestResponse(), 
        this.submodules = {}, i.extend(this, e), this.triggerMethod = s.triggerMethod;
    }, i.extend(s.Application.prototype, t.Events, {
        "execute": function() {
            this.commands.execute.apply(this.commands, arguments);
        },
        "request": function() {
            return this.reqres.request.apply(this.reqres, arguments);
        },
        "addInitializer": function(e) {
            this._initCallbacks.add(e);
        },
        "start": function(e) {
            this.triggerMethod("initialize:before", e), this._initCallbacks.run(e, this), this.triggerMethod("initialize:after", e), 
            this.triggerMethod("start", e);
        },
        "addRegions": function(e) {
            return this._regionManager.addRegions(e);
        },
        "closeRegions": function() {
            this._regionManager.closeRegions();
        },
        "removeRegion": function(e) {
            this._regionManager.removeRegion(e);
        },
        "getRegion": function(e) {
            return this._regionManager.get(e);
        },
        "module": function(e, t) {
            var i = s.Module.getClass(t), n = r.call(arguments);
            return n.unshift(this), i.create.apply(i, n);
        },
        "_initRegionManager": function() {
            this._regionManager = new s.RegionManager(), this.listenTo(this._regionManager, "region:add", function(e, t) {
                this[e] = t;
            }), this.listenTo(this._regionManager, "region:remove", function(e, t) {
                delete this[e];
            });
        }
    }), s.Application.extend = s.extend, s.Module = function(e, t, n) {
        this.moduleName = e, this.options = i.extend({}, this.options, n), this.initialize = n.initialize || this.initialize, 
        this.submodules = {}, this._setupInitializersAndFinalizers(), this.app = t, this.startWithParent = !0, 
        this.triggerMethod = s.triggerMethod, i.isFunction(this.initialize) && this.initialize(this.options, e, t);
    }, s.Module.extend = s.extend, i.extend(s.Module.prototype, t.Events, {
        "initialize": function() {},
        "addInitializer": function(e) {
            this._initializerCallbacks.add(e);
        },
        "addFinalizer": function(e) {
            this._finalizerCallbacks.add(e);
        },
        "start": function(e) {
            this._isInitialized || (i.each(this.submodules, function(t) {
                t.startWithParent && t.start(e);
            }), this.triggerMethod("before:start", e), this._initializerCallbacks.run(e, this), 
            this._isInitialized = !0, this.triggerMethod("start", e));
        },
        "stop": function() {
            this._isInitialized && (this._isInitialized = !1, s.triggerMethod.call(this, "before:stop"), 
            i.each(this.submodules, function(e) {
                e.stop();
            }), this._finalizerCallbacks.run(void 0, this), this._initializerCallbacks.reset(), 
            this._finalizerCallbacks.reset(), s.triggerMethod.call(this, "stop"));
        },
        "addDefinition": function(e, t) {
            this._runModuleDefinition(e, t);
        },
        "_runModuleDefinition": function(e, n) {
            if (e) {
                var r = i.flatten([ this, this.app, t, s, s.$, i, n ]);
                e.apply(this, r);
            }
        },
        "_setupInitializersAndFinalizers": function() {
            this._initializerCallbacks = new s.Callbacks(), this._finalizerCallbacks = new s.Callbacks();
        }
    }), i.extend(s.Module, {
        "create": function(e, t, n) {
            var s = e, o = r.call(arguments);
            o.splice(0, 3);
            var a = (t = t.split(".")).length, l = [];
            return l[a - 1] = n, i.each(t, function(t, i) {
                var r = s;
                s = this._getModule(r, t, e, n), this._addModuleDefinition(r, s, l[i], o);
            }, this), s;
        },
        "_getModule": function(e, t, n, s, r) {
            var o = i.extend({}, s), a = this.getClass(s), l = e[t];
            return l || (l = new a(t, n, o), e[t] = l, e.submodules[t] = l), l;
        },
        "getClass": function(e) {
            var t = s.Module;
            return e ? e.prototype instanceof t ? e : e.moduleClass || t : t;
        },
        "_addModuleDefinition": function(e, t, i, n) {
            var s = this._getDefine(i), r = this._getStartWithParent(i, t);
            s && t.addDefinition(s, n), this._addStartWithParent(e, t, r);
        },
        "_getStartWithParent": function(e, t) {
            var n;
            return i.isFunction(e) && e.prototype instanceof s.Module ? (n = t.constructor.prototype.startWithParent, 
            !!i.isUndefined(n) || n) : !i.isObject(e) || (n = e.startWithParent, !!i.isUndefined(n) || n);
        },
        "_getDefine": function(e) {
            return !i.isFunction(e) || e.prototype instanceof s.Module ? i.isObject(e) ? e.define : null : e;
        },
        "_addStartWithParent": function(e, t, i) {
            t.startWithParent = t.startWithParent && i, t.startWithParent && !t.startWithParentIsConfigured && (t.startWithParentIsConfigured = !0, 
            e.addInitializer(function(e) {
                t.startWithParent && t.start(e);
            }));
        }
    }), s;
}(0, Backbone, _);

!function(e, t) {
    var i = t.sync;
    t.sync = function(e, t, n) {
        var s = t._lastXHR && t._lastXHR[e];
        return s && 4 != s.readyState && n && !1 !== n.safe && s.abort("stale"), t._lastXHR || (t._lastXHR = {}), 
        t._lastXHR[e] = i.apply(this, arguments);
    };
}(window._, window.Backbone);

var OpenLayers = {
    "VERSION_NUMBER": "Release 2.14 dev",
    "singleFile": !0,
    "_getScriptLocation": function() {
        for (var e, t, i = new RegExp("(^|(.*?\\/))(OpenLayers[^\\/]*?\\.js)(\\?|$)"), n = document.getElementsByTagName("script"), s = "", r = 0, o = n.length; r < o; r++) if ((e = n[r].getAttribute("src")) && (t = e.match(i))) {
            s = t[1];
            break;
        }
        return function() {
            return s;
        };
    }(),
    "ImgPath": ""
};

if (OpenLayers.Util = OpenLayers.Util || {}, OpenLayers.Util.vendorPrefix = function() {
    "use strict";
    function e(e) {
        return e ? e.replace(/([A-Z])/g, function(e) {
            return "-" + e.toLowerCase();
        }).replace(/^ms-/, "-ms-") : null;
    }
    function t(e, t) {
        if (void 0 === o[t]) {
            var i, s, r = 0, a = n.length, l = void 0 !== e.cssText;
            for (o[t] = null; r < a; r++) if ((s = n[r]) ? (l || (s = s.toLowerCase()), i = s + t.charAt(0).toUpperCase() + t.slice(1)) : i = t, 
            void 0 !== e[i]) {
                o[t] = i;
                break;
            }
        }
        return o[t];
    }
    function i(e) {
        return t(s, e);
    }
    var n = [ "", "O", "ms", "Moz", "Webkit" ], s = document.createElement("div").style, r = {}, o = {};
    return {
        "css": function(t) {
            if (void 0 === r[t]) {
                var n = i(t.replace(/(-[\s\S])/g, function(e) {
                    return e.charAt(1).toUpperCase();
                }));
                r[t] = e(n);
            }
            return r[t];
        },
        "js": t,
        "style": i,
        "cssCache": r,
        "jsCache": o
    };
}(), OpenLayers.Animation = function(e) {
    var t = OpenLayers.Util.vendorPrefix.js(e, "requestAnimationFrame"), i = !!t, n = function() {
        var i = e[t] || function(t, i) {
            e.setTimeout(t, 16);
        };
        return function(t, n) {
            i.apply(e, [ t, n ]);
        };
    }(), s = 0, r = {};
    return {
        "isNative": i,
        "requestFrame": n,
        "start": function(e, t, i) {
            t = t > 0 ? t : Number.POSITIVE_INFINITY;
            var o = ++s, a = +new Date();
            return r[o] = function() {
                r[o] && +new Date() - a <= t ? (e(), r[o] && n(r[o], i)) : delete r[o];
            }, n(r[o], i), o;
        },
        "stop": function(e) {
            delete r[e];
        }
    };
}(window), OpenLayers.String = {
    "startsWith": function(e, t) {
        return 0 == e.indexOf(t);
    },
    "contains": function(e, t) {
        return -1 != e.indexOf(t);
    },
    "trim": function(e) {
        return e.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
    },
    "camelize": function(e) {
        for (var t = e.split("-"), i = t[0], n = 1, s = t.length; n < s; n++) {
            var r = t[n];
            i += r.charAt(0).toUpperCase() + r.substring(1);
        }
        return i;
    },
    "format": function(e, t, i) {
        t || (t = window);
        return e.replace(OpenLayers.String.tokenRegEx, function(e, n) {
            for (var s, r = n.split(/\.+/), o = 0; o < r.length && (0 == o && (s = t), void 0 !== s); o++) s = s[r[o]];
            return "function" == typeof s && (s = i ? s.apply(null, i) : s()), void 0 === s ? "undefined" : s;
        });
    },
    "tokenRegEx": /\$\{([\w.]+?)\}/g,
    "numberRegEx": /^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,
    "isNumeric": function(e) {
        return OpenLayers.String.numberRegEx.test(e);
    },
    "numericIf": function(e, t) {
        var i = e;
        return !0 === t && null != e && e.replace && (e = e.replace(/^\s*|\s*$/g, "")), 
        OpenLayers.String.isNumeric(e) ? parseFloat(e) : i;
    }
}, OpenLayers.Number = {
    "decimalSeparator": ".",
    "thousandsSeparator": ",",
    "limitSigDigs": function(e, t) {
        var i = 0;
        return t > 0 && (i = parseFloat(e.toPrecision(t))), i;
    },
    "format": function(e, t, i, n) {
        t = void 0 !== t ? t : 0, i = void 0 !== i ? i : OpenLayers.Number.thousandsSeparator, 
        n = void 0 !== n ? n : OpenLayers.Number.decimalSeparator, null != t && (e = parseFloat(e.toFixed(t)));
        var s = e.toString().split(".");
        1 == s.length && null == t && (t = 0);
        var r = s[0];
        if (i) for (var o = /(-?[0-9]+)([0-9]{3})/; o.test(r); ) r = r.replace(o, "$1" + i + "$2");
        var a;
        if (0 == t) a = r; else {
            var l = s.length > 1 ? s[1] : "0";
            null != t && (l += new Array(t - l.length + 1).join("0")), a = r + n + l;
        }
        return a;
    },
    "zeroPad": function(e, t, i) {
        for (var n = e.toString(i || 10); n.length < t; ) n = "0" + n;
        return n;
    }
}, OpenLayers.Function = {
    "bind": function(e, t) {
        var i = Array.prototype.slice.call(arguments, 2);
        return function() {
            var n = i.concat(Array.prototype.slice.call(arguments, 0));
            return e.apply(t, n);
        };
    },
    "bindAsEventListener": function(e, t) {
        return function(i) {
            return e.call(t, i || window.event);
        };
    },
    "False": function() {
        return !1;
    },
    "True": function() {
        return !0;
    },
    "Void": function() {}
}, OpenLayers.Array = {
    "filter": function(e, t, i) {
        var n = [];
        if (Array.prototype.filter) n = e.filter(t, i); else {
            var s = e.length;
            if ("function" != typeof t) throw new TypeError();
            for (var r = 0; r < s; r++) if (r in e) {
                var o = e[r];
                t.call(i, o, r, e) && n.push(o);
            }
        }
        return n;
    }
}, OpenLayers.Class = function() {
    var e = arguments.length, t = arguments[0], i = arguments[e - 1], n = "function" == typeof i.initialize ? i.initialize : function() {
        t.prototype.initialize.apply(this, arguments);
    };
    if (e > 1) {
        var s = [ n, t ].concat(Array.prototype.slice.call(arguments).slice(1, e - 1), i);
        OpenLayers.inherit.apply(null, s);
    } else n.prototype = i;
    return n;
}, OpenLayers.inherit = function(e, t) {
    var i = function() {};
    i.prototype = t.prototype, e.prototype = new i();
    var n, s, r;
    for (n = 2, s = arguments.length; n < s; n++) "function" == typeof (r = arguments[n]) && (r = r.prototype), 
    OpenLayers.Util.extend(e.prototype, r);
}, OpenLayers.Util = OpenLayers.Util || {}, OpenLayers.Util.extend = function(e, t) {
    if (e = e || {}, t) {
        for (var i in t) {
            var n = t[i];
            void 0 !== n && (e[i] = n);
        }
        !("function" == typeof window.Event && t instanceof window.Event) && t.hasOwnProperty && t.hasOwnProperty("toString") && (e.toString = t.toString);
    }
    return e;
}, OpenLayers.Console = {
    "log": function() {},
    "debug": function() {},
    "info": function() {},
    "warn": function() {},
    "error": function() {},
    "userError": function(e) {
        alert(e);
    },
    "assert": function() {},
    "dir": function() {},
    "dirxml": function() {},
    "trace": function() {},
    "group": function() {},
    "groupEnd": function() {},
    "time": function() {},
    "timeEnd": function() {},
    "profile": function() {},
    "profileEnd": function() {},
    "count": function() {},
    "CLASS_NAME": "OpenLayers.Console"
}, function() {
    for (var e = document.getElementsByTagName("script"), t = 0, i = e.length; t < i; ++t) if (-1 != e[t].src.indexOf("firebug.js") && console) {
        OpenLayers.Util.extend(OpenLayers.Console, console);
        break;
    }
}(), OpenLayers.Control = OpenLayers.Class({
    "id": null,
    "map": null,
    "div": null,
    "type": null,
    "allowSelection": !1,
    "displayClass": "",
    "title": "",
    "autoActivate": !1,
    "active": null,
    "handlerOptions": null,
    "handler": null,
    "eventListeners": null,
    "events": null,
    "initialize": function(e) {
        this.displayClass = this.CLASS_NAME.replace("OpenLayers.", "ol").replace(/\./g, ""), 
        OpenLayers.Util.extend(this, e), this.events = new OpenLayers.Events(this), this.eventListeners instanceof Object && this.events.on(this.eventListeners), 
        null == this.id && (this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_"));
    },
    "destroy": function() {
        if (this.events && (this.eventListeners && this.events.un(this.eventListeners), 
        this.events.destroy(), this.events = null), this.eventListeners = null, this.handler && (this.handler.destroy(), 
        this.handler = null), this.handlers) {
            for (var e in this.handlers) this.handlers.hasOwnProperty(e) && "function" == typeof this.handlers[e].destroy && this.handlers[e].destroy();
            this.handlers = null;
        }
        this.map && (this.map.removeControl(this), this.map = null), this.div = null;
    },
    "setMap": function(e) {
        this.map = e, this.handler && this.handler.setMap(e);
    },
    "draw": function(e) {
        return null == this.div && (this.div = OpenLayers.Util.createDiv(this.id), this.div.className = this.displayClass, 
        this.allowSelection || (this.div.className += " olControlNoSelect", this.div.setAttribute("unselectable", "on", 0), 
        this.div.onselectstart = OpenLayers.Function.False), "" != this.title && (this.div.title = this.title)), 
        null != e && (this.position = e.clone()), this.moveTo(this.position), this.div;
    },
    "moveTo": function(e) {
        null != e && null != this.div && (this.div.style.left = e.x + "px", this.div.style.top = e.y + "px");
    },
    "activate": function() {
        return !this.active && (this.handler && this.handler.activate(), this.active = !0, 
        this.map && OpenLayers.Element.addClass(this.map.viewPortDiv, this.displayClass.replace(/ /g, "") + "Active"), 
        this.events.triggerEvent("activate"), !0);
    },
    "deactivate": function() {
        return !!this.active && (this.handler && this.handler.deactivate(), this.active = !1, 
        this.map && OpenLayers.Element.removeClass(this.map.viewPortDiv, this.displayClass.replace(/ /g, "") + "Active"), 
        this.events.triggerEvent("deactivate"), !0);
    },
    "CLASS_NAME": "OpenLayers.Control"
}), OpenLayers.Control.TYPE_BUTTON = 1, OpenLayers.Control.TYPE_TOGGLE = 2, OpenLayers.Control.TYPE_TOOL = 3, 
OpenLayers.Bounds = OpenLayers.Class({
    "left": null,
    "bottom": null,
    "right": null,
    "top": null,
    "centerLonLat": null,
    "initialize": function(e, t, i, n) {
        OpenLayers.Util.isArray(e) && (n = e[3], i = e[2], t = e[1], e = e[0]), null != e && (this.left = OpenLayers.Util.toFloat(e)), 
        null != t && (this.bottom = OpenLayers.Util.toFloat(t)), null != i && (this.right = OpenLayers.Util.toFloat(i)), 
        null != n && (this.top = OpenLayers.Util.toFloat(n));
    },
    "clone": function() {
        return new OpenLayers.Bounds(this.left, this.bottom, this.right, this.top);
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.left == e.left && this.right == e.right && this.top == e.top && this.bottom == e.bottom), 
        t;
    },
    "toString": function() {
        return [ this.left, this.bottom, this.right, this.top ].join(",");
    },
    "toArray": function(e) {
        return !0 === e ? [ this.bottom, this.left, this.top, this.right ] : [ this.left, this.bottom, this.right, this.top ];
    },
    "toBBOX": function(e, t) {
        null == e && (e = 6);
        var i = Math.pow(10, e), n = Math.round(this.left * i) / i, s = Math.round(this.bottom * i) / i, r = Math.round(this.right * i) / i, o = Math.round(this.top * i) / i;
        return !0 === t ? s + "," + n + "," + o + "," + r : n + "," + s + "," + r + "," + o;
    },
    "toGeometry": function() {
        return new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing([ new OpenLayers.Geometry.Point(this.left, this.bottom), new OpenLayers.Geometry.Point(this.right, this.bottom), new OpenLayers.Geometry.Point(this.right, this.top), new OpenLayers.Geometry.Point(this.left, this.top) ]) ]);
    },
    "getWidth": function() {
        return this.right - this.left;
    },
    "getHeight": function() {
        return this.top - this.bottom;
    },
    "getSize": function() {
        return new OpenLayers.Size(this.getWidth(), this.getHeight());
    },
    "getCenterPixel": function() {
        return new OpenLayers.Pixel((this.left + this.right) / 2, (this.bottom + this.top) / 2);
    },
    "getCenterLonLat": function() {
        return this.centerLonLat || (this.centerLonLat = new OpenLayers.LonLat((this.left + this.right) / 2, (this.bottom + this.top) / 2)), 
        this.centerLonLat;
    },
    "scale": function(e, t) {
        null == t && (t = this.getCenterLonLat());
        var i, n;
        "OpenLayers.LonLat" == t.CLASS_NAME ? (i = t.lon, n = t.lat) : (i = t.x, n = t.y);
        var s = (this.left - i) * e + i, r = (this.bottom - n) * e + n, o = (this.right - i) * e + i, a = (this.top - n) * e + n;
        return new OpenLayers.Bounds(s, r, o, a);
    },
    "add": function(e, t) {
        if (null == e || null == t) throw new TypeError("Bounds.add cannot receive null values");
        return new OpenLayers.Bounds(this.left + e, this.bottom + t, this.right + e, this.top + t);
    },
    "extend": function(e) {
        if (e) switch (e.CLASS_NAME) {
          case "OpenLayers.LonLat":
            this.extendXY(e.lon, e.lat);
            break;

          case "OpenLayers.Geometry.Point":
            this.extendXY(e.x, e.y);
            break;

          case "OpenLayers.Bounds":
            this.centerLonLat = null, (null == this.left || e.left < this.left) && (this.left = e.left), 
            (null == this.bottom || e.bottom < this.bottom) && (this.bottom = e.bottom), (null == this.right || e.right > this.right) && (this.right = e.right), 
            (null == this.top || e.top > this.top) && (this.top = e.top);
        }
    },
    "extendXY": function(e, t) {
        this.centerLonLat = null, (null == this.left || e < this.left) && (this.left = e), 
        (null == this.bottom || t < this.bottom) && (this.bottom = t), (null == this.right || e > this.right) && (this.right = e), 
        (null == this.top || t > this.top) && (this.top = t);
    },
    "containsLonLat": function(e, t) {
        "boolean" == typeof t && (t = {
            "inclusive": t
        }), t = t || {};
        var i = this.contains(e.lon, e.lat, t.inclusive), n = t.worldBounds;
        if (n && !i) {
            var s = n.getWidth(), r = (n.left + n.right) / 2, o = Math.round((e.lon - r) / s);
            i = this.containsLonLat({
                "lon": e.lon - o * s,
                "lat": e.lat
            }, {
                "inclusive": t.inclusive
            });
        }
        return i;
    },
    "containsPixel": function(e, t) {
        return this.contains(e.x, e.y, t);
    },
    "contains": function(e, t, i) {
        if (null == i && (i = !0), null == e || null == t) return !1;
        e = OpenLayers.Util.toFloat(e), t = OpenLayers.Util.toFloat(t);
        return i ? e >= this.left && e <= this.right && t >= this.bottom && t <= this.top : e > this.left && e < this.right && t > this.bottom && t < this.top;
    },
    "intersectsBounds": function(e, t) {
        if ("boolean" == typeof t && (t = {
            "inclusive": t
        }), (t = t || {}).worldBounds) {
            var i = this.wrapDateLine(t.worldBounds);
            e = e.wrapDateLine(t.worldBounds);
        } else i = this;
        null == t.inclusive && (t.inclusive = !0);
        var n = !1, s = i.left == e.right || i.right == e.left || i.top == e.bottom || i.bottom == e.top;
        if (t.inclusive || !s) {
            var r = e.bottom >= i.bottom && e.bottom <= i.top || i.bottom >= e.bottom && i.bottom <= e.top, o = e.top >= i.bottom && e.top <= i.top || i.top > e.bottom && i.top < e.top, a = e.left >= i.left && e.left <= i.right || i.left >= e.left && i.left <= e.right, l = e.right >= i.left && e.right <= i.right || i.right >= e.left && i.right <= e.right;
            n = (r || o) && (a || l);
        }
        if (t.worldBounds && !n) {
            var h = t.worldBounds, c = h.getWidth(), u = !h.containsBounds(i), p = !h.containsBounds(e);
            u && !p ? (e = e.add(-c, 0), n = i.intersectsBounds(e, {
                "inclusive": t.inclusive
            })) : p && !u && (i = i.add(-c, 0), n = e.intersectsBounds(i, {
                "inclusive": t.inclusive
            }));
        }
        return n;
    },
    "containsBounds": function(e, t, i) {
        null == t && (t = !1), null == i && (i = !0);
        var n = this.contains(e.left, e.bottom, i), s = this.contains(e.right, e.bottom, i), r = this.contains(e.left, e.top, i), o = this.contains(e.right, e.top, i);
        return t ? n || s || r || o : n && s && r && o;
    },
    "determineQuadrant": function(e) {
        var t = "", i = this.getCenterLonLat();
        return t += e.lat < i.lat ? "b" : "t", t += e.lon < i.lon ? "l" : "r";
    },
    "transform": function(e, t) {
        this.centerLonLat = null;
        var i = OpenLayers.Projection.transform({
            "x": this.left,
            "y": this.bottom
        }, e, t), n = OpenLayers.Projection.transform({
            "x": this.right,
            "y": this.bottom
        }, e, t), s = OpenLayers.Projection.transform({
            "x": this.left,
            "y": this.top
        }, e, t), r = OpenLayers.Projection.transform({
            "x": this.right,
            "y": this.top
        }, e, t);
        return this.left = Math.min(i.x, s.x), this.bottom = Math.min(i.y, n.y), this.right = Math.max(n.x, r.x), 
        this.top = Math.max(s.y, r.y), this;
    },
    "wrapDateLine": function(e, t) {
        var i = (t = t || {}).leftTolerance || 0, n = t.rightTolerance || 0, s = this.clone();
        if (e) {
            for (var r = e.getWidth(); s.left < e.left && s.right - n <= e.left; ) s = s.add(r, 0);
            for (;s.left + i >= e.right && s.right > e.right; ) s = s.add(-r, 0);
            var o = s.left + i;
            o < e.right && o > e.left && s.right - n > e.right && (s = s.add(-r, 0));
        }
        return s;
    },
    "CLASS_NAME": "OpenLayers.Bounds"
}), OpenLayers.Bounds.fromString = function(e, t) {
    var i = e.split(",");
    return OpenLayers.Bounds.fromArray(i, t);
}, OpenLayers.Bounds.fromArray = function(e, t) {
    return !0 === t ? new OpenLayers.Bounds(e[1], e[0], e[3], e[2]) : new OpenLayers.Bounds(e[0], e[1], e[2], e[3]);
}, OpenLayers.Bounds.fromSize = function(e) {
    return new OpenLayers.Bounds(0, e.h, e.w, 0);
}, OpenLayers.Bounds.oppositeQuadrant = function(e) {
    var t = "";
    return t += "t" == e.charAt(0) ? "b" : "t", t += "l" == e.charAt(1) ? "r" : "l";
}, OpenLayers.Element = {
    "visible": function(e) {
        return "none" != OpenLayers.Util.getElement(e).style.display;
    },
    "toggle": function() {
        for (var e = 0, t = arguments.length; e < t; e++) {
            var i = OpenLayers.Util.getElement(arguments[e]), n = OpenLayers.Element.visible(i) ? "none" : "";
            i.style.display = n;
        }
    },
    "remove": function(e) {
        (e = OpenLayers.Util.getElement(e)).parentNode.removeChild(e);
    },
    "getHeight": function(e) {
        return (e = OpenLayers.Util.getElement(e)).offsetHeight;
    },
    "hasClass": function(e, t) {
        var i = e.className;
        return !!i && new RegExp("(^|\\s)" + t + "(\\s|$)").test(i);
    },
    "addClass": function(e, t) {
        return OpenLayers.Element.hasClass(e, t) || (e.className += (e.className ? " " : "") + t), 
        e;
    },
    "removeClass": function(e, t) {
        var i = e.className;
        return i && (e.className = OpenLayers.String.trim(i.replace(new RegExp("(^|\\s+)" + t + "(\\s+|$)"), " "))), 
        e;
    },
    "toggleClass": function(e, t) {
        return OpenLayers.Element.hasClass(e, t) ? OpenLayers.Element.removeClass(e, t) : OpenLayers.Element.addClass(e, t), 
        e;
    },
    "getStyle": function(e, t) {
        var i = null;
        if ((e = OpenLayers.Util.getElement(e)) && e.style) {
            if (!(i = e.style[OpenLayers.String.camelize(t)])) if (document.defaultView && document.defaultView.getComputedStyle) {
                var n = document.defaultView.getComputedStyle(e, null);
                i = n ? n.getPropertyValue(t) : null;
            } else e.currentStyle && (i = e.currentStyle[OpenLayers.String.camelize(t)]);
            var s = [ "left", "top", "right", "bottom" ];
            window.opera && -1 != OpenLayers.Util.indexOf(s, t) && "static" == OpenLayers.Element.getStyle(e, "position") && (i = "auto");
        }
        return "auto" == i ? null : i;
    }
}, OpenLayers.LonLat = OpenLayers.Class({
    "lon": 0,
    "lat": 0,
    "initialize": function(e, t) {
        OpenLayers.Util.isArray(e) && (t = e[1], e = e[0]), this.lon = OpenLayers.Util.toFloat(e), 
        this.lat = OpenLayers.Util.toFloat(t);
    },
    "toString": function() {
        return "lon=" + this.lon + ",lat=" + this.lat;
    },
    "toShortString": function() {
        return this.lon + ", " + this.lat;
    },
    "clone": function() {
        return new OpenLayers.LonLat(this.lon, this.lat);
    },
    "add": function(e, t) {
        if (null == e || null == t) throw new TypeError("LonLat.add cannot receive null values");
        return new OpenLayers.LonLat(this.lon + OpenLayers.Util.toFloat(e), this.lat + OpenLayers.Util.toFloat(t));
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.lon == e.lon && this.lat == e.lat || isNaN(this.lon) && isNaN(this.lat) && isNaN(e.lon) && isNaN(e.lat)), 
        t;
    },
    "transform": function(e, t) {
        var i = OpenLayers.Projection.transform({
            "x": this.lon,
            "y": this.lat
        }, e, t);
        return this.lon = i.x, this.lat = i.y, this;
    },
    "wrapDateLine": function(e) {
        var t = this.clone();
        if (e) {
            for (;t.lon < e.left; ) t.lon += e.getWidth();
            for (;t.lon > e.right; ) t.lon -= e.getWidth();
        }
        return t;
    },
    "CLASS_NAME": "OpenLayers.LonLat"
}), OpenLayers.LonLat.fromString = function(e) {
    var t = e.split(",");
    return new OpenLayers.LonLat(t[0], t[1]);
}, OpenLayers.LonLat.fromArray = function(e) {
    var t = OpenLayers.Util.isArray(e), i = t && e[0], n = t && e[1];
    return new OpenLayers.LonLat(i, n);
}, OpenLayers.Pixel = OpenLayers.Class({
    "x": 0,
    "y": 0,
    "initialize": function(e, t) {
        this.x = parseFloat(e), this.y = parseFloat(t);
    },
    "toString": function() {
        return "x=" + this.x + ",y=" + this.y;
    },
    "clone": function() {
        return new OpenLayers.Pixel(this.x, this.y);
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.x == e.x && this.y == e.y || isNaN(this.x) && isNaN(this.y) && isNaN(e.x) && isNaN(e.y)), 
        t;
    },
    "distanceTo": function(e) {
        return Math.sqrt(Math.pow(this.x - e.x, 2) + Math.pow(this.y - e.y, 2));
    },
    "add": function(e, t) {
        if (null == e || null == t) throw new TypeError("Pixel.add cannot receive null values");
        return new OpenLayers.Pixel(this.x + e, this.y + t);
    },
    "offset": function(e) {
        var t = this.clone();
        return e && (t = this.add(e.x, e.y)), t;
    },
    "CLASS_NAME": "OpenLayers.Pixel"
}), OpenLayers.Size = OpenLayers.Class({
    "w": 0,
    "h": 0,
    "initialize": function(e, t) {
        this.w = parseFloat(e), this.h = parseFloat(t);
    },
    "toString": function() {
        return "w=" + this.w + ",h=" + this.h;
    },
    "clone": function() {
        return new OpenLayers.Size(this.w, this.h);
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.w == e.w && this.h == e.h || isNaN(this.w) && isNaN(this.h) && isNaN(e.w) && isNaN(e.h)), 
        t;
    },
    "CLASS_NAME": "OpenLayers.Size"
}), OpenLayers.Lang = {
    "code": null,
    "defaultCode": "en",
    "getCode": function() {
        return OpenLayers.Lang.code || OpenLayers.Lang.setCode(), OpenLayers.Lang.code;
    },
    "setCode": function(e) {
        var t;
        e || (e = "msie" == OpenLayers.BROWSER_NAME ? navigator.userLanguage : navigator.language);
        var i = e.split("-");
        if (i[0] = i[0].toLowerCase(), "object" == typeof OpenLayers.Lang[i[0]] && (t = i[0]), 
        i[1]) {
            var n = i[0] + "-" + i[1].toUpperCase();
            "object" == typeof OpenLayers.Lang[n] && (t = n);
        }
        t || (OpenLayers.Console.warn("Failed to find OpenLayers.Lang." + i.join("-") + " dictionary, falling back to default language"), 
        t = OpenLayers.Lang.defaultCode), OpenLayers.Lang.code = t;
    },
    "translate": function(e, t) {
        var i = OpenLayers.Lang[OpenLayers.Lang.getCode()], n = i && i[e];
        return n || (n = e), t && (n = OpenLayers.String.format(n, t)), n;
    }
}, OpenLayers.i18n = OpenLayers.Lang.translate, OpenLayers.Util = OpenLayers.Util || {}, 
OpenLayers.Util.getElement = function() {
    for (var e = [], t = 0, i = arguments.length; t < i; t++) {
        var n = arguments[t];
        if ("string" == typeof n && (n = document.getElementById(n)), 1 == arguments.length) return n;
        e.push(n);
    }
    return e;
}, OpenLayers.Util.isElement = function(e) {
    return !(!e || 1 !== e.nodeType);
}, OpenLayers.Util.isArray = function(e) {
    return "[object Array]" === Object.prototype.toString.call(e);
}, OpenLayers.Util.removeItem = function(e, t) {
    for (var i = e.length - 1; i >= 0; i--) e[i] == t && e.splice(i, 1);
    return e;
}, OpenLayers.Util.indexOf = function(e, t) {
    if ("function" == typeof e.indexOf) return e.indexOf(t);
    for (var i = 0, n = e.length; i < n; i++) if (e[i] == t) return i;
    return -1;
}, OpenLayers.Util.dotless = /\./g, OpenLayers.Util.modifyDOMElement = function(e, t, i, n, s, r, o, a) {
    t && (e.id = t.replace(OpenLayers.Util.dotless, "_")), i && (e.style.left = i.x + "px", 
    e.style.top = i.y + "px"), n && (e.style.width = n.w + "px", e.style.height = n.h + "px"), 
    s && (e.style.position = s), r && (e.style.border = r), o && (e.style.overflow = o), 
    parseFloat(a) >= 0 && parseFloat(a) < 1 ? (e.style.filter = "alpha(opacity=" + 100 * a + ")", 
    e.style.opacity = a) : 1 == parseFloat(a) && (e.style.filter = "", e.style.opacity = "");
}, OpenLayers.Util.createDiv = function(e, t, i, n, s, r, o, a) {
    var l = document.createElement("div");
    return n && (l.style.backgroundImage = "url(" + n + ")"), e || (e = OpenLayers.Util.createUniqueID("OpenLayersDiv")), 
    s || (s = "absolute"), OpenLayers.Util.modifyDOMElement(l, e, t, i, s, r, o, a), 
    l;
}, OpenLayers.Util.createImage = function(e, t, i, n, s, r, o, a) {
    function l() {
        h.style.display = "", OpenLayers.Event.stopObservingElement(h);
    }
    var h = document.createElement("img");
    return e || (e = OpenLayers.Util.createUniqueID("OpenLayersDiv")), s || (s = "relative"), 
    OpenLayers.Util.modifyDOMElement(h, e, t, i, s, r, null, o), a && (h.style.display = "none", 
    OpenLayers.Event.observe(h, "load", l), OpenLayers.Event.observe(h, "error", l)), 
    h.style.alt = e, h.galleryImg = "no", n && (h.src = n), h;
}, OpenLayers.IMAGE_RELOAD_ATTEMPTS = 0, OpenLayers.Util.alphaHackNeeded = null, 
OpenLayers.Util.alphaHack = function() {
    if (null == OpenLayers.Util.alphaHackNeeded) {
        var e = navigator.appVersion.split("MSIE"), t = parseFloat(e[1]), i = !1;
        try {
            i = !!document.body.filters;
        } catch (e) {}
        OpenLayers.Util.alphaHackNeeded = i && t >= 5.5 && t < 7;
    }
    return OpenLayers.Util.alphaHackNeeded;
}, OpenLayers.Util.modifyAlphaImageDiv = function(e, t, i, n, s, r, o, a, l) {
    OpenLayers.Util.modifyDOMElement(e, t, i, n, r, null, null, l);
    var h = e.childNodes[0];
    s && (h.src = s), OpenLayers.Util.modifyDOMElement(h, e.id + "_innerImage", null, n, "relative", o), 
    OpenLayers.Util.alphaHack() && ("none" != e.style.display && (e.style.display = "inline-block"), 
    null == a && (a = "scale"), e.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + h.src + "', sizingMethod='" + a + "')", 
    parseFloat(e.style.opacity) >= 0 && parseFloat(e.style.opacity) < 1 && (e.style.filter += " alpha(opacity=" + 100 * e.style.opacity + ")"), 
    h.style.filter = "alpha(opacity=0)");
}, OpenLayers.Util.createAlphaImageDiv = function(e, t, i, n, s, r, o, a, l) {
    var h = OpenLayers.Util.createDiv(), c = OpenLayers.Util.createImage(null, null, null, null, null, null, null, l);
    return c.className = "olAlphaImg", h.appendChild(c), OpenLayers.Util.modifyAlphaImageDiv(h, e, t, i, n, s, r, o, a), 
    h;
}, OpenLayers.Util.upperCaseObject = function(e) {
    var t = {};
    for (var i in e) t[i.toUpperCase()] = e[i];
    return t;
}, OpenLayers.Util.applyDefaults = function(e, t) {
    e = e || {};
    var i = "function" == typeof window.Event && t instanceof window.Event;
    for (var n in t) (void 0 === e[n] || !i && t.hasOwnProperty && t.hasOwnProperty(n) && !e.hasOwnProperty(n)) && (e[n] = t[n]);
    return !i && t && t.hasOwnProperty && t.hasOwnProperty("toString") && !e.hasOwnProperty("toString") && (e.toString = t.toString), 
    e;
}, OpenLayers.Util.getParameterString = function(e) {
    var t = [];
    for (var i in e) {
        var n = e[i];
        if (null != n && "function" != typeof n) {
            var s;
            if ("object" == typeof n && n.constructor == Array) {
                for (var r, o = [], a = 0, l = n.length; a < l; a++) r = n[a], o.push(encodeURIComponent(null === r || void 0 === r ? "" : r));
                s = o.join(",");
            } else s = encodeURIComponent(n);
            t.push(encodeURIComponent(i) + "=" + s);
        }
    }
    return t.join("&");
}, OpenLayers.Util.urlAppend = function(e, t) {
    var i = e;
    if (t) {
        var n = (e + " ").split(/[?&]/);
        i += " " === n.pop() ? t : n.length ? "&" + t : "?" + t;
    }
    return i;
}, OpenLayers.Util.getImagesLocation = function() {
    return OpenLayers.ImgPath || OpenLayers._getScriptLocation() + "img/";
}, OpenLayers.Util.getImageLocation = function(e) {
    return OpenLayers.Util.getImagesLocation() + e;
}, OpenLayers.Util.Try = function() {
    for (var e = null, t = 0, i = arguments.length; t < i; t++) {
        var n = arguments[t];
        try {
            e = n();
            break;
        } catch (e) {}
    }
    return e;
}, OpenLayers.Util.getXmlNodeValue = function(e) {
    var t = null;
    return OpenLayers.Util.Try(function() {
        (t = e.text) || (t = e.textContent), t || (t = e.firstChild.nodeValue);
    }, function() {
        t = e.textContent;
    }), t;
}, OpenLayers.Util.mouseLeft = function(e, t) {
    for (var i = e.relatedTarget ? e.relatedTarget : e.toElement; i != t && null != i; ) i = i.parentNode;
    return i != t;
}, OpenLayers.Util.DEFAULT_PRECISION = 14, OpenLayers.Util.toFloat = function(e, t) {
    return null == t && (t = OpenLayers.Util.DEFAULT_PRECISION), "number" != typeof e && (e = parseFloat(e)), 
    0 === t ? e : parseFloat(e.toPrecision(t));
}, OpenLayers.Util.rad = function(e) {
    return e * Math.PI / 180;
}, OpenLayers.Util.deg = function(e) {
    return 180 * e / Math.PI;
}, OpenLayers.Util.VincentyConstants = {
    "a": 6378137,
    "b": 6356752.3142,
    "f": 1 / 298.257223563
}, OpenLayers.Util.distVincenty = function(e, t) {
    for (var i = OpenLayers.Util.VincentyConstants, n = i.a, s = i.b, r = i.f, o = OpenLayers.Util.rad(t.lon - e.lon), a = Math.atan((1 - r) * Math.tan(OpenLayers.Util.rad(e.lat))), l = Math.atan((1 - r) * Math.tan(OpenLayers.Util.rad(t.lat))), h = Math.sin(a), c = Math.cos(a), u = Math.sin(l), p = Math.cos(l), d = o, f = 2 * Math.PI, m = 20; Math.abs(d - f) > 1e-12 && --m > 0; ) {
        var g = Math.sin(d), y = Math.cos(d), v = Math.sqrt(p * g * (p * g) + (c * u - h * p * y) * (c * u - h * p * y));
        if (0 == v) return 0;
        var L = h * u + c * p * y, w = Math.atan2(v, L), b = Math.asin(c * p * g / v), C = Math.cos(b) * Math.cos(b), O = L - 2 * h * u / C, S = r / 16 * C * (4 + r * (4 - 3 * C));
        f = d, d = o + (1 - S) * r * Math.sin(b) * (w + S * v * (O + S * L * (2 * O * O - 1)));
    }
    if (0 == m) return NaN;
    var x = C * (n * n - s * s) / (s * s), E = x / 1024 * (256 + x * (x * (74 - 47 * x) - 128));
    return (s * (1 + x / 16384 * (4096 + x * (x * (320 - 175 * x) - 768))) * (w - E * v * (O + E / 4 * (L * (2 * O * O - 1) - E / 6 * O * (4 * v * v - 3) * (4 * O * O - 3))))).toFixed(3) / 1e3;
}, OpenLayers.Util.destinationVincenty = function(e, t, i) {
    for (var n = OpenLayers.Util, s = n.VincentyConstants, r = s.a, o = s.b, a = s.f, l = e.lon, h = e.lat, c = i, u = n.rad(t), p = Math.sin(u), d = Math.cos(u), f = (1 - a) * Math.tan(n.rad(h)), m = 1 / Math.sqrt(1 + f * f), g = f * m, y = Math.atan2(f, d), v = m * p, L = 1 - v * v, w = L * (r * r - o * o) / (o * o), b = 1 + w / 16384 * (4096 + w * (w * (320 - 175 * w) - 768)), C = w / 1024 * (256 + w * (w * (74 - 47 * w) - 128)), O = c / (o * b), S = 2 * Math.PI; Math.abs(O - S) > 1e-12; ) {
        var x = Math.cos(2 * y + O), E = Math.sin(O), A = Math.cos(O);
        S = O, O = c / (o * b) + C * E * (x + C / 4 * (A * (2 * x * x - 1) - C / 6 * x * (4 * E * E - 3) * (4 * x * x - 3)));
    }
    var _ = g * E - m * A * d, F = Math.atan2(g * A + m * E * d, (1 - a) * Math.sqrt(v * v + _ * _)), N = a / 16 * L * (4 + a * (4 - 3 * L)), T = Math.atan2(E * p, m * A - g * E * d) - (1 - N) * a * v * (O + N * E * (x + N * A * (2 * x * x - 1)));
    Math.atan2(v, -_);
    return new OpenLayers.LonLat(l + n.deg(T), n.deg(F));
}, OpenLayers.Util.getParameters = function(e, t) {
    t = t || {}, e = null === e || void 0 === e ? window.location.href : e;
    var i = "";
    if (OpenLayers.String.contains(e, "?")) {
        var n = e.indexOf("?") + 1, s = OpenLayers.String.contains(e, "#") ? e.indexOf("#") : e.length;
        i = e.substring(n, s);
    }
    for (var r = {}, o = i.split(/[&;]/), a = 0, l = o.length; a < l; ++a) {
        var h = o[a].split("=");
        if (h[0]) {
            var c = h[0];
            try {
                c = decodeURIComponent(c);
            } catch (e) {
                c = unescape(c);
            }
            var u = (h[1] || "").replace(/\+/g, " ");
            try {
                u = decodeURIComponent(u);
            } catch (e) {
                u = unescape(u);
            }
            !1 !== t.splitArgs && (u = u.split(",")), 1 == u.length && (u = u[0]), r[c] = u;
        }
    }
    return r;
}, OpenLayers.Util.lastSeqID = 0, OpenLayers.Util.createUniqueID = function(e) {
    return e = null == e ? "id_" : e.replace(OpenLayers.Util.dotless, "_"), OpenLayers.Util.lastSeqID += 1, 
    e + OpenLayers.Util.lastSeqID;
}, OpenLayers.INCHES_PER_UNIT = {
    "inches": 1,
    "ft": 12,
    "mi": 63360,
    "m": 39.37,
    "km": 39370,
    "dd": 4374754,
    "yd": 36
}, OpenLayers.INCHES_PER_UNIT.in = OpenLayers.INCHES_PER_UNIT.inches, OpenLayers.INCHES_PER_UNIT.degrees = OpenLayers.INCHES_PER_UNIT.dd, 
OpenLayers.INCHES_PER_UNIT.nmi = 1852 * OpenLayers.INCHES_PER_UNIT.m, OpenLayers.METERS_PER_INCH = .0254000508001016, 
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {
    "Inch": OpenLayers.INCHES_PER_UNIT.inches,
    "Meter": 1 / OpenLayers.METERS_PER_INCH,
    "Foot": .3048006096012192 / OpenLayers.METERS_PER_INCH,
    "IFoot": .3048 / OpenLayers.METERS_PER_INCH,
    "ClarkeFoot": .3047972651151 / OpenLayers.METERS_PER_INCH,
    "SearsFoot": .30479947153867626 / OpenLayers.METERS_PER_INCH,
    "GoldCoastFoot": .3047997101815088 / OpenLayers.METERS_PER_INCH,
    "IInch": .0254 / OpenLayers.METERS_PER_INCH,
    "MicroInch": 254e-7 / OpenLayers.METERS_PER_INCH,
    "Mil": 2.54e-8 / OpenLayers.METERS_PER_INCH,
    "Centimeter": .01 / OpenLayers.METERS_PER_INCH,
    "Kilometer": 1e3 / OpenLayers.METERS_PER_INCH,
    "Yard": .9144018288036576 / OpenLayers.METERS_PER_INCH,
    "SearsYard": .914398414616029 / OpenLayers.METERS_PER_INCH,
    "IndianYard": .9143985307444408 / OpenLayers.METERS_PER_INCH,
    "IndianYd37": .91439523 / OpenLayers.METERS_PER_INCH,
    "IndianYd62": .9143988 / OpenLayers.METERS_PER_INCH,
    "IndianYd75": .9143985 / OpenLayers.METERS_PER_INCH,
    "IndianFoot": .30479951 / OpenLayers.METERS_PER_INCH,
    "IndianFt37": .30479841 / OpenLayers.METERS_PER_INCH,
    "IndianFt62": .3047996 / OpenLayers.METERS_PER_INCH,
    "IndianFt75": .3047995 / OpenLayers.METERS_PER_INCH,
    "Mile": 1609.3472186944373 / OpenLayers.METERS_PER_INCH,
    "IYard": .9144 / OpenLayers.METERS_PER_INCH,
    "IMile": 1609.344 / OpenLayers.METERS_PER_INCH,
    "NautM": 1852 / OpenLayers.METERS_PER_INCH,
    "Lat-66": 110943.31648893273 / OpenLayers.METERS_PER_INCH,
    "Lat-83": 110946.25736872235 / OpenLayers.METERS_PER_INCH,
    "Decimeter": .1 / OpenLayers.METERS_PER_INCH,
    "Millimeter": .001 / OpenLayers.METERS_PER_INCH,
    "Dekameter": 10 / OpenLayers.METERS_PER_INCH,
    "Decameter": 10 / OpenLayers.METERS_PER_INCH,
    "Hectometer": 100 / OpenLayers.METERS_PER_INCH,
    "GermanMeter": 1.0000135965 / OpenLayers.METERS_PER_INCH,
    "CaGrid": .999738 / OpenLayers.METERS_PER_INCH,
    "ClarkeChain": 20.1166194976 / OpenLayers.METERS_PER_INCH,
    "GunterChain": 20.11684023368047 / OpenLayers.METERS_PER_INCH,
    "BenoitChain": 20.116782494375872 / OpenLayers.METERS_PER_INCH,
    "SearsChain": 20.11676512155 / OpenLayers.METERS_PER_INCH,
    "ClarkeLink": .201166194976 / OpenLayers.METERS_PER_INCH,
    "GunterLink": .2011684023368047 / OpenLayers.METERS_PER_INCH,
    "BenoitLink": .20116782494375873 / OpenLayers.METERS_PER_INCH,
    "SearsLink": .2011676512155 / OpenLayers.METERS_PER_INCH,
    "Rod": 5.02921005842012 / OpenLayers.METERS_PER_INCH,
    "IntnlChain": 20.1168 / OpenLayers.METERS_PER_INCH,
    "IntnlLink": .201168 / OpenLayers.METERS_PER_INCH,
    "Perch": 5.02921005842012 / OpenLayers.METERS_PER_INCH,
    "Pole": 5.02921005842012 / OpenLayers.METERS_PER_INCH,
    "Furlong": 201.1684023368046 / OpenLayers.METERS_PER_INCH,
    "Rood": 3.778266898 / OpenLayers.METERS_PER_INCH,
    "CapeFoot": .3047972615 / OpenLayers.METERS_PER_INCH,
    "Brealey": 375 / OpenLayers.METERS_PER_INCH,
    "ModAmFt": .304812252984506 / OpenLayers.METERS_PER_INCH,
    "Fathom": 1.8288 / OpenLayers.METERS_PER_INCH,
    "NautM-UK": 1853.184 / OpenLayers.METERS_PER_INCH,
    "50kilometers": 5e4 / OpenLayers.METERS_PER_INCH,
    "150kilometers": 15e4 / OpenLayers.METERS_PER_INCH
}), OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {
    "mm": OpenLayers.INCHES_PER_UNIT.Meter / 1e3,
    "cm": OpenLayers.INCHES_PER_UNIT.Meter / 100,
    "dm": 100 * OpenLayers.INCHES_PER_UNIT.Meter,
    "km": 1e3 * OpenLayers.INCHES_PER_UNIT.Meter,
    "kmi": OpenLayers.INCHES_PER_UNIT.nmi,
    "fath": OpenLayers.INCHES_PER_UNIT.Fathom,
    "ch": OpenLayers.INCHES_PER_UNIT.IntnlChain,
    "link": OpenLayers.INCHES_PER_UNIT.IntnlLink,
    "us-in": OpenLayers.INCHES_PER_UNIT.inches,
    "us-ft": OpenLayers.INCHES_PER_UNIT.Foot,
    "us-yd": OpenLayers.INCHES_PER_UNIT.Yard,
    "us-ch": OpenLayers.INCHES_PER_UNIT.GunterChain,
    "us-mi": OpenLayers.INCHES_PER_UNIT.Mile,
    "ind-yd": OpenLayers.INCHES_PER_UNIT.IndianYd37,
    "ind-ft": OpenLayers.INCHES_PER_UNIT.IndianFt37,
    "ind-ch": 20.11669506 / OpenLayers.METERS_PER_INCH
}), OpenLayers.DOTS_PER_INCH = 72, OpenLayers.Util.normalizeScale = function(e) {
    return e > 1 ? 1 / e : e;
}, OpenLayers.Util.getResolutionFromScale = function(e, t) {
    var i;
    return e && (null == t && (t = "degrees"), i = 1 / (OpenLayers.Util.normalizeScale(e) * OpenLayers.INCHES_PER_UNIT[t] * OpenLayers.DOTS_PER_INCH)), 
    i;
}, OpenLayers.Util.getScaleFromResolution = function(e, t) {
    return null == t && (t = "degrees"), e * OpenLayers.INCHES_PER_UNIT[t] * OpenLayers.DOTS_PER_INCH;
}, OpenLayers.Util.pagePosition = function(e) {
    var t = [ 0, 0 ], i = OpenLayers.Util.getViewportElement();
    if (!e || e == window || e == i) return t;
    var n, s = OpenLayers.IS_GECKO && document.getBoxObjectFor && "absolute" == OpenLayers.Element.getStyle(e, "position") && ("" == e.style.top || "" == e.style.left), r = null;
    if (e.getBoundingClientRect) {
        n = e.getBoundingClientRect();
        var o = window.pageYOffset || i.scrollTop, a = window.pageXOffset || i.scrollLeft;
        t[0] = n.left + a, t[1] = n.top + o;
    } else if (document.getBoxObjectFor && !s) {
        n = document.getBoxObjectFor(e);
        var l = document.getBoxObjectFor(i);
        t[0] = n.screenX - l.screenX, t[1] = n.screenY - l.screenY;
    } else {
        if (t[0] = e.offsetLeft, t[1] = e.offsetTop, (r = e.offsetParent) != e) for (;r; ) t[0] += r.offsetLeft, 
        t[1] += r.offsetTop, r = r.offsetParent;
        var h = OpenLayers.BROWSER_NAME;
        for (("opera" == h || "safari" == h && "absolute" == OpenLayers.Element.getStyle(e, "position")) && (t[1] -= document.body.offsetTop), 
        r = e.offsetParent; r && r != document.body; ) t[0] -= r.scrollLeft, "opera" == h && "TR" == r.tagName || (t[1] -= r.scrollTop), 
        r = r.offsetParent;
    }
    return t;
}, OpenLayers.Util.getViewportElement = function() {
    var e = arguments.callee.viewportElement;
    return void 0 == e && (e = "msie" == OpenLayers.BROWSER_NAME && "CSS1Compat" != document.compatMode ? document.body : document.documentElement, 
    arguments.callee.viewportElement = e), e;
}, OpenLayers.Util.isEquivalentUrl = function(e, t, i) {
    i = i || {}, OpenLayers.Util.applyDefaults(i, {
        "ignoreCase": !0,
        "ignorePort80": !0,
        "ignoreHash": !0,
        "splitArgs": !1
    });
    var n = OpenLayers.Util.createUrlObject(e, i), s = OpenLayers.Util.createUrlObject(t, i);
    for (var r in n) if ("args" !== r && n[r] != s[r]) return !1;
    for (var r in n.args) {
        if (n.args[r] != s.args[r]) return !1;
        delete s.args[r];
    }
    for (var r in s.args) return !1;
    return !0;
}, OpenLayers.Util.createUrlObject = function(e, t) {
    if (t = t || {}, !/^\w+:\/\//.test(e)) {
        var i = window.location, n = i.port ? ":" + i.port : "", s = i.protocol + "//" + i.host.split(":").shift() + n;
        if (0 === e.indexOf("/")) e = s + e; else {
            var r = i.pathname.split("/");
            r.pop(), e = s + r.join("/") + "/" + e;
        }
    }
    t.ignoreCase && (e = e.toLowerCase());
    var o = document.createElement("a");
    o.href = e;
    var a = {};
    a.host = o.host.split(":").shift(), a.protocol = o.protocol, t.ignorePort80 ? a.port = "80" == o.port || "0" == o.port ? "" : o.port : a.port = "" == o.port || "0" == o.port ? "80" : o.port, 
    a.hash = t.ignoreHash || "#" === o.hash ? "" : o.hash;
    var l = o.search;
    if (!l) {
        var h = e.indexOf("?");
        l = -1 != h ? e.substr(h) : "";
    }
    return a.args = OpenLayers.Util.getParameters(l, {
        "splitArgs": t.splitArgs
    }), a.pathname = "/" == o.pathname.charAt(0) ? o.pathname : "/" + o.pathname, a;
}, OpenLayers.Util.removeTail = function(e) {
    var t = e.indexOf("?"), i = e.indexOf("#");
    return -1 == t ? -1 != i ? e.substr(0, i) : e : -1 != i ? e.substr(0, Math.min(t, i)) : e.substr(0, t);
}, OpenLayers.IS_GECKO = function() {
    var e = navigator.userAgent.toLowerCase();
    return -1 == e.indexOf("webkit") && -1 != e.indexOf("gecko");
}(), OpenLayers.CANVAS_SUPPORTED = function() {
    var e = document.createElement("canvas");
    return !(!e.getContext || !e.getContext("2d"));
}(), OpenLayers.BROWSER_NAME = function() {
    var e = "", t = navigator.userAgent.toLowerCase();
    return -1 != t.indexOf("opera") ? e = "opera" : -1 != t.indexOf("msie") ? e = "msie" : -1 != t.indexOf("safari") ? e = "safari" : -1 != t.indexOf("mozilla") && (e = -1 != t.indexOf("firefox") ? "firefox" : "mozilla"), 
    e;
}(), OpenLayers.Util.getBrowserName = function() {
    return OpenLayers.BROWSER_NAME;
}, OpenLayers.Util.getRenderedDimensions = function(e, t, i) {
    var n, s, r = document.createElement("div");
    r.style.visibility = "hidden";
    for (var o = i && i.containerElement ? i.containerElement : document.body, a = !1, l = null, h = o; h && "body" != h.tagName.toLowerCase(); ) {
        var c = OpenLayers.Element.getStyle(h, "position");
        if ("absolute" == c) {
            a = !0;
            break;
        }
        if (c && "static" != c) break;
        h = h.parentNode;
    }
    !a || 0 !== o.clientHeight && 0 !== o.clientWidth || ((l = document.createElement("div")).style.visibility = "hidden", 
    l.style.position = "absolute", l.style.overflow = "visible", l.style.width = document.body.clientWidth + "px", 
    l.style.height = document.body.clientHeight + "px", l.appendChild(r)), r.style.position = "absolute", 
    t && (t.w ? (n = t.w, r.style.width = n + "px") : t.h && (s = t.h, r.style.height = s + "px")), 
    i && i.displayClass && (r.className = i.displayClass);
    var u = document.createElement("div");
    if (u.innerHTML = e, u.style.overflow = "visible", u.childNodes) for (var p = 0, d = u.childNodes.length; p < d; p++) u.childNodes[p].style && (u.childNodes[p].style.overflow = "visible");
    return r.appendChild(u), l ? o.appendChild(l) : o.appendChild(r), n || (n = parseInt(u.scrollWidth), 
    r.style.width = n + "px"), s || (s = parseInt(u.scrollHeight)), r.removeChild(u), 
    l ? (l.removeChild(r), o.removeChild(l)) : o.removeChild(r), new OpenLayers.Size(n, s);
}, OpenLayers.Util.getScrollbarWidth = function() {
    var e = OpenLayers.Util._scrollbarWidth;
    if (null == e) {
        var t = null, i = null, n = 0, s = 0;
        (t = document.createElement("div")).style.position = "absolute", t.style.top = "-1000px", 
        t.style.left = "-1000px", t.style.width = "100px", t.style.height = "50px", t.style.overflow = "hidden", 
        (i = document.createElement("div")).style.width = "100%", i.style.height = "200px", 
        t.appendChild(i), document.body.appendChild(t), n = i.offsetWidth, t.style.overflow = "scroll", 
        s = i.offsetWidth, document.body.removeChild(document.body.lastChild), OpenLayers.Util._scrollbarWidth = n - s, 
        e = OpenLayers.Util._scrollbarWidth;
    }
    return e;
}, OpenLayers.Util.getFormattedLonLat = function(e, t, i) {
    i || (i = "dms"), e = (e + 540) % 360 - 180;
    var n = Math.abs(e), s = Math.floor(n), r = (n - s) / (1 / 60), o = (r - (r = Math.floor(r))) / (1 / 60);
    o = Math.round(10 * o), (o /= 10) >= 60 && (o -= 60, (r += 1) >= 60 && (r -= 60, 
    s += 1)), s < 10 && (s = "0" + s);
    var a = s + "°";
    return i.indexOf("dm") >= 0 && (r < 10 && (r = "0" + r), a += r + "'", i.indexOf("dms") >= 0 && (o < 10 && (o = "0" + o), 
    a += o + '"')), a += "lon" == t ? e < 0 ? OpenLayers.i18n("W") : OpenLayers.i18n("E") : e < 0 ? OpenLayers.i18n("S") : OpenLayers.i18n("N");
}, OpenLayers.Util.getConstructor = function(e) {
    var t, i = e.split(".");
    t = "OpenLayers" === i[0] ? OpenLayers : window[i[0]];
    for (var n = 1, s = i.length; n < s; ++n) t = t[i[n]];
    return t;
}, OpenLayers.Event = {
    "observers": !1,
    "KEY_SPACE": 32,
    "KEY_BACKSPACE": 8,
    "KEY_TAB": 9,
    "KEY_RETURN": 13,
    "KEY_ESC": 27,
    "KEY_LEFT": 37,
    "KEY_UP": 38,
    "KEY_RIGHT": 39,
    "KEY_DOWN": 40,
    "KEY_DELETE": 46,
    "element": function(e) {
        return e.target || e.srcElement;
    },
    "isSingleTouch": function(e) {
        return e.touches && 1 == e.touches.length;
    },
    "isMultiTouch": function(e) {
        return e.touches && e.touches.length > 1;
    },
    "isTouchEvent": function(e) {
        return 0 === ("" + e.type).indexOf("touch") || "pointerType" in e && (e.pointerType === e.MSPOINTER_TYPE_TOUCH || "touch" === e.pointerType);
    },
    "isLeftClick": function(e) {
        return e.which && 1 == e.which || e.button && 1 == e.button;
    },
    "isRightClick": function(e) {
        return e.which && 3 == e.which || e.button && 2 == e.button;
    },
    "stop": function(e, t) {
        t || OpenLayers.Event.preventDefault(e), e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0;
    },
    "preventDefault": function(e) {
        e.preventDefault ? e.preventDefault() : e.returnValue = !1;
    },
    "findElement": function(e, t) {
        for (var i = OpenLayers.Event.element(e); i.parentNode && (!i.tagName || i.tagName.toUpperCase() != t.toUpperCase()); ) i = i.parentNode;
        return i;
    },
    "observe": function(e, t, i, n) {
        var s = OpenLayers.Util.getElement(e);
        if (n = n || !1, "keypress" == t && (navigator.appVersion.match(/Konqueror|Safari|KHTML/) || s.attachEvent) && (t = "keydown"), 
        this.observers || (this.observers = {}), !s._eventCacheID) {
            var r = "eventCacheID_";
            s.id && (r = s.id + "_" + r), s._eventCacheID = OpenLayers.Util.createUniqueID(r);
        }
        var o = s._eventCacheID;
        this.observers[o] || (this.observers[o] = []), this.observers[o].push({
            "element": s,
            "name": t,
            "observer": i,
            "useCapture": n
        }), s.addEventListener ? s.addEventListener(t, i, n) : s.attachEvent && s.attachEvent("on" + t, i);
    },
    "stopObservingElement": function(e) {
        var t = OpenLayers.Util.getElement(e)._eventCacheID;
        this._removeElementObservers(OpenLayers.Event.observers[t]);
    },
    "_removeElementObservers": function(e) {
        if (e) for (var t = e.length - 1; t >= 0; t--) {
            var i = e[t];
            OpenLayers.Event.stopObserving.apply(this, [ i.element, i.name, i.observer, i.useCapture ]);
        }
    },
    "stopObserving": function(e, t, i, n) {
        n = n || !1;
        var s = OpenLayers.Util.getElement(e), r = s._eventCacheID;
        "keypress" == t && (navigator.appVersion.match(/Konqueror|Safari|KHTML/) || s.detachEvent) && (t = "keydown");
        var o = !1, a = OpenLayers.Event.observers[r];
        if (a) for (var l = 0; !o && l < a.length; ) {
            var h = a[l];
            if (h.name == t && h.observer == i && h.useCapture == n) {
                a.splice(l, 1), 0 == a.length && delete OpenLayers.Event.observers[r], o = !0;
                break;
            }
            l++;
        }
        return o && (s.removeEventListener ? s.removeEventListener(t, i, n) : s && s.detachEvent && s.detachEvent("on" + t, i)), 
        o;
    },
    "unloadCache": function() {
        if (OpenLayers.Event && OpenLayers.Event.observers) {
            for (var e in OpenLayers.Event.observers) {
                var t = OpenLayers.Event.observers[e];
                OpenLayers.Event._removeElementObservers.apply(this, [ t ]);
            }
            OpenLayers.Event.observers = !1;
        }
    },
    "CLASS_NAME": "OpenLayers.Event"
}, OpenLayers.Event.observe(window, "unload", OpenLayers.Event.unloadCache, !1), 
OpenLayers.Events = OpenLayers.Class({
    "BROWSER_EVENTS": [ "mouseover", "mouseout", "mousedown", "mouseup", "mousemove", "click", "dblclick", "rightclick", "dblrightclick", "resize", "focus", "blur", "touchstart", "touchmove", "touchend", "keydown" ],
    "TOUCH_MODEL_POINTER": "pointer",
    "TOUCH_MODEL_MSPOINTER": "MSPointer",
    "TOUCH_MODEL_TOUCH": "touch",
    "listeners": null,
    "object": null,
    "element": null,
    "eventHandler": null,
    "fallThrough": null,
    "includeXY": !1,
    "extensions": null,
    "extensionCount": null,
    "clearMouseListener": null,
    "initialize": function(e, t, i, n, s) {
        OpenLayers.Util.extend(this, s), this.object = e, this.fallThrough = n, this.listeners = {}, 
        this.extensions = {}, this.extensionCount = {}, this._pointerTouches = [], null != t && this.attachToElement(t);
    },
    "destroy": function() {
        for (var e in this.extensions) "boolean" != typeof this.extensions[e] && this.extensions[e].destroy();
        this.extensions = null, this.element && (OpenLayers.Event.stopObservingElement(this.element), 
        this.element.hasScrollEvent && OpenLayers.Event.stopObserving(window, "scroll", this.clearMouseListener)), 
        this.element = null, this.listeners = null, this.object = null, this.fallThrough = null, 
        this.eventHandler = null;
    },
    "addEventType": function(e) {},
    "attachToElement": function(e) {
        this.element ? OpenLayers.Event.stopObservingElement(this.element) : (this.eventHandler = OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent, this), 
        this.clearMouseListener = OpenLayers.Function.bind(this.clearMouseCache, this)), 
        this.element = e;
        for (var t, i = this.getTouchModel(), n = 0, s = this.BROWSER_EVENTS.length; n < s; n++) t = this.BROWSER_EVENTS[n], 
        i !== this.TOUCH_MODEL_POINTER && i !== this.TOUCH_MODEL_MSPOINTER || 0 !== t.indexOf("touch") ? OpenLayers.Event.observe(e, t, this.eventHandler) : this.addPointerTouchListener(e, t, this.eventHandler);
        OpenLayers.Event.observe(e, "dragstart", OpenLayers.Event.stop);
    },
    "on": function(e) {
        for (var t in e) "scope" != t && e.hasOwnProperty(t) && this.register(t, e.scope, e[t]);
    },
    "register": function(e, t, i, n) {
        if (e in OpenLayers.Events && !this.extensions[e] && (this.extensions[e] = new OpenLayers.Events[e](this)), 
        null != i) {
            null == t && (t = this.object);
            var s = this.listeners[e];
            s || (s = [], this.listeners[e] = s, this.extensionCount[e] = 0);
            var r = {
                "obj": t,
                "func": i
            };
            n ? (s.splice(this.extensionCount[e], 0, r), "object" == typeof n && n.extension && this.extensionCount[e]++) : s.push(r);
        }
    },
    "registerPriority": function(e, t, i) {
        this.register(e, t, i, !0);
    },
    "un": function(e) {
        for (var t in e) "scope" != t && e.hasOwnProperty(t) && this.unregister(t, e.scope, e[t]);
    },
    "unregister": function(e, t, i) {
        null == t && (t = this.object);
        var n = this.listeners[e];
        if (null != n) for (var s = 0, r = n.length; s < r; s++) if (n[s].obj == t && n[s].func == i) {
            n.splice(s, 1);
            break;
        }
    },
    "remove": function(e) {
        null != this.listeners[e] && (this.listeners[e] = []);
    },
    "triggerEvent": function(e, t) {
        var i = this.listeners[e];
        if (i && 0 != i.length) {
            null == t && (t = {}), t.object = this.object, t.element = this.element, t.type || (t.type = e);
            for (var n, s = 0, r = (i = i.slice()).length; s < r; s++) {
                var o = i[s];
                if (void 0 != (n = o.func.apply(o.obj, [ t ])) && 0 == n) break;
            }
            return this.fallThrough || OpenLayers.Event.stop(t, !0), n;
        }
    },
    "handleBrowserEvent": function(e) {
        var t = e.type, i = this.listeners[t];
        if (i && 0 != i.length) {
            var n = e.touches;
            if (n && n[0]) {
                for (var s, r = 0, o = 0, a = n.length, l = 0; l < a; ++l) r += (s = this.getTouchClientXY(n[l])).clientX, 
                o += s.clientY;
                e.clientX = r / a, e.clientY = o / a;
            }
            this.includeXY && (e.xy = this.getMousePosition(e)), this.triggerEvent(t, e);
        }
    },
    "getTouchClientXY": function(e) {
        var t = window.olMockWin || window, i = t.pageXOffset, n = t.pageYOffset, s = e.clientX, r = e.clientY;
        return 0 === e.pageY && Math.floor(r) > Math.floor(e.pageY) || 0 === e.pageX && Math.floor(s) > Math.floor(e.pageX) ? (s -= i, 
        r -= n) : (r < e.pageY - n || s < e.pageX - i) && (s = e.pageX - i, r = e.pageY - n), 
        e.olClientX = s, e.olClientY = r, {
            "clientX": s,
            "clientY": r
        };
    },
    "clearMouseCache": function() {
        this.element.scrolls = null, this.element.lefttop = null, this.element.offsets = null;
    },
    "getMousePosition": function(e) {
        if (this.includeXY ? this.element.hasScrollEvent || (OpenLayers.Event.observe(window, "scroll", this.clearMouseListener), 
        this.element.hasScrollEvent = !0) : this.clearMouseCache(), !this.element.scrolls) {
            var t = OpenLayers.Util.getViewportElement();
            this.element.scrolls = [ window.pageXOffset || t.scrollLeft, window.pageYOffset || t.scrollTop ];
        }
        return this.element.lefttop || (this.element.lefttop = [ document.documentElement.clientLeft || 0, document.documentElement.clientTop || 0 ]), 
        this.element.offsets || (this.element.offsets = OpenLayers.Util.pagePosition(this.element)), 
        new OpenLayers.Pixel(e.clientX + this.element.scrolls[0] - this.element.offsets[0] - this.element.lefttop[0], e.clientY + this.element.scrolls[1] - this.element.offsets[1] - this.element.lefttop[1]);
    },
    "getTouchModel": function() {
        return "_TOUCH_MODEL" in OpenLayers.Events || (OpenLayers.Events._TOUCH_MODEL = window.PointerEvent && "pointer" || window.MSPointerEvent && "MSPointer" || "ontouchdown" in document && "touch" || null), 
        OpenLayers.Events._TOUCH_MODEL;
    },
    "addPointerTouchListener": function(e, t, i) {
        function n(e) {
            i(OpenLayers.Util.applyDefaults({
                "stopPropagation": function() {
                    for (var e = s.length - 1; e >= 0; --e) s[e].stopPropagation();
                },
                "preventDefault": function() {
                    for (var e = s.length - 1; e >= 0; --e) s[e].preventDefault();
                },
                "type": t
            }, e));
        }
        this.eventHandler;
        var s = this._pointerTouches;
        switch (t) {
          case "touchstart":
            return this.addPointerTouchListenerStart(e, t, n);

          case "touchend":
            return this.addPointerTouchListenerEnd(e, t, n);

          case "touchmove":
            return this.addPointerTouchListenerMove(e, t, n);

          default:
            throw "Unknown touch event type";
        }
    },
    "addPointerTouchListenerStart": function(e, t, i) {
        var n = this._pointerTouches;
        OpenLayers.Event.observe(e, this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ? "MSPointerDown" : "pointerdown", function(e) {
            if (OpenLayers.Event.isTouchEvent(e)) {
                for (var t = !1, s = 0, r = n.length; s < r; ++s) if (n[s].pointerId == e.pointerId) {
                    t = !0;
                    break;
                }
                t || n.push(e), e.touches = n.slice(), i(e);
            }
        });
        OpenLayers.Event.observe(e, this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ? "MSPointerOut" : "pointerout", function(e) {
            if (OpenLayers.Event.isTouchEvent(e)) for (var t = 0, i = n.length; t < i; ++t) if (n[t].pointerId == e.pointerId) {
                0 != this.clientWidth && 0 != this.clientHeight && (Math.ceil(e.clientX) >= this.clientWidth || Math.ceil(e.clientY) >= this.clientHeight) && n.splice(t, 1);
                break;
            }
        });
    },
    "addPointerTouchListenerMove": function(e, t, i) {
        var n = this._pointerTouches;
        OpenLayers.Event.observe(e, this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ? "MSPointerMove" : "pointermove", function(e) {
            if (OpenLayers.Event.isTouchEvent(e) && (1 != n.length || n[0].pageX != e.pageX || n[0].pageY != e.pageY)) {
                for (var t = 0, s = n.length; t < s; ++t) if (n[t].pointerId == e.pointerId) {
                    n[t] = e;
                    break;
                }
                e.touches = n.slice(), i(e);
            }
        });
    },
    "addPointerTouchListenerEnd": function(e, t, i) {
        var n = this._pointerTouches;
        OpenLayers.Event.observe(e, this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ? "MSPointerUp" : "pointerup", function(e) {
            if (OpenLayers.Event.isTouchEvent(e)) {
                for (var t = 0, s = n.length; t < s; ++t) if (n[t].pointerId == e.pointerId) {
                    n.splice(t, 1);
                    break;
                }
                e.touches = n.slice(), i(e);
            }
        });
    },
    "CLASS_NAME": "OpenLayers.Events"
}), OpenLayers.Feature = OpenLayers.Class({
    "layer": null,
    "id": null,
    "lonlat": null,
    "data": null,
    "marker": null,
    "popupClass": null,
    "popup": null,
    "initialize": function(e, t, i) {
        this.layer = e, this.lonlat = t, this.data = null != i ? i : {}, this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        null != this.layer && null != this.layer.map && null != this.popup && this.layer.map.removePopup(this.popup), 
        null != this.layer && null != this.marker && this.layer.removeMarker(this.marker), 
        this.layer = null, this.id = null, this.lonlat = null, this.data = null, null != this.marker && (this.destroyMarker(this.marker), 
        this.marker = null), null != this.popup && (this.destroyPopup(this.popup), this.popup = null);
    },
    "onScreen": function() {
        var e = !1;
        return null != this.layer && null != this.layer.map && (e = this.layer.map.getExtent().containsLonLat(this.lonlat)), 
        e;
    },
    "createMarker": function() {
        return null != this.lonlat && (this.marker = new OpenLayers.Marker(this.lonlat, this.data.icon)), 
        this.marker;
    },
    "destroyMarker": function() {
        this.marker.destroy();
    },
    "createPopup": function(e) {
        if (null != this.lonlat) {
            if (!this.popup) {
                var t = this.marker ? this.marker.icon : null, i = this.popupClass ? this.popupClass : OpenLayers.Popup.Anchored;
                this.popup = new i(this.id + "_popup", this.lonlat, this.data.popupSize, this.data.popupContentHTML, t, e);
            }
            null != this.data.overflow && (this.popup.contentDiv.style.overflow = this.data.overflow), 
            this.popup.feature = this;
        }
        return this.popup;
    },
    "destroyPopup": function() {
        this.popup && (this.popup.feature = null, this.popup.destroy(), this.popup = null);
    },
    "CLASS_NAME": "OpenLayers.Feature"
}), OpenLayers.State = {
    "UNKNOWN": "Unknown",
    "INSERT": "Insert",
    "UPDATE": "Update",
    "DELETE": "Delete"
}, OpenLayers.Feature.Vector = OpenLayers.Class(OpenLayers.Feature, {
    "fid": null,
    "geometry": null,
    "attributes": null,
    "bounds": null,
    "state": null,
    "style": null,
    "url": null,
    "renderIntent": "default",
    "modified": null,
    "initialize": function(e, t, i) {
        OpenLayers.Feature.prototype.initialize.apply(this, [ null, null, t ]), this.lonlat = null, 
        this.geometry = e || null, this.state = null, this.attributes = {}, t && (this.attributes = OpenLayers.Util.extend(this.attributes, t)), 
        this.style = i || null;
    },
    "destroy": function() {
        this.layer && (this.layer.removeFeatures(this), this.layer = null), this.geometry = null, 
        this.modified = null, OpenLayers.Feature.prototype.destroy.apply(this, arguments);
    },
    "clone": function() {
        return new OpenLayers.Feature.Vector(this.geometry ? this.geometry.clone() : null, this.attributes, this.style);
    },
    "onScreen": function(e) {
        var t = !1;
        if (this.layer && this.layer.map) {
            var i = this.layer.map.getExtent();
            if (e) {
                var n = this.geometry.getBounds();
                t = i.intersectsBounds(n);
            } else t = i.toGeometry().intersects(this.geometry);
        }
        return t;
    },
    "getVisibility": function() {
        return !(this.style && "none" == this.style.display || !this.layer || this.layer && this.layer.styleMap && "none" == this.layer.styleMap.createSymbolizer(this, this.renderIntent).display || this.layer && !this.layer.getVisibility());
    },
    "createMarker": function() {
        return null;
    },
    "destroyMarker": function() {},
    "createPopup": function() {
        return null;
    },
    "atPoint": function(e, t, i) {
        var n = !1;
        return this.geometry && (n = this.geometry.atPoint(e, t, i)), n;
    },
    "destroyPopup": function() {},
    "move": function(e) {
        if (this.layer && this.geometry.move) {
            var t;
            t = "OpenLayers.LonLat" == e.CLASS_NAME ? this.layer.getViewPortPxFromLonLat(e) : e;
            var i = this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()), n = this.layer.map.getResolution();
            return this.geometry.move(n * (t.x - i.x), n * (i.y - t.y)), this.layer.drawFeature(this), 
            i;
        }
    },
    "toState": function(e) {
        if (e == OpenLayers.State.UPDATE) switch (this.state) {
          case OpenLayers.State.UNKNOWN:
          case OpenLayers.State.DELETE:
            this.state = e;
            break;

          case OpenLayers.State.UPDATE:
          case OpenLayers.State.INSERT:
        } else if (e == OpenLayers.State.INSERT) switch (this.state) {
          case OpenLayers.State.UNKNOWN:
            break;

          default:
            this.state = e;
        } else if (e == OpenLayers.State.DELETE) switch (this.state) {
          case OpenLayers.State.INSERT:
          case OpenLayers.State.DELETE:
            break;

          case OpenLayers.State.UNKNOWN:
          case OpenLayers.State.UPDATE:
            this.state = e;
        } else e == OpenLayers.State.UNKNOWN && (this.state = e);
    },
    "CLASS_NAME": "OpenLayers.Feature.Vector"
}), OpenLayers.Feature.Vector.style = {
    "default": {
        "fillColor": "#ee9900",
        "fillOpacity": .4,
        "hoverFillColor": "white",
        "hoverFillOpacity": .8,
        "strokeColor": "#ee9900",
        "strokeOpacity": 1,
        "strokeWidth": 1,
        "strokeLinecap": "round",
        "strokeDashstyle": "solid",
        "hoverStrokeColor": "red",
        "hoverStrokeOpacity": 1,
        "hoverStrokeWidth": .2,
        "pointRadius": 6,
        "hoverPointRadius": 1,
        "hoverPointUnit": "%",
        "pointerEvents": "visiblePainted",
        "cursor": "inherit",
        "fontColor": "#000000",
        "labelAlign": "cm",
        "labelOutlineColor": "white",
        "labelOutlineWidth": 3
    },
    "select": {
        "fillColor": "blue",
        "fillOpacity": .4,
        "hoverFillColor": "white",
        "hoverFillOpacity": .8,
        "strokeColor": "blue",
        "strokeOpacity": 1,
        "strokeWidth": 2,
        "strokeLinecap": "round",
        "strokeDashstyle": "solid",
        "hoverStrokeColor": "red",
        "hoverStrokeOpacity": 1,
        "hoverStrokeWidth": .2,
        "pointRadius": 6,
        "hoverPointRadius": 1,
        "hoverPointUnit": "%",
        "pointerEvents": "visiblePainted",
        "cursor": "pointer",
        "fontColor": "#000000",
        "labelAlign": "cm",
        "labelOutlineColor": "white",
        "labelOutlineWidth": 3
    },
    "temporary": {
        "fillColor": "#66cccc",
        "fillOpacity": .2,
        "hoverFillColor": "white",
        "hoverFillOpacity": .8,
        "strokeColor": "#66cccc",
        "strokeOpacity": 1,
        "strokeLinecap": "round",
        "strokeWidth": 2,
        "strokeDashstyle": "solid",
        "hoverStrokeColor": "red",
        "hoverStrokeOpacity": 1,
        "hoverStrokeWidth": .2,
        "pointRadius": 6,
        "hoverPointRadius": 1,
        "hoverPointUnit": "%",
        "pointerEvents": "visiblePainted",
        "cursor": "inherit",
        "fontColor": "#000000",
        "labelAlign": "cm",
        "labelOutlineColor": "white",
        "labelOutlineWidth": 3
    },
    "delete": {
        "display": "none"
    }
}, OpenLayers.Style = OpenLayers.Class({
    "id": null,
    "name": null,
    "title": null,
    "description": null,
    "layerName": null,
    "isDefault": !1,
    "rules": null,
    "context": null,
    "defaultStyle": null,
    "defaultsPerSymbolizer": !1,
    "propertyStyles": null,
    "initialize": function(e, t) {
        OpenLayers.Util.extend(this, t), this.rules = [], t && t.rules && this.addRules(t.rules), 
        this.setDefaultStyle(e || OpenLayers.Feature.Vector.style.default), this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        for (var e = 0, t = this.rules.length; e < t; e++) this.rules[e].destroy(), this.rules[e] = null;
        this.rules = null, this.defaultStyle = null;
    },
    "createSymbolizer": function(e) {
        for (var t, i = this.defaultsPerSymbolizer ? {} : this.createLiterals(OpenLayers.Util.extend({}, this.defaultStyle), e), n = this.rules, s = [], r = !1, o = 0, a = n.length; o < a; o++) (t = n[o]).evaluate(e) && (t instanceof OpenLayers.Rule && t.elseFilter ? s.push(t) : (r = !0, 
        this.applySymbolizer(t, i, e)));
        if (0 == r && s.length > 0) {
            r = !0;
            for (var o = 0, a = s.length; o < a; o++) this.applySymbolizer(s[o], i, e);
        }
        return n.length > 0 && 0 == r && (i.display = "none"), null != i.label && "string" != typeof i.label && (i.label = String(i.label)), 
        i;
    },
    "applySymbolizer": function(e, t, i) {
        var n = i.geometry ? this.getSymbolizerPrefix(i.geometry) : OpenLayers.Style.SYMBOLIZER_PREFIXES[0], s = e.symbolizer[n] || e.symbolizer;
        if (!0 === this.defaultsPerSymbolizer) {
            var r = this.defaultStyle;
            OpenLayers.Util.applyDefaults(s, {
                "pointRadius": r.pointRadius
            }), !0 !== s.stroke && !0 !== s.graphic || OpenLayers.Util.applyDefaults(s, {
                "strokeWidth": r.strokeWidth,
                "strokeColor": r.strokeColor,
                "strokeOpacity": r.strokeOpacity,
                "strokeDashstyle": r.strokeDashstyle,
                "strokeLinecap": r.strokeLinecap
            }), !0 !== s.fill && !0 !== s.graphic || OpenLayers.Util.applyDefaults(s, {
                "fillColor": r.fillColor,
                "fillOpacity": r.fillOpacity
            }), !0 === s.graphic && OpenLayers.Util.applyDefaults(s, {
                "pointRadius": this.defaultStyle.pointRadius,
                "externalGraphic": this.defaultStyle.externalGraphic,
                "graphicName": this.defaultStyle.graphicName,
                "graphicOpacity": this.defaultStyle.graphicOpacity,
                "graphicWidth": this.defaultStyle.graphicWidth,
                "graphicHeight": this.defaultStyle.graphicHeight,
                "graphicXOffset": this.defaultStyle.graphicXOffset,
                "graphicYOffset": this.defaultStyle.graphicYOffset
            });
        }
        return this.createLiterals(OpenLayers.Util.extend(t, s), i);
    },
    "createLiterals": function(e, t) {
        var i = OpenLayers.Util.extend({}, t.attributes || t.data);
        OpenLayers.Util.extend(i, this.context);
        for (var n in this.propertyStyles) e[n] = OpenLayers.Style.createLiteral(e[n], i, t, n);
        return e;
    },
    "findPropertyStyles": function() {
        var e = {}, t = this.defaultStyle;
        this.addPropertyStyles(e, t);
        for (var i, n, s = this.rules, r = 0, o = s.length; r < o; r++) {
            i = s[r].symbolizer;
            for (var a in i) {
                if ("object" != typeof (n = i[a])) {
                    this.addPropertyStyles(e, i);
                    break;
                }
                this.addPropertyStyles(e, n);
            }
        }
        return e;
    },
    "addPropertyStyles": function(e, t) {
        var i;
        for (var n in t) "string" == typeof (i = t[n]) && i.match(/\$\{\w+\}/) && (e[n] = !0);
        return e;
    },
    "addRules": function(e) {
        Array.prototype.push.apply(this.rules, e), this.propertyStyles = this.findPropertyStyles();
    },
    "setDefaultStyle": function(e) {
        this.defaultStyle = e, this.propertyStyles = this.findPropertyStyles();
    },
    "getSymbolizerPrefix": function(e) {
        for (var t = OpenLayers.Style.SYMBOLIZER_PREFIXES, i = 0, n = t.length; i < n; i++) if (-1 != e.CLASS_NAME.indexOf(t[i])) return t[i];
    },
    "clone": function() {
        var e = OpenLayers.Util.extend({}, this);
        if (this.rules) {
            e.rules = [];
            for (var t = 0, i = this.rules.length; t < i; ++t) e.rules.push(this.rules[t].clone());
        }
        e.context = this.context && OpenLayers.Util.extend({}, this.context);
        var n = OpenLayers.Util.extend({}, this.defaultStyle);
        return new OpenLayers.Style(n, e);
    },
    "CLASS_NAME": "OpenLayers.Style"
}), OpenLayers.Style.createLiteral = function(e, t, i, n) {
    return "string" == typeof e && -1 != e.indexOf("${") && (e = OpenLayers.String.format(e, t, [ i, n ]), 
    e = isNaN(e) || !e ? e : parseFloat(e)), e;
}, OpenLayers.Style.SYMBOLIZER_PREFIXES = [ "Point", "Line", "Polygon", "Text", "Raster" ], 
OpenLayers.Filter = OpenLayers.Class({
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "destroy": function() {},
    "evaluate": function(e) {
        return !0;
    },
    "clone": function() {
        return null;
    },
    "toString": function() {
        return OpenLayers.Format && OpenLayers.Format.CQL ? OpenLayers.Format.CQL.prototype.write(this) : Object.prototype.toString.call(this);
    },
    "CLASS_NAME": "OpenLayers.Filter"
}), OpenLayers.Format = OpenLayers.Class({
    "options": null,
    "externalProjection": null,
    "internalProjection": null,
    "data": null,
    "keepData": !1,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.options = e;
    },
    "destroy": function() {},
    "read": function(e) {
        throw new Error("Read not implemented.");
    },
    "write": function(e) {
        throw new Error("Write not implemented.");
    },
    "CLASS_NAME": "OpenLayers.Format"
}), OpenLayers.Geometry = OpenLayers.Class({
    "id": null,
    "parent": null,
    "bounds": null,
    "initialize": function() {
        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        this.id = null, this.bounds = null;
    },
    "clone": function() {
        return new OpenLayers.Geometry();
    },
    "setBounds": function(e) {
        e && (this.bounds = e.clone());
    },
    "clearBounds": function() {
        this.bounds = null, this.parent && this.parent.clearBounds();
    },
    "extendBounds": function(e) {
        this.getBounds() ? this.bounds.extend(e) : this.setBounds(e);
    },
    "getBounds": function() {
        return null == this.bounds && this.calculateBounds(), this.bounds;
    },
    "calculateBounds": function() {},
    "distanceTo": function(e, t) {},
    "getVertices": function(e) {},
    "atPoint": function(e, t, i) {
        var n = !1;
        if (null != this.getBounds() && null != e) {
            var s = null != t ? t : 0, r = null != i ? i : 0;
            n = new OpenLayers.Bounds(this.bounds.left - s, this.bounds.bottom - r, this.bounds.right + s, this.bounds.top + r).containsLonLat(e);
        }
        return n;
    },
    "getLength": function() {
        return 0;
    },
    "getArea": function() {
        return 0;
    },
    "getCentroid": function() {
        return null;
    },
    "toString": function() {
        return OpenLayers.Format && OpenLayers.Format.WKT ? OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)) : Object.prototype.toString.call(this);
    },
    "CLASS_NAME": "OpenLayers.Geometry"
}), OpenLayers.Geometry.fromWKT = function(e) {
    var t;
    if (OpenLayers.Format && OpenLayers.Format.WKT) {
        var i = OpenLayers.Geometry.fromWKT.format;
        i || (i = new OpenLayers.Format.WKT(), OpenLayers.Geometry.fromWKT.format = i);
        var n = i.read(e);
        if (n instanceof OpenLayers.Feature.Vector) t = n.geometry; else if (OpenLayers.Util.isArray(n)) {
            for (var s = n.length, r = new Array(s), o = 0; o < s; ++o) r[o] = n[o].geometry;
            t = new OpenLayers.Geometry.Collection(r);
        }
    }
    return t;
}, OpenLayers.Geometry.segmentsIntersect = function(e, t, i) {
    var n = i && i.point, s = i && i.tolerance, r = !1, o = e.x1 - t.x1, a = e.y1 - t.y1, l = e.x2 - e.x1, h = e.y2 - e.y1, c = t.y2 - t.y1, u = t.x2 - t.x1, p = c * l - u * h, d = u * a - c * o, f = l * a - h * o;
    if (0 == p) 0 == d && 0 == f && (r = !0); else {
        var m = d / p, g = f / p;
        if (m >= 0 && m <= 1 && g >= 0 && g <= 1) if (n) {
            var y = e.x1 + m * l, v = e.y1 + m * h;
            r = new OpenLayers.Geometry.Point(y, v);
        } else r = !0;
    }
    if (s) {
        if (r) {
            if (n) {
                var L, w = [ e, t ];
                e: for (S = 0; S < 2; ++S) {
                    L = w[S];
                    for (x = 1; x < 3; ++x) if (y = L["x" + x], v = L["y" + x], Math.sqrt(Math.pow(y - r.x, 2) + Math.pow(v - r.y, 2)) < s) {
                        r.x = y, r.y = v;
                        break e;
                    }
                }
            }
        } else {
            var b, C, O, w = [ e, t ];
            e: for (var S = 0; S < 2; ++S) {
                b = w[S], C = w[(S + 1) % 2];
                for (var x = 1; x < 3; ++x) if (O = {
                    "x": b["x" + x],
                    "y": b["y" + x]
                }, OpenLayers.Geometry.distanceToSegment(O, C).distance < s) {
                    r = !n || new OpenLayers.Geometry.Point(O.x, O.y);
                    break e;
                }
            }
        }
    }
    return r;
}, OpenLayers.Geometry.distanceToSegment = function(e, t) {
    var i = OpenLayers.Geometry.distanceSquaredToSegment(e, t);
    return i.distance = Math.sqrt(i.distance), i;
}, OpenLayers.Geometry.distanceSquaredToSegment = function(e, t) {
    var i, n, s = e.x, r = e.y, o = t.x1, a = t.y1, l = t.x2, h = t.y2, c = l - o, u = h - a, p = 0 == c && 0 == u ? 0 : (c * (s - o) + u * (r - a)) / (Math.pow(c, 2) + Math.pow(u, 2));
    return p <= 0 ? (i = o, n = a) : p >= 1 ? (i = l, n = h) : (i = o + p * c, n = a + p * u), 
    {
        "distance": Math.pow(i - s, 2) + Math.pow(n - r, 2),
        "x": i,
        "y": n,
        "along": p
    };
}, OpenLayers.Handler = OpenLayers.Class({
    "id": null,
    "control": null,
    "map": null,
    "keyMask": null,
    "active": !1,
    "evt": null,
    "touch": !1,
    "initialize": function(e, t, i) {
        OpenLayers.Util.extend(this, i), this.control = e, this.callbacks = t;
        var n = this.map || e.map;
        n && this.setMap(n), this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "setMap": function(e) {
        this.map = e;
    },
    "checkModifiers": function(e) {
        return null == this.keyMask || ((e.shiftKey ? OpenLayers.Handler.MOD_SHIFT : 0) | (e.ctrlKey ? OpenLayers.Handler.MOD_CTRL : 0) | (e.altKey ? OpenLayers.Handler.MOD_ALT : 0) | (e.metaKey ? OpenLayers.Handler.MOD_META : 0)) == this.keyMask;
    },
    "activate": function() {
        if (this.active) return !1;
        for (var e = OpenLayers.Events.prototype.BROWSER_EVENTS, t = 0, i = e.length; t < i; t++) this[e[t]] && this.register(e[t], this[e[t]]);
        return this.active = !0, !0;
    },
    "deactivate": function() {
        if (!this.active) return !1;
        for (var e = OpenLayers.Events.prototype.BROWSER_EVENTS, t = 0, i = e.length; t < i; t++) this[e[t]] && this.unregister(e[t], this[e[t]]);
        return this.touch = !1, this.active = !1, !0;
    },
    "startTouch": function() {
        if (!this.touch) {
            this.touch = !0;
            for (var e = [ "mousedown", "mouseup", "mousemove", "click", "dblclick", "mouseout" ], t = 0, i = e.length; t < i; t++) this[e[t]] && this.unregister(e[t], this[e[t]]);
        }
    },
    "callback": function(e, t) {
        e && this.callbacks[e] && this.callbacks[e].apply(this.control, t);
    },
    "register": function(e, t) {
        this.map.events.registerPriority(e, this, t), this.map.events.registerPriority(e, this, this.setEvent);
    },
    "unregister": function(e, t) {
        this.map.events.unregister(e, this, t), this.map.events.unregister(e, this, this.setEvent);
    },
    "setEvent": function(e) {
        return this.evt = e, !0;
    },
    "destroy": function() {
        this.deactivate(), this.control = this.map = null;
    },
    "CLASS_NAME": "OpenLayers.Handler"
}), OpenLayers.Handler.MOD_NONE = 0, OpenLayers.Handler.MOD_SHIFT = 1, OpenLayers.Handler.MOD_CTRL = 2, 
OpenLayers.Handler.MOD_ALT = 4, OpenLayers.Handler.MOD_META = 8, OpenLayers.Icon = OpenLayers.Class({
    "url": null,
    "size": null,
    "offset": null,
    "calculateOffset": null,
    "imageDiv": null,
    "px": null,
    "initialize": function(e, t, i, n) {
        this.url = e, this.size = t || {
            "w": 20,
            "h": 20
        }, this.offset = i || {
            "x": -this.size.w / 2,
            "y": -this.size.h / 2
        }, this.calculateOffset = n;
        var s = OpenLayers.Util.createUniqueID("OL_Icon_");
        this.imageDiv = OpenLayers.Util.createAlphaImageDiv(s);
    },
    "destroy": function() {
        this.erase(), OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild), this.imageDiv.innerHTML = "", 
        this.imageDiv = null;
    },
    "clone": function() {
        return new OpenLayers.Icon(this.url, this.size, this.offset, this.calculateOffset);
    },
    "setSize": function(e) {
        null != e && (this.size = e), this.draw();
    },
    "setUrl": function(e) {
        null != e && (this.url = e), this.draw();
    },
    "draw": function(e) {
        return OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, null, this.size, this.url, "absolute"), 
        this.moveTo(e), this.imageDiv;
    },
    "erase": function() {
        null != this.imageDiv && null != this.imageDiv.parentNode && OpenLayers.Element.remove(this.imageDiv);
    },
    "setOpacity": function(e) {
        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, null, null, null, null, null, null, e);
    },
    "moveTo": function(e) {
        null != e && (this.px = e), null != this.imageDiv && (null == this.px ? this.display(!1) : (this.calculateOffset && (this.offset = this.calculateOffset(this.size)), 
        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, {
            "x": this.px.x + this.offset.x,
            "y": this.px.y + this.offset.y
        })));
    },
    "display": function(e) {
        this.imageDiv.style.display = e ? "" : "none";
    },
    "isDrawn": function() {
        return this.imageDiv && this.imageDiv.parentNode && 11 != this.imageDiv.parentNode.nodeType;
    },
    "CLASS_NAME": "OpenLayers.Icon"
}), OpenLayers.Kinetic = OpenLayers.Class({
    "threshold": 0,
    "deceleration": .0035,
    "nbPoints": 100,
    "delay": 200,
    "points": void 0,
    "timerId": void 0,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "begin": function() {
        OpenLayers.Animation.stop(this.timerId), this.timerId = void 0, this.points = [];
    },
    "update": function(e) {
        this.points.unshift({
            "xy": e,
            "tick": new Date().getTime()
        }), this.points.length > this.nbPoints && this.points.pop();
    },
    "end": function(e) {
        for (var t, i, n = new Date().getTime(), s = 0, r = this.points.length; s < r && (i = this.points[s], 
        !(n - i.tick > this.delay)); s++) t = i;
        if (t) {
            var o = new Date().getTime() - t.tick, a = Math.sqrt(Math.pow(e.x - t.xy.x, 2) + Math.pow(e.y - t.xy.y, 2)), l = a / o;
            if (!(0 == l || l < this.threshold)) {
                var h = Math.asin((e.y - t.xy.y) / a);
                return t.xy.x <= e.x && (h = Math.PI - h), {
                    "speed": l,
                    "theta": h
                };
            }
        }
    },
    "move": function(e, t) {
        var i = e.speed, n = Math.cos(e.theta), s = -Math.sin(e.theta), r = new Date().getTime(), o = 0, a = 0;
        this.timerId = OpenLayers.Animation.start(OpenLayers.Function.bind(function() {
            if (null != this.timerId) {
                var e = new Date().getTime() - r, l = -this.deceleration * Math.pow(e, 2) / 2 + i * e, h = l * n, c = l * s, u = {};
                u.end = !1, -this.deceleration * e + i <= 0 && (OpenLayers.Animation.stop(this.timerId), 
                this.timerId = null, u.end = !0), u.x = h - o, u.y = c - a, o = h, a = c, t(u.x, u.y, u.end);
            }
        }, this));
    },
    "CLASS_NAME": "OpenLayers.Kinetic"
}), OpenLayers.Tween = OpenLayers.Class({
    "easing": null,
    "begin": null,
    "finish": null,
    "duration": null,
    "callbacks": null,
    "time": null,
    "minFrameRate": null,
    "startTime": null,
    "animationId": null,
    "playing": !1,
    "initialize": function(e) {
        this.easing = e || OpenLayers.Easing.Expo.easeOut;
    },
    "start": function(e, t, i, n) {
        this.playing = !0, this.begin = e, this.finish = t, this.duration = i, this.callbacks = n.callbacks, 
        this.minFrameRate = n.minFrameRate || 30, this.time = 0, this.startTime = new Date().getTime(), 
        OpenLayers.Animation.stop(this.animationId), this.animationId = null, this.callbacks && this.callbacks.start && this.callbacks.start.call(this, this.begin), 
        this.animationId = OpenLayers.Animation.start(OpenLayers.Function.bind(this.play, this));
    },
    "stop": function() {
        this.playing && (this.callbacks && this.callbacks.done && this.callbacks.done.call(this, this.finish), 
        OpenLayers.Animation.stop(this.animationId), this.animationId = null, this.playing = !1);
    },
    "play": function() {
        var e = {};
        for (var t in this.begin) {
            var i = this.begin[t], n = this.finish[t];
            if (null == i || null == n || isNaN(i) || isNaN(n)) throw new TypeError("invalid value for Tween");
            var s = n - i;
            e[t] = this.easing.apply(this, [ this.time, i, s, this.duration ]);
        }
        this.time++, this.callbacks && this.callbacks.eachStep && (new Date().getTime() - this.startTime) / this.time <= 1e3 / this.minFrameRate && this.callbacks.eachStep.call(this, e), 
        this.time > this.duration && this.stop();
    },
    "CLASS_NAME": "OpenLayers.Tween"
}), OpenLayers.Easing = {
    "CLASS_NAME": "OpenLayers.Easing"
}, OpenLayers.Easing.Linear = {
    "easeIn": function(e, t, i, n) {
        return i * e / n + t;
    },
    "easeOut": function(e, t, i, n) {
        return i * e / n + t;
    },
    "easeInOut": function(e, t, i, n) {
        return i * e / n + t;
    },
    "CLASS_NAME": "OpenLayers.Easing.Linear"
}, OpenLayers.Easing.Expo = {
    "easeIn": function(e, t, i, n) {
        return 0 == e ? t : i * Math.pow(2, 10 * (e / n - 1)) + t;
    },
    "easeOut": function(e, t, i, n) {
        return e == n ? t + i : i * (1 - Math.pow(2, -10 * e / n)) + t;
    },
    "easeInOut": function(e, t, i, n) {
        return 0 == e ? t : e == n ? t + i : (e /= n / 2) < 1 ? i / 2 * Math.pow(2, 10 * (e - 1)) + t : i / 2 * (2 - Math.pow(2, -10 * --e)) + t;
    },
    "CLASS_NAME": "OpenLayers.Easing.Expo"
}, OpenLayers.Easing.Quad = {
    "easeIn": function(e, t, i, n) {
        return i * (e /= n) * e + t;
    },
    "easeOut": function(e, t, i, n) {
        return -i * (e /= n) * (e - 2) + t;
    },
    "easeInOut": function(e, t, i, n) {
        return (e /= n / 2) < 1 ? i / 2 * e * e + t : -i / 2 * (--e * (e - 2) - 1) + t;
    },
    "CLASS_NAME": "OpenLayers.Easing.Quad"
}, OpenLayers.Projection = OpenLayers.Class({
    "proj": null,
    "projCode": null,
    "titleRegEx": /\+title=[^\+]*/,
    "initialize": function(e, t) {
        OpenLayers.Util.extend(this, t), this.projCode = e, "object" == typeof Proj4js && (this.proj = new Proj4js.Proj(e));
    },
    "getCode": function() {
        return this.proj ? this.proj.srsCode : this.projCode;
    },
    "getUnits": function() {
        return this.proj ? this.proj.units : null;
    },
    "toString": function() {
        return this.getCode();
    },
    "equals": function(e) {
        var t = e, i = !1;
        if (t) if (t instanceof OpenLayers.Projection || (t = new OpenLayers.Projection(t)), 
        "object" == typeof Proj4js && this.proj.defData && t.proj.defData) i = this.proj.defData.replace(this.titleRegEx, "") == t.proj.defData.replace(this.titleRegEx, ""); else if (t.getCode) {
            var n = this.getCode(), s = t.getCode();
            i = n == s || !!OpenLayers.Projection.transforms[n] && OpenLayers.Projection.transforms[n][s] === OpenLayers.Projection.nullTransform;
        }
        return i;
    },
    "destroy": function() {
        delete this.proj, delete this.projCode;
    },
    "CLASS_NAME": "OpenLayers.Projection"
}), OpenLayers.Projection.transforms = {}, OpenLayers.Projection.defaults = {
    "EPSG:4326": {
        "units": "degrees",
        "maxExtent": [ -180, -90, 180, 90 ],
        "worldExtent": [ -180, -90, 180, 90 ],
        "yx": !0
    },
    "CRS:84": {
        "units": "degrees",
        "maxExtent": [ -180, -90, 180, 90 ],
        "worldExtent": [ -180, -90, 180, 90 ]
    },
    "EPSG:900913": {
        "units": "m",
        "maxExtent": [ -20037508.34, -20037508.34, 20037508.34, 20037508.34 ],
        "worldExtent": [ -180, -89, 180, 89 ]
    }
}, OpenLayers.Projection.addTransform = function(e, t, i) {
    if (i === OpenLayers.Projection.nullTransform) {
        var n = OpenLayers.Projection.defaults[e];
        n && !OpenLayers.Projection.defaults[t] && (OpenLayers.Projection.defaults[t] = n);
    }
    OpenLayers.Projection.transforms[e] || (OpenLayers.Projection.transforms[e] = {}), 
    OpenLayers.Projection.transforms[e][t] = i;
}, OpenLayers.Projection.transform = function(e, t, i) {
    if (t && i) if (t instanceof OpenLayers.Projection || (t = new OpenLayers.Projection(t)), 
    i instanceof OpenLayers.Projection || (i = new OpenLayers.Projection(i)), t.proj && i.proj) e = Proj4js.transform(t.proj, i.proj, e); else {
        var n = t.getCode(), s = i.getCode(), r = OpenLayers.Projection.transforms;
        r[n] && r[n][s] && r[n][s](e);
    }
    return e;
}, OpenLayers.Projection.nullTransform = function(e) {
    return e;
}, function() {
    function e(e) {
        return e.x = 180 * e.x / s, e.y = 180 / Math.PI * (2 * Math.atan(Math.exp(e.y / s * Math.PI)) - Math.PI / 2), 
        e;
    }
    function t(e) {
        e.x = e.x * s / 180;
        var t = Math.log(Math.tan((90 + e.y) * Math.PI / 360)) / Math.PI * s;
        return e.y = Math.max(-20037508.34, Math.min(t, 20037508.34)), e;
    }
    function i(i, n) {
        var s, r, o, a, l, h = OpenLayers.Projection.addTransform, c = OpenLayers.Projection.nullTransform;
        for (s = 0, r = n.length; s < r; ++s) for (h(i, o = n[s], t), h(o, i, e), l = s + 1; l < r; ++l) h(o, a = n[l], c), 
        h(a, o, c);
    }
    var n, s = 20037508.34, r = [ "EPSG:900913", "EPSG:3857", "EPSG:102113", "EPSG:102100", "OSGEO:41001" ], o = [ "CRS:84", "urn:ogc:def:crs:EPSG:6.6:4326", "EPSG:4326" ];
    for (n = r.length - 1; n >= 0; --n) i(r[n], o);
    for (n = o.length - 1; n >= 0; --n) i(o[n], r);
}(), OpenLayers.Map = OpenLayers.Class({
    "Z_INDEX_BASE": {
        "BaseLayer": 100,
        "Overlay": 325,
        "Feature": 725,
        "Popup": 750,
        "Control": 1e3
    },
    "id": null,
    "fractionalZoom": !1,
    "events": null,
    "allOverlays": !1,
    "div": null,
    "dragging": !1,
    "size": null,
    "viewPortDiv": null,
    "layerContainerOrigin": null,
    "layerContainerDiv": null,
    "layers": null,
    "controls": null,
    "popups": null,
    "baseLayer": null,
    "center": null,
    "resolution": null,
    "zoom": 0,
    "panRatio": 1.5,
    "options": null,
    "tileSize": null,
    "projection": "EPSG:4326",
    "units": null,
    "resolutions": null,
    "maxResolution": null,
    "minResolution": null,
    "maxScale": null,
    "minScale": null,
    "maxExtent": null,
    "minExtent": null,
    "restrictedExtent": null,
    "numZoomLevels": 16,
    "theme": null,
    "displayProjection": null,
    "fallThrough": !1,
    "autoUpdateSize": !0,
    "eventListeners": null,
    "panTween": null,
    "panMethod": OpenLayers.Easing.Expo.easeOut,
    "panDuration": 50,
    "zoomTween": null,
    "zoomMethod": OpenLayers.Easing.Quad.easeOut,
    "zoomDuration": 20,
    "paddingForPopups": null,
    "layerContainerOriginPx": null,
    "minPx": null,
    "maxPx": null,
    "initialize": function(e, t) {
        var i = OpenLayers.Util.isElement(e);
        1 !== arguments.length || "object" != typeof e || i || (e = (t = e) && t.div), this.tileSize = new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH, OpenLayers.Map.TILE_HEIGHT), 
        this.paddingForPopups = new OpenLayers.Bounds(15, 15, 15, 15), this.theme = OpenLayers._getScriptLocation() + "theme/default/style.css", 
        this.options = OpenLayers.Util.extend({}, t), OpenLayers.Util.extend(this, t);
        var n = this.projection instanceof OpenLayers.Projection ? this.projection.projCode : this.projection;
        OpenLayers.Util.applyDefaults(this, OpenLayers.Projection.defaults[n]), !this.maxExtent || this.maxExtent instanceof OpenLayers.Bounds || (this.maxExtent = new OpenLayers.Bounds(this.maxExtent)), 
        !this.minExtent || this.minExtent instanceof OpenLayers.Bounds || (this.minExtent = new OpenLayers.Bounds(this.minExtent)), 
        !this.restrictedExtent || this.restrictedExtent instanceof OpenLayers.Bounds || (this.restrictedExtent = new OpenLayers.Bounds(this.restrictedExtent)), 
        !this.center || this.center instanceof OpenLayers.LonLat || (this.center = new OpenLayers.LonLat(this.center)), 
        this.layers = [], this.id = OpenLayers.Util.createUniqueID("OpenLayers.Map_"), this.div = OpenLayers.Util.getElement(e), 
        this.div || (this.div = document.createElement("div"), this.div.style.height = "1px", 
        this.div.style.width = "1px"), OpenLayers.Element.addClass(this.div, "olMap");
        var s = this.id + "_OpenLayers_ViewPort";
        if (this.viewPortDiv = OpenLayers.Util.createDiv(s, null, null, null, "relative", null, "hidden"), 
        this.viewPortDiv.style.width = "100%", this.viewPortDiv.style.height = "100%", this.viewPortDiv.className = "olMapViewport", 
        this.div.appendChild(this.viewPortDiv), this.events = new OpenLayers.Events(this, this.viewPortDiv, null, this.fallThrough, {
            "includeXY": !0
        }), OpenLayers.TileManager && null !== this.tileManager && (this.tileManager instanceof OpenLayers.TileManager || (this.tileManager = new OpenLayers.TileManager(this.tileManager)), 
        this.tileManager.addMap(this)), s = this.id + "_OpenLayers_Container", this.layerContainerDiv = OpenLayers.Util.createDiv(s), 
        this.layerContainerDiv.style.zIndex = this.Z_INDEX_BASE.Popup - 1, this.layerContainerOriginPx = {
            "x": 0,
            "y": 0
        }, this.applyTransform(), this.viewPortDiv.appendChild(this.layerContainerDiv), 
        this.updateSize(), this.eventListeners instanceof Object && this.events.on(this.eventListeners), 
        !0 === this.autoUpdateSize && (this.updateSizeDestroy = OpenLayers.Function.bind(this.updateSize, this), 
        OpenLayers.Event.observe(window, "resize", this.updateSizeDestroy)), this.theme) {
            for (var r = !0, o = document.getElementsByTagName("link"), a = 0, l = o.length; a < l; ++a) if (OpenLayers.Util.isEquivalentUrl(o.item(a).href, this.theme)) {
                r = !1;
                break;
            }
            if (r) {
                var h = document.createElement("link");
                h.setAttribute("rel", "stylesheet"), h.setAttribute("type", "text/css"), h.setAttribute("href", this.theme), 
                document.getElementsByTagName("head")[0].appendChild(h);
            }
        }
        null == this.controls && (this.controls = [], null != OpenLayers.Control && (OpenLayers.Control.Navigation ? this.controls.push(new OpenLayers.Control.Navigation()) : OpenLayers.Control.TouchNavigation && this.controls.push(new OpenLayers.Control.TouchNavigation()), 
        OpenLayers.Control.Zoom ? this.controls.push(new OpenLayers.Control.Zoom()) : OpenLayers.Control.PanZoom && this.controls.push(new OpenLayers.Control.PanZoom()), 
        OpenLayers.Control.ArgParser && this.controls.push(new OpenLayers.Control.ArgParser()), 
        OpenLayers.Control.Attribution && this.controls.push(new OpenLayers.Control.Attribution())));
        for (var a = 0, l = this.controls.length; a < l; a++) this.addControlToMap(this.controls[a]);
        this.popups = [], this.unloadDestroy = OpenLayers.Function.bind(this.destroy, this), 
        OpenLayers.Event.observe(window, "unload", this.unloadDestroy), t && t.layers && (delete this.center, 
        delete this.zoom, this.addLayers(t.layers), t.center && !this.getCenter() && this.setCenter(t.center, t.zoom)), 
        this.panMethod && (this.panTween = new OpenLayers.Tween(this.panMethod)), this.zoomMethod && this.applyTransform.transform && (this.zoomTween = new OpenLayers.Tween(this.zoomMethod));
    },
    "getViewport": function() {
        return this.viewPortDiv;
    },
    "render": function(e) {
        this.div = OpenLayers.Util.getElement(e), OpenLayers.Element.addClass(this.div, "olMap"), 
        this.viewPortDiv.parentNode.removeChild(this.viewPortDiv), this.div.appendChild(this.viewPortDiv), 
        this.updateSize();
    },
    "unloadDestroy": null,
    "updateSizeDestroy": null,
    "destroy": function() {
        if (!this.unloadDestroy) return !1;
        if (this.panTween && (this.panTween.stop(), this.panTween = null), this.zoomTween && (this.zoomTween.stop(), 
        this.zoomTween = null), OpenLayers.Event.stopObserving(window, "unload", this.unloadDestroy), 
        this.unloadDestroy = null, this.updateSizeDestroy && OpenLayers.Event.stopObserving(window, "resize", this.updateSizeDestroy), 
        this.paddingForPopups = null, null != this.controls) {
            for (e = this.controls.length - 1; e >= 0; --e) this.controls[e].destroy();
            this.controls = null;
        }
        if (null != this.layers) {
            for (var e = this.layers.length - 1; e >= 0; --e) this.layers[e].destroy(!1);
            this.layers = null;
        }
        this.viewPortDiv && this.viewPortDiv.parentNode && this.viewPortDiv.parentNode.removeChild(this.viewPortDiv), 
        this.viewPortDiv = null, this.tileManager && (this.tileManager.removeMap(this), 
        this.tileManager = null), this.eventListeners && (this.events.un(this.eventListeners), 
        this.eventListeners = null), this.events.destroy(), this.events = null, this.options = null;
    },
    "setOptions": function(e) {
        var t = this.minPx && e.restrictedExtent != this.restrictedExtent;
        OpenLayers.Util.extend(this, e), t && this.moveTo(this.getCachedCenter(), this.zoom, {
            "forceZoomChange": !0
        });
    },
    "getTileSize": function() {
        return this.tileSize;
    },
    "getBy": function(e, t, i) {
        var n = "function" == typeof i.test;
        return OpenLayers.Array.filter(this[e], function(e) {
            return e[t] == i || n && i.test(e[t]);
        });
    },
    "getLayersBy": function(e, t) {
        return this.getBy("layers", e, t);
    },
    "getLayersByName": function(e) {
        return this.getLayersBy("name", e);
    },
    "getLayersByClass": function(e) {
        return this.getLayersBy("CLASS_NAME", e);
    },
    "getControlsBy": function(e, t) {
        return this.getBy("controls", e, t);
    },
    "getControlsByClass": function(e) {
        return this.getControlsBy("CLASS_NAME", e);
    },
    "getLayer": function(e) {
        for (var t = null, i = 0, n = this.layers.length; i < n; i++) {
            var s = this.layers[i];
            if (s.id == e) {
                t = s;
                break;
            }
        }
        return t;
    },
    "setLayerZIndex": function(e, t) {
        e.setZIndex(this.Z_INDEX_BASE[e.isBaseLayer ? "BaseLayer" : "Overlay"] + 5 * t);
    },
    "resetLayersZIndex": function() {
        for (var e = 0, t = this.layers.length; e < t; e++) {
            var i = this.layers[e];
            this.setLayerZIndex(i, e);
        }
    },
    "addLayer": function(e) {
        for (var t = 0, i = this.layers.length; t < i; t++) if (this.layers[t] == e) return !1;
        return !1 !== this.events.triggerEvent("preaddlayer", {
            "layer": e
        }) && (this.allOverlays && (e.isBaseLayer = !1), e.div.className = "olLayerDiv", 
        e.div.style.overflow = "", this.setLayerZIndex(e, this.layers.length), e.isFixed ? this.viewPortDiv.appendChild(e.div) : this.layerContainerDiv.appendChild(e.div), 
        this.layers.push(e), e.setMap(this), e.isBaseLayer || this.allOverlays && !this.baseLayer ? null == this.baseLayer ? this.setBaseLayer(e) : e.setVisibility(!1) : e.redraw(), 
        this.events.triggerEvent("addlayer", {
            "layer": e
        }), e.events.triggerEvent("added", {
            "map": this,
            "layer": e
        }), e.afterAdd(), !0);
    },
    "addLayers": function(e) {
        for (var t = 0, i = e.length; t < i; t++) this.addLayer(e[t]);
    },
    "removeLayer": function(e, t) {
        if (!1 !== this.events.triggerEvent("preremovelayer", {
            "layer": e
        })) {
            if (null == t && (t = !0), e.isFixed ? this.viewPortDiv.removeChild(e.div) : this.layerContainerDiv.removeChild(e.div), 
            OpenLayers.Util.removeItem(this.layers, e), e.removeMap(this), e.map = null, this.baseLayer == e && (this.baseLayer = null, 
            t)) for (var i = 0, n = this.layers.length; i < n; i++) {
                var s = this.layers[i];
                if (s.isBaseLayer || this.allOverlays) {
                    this.setBaseLayer(s);
                    break;
                }
            }
            this.resetLayersZIndex(), this.events.triggerEvent("removelayer", {
                "layer": e
            }), e.events.triggerEvent("removed", {
                "map": this,
                "layer": e
            });
        }
    },
    "getNumLayers": function() {
        return this.layers.length;
    },
    "getLayerIndex": function(e) {
        return OpenLayers.Util.indexOf(this.layers, e);
    },
    "setLayerIndex": function(e, t) {
        var i = this.getLayerIndex(e);
        if (t < 0 ? t = 0 : t > this.layers.length && (t = this.layers.length), i != t) {
            this.layers.splice(i, 1), this.layers.splice(t, 0, e);
            for (var n = 0, s = this.layers.length; n < s; n++) this.setLayerZIndex(this.layers[n], n);
            this.events.triggerEvent("changelayer", {
                "layer": e,
                "property": "order"
            }), this.allOverlays && (0 === t ? this.setBaseLayer(e) : this.baseLayer !== this.layers[0] && this.setBaseLayer(this.layers[0]));
        }
    },
    "raiseLayer": function(e, t) {
        var i = this.getLayerIndex(e) + t;
        this.setLayerIndex(e, i);
    },
    "setBaseLayer": function(e) {
        if (e != this.baseLayer && -1 != OpenLayers.Util.indexOf(this.layers, e)) {
            var t = this.getCachedCenter(), i = this.getResolution(), n = OpenLayers.Util.getResolutionFromScale(this.getScale(), e.units);
            if (null == this.baseLayer || this.allOverlays || this.baseLayer.setVisibility(!1), 
            this.baseLayer = e, this.allOverlays && !this.baseLayer.visibility || (this.baseLayer.setVisibility(!0), 
            !1 === this.baseLayer.inRange && this.baseLayer.redraw()), null != t) {
                var s = this.getZoomForResolution(n || this.resolution, !0);
                this.setCenter(t, s, !1, i != n);
            }
            this.events.triggerEvent("changebaselayer", {
                "layer": this.baseLayer
            });
        }
    },
    "addControl": function(e, t) {
        this.controls.push(e), this.addControlToMap(e, t);
    },
    "addControls": function(e, t) {
        for (var i = 1 === arguments.length ? [] : t, n = 0, s = e.length; n < s; n++) {
            var r = e[n], o = i[n] ? i[n] : null;
            this.addControl(r, o);
        }
    },
    "addControlToMap": function(e, t) {
        e.outsideViewport = null != e.div, this.displayProjection && !e.displayProjection && (e.displayProjection = this.displayProjection), 
        e.setMap(this);
        var i = e.draw(t);
        i && (e.outsideViewport || (i.style.zIndex = this.Z_INDEX_BASE.Control + this.controls.length, 
        this.viewPortDiv.appendChild(i))), e.autoActivate && e.activate();
    },
    "getControl": function(e) {
        for (var t = null, i = 0, n = this.controls.length; i < n; i++) {
            var s = this.controls[i];
            if (s.id == e) {
                t = s;
                break;
            }
        }
        return t;
    },
    "removeControl": function(e) {
        e && e == this.getControl(e.id) && (e.div && e.div.parentNode == this.viewPortDiv && this.viewPortDiv.removeChild(e.div), 
        OpenLayers.Util.removeItem(this.controls, e));
    },
    "addPopup": function(e, t) {
        if (t) for (var i = this.popups.length - 1; i >= 0; --i) this.removePopup(this.popups[i]);
        e.map = this, this.popups.push(e);
        var n = e.draw();
        n && (n.style.zIndex = this.Z_INDEX_BASE.Popup + this.popups.length, this.layerContainerDiv.appendChild(n));
    },
    "removePopup": function(e) {
        if (OpenLayers.Util.removeItem(this.popups, e), e.div) try {
            this.layerContainerDiv.removeChild(e.div);
        } catch (e) {}
        e.map = null;
    },
    "getSize": function() {
        var e = null;
        return null != this.size && (e = this.size.clone()), e;
    },
    "updateSize": function() {
        var e = this.getCurrentSize();
        if (e && !isNaN(e.h) && !isNaN(e.w)) {
            this.events.clearMouseCache();
            var t = this.getSize();
            if (null == t && (this.size = t = e), !e.equals(t)) {
                this.size = e;
                for (var i = 0, n = this.layers.length; i < n; i++) this.layers[i].onMapResize();
                var s = this.getCachedCenter();
                if (null != this.baseLayer && null != s) {
                    var r = this.getZoom();
                    this.zoom = null, this.setCenter(s, r);
                }
            }
        }
        this.events.triggerEvent("updatesize");
    },
    "getCurrentSize": function() {
        var e = new OpenLayers.Size(this.div.clientWidth, this.div.clientHeight);
        return (0 == e.w && 0 == e.h || isNaN(e.w) && isNaN(e.h)) && (e.w = this.div.offsetWidth, 
        e.h = this.div.offsetHeight), (0 == e.w && 0 == e.h || isNaN(e.w) && isNaN(e.h)) && (e.w = parseInt(this.div.style.width), 
        e.h = parseInt(this.div.style.height)), e;
    },
    "calculateBounds": function(e, t) {
        var i = null;
        if (null == e && (e = this.getCachedCenter()), null == t && (t = this.getResolution()), 
        null != e && null != t) {
            var n = this.size.w * t / 2, s = this.size.h * t / 2;
            i = new OpenLayers.Bounds(e.lon - n, e.lat - s, e.lon + n, e.lat + s);
        }
        return i;
    },
    "getCenter": function() {
        var e = null, t = this.getCachedCenter();
        return t && (e = t.clone()), e;
    },
    "getCachedCenter": function() {
        return !this.center && this.size && (this.center = this.getLonLatFromViewPortPx({
            "x": this.size.w / 2,
            "y": this.size.h / 2
        })), this.center;
    },
    "getZoom": function() {
        return this.zoom;
    },
    "pan": function(e, t, i) {
        if ((i = OpenLayers.Util.applyDefaults(i, {
            "animate": !0,
            "dragging": !1
        })).dragging) 0 == e && 0 == t || this.moveByPx(e, t); else {
            var n = this.getViewPortPxFromLonLat(this.getCachedCenter()), s = n.add(e, t);
            if (this.dragging || !s.equals(n)) {
                var r = this.getLonLatFromViewPortPx(s);
                i.animate ? this.panTo(r) : (this.moveTo(r), this.dragging && (this.dragging = !1, 
                this.events.triggerEvent("moveend")));
            }
        }
    },
    "panTo": function(e) {
        if (this.panTween && this.getExtent().scale(this.panRatio).containsLonLat(e)) {
            var t = this.getCachedCenter();
            if (e.equals(t)) return;
            var i = this.getPixelFromLonLat(t), n = this.getPixelFromLonLat(e), s = {
                "x": n.x - i.x,
                "y": n.y - i.y
            }, r = {
                "x": 0,
                "y": 0
            };
            this.panTween.start({
                "x": 0,
                "y": 0
            }, s, this.panDuration, {
                "callbacks": {
                    "eachStep": OpenLayers.Function.bind(function(e) {
                        var t = e.x - r.x, i = e.y - r.y;
                        this.moveByPx(t, i), r.x = Math.round(e.x), r.y = Math.round(e.y);
                    }, this),
                    "done": OpenLayers.Function.bind(function(t) {
                        this.moveTo(e), this.dragging = !1, this.events.triggerEvent("moveend");
                    }, this)
                }
            });
        } else this.setCenter(e);
    },
    "setCenter": function(e, t, i, n) {
        this.panTween && this.panTween.stop(), this.zoomTween && this.zoomTween.stop(), 
        this.moveTo(e, t, {
            "dragging": i,
            "forceZoomChange": n
        });
    },
    "moveByPx": function(e, t) {
        var i = this.size.w / 2, n = this.size.h / 2, s = i + e, r = n + t, o = this.baseLayer.wrapDateLine, a = 0, l = 0;
        if (this.restrictedExtent && (a = i, l = n, o = !1), e = o || s <= this.maxPx.x - a && s >= this.minPx.x + a ? Math.round(e) : 0, 
        t = r <= this.maxPx.y - l && r >= this.minPx.y + l ? Math.round(t) : 0, e || t) {
            this.dragging || (this.dragging = !0, this.events.triggerEvent("movestart")), this.center = null, 
            e && (this.layerContainerOriginPx.x -= e, this.minPx.x -= e, this.maxPx.x -= e), 
            t && (this.layerContainerOriginPx.y -= t, this.minPx.y -= t, this.maxPx.y -= t), 
            this.applyTransform();
            var h, c, u;
            for (c = 0, u = this.layers.length; c < u; ++c) (h = this.layers[c]).visibility && (h === this.baseLayer || h.inRange) && (h.moveByPx(e, t), 
            h.events.triggerEvent("move"));
            this.events.triggerEvent("move");
        }
    },
    "adjustZoom": function(e) {
        if (this.baseLayer && this.baseLayer.wrapDateLine) {
            var t = this.baseLayer.resolutions, i = this.getMaxExtent().getWidth() / this.size.w;
            if (this.getResolutionForZoom(e) > i) if (this.fractionalZoom) e = this.getZoomForResolution(i); else for (var n = 0 | e, s = t.length; n < s; ++n) if (t[n] <= i) {
                e = n;
                break;
            }
        }
        return e;
    },
    "getMinZoom": function() {
        return this.adjustZoom(0);
    },
    "moveTo": function(e, t, i) {
        null == e || e instanceof OpenLayers.LonLat || (e = new OpenLayers.LonLat(e)), i || (i = {}), 
        null != t && (t = parseFloat(t), this.fractionalZoom || (t = Math.round(t)));
        var n = t;
        (t = this.adjustZoom(t)) !== n && (e = this.getCenter());
        var s = i.dragging || this.dragging, r = i.forceZoomChange;
        if (this.getCachedCenter() || this.isValidLonLat(e) || (e = this.maxExtent.getCenterLonLat(), 
        this.center = e.clone()), null != this.restrictedExtent) {
            null == e && (e = this.center), null == t && (t = this.getZoom());
            var o = this.getResolutionForZoom(t), a = this.calculateBounds(e, o);
            if (!this.restrictedExtent.containsBounds(a)) {
                var l = this.restrictedExtent.getCenterLonLat();
                a.getWidth() > this.restrictedExtent.getWidth() ? e = new OpenLayers.LonLat(l.lon, e.lat) : a.left < this.restrictedExtent.left ? e = e.add(this.restrictedExtent.left - a.left, 0) : a.right > this.restrictedExtent.right && (e = e.add(this.restrictedExtent.right - a.right, 0)), 
                a.getHeight() > this.restrictedExtent.getHeight() ? e = new OpenLayers.LonLat(e.lon, l.lat) : a.bottom < this.restrictedExtent.bottom ? e = e.add(0, this.restrictedExtent.bottom - a.bottom) : a.top > this.restrictedExtent.top && (e = e.add(0, this.restrictedExtent.top - a.top));
            }
        }
        var h = r || this.isValidZoomLevel(t) && t != this.getZoom(), c = this.isValidLonLat(e) && !e.equals(this.center);
        if (h || c || s) {
            s || this.events.triggerEvent("movestart", {
                "zoomChanged": h
            }), c && (!h && this.center && this.centerLayerContainer(e), this.center = e.clone());
            var u = h ? this.getResolutionForZoom(t) : this.getResolution();
            if (h || null == this.layerContainerOrigin) {
                this.layerContainerOrigin = this.getCachedCenter(), this.layerContainerOriginPx.x = 0, 
                this.layerContainerOriginPx.y = 0, this.applyTransform();
                var p = this.getMaxExtent({
                    "restricted": !0
                }), d = p.getCenterLonLat(), f = this.center.lon - d.lon, m = d.lat - this.center.lat, g = Math.round(p.getWidth() / u), y = Math.round(p.getHeight() / u);
                this.minPx = {
                    "x": (this.size.w - g) / 2 - f / u,
                    "y": (this.size.h - y) / 2 - m / u
                }, this.maxPx = {
                    "x": this.minPx.x + Math.round(p.getWidth() / u),
                    "y": this.minPx.y + Math.round(p.getHeight() / u)
                };
            }
            h && (this.zoom = t, this.resolution = u);
            var v = this.getExtent();
            this.baseLayer.visibility && (this.baseLayer.moveTo(v, h, i.dragging), i.dragging || this.baseLayer.events.triggerEvent("moveend", {
                "zoomChanged": h
            })), v = this.baseLayer.getExtent();
            for (b = this.layers.length - 1; b >= 0; --b) {
                var L = this.layers[b];
                if (L !== this.baseLayer && !L.isBaseLayer) {
                    var w = L.calculateInRange();
                    L.inRange != w && (L.inRange = w, w || L.display(!1), this.events.triggerEvent("changelayer", {
                        "layer": L,
                        "property": "visibility"
                    })), w && L.visibility && (L.moveTo(v, h, i.dragging), i.dragging || L.events.triggerEvent("moveend", {
                        "zoomChanged": h
                    }));
                }
            }
            if (this.events.triggerEvent("move"), s || this.events.triggerEvent("moveend"), 
            h) {
                for (var b = 0, C = this.popups.length; b < C; b++) this.popups[b].updatePosition();
                this.events.triggerEvent("zoomend");
            }
        }
    },
    "centerLayerContainer": function(e) {
        var t = this.getViewPortPxFromLonLat(this.layerContainerOrigin), i = this.getViewPortPxFromLonLat(e);
        if (null != t && null != i) {
            var n = this.layerContainerOriginPx.x, s = this.layerContainerOriginPx.y, r = Math.round(t.x - i.x), o = Math.round(t.y - i.y);
            this.applyTransform(this.layerContainerOriginPx.x = r, this.layerContainerOriginPx.y = o);
            var a = n - r, l = s - o;
            this.minPx.x -= a, this.maxPx.x -= a, this.minPx.y -= l, this.maxPx.y -= l;
        }
    },
    "isValidZoomLevel": function(e) {
        return null != e && e >= 0 && e < this.getNumZoomLevels();
    },
    "isValidLonLat": function(e) {
        var t = !1;
        if (null != e) {
            var i = this.getMaxExtent(), n = this.baseLayer.wrapDateLine && i;
            t = i.containsLonLat(e, {
                "worldBounds": n
            });
        }
        return t;
    },
    "getProjection": function() {
        var e = this.getProjectionObject();
        return e ? e.getCode() : null;
    },
    "getProjectionObject": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.projection), e;
    },
    "getMaxResolution": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.maxResolution), e;
    },
    "getMaxExtent": function(e) {
        var t = null;
        return e && e.restricted && this.restrictedExtent ? t = this.restrictedExtent : null != this.baseLayer && (t = this.baseLayer.maxExtent), 
        t;
    },
    "getNumZoomLevels": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.numZoomLevels), e;
    },
    "getExtent": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.getExtent()), e;
    },
    "getResolution": function() {
        var e = null;
        return null != this.baseLayer ? e = this.baseLayer.getResolution() : !0 === this.allOverlays && this.layers.length > 0 && (e = this.layers[0].getResolution()), 
        e;
    },
    "getUnits": function() {
        var e = null;
        return null != this.baseLayer && (e = this.baseLayer.units), e;
    },
    "getScale": function() {
        var e = null;
        if (null != this.baseLayer) {
            var t = this.getResolution(), i = this.baseLayer.units;
            e = OpenLayers.Util.getScaleFromResolution(t, i);
        }
        return e;
    },
    "getZoomForExtent": function(e, t) {
        var i = null;
        return null != this.baseLayer && (i = this.baseLayer.getZoomForExtent(e, t)), i;
    },
    "getResolutionForZoom": function(e) {
        var t = null;
        return this.baseLayer && (t = this.baseLayer.getResolutionForZoom(e)), t;
    },
    "getZoomForResolution": function(e, t) {
        var i = null;
        return null != this.baseLayer && (i = this.baseLayer.getZoomForResolution(e, t)), 
        i;
    },
    "zoomTo": function(e, t) {
        var i = this;
        if (i.isValidZoomLevel(e)) {
            i.baseLayer.wrapDateLine && (e = i.adjustZoom(e));
            var n = t ? i.getZoomTargetCenter(t, i.getResolutionForZoom(e)) : i.getCenter();
            if (n && i.events.triggerEvent("zoomstart", {
                "center": n,
                "zoom": e
            }), i.zoomTween) {
                i.zoomTween.stop();
                var s = {
                    "scale": 1
                }, r = {
                    "scale": i.getResolution() / i.getResolutionForZoom(e)
                };
                if (!t) {
                    var o = i.getSize();
                    t = {
                        "x": o.w / 2,
                        "y": o.h / 2
                    };
                }
                i.zoomTween.start(s, r, i.zoomDuration, {
                    "minFrameRate": 50,
                    "callbacks": {
                        "eachStep": function(e) {
                            var n = i.layerContainerOriginPx, s = e.scale, r = (s - 1) * (n.x - t.x) | 0, o = (s - 1) * (n.y - t.y) | 0;
                            i.applyTransform(n.x + r, n.y + o, s);
                        },
                        "done": function(e) {
                            i.applyTransform();
                            var s = i.getResolution() / e.scale, r = i.getZoomForResolution(s, !0), o = 1 === e.scale ? n : i.getZoomTargetCenter(t, s);
                            i.moveTo(o, r);
                        }
                    }
                });
            } else i.setCenter(n, e);
        }
    },
    "zoomIn": function() {
        this.zoomTween && this.zoomTween.stop(), this.zoomTo(this.getZoom() + 1);
    },
    "zoomOut": function() {
        this.zoomTween && this.zoomTween.stop(), this.zoomTo(this.getZoom() - 1);
    },
    "zoomToExtent": function(e, t) {
        e instanceof OpenLayers.Bounds || (e = new OpenLayers.Bounds(e));
        var i = e.getCenterLonLat();
        if (this.baseLayer.wrapDateLine) {
            var n = this.getMaxExtent();
            for (e = e.clone(); e.right < e.left; ) e.right += n.getWidth();
            i = e.getCenterLonLat().wrapDateLine(n);
        }
        this.setCenter(i, this.getZoomForExtent(e, t));
    },
    "zoomToMaxExtent": function(e) {
        var t = !e || e.restricted, i = this.getMaxExtent({
            "restricted": t
        });
        this.zoomToExtent(i);
    },
    "zoomToScale": function(e, t) {
        var i = OpenLayers.Util.getResolutionFromScale(e, this.baseLayer.units), n = this.size.w * i / 2, s = this.size.h * i / 2, r = this.getCachedCenter(), o = new OpenLayers.Bounds(r.lon - n, r.lat - s, r.lon + n, r.lat + s);
        this.zoomToExtent(o, t);
    },
    "getLonLatFromViewPortPx": function(e) {
        var t = null;
        return null != this.baseLayer && (t = this.baseLayer.getLonLatFromViewPortPx(e)), 
        t;
    },
    "getViewPortPxFromLonLat": function(e) {
        var t = null;
        return null != this.baseLayer && (t = this.baseLayer.getViewPortPxFromLonLat(e)), 
        t;
    },
    "getZoomTargetCenter": function(e, t) {
        var i = null, n = this.getSize(), s = n.w / 2 - e.x, r = e.y - n.h / 2, o = this.getLonLatFromPixel(e);
        return o && (i = new OpenLayers.LonLat(o.lon + s * t, o.lat + r * t)), i;
    },
    "getLonLatFromPixel": function(e) {
        return this.getLonLatFromViewPortPx(e);
    },
    "getPixelFromLonLat": function(e) {
        var t = this.getViewPortPxFromLonLat(e);
        return t.x = Math.round(t.x), t.y = Math.round(t.y), t;
    },
    "getGeodesicPixelSize": function(e) {
        var t = e ? this.getLonLatFromPixel(e) : this.getCachedCenter() || new OpenLayers.LonLat(0, 0), i = this.getResolution(), n = t.add(-i / 2, 0), s = t.add(i / 2, 0), r = t.add(0, -i / 2), o = t.add(0, i / 2), a = new OpenLayers.Projection("EPSG:4326"), l = this.getProjectionObject() || a;
        return l.equals(a) || (n.transform(l, a), s.transform(l, a), r.transform(l, a), 
        o.transform(l, a)), new OpenLayers.Size(OpenLayers.Util.distVincenty(n, s), OpenLayers.Util.distVincenty(r, o));
    },
    "getViewPortPxFromLayerPx": function(e) {
        var t = null;
        if (null != e) {
            var i = this.layerContainerOriginPx.x, n = this.layerContainerOriginPx.y;
            t = e.add(i, n);
        }
        return t;
    },
    "getLayerPxFromViewPortPx": function(e) {
        var t = null;
        if (null != e) {
            var i = -this.layerContainerOriginPx.x, n = -this.layerContainerOriginPx.y;
            t = e.add(i, n), (isNaN(t.x) || isNaN(t.y)) && (t = null);
        }
        return t;
    },
    "getLonLatFromLayerPx": function(e) {
        return e = this.getViewPortPxFromLayerPx(e), this.getLonLatFromViewPortPx(e);
    },
    "getLayerPxFromLonLat": function(e) {
        var t = this.getPixelFromLonLat(e);
        return this.getLayerPxFromViewPortPx(t);
    },
    "applyTransform": function(e, t, i) {
        i = i || 1;
        var n = this.layerContainerOriginPx, s = 1 !== i;
        e = e || n.x, t = t || n.y;
        var r = this.layerContainerDiv.style, o = this.applyTransform.transform, a = this.applyTransform.template;
        if (void 0 === o && (o = OpenLayers.Util.vendorPrefix.style("transform"), this.applyTransform.transform = o, 
        o)) {
            var l = OpenLayers.Element.getStyle(this.viewPortDiv, OpenLayers.Util.vendorPrefix.css("transform"));
            l && "none" === l || (a = [ "translate3d(", ",0) ", "scale3d(", ",1)" ], r[o] = [ a[0], "0,0", a[1] ].join("")), 
            a && ~r[o].indexOf(a[0]) || (a = [ "translate(", ") ", "scale(", ")" ]), this.applyTransform.template = a;
        }
        null === o || "translate3d(" !== a[0] && !0 !== s ? (r.left = e + "px", r.top = t + "px", 
        null !== o && (r[o] = "")) : (!0 === s && "translate(" === a[0] && (e -= n.x, t -= n.y, 
        r.left = n.x + "px", r.top = n.y + "px"), r[o] = [ a[0], e, "px,", t, "px", a[1], a[2], i, ",", i, a[3] ].join(""));
    },
    "CLASS_NAME": "OpenLayers.Map"
}), OpenLayers.Map.TILE_WIDTH = 256, OpenLayers.Map.TILE_HEIGHT = 256, OpenLayers.Layer = OpenLayers.Class({
    "id": null,
    "name": null,
    "div": null,
    "opacity": 1,
    "alwaysInRange": null,
    "RESOLUTION_PROPERTIES": [ "scales", "resolutions", "maxScale", "minScale", "maxResolution", "minResolution", "numZoomLevels", "maxZoomLevel" ],
    "events": null,
    "map": null,
    "isBaseLayer": !1,
    "alpha": !1,
    "displayInLayerSwitcher": !0,
    "visibility": !0,
    "attribution": null,
    "inRange": !1,
    "imageSize": null,
    "options": null,
    "eventListeners": null,
    "gutter": 0,
    "projection": null,
    "units": null,
    "scales": null,
    "resolutions": null,
    "maxExtent": null,
    "minExtent": null,
    "maxResolution": null,
    "minResolution": null,
    "numZoomLevels": null,
    "minScale": null,
    "maxScale": null,
    "displayOutsideMaxExtent": !1,
    "wrapDateLine": !1,
    "metadata": null,
    "initialize": function(e, t) {
        this.metadata = {}, t = OpenLayers.Util.extend({}, t), null != this.alwaysInRange && (t.alwaysInRange = this.alwaysInRange), 
        this.addOptions(t), this.name = e, null == this.id && (this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_"), 
        this.div = OpenLayers.Util.createDiv(this.id), this.div.style.width = "100%", this.div.style.height = "100%", 
        this.div.dir = "ltr", this.events = new OpenLayers.Events(this, this.div), this.eventListeners instanceof Object && this.events.on(this.eventListeners));
    },
    "destroy": function(e) {
        null == e && (e = !0), null != this.map && this.map.removeLayer(this, e), this.projection = null, 
        this.map = null, this.name = null, this.div = null, this.options = null, this.events && (this.eventListeners && this.events.un(this.eventListeners), 
        this.events.destroy()), this.eventListeners = null, this.events = null;
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer(this.name, this.getOptions())), OpenLayers.Util.applyDefaults(e, this), 
        e.map = null, e;
    },
    "getOptions": function() {
        var e = {};
        for (var t in this.options) e[t] = this[t];
        return e;
    },
    "setName": function(e) {
        e != this.name && (this.name = e, null != this.map && this.map.events.triggerEvent("changelayer", {
            "layer": this,
            "property": "name"
        }));
    },
    "addOptions": function(e, t) {
        if (null == this.options && (this.options = {}), e && ("string" == typeof e.projection && (e.projection = new OpenLayers.Projection(e.projection)), 
        e.projection && OpenLayers.Util.applyDefaults(e, OpenLayers.Projection.defaults[e.projection.getCode()]), 
        !e.maxExtent || e.maxExtent instanceof OpenLayers.Bounds || (e.maxExtent = new OpenLayers.Bounds(e.maxExtent)), 
        !e.minExtent || e.minExtent instanceof OpenLayers.Bounds || (e.minExtent = new OpenLayers.Bounds(e.minExtent))), 
        OpenLayers.Util.extend(this.options, e), OpenLayers.Util.extend(this, e), this.projection && this.projection.getUnits() && (this.units = this.projection.getUnits()), 
        this.map) {
            var i = this.map.getResolution(), n = this.RESOLUTION_PROPERTIES.concat([ "projection", "units", "minExtent", "maxExtent" ]);
            for (var s in e) if (e.hasOwnProperty(s) && OpenLayers.Util.indexOf(n, s) >= 0) {
                this.initResolutions(), t && this.map.baseLayer === this && (this.map.setCenter(this.map.getCenter(), this.map.getZoomForResolution(i), !1, !0), 
                this.map.events.triggerEvent("changebaselayer", {
                    "layer": this
                }));
                break;
            }
        }
    },
    "onMapResize": function() {},
    "redraw": function() {
        var e = !1;
        if (this.map) {
            this.inRange = this.calculateInRange();
            var t = this.getExtent();
            if (t && this.inRange && this.visibility) {
                this.moveTo(t, !0, !1), this.events.triggerEvent("moveend", {
                    "zoomChanged": !0
                }), e = !0;
            }
        }
        return e;
    },
    "moveTo": function(e, t, i) {
        var n = this.visibility;
        this.isBaseLayer || (n = n && this.inRange), this.display(n);
    },
    "moveByPx": function(e, t) {},
    "setMap": function(e) {
        if (null == this.map) {
            if (this.map = e, this.maxExtent = this.maxExtent || this.map.maxExtent, this.minExtent = this.minExtent || this.map.minExtent, 
            this.projection = this.projection || this.map.projection, "string" == typeof this.projection && (this.projection = new OpenLayers.Projection(this.projection)), 
            this.projection && this.projection.getUnits() ? this.units = this.projection.getUnits() : this.units = this.units || this.map.units, 
            this.initResolutions(), !this.isBaseLayer) {
                this.inRange = this.calculateInRange();
                var t = this.visibility && this.inRange;
                this.div.style.display = t ? "" : "none";
            }
            this.setTileSize();
        }
    },
    "afterAdd": function() {},
    "removeMap": function(e) {},
    "getImageSize": function(e) {
        return this.imageSize || this.tileSize;
    },
    "setTileSize": function(e) {
        var t = e || (this.tileSize ? this.tileSize : this.map.getTileSize());
        this.tileSize = t, this.gutter && (this.imageSize = new OpenLayers.Size(t.w + 2 * this.gutter, t.h + 2 * this.gutter));
    },
    "getVisibility": function() {
        return this.visibility;
    },
    "setVisibility": function(e) {
        e != this.visibility && (this.visibility = e, this.display(e), this.redraw(), null != this.map && this.map.events.triggerEvent("changelayer", {
            "layer": this,
            "property": "visibility"
        }), this.events.triggerEvent("visibilitychanged"));
    },
    "display": function(e) {
        e != ("none" != this.div.style.display) && (this.div.style.display = e && this.calculateInRange() ? "block" : "none");
    },
    "calculateInRange": function() {
        var e = !1;
        if (this.alwaysInRange) e = !0; else if (this.map) {
            var t = this.map.getResolution();
            e = t >= this.minResolution && t <= this.maxResolution;
        }
        return e;
    },
    "setIsBaseLayer": function(e) {
        e != this.isBaseLayer && (this.isBaseLayer = e, null != this.map && this.map.events.triggerEvent("changebaselayer", {
            "layer": this
        }));
    },
    "initResolutions": function() {
        var e, t, i, n = {}, s = !0;
        for (e = 0, t = this.RESOLUTION_PROPERTIES.length; e < t; e++) n[i = this.RESOLUTION_PROPERTIES[e]] = this.options[i], 
        s && this.options[i] && (s = !1);
        if (null == this.options.alwaysInRange && (this.alwaysInRange = s), null == n.resolutions && (n.resolutions = this.resolutionsFromScales(n.scales)), 
        null == n.resolutions && (n.resolutions = this.calculateResolutions(n)), null == n.resolutions) {
            for (e = 0, t = this.RESOLUTION_PROPERTIES.length; e < t; e++) n[i = this.RESOLUTION_PROPERTIES[e]] = null != this.options[i] ? this.options[i] : this.map[i];
            null == n.resolutions && (n.resolutions = this.resolutionsFromScales(n.scales)), 
            null == n.resolutions && (n.resolutions = this.calculateResolutions(n));
        }
        var r;
        this.options.maxResolution && "auto" !== this.options.maxResolution && (r = this.options.maxResolution), 
        this.options.minScale && (r = OpenLayers.Util.getResolutionFromScale(this.options.minScale, this.units));
        var o;
        if (this.options.minResolution && "auto" !== this.options.minResolution && (o = this.options.minResolution), 
        this.options.maxScale && (o = OpenLayers.Util.getResolutionFromScale(this.options.maxScale, this.units)), 
        n.resolutions && (n.resolutions.sort(function(e, t) {
            return t - e;
        }), r || (r = n.resolutions[0]), !o)) {
            var a = n.resolutions.length - 1;
            o = n.resolutions[a];
        }
        if (this.resolutions = n.resolutions, this.resolutions) {
            for (t = this.resolutions.length, this.scales = new Array(t), e = 0; e < t; e++) this.scales[e] = OpenLayers.Util.getScaleFromResolution(this.resolutions[e], this.units);
            this.numZoomLevels = t;
        }
        this.minResolution = o, o && (this.maxScale = OpenLayers.Util.getScaleFromResolution(o, this.units)), 
        this.maxResolution = r, r && (this.minScale = OpenLayers.Util.getScaleFromResolution(r, this.units));
    },
    "resolutionsFromScales": function(e) {
        if (null != e) {
            var t, i, n;
            for (n = e.length, t = new Array(n), i = 0; i < n; i++) t[i] = OpenLayers.Util.getResolutionFromScale(e[i], this.units);
            return t;
        }
    },
    "calculateResolutions": function(e) {
        var t, i, n, s = e.maxResolution;
        null != e.minScale ? s = OpenLayers.Util.getResolutionFromScale(e.minScale, this.units) : "auto" == s && null != this.maxExtent && (t = this.map.getSize(), 
        i = this.maxExtent.getWidth() / t.w, n = this.maxExtent.getHeight() / t.h, s = Math.max(i, n));
        var r = e.minResolution;
        if (null != e.maxScale ? r = OpenLayers.Util.getResolutionFromScale(e.maxScale, this.units) : "auto" == e.minResolution && null != this.minExtent && (t = this.map.getSize(), 
        i = this.minExtent.getWidth() / t.w, n = this.minExtent.getHeight() / t.h, r = Math.max(i, n)), 
        "number" != typeof s && "number" != typeof r && null != this.maxExtent) {
            var o = this.map.getTileSize();
            s = Math.max(this.maxExtent.getWidth() / o.w, this.maxExtent.getHeight() / o.h);
        }
        var a = e.maxZoomLevel, l = e.numZoomLevels;
        if ("number" == typeof r && "number" == typeof s && void 0 === l) {
            var h = s / r;
            l = Math.floor(Math.log(h) / Math.log(2)) + 1;
        } else void 0 === l && null != a && (l = a + 1);
        if (!("number" != typeof l || l <= 0 || "number" != typeof s && "number" != typeof r)) {
            var c = new Array(l), u = 2;
            "number" == typeof r && "number" == typeof s && (u = Math.pow(s / r, 1 / (l - 1)));
            var p;
            if ("number" == typeof s) for (p = 0; p < l; p++) c[p] = s / Math.pow(u, p); else for (p = 0; p < l; p++) c[l - 1 - p] = r * Math.pow(u, p);
            return c;
        }
    },
    "getResolution": function() {
        var e = this.map.getZoom();
        return this.getResolutionForZoom(e);
    },
    "getExtent": function() {
        return this.map.calculateBounds();
    },
    "getZoomForExtent": function(e, t) {
        var i = this.map.getSize(), n = Math.max(e.getWidth() / i.w, e.getHeight() / i.h);
        return this.getZoomForResolution(n, t);
    },
    "getDataExtent": function() {},
    "getResolutionForZoom": function(e) {
        e = Math.max(0, Math.min(e, this.resolutions.length - 1));
        var t;
        if (this.map.fractionalZoom) {
            var i = Math.floor(e), n = Math.ceil(e);
            t = this.resolutions[i] - (e - i) * (this.resolutions[i] - this.resolutions[n]);
        } else t = this.resolutions[Math.round(e)];
        return t;
    },
    "getZoomForResolution": function(e, t) {
        var i, n, s;
        if (this.map.fractionalZoom) {
            var r, o = 0, a = this.resolutions.length - 1, l = this.resolutions[o], h = this.resolutions[a];
            for (n = 0, s = this.resolutions.length; n < s; ++n) if ((r = this.resolutions[n]) >= e && (l = r, 
            o = n), r <= e) {
                h = r, a = n;
                break;
            }
            var c = l - h;
            i = c > 0 ? o + (l - e) / c : o;
        } else {
            var u, p = Number.POSITIVE_INFINITY;
            for (n = 0, s = this.resolutions.length; n < s; n++) if (t) {
                if ((u = Math.abs(this.resolutions[n] - e)) > p) break;
                p = u;
            } else if (this.resolutions[n] < e) break;
            i = Math.max(0, n - 1);
        }
        return i;
    },
    "getLonLatFromViewPortPx": function(e) {
        var t = null, i = this.map;
        if (null != e && i.minPx) {
            var n = i.getResolution(), s = i.getMaxExtent({
                "restricted": !0
            }), r = (e.x - i.minPx.x) * n + s.left, o = (i.minPx.y - e.y) * n + s.top;
            t = new OpenLayers.LonLat(r, o), this.wrapDateLine && (t = t.wrapDateLine(this.maxExtent));
        }
        return t;
    },
    "getViewPortPxFromLonLat": function(e, t) {
        var i = null;
        if (null != e) {
            t = t || this.map.getResolution();
            var n = this.map.calculateBounds(null, t);
            i = new OpenLayers.Pixel(1 / t * (e.lon - n.left), 1 / t * (n.top - e.lat));
        }
        return i;
    },
    "setOpacity": function(e) {
        if (e != this.opacity) {
            this.opacity = e;
            for (var t = this.div.childNodes, i = 0, n = t.length; i < n; ++i) {
                var s = t[i].firstChild || t[i], r = t[i].lastChild;
                r && "iframe" === r.nodeName.toLowerCase() && (s = r.parentNode), OpenLayers.Util.modifyDOMElement(s, null, null, null, null, null, null, e);
            }
            null != this.map && this.map.events.triggerEvent("changelayer", {
                "layer": this,
                "property": "opacity"
            });
        }
    },
    "getZIndex": function() {
        return this.div.style.zIndex;
    },
    "setZIndex": function(e) {
        this.div.style.zIndex = e;
    },
    "adjustBounds": function(e) {
        if (this.gutter) {
            var t = this.gutter * this.map.getResolution();
            e = new OpenLayers.Bounds(e.left - t, e.bottom - t, e.right + t, e.top + t);
        }
        if (this.wrapDateLine) {
            var i = {
                "rightTolerance": this.getResolution(),
                "leftTolerance": this.getResolution()
            };
            e = e.wrapDateLine(this.maxExtent, i);
        }
        return e;
    },
    "CLASS_NAME": "OpenLayers.Layer"
}), OpenLayers.Marker = OpenLayers.Class({
    "icon": null,
    "lonlat": null,
    "events": null,
    "map": null,
    "initialize": function(e, t) {
        this.lonlat = e;
        var i = t || OpenLayers.Marker.defaultIcon();
        null == this.icon ? this.icon = i : (this.icon.url = i.url, this.icon.size = i.size, 
        this.icon.offset = i.offset, this.icon.calculateOffset = i.calculateOffset), this.events = new OpenLayers.Events(this, this.icon.imageDiv);
    },
    "destroy": function() {
        this.erase(), this.map = null, this.events.destroy(), this.events = null, null != this.icon && (this.icon.destroy(), 
        this.icon = null);
    },
    "draw": function(e) {
        return this.icon.draw(e);
    },
    "erase": function() {
        null != this.icon && this.icon.erase();
    },
    "moveTo": function(e) {
        null != e && null != this.icon && this.icon.moveTo(e), this.lonlat = this.map.getLonLatFromLayerPx(e);
    },
    "isDrawn": function() {
        return this.icon && this.icon.isDrawn();
    },
    "onScreen": function() {
        var e = !1;
        return this.map && (e = this.map.getExtent().containsLonLat(this.lonlat)), e;
    },
    "inflate": function(e) {
        this.icon && this.icon.setSize({
            "w": this.icon.size.w * e,
            "h": this.icon.size.h * e
        });
    },
    "setOpacity": function(e) {
        this.icon.setOpacity(e);
    },
    "setUrl": function(e) {
        this.icon.setUrl(e);
    },
    "display": function(e) {
        this.icon.display(e);
    },
    "CLASS_NAME": "OpenLayers.Marker"
}), OpenLayers.Marker.defaultIcon = function() {
    return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"), {
        "w": 21,
        "h": 25
    }, {
        "x": -10.5,
        "y": -25
    });
}, OpenLayers.Popup = OpenLayers.Class({
    "events": null,
    "id": "",
    "lonlat": null,
    "div": null,
    "contentSize": null,
    "size": null,
    "contentHTML": null,
    "backgroundColor": "",
    "opacity": "",
    "border": "",
    "contentDiv": null,
    "groupDiv": null,
    "closeDiv": null,
    "autoSize": !1,
    "minSize": null,
    "maxSize": null,
    "displayClass": "olPopup",
    "contentDisplayClass": "olPopupContent",
    "padding": 0,
    "disableFirefoxOverflowHack": !1,
    "fixPadding": function() {
        "number" == typeof this.padding && (this.padding = new OpenLayers.Bounds(this.padding, this.padding, this.padding, this.padding));
    },
    "panMapIfOutOfView": !1,
    "keepInMap": !1,
    "closeOnMove": !1,
    "map": null,
    "initialize": function(e, t, i, n, s, r) {
        null == e && (e = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_")), this.id = e, 
        this.lonlat = t, this.contentSize = null != i ? i : new OpenLayers.Size(OpenLayers.Popup.WIDTH, OpenLayers.Popup.HEIGHT), 
        null != n && (this.contentHTML = n), this.backgroundColor = OpenLayers.Popup.COLOR, 
        this.opacity = OpenLayers.Popup.OPACITY, this.border = OpenLayers.Popup.BORDER, 
        this.div = OpenLayers.Util.createDiv(this.id, null, null, null, null, null, "hidden"), 
        this.div.className = this.displayClass;
        var o = this.id + "_GroupDiv";
        this.groupDiv = OpenLayers.Util.createDiv(o, null, null, null, "relative", null, "hidden");
        var e = this.div.id + "_contentDiv";
        this.contentDiv = OpenLayers.Util.createDiv(e, null, this.contentSize.clone(), null, "relative"), 
        this.contentDiv.className = this.contentDisplayClass, this.groupDiv.appendChild(this.contentDiv), 
        this.div.appendChild(this.groupDiv), s && this.addCloseBox(r), this.registerEvents();
    },
    "destroy": function() {
        this.id = null, this.lonlat = null, this.size = null, this.contentHTML = null, this.backgroundColor = null, 
        this.opacity = null, this.border = null, this.closeOnMove && this.map && this.map.events.unregister("movestart", this, this.hide), 
        this.events.destroy(), this.events = null, this.closeDiv && (OpenLayers.Event.stopObservingElement(this.closeDiv), 
        this.groupDiv.removeChild(this.closeDiv)), this.closeDiv = null, this.div.removeChild(this.groupDiv), 
        this.groupDiv = null, null != this.map && this.map.removePopup(this), this.map = null, 
        this.div = null, this.autoSize = null, this.minSize = null, this.maxSize = null, 
        this.padding = null, this.panMapIfOutOfView = null;
    },
    "draw": function(e) {
        return null == e && null != this.lonlat && null != this.map && (e = this.map.getLayerPxFromLonLat(this.lonlat)), 
        this.closeOnMove && this.map.events.register("movestart", this, this.hide), this.disableFirefoxOverflowHack || "firefox" != OpenLayers.BROWSER_NAME || (this.map.events.register("movestart", this, function() {
            var e = document.defaultView.getComputedStyle(this.contentDiv, null).getPropertyValue("overflow");
            "hidden" != e && (this.contentDiv._oldOverflow = e, this.contentDiv.style.overflow = "hidden");
        }), this.map.events.register("moveend", this, function() {
            var e = this.contentDiv._oldOverflow;
            e && (this.contentDiv.style.overflow = e, this.contentDiv._oldOverflow = null);
        })), this.moveTo(e), this.autoSize || this.size || this.setSize(this.contentSize), 
        this.setBackgroundColor(), this.setOpacity(), this.setBorder(), this.setContentHTML(), 
        this.panMapIfOutOfView && this.panIntoView(), this.div;
    },
    "updatePosition": function() {
        if (this.lonlat && this.map) {
            var e = this.map.getLayerPxFromLonLat(this.lonlat);
            e && this.moveTo(e);
        }
    },
    "moveTo": function(e) {
        null != e && null != this.div && (this.div.style.left = e.x + "px", this.div.style.top = e.y + "px");
    },
    "visible": function() {
        return OpenLayers.Element.visible(this.div);
    },
    "toggle": function() {
        this.visible() ? this.hide() : this.show();
    },
    "show": function() {
        this.div.style.display = "", this.panMapIfOutOfView && this.panIntoView();
    },
    "hide": function() {
        this.div.style.display = "none";
    },
    "setSize": function(e) {
        this.size = e.clone();
        var t = this.getContentDivPadding(), i = t.left + t.right, n = t.top + t.bottom;
        this.fixPadding(), i += this.padding.left + this.padding.right, n += this.padding.top + this.padding.bottom, 
        this.closeDiv && (i += parseInt(this.closeDiv.style.width) + t.right), this.size.w += i, 
        this.size.h += n, "msie" == OpenLayers.BROWSER_NAME && (this.contentSize.w += t.left + t.right, 
        this.contentSize.h += t.bottom + t.top), null != this.div && (this.div.style.width = this.size.w + "px", 
        this.div.style.height = this.size.h + "px"), null != this.contentDiv && (this.contentDiv.style.width = e.w + "px", 
        this.contentDiv.style.height = e.h + "px");
    },
    "updateSize": function() {
        var e = "<div class='" + this.contentDisplayClass + "'>" + this.contentDiv.innerHTML + "</div>", t = this.map ? this.map.div : document.body, i = OpenLayers.Util.getRenderedDimensions(e, null, {
            "displayClass": this.displayClass,
            "containerElement": t
        }), n = this.getSafeContentSize(i), s = null;
        if (n.equals(i)) s = i; else {
            var r = {
                "w": n.w < i.w ? n.w : null,
                "h": n.h < i.h ? n.h : null
            };
            if (r.w && r.h) s = n; else {
                var o = OpenLayers.Util.getRenderedDimensions(e, r, {
                    "displayClass": this.contentDisplayClass,
                    "containerElement": t
                });
                if ("hidden" != OpenLayers.Element.getStyle(this.contentDiv, "overflow") && o.equals(n)) {
                    var a = OpenLayers.Util.getScrollbarWidth();
                    r.w ? o.h += a : o.w += a;
                }
                s = this.getSafeContentSize(o);
            }
        }
        this.setSize(s);
    },
    "setBackgroundColor": function(e) {
        void 0 != e && (this.backgroundColor = e), null != this.div && (this.div.style.backgroundColor = this.backgroundColor);
    },
    "setOpacity": function(e) {
        void 0 != e && (this.opacity = e), null != this.div && (this.div.style.opacity = this.opacity, 
        this.div.style.filter = "alpha(opacity=" + 100 * this.opacity + ")");
    },
    "setBorder": function(e) {
        void 0 != e && (this.border = e), null != this.div && (this.div.style.border = this.border);
    },
    "setContentHTML": function(e) {
        null != e && (this.contentHTML = e), null != this.contentDiv && null != this.contentHTML && this.contentHTML != this.contentDiv.innerHTML && (this.contentDiv.innerHTML = this.contentHTML, 
        this.autoSize && (this.registerImageListeners(), this.updateSize()));
    },
    "registerImageListeners": function() {
        for (var e = this.contentDiv.getElementsByTagName("img"), t = 0, i = e.length; t < i; t++) {
            var n = e[t];
            if (0 == n.width || 0 == n.height) {
                var s = {
                    "popup": this,
                    "img": n
                };
                n._onImgLoad = OpenLayers.Function.bind(function() {
                    null !== this.popup.id && (this.popup.updateSize(), this.popup.visible() && this.popup.panMapIfOutOfView && this.popup.panIntoView(), 
                    OpenLayers.Event.stopObserving(this.img, "load", this.img._onImgLoad));
                }, s), OpenLayers.Event.observe(n, "load", n._onImgLoad);
            }
        }
    },
    "getSafeContentSize": function(e) {
        var t = e.clone(), i = this.getContentDivPadding(), n = i.left + i.right, s = i.top + i.bottom;
        if (this.fixPadding(), n += this.padding.left + this.padding.right, s += this.padding.top + this.padding.bottom, 
        this.closeDiv && (n += parseInt(this.closeDiv.style.width) + i.right), this.minSize && (t.w = Math.max(t.w, this.minSize.w - n), 
        t.h = Math.max(t.h, this.minSize.h - s)), this.maxSize && (t.w = Math.min(t.w, this.maxSize.w - n), 
        t.h = Math.min(t.h, this.maxSize.h - s)), this.map && this.map.size) {
            var r = 0, o = 0;
            if (this.keepInMap && !this.panMapIfOutOfView) {
                var a = this.map.getPixelFromLonLat(this.lonlat);
                switch (this.relativePosition) {
                  case "tr":
                    r = a.x, o = this.map.size.h - a.y;
                    break;

                  case "tl":
                    r = this.map.size.w - a.x, o = this.map.size.h - a.y;
                    break;

                  case "bl":
                    r = this.map.size.w - a.x, o = a.y;
                    break;

                  case "br":
                    r = a.x, o = a.y;
                    break;

                  default:
                    r = a.x, o = this.map.size.h - a.y;
                }
            }
            var l = this.map.size.h - this.map.paddingForPopups.top - this.map.paddingForPopups.bottom - s - o, h = this.map.size.w - this.map.paddingForPopups.left - this.map.paddingForPopups.right - n - r;
            t.w = Math.min(t.w, h), t.h = Math.min(t.h, l);
        }
        return t;
    },
    "getContentDivPadding": function() {
        var e = this._contentDivPadding;
        return e || (null == this.div.parentNode && (this.div.style.display = "none", document.body.appendChild(this.div)), 
        e = new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv, "padding-left"), OpenLayers.Element.getStyle(this.contentDiv, "padding-bottom"), OpenLayers.Element.getStyle(this.contentDiv, "padding-right"), OpenLayers.Element.getStyle(this.contentDiv, "padding-top")), 
        this._contentDivPadding = e, this.div.parentNode == document.body && (document.body.removeChild(this.div), 
        this.div.style.display = "")), e;
    },
    "addCloseBox": function(e) {
        this.closeDiv = OpenLayers.Util.createDiv(this.id + "_close", null, {
            "w": 17,
            "h": 17
        }), this.closeDiv.className = "olPopupCloseBox";
        var t = this.getContentDivPadding();
        this.closeDiv.style.right = t.right + "px", this.closeDiv.style.top = t.top + "px", 
        this.groupDiv.appendChild(this.closeDiv);
        var i = e || function(e) {
            this.hide(), OpenLayers.Event.stop(e);
        };
        OpenLayers.Event.observe(this.closeDiv, "touchend", OpenLayers.Function.bindAsEventListener(i, this)), 
        OpenLayers.Event.observe(this.closeDiv, "click", OpenLayers.Function.bindAsEventListener(i, this));
    },
    "panIntoView": function() {
        var e = this.map.getSize(), t = this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left), parseInt(this.div.style.top))), i = t.clone();
        t.x < this.map.paddingForPopups.left ? i.x = this.map.paddingForPopups.left : t.x + this.size.w > e.w - this.map.paddingForPopups.right && (i.x = e.w - this.map.paddingForPopups.right - this.size.w), 
        t.y < this.map.paddingForPopups.top ? i.y = this.map.paddingForPopups.top : t.y + this.size.h > e.h - this.map.paddingForPopups.bottom && (i.y = e.h - this.map.paddingForPopups.bottom - this.size.h);
        var n = t.x - i.x, s = t.y - i.y;
        this.map.pan(n, s);
    },
    "registerEvents": function() {
        this.events = new OpenLayers.Events(this, this.div, null, !0), this.events.on({
            "mousedown": this.onmousedown,
            "mousemove": this.onmousemove,
            "mouseup": this.onmouseup,
            "click": this.onclick,
            "mouseout": this.onmouseout,
            "dblclick": this.ondblclick,
            "touchstart": function(e) {
                OpenLayers.Event.stop(e, !0);
            },
            "scope": this
        });
    },
    "onmousedown": function(e) {
        this.mousedown = !0, OpenLayers.Event.stop(e, !0);
    },
    "onmousemove": function(e) {
        this.mousedown && OpenLayers.Event.stop(e, !0);
    },
    "onmouseup": function(e) {
        this.mousedown && (this.mousedown = !1, OpenLayers.Event.stop(e, !0));
    },
    "onclick": function(e) {
        OpenLayers.Event.stop(e, !0);
    },
    "onmouseout": function(e) {
        this.mousedown = !1;
    },
    "ondblclick": function(e) {
        OpenLayers.Event.stop(e, !0);
    },
    "CLASS_NAME": "OpenLayers.Popup"
}), OpenLayers.Popup.WIDTH = 200, OpenLayers.Popup.HEIGHT = 200, OpenLayers.Popup.COLOR = "white", 
OpenLayers.Popup.OPACITY = 1, OpenLayers.Popup.BORDER = "0px", OpenLayers.Protocol = OpenLayers.Class({
    "format": null,
    "options": null,
    "autoDestroy": !0,
    "defaultFilter": null,
    "initialize": function(e) {
        e = e || {}, OpenLayers.Util.extend(this, e), this.options = e;
    },
    "mergeWithDefaultFilter": function(e) {
        return e && this.defaultFilter ? new OpenLayers.Filter.Logical({
            "type": OpenLayers.Filter.Logical.AND,
            "filters": [ this.defaultFilter, e ]
        }) : e || this.defaultFilter || void 0;
    },
    "destroy": function() {
        this.options = null, this.format = null;
    },
    "read": function(e) {
        (e = e || {}).filter = this.mergeWithDefaultFilter(e.filter);
    },
    "create": function() {},
    "update": function() {},
    "delete": function() {},
    "commit": function() {},
    "abort": function(e) {},
    "createCallback": function(e, t, i) {
        return OpenLayers.Function.bind(function() {
            e.apply(this, [ t, i ]);
        }, this);
    },
    "CLASS_NAME": "OpenLayers.Protocol"
}), OpenLayers.Protocol.Response = OpenLayers.Class({
    "code": null,
    "requestType": null,
    "last": !0,
    "features": null,
    "data": null,
    "reqFeatures": null,
    "priv": null,
    "error": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "success": function() {
        return this.code > 0;
    },
    "CLASS_NAME": "OpenLayers.Protocol.Response"
}), OpenLayers.Protocol.Response.SUCCESS = 1, OpenLayers.Protocol.Response.FAILURE = 0, 
OpenLayers.Renderer = OpenLayers.Class({
    "container": null,
    "root": null,
    "extent": null,
    "locked": !1,
    "size": null,
    "resolution": null,
    "map": null,
    "featureDx": 0,
    "initialize": function(e, t) {
        this.container = OpenLayers.Util.getElement(e), OpenLayers.Util.extend(this, t);
    },
    "destroy": function() {
        this.container = null, this.extent = null, this.size = null, this.resolution = null, 
        this.map = null;
    },
    "supported": function() {
        return !1;
    },
    "setExtent": function(e, t) {
        if (this.extent = e.clone(), this.map.baseLayer && this.map.baseLayer.wrapDateLine) {
            var i = e.getWidth() / this.map.getExtent().getWidth(), e = e.scale(1 / i);
            this.extent = e.wrapDateLine(this.map.getMaxExtent()).scale(i);
        }
        return t && (this.resolution = null), !0;
    },
    "setSize": function(e) {
        this.size = e.clone(), this.resolution = null;
    },
    "getResolution": function() {
        return this.resolution = this.resolution || this.map.getResolution(), this.resolution;
    },
    "drawFeature": function(e, t) {
        if (null == t && (t = e.style), e.geometry) {
            var i = e.geometry.getBounds();
            if (i) {
                var n;
                this.map.baseLayer && this.map.baseLayer.wrapDateLine && (n = this.map.getMaxExtent()), 
                i.intersectsBounds(this.extent, {
                    "worldBounds": n
                }) ? this.calculateFeatureDx(i, n) : t = {
                    "display": "none"
                };
                var s = this.drawGeometry(e.geometry, t, e.id);
                if ("none" != t.display && t.label && !1 !== s) {
                    var r = e.geometry.getCentroid();
                    if (t.labelXOffset || t.labelYOffset) {
                        var o = isNaN(t.labelXOffset) ? 0 : t.labelXOffset, a = isNaN(t.labelYOffset) ? 0 : t.labelYOffset, l = this.getResolution();
                        r.move(o * l, a * l);
                    }
                    this.drawText(e.id, t, r);
                } else this.removeText(e.id);
                return s;
            }
        }
    },
    "calculateFeatureDx": function(e, t) {
        if (this.featureDx = 0, t) {
            var i = t.getWidth(), n = (this.extent.left + this.extent.right) / 2, s = (e.left + e.right) / 2, r = Math.round((s - n) / i);
            this.featureDx = r * i;
        }
    },
    "drawGeometry": function(e, t, i) {},
    "drawText": function(e, t, i) {},
    "removeText": function(e) {},
    "clear": function() {},
    "getFeatureIdFromEvent": function(e) {},
    "eraseFeatures": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = 0, i = e.length; t < i; ++t) {
            var n = e[t];
            this.eraseGeometry(n.geometry, n.id), this.removeText(n.id);
        }
    },
    "eraseGeometry": function(e, t) {},
    "moveRoot": function(e) {},
    "getRenderLayerId": function() {
        return this.container.id;
    },
    "applyDefaultSymbolizer": function(e) {
        var t = OpenLayers.Util.extend({}, OpenLayers.Renderer.defaultSymbolizer);
        return !1 === e.stroke && (delete t.strokeWidth, delete t.strokeColor), !1 === e.fill && delete t.fillColor, 
        OpenLayers.Util.extend(t, e), t;
    },
    "CLASS_NAME": "OpenLayers.Renderer"
}), OpenLayers.Renderer.defaultSymbolizer = {
    "fillColor": "#000000",
    "strokeColor": "#000000",
    "strokeWidth": 2,
    "fillOpacity": 1,
    "strokeOpacity": 1,
    "pointRadius": 0,
    "labelAlign": "cm"
}, OpenLayers.Renderer.symbol = {
    "star": [ 350, 75, 379, 161, 469, 161, 397, 215, 423, 301, 350, 250, 277, 301, 303, 215, 231, 161, 321, 161, 350, 75 ],
    "cross": [ 4, 0, 6, 0, 6, 4, 10, 4, 10, 6, 6, 6, 6, 10, 4, 10, 4, 6, 0, 6, 0, 4, 4, 4, 4, 0 ],
    "x": [ 0, 0, 25, 0, 50, 35, 75, 0, 100, 0, 65, 50, 100, 100, 75, 100, 50, 65, 25, 100, 0, 100, 35, 50, 0, 0 ],
    "square": [ 0, 0, 0, 1, 1, 1, 1, 0, 0, 0 ],
    "triangle": [ 0, 10, 10, 10, 5, 0, 0, 10 ]
}, function() {
    function e() {
        this._object = a && !c ? new a() : new window.ActiveXObject("Microsoft.XMLHTTP"), 
        this._listeners = [];
    }
    function t() {
        return new e();
    }
    function i(e) {
        if (e._object.send(e._data), l && !e._async) for (e.readyState = t.OPENED, r(e); e.readyState < t.DONE; ) if (e.readyState++, 
        n(e), e._aborted) return;
    }
    function n(e) {
        t.onreadystatechange && t.onreadystatechange.apply(e), e.dispatchEvent({
            "type": "readystatechange",
            "bubbles": !1,
            "cancelable": !1,
            "timeStamp": new Date() + 0
        });
    }
    function s(e) {
        var t = e.responseXML, i = e.responseText;
        return h && i && t && !t.documentElement && e.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/) && ((t = new window.ActiveXObject("Microsoft.XMLDOM")).async = !1, 
        t.validateOnParse = !1, t.loadXML(i)), t && (h && 0 != t.parseError || !t.documentElement || t.documentElement && "parsererror" == t.documentElement.tagName) ? null : t;
    }
    function r(e) {
        try {
            e.responseText = e._object.responseText;
        } catch (e) {}
        try {
            e.responseXML = s(e._object);
        } catch (e) {}
        try {
            e.status = e._object.status;
        } catch (e) {}
        try {
            e.statusText = e._object.statusText;
        } catch (e) {}
    }
    function o(e) {
        e._object.onreadystatechange = new window.Function();
    }
    var a = window.XMLHttpRequest, l = !!window.controllers, h = window.document.all && !window.opera, c = h && window.navigator.userAgent.match(/MSIE 7.0/);
    t.prototype = e.prototype, l && a.wrapped && (t.wrapped = a.wrapped), t.UNSENT = 0, 
    t.OPENED = 1, t.HEADERS_RECEIVED = 2, t.LOADING = 3, t.DONE = 4, t.prototype.readyState = t.UNSENT, 
    t.prototype.responseText = "", t.prototype.responseXML = null, t.prototype.status = 0, 
    t.prototype.statusText = "", t.prototype.priority = "NORMAL", t.prototype.onreadystatechange = null, 
    t.onreadystatechange = null, t.onopen = null, t.onsend = null, t.onabort = null, 
    t.prototype.open = function(e, i, s, a, c) {
        delete this._headers, arguments.length < 3 && (s = !0), this._async = s;
        var u, p = this, d = this.readyState;
        h && s && (u = function() {
            d != t.DONE && (o(p), p.abort());
        }, window.attachEvent("onunload", u)), t.onopen && t.onopen.apply(this, arguments), 
        arguments.length > 4 ? this._object.open(e, i, s, a, c) : arguments.length > 3 ? this._object.open(e, i, s, a) : this._object.open(e, i, s), 
        this.readyState = t.OPENED, n(this), this._object.onreadystatechange = function() {
            l && !s || (p.readyState = p._object.readyState, r(p), p._aborted ? p.readyState = t.UNSENT : (p.readyState == t.DONE && (delete p._data, 
            o(p), h && s && window.detachEvent("onunload", u)), d != p.readyState && n(p), d = p.readyState));
        };
    }, t.prototype.send = function(e) {
        t.onsend && t.onsend.apply(this, arguments), arguments.length || (e = null), e && e.nodeType && (e = window.XMLSerializer ? new window.XMLSerializer().serializeToString(e) : e.xml, 
        this._headers["Content-Type"] || this._object.setRequestHeader("Content-Type", "application/xml")), 
        this._data = e, i(this);
    }, t.prototype.abort = function() {
        t.onabort && t.onabort.apply(this, arguments), this.readyState > t.UNSENT && (this._aborted = !0), 
        this._object.abort(), o(this), this.readyState = t.UNSENT, delete this._data;
    }, t.prototype.getAllResponseHeaders = function() {
        return this._object.getAllResponseHeaders();
    }, t.prototype.getResponseHeader = function(e) {
        return this._object.getResponseHeader(e);
    }, t.prototype.setRequestHeader = function(e, t) {
        return this._headers || (this._headers = {}), this._headers[e] = t, this._object.setRequestHeader(e, t);
    }, t.prototype.addEventListener = function(e, t, i) {
        for (var n, s = 0; n = this._listeners[s]; s++) if (n[0] == e && n[1] == t && n[2] == i) return;
        this._listeners.push([ e, t, i ]);
    }, t.prototype.removeEventListener = function(e, t, i) {
        for (var n, s = 0; (n = this._listeners[s]) && (n[0] != e || n[1] != t || n[2] != i); s++) ;
        n && this._listeners.splice(s, 1);
    }, t.prototype.dispatchEvent = function(e) {
        var t = {
            "type": e.type,
            "target": this,
            "currentTarget": this,
            "eventPhase": 2,
            "bubbles": e.bubbles,
            "cancelable": e.cancelable,
            "timeStamp": e.timeStamp,
            "stopPropagation": function() {},
            "preventDefault": function() {},
            "initEvent": function() {}
        };
        "readystatechange" == t.type && this.onreadystatechange && (this.onreadystatechange.handleEvent || this.onreadystatechange).apply(this, [ t ]);
        for (var i, n = 0; i = this._listeners[n]; n++) i[0] != t.type || i[2] || (i[1].handleEvent || i[1]).apply(this, [ t ]);
    }, t.prototype.toString = function() {
        return "[object XMLHttpRequest]";
    }, t.toString = function() {
        return "[XMLHttpRequest]";
    }, window.Function.prototype.apply || (window.Function.prototype.apply = function(e, t) {
        t || (t = []), e.__func = this, e.__func(t[0], t[1], t[2], t[3], t[4]), delete e.__func;
    }), OpenLayers.Request || (OpenLayers.Request = {}), OpenLayers.Request.XMLHttpRequest = t;
}(), OpenLayers.ProxyHost = "", OpenLayers.Request || (OpenLayers.Request = {}), 
OpenLayers.Util.extend(OpenLayers.Request, {
    "DEFAULT_CONFIG": {
        "method": "GET",
        "url": window.location.href,
        "async": !0,
        "user": void 0,
        "password": void 0,
        "params": null,
        "proxy": OpenLayers.ProxyHost,
        "headers": {},
        "data": null,
        "callback": function() {},
        "success": null,
        "failure": null,
        "scope": null
    },
    "URL_SPLIT_REGEX": /([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,
    "events": new OpenLayers.Events(this),
    "makeSameOrigin": function(e, t) {
        var i = 0 !== e.indexOf("http"), n = !i && e.match(this.URL_SPLIT_REGEX);
        if (n) {
            var s = window.location;
            i = n[1] == s.protocol && n[3] == s.hostname;
            var r = n[4], o = s.port;
            (80 != r && "" != r || "80" != o && "" != o) && (i = i && r == o);
        }
        return i || t && (e = "function" == typeof t ? t(e) : t + encodeURIComponent(e)), 
        e;
    },
    "issue": function(e) {
        var t = OpenLayers.Util.extend(this.DEFAULT_CONFIG, {
            "proxy": OpenLayers.ProxyHost
        });
        (e = e || {}).headers = e.headers || {}, (e = OpenLayers.Util.applyDefaults(e, t)).headers = OpenLayers.Util.applyDefaults(e.headers, t.headers);
        var i, n = !1;
        for (i in e.headers) e.headers.hasOwnProperty(i) && "x-requested-with" === i.toLowerCase() && (n = !0);
        !1 === n && (e.headers["X-Requested-With"] = "XMLHttpRequest");
        var s = new OpenLayers.Request.XMLHttpRequest(), r = OpenLayers.Util.urlAppend(e.url, OpenLayers.Util.getParameterString(e.params || {}));
        r = OpenLayers.Request.makeSameOrigin(r, e.proxy), s.open(e.method, r, e.async, e.user, e.password);
        for (var o in e.headers) s.setRequestHeader(o, e.headers[o]);
        var a = this.events, l = this;
        return s.onreadystatechange = function() {
            s.readyState == OpenLayers.Request.XMLHttpRequest.DONE && !1 !== a.triggerEvent("complete", {
                "request": s,
                "config": e,
                "requestUrl": r
            }) && l.runCallbacks({
                "request": s,
                "config": e,
                "requestUrl": r
            });
        }, !1 === e.async ? s.send(e.data) : window.setTimeout(function() {
            0 !== s.readyState && s.send(e.data);
        }, 0), s;
    },
    "runCallbacks": function(e) {
        var t, i = e.request, n = e.config, s = n.scope ? OpenLayers.Function.bind(n.callback, n.scope) : n.callback;
        n.success && (t = n.scope ? OpenLayers.Function.bind(n.success, n.scope) : n.success);
        var r;
        n.failure && (r = n.scope ? OpenLayers.Function.bind(n.failure, n.scope) : n.failure), 
        "file:" == OpenLayers.Util.createUrlObject(n.url).protocol && i.responseText && (i.status = 200), 
        s(i), (!i.status || i.status >= 200 && i.status < 300) && (this.events.triggerEvent("success", e), 
        t && t(i)), i.status && (i.status < 200 || i.status >= 300) && (this.events.triggerEvent("failure", e), 
        r && r(i));
    },
    "GET": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "GET"
        }), OpenLayers.Request.issue(e);
    },
    "POST": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "POST"
        }), e.headers = e.headers ? e.headers : {}, "CONTENT-TYPE" in OpenLayers.Util.upperCaseObject(e.headers) || (e.headers["Content-Type"] = "application/xml"), 
        OpenLayers.Request.issue(e);
    },
    "PUT": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "PUT"
        }), e.headers = e.headers ? e.headers : {}, "CONTENT-TYPE" in OpenLayers.Util.upperCaseObject(e.headers) || (e.headers["Content-Type"] = "application/xml"), 
        OpenLayers.Request.issue(e);
    },
    "DELETE": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "DELETE"
        }), OpenLayers.Request.issue(e);
    },
    "HEAD": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "HEAD"
        }), OpenLayers.Request.issue(e);
    },
    "OPTIONS": function(e) {
        return e = OpenLayers.Util.extend(e, {
            "method": "OPTIONS"
        }), OpenLayers.Request.issue(e);
    }
}), OpenLayers.Rule = OpenLayers.Class({
    "id": null,
    "name": null,
    "title": null,
    "description": null,
    "context": null,
    "filter": null,
    "elseFilter": !1,
    "symbolizer": null,
    "symbolizers": null,
    "minScaleDenominator": null,
    "maxScaleDenominator": null,
    "initialize": function(e) {
        this.symbolizer = {}, OpenLayers.Util.extend(this, e), this.symbolizers && delete this.symbolizer, 
        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        for (var e in this.symbolizer) this.symbolizer[e] = null;
        this.symbolizer = null, delete this.symbolizers;
    },
    "evaluate": function(e) {
        var t = this.getContext(e), i = !0;
        if (this.minScaleDenominator || this.maxScaleDenominator) var n = e.layer.map.getScale();
        return this.minScaleDenominator && (i = n >= OpenLayers.Style.createLiteral(this.minScaleDenominator, t)), 
        i && this.maxScaleDenominator && (i = n < OpenLayers.Style.createLiteral(this.maxScaleDenominator, t)), 
        i && this.filter && (i = "OpenLayers.Filter.FeatureId" == this.filter.CLASS_NAME ? this.filter.evaluate(e) : this.filter.evaluate(t)), 
        i;
    },
    "getContext": function(e) {
        var t = this.context;
        return t || (t = e.attributes || e.data), "function" == typeof this.context && (t = this.context(e)), 
        t;
    },
    "clone": function() {
        var e = OpenLayers.Util.extend({}, this);
        if (this.symbolizers) {
            var t = this.symbolizers.length;
            e.symbolizers = new Array(t);
            for (var i = 0; i < t; ++i) e.symbolizers[i] = this.symbolizers[i].clone();
        } else {
            e.symbolizer = {};
            var n, s;
            for (var r in this.symbolizer) "object" === (s = typeof (n = this.symbolizer[r])) ? e.symbolizer[r] = OpenLayers.Util.extend({}, n) : "string" === s && (e.symbolizer[r] = n);
        }
        return e.filter = this.filter && this.filter.clone(), e.context = this.context && OpenLayers.Util.extend({}, this.context), 
        new OpenLayers.Rule(e);
    },
    "CLASS_NAME": "OpenLayers.Rule"
}), OpenLayers.Spherical = OpenLayers.Spherical || {}, OpenLayers.Spherical.DEFAULT_RADIUS = 6378137, 
OpenLayers.Spherical.computeDistanceBetween = function(e, t, i) {
    var n = i || OpenLayers.Spherical.DEFAULT_RADIUS, s = Math.sin(Math.PI * (t.lon - e.lon) / 360), r = Math.sin(Math.PI * (t.lat - e.lat) / 360), o = r * r + s * s * Math.cos(Math.PI * e.lat / 180) * Math.cos(Math.PI * t.lat / 180);
    return 2 * n * Math.atan2(Math.sqrt(o), Math.sqrt(1 - o));
}, OpenLayers.Spherical.computeHeading = function(e, t) {
    var i = Math.sin(Math.PI * (e.lon - t.lon) / 180) * Math.cos(Math.PI * t.lat / 180), n = Math.cos(Math.PI * e.lat / 180) * Math.sin(Math.PI * t.lat / 180) - Math.sin(Math.PI * e.lat / 180) * Math.cos(Math.PI * t.lat / 180) * Math.cos(Math.PI * (e.lon - t.lon) / 180);
    return 180 * Math.atan2(i, n) / Math.PI;
}, OpenLayers.Strategy = OpenLayers.Class({
    "layer": null,
    "options": null,
    "active": null,
    "autoActivate": !0,
    "autoDestroy": !0,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.options = e, this.active = !1;
    },
    "destroy": function() {
        this.deactivate(), this.layer = null, this.options = null;
    },
    "setLayer": function(e) {
        this.layer = e;
    },
    "activate": function() {
        return !this.active && (this.active = !0, !0);
    },
    "deactivate": function() {
        return !!this.active && (this.active = !1, !0);
    },
    "CLASS_NAME": "OpenLayers.Strategy"
}), OpenLayers.Symbolizer = OpenLayers.Class({
    "zIndex": 0,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "clone": function() {
        return new (OpenLayers.Util.getConstructor(this.CLASS_NAME))(OpenLayers.Util.extend({}, this));
    },
    "CLASS_NAME": "OpenLayers.Symbolizer"
}), OpenLayers.Symbolizer.Point = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Point"
}), OpenLayers.Symbolizer.Line = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Line"
}), OpenLayers.Symbolizer.Polygon = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Polygon"
}), OpenLayers.Symbolizer.Text = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Text"
}), OpenLayers.Symbolizer.Raster = OpenLayers.Class(OpenLayers.Symbolizer, {
    "initialize": function(e) {
        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Symbolizer.Raster"
}), OpenLayers.Style2 = OpenLayers.Class({
    "id": null,
    "name": null,
    "title": null,
    "description": null,
    "layerName": null,
    "isDefault": !1,
    "rules": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + "_");
    },
    "destroy": function() {
        for (var e = 0, t = this.rules.length; e < t; e++) this.rules[e].destroy();
        delete this.rules;
    },
    "clone": function() {
        var e = OpenLayers.Util.extend({}, this);
        if (this.rules) {
            e.rules = [];
            for (var t = 0, i = this.rules.length; t < i; ++t) e.rules.push(this.rules[t].clone());
        }
        return new OpenLayers.Style2(e);
    },
    "CLASS_NAME": "OpenLayers.Style2"
}), OpenLayers.StyleMap = OpenLayers.Class({
    "styles": null,
    "extendDefault": !0,
    "initialize": function(e, t) {
        if (this.styles = {
            "default": new OpenLayers.Style(OpenLayers.Feature.Vector.style.default),
            "select": new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),
            "temporary": new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),
            "delete": new OpenLayers.Style(OpenLayers.Feature.Vector.style.delete)
        }, e instanceof OpenLayers.Style) this.styles.default = e, this.styles.select = e, 
        this.styles.temporary = e, this.styles.delete = e; else if ("object" == typeof e) for (var i in e) if (e[i] instanceof OpenLayers.Style) this.styles[i] = e[i]; else {
            if ("object" != typeof e[i]) {
                this.styles.default = new OpenLayers.Style(e), this.styles.select = new OpenLayers.Style(e), 
                this.styles.temporary = new OpenLayers.Style(e), this.styles.delete = new OpenLayers.Style(e);
                break;
            }
            this.styles[i] = new OpenLayers.Style(e[i]);
        }
        OpenLayers.Util.extend(this, t);
    },
    "destroy": function() {
        for (var e in this.styles) this.styles[e].destroy();
        this.styles = null;
    },
    "createSymbolizer": function(e, t) {
        e || (e = new OpenLayers.Feature.Vector()), this.styles[t] || (t = "default"), e.renderIntent = t;
        var i = {};
        return this.extendDefault && "default" != t && (i = this.styles.default.createSymbolizer(e)), 
        OpenLayers.Util.extend(i, this.styles[t].createSymbolizer(e));
    },
    "addUniqueValueRules": function(e, t, i, n) {
        var s = [];
        for (var r in i) s.push(new OpenLayers.Rule({
            "symbolizer": i[r],
            "context": n,
            "filter": new OpenLayers.Filter.Comparison({
                "type": OpenLayers.Filter.Comparison.EQUAL_TO,
                "property": t,
                "value": r
            })
        }));
        this.styles[e].addRules(s);
    },
    "CLASS_NAME": "OpenLayers.StyleMap"
}), OpenLayers.Tile = OpenLayers.Class({
    "events": null,
    "eventListeners": null,
    "id": null,
    "layer": null,
    "url": null,
    "bounds": null,
    "size": null,
    "position": null,
    "isLoading": !1,
    "initialize": function(e, t, i, n, s, r) {
        this.layer = e, this.position = t.clone(), this.setBounds(i), this.url = n, s && (this.size = s.clone()), 
        this.id = OpenLayers.Util.createUniqueID("Tile_"), OpenLayers.Util.extend(this, r), 
        this.events = new OpenLayers.Events(this), this.eventListeners instanceof Object && this.events.on(this.eventListeners);
    },
    "unload": function() {
        this.isLoading && (this.isLoading = !1, this.events.triggerEvent("unload"));
    },
    "destroy": function() {
        this.layer = null, this.bounds = null, this.size = null, this.position = null, this.eventListeners && this.events.un(this.eventListeners), 
        this.events.destroy(), this.eventListeners = null, this.events = null;
    },
    "draw": function(e) {
        e || this.clear();
        var t = this.shouldDraw();
        return t && !e && !1 === this.events.triggerEvent("beforedraw") && (t = null), t;
    },
    "shouldDraw": function() {
        var e = !1, t = this.layer.maxExtent;
        if (t) {
            var i = this.layer.map, n = i.baseLayer.wrapDateLine && i.getMaxExtent();
            this.bounds.intersectsBounds(t, {
                "inclusive": !1,
                "worldBounds": n
            }) && (e = !0);
        }
        return e || this.layer.displayOutsideMaxExtent;
    },
    "setBounds": function(e) {
        if (e = e.clone(), this.layer.map.baseLayer.wrapDateLine) {
            var t = this.layer.map.getMaxExtent(), i = this.layer.map.getResolution();
            e = e.wrapDateLine(t, {
                "leftTolerance": i,
                "rightTolerance": i
            });
        }
        this.bounds = e;
    },
    "moveTo": function(e, t, i) {
        null == i && (i = !0), this.setBounds(e), this.position = t.clone(), i && this.draw();
    },
    "clear": function(e) {},
    "CLASS_NAME": "OpenLayers.Tile"
}), OpenLayers.Layer.HTTPRequest = OpenLayers.Class(OpenLayers.Layer, {
    "URL_HASH_FACTOR": (Math.sqrt(5) - 1) / 2,
    "url": null,
    "params": null,
    "reproject": !1,
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.prototype.initialize.apply(this, [ e, n ]), this.url = t, this.params || (this.params = OpenLayers.Util.extend({}, i));
    },
    "destroy": function() {
        this.url = null, this.params = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.HTTPRequest(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.prototype.clone.apply(this, [ e ]);
    },
    "setUrl": function(e) {
        this.url = e;
    },
    "mergeNewParams": function(e) {
        this.params = OpenLayers.Util.extend(this.params, e);
        var t = this.redraw();
        return null != this.map && this.map.events.triggerEvent("changelayer", {
            "layer": this,
            "property": "params"
        }), t;
    },
    "redraw": function(e) {
        return e ? (this.events.triggerEvent("refresh"), this.mergeNewParams({
            "_olSalt": Math.random()
        })) : OpenLayers.Layer.prototype.redraw.apply(this, []);
    },
    "selectUrl": function(e, t) {
        for (var i = 1, n = 0, s = e.length; n < s; n++) i *= e.charCodeAt(n) * this.URL_HASH_FACTOR, 
        i -= Math.floor(i);
        return t[Math.floor(i * t.length)];
    },
    "getFullRequestString": function(e, t) {
        var i = t || this.url, n = OpenLayers.Util.extend({}, this.params);
        n = OpenLayers.Util.extend(n, e);
        var s = OpenLayers.Util.getParameterString(n);
        OpenLayers.Util.isArray(i) && (i = this.selectUrl(s, i));
        var r = OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i));
        for (var o in n) o.toUpperCase() in r && delete n[o];
        return s = OpenLayers.Util.getParameterString(n), OpenLayers.Util.urlAppend(i, s);
    },
    "CLASS_NAME": "OpenLayers.Layer.HTTPRequest"
}), OpenLayers.Tile.Image = OpenLayers.Class(OpenLayers.Tile, {
    "url": null,
    "imgDiv": null,
    "frame": null,
    "imageReloadAttempts": null,
    "layerAlphaHack": null,
    "asyncRequestId": null,
    "maxGetUrlLength": null,
    "canvasContext": null,
    "crossOriginKeyword": null,
    "initialize": function(e, t, i, n, s, r) {
        OpenLayers.Tile.prototype.initialize.apply(this, arguments), this.url = n, this.layerAlphaHack = this.layer.alpha && OpenLayers.Util.alphaHack(), 
        (null != this.maxGetUrlLength || this.layer.gutter || this.layerAlphaHack) && (this.frame = document.createElement("div"), 
        this.frame.style.position = "absolute", this.frame.style.overflow = "hidden"), null != this.maxGetUrlLength && OpenLayers.Util.extend(this, OpenLayers.Tile.Image.IFrame);
    },
    "destroy": function() {
        this.imgDiv && (this.clear(), this.imgDiv = null, this.frame = null), this.asyncRequestId = null, 
        OpenLayers.Tile.prototype.destroy.apply(this, arguments);
    },
    "draw": function() {
        var e = OpenLayers.Tile.prototype.draw.apply(this, arguments);
        return e ? (this.layer != this.layer.map.baseLayer && this.layer.reproject && (this.bounds = this.getBoundsFromBaseLayer(this.position)), 
        this.isLoading ? this._loadEvent = "reload" : (this.isLoading = !0, this._loadEvent = "loadstart"), 
        this.renderTile(), this.positionTile()) : !1 === e && this.unload(), e;
    },
    "renderTile": function() {
        if (this.layer.async) {
            var e = this.asyncRequestId = (this.asyncRequestId || 0) + 1;
            this.layer.getURLasync(this.bounds, function(t) {
                e == this.asyncRequestId && (this.url = t, this.initImage());
            }, this);
        } else this.url = this.layer.getURL(this.bounds), this.initImage();
    },
    "positionTile": function() {
        var e = this.getTile().style, t = this.frame ? this.size : this.layer.getImageSize(this.bounds), i = 1;
        this.layer instanceof OpenLayers.Layer.Grid && (i = this.layer.getServerResolution() / this.layer.map.getResolution()), 
        e.left = this.position.x + "px", e.top = this.position.y + "px", e.width = Math.round(i * t.w) + "px", 
        e.height = Math.round(i * t.h) + "px";
    },
    "clear": function() {
        OpenLayers.Tile.prototype.clear.apply(this, arguments);
        var e = this.imgDiv;
        if (e) {
            var t = this.getTile();
            t.parentNode === this.layer.div && this.layer.div.removeChild(t), this.setImgSrc(), 
            !0 === this.layerAlphaHack && (e.style.filter = ""), OpenLayers.Element.removeClass(e, "olImageLoadError");
        }
        this.canvasContext = null;
    },
    "getImage": function() {
        if (!this.imgDiv) {
            this.imgDiv = OpenLayers.Tile.Image.IMAGE.cloneNode(!1);
            var e = this.imgDiv.style;
            if (this.frame) {
                var t = 0, i = 0;
                this.layer.gutter && (t = this.layer.gutter / this.layer.tileSize.w * 100, i = this.layer.gutter / this.layer.tileSize.h * 100), 
                e.left = -t + "%", e.top = -i + "%", e.width = 2 * t + 100 + "%", e.height = 2 * i + 100 + "%";
            }
            e.visibility = "hidden", e.opacity = 0, this.layer.opacity < 1 && (e.filter = "alpha(opacity=" + 100 * this.layer.opacity + ")"), 
            e.position = "absolute", this.layerAlphaHack && (e.paddingTop = e.height, e.height = "0", 
            e.width = "100%"), this.frame && this.frame.appendChild(this.imgDiv);
        }
        return this.imgDiv;
    },
    "setImage": function(e) {
        this.imgDiv = e;
    },
    "initImage": function() {
        if (this.url || this.imgDiv) {
            this.events.triggerEvent("beforeload"), this.layer.div.appendChild(this.getTile()), 
            this.events.triggerEvent(this._loadEvent);
            var e = this.getImage(), t = e.getAttribute("src") || "";
            this.url && OpenLayers.Util.isEquivalentUrl(t, this.url) ? this._loadTimeout = window.setTimeout(OpenLayers.Function.bind(this.onImageLoad, this), 0) : (this.stopLoading(), 
            this.crossOriginKeyword && e.removeAttribute("crossorigin"), OpenLayers.Event.observe(e, "load", OpenLayers.Function.bind(this.onImageLoad, this)), 
            OpenLayers.Event.observe(e, "error", OpenLayers.Function.bind(this.onImageError, this)), 
            this.imageReloadAttempts = 0, this.setImgSrc(this.url));
        } else this.isLoading = !1;
    },
    "setImgSrc": function(e) {
        var t = this.imgDiv;
        e ? (t.style.visibility = "hidden", t.style.opacity = 0, this.crossOriginKeyword && ("data:" !== e.substr(0, 5) ? t.setAttribute("crossorigin", this.crossOriginKeyword) : t.removeAttribute("crossorigin")), 
        t.src = e) : (this.stopLoading(), this.imgDiv = null, t.parentNode && t.parentNode.removeChild(t));
    },
    "getTile": function() {
        return this.frame ? this.frame : this.getImage();
    },
    "createBackBuffer": function() {
        if (this.imgDiv && !this.isLoading) {
            var e;
            return this.frame ? (e = this.frame.cloneNode(!1)).appendChild(this.imgDiv) : e = this.imgDiv, 
            this.imgDiv = null, e;
        }
    },
    "onImageLoad": function() {
        var e = this.imgDiv;
        this.stopLoading(), e.style.visibility = "inherit", e.style.opacity = this.layer.opacity, 
        this.isLoading = !1, this.canvasContext = null, this.events.triggerEvent("loadend"), 
        !0 === this.layerAlphaHack && (e.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + e.src + "', sizingMethod='scale')");
    },
    "onImageError": function() {
        var e = this.imgDiv;
        null != e.src && (++this.imageReloadAttempts <= OpenLayers.IMAGE_RELOAD_ATTEMPTS ? this.setImgSrc(this.layer.getURL(this.bounds)) : (OpenLayers.Element.addClass(e, "olImageLoadError"), 
        this.events.triggerEvent("loaderror"), this.onImageLoad()));
    },
    "stopLoading": function() {
        OpenLayers.Event.stopObservingElement(this.imgDiv), window.clearTimeout(this._loadTimeout), 
        delete this._loadTimeout;
    },
    "getCanvasContext": function() {
        if (OpenLayers.CANVAS_SUPPORTED && this.imgDiv && !this.isLoading) {
            if (!this.canvasContext) {
                var e = document.createElement("canvas");
                e.width = this.size.w, e.height = this.size.h, this.canvasContext = e.getContext("2d"), 
                this.canvasContext.drawImage(this.imgDiv, 0, 0);
            }
            return this.canvasContext;
        }
    },
    "CLASS_NAME": "OpenLayers.Tile.Image"
}), OpenLayers.Tile.Image.IMAGE = function() {
    var e = new Image();
    return e.className = "olTileImage", e.galleryImg = "no", e;
}(), OpenLayers.Layer.Grid = OpenLayers.Class(OpenLayers.Layer.HTTPRequest, {
    "tileSize": null,
    "tileOriginCorner": "bl",
    "tileOrigin": null,
    "tileOptions": null,
    "tileClass": OpenLayers.Tile.Image,
    "grid": null,
    "singleTile": !1,
    "ratio": 1.5,
    "buffer": 0,
    "transitionEffect": "resize",
    "numLoadingTiles": 0,
    "serverResolutions": null,
    "loading": !1,
    "backBuffer": null,
    "gridResolution": null,
    "backBufferResolution": null,
    "backBufferLonLat": null,
    "backBufferTimerId": null,
    "removeBackBufferDelay": null,
    "className": null,
    "gridLayout": null,
    "rowSign": null,
    "transitionendEvents": [ "transitionend", "webkitTransitionEnd", "otransitionend", "oTransitionEnd" ],
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this, arguments), this.grid = [], 
        this._removeBackBuffer = OpenLayers.Function.bind(this.removeBackBuffer, this), 
        this.initProperties(), this.rowSign = "t" === this.tileOriginCorner.substr(0, 1) ? 1 : -1;
    },
    "initProperties": function() {
        void 0 === this.options.removeBackBufferDelay && (this.removeBackBufferDelay = this.singleTile ? 0 : 2500), 
        void 0 === this.options.className && (this.className = this.singleTile ? "olLayerGridSingleTile" : "olLayerGrid");
    },
    "setMap": function(e) {
        OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this, e), OpenLayers.Element.addClass(this.div, this.className);
    },
    "removeMap": function(e) {
        this.removeBackBuffer();
    },
    "destroy": function() {
        this.removeBackBuffer(), this.clearGrid(), this.grid = null, this.tileSize = null, 
        OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this, arguments);
    },
    "clearGrid": function() {
        if (this.grid) {
            for (var e = 0, t = this.grid.length; e < t; e++) for (var i = this.grid[e], n = 0, s = i.length; n < s; n++) {
                var r = i[n];
                this.destroyTile(r);
            }
            this.grid = [], this.gridResolution = null, this.gridLayout = null;
        }
    },
    "addOptions": function(e, t) {
        var i = void 0 !== e.singleTile && e.singleTile !== this.singleTile;
        OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this, arguments), this.map && i && (this.initProperties(), 
        this.clearGrid(), this.tileSize = this.options.tileSize, this.setTileSize(), this.visibility && this.moveTo(null, !0));
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.Grid(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this, [ e ]), null != this.tileSize && (e.tileSize = this.tileSize.clone()), 
        e.grid = [], e.gridResolution = null, e.backBuffer = null, e.backBufferTimerId = null, 
        e.loading = !1, e.numLoadingTiles = 0, e;
    },
    "moveTo": function(e, t, i) {
        if (OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this, arguments), null != (e = e || this.map.getExtent())) {
            var n = !this.grid.length || t, s = this.getTilesBounds(), r = this.map.getResolution();
            this.getServerResolution(r);
            this.singleTile ? (n || !i && !s.containsBounds(e)) && (t && "resize" !== this.transitionEffect && this.removeBackBuffer(), 
            t && "resize" !== this.transitionEffect || this.applyBackBuffer(r), this.initSingleTile(e)) : (n = n || !s.intersectsBounds(e, {
                "worldBounds": this.map.baseLayer.wrapDateLine && this.map.getMaxExtent()
            })) ? (!t || "resize" !== this.transitionEffect && this.gridResolution !== r || this.applyBackBuffer(r), 
            this.initGriddedTiles(e)) : this.moveGriddedTiles();
        }
    },
    "getTileData": function(e) {
        var t = null, i = e.lon, n = e.lat, s = this.grid.length;
        if (this.map && s) {
            var r = this.map.getResolution(), o = this.tileSize.w, a = this.tileSize.h, l = this.grid[0][0].bounds, h = l.left, c = l.top;
            if (i < h && this.map.baseLayer.wrapDateLine) {
                var u = this.map.getMaxExtent().getWidth();
                i += u * Math.ceil((h - i) / u);
            }
            var p = (i - h) / (r * o), d = (c - n) / (r * a), f = Math.floor(p), m = Math.floor(d);
            if (m >= 0 && m < s) {
                var g = this.grid[m][f];
                g && (t = {
                    "tile": g,
                    "i": Math.floor((p - f) * o),
                    "j": Math.floor((d - m) * a)
                });
            }
        }
        return t;
    },
    "destroyTile": function(e) {
        this.removeTileMonitoringHooks(e), e.destroy();
    },
    "getServerResolution": function(e) {
        var t = Number.POSITIVE_INFINITY;
        if (e = e || this.map.getResolution(), this.serverResolutions && -1 === OpenLayers.Util.indexOf(this.serverResolutions, e)) {
            var i, n, s, r;
            for (i = this.serverResolutions.length - 1; i >= 0 && (s = this.serverResolutions[i], 
            !((n = Math.abs(s - e)) > t)); i--) t = n, r = s;
            e = r;
        }
        return e;
    },
    "getServerZoom": function() {
        var e = this.getServerResolution();
        return this.serverResolutions ? OpenLayers.Util.indexOf(this.serverResolutions, e) : this.map.getZoomForResolution(e) + (this.zoomOffset || 0);
    },
    "applyBackBuffer": function(e) {
        null !== this.backBufferTimerId && this.removeBackBuffer();
        var t = this.backBuffer;
        if (!t) {
            if (!(t = this.createBackBuffer())) return;
            e === this.gridResolution ? this.div.insertBefore(t, this.div.firstChild) : this.map.baseLayer.div.parentNode.insertBefore(t, this.map.baseLayer.div), 
            this.backBuffer = t;
            var i = this.grid[0][0].bounds;
            this.backBufferLonLat = {
                "lon": i.left,
                "lat": i.top
            }, this.backBufferResolution = this.gridResolution;
        }
        for (var n, s = this.backBufferResolution / e, r = t.childNodes, o = r.length - 1; o >= 0; --o) (n = r[o]).style.top = (s * n._i * t._th | 0) + "px", 
        n.style.left = (s * n._j * t._tw | 0) + "px", n.style.width = Math.round(s * n._w) + "px", 
        n.style.height = Math.round(s * n._h) + "px";
        var a = this.getViewPortPxFromLonLat(this.backBufferLonLat, e), l = this.map.layerContainerOriginPx.x, h = this.map.layerContainerOriginPx.y;
        t.style.left = Math.round(a.x - l) + "px", t.style.top = Math.round(a.y - h) + "px";
    },
    "createBackBuffer": function() {
        var e;
        if (this.grid.length > 0) {
            (e = document.createElement("div")).id = this.div.id + "_bb", e.className = "olBackBuffer", 
            e.style.position = "absolute";
            var t = this.map;
            e.style.zIndex = "resize" === this.transitionEffect ? this.getZIndex() - 1 : t.Z_INDEX_BASE.BaseLayer - (t.getNumLayers() - t.getLayerIndex(this));
            for (var i = 0, n = this.grid.length; i < n; i++) for (var s = 0, r = this.grid[i].length; s < r; s++) {
                var o = this.grid[i][s], a = this.grid[i][s].createBackBuffer();
                a && (a._i = i, a._j = s, a._w = this.singleTile ? this.getImageSize(o.bounds).w : o.size.w, 
                a._h = o.size.h, a.id = o.id + "_bb", e.appendChild(a));
            }
            e._tw = this.tileSize.w, e._th = this.tileSize.h;
        }
        return e;
    },
    "removeBackBuffer": function() {
        if (this._transitionElement) {
            for (var e = this.transitionendEvents.length - 1; e >= 0; --e) OpenLayers.Event.stopObserving(this._transitionElement, this.transitionendEvents[e], this._removeBackBuffer);
            delete this._transitionElement;
        }
        this.backBuffer && (this.backBuffer.parentNode && this.backBuffer.parentNode.removeChild(this.backBuffer), 
        this.backBuffer = null, this.backBufferResolution = null, null !== this.backBufferTimerId && (window.clearTimeout(this.backBufferTimerId), 
        this.backBufferTimerId = null));
    },
    "moveByPx": function(e, t) {
        this.singleTile || this.moveGriddedTiles();
    },
    "setTileSize": function(e) {
        this.singleTile && ((e = this.map.getSize()).h = parseInt(e.h * this.ratio, 10), 
        e.w = parseInt(e.w * this.ratio, 10)), OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this, [ e ]);
    },
    "getTilesBounds": function() {
        var e = null, t = this.grid.length;
        if (t) {
            var i = this.grid[t - 1][0].bounds, n = this.grid[0].length * i.getWidth(), s = this.grid.length * i.getHeight();
            e = new OpenLayers.Bounds(i.left, i.bottom, i.left + n, i.bottom + s);
        }
        return e;
    },
    "initSingleTile": function(e) {
        this.events.triggerEvent("retile");
        var t = e.getCenterLonLat(), i = e.getWidth() * this.ratio, n = e.getHeight() * this.ratio, s = new OpenLayers.Bounds(t.lon - i / 2, t.lat - n / 2, t.lon + i / 2, t.lat + n / 2);
        this.gridResolution = this.getServerResolution();
        var r = this.maxExtent;
        r && (!this.displayOutsideMaxExtent || this.map.baseLayer.wrapDateLine && this.maxExtent.equals(this.map.getMaxExtent())) && (s.left = Math.max(s.left, r.left), 
        s.right = Math.min(s.right, r.right));
        var o = this.map.getLayerPxFromLonLat({
            "lon": s.left,
            "lat": s.top
        });
        this.grid.length || (this.grid[0] = []);
        var a = this.grid[0][0];
        a ? a.moveTo(s, o) : (a = this.addTile(s, o), this.addTileMonitoringHooks(a), a.draw(), 
        this.grid[0][0] = a), this.removeExcessTiles(1, 1);
    },
    "calculateGridLayout": function(e, t, i) {
        var n = i * this.tileSize.w, s = i * this.tileSize.h, r = e.left - t.lon, o = Math.floor(r / n) - this.buffer, a = this.rowSign, l = a * (t.lat - e.top + s);
        return {
            "tilelon": n,
            "tilelat": s,
            "startcol": o,
            "startrow": Math[~a ? "floor" : "ceil"](l / s) - this.buffer * a
        };
    },
    "getImageSize": function(e) {
        var t = OpenLayers.Layer.HTTPRequest.prototype.getImageSize.apply(this, arguments);
        return this.singleTile && (t = new OpenLayers.Size(Math.round(e.getWidth() / this.gridResolution), t.h)), 
        t;
    },
    "getTileOrigin": function() {
        var e = this.tileOrigin;
        if (!e) {
            var t = this.getMaxExtent(), i = {
                "tl": [ "left", "top" ],
                "tr": [ "right", "top" ],
                "bl": [ "left", "bottom" ],
                "br": [ "right", "bottom" ]
            }[this.tileOriginCorner];
            e = new OpenLayers.LonLat(t[i[0]], t[i[1]]);
        }
        return e;
    },
    "getTileBoundsForGridIndex": function(e, t) {
        var i = this.getTileOrigin(), n = this.gridLayout, s = n.tilelon, r = n.tilelat, o = n.startcol, a = n.startrow, l = this.rowSign;
        return new OpenLayers.Bounds(i.lon + (o + t) * s, i.lat - (a + e * l) * r * l, i.lon + (o + t + 1) * s, i.lat - (a + (e - 1) * l) * r * l);
    },
    "initGriddedTiles": function(e) {
        this.events.triggerEvent("retile");
        var t = this.map.getSize(), i = this.getTileOrigin(), n = this.map.getResolution(), s = this.getServerResolution(), r = n / s, o = {
            "w": this.tileSize.w / r,
            "h": this.tileSize.h / r
        }, a = Math.ceil(t.h / o.h) + 2 * this.buffer + 1, l = Math.ceil(t.w / o.w) + 2 * this.buffer + 1, h = this.calculateGridLayout(e, i, s);
        this.gridLayout = h;
        var c = h.tilelon, u = h.tilelat, p = this.map.layerContainerOriginPx.x, d = this.map.layerContainerOriginPx.y, f = this.getTileBoundsForGridIndex(0, 0), m = this.map.getViewPortPxFromLonLat(new OpenLayers.LonLat(f.left, f.top));
        m.x = Math.round(m.x) - p, m.y = Math.round(m.y) - d;
        var g = [], y = this.map.getCenter(), v = 0;
        do {
            var L = this.grid[v];
            L || (L = [], this.grid.push(L));
            var w = 0;
            do {
                f = this.getTileBoundsForGridIndex(v, w);
                var b = m.clone();
                b.x = b.x + w * Math.round(o.w), b.y = b.y + v * Math.round(o.h);
                var C = L[w];
                C ? C.moveTo(f, b, !1) : (C = this.addTile(f, b), this.addTileMonitoringHooks(C), 
                L.push(C));
                var O = f.getCenterLonLat();
                g.push({
                    "tile": C,
                    "distance": Math.pow(O.lon - y.lon, 2) + Math.pow(O.lat - y.lat, 2)
                }), w += 1;
            } while (f.right <= e.right + c * this.buffer || w < l);
            v += 1;
        } while (f.bottom >= e.bottom - u * this.buffer || v < a);
        this.removeExcessTiles(v, w);
        n = this.getServerResolution();
        this.gridResolution = n, g.sort(function(e, t) {
            return e.distance - t.distance;
        });
        for (var S = 0, x = g.length; S < x; ++S) g[S].tile.draw();
    },
    "getMaxExtent": function() {
        return this.maxExtent;
    },
    "addTile": function(e, t) {
        var i = new this.tileClass(this, t, e, null, this.tileSize, this.tileOptions);
        return this.events.triggerEvent("addtile", {
            "tile": i
        }), i;
    },
    "addTileMonitoringHooks": function(e) {
        e.onLoadStart = function() {
            !1 === this.loading && (this.loading = !0, this.events.triggerEvent("loadstart")), 
            this.events.triggerEvent("tileloadstart", {
                "tile": e
            }), this.numLoadingTiles++, !this.singleTile && this.backBuffer && this.gridResolution === this.backBufferResolution && OpenLayers.Element.addClass(e.getTile(), "olTileReplacing");
        }, e.onLoadEnd = function(t) {
            this.numLoadingTiles--;
            var i = "unload" === t.type;
            if (this.events.triggerEvent("tileloaded", {
                "tile": e,
                "aborted": i
            }), !this.singleTile && !i && this.backBuffer && this.gridResolution === this.backBufferResolution) {
                var n = e.getTile();
                if ("none" === OpenLayers.Element.getStyle(n, "display")) {
                    var s = document.getElementById(e.id + "_bb");
                    s && s.parentNode.removeChild(s);
                }
                OpenLayers.Element.removeClass(n, "olTileReplacing");
            }
            if (0 === this.numLoadingTiles) {
                if (this.backBuffer) if (0 === this.backBuffer.childNodes.length) this.removeBackBuffer(); else {
                    this._transitionElement = i ? this.div.lastChild : e.imgDiv;
                    for (var r = this.transitionendEvents, o = r.length - 1; o >= 0; --o) OpenLayers.Event.observe(this._transitionElement, r[o], this._removeBackBuffer);
                    this.backBufferTimerId = window.setTimeout(this._removeBackBuffer, this.removeBackBufferDelay);
                }
                this.loading = !1, this.events.triggerEvent("loadend");
            }
        }, e.onLoadError = function() {
            this.events.triggerEvent("tileerror", {
                "tile": e
            });
        }, e.events.on({
            "loadstart": e.onLoadStart,
            "loadend": e.onLoadEnd,
            "unload": e.onLoadEnd,
            "loaderror": e.onLoadError,
            "scope": this
        });
    },
    "removeTileMonitoringHooks": function(e) {
        e.unload(), e.events.un({
            "loadstart": e.onLoadStart,
            "loadend": e.onLoadEnd,
            "unload": e.onLoadEnd,
            "loaderror": e.onLoadError,
            "scope": this
        });
    },
    "moveGriddedTiles": function() {
        for (var e = this.buffer + 1; ;) {
            var t = this.grid[0][0], i = {
                "x": t.position.x + this.map.layerContainerOriginPx.x,
                "y": t.position.y + this.map.layerContainerOriginPx.y
            }, n = this.getServerResolution() / this.map.getResolution(), s = {
                "w": Math.round(this.tileSize.w * n),
                "h": Math.round(this.tileSize.h * n)
            };
            if (i.x > -s.w * (e - 1)) this.shiftColumn(!0, s); else if (i.x < -s.w * e) this.shiftColumn(!1, s); else if (i.y > -s.h * (e - 1)) this.shiftRow(!0, s); else {
                if (!(i.y < -s.h * e)) break;
                this.shiftRow(!1, s);
            }
        }
    },
    "shiftRow": function(e, t) {
        var i = this.grid, n = e ? 0 : i.length - 1, s = e ? -1 : 1, r = this.rowSign;
        this.gridLayout.startrow += s * r;
        for (var o = i[n], a = i[e ? "pop" : "shift"](), l = 0, h = a.length; l < h; l++) {
            var c = a[l], u = o[l].position.clone();
            u.y += t.h * s, c.moveTo(this.getTileBoundsForGridIndex(n, l), u);
        }
        i[e ? "unshift" : "push"](a);
    },
    "shiftColumn": function(e, t) {
        var i = this.grid, n = e ? 0 : i[0].length - 1, s = e ? -1 : 1;
        this.gridLayout.startcol += s;
        for (var r = 0, o = i.length; r < o; r++) {
            var a = i[r], l = a[n].position.clone(), h = a[e ? "pop" : "shift"]();
            l.x += t.w * s, h.moveTo(this.getTileBoundsForGridIndex(r, n), l), a[e ? "unshift" : "push"](h);
        }
    },
    "removeExcessTiles": function(e, t) {
        for (var i, n; this.grid.length > e; ) for (i = 0, n = (s = this.grid.pop()).length; i < n; i++) {
            r = s[i];
            this.destroyTile(r);
        }
        for (i = 0, n = this.grid.length; i < n; i++) for (;this.grid[i].length > t; ) {
            var s = this.grid[i], r = s.pop();
            this.destroyTile(r);
        }
    },
    "onMapResize": function() {
        this.singleTile && (this.clearGrid(), this.setTileSize());
    },
    "getTileBounds": function(e) {
        var t = this.maxExtent, i = this.getResolution(), n = i * this.tileSize.w, s = i * this.tileSize.h, r = this.getLonLatFromViewPortPx(e), o = t.left + n * Math.floor((r.lon - t.left) / n), a = t.bottom + s * Math.floor((r.lat - t.bottom) / s);
        return new OpenLayers.Bounds(o, a, o + n, a + s);
    },
    "CLASS_NAME": "OpenLayers.Layer.Grid"
}), OpenLayers.TileManager = OpenLayers.Class({
    "cacheSize": 256,
    "tilesPerFrame": 2,
    "frameDelay": 16,
    "moveDelay": 100,
    "zoomDelay": 200,
    "maps": null,
    "tileQueueId": null,
    "tileQueue": null,
    "tileCache": null,
    "tileCacheIndex": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.maps = [], this.tileQueueId = {}, this.tileQueue = {}, 
        this.tileCache = {}, this.tileCacheIndex = [];
    },
    "addMap": function(e) {
        if (!this._destroyed && OpenLayers.Layer.Grid) {
            this.maps.push(e), this.tileQueue[e.id] = [];
            for (var t = 0, i = e.layers.length; t < i; ++t) this.addLayer({
                "layer": e.layers[t]
            });
            e.events.on({
                "move": this.move,
                "zoomend": this.zoomEnd,
                "changelayer": this.changeLayer,
                "addlayer": this.addLayer,
                "preremovelayer": this.removeLayer,
                "scope": this
            });
        }
    },
    "removeMap": function(e) {
        if (!this._destroyed && OpenLayers.Layer.Grid) {
            if (window.clearTimeout(this.tileQueueId[e.id]), e.layers) for (var t = 0, i = e.layers.length; t < i; ++t) this.removeLayer({
                "layer": e.layers[t]
            });
            e.events && e.events.un({
                "move": this.move,
                "zoomend": this.zoomEnd,
                "changelayer": this.changeLayer,
                "addlayer": this.addLayer,
                "preremovelayer": this.removeLayer,
                "scope": this
            }), delete this.tileQueue[e.id], delete this.tileQueueId[e.id], OpenLayers.Util.removeItem(this.maps, e);
        }
    },
    "move": function(e) {
        this.updateTimeout(e.object, this.moveDelay, !0);
    },
    "zoomEnd": function(e) {
        this.updateTimeout(e.object, this.zoomDelay);
    },
    "changeLayer": function(e) {
        "visibility" !== e.property && "params" !== e.property || this.updateTimeout(e.object, 0);
    },
    "addLayer": function(e) {
        var t = e.layer;
        if (t instanceof OpenLayers.Layer.Grid) {
            t.events.on({
                "addtile": this.addTile,
                "refresh": this.handleLayerRefresh,
                "retile": this.clearTileQueue,
                "scope": this
            });
            var i, n, s;
            for (i = t.grid.length - 1; i >= 0; --i) for (n = t.grid[i].length - 1; n >= 0; --n) s = t.grid[i][n], 
            this.addTile({
                "tile": s
            }), s.url && !s.imgDiv && this.manageTileCache({
                "object": s
            });
        }
    },
    "removeLayer": function(e) {
        var t = e.layer;
        if (t instanceof OpenLayers.Layer.Grid && (this.clearTileQueue({
            "object": t
        }), t.events && t.events.un({
            "addtile": this.addTile,
            "refresh": this.handleLayerRefresh,
            "retile": this.clearTileQueue,
            "scope": this
        }), t.grid)) {
            var i, n, s;
            for (i = t.grid.length - 1; i >= 0; --i) for (n = t.grid[i].length - 1; n >= 0; --n) s = t.grid[i][n], 
            this.unloadTile({
                "object": s
            });
        }
    },
    "handleLayerRefresh": function(e) {
        var t = e.object;
        if (t.grid) {
            var i, n, s;
            for (i = t.grid.length - 1; i >= 0; --i) for (n = t.grid[i].length - 1; n >= 0; --n) s = t.grid[i][n], 
            OpenLayers.Util.removeItem(this.tileCacheIndex, s.url), delete this.tileCache[s.url];
        }
    },
    "updateTimeout": function(e, t, i) {
        window.clearTimeout(this.tileQueueId[e.id]);
        var n = this.tileQueue[e.id];
        i && !n.length || (this.tileQueueId[e.id] = window.setTimeout(OpenLayers.Function.bind(function() {
            this.drawTilesFromQueue(e), n.length && this.updateTimeout(e, this.frameDelay);
        }, this), t));
    },
    "addTile": function(e) {
        e.tile instanceof OpenLayers.Tile.Image ? e.tile.layer.singleTile || e.tile.events.on({
            "beforedraw": this.queueTileDraw,
            "beforeload": this.manageTileCache,
            "loadend": this.addToCache,
            "unload": this.unloadTile,
            "scope": this
        }) : this.removeLayer({
            "layer": e.tile.layer
        });
    },
    "unloadTile": function(e) {
        var t = e.object;
        t.events.un({
            "beforedraw": this.queueTileDraw,
            "beforeload": this.manageTileCache,
            "loadend": this.addToCache,
            "unload": this.unloadTile,
            "scope": this
        }), OpenLayers.Util.removeItem(this.tileQueue[t.layer.map.id], t);
    },
    "queueTileDraw": function(e) {
        var t = e.object, i = !1, n = t.layer, s = n.getURL(t.bounds), r = this.tileCache[s];
        if (r && "olTileImage" !== r.className && (delete this.tileCache[s], OpenLayers.Util.removeItem(this.tileCacheIndex, s), 
        r = null), n.url && (n.async || !r)) {
            var o = this.tileQueue[n.map.id];
            ~OpenLayers.Util.indexOf(o, t) || o.push(t), i = !0;
        }
        return !i;
    },
    "drawTilesFromQueue": function(e) {
        for (var t = this.tileQueue[e.id], i = this.tilesPerFrame, n = e.zoomTween && e.zoomTween.playing; !n && t.length && i; ) t.shift().draw(!0), 
        --i;
    },
    "manageTileCache": function(e) {
        var t = e.object, i = this.tileCache[t.url];
        i && (i.parentNode && OpenLayers.Element.hasClass(i.parentNode, "olBackBuffer") && (i.parentNode.removeChild(i), 
        i.id = null), i.parentNode || (i.style.visibility = "hidden", i.style.opacity = 0, 
        t.setImage(i), OpenLayers.Util.removeItem(this.tileCacheIndex, t.url), this.tileCacheIndex.push(t.url)));
    },
    "addToCache": function(e) {
        var t = e.object;
        this.tileCache[t.url] || OpenLayers.Element.hasClass(t.imgDiv, "olImageLoadError") || (this.tileCacheIndex.length >= this.cacheSize && (delete this.tileCache[this.tileCacheIndex[0]], 
        this.tileCacheIndex.shift()), this.tileCache[t.url] = t.imgDiv, this.tileCacheIndex.push(t.url));
    },
    "clearTileQueue": function(e) {
        for (var t = e.object, i = this.tileQueue[t.map.id], n = i.length - 1; n >= 0; --n) i[n].layer === t && i.splice(n, 1);
    },
    "destroy": function() {
        for (var e = this.maps.length - 1; e >= 0; --e) this.removeMap(this.maps[e]);
        this.maps = null, this.tileQueue = null, this.tileQueueId = null, this.tileCache = null, 
        this.tileCacheIndex = null, this._destroyed = !0;
    }
}), OpenLayers.Geometry.Point = OpenLayers.Class(OpenLayers.Geometry, {
    "x": null,
    "y": null,
    "initialize": function(e, t) {
        OpenLayers.Geometry.prototype.initialize.apply(this, arguments), this.x = parseFloat(e), 
        this.y = parseFloat(t);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Geometry.Point(this.x, this.y)), OpenLayers.Util.applyDefaults(e, this), 
        e;
    },
    "calculateBounds": function() {
        this.bounds = new OpenLayers.Bounds(this.x, this.y, this.x, this.y);
    },
    "distanceTo": function(e, t) {
        var i, n, s, r, o, a, l = !(t && !1 === t.edge) && t && t.details;
        return e instanceof OpenLayers.Geometry.Point ? (n = this.x, s = this.y, r = e.x, 
        o = e.y, i = Math.sqrt(Math.pow(n - r, 2) + Math.pow(s - o, 2)), a = l ? {
            "x0": n,
            "y0": s,
            "x1": r,
            "y1": o,
            "distance": i
        } : i) : (a = e.distanceTo(this, t), l && (a = {
            "x0": a.x1,
            "y0": a.y1,
            "x1": a.x0,
            "y1": a.y0,
            "distance": a.distance
        })), a;
    },
    "equals": function(e) {
        var t = !1;
        return null != e && (t = this.x == e.x && this.y == e.y || isNaN(this.x) && isNaN(this.y) && isNaN(e.x) && isNaN(e.y)), 
        t;
    },
    "toShortString": function() {
        return this.x + ", " + this.y;
    },
    "move": function(e, t) {
        this.x = this.x + e, this.y = this.y + t, this.clearBounds();
    },
    "rotate": function(e, t) {
        e *= Math.PI / 180;
        var i = this.distanceTo(t), n = e + Math.atan2(this.y - t.y, this.x - t.x);
        this.x = t.x + i * Math.cos(n), this.y = t.y + i * Math.sin(n), this.clearBounds();
    },
    "getCentroid": function() {
        return new OpenLayers.Geometry.Point(this.x, this.y);
    },
    "resize": function(e, t, i) {
        return i = void 0 == i ? 1 : i, this.x = t.x + e * i * (this.x - t.x), this.y = t.y + e * (this.y - t.y), 
        this.clearBounds(), this;
    },
    "intersects": function(e) {
        return "OpenLayers.Geometry.Point" == e.CLASS_NAME ? this.equals(e) : e.intersects(this);
    },
    "transform": function(e, t) {
        return e && t && (OpenLayers.Projection.transform(this, e, t), this.bounds = null), 
        this;
    },
    "getVertices": function(e) {
        return [ this ];
    },
    "CLASS_NAME": "OpenLayers.Geometry.Point"
}), OpenLayers.Geometry.Collection = OpenLayers.Class(OpenLayers.Geometry, {
    "components": null,
    "componentTypes": null,
    "initialize": function(e) {
        OpenLayers.Geometry.prototype.initialize.apply(this, arguments), this.components = [], 
        null != e && this.addComponents(e);
    },
    "destroy": function() {
        this.components.length = 0, this.components = null, OpenLayers.Geometry.prototype.destroy.apply(this, arguments);
    },
    "clone": function() {
        for (var e = new (OpenLayers.Util.getConstructor(this.CLASS_NAME))(), t = 0, i = this.components.length; t < i; t++) e.addComponent(this.components[t].clone());
        return OpenLayers.Util.applyDefaults(e, this), e;
    },
    "getComponentsString": function() {
        for (var e = [], t = 0, i = this.components.length; t < i; t++) e.push(this.components[t].toShortString());
        return e.join(",");
    },
    "calculateBounds": function() {
        this.bounds = null;
        var e = new OpenLayers.Bounds(), t = this.components;
        if (t) for (var i = 0, n = t.length; i < n; i++) e.extend(t[i].getBounds());
        null != e.left && null != e.bottom && null != e.right && null != e.top && this.setBounds(e);
    },
    "addComponents": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = 0, i = e.length; t < i; t++) this.addComponent(e[t]);
    },
    "addComponent": function(e, t) {
        var i = !1;
        if (e && (null == this.componentTypes || OpenLayers.Util.indexOf(this.componentTypes, e.CLASS_NAME) > -1)) {
            if (null != t && t < this.components.length) {
                var n = this.components.slice(0, t), s = this.components.slice(t, this.components.length);
                n.push(e), this.components = n.concat(s);
            } else this.components.push(e);
            e.parent = this, this.clearBounds(), i = !0;
        }
        return i;
    },
    "removeComponents": function(e) {
        var t = !1;
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var i = e.length - 1; i >= 0; --i) t = this.removeComponent(e[i]) || t;
        return t;
    },
    "removeComponent": function(e) {
        return OpenLayers.Util.removeItem(this.components, e), this.clearBounds(), !0;
    },
    "getLength": function() {
        for (var e = 0, t = 0, i = this.components.length; t < i; t++) e += this.components[t].getLength();
        return e;
    },
    "getArea": function() {
        for (var e = 0, t = 0, i = this.components.length; t < i; t++) e += this.components[t].getArea();
        return e;
    },
    "getGeodesicArea": function(e) {
        for (var t = 0, i = 0, n = this.components.length; i < n; i++) t += this.components[i].getGeodesicArea(e);
        return t;
    },
    "getCentroid": function(e) {
        if (!e) return this.components.length && this.components[0].getCentroid();
        var t = this.components.length;
        if (!t) return !1;
        for (var i, n = [], s = [], r = 0, o = Number.MAX_VALUE, a = 0; a < t; ++a) {
            var l = (i = this.components[a]).getArea(), h = i.getCentroid(!0);
            isNaN(l) || isNaN(h.x) || isNaN(h.y) || (n.push(l), r += l, o = l < o && l > 0 ? l : o, 
            s.push(h));
        }
        if (t = n.length, 0 === r) {
            for (a = 0; a < t; ++a) n[a] = 1;
            r = n.length;
        } else {
            for (a = 0; a < t; ++a) n[a] /= o;
            r /= o;
        }
        for (var c = 0, u = 0, a = 0; a < t; ++a) h = s[a], l = n[a], c += h.x * l, u += h.y * l;
        return new OpenLayers.Geometry.Point(c / r, u / r);
    },
    "getGeodesicLength": function(e) {
        for (var t = 0, i = 0, n = this.components.length; i < n; i++) t += this.components[i].getGeodesicLength(e);
        return t;
    },
    "move": function(e, t) {
        for (var i = 0, n = this.components.length; i < n; i++) this.components[i].move(e, t);
    },
    "rotate": function(e, t) {
        for (var i = 0, n = this.components.length; i < n; ++i) this.components[i].rotate(e, t);
    },
    "resize": function(e, t, i) {
        for (var n = 0; n < this.components.length; ++n) this.components[n].resize(e, t, i);
        return this;
    },
    "distanceTo": function(e, t) {
        for (var i, n, s, r = !(t && !1 === t.edge) && t && t.details, o = Number.POSITIVE_INFINITY, a = 0, l = this.components.length; a < l && (i = this.components[a].distanceTo(e, t), 
        !((s = r ? i.distance : i) < o && (o = s, n = i, 0 == o))); ++a) ;
        return n;
    },
    "equals": function(e) {
        var t = !0;
        if (e && e.CLASS_NAME && this.CLASS_NAME == e.CLASS_NAME) if (OpenLayers.Util.isArray(e.components) && e.components.length == this.components.length) {
            for (var i = 0, n = this.components.length; i < n; ++i) if (!this.components[i].equals(e.components[i])) {
                t = !1;
                break;
            }
        } else t = !1; else t = !1;
        return t;
    },
    "transform": function(e, t) {
        if (e && t) {
            for (var i = 0, n = this.components.length; i < n; i++) this.components[i].transform(e, t);
            this.bounds = null;
        }
        return this;
    },
    "intersects": function(e) {
        for (var t = !1, i = 0, n = this.components.length; i < n && !(t = e.intersects(this.components[i])); ++i) ;
        return t;
    },
    "getVertices": function(e) {
        for (var t = [], i = 0, n = this.components.length; i < n; ++i) Array.prototype.push.apply(t, this.components[i].getVertices(e));
        return t;
    },
    "CLASS_NAME": "OpenLayers.Geometry.Collection"
}), OpenLayers.Geometry.MultiPoint = OpenLayers.Class(OpenLayers.Geometry.Collection, {
    "componentTypes": [ "OpenLayers.Geometry.Point" ],
    "addPoint": function(e, t) {
        this.addComponent(e, t);
    },
    "removePoint": function(e) {
        this.removeComponent(e);
    },
    "CLASS_NAME": "OpenLayers.Geometry.MultiPoint"
}), OpenLayers.Geometry.Curve = OpenLayers.Class(OpenLayers.Geometry.MultiPoint, {
    "componentTypes": [ "OpenLayers.Geometry.Point" ],
    "getLength": function() {
        var e = 0;
        if (this.components && this.components.length > 1) for (var t = 1, i = this.components.length; t < i; t++) e += this.components[t - 1].distanceTo(this.components[t]);
        return e;
    },
    "getGeodesicLength": function(e) {
        var t = this;
        if (e) {
            var i = new OpenLayers.Projection("EPSG:4326");
            i.equals(e) || (t = this.clone().transform(e, i));
        }
        var n = 0;
        if (t.components && t.components.length > 1) for (var s, r, o = 1, a = t.components.length; o < a; o++) s = t.components[o - 1], 
        r = t.components[o], n += OpenLayers.Util.distVincenty({
            "lon": s.x,
            "lat": s.y
        }, {
            "lon": r.x,
            "lat": r.y
        });
        return 1e3 * n;
    },
    "CLASS_NAME": "OpenLayers.Geometry.Curve"
}), OpenLayers.Geometry.LineString = OpenLayers.Class(OpenLayers.Geometry.Curve, {
    "removeComponent": function(e) {
        var t = this.components && this.components.length > 2;
        return t && OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, arguments), 
        t;
    },
    "intersects": function(e) {
        var t = !1, i = e.CLASS_NAME;
        if ("OpenLayers.Geometry.LineString" == i || "OpenLayers.Geometry.LinearRing" == i || "OpenLayers.Geometry.Point" == i) {
            var n, s = this.getSortedSegments();
            n = "OpenLayers.Geometry.Point" == i ? [ {
                "x1": e.x,
                "y1": e.y,
                "x2": e.x,
                "y2": e.y
            } ] : e.getSortedSegments();
            var r, o, a, l, h, c, u, p;
            e: for (var d = 0, f = s.length; d < f; ++d) {
                o = (r = s[d]).x1, a = r.x2, l = r.y1, h = r.y2;
                for (var m = 0, g = n.length; m < g && !((c = n[m]).x1 > a); ++m) if (!(c.x2 < o) && (u = c.y1, 
                p = c.y2, !(Math.min(u, p) > Math.max(l, h)) && !(Math.max(u, p) < Math.min(l, h)) && OpenLayers.Geometry.segmentsIntersect(r, c))) {
                    t = !0;
                    break e;
                }
            }
        } else t = e.intersects(this);
        return t;
    },
    "getSortedSegments": function() {
        for (var e, t, i = this.components.length - 1, n = new Array(i), s = 0; s < i; ++s) e = this.components[s], 
        t = this.components[s + 1], e.x < t.x ? n[s] = {
            "x1": e.x,
            "y1": e.y,
            "x2": t.x,
            "y2": t.y
        } : n[s] = {
            "x1": t.x,
            "y1": t.y,
            "x2": e.x,
            "y2": e.y
        };
        return n.sort(function(e, t) {
            return e.x1 - t.x1;
        });
    },
    "splitWithSegment": function(e, t) {
        for (var i, n, s, r, o = !(t && !1 === t.edge), a = t && t.tolerance, l = [], h = this.getVertices(), c = [], u = [], p = !1, d = {
            "point": !0,
            "tolerance": a
        }, f = null, m = 0, g = h.length - 2; m <= g; ++m) if (i = h[m], c.push(i.clone()), 
        n = h[m + 1], r = {
            "x1": i.x,
            "y1": i.y,
            "x2": n.x,
            "y2": n.y
        }, (s = OpenLayers.Geometry.segmentsIntersect(e, r, d)) instanceof OpenLayers.Geometry.Point && (!!(s.x === e.x1 && s.y === e.y1 || s.x === e.x2 && s.y === e.y2 || s.equals(i) || s.equals(n)) || o)) {
            if (s.equals(u[u.length - 1]) || u.push(s.clone()), 0 === m && s.equals(i)) continue;
            if (s.equals(n)) continue;
            p = !0, s.equals(i) || c.push(s), l.push(new OpenLayers.Geometry.LineString(c)), 
            c = [ s.clone() ];
        }
        if (p && (c.push(n.clone()), l.push(new OpenLayers.Geometry.LineString(c))), u.length > 0) {
            var y = e.x1 < e.x2 ? 1 : -1, v = e.y1 < e.y2 ? 1 : -1;
            f = {
                "lines": l,
                "points": u.sort(function(e, t) {
                    return y * e.x - y * t.x || v * e.y - v * t.y;
                })
            };
        }
        return f;
    },
    "split": function(e, t) {
        var i, n, s, r, o = null, a = t && t.mutual;
        if (e instanceof OpenLayers.Geometry.LineString) {
            var l, h, c, u, p, d, f = this.getVertices(), m = [];
            s = [];
            for (var g = 0, y = f.length - 2; g <= y; ++g) {
                l = f[g], h = f[g + 1], c = {
                    "x1": l.x,
                    "y1": l.y,
                    "x2": h.x,
                    "y2": h.y
                }, r = r || [ e ], a && m.push(l.clone());
                for (var v = 0; v < r.length; ++v) if ((u = r[v].splitWithSegment(c, t)) && ((p = u.lines).length > 0 && (p.unshift(v, 1), 
                Array.prototype.splice.apply(r, p), v += p.length - 2), a)) for (var L = 0, w = u.points.length; L < w; ++L) (d = u.points[L]).equals(l) || (m.push(d), 
                s.push(new OpenLayers.Geometry.LineString(m)), m = d.equals(h) ? [] : [ d.clone() ]);
            }
            a && s.length > 0 && m.length > 0 && (m.push(h.clone()), s.push(new OpenLayers.Geometry.LineString(m)));
        } else o = e.splitWith(this, t);
        return r && r.length > 1 ? n = !0 : r = [], s && s.length > 1 ? i = !0 : s = [], 
        (n || i) && (o = a ? [ s, r ] : r), o;
    },
    "splitWith": function(e, t) {
        return e.split(this, t);
    },
    "getVertices": function(e) {
        return !0 === e ? [ this.components[0], this.components[this.components.length - 1] ] : !1 === e ? this.components.slice(1, this.components.length - 1) : this.components.slice();
    },
    "distanceTo": function(e, t) {
        var i, n = !(t && !1 === t.edge) && t && t.details, s = {}, r = Number.POSITIVE_INFINITY;
        if (e instanceof OpenLayers.Geometry.Point) for (var o, a = this.getSortedSegments(), l = e.x, h = e.y, c = 0, u = a.length; c < u && (o = a[c], 
        !((i = OpenLayers.Geometry.distanceToSegment(e, o)).distance < r && (r = i.distance, 
        s = n ? {
            "distance": r,
            "x0": i.x,
            "y0": i.y,
            "x1": l,
            "y1": h,
            "index": c,
            "indexDistance": new OpenLayers.Geometry.Point(o.x1, o.y1).distanceTo(e)
        } : r, 0 === r))); ++c) ; else if (e instanceof OpenLayers.Geometry.LineString) {
            var p, d, f, m, g, y = this.getSortedSegments(), v = e.getSortedSegments(), L = v.length, w = {
                "point": !0
            };
            e: for (var c = 0, u = y.length; c < u; ++c) {
                m = (p = y[c]).x1, g = p.y1;
                for (var b = 0; b < L; ++b) {
                    if (d = v[b], f = OpenLayers.Geometry.segmentsIntersect(p, d, w)) {
                        r = 0, s = {
                            "distance": 0,
                            "x0": f.x,
                            "y0": f.y,
                            "x1": f.x,
                            "y1": f.y
                        };
                        break e;
                    }
                    (i = OpenLayers.Geometry.distanceToSegment({
                        "x": m,
                        "y": g
                    }, d)).distance < r && (s = {
                        "distance": r = i.distance,
                        "x0": m,
                        "y0": g,
                        "x1": i.x,
                        "y1": i.y
                    });
                }
            }
            if (n || (s = s.distance), 0 !== r && p) {
                i = e.distanceTo(new OpenLayers.Geometry.Point(p.x2, p.y2), t);
                var C = n ? i.distance : i;
                C < r && (s = n ? {
                    "distance": r,
                    "x0": i.x1,
                    "y0": i.y1,
                    "x1": i.x0,
                    "y1": i.y0
                } : C);
            }
        } else s = e.distanceTo(this, t), n && (s = {
            "distance": s.distance,
            "x0": s.x1,
            "y0": s.y1,
            "x1": s.x0,
            "y1": s.y0
        });
        return s;
    },
    "simplify": function(e) {
        if (this && null !== this) {
            var t = this.getVertices();
            if (t.length < 3) return this;
            var i = function(e, t, s, o) {
                for (var a, l = 0, h = 0, c = t; c < s; c++) (a = n(e[t], e[s], e[c])) > l && (l = a, 
                h = c);
                l > o && h != t && (r.push(h), i(e, t, h, o), i(e, h, s, o));
            }, n = function(e, t, i) {
                return Math.abs(.5 * (e.x * t.y + t.x * i.y + i.x * e.y - t.x * e.y - i.x * t.y - e.x * i.y)) / Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)) * 2;
            }, s = t.length - 1, r = [];
            for (r.push(0), r.push(s); t[0].equals(t[s]); ) s--, r.push(s);
            i(t, 0, s, e);
            var o = [];
            r.sort(function(e, t) {
                return e - t;
            });
            for (var a = 0; a < r.length; a++) o.push(t[r[a]]);
            return new OpenLayers.Geometry.LineString(o);
        }
        return this;
    },
    "CLASS_NAME": "OpenLayers.Geometry.LineString"
}), OpenLayers.Geometry.LineString.geodesic = function(e, t, i) {
    for (var n, s, r, o, a, l, h = [], c = e(0), u = e(1), p = t(c), d = t(u), f = [ u, c ], m = [ d, p ], g = [ 1, 0 ], y = {}, v = 1e5; --v > 0 && g.length > 0; ) r = g.pop(), 
    c = f.pop(), p = m.pop(), (l = r.toString()) in y || (h.push(p), y[l] = !0), o = g.pop(), 
    u = f.pop(), d = m.pop(), s = t(n = e(a = (r + o) / 2)), OpenLayers.Geometry.distanceSquaredToSegment(s, {
        "x1": p.x,
        "y1": p.y,
        "x2": d.x,
        "y2": d.y
    }).distance < i ? (h.push(d), y[l = o.toString()] = !0) : (g.push(o, a, a, r), m.push(d, s, s, p), 
    f.push(u, n, n, c));
    return new OpenLayers.Geometry.LineString(h);
}, OpenLayers.Geometry.LineString.geodesicMeridian = function(e, t, i, n, s) {
    var r = new OpenLayers.Projection("EPSG:4326");
    return OpenLayers.Geometry.LineString.geodesic(function(n) {
        return new OpenLayers.Geometry.Point(e, t + (i - t) * n);
    }, function(e) {
        return e.transform(r, n);
    }, s);
}, OpenLayers.Geometry.LineString.geodesicParallel = function(e, t, i, n, s) {
    var r = new OpenLayers.Projection("EPSG:4326");
    return OpenLayers.Geometry.LineString.geodesic(function(n) {
        return new OpenLayers.Geometry.Point(t + (i - t) * n, e);
    }, function(e) {
        return e.transform(r, n);
    }, s);
}, OpenLayers.Geometry.MultiLineString = OpenLayers.Class(OpenLayers.Geometry.Collection, {
    "componentTypes": [ "OpenLayers.Geometry.LineString" ],
    "split": function(e, t) {
        for (var i, n, s, r, o, a = null, l = t && t.mutual, h = [], c = [ e ], u = 0, p = this.components.length; u < p; ++u) {
            n = this.components[u], r = !1;
            for (var d = 0; d < c.length; ++d) if (i = n.split(c[d], t)) {
                if (l) {
                    for (var f = 0, m = (s = i[0]).length; f < m; ++f) 0 === f && h.length ? h[h.length - 1].addComponent(s[f]) : h.push(new OpenLayers.Geometry.MultiLineString([ s[f] ]));
                    r = !0, i = i[1];
                }
                if (i.length) {
                    i.unshift(d, 1), Array.prototype.splice.apply(c, i);
                    break;
                }
            }
            r || (h.length ? h[h.length - 1].addComponent(n.clone()) : h = [ new OpenLayers.Geometry.MultiLineString(n.clone()) ]);
        }
        return h && h.length > 1 ? r = !0 : h = [], c && c.length > 1 ? o = !0 : c = [], 
        (r || o) && (a = l ? [ h, c ] : c), a;
    },
    "splitWith": function(e, t) {
        var i, n, s, r, o, a, l, h = null, c = t && t.mutual;
        if (e instanceof OpenLayers.Geometry.LineString) {
            l = [], a = [ e ];
            for (var u = 0, p = this.components.length; u < p; ++u) {
                o = !1, n = this.components[u];
                for (var d = 0; d < a.length; ++d) if (i = a[d].split(n, t)) {
                    c && ((s = i[0]).length && (s.unshift(d, 1), Array.prototype.splice.apply(a, s), 
                    d += s.length - 2), 0 === (i = i[1]).length && (i = [ n.clone() ]));
                    for (var f = 0, m = i.length; f < m; ++f) 0 === f && l.length ? l[l.length - 1].addComponent(i[f]) : l.push(new OpenLayers.Geometry.MultiLineString([ i[f] ]));
                    o = !0;
                }
                o || (l.length ? l[l.length - 1].addComponent(n.clone()) : l = [ new OpenLayers.Geometry.MultiLineString([ n.clone() ]) ]);
            }
        } else h = e.split(this);
        return a && a.length > 1 ? r = !0 : a = [], l && l.length > 1 ? o = !0 : l = [], 
        (r || o) && (h = c ? [ a, l ] : l), h;
    },
    "CLASS_NAME": "OpenLayers.Geometry.MultiLineString"
}), OpenLayers.Geometry.LinearRing = OpenLayers.Class(OpenLayers.Geometry.LineString, {
    "componentTypes": [ "OpenLayers.Geometry.Point" ],
    "addComponent": function(e, t) {
        var i = !1, n = this.components.pop();
        null == t && e.equals(n) || (i = OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, arguments));
        var s = this.components[0];
        return OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, [ s ]), 
        i;
    },
    "removeComponent": function(e) {
        var t = this.components && this.components.length > 3;
        if (t) {
            this.components.pop(), OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, arguments);
            var i = this.components[0];
            OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, [ i ]);
        }
        return t;
    },
    "move": function(e, t) {
        for (var i = 0, n = this.components.length; i < n - 1; i++) this.components[i].move(e, t);
    },
    "rotate": function(e, t) {
        for (var i = 0, n = this.components.length; i < n - 1; ++i) this.components[i].rotate(e, t);
    },
    "resize": function(e, t, i) {
        for (var n = 0, s = this.components.length; n < s - 1; ++n) this.components[n].resize(e, t, i);
        return this;
    },
    "transform": function(e, t) {
        if (e && t) {
            for (var i = 0, n = this.components.length; i < n - 1; i++) this.components[i].transform(e, t);
            this.bounds = null;
        }
        return this;
    },
    "getCentroid": function() {
        if (this.components) {
            var e = this.components.length;
            if (e > 0 && e <= 2) return this.components[0].clone();
            if (e > 2) {
                var t = 0, i = 0, n = this.components[0].x, s = this.components[0].y, r = -1 * this.getArea();
                if (0 != r) {
                    for (c = 0; c < e - 1; c++) {
                        var o = this.components[c], a = this.components[c + 1];
                        t += (o.x + a.x - 2 * n) * ((o.x - n) * (a.y - s) - (a.x - n) * (o.y - s)), i += (o.y + a.y - 2 * s) * ((o.x - n) * (a.y - s) - (a.x - n) * (o.y - s));
                    }
                    var l = n + t / (6 * r), h = s + i / (6 * r);
                } else {
                    for (var c = 0; c < e - 1; c++) t += this.components[c].x, i += this.components[c].y;
                    var l = t / (e - 1), h = i / (e - 1);
                }
                return new OpenLayers.Geometry.Point(l, h);
            }
            return null;
        }
    },
    "getArea": function() {
        var e = 0;
        if (this.components && this.components.length > 2) {
            for (var t = 0, i = 0, n = this.components.length; i < n - 1; i++) {
                var s = this.components[i], r = this.components[i + 1];
                t += (s.x + r.x) * (r.y - s.y);
            }
            e = -t / 2;
        }
        return e;
    },
    "getGeodesicArea": function(e) {
        var t = this;
        if (e) {
            var i = new OpenLayers.Projection("EPSG:4326");
            i.equals(e) || (t = this.clone().transform(e, i));
        }
        var n = 0, s = t.components && t.components.length;
        if (s > 2) {
            for (var r, o, a = 0; a < s - 1; a++) r = t.components[a], o = t.components[a + 1], 
            n += OpenLayers.Util.rad(o.x - r.x) * (2 + Math.sin(OpenLayers.Util.rad(r.y)) + Math.sin(OpenLayers.Util.rad(o.y)));
            n = n * OpenLayers.Util.VincentyConstants.a * OpenLayers.Util.VincentyConstants.a / 2;
        }
        return n;
    },
    "containsPoint": function(e) {
        for (var t, i, n, s, r, o, a, l = OpenLayers.Number.limitSigDigs, h = l(e.x, 14), c = l(e.y, 14), u = this.components.length - 1, p = 0, d = 0; d < u; ++d) if (t = this.components[d], 
        n = l(t.x, 14), s = l(t.y, 14), i = this.components[d + 1], r = l(i.x, 14), o = l(i.y, 14), 
        s != o) {
            if ((a = l(function(e, t, i, n, s) {
                return (n - t) / (s - i) * (e - s) + n;
            }(c, n, s, r, o), 14)) == h && (s < o && c >= s && c <= o || s > o && c <= s && c >= o)) {
                p = -1;
                break;
            }
            a <= h || n != r && (a < Math.min(n, r) || a > Math.max(n, r)) || (s < o && c >= s && c < o || s > o && c < s && c >= o) && ++p;
        } else if (c == s && (n <= r && h >= n && h <= r || n >= r && h <= n && h >= r)) {
            p = -1;
            break;
        }
        return -1 == p ? 1 : !!(1 & p);
    },
    "intersects": function(e) {
        var t = !1;
        if ("OpenLayers.Geometry.Point" == e.CLASS_NAME) t = this.containsPoint(e); else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME) t = e.intersects(this); else if ("OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) t = OpenLayers.Geometry.LineString.prototype.intersects.apply(this, [ e ]); else for (var i = 0, n = e.components.length; i < n && !(t = e.components[i].intersects(this)); ++i) ;
        return t;
    },
    "getVertices": function(e) {
        return !0 === e ? [] : this.components.slice(0, this.components.length - 1);
    },
    "CLASS_NAME": "OpenLayers.Geometry.LinearRing"
}), OpenLayers.Geometry.Polygon = OpenLayers.Class(OpenLayers.Geometry.Collection, {
    "componentTypes": [ "OpenLayers.Geometry.LinearRing" ],
    "getArea": function() {
        var e = 0;
        if (this.components && this.components.length > 0) {
            e += Math.abs(this.components[0].getArea());
            for (var t = 1, i = this.components.length; t < i; t++) e -= Math.abs(this.components[t].getArea());
        }
        return e;
    },
    "getGeodesicArea": function(e) {
        var t = 0;
        if (this.components && this.components.length > 0) {
            t += Math.abs(this.components[0].getGeodesicArea(e));
            for (var i = 1, n = this.components.length; i < n; i++) t -= Math.abs(this.components[i].getGeodesicArea(e));
        }
        return t;
    },
    "containsPoint": function(e) {
        var t = this.components.length, i = !1;
        if (t > 0 && 1 !== (i = this.components[0].containsPoint(e)) && i && t > 1) for (var n, s = 1; s < t; ++s) if (n = this.components[s].containsPoint(e)) {
            i = 1 === n && 1;
            break;
        }
        return i;
    },
    "intersects": function(e) {
        var t, i, n = !1;
        if ("OpenLayers.Geometry.Point" == e.CLASS_NAME) n = this.containsPoint(e); else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME || "OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) {
            for (t = 0, i = this.components.length; t < i && !(n = e.intersects(this.components[t])); ++t) ;
            if (!n) for (t = 0, i = e.components.length; t < i && !(n = this.containsPoint(e.components[t])); ++t) ;
        } else for (t = 0, i = e.components.length; t < i && !(n = this.intersects(e.components[t])); ++t) ;
        if (!n && "OpenLayers.Geometry.Polygon" == e.CLASS_NAME) {
            var s = this.components[0];
            for (t = 0, i = s.components.length; t < i && !(n = e.containsPoint(s.components[t])); ++t) ;
        }
        return n;
    },
    "distanceTo": function(e, t) {
        return !!(t && !1 === t.edge) && this.intersects(e) ? 0 : OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this, [ e, t ]);
    },
    "CLASS_NAME": "OpenLayers.Geometry.Polygon"
}), OpenLayers.Geometry.Polygon.createRegularPolygon = function(e, t, i, n) {
    var s = Math.PI * (1 / i - .5);
    n && (s += n / 180 * Math.PI);
    for (var r, o, a, l = [], h = 0; h < i; ++h) r = s + 2 * h * Math.PI / i, o = e.x + t * Math.cos(r), 
    a = e.y + t * Math.sin(r), l.push(new OpenLayers.Geometry.Point(o, a));
    var c = new OpenLayers.Geometry.LinearRing(l);
    return new OpenLayers.Geometry.Polygon([ c ]);
}, OpenLayers.Geometry.MultiPolygon = OpenLayers.Class(OpenLayers.Geometry.Collection, {
    "componentTypes": [ "OpenLayers.Geometry.Polygon" ],
    "CLASS_NAME": "OpenLayers.Geometry.MultiPolygon"
}), OpenLayers.Format.WKT = OpenLayers.Class(OpenLayers.Format, {
    "initialize": function(e) {
        this.regExes = {
            "typeStr": /^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,
            "spaces": /\s+/,
            "parenComma": /\)\s*,\s*\(/,
            "doubleParenComma": /\)\s*\)\s*,\s*\(\s*\(/,
            "trimParens": /^\s*\(?(.*?)\)?\s*$/
        }, OpenLayers.Format.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        var t, i, n;
        e = e.replace(/[\n\r]/g, " ");
        var s = this.regExes.typeStr.exec(e);
        if (s && (i = s[1].toLowerCase(), n = s[2], this.parse[i] && (t = this.parse[i].apply(this, [ n ])), 
        this.internalProjection && this.externalProjection)) if (t && "OpenLayers.Feature.Vector" == t.CLASS_NAME) t.geometry.transform(this.externalProjection, this.internalProjection); else if (t && "geometrycollection" != i && "object" == typeof t) for (var r = 0, o = t.length; r < o; r++) t[r].geometry.transform(this.externalProjection, this.internalProjection);
        return t;
    },
    "write": function(e) {
        var t, i, n;
        e.constructor == Array ? (t = e, n = !0) : (t = [ e ], n = !1);
        var s = [];
        n && s.push("GEOMETRYCOLLECTION(");
        for (var r = 0, o = t.length; r < o; ++r) n && r > 0 && s.push(","), i = t[r].geometry, 
        s.push(this.extractGeometry(i));
        return n && s.push(")"), s.join("");
    },
    "extractGeometry": function(e) {
        var t = e.CLASS_NAME.split(".")[2].toLowerCase();
        return this.extract[t] ? (this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection), 
        ("collection" == t ? "GEOMETRYCOLLECTION" : t.toUpperCase()) + "(" + this.extract[t].apply(this, [ e ]) + ")") : null;
    },
    "extract": {
        "point": function(e) {
            return e.x + " " + e.y;
        },
        "multipoint": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push("(" + this.extract.point.apply(this, [ e.components[i] ]) + ")");
            return t.join(",");
        },
        "linestring": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.point.apply(this, [ e.components[i] ]));
            return t.join(",");
        },
        "multilinestring": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push("(" + this.extract.linestring.apply(this, [ e.components[i] ]) + ")");
            return t.join(",");
        },
        "polygon": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push("(" + this.extract.linestring.apply(this, [ e.components[i] ]) + ")");
            return t.join(",");
        },
        "multipolygon": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push("(" + this.extract.polygon.apply(this, [ e.components[i] ]) + ")");
            return t.join(",");
        },
        "collection": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extractGeometry.apply(this, [ e.components[i] ]));
            return t.join(",");
        }
    },
    "parse": {
        "point": function(e) {
            var t = OpenLayers.String.trim(e).split(this.regExes.spaces);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t[0], t[1]));
        },
        "multipoint": function(e) {
            for (var t, i = OpenLayers.String.trim(e).split(","), n = [], s = 0, r = i.length; s < r; ++s) t = i[s].replace(this.regExes.trimParens, "$1"), 
            n.push(this.parse.point.apply(this, [ t ]).geometry);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(n));
        },
        "linestring": function(e) {
            for (var t = OpenLayers.String.trim(e).split(","), i = [], n = 0, s = t.length; n < s; ++n) i.push(this.parse.point.apply(this, [ t[n] ]).geometry);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(i));
        },
        "multilinestring": function(e) {
            for (var t, i = OpenLayers.String.trim(e).split(this.regExes.parenComma), n = [], s = 0, r = i.length; s < r; ++s) t = i[s].replace(this.regExes.trimParens, "$1"), 
            n.push(this.parse.linestring.apply(this, [ t ]).geometry);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(n));
        },
        "polygon": function(e) {
            for (var t, i, n, s = OpenLayers.String.trim(e).split(this.regExes.parenComma), r = [], o = 0, a = s.length; o < a; ++o) t = s[o].replace(this.regExes.trimParens, "$1"), 
            i = this.parse.linestring.apply(this, [ t ]).geometry, n = new OpenLayers.Geometry.LinearRing(i.components), 
            r.push(n);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(r));
        },
        "multipolygon": function(e) {
            for (var t, i = OpenLayers.String.trim(e).split(this.regExes.doubleParenComma), n = [], s = 0, r = i.length; s < r; ++s) t = i[s].replace(this.regExes.trimParens, "$1"), 
            n.push(this.parse.polygon.apply(this, [ t ]).geometry);
            return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(n));
        },
        "geometrycollection": function(e) {
            e = e.replace(/,\s*([A-Za-z])/g, "|$1");
            for (var t = OpenLayers.String.trim(e).split("|"), i = [], n = 0, s = t.length; n < s; ++n) i.push(OpenLayers.Format.WKT.prototype.read.apply(this, [ t[n] ]));
            return i;
        }
    },
    "CLASS_NAME": "OpenLayers.Format.WKT"
}), OpenLayers.Format.JSON = OpenLayers.Class(OpenLayers.Format, {
    "indent": "    ",
    "space": " ",
    "newline": "\n",
    "level": 0,
    "pretty": !1,
    "nativeJSON": !(!window.JSON || "function" != typeof JSON.parse || "function" != typeof JSON.stringify),
    "read": function(json, filter) {
        function walk(e, t) {
            if (t && "object" == typeof t) for (var i in t) t.hasOwnProperty(i) && (t[i] = walk(i, t[i]));
            return filter(e, t);
        }
        var object;
        if (this.nativeJSON) object = JSON.parse(json, filter); else try {
            /^[\],:{}\s]*$/.test(json.replace(/\\["\\\/bfnrtu]/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, "")) && (object = eval("(" + json + ")"), 
            "function" == typeof filter && (object = walk("", object)));
        } catch (e) {}
        return this.keepData && (this.data = object), object;
    },
    "write": function(e, t) {
        this.pretty = !!t;
        var i = null, n = typeof e;
        if (this.serialize[n]) try {
            i = !this.pretty && this.nativeJSON ? JSON.stringify(e) : this.serialize[n].apply(this, [ e ]);
        } catch (e) {
            OpenLayers.Console.error("Trouble serializing: " + e);
        }
        return i;
    },
    "writeIndent": function() {
        var e = [];
        if (this.pretty) for (var t = 0; t < this.level; ++t) e.push(this.indent);
        return e.join("");
    },
    "writeNewline": function() {
        return this.pretty ? this.newline : "";
    },
    "writeSpace": function() {
        return this.pretty ? this.space : "";
    },
    "serialize": {
        "object": function(e) {
            if (null == e) return "null";
            if (e.constructor == Date) return this.serialize.date.apply(this, [ e ]);
            if (e.constructor == Array) return this.serialize.array.apply(this, [ e ]);
            var t = [ "{" ];
            this.level += 1;
            var i, n, s, r = !1;
            for (i in e) e.hasOwnProperty(i) && (n = OpenLayers.Format.JSON.prototype.write.apply(this, [ i, this.pretty ]), 
            s = OpenLayers.Format.JSON.prototype.write.apply(this, [ e[i], this.pretty ]), null != n && null != s && (r && t.push(","), 
            t.push(this.writeNewline(), this.writeIndent(), n, ":", this.writeSpace(), s), r = !0));
            return this.level -= 1, t.push(this.writeNewline(), this.writeIndent(), "}"), t.join("");
        },
        "array": function(e) {
            var t, i = [ "[" ];
            this.level += 1;
            for (var n = 0, s = e.length; n < s; ++n) null != (t = OpenLayers.Format.JSON.prototype.write.apply(this, [ e[n], this.pretty ])) && (n > 0 && i.push(","), 
            i.push(this.writeNewline(), this.writeIndent(), t));
            return this.level -= 1, i.push(this.writeNewline(), this.writeIndent(), "]"), i.join("");
        },
        "string": function(e) {
            var t = {
                "\b": "\\b",
                "\t": "\\t",
                "\n": "\\n",
                "\f": "\\f",
                "\r": "\\r",
                '"': '\\"',
                "\\": "\\\\"
            };
            return /["\\\x00-\x1f]/.test(e) ? '"' + e.replace(/([\x00-\x1f\\"])/g, function(e, i) {
                var n = t[i];
                return n || (n = i.charCodeAt(), "\\u00" + Math.floor(n / 16).toString(16) + (n % 16).toString(16));
            }) + '"' : '"' + e + '"';
        },
        "number": function(e) {
            return isFinite(e) ? String(e) : "null";
        },
        "boolean": function(e) {
            return String(e);
        },
        "date": function(e) {
            function t(e) {
                return e < 10 ? "0" + e : e;
            }
            return '"' + e.getFullYear() + "-" + t(e.getMonth() + 1) + "-" + t(e.getDate()) + "T" + t(e.getHours()) + ":" + t(e.getMinutes()) + ":" + t(e.getSeconds()) + '"';
        }
    },
    "CLASS_NAME": "OpenLayers.Format.JSON"
}), OpenLayers.Format.GeoJSON = OpenLayers.Class(OpenLayers.Format.JSON, {
    "ignoreExtraDims": !1,
    "read": function(e, t, i) {
        t = t || "FeatureCollection";
        var n = null, s = null;
        if (s = "string" == typeof e ? OpenLayers.Format.JSON.prototype.read.apply(this, [ e, i ]) : e) {
            if ("string" != typeof s.type) OpenLayers.Console.error("Bad GeoJSON - no type: " + e); else if (this.isValidType(s, t)) switch (t) {
              case "Geometry":
                try {
                    n = this.parseGeometry(s);
                } catch (e) {
                    OpenLayers.Console.error(e);
                }
                break;

              case "Feature":
                try {
                    (n = this.parseFeature(s)).type = "Feature";
                } catch (e) {
                    OpenLayers.Console.error(e);
                }
                break;

              case "FeatureCollection":
                switch (n = [], s.type) {
                  case "Feature":
                    try {
                        n.push(this.parseFeature(s));
                    } catch (e) {
                        n = null, OpenLayers.Console.error(e);
                    }
                    break;

                  case "FeatureCollection":
                    for (var r = 0, o = s.features.length; r < o; ++r) try {
                        n.push(this.parseFeature(s.features[r]));
                    } catch (e) {
                        n = null, OpenLayers.Console.error(e);
                    }
                    break;

                  default:
                    try {
                        var a = this.parseGeometry(s);
                        n.push(new OpenLayers.Feature.Vector(a));
                    } catch (e) {
                        n = null, OpenLayers.Console.error(e);
                    }
                }
            }
        } else OpenLayers.Console.error("Bad JSON: " + e);
        return n;
    },
    "isValidType": function(e, t) {
        var i = !1;
        switch (t) {
          case "Geometry":
            -1 == OpenLayers.Util.indexOf([ "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "Box", "GeometryCollection" ], e.type) ? OpenLayers.Console.error("Unsupported geometry type: " + e.type) : i = !0;
            break;

          case "FeatureCollection":
            i = !0;
            break;

          default:
            e.type == t ? i = !0 : OpenLayers.Console.error("Cannot convert types from " + e.type + " to " + t);
        }
        return i;
    },
    "parseFeature": function(e) {
        var t, i, n, s;
        n = e.properties ? e.properties : {}, s = e.geometry && e.geometry.bbox || e.bbox;
        try {
            i = this.parseGeometry(e.geometry);
        } catch (e) {
            throw e;
        }
        return t = new OpenLayers.Feature.Vector(i, n), s && (t.bounds = OpenLayers.Bounds.fromArray(s)), 
        e.id && (t.fid = e.id), t;
    },
    "parseGeometry": function(e) {
        if (null == e) return null;
        var t, i = !1;
        if ("GeometryCollection" == e.type) {
            if (!OpenLayers.Util.isArray(e.geometries)) throw "GeometryCollection must have geometries array: " + e;
            for (var n = e.geometries.length, s = new Array(n), r = 0; r < n; ++r) s[r] = this.parseGeometry.apply(this, [ e.geometries[r] ]);
            t = new OpenLayers.Geometry.Collection(s), i = !0;
        } else {
            if (!OpenLayers.Util.isArray(e.coordinates)) throw "Geometry must have coordinates array: " + e;
            if (!this.parseCoords[e.type.toLowerCase()]) throw "Unsupported geometry type: " + e.type;
            try {
                t = this.parseCoords[e.type.toLowerCase()].apply(this, [ e.coordinates ]);
            } catch (e) {
                throw e;
            }
        }
        return this.internalProjection && this.externalProjection && !i && t.transform(this.externalProjection, this.internalProjection), 
        t;
    },
    "parseCoords": {
        "point": function(e) {
            if (0 == this.ignoreExtraDims && 2 != e.length) throw "Only 2D points are supported: " + e;
            return new OpenLayers.Geometry.Point(e[0], e[1]);
        },
        "multipoint": function(e) {
            for (var t = [], i = null, n = 0, s = e.length; n < s; ++n) {
                try {
                    i = this.parseCoords.point.apply(this, [ e[n] ]);
                } catch (e) {
                    throw e;
                }
                t.push(i);
            }
            return new OpenLayers.Geometry.MultiPoint(t);
        },
        "linestring": function(e) {
            for (var t = [], i = null, n = 0, s = e.length; n < s; ++n) {
                try {
                    i = this.parseCoords.point.apply(this, [ e[n] ]);
                } catch (e) {
                    throw e;
                }
                t.push(i);
            }
            return new OpenLayers.Geometry.LineString(t);
        },
        "multilinestring": function(e) {
            for (var t = [], i = null, n = 0, s = e.length; n < s; ++n) {
                try {
                    i = this.parseCoords.linestring.apply(this, [ e[n] ]);
                } catch (e) {
                    throw e;
                }
                t.push(i);
            }
            return new OpenLayers.Geometry.MultiLineString(t);
        },
        "polygon": function(e) {
            for (var t, i, n = [], s = 0, r = e.length; s < r; ++s) {
                try {
                    i = this.parseCoords.linestring.apply(this, [ e[s] ]);
                } catch (e) {
                    throw e;
                }
                t = new OpenLayers.Geometry.LinearRing(i.components), n.push(t);
            }
            return new OpenLayers.Geometry.Polygon(n);
        },
        "multipolygon": function(e) {
            for (var t = [], i = null, n = 0, s = e.length; n < s; ++n) {
                try {
                    i = this.parseCoords.polygon.apply(this, [ e[n] ]);
                } catch (e) {
                    throw e;
                }
                t.push(i);
            }
            return new OpenLayers.Geometry.MultiPolygon(t);
        },
        "box": function(e) {
            if (2 != e.length) throw "GeoJSON box coordinates must have 2 elements";
            return new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing([ new OpenLayers.Geometry.Point(e[0][0], e[0][1]), new OpenLayers.Geometry.Point(e[1][0], e[0][1]), new OpenLayers.Geometry.Point(e[1][0], e[1][1]), new OpenLayers.Geometry.Point(e[0][0], e[1][1]), new OpenLayers.Geometry.Point(e[0][0], e[0][1]) ]) ]);
        }
    },
    "write": function(e, t) {
        var i = {
            "type": null
        };
        if (OpenLayers.Util.isArray(e)) {
            i.type = "FeatureCollection";
            var n = e.length;
            i.features = new Array(n);
            for (var s = 0; s < n; ++s) {
                var r = e[s];
                if (!r instanceof OpenLayers.Feature.Vector) throw "FeatureCollection only supports collections of features: " + r;
                i.features[s] = this.extract.feature.apply(this, [ r ]);
            }
        } else 0 == e.CLASS_NAME.indexOf("OpenLayers.Geometry") ? i = this.extract.geometry.apply(this, [ e ]) : e instanceof OpenLayers.Feature.Vector && (i = this.extract.feature.apply(this, [ e ]), 
        e.layer && e.layer.projection && (i.crs = this.createCRSObject(e)));
        return OpenLayers.Format.JSON.prototype.write.apply(this, [ i, t ]);
    },
    "createCRSObject": function(e) {
        var t = e.layer.projection.toString(), i = {};
        if (t.match(/epsg:/i)) {
            var n = parseInt(t.substring(t.indexOf(":") + 1));
            i = 4326 == n ? {
                "type": "name",
                "properties": {
                    "name": "urn:ogc:def:crs:OGC:1.3:CRS84"
                }
            } : {
                "type": "name",
                "properties": {
                    "name": "EPSG:" + n
                }
            };
        }
        return i;
    },
    "extract": {
        "feature": function(e) {
            var t = this.extract.geometry.apply(this, [ e.geometry ]), i = {
                "type": "Feature",
                "properties": e.attributes,
                "geometry": t
            };
            return null != e.fid && (i.id = e.fid), i;
        },
        "geometry": function(e) {
            if (null == e) return null;
            this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection);
            var t = e.CLASS_NAME.split(".")[2], i = this.extract[t.toLowerCase()].apply(this, [ e ]);
            return "Collection" == t ? {
                "type": "GeometryCollection",
                "geometries": i
            } : {
                "type": t,
                "coordinates": i
            };
        },
        "point": function(e) {
            return [ e.x, e.y ];
        },
        "multipoint": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.point.apply(this, [ e.components[i] ]));
            return t;
        },
        "linestring": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.point.apply(this, [ e.components[i] ]));
            return t;
        },
        "multilinestring": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.linestring.apply(this, [ e.components[i] ]));
            return t;
        },
        "polygon": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.linestring.apply(this, [ e.components[i] ]));
            return t;
        },
        "multipolygon": function(e) {
            for (var t = [], i = 0, n = e.components.length; i < n; ++i) t.push(this.extract.polygon.apply(this, [ e.components[i] ]));
            return t;
        },
        "collection": function(e) {
            for (var t = e.components.length, i = new Array(t), n = 0; n < t; ++n) i[n] = this.extract.geometry.apply(this, [ e.components[n] ]);
            return i;
        }
    },
    "CLASS_NAME": "OpenLayers.Format.GeoJSON"
}), OpenLayers.Format.XML = OpenLayers.Class(OpenLayers.Format, {
    "namespaces": null,
    "namespaceAlias": null,
    "defaultPrefix": null,
    "readers": {},
    "writers": {},
    "xmldom": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.supportActiveX && (this.xmldom = new ActiveXObject("Microsoft.XMLDOM")), 
        OpenLayers.Format.prototype.initialize.apply(this, [ e ]), this.namespaces = OpenLayers.Util.extend({}, this.namespaces), 
        this.namespaceAlias = {};
        for (var t in this.namespaces) this.namespaceAlias[this.namespaces[t]] = t;
    },
    "destroy": function() {
        this.xmldom = null, OpenLayers.Format.prototype.destroy.apply(this, arguments);
    },
    "setNamespace": function(e, t) {
        this.namespaces[e] = t, this.namespaceAlias[t] = e;
    },
    "read": function(e) {
        var t = e.indexOf("<");
        t > 0 && (e = e.substring(t));
        var i = OpenLayers.Util.Try(OpenLayers.Function.bind(function() {
            var t;
            return (t = OpenLayers.Format.XML.supportActiveX && !this.xmldom ? new ActiveXObject("Microsoft.XMLDOM") : this.xmldom).loadXML(e), 
            t;
        }, this), function() {
            return new DOMParser().parseFromString(e, "text/xml");
        }, function() {
            var t = new XMLHttpRequest();
            return t.open("GET", "data:text/xml;charset=utf-8," + encodeURIComponent(e), !1), 
            t.overrideMimeType && t.overrideMimeType("text/xml"), t.send(null), t.responseXML;
        });
        return this.keepData && (this.data = i), i;
    },
    "write": function(e) {
        var t;
        if (this.xmldom) t = e.xml; else {
            var i = new XMLSerializer();
            if (1 == e.nodeType) {
                var n = document.implementation.createDocument("", "", null);
                n.importNode && (e = n.importNode(e, !0)), n.appendChild(e), t = i.serializeToString(n);
            } else t = i.serializeToString(e);
        }
        return t;
    },
    "createElementNS": function(e, t) {
        return this.xmldom ? "string" == typeof e ? this.xmldom.createNode(1, t, e) : this.xmldom.createNode(1, t, "") : document.createElementNS(e, t);
    },
    "createDocumentFragment": function() {
        return this.xmldom ? this.xmldom.createDocumentFragment() : document.createDocumentFragment();
    },
    "createTextNode": function(e) {
        return "string" != typeof e && (e = String(e)), this.xmldom ? this.xmldom.createTextNode(e) : document.createTextNode(e);
    },
    "getElementsByTagNameNS": function(e, t, i) {
        var n = [];
        if (e.getElementsByTagNameNS) n = e.getElementsByTagNameNS(t, i); else for (var s, r, o = e.getElementsByTagName("*"), a = 0, l = o.length; a < l; ++a) r = (s = o[a]).prefix ? s.prefix + ":" + i : i, 
        "*" != i && r != s.nodeName || "*" != t && t != s.namespaceURI || n.push(s);
        return n;
    },
    "getAttributeNodeNS": function(e, t, i) {
        var n = null;
        if (e.getAttributeNodeNS) n = e.getAttributeNodeNS(t, i); else for (var s, r = e.attributes, o = 0, a = r.length; o < a; ++o) if ((s = r[o]).namespaceURI == t && (s.prefix ? s.prefix + ":" + i : i) == s.nodeName) {
            n = s;
            break;
        }
        return n;
    },
    "getAttributeNS": function(e, t, i) {
        var n = "";
        if (e.getAttributeNS) n = e.getAttributeNS(t, i) || ""; else {
            var s = this.getAttributeNodeNS(e, t, i);
            s && (n = s.nodeValue);
        }
        return n;
    },
    "getChildValue": function(e, t) {
        var i = t || "";
        if (e) for (var n = e.firstChild; n; n = n.nextSibling) switch (n.nodeType) {
          case 3:
          case 4:
            i += n.nodeValue;
        }
        return i;
    },
    "isSimpleContent": function(e) {
        for (var t = !0, i = e.firstChild; i; i = i.nextSibling) if (1 === i.nodeType) {
            t = !1;
            break;
        }
        return t;
    },
    "contentType": function(e) {
        for (var t = !1, i = !1, n = OpenLayers.Format.XML.CONTENT_TYPE.EMPTY, s = e.firstChild; s; s = s.nextSibling) {
            switch (s.nodeType) {
              case 1:
                i = !0;
                break;

              case 8:
                break;

              default:
                t = !0;
            }
            if (i && t) break;
        }
        if (i && t) n = OpenLayers.Format.XML.CONTENT_TYPE.MIXED; else {
            if (i) return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;
            if (t) return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE;
        }
        return n;
    },
    "hasAttributeNS": function(e, t, i) {
        return e.hasAttributeNS ? e.hasAttributeNS(t, i) : !!this.getAttributeNodeNS(e, t, i);
    },
    "setAttributeNS": function(e, t, i, n) {
        if (e.setAttributeNS) e.setAttributeNS(t, i, n); else {
            if (!this.xmldom) throw "setAttributeNS not implemented";
            if (t) {
                var s = e.ownerDocument.createNode(2, i, t);
                s.nodeValue = n, e.setAttributeNode(s);
            } else e.setAttribute(i, n);
        }
    },
    "createElementNSPlus": function(e, t) {
        var i = (t = t || {}).uri || this.namespaces[t.prefix];
        if (!i) {
            var n = e.indexOf(":");
            i = this.namespaces[e.substring(0, n)];
        }
        i || (i = this.namespaces[this.defaultPrefix]);
        var s = this.createElementNS(i, e);
        t.attributes && this.setAttributes(s, t.attributes);
        var r = t.value;
        return null != r && s.appendChild(this.createTextNode(r)), s;
    },
    "setAttributes": function(e, t) {
        var i, n;
        for (var s in t) null != t[s] && t[s].toString && (i = t[s].toString(), n = this.namespaces[s.substring(0, s.indexOf(":"))] || null, 
        this.setAttributeNS(e, n, s, i));
    },
    "getFirstElementChild": function(e) {
        if (e.firstElementChild) return e.firstElementChild;
        for (var t = e.firstChild; 1 != t.nodeType && (t = t.nextSibling); ) ;
        return t;
    },
    "readNode": function(e, t) {
        t || (t = {});
        var i = this.readers[e.namespaceURI ? this.namespaceAlias[e.namespaceURI] : this.defaultPrefix];
        if (i) {
            var n = i[e.localName || e.nodeName.split(":").pop()] || i["*"];
            n && n.apply(this, [ e, t ]);
        }
        return t;
    },
    "readChildNodes": function(e, t) {
        t || (t = {});
        for (var i, n = e.childNodes, s = 0, r = n.length; s < r; ++s) 1 == (i = n[s]).nodeType && this.readNode(i, t);
        return t;
    },
    "writeNode": function(e, t, i) {
        var n, s, r = e.indexOf(":");
        r > 0 ? (n = e.substring(0, r), s = e.substring(r + 1)) : (n = i ? this.namespaceAlias[i.namespaceURI] : this.defaultPrefix, 
        s = e);
        var o = this.writers[n][s].apply(this, [ t ]);
        return i && i.appendChild(o), o;
    },
    "getChildEl": function(e, t, i) {
        return e && this.getThisOrNextEl(e.firstChild, t, i);
    },
    "getNextEl": function(e, t, i) {
        return e && this.getThisOrNextEl(e.nextSibling, t, i);
    },
    "getThisOrNextEl": function(e, t, i) {
        e: for (var n = e; n; n = n.nextSibling) switch (n.nodeType) {
          case 1:
            if (!(t && t !== (n.localName || n.nodeName.split(":").pop()) || i && i !== n.namespaceURI)) break e;
            n = null;
            break e;

          case 3:
            if (/^\s*$/.test(n.nodeValue)) break;

          case 4:
          case 6:
          case 12:
          case 10:
          case 11:
            n = null;
            break e;
        }
        return n || null;
    },
    "lookupNamespaceURI": function(e, t) {
        var i = null;
        if (e) if (e.lookupNamespaceURI) i = e.lookupNamespaceURI(t); else e: switch (e.nodeType) {
          case 1:
            if (null !== e.namespaceURI && e.prefix === t) {
                i = e.namespaceURI;
                break e;
            }
            var n = e.attributes.length;
            if (n) for (var s, r = 0; r < n; ++r) {
                if ("xmlns" === (s = e.attributes[r]).prefix && s.name === "xmlns:" + t) {
                    i = s.value || null;
                    break e;
                }
                if ("xmlns" === s.name && null === t) {
                    i = s.value || null;
                    break e;
                }
            }
            i = this.lookupNamespaceURI(e.parentNode, t);
            break e;

          case 2:
            i = this.lookupNamespaceURI(e.ownerElement, t);
            break e;

          case 9:
            i = this.lookupNamespaceURI(e.documentElement, t);
            break e;

          case 6:
          case 12:
          case 10:
          case 11:
            break e;

          default:
            i = this.lookupNamespaceURI(e.parentNode, t);
        }
        return i;
    },
    "getXMLDoc": function() {
        return OpenLayers.Format.XML.document || this.xmldom || (document.implementation && document.implementation.createDocument ? OpenLayers.Format.XML.document = document.implementation.createDocument("", "", null) : !this.xmldom && OpenLayers.Format.XML.supportActiveX && (this.xmldom = new ActiveXObject("Microsoft.XMLDOM"))), 
        OpenLayers.Format.XML.document || this.xmldom;
    },
    "CLASS_NAME": "OpenLayers.Format.XML"
}), OpenLayers.Format.XML.CONTENT_TYPE = {
    "EMPTY": 0,
    "SIMPLE": 1,
    "COMPLEX": 2,
    "MIXED": 3
}, OpenLayers.Format.XML.lookupNamespaceURI = OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI, OpenLayers.Format.XML.prototype), 
OpenLayers.Format.XML.document = null, OpenLayers.Format.XML.supportActiveX = Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(window, "ActiveXObject") || "ActiveXObject" in window, 
OpenLayers.Format.OGCExceptionReport = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ogc": "http://www.opengis.net/ogc"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "defaultPrefix": "ogc",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = {
            "exceptionReport": null
        };
        return e.documentElement && (this.readChildNodes(e, t), null === t.exceptionReport && (t = new OpenLayers.Format.OWSCommon().read(e))), 
        t;
    },
    "readers": {
        "ogc": {
            "ServiceExceptionReport": function(e, t) {
                t.exceptionReport = {
                    "exceptions": []
                }, this.readChildNodes(e, t.exceptionReport);
            },
            "ServiceException": function(e, t) {
                var i = {
                    "code": e.getAttribute("code"),
                    "locator": e.getAttribute("locator"),
                    "text": this.getChildValue(e)
                };
                t.exceptions.push(i);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.OGCExceptionReport"
}), OpenLayers.Format.XML.VersionedOGC = OpenLayers.Class(OpenLayers.Format.XML, {
    "defaultVersion": null,
    "version": null,
    "profile": null,
    "allowFallback": !1,
    "name": null,
    "stringifyOutput": !1,
    "parser": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
        var t = this.CLASS_NAME;
        this.name = t.substring(t.lastIndexOf(".") + 1);
    },
    "getVersion": function(e, t) {
        var i;
        return e ? (i = this.version) || (i = e.getAttribute("version")) || (i = this.defaultVersion) : i = t && t.version || this.version || this.defaultVersion, 
        i;
    },
    "getParser": function(e) {
        e = e || this.defaultVersion;
        var t = this.profile ? "_" + this.profile : "";
        if (!this.parser || this.parser.VERSION != e) {
            var i = OpenLayers.Format[this.name]["v" + e.replace(/\./g, "_") + t];
            if (!i && ("" !== t && this.allowFallback && (t = "", i = OpenLayers.Format[this.name]["v" + e.replace(/\./g, "_")]), 
            !i)) throw "Can't find a " + this.name + " parser for version " + e + t;
            this.parser = new i(this.options);
        }
        return this.parser;
    },
    "write": function(e, t) {
        var i = this.getVersion(null, t);
        this.parser = this.getParser(i);
        var n = this.parser.write(e, t);
        return !1 === this.stringifyOutput ? n : OpenLayers.Format.XML.prototype.write.apply(this, [ n ]);
    },
    "read": function(e, t) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var i = e.documentElement, n = this.getVersion(i);
        this.parser = this.getParser(n);
        var s = this.parser.read(e, t), r = this.parser.errorProperty || null;
        if (null !== r && void 0 === s[r]) {
            var o = new OpenLayers.Format.OGCExceptionReport();
            s.error = o.read(e);
        }
        return s.version = n, s.requestType = this.name, s;
    },
    "CLASS_NAME": "OpenLayers.Format.XML.VersionedOGC"
}), OpenLayers.Format.OWSCommon = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "getVersion": function(e, t) {
        var i = this.version;
        if (!i) {
            var n = e.getAttribute("xmlns:ows");
            n && "1.1" === n.substring(n.lastIndexOf("/") + 1) && (i = "1.1.0"), i || (i = this.defaultVersion);
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Format.OWSCommon"
}), OpenLayers.Format.OWSCommon.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "read": function(e, t) {
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var i = {};
        return this.readChildNodes(e, i), i;
    },
    "readers": {
        "ows": {
            "Exception": function(e, t) {
                var i = {
                    "code": e.getAttribute("exceptionCode"),
                    "locator": e.getAttribute("locator"),
                    "texts": []
                };
                t.exceptions.push(i), this.readChildNodes(e, i);
            },
            "ExceptionText": function(e, t) {
                var i = this.getChildValue(e);
                t.texts.push(i);
            },
            "ServiceIdentification": function(e, t) {
                t.serviceIdentification = {}, this.readChildNodes(e, t.serviceIdentification);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.abstract = this.getChildValue(e);
            },
            "Keywords": function(e, t) {
                t.keywords = {}, this.readChildNodes(e, t.keywords);
            },
            "Keyword": function(e, t) {
                t[this.getChildValue(e)] = !0;
            },
            "ServiceType": function(e, t) {
                t.serviceType = {
                    "codeSpace": e.getAttribute("codeSpace"),
                    "value": this.getChildValue(e)
                };
            },
            "ServiceTypeVersion": function(e, t) {
                t.serviceTypeVersion = this.getChildValue(e);
            },
            "Fees": function(e, t) {
                t.fees = this.getChildValue(e);
            },
            "AccessConstraints": function(e, t) {
                t.accessConstraints = this.getChildValue(e);
            },
            "ServiceProvider": function(e, t) {
                t.serviceProvider = {}, this.readChildNodes(e, t.serviceProvider);
            },
            "ProviderName": function(e, t) {
                t.providerName = this.getChildValue(e);
            },
            "ProviderSite": function(e, t) {
                t.providerSite = this.getAttributeNS(e, this.namespaces.xlink, "href");
            },
            "ServiceContact": function(e, t) {
                t.serviceContact = {}, this.readChildNodes(e, t.serviceContact);
            },
            "IndividualName": function(e, t) {
                t.individualName = this.getChildValue(e);
            },
            "PositionName": function(e, t) {
                t.positionName = this.getChildValue(e);
            },
            "ContactInfo": function(e, t) {
                t.contactInfo = {}, this.readChildNodes(e, t.contactInfo);
            },
            "Phone": function(e, t) {
                t.phone = {}, this.readChildNodes(e, t.phone);
            },
            "Voice": function(e, t) {
                t.voice = this.getChildValue(e);
            },
            "Facsimile": function(e, t) {
                t.facsimile = this.getChildValue(e);
            },
            "Address": function(e, t) {
                t.address = {}, this.readChildNodes(e, t.address);
            },
            "DeliveryPoint": function(e, t) {
                t.deliveryPoint = this.getChildValue(e);
            },
            "City": function(e, t) {
                t.city = this.getChildValue(e);
            },
            "AdministrativeArea": function(e, t) {
                t.administrativeArea = this.getChildValue(e);
            },
            "PostalCode": function(e, t) {
                t.postalCode = this.getChildValue(e);
            },
            "Country": function(e, t) {
                t.country = this.getChildValue(e);
            },
            "ElectronicMailAddress": function(e, t) {
                t.electronicMailAddress = this.getChildValue(e);
            },
            "Role": function(e, t) {
                t.role = this.getChildValue(e);
            },
            "OperationsMetadata": function(e, t) {
                t.operationsMetadata = {}, this.readChildNodes(e, t.operationsMetadata);
            },
            "Operation": function(e, t) {
                var i = e.getAttribute("name");
                t[i] = {}, this.readChildNodes(e, t[i]);
            },
            "DCP": function(e, t) {
                t.dcp = {}, this.readChildNodes(e, t.dcp);
            },
            "HTTP": function(e, t) {
                t.http = {}, this.readChildNodes(e, t.http);
            },
            "Get": function(e, t) {
                t.get || (t.get = []);
                var i = {
                    "url": this.getAttributeNS(e, this.namespaces.xlink, "href")
                };
                this.readChildNodes(e, i), t.get.push(i);
            },
            "Post": function(e, t) {
                t.post || (t.post = []);
                var i = {
                    "url": this.getAttributeNS(e, this.namespaces.xlink, "href")
                };
                this.readChildNodes(e, i), t.post.push(i);
            },
            "Parameter": function(e, t) {
                t.parameters || (t.parameters = {});
                var i = e.getAttribute("name");
                t.parameters[i] = {}, this.readChildNodes(e, t.parameters[i]);
            },
            "Constraint": function(e, t) {
                t.constraints || (t.constraints = {});
                var i = e.getAttribute("name");
                t.constraints[i] = {}, this.readChildNodes(e, t.constraints[i]);
            },
            "Value": function(e, t) {
                t[this.getChildValue(e)] = !0;
            },
            "OutputFormat": function(e, t) {
                t.formats.push({
                    "value": this.getChildValue(e)
                }), this.readChildNodes(e, t);
            },
            "WGS84BoundingBox": function(e, t) {
                var i = {};
                i.crs = e.getAttribute("crs"), t.BoundingBox ? t.BoundingBox.push(i) : (t.projection = i.crs, 
                i = t), this.readChildNodes(e, i);
            },
            "BoundingBox": function(e, t) {
                this.readers.ows.WGS84BoundingBox.apply(this, [ e, t ]);
            },
            "LowerCorner": function(e, t) {
                var i = this.getChildValue(e).replace(this.regExes.trimSpace, ""), n = (i = i.replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace);
                t.left = n[0], t.bottom = n[1];
            },
            "UpperCorner": function(e, t) {
                var i = this.getChildValue(e).replace(this.regExes.trimSpace, ""), n = (i = i.replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace);
                t.right = n[0], t.top = n[1], t.bounds = new OpenLayers.Bounds(t.left, t.bottom, t.right, t.top), 
                delete t.left, delete t.bottom, delete t.right, delete t.top;
            },
            "Language": function(e, t) {
                t.language = this.getChildValue(e);
            }
        }
    },
    "writers": {
        "ows": {
            "BoundingBox": function(e, t) {
                var i = this.createElementNSPlus(t || "ows:BoundingBox", {
                    "attributes": {
                        "crs": e.projection
                    }
                });
                return this.writeNode("ows:LowerCorner", e, i), this.writeNode("ows:UpperCorner", e, i), 
                i;
            },
            "LowerCorner": function(e) {
                return this.createElementNSPlus("ows:LowerCorner", {
                    "value": e.bounds.left + " " + e.bounds.bottom
                });
            },
            "UpperCorner": function(e) {
                return this.createElementNSPlus("ows:UpperCorner", {
                    "value": e.bounds.right + " " + e.bounds.top
                });
            },
            "Identifier": function(e) {
                return this.createElementNSPlus("ows:Identifier", {
                    "value": e
                });
            },
            "Title": function(e) {
                return this.createElementNSPlus("ows:Title", {
                    "value": e
                });
            },
            "Abstract": function(e) {
                return this.createElementNSPlus("ows:Abstract", {
                    "value": e
                });
            },
            "OutputFormat": function(e) {
                return this.createElementNSPlus("ows:OutputFormat", {
                    "value": e
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.OWSCommon.v1"
}), OpenLayers.Format.OWSCommon.v1_1_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "readers": {
        "ows": OpenLayers.Util.applyDefaults({
            "ExceptionReport": function(e, t) {
                t.exceptionReport = {
                    "version": e.getAttribute("version"),
                    "language": e.getAttribute("xml:lang"),
                    "exceptions": []
                }, this.readChildNodes(e, t.exceptionReport);
            },
            "AllowedValues": function(e, t) {
                t.allowedValues = {}, this.readChildNodes(e, t.allowedValues);
            },
            "AnyValue": function(e, t) {
                t.anyValue = !0;
            },
            "DataType": function(e, t) {
                t.dataType = this.getChildValue(e);
            },
            "Range": function(e, t) {
                t.range = {}, this.readChildNodes(e, t.range);
            },
            "MinimumValue": function(e, t) {
                t.minValue = this.getChildValue(e);
            },
            "MaximumValue": function(e, t) {
                t.maxValue = this.getChildValue(e);
            },
            "Identifier": function(e, t) {
                t.identifier = this.getChildValue(e);
            },
            "SupportedCRS": function(e, t) {
                t.supportedCRS = this.getChildValue(e);
            }
        }, OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)
    },
    "writers": {
        "ows": OpenLayers.Util.applyDefaults({
            "Range": function(e) {
                var t = this.createElementNSPlus("ows:Range", {
                    "attributes": {
                        "ows:rangeClosure": e.closure
                    }
                });
                return this.writeNode("ows:MinimumValue", e.minValue, t), this.writeNode("ows:MaximumValue", e.maxValue, t), 
                t;
            },
            "MinimumValue": function(e) {
                return this.createElementNSPlus("ows:MinimumValue", {
                    "value": e
                });
            },
            "MaximumValue": function(e) {
                return this.createElementNSPlus("ows:MaximumValue", {
                    "value": e
                });
            },
            "Value": function(e) {
                return this.createElementNSPlus("ows:Value", {
                    "value": e
                });
            }
        }, OpenLayers.Format.OWSCommon.v1.prototype.writers.ows)
    },
    "CLASS_NAME": "OpenLayers.Format.OWSCommon.v1_1_0"
}), OpenLayers.Format.WCSGetCoverage = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "wcs": "http://www.opengis.net/wcs/1.1",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "VERSION": "1.1.2",
    "schemaLocation": "http://www.opengis.net/wcs/1.1 http://schemas.opengis.net/wcs/1.1/wcsGetCoverage.xsd",
    "write": function(e) {
        var t = this.writeNode("wcs:GetCoverage", e);
        return this.setAttributeNS(t, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "writers": {
        "wcs": {
            "GetCoverage": function(e) {
                var t = this.createElementNSPlus("wcs:GetCoverage", {
                    "attributes": {
                        "version": e.version || this.VERSION,
                        "service": "WCS"
                    }
                });
                return this.writeNode("ows:Identifier", e.identifier, t), this.writeNode("wcs:DomainSubset", e.domainSubset, t), 
                this.writeNode("wcs:Output", e.output, t), t;
            },
            "DomainSubset": function(e) {
                var t = this.createElementNSPlus("wcs:DomainSubset", {});
                return this.writeNode("ows:BoundingBox", e.boundingBox, t), e.temporalSubset && this.writeNode("wcs:TemporalSubset", e.temporalSubset, t), 
                t;
            },
            "TemporalSubset": function(e) {
                for (var t = this.createElementNSPlus("wcs:TemporalSubset", {}), i = 0, n = e.timePeriods.length; i < n; ++i) this.writeNode("wcs:TimePeriod", e.timePeriods[i], t);
                return t;
            },
            "TimePeriod": function(e) {
                var t = this.createElementNSPlus("wcs:TimePeriod", {});
                return this.writeNode("wcs:BeginPosition", e.begin, t), this.writeNode("wcs:EndPosition", e.end, t), 
                e.resolution && this.writeNode("wcs:TimeResolution", e.resolution, t), t;
            },
            "BeginPosition": function(e) {
                return this.createElementNSPlus("wcs:BeginPosition", {
                    "value": e
                });
            },
            "EndPosition": function(e) {
                return this.createElementNSPlus("wcs:EndPosition", {
                    "value": e
                });
            },
            "TimeResolution": function(e) {
                return this.createElementNSPlus("wcs:TimeResolution", {
                    "value": e
                });
            },
            "Output": function(e) {
                var t = this.createElementNSPlus("wcs:Output", {
                    "attributes": {
                        "format": e.format,
                        "store": e.store
                    }
                });
                return e.gridCRS && this.writeNode("wcs:GridCRS", e.gridCRS, t), t;
            },
            "GridCRS": function(e) {
                var t = this.createElementNSPlus("wcs:GridCRS", {});
                return this.writeNode("wcs:GridBaseCRS", e.baseCRS, t), e.type && this.writeNode("wcs:GridType", e.type, t), 
                e.origin && this.writeNode("wcs:GridOrigin", e.origin, t), this.writeNode("wcs:GridOffsets", e.offsets, t), 
                e.CS && this.writeNode("wcs:GridCS", e.CS, t), t;
            },
            "GridBaseCRS": function(e) {
                return this.createElementNSPlus("wcs:GridBaseCRS", {
                    "value": e
                });
            },
            "GridOrigin": function(e) {
                return this.createElementNSPlus("wcs:GridOrigin", {
                    "value": e
                });
            },
            "GridType": function(e) {
                return this.createElementNSPlus("wcs:GridType", {
                    "value": e
                });
            },
            "GridOffsets": function(e) {
                return this.createElementNSPlus("wcs:GridOffsets", {
                    "value": e
                });
            },
            "GridCS": function(e) {
                return this.createElementNSPlus("wcs:GridCS", {
                    "value": e
                });
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WCSGetCoverage"
}), OpenLayers.Format.WFST = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Format.WFST.DEFAULTS);
    var t = OpenLayers.Format.WFST["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported WFST version: " + e.version;
    return new t(e);
}, OpenLayers.Format.WFST.DEFAULTS = {
    "version": "1.0.0"
}, OpenLayers.Filter.Spatial = OpenLayers.Class(OpenLayers.Filter, {
    "type": null,
    "property": null,
    "value": null,
    "distance": null,
    "distanceUnits": null,
    "evaluate": function(e) {
        var t = !1;
        switch (this.type) {
          case OpenLayers.Filter.Spatial.BBOX:
          case OpenLayers.Filter.Spatial.INTERSECTS:
            if (e.geometry) {
                var i = this.value;
                "OpenLayers.Bounds" == this.value.CLASS_NAME && (i = this.value.toGeometry()), e.geometry.intersects(i) && (t = !0);
            }
            break;

          default:
            throw new Error("evaluate is not implemented for this filter type.");
        }
        return t;
    },
    "clone": function() {
        var e = OpenLayers.Util.applyDefaults({
            "value": this.value && this.value.clone && this.value.clone()
        }, this);
        return new OpenLayers.Filter.Spatial(e);
    },
    "CLASS_NAME": "OpenLayers.Filter.Spatial"
}), OpenLayers.Filter.Spatial.BBOX = "BBOX", OpenLayers.Filter.Spatial.INTERSECTS = "INTERSECTS", 
OpenLayers.Filter.Spatial.DWITHIN = "DWITHIN", OpenLayers.Filter.Spatial.WITHIN = "WITHIN", 
OpenLayers.Filter.Spatial.CONTAINS = "CONTAINS", OpenLayers.Filter.FeatureId = OpenLayers.Class(OpenLayers.Filter, {
    "fids": null,
    "type": "FID",
    "initialize": function(e) {
        this.fids = [], OpenLayers.Filter.prototype.initialize.apply(this, [ e ]);
    },
    "evaluate": function(e) {
        for (var t = 0, i = this.fids.length; t < i; t++) if ((e.fid || e.id) == this.fids[t]) return !0;
        return !1;
    },
    "clone": function() {
        var e = new OpenLayers.Filter.FeatureId();
        return OpenLayers.Util.extend(e, this), e.fids = this.fids.slice(), e;
    },
    "CLASS_NAME": "OpenLayers.Filter.FeatureId"
}), OpenLayers.Format.WFST.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "wfs": "http://www.opengis.net/wfs",
        "gml": "http://www.opengis.net/gml",
        "ogc": "http://www.opengis.net/ogc",
        "ows": "http://www.opengis.net/ows",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "defaultPrefix": "wfs",
    "version": null,
    "schemaLocations": null,
    "srsName": null,
    "extractAttributes": !0,
    "xy": !0,
    "stateName": null,
    "initialize": function(e) {
        this.stateName = {}, this.stateName[OpenLayers.State.INSERT] = "wfs:Insert", this.stateName[OpenLayers.State.UPDATE] = "wfs:Update", 
        this.stateName[OpenLayers.State.DELETE] = "wfs:Delete", OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "getSrsName": function(e, t) {
        var i = t && t.srsName;
        return i || (i = e && e.layer ? e.layer.projection.getCode() : this.srsName), i;
    },
    "read": function(e, t) {
        t = t || {}, OpenLayers.Util.applyDefaults(t, {
            "output": "features"
        }), "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var i = {};
        return e && this.readNode(e, i, !0), i.features && "features" === t.output && (i = i.features), 
        i;
    },
    "readers": {
        "wfs": {
            "FeatureCollection": function(e, t) {
                t.features = [], this.readChildNodes(e, t);
            }
        }
    },
    "write": function(e, t) {
        var i = this.writeNode("wfs:Transaction", {
            "features": e,
            "options": t
        }), n = this.schemaLocationAttr();
        return n && this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", n), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "writers": {
        "wfs": {
            "GetFeature": function(e) {
                var t = this.createElementNSPlus("wfs:GetFeature", {
                    "attributes": {
                        "service": "WFS",
                        "version": this.version,
                        "handle": e && e.handle,
                        "outputFormat": e && e.outputFormat,
                        "maxFeatures": e && e.maxFeatures,
                        "viewParams": e && e.viewParams,
                        "xsi:schemaLocation": this.schemaLocationAttr(e)
                    }
                });
                if ("string" == typeof this.featureType) this.writeNode("Query", e, t); else for (var i = 0, n = this.featureType.length; i < n; i++) e.featureType = this.featureType[i], 
                this.writeNode("Query", e, t);
                return t;
            },
            "Transaction": function(e) {
                var t, i, n = (e = e || {}).options || {}, s = this.createElementNSPlus("wfs:Transaction", {
                    "attributes": {
                        "service": "WFS",
                        "version": this.version,
                        "handle": n.handle
                    }
                }), r = e.features;
                if (r) {
                    !0 === n.multi && OpenLayers.Util.extend(this.geometryTypes, {
                        "OpenLayers.Geometry.Point": "MultiPoint",
                        "OpenLayers.Geometry.LineString": !0 === this.multiCurve ? "MultiCurve" : "MultiLineString",
                        "OpenLayers.Geometry.Polygon": !0 === this.multiSurface ? "MultiSurface" : "MultiPolygon"
                    });
                    var o, a;
                    for (t = 0, i = r.length; t < i; ++t) a = r[t], (o = this.stateName[a.state]) && this.writeNode(o, {
                        "feature": a,
                        "options": n
                    }, s);
                    !0 === n.multi && this.setGeometryTypes();
                }
                if (n.nativeElements) for (t = 0, i = n.nativeElements.length; t < i; ++t) this.writeNode("wfs:Native", n.nativeElements[t], s);
                return s;
            },
            "Native": function(e) {
                return this.createElementNSPlus("wfs:Native", {
                    "attributes": {
                        "vendorId": e.vendorId,
                        "safeToIgnore": e.safeToIgnore
                    },
                    "value": e.value
                });
            },
            "Insert": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Insert", {
                    "attributes": {
                        "handle": i && i.handle
                    }
                });
                return this.srsName = this.getSrsName(t), this.writeNode("feature:_typeName", t, n), 
                n;
            },
            "Update": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Update", {
                    "attributes": {
                        "handle": i && i.handle,
                        "typeName": (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                    }
                });
                this.featureNS && this.setAttributeNS(n, this.namespaces.xmlns, "xmlns:" + this.featurePrefix, this.featureNS);
                var s = t.modified;
                null === this.geometryName || s && void 0 === s.geometry || (this.srsName = this.getSrsName(t), 
                this.writeNode("Property", {
                    "name": this.geometryName,
                    "value": t.geometry
                }, n));
                for (var r in t.attributes) void 0 === t.attributes[r] || s && s.attributes && !(s.attributes && r in s.attributes) || this.writeNode("Property", {
                    "name": r,
                    "value": t.attributes[r]
                }, n);
                return this.writeNode("ogc:Filter", new OpenLayers.Filter.FeatureId({
                    "fids": [ t.fid ]
                }), n), n;
            },
            "Property": function(e) {
                var t = this.createElementNSPlus("wfs:Property");
                return this.writeNode("Name", e.name, t), null !== e.value && this.writeNode("Value", e.value, t), 
                t;
            },
            "Name": function(e) {
                return this.createElementNSPlus("wfs:Name", {
                    "value": e
                });
            },
            "Value": function(e) {
                var t;
                if (e instanceof OpenLayers.Geometry) {
                    t = this.createElementNSPlus("wfs:Value");
                    var i = this.writeNode("feature:_geometry", e).firstChild;
                    t.appendChild(i);
                } else t = this.createElementNSPlus("wfs:Value", {
                    "value": e
                });
                return t;
            },
            "Delete": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Delete", {
                    "attributes": {
                        "handle": i && i.handle,
                        "typeName": (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                    }
                });
                return this.featureNS && this.setAttributeNS(n, this.namespaces.xmlns, "xmlns:" + this.featurePrefix, this.featureNS), 
                this.writeNode("ogc:Filter", new OpenLayers.Filter.FeatureId({
                    "fids": [ t.fid ]
                }), n), n;
            }
        }
    },
    "schemaLocationAttr": function(e) {
        e = OpenLayers.Util.extend({
            "featurePrefix": this.featurePrefix,
            "schema": this.schema
        }, e);
        var t = OpenLayers.Util.extend({}, this.schemaLocations);
        e.schema && (t[e.featurePrefix] = e.schema);
        var i, n = [];
        for (var s in t) (i = this.namespaces[s]) && n.push(i + " " + t[s]);
        return n.join(" ") || void 0;
    },
    "setFilterProperty": function(e) {
        if (e.filters) for (var t = 0, i = e.filters.length; t < i; ++t) OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this, e.filters[t]); else e instanceof OpenLayers.Filter.Spatial && !e.property && (e.property = this.geometryName);
    },
    "CLASS_NAME": "OpenLayers.Format.WFST.v1"
}), OpenLayers.Filter.Logical = OpenLayers.Class(OpenLayers.Filter, {
    "filters": null,
    "type": null,
    "initialize": function(e) {
        this.filters = [], OpenLayers.Filter.prototype.initialize.apply(this, [ e ]);
    },
    "destroy": function() {
        this.filters = null, OpenLayers.Filter.prototype.destroy.apply(this);
    },
    "evaluate": function(e) {
        var t, i;
        switch (this.type) {
          case OpenLayers.Filter.Logical.AND:
            for (t = 0, i = this.filters.length; t < i; t++) if (0 == this.filters[t].evaluate(e)) return !1;
            return !0;

          case OpenLayers.Filter.Logical.OR:
            for (t = 0, i = this.filters.length; t < i; t++) if (1 == this.filters[t].evaluate(e)) return !0;
            return !1;

          case OpenLayers.Filter.Logical.NOT:
            return !this.filters[0].evaluate(e);
        }
    },
    "clone": function() {
        for (var e = [], t = 0, i = this.filters.length; t < i; ++t) e.push(this.filters[t].clone());
        return new OpenLayers.Filter.Logical({
            "type": this.type,
            "filters": e
        });
    },
    "CLASS_NAME": "OpenLayers.Filter.Logical"
}), OpenLayers.Filter.Logical.AND = "&&", OpenLayers.Filter.Logical.OR = "||", OpenLayers.Filter.Logical.NOT = "!", 
OpenLayers.Filter.Comparison = OpenLayers.Class(OpenLayers.Filter, {
    "type": null,
    "property": null,
    "value": null,
    "matchCase": !0,
    "lowerBoundary": null,
    "upperBoundary": null,
    "initialize": function(e) {
        OpenLayers.Filter.prototype.initialize.apply(this, [ e ]), this.type === OpenLayers.Filter.Comparison.LIKE && void 0 === e.matchCase && (this.matchCase = null);
    },
    "evaluate": function(e) {
        e instanceof OpenLayers.Feature.Vector && (e = e.attributes);
        var t = !1, i = e[this.property];
        if (void 0 === i) return !1;
        var n;
        switch (this.type) {
          case OpenLayers.Filter.Comparison.EQUAL_TO:
            n = this.value, t = this.matchCase || "string" != typeof i || "string" != typeof n ? i == n : i.toUpperCase() == n.toUpperCase();
            break;

          case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:
            n = this.value, t = this.matchCase || "string" != typeof i || "string" != typeof n ? i != n : i.toUpperCase() != n.toUpperCase();
            break;

          case OpenLayers.Filter.Comparison.LESS_THAN:
            t = i < this.value;
            break;

          case OpenLayers.Filter.Comparison.GREATER_THAN:
            t = i > this.value;
            break;

          case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:
            t = i <= this.value;
            break;

          case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:
            t = i >= this.value;
            break;

          case OpenLayers.Filter.Comparison.BETWEEN:
            t = i >= this.lowerBoundary && i <= this.upperBoundary;
            break;

          case OpenLayers.Filter.Comparison.LIKE:
            t = new RegExp(this.value, "gi").test(i);
            break;

          case OpenLayers.Filter.Comparison.IS_NULL:
            t = null === i;
        }
        return t;
    },
    "value2regex": function(e, t, i) {
        if ("." == e) throw new Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");
        return e = e || "*", t = t || ".", i = i || "!", this.value = this.value.replace(new RegExp("\\" + i + "(.|$)", "g"), "\\$1"), 
        this.value = this.value.replace(new RegExp("\\" + t, "g"), "."), this.value = this.value.replace(new RegExp("\\" + e, "g"), ".*"), 
        this.value = this.value.replace(new RegExp("\\\\.\\*", "g"), "\\" + e), this.value = this.value.replace(new RegExp("\\\\\\.", "g"), "\\" + t), 
        this.value;
    },
    "regex2value": function() {
        var e = this.value;
        return e = e.replace(/!/g, "!!"), e = e.replace(/(\\)?\\\./g, function(e, t) {
            return t ? e : "!.";
        }), e = e.replace(/(\\)?\\\*/g, function(e, t) {
            return t ? e : "!*";
        }), e = e.replace(/\\\\/g, "\\"), e = e.replace(/\.\*/g, "*");
    },
    "clone": function() {
        return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison(), this);
    },
    "CLASS_NAME": "OpenLayers.Filter.Comparison"
}), OpenLayers.Filter.Comparison.EQUAL_TO = "==", OpenLayers.Filter.Comparison.NOT_EQUAL_TO = "!=", 
OpenLayers.Filter.Comparison.LESS_THAN = "<", OpenLayers.Filter.Comparison.GREATER_THAN = ">", 
OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO = "<=", OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO = ">=", 
OpenLayers.Filter.Comparison.BETWEEN = "..", OpenLayers.Filter.Comparison.LIKE = "~", 
OpenLayers.Filter.Comparison.IS_NULL = "NULL", OpenLayers.Format.Filter = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "CLASS_NAME": "OpenLayers.Format.Filter"
}), OpenLayers.Filter.Function = OpenLayers.Class(OpenLayers.Filter, {
    "name": null,
    "params": null,
    "CLASS_NAME": "OpenLayers.Filter.Function"
}), OpenLayers.Date = {
    "dateRegEx": /^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,
    "toISOString": "toISOString" in Date.prototype ? function(e) {
        return e.toISOString();
    } : function(e) {
        return isNaN(e.getTime()) ? "Invalid Date" : e.getUTCFullYear() + "-" + OpenLayers.Number.zeroPad(e.getUTCMonth() + 1, 2) + "-" + OpenLayers.Number.zeroPad(e.getUTCDate(), 2) + "T" + OpenLayers.Number.zeroPad(e.getUTCHours(), 2) + ":" + OpenLayers.Number.zeroPad(e.getUTCMinutes(), 2) + ":" + OpenLayers.Number.zeroPad(e.getUTCSeconds(), 2) + "." + OpenLayers.Number.zeroPad(e.getUTCMilliseconds(), 3) + "Z";
    },
    "parse": function(e) {
        var t, i = e.match(this.dateRegEx);
        if (i && (i[1] || i[7])) {
            var n = parseInt(i[1], 10) || 0, s = parseInt(i[2], 10) - 1 || 0, r = parseInt(i[3], 10) || 1;
            t = new Date(Date.UTC(n, s, r));
            var o = i[7];
            if (o) {
                var a = parseInt(i[4], 10), l = parseInt(i[5], 10), h = parseFloat(i[6]), c = 0 | h, u = Math.round(1e3 * (h - c));
                if (t.setUTCHours(a, l, c, u), "Z" !== o) {
                    var p = -1e3 * (60 * parseInt(o, 10) * 60 + 60 * (parseInt(i[8], 10) || 0));
                    t = new Date(t.getTime() + p);
                }
            }
        } else t = new Date("invalid");
        return t;
    }
}, OpenLayers.Format.Filter.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ogc": "http://www.opengis.net/ogc",
        "gml": "http://www.opengis.net/gml",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "defaultPrefix": "ogc",
    "schemaLocation": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        var t = {};
        return this.readers.ogc.Filter.apply(this, [ e, t ]), t.filter;
    },
    "readers": {
        "ogc": {
            "_expression": function(e) {
                for (var t, i = "", n = e.firstChild; n; n = n.nextSibling) switch (n.nodeType) {
                  case 1:
                    (t = this.readNode(n)).property ? i += "${" + t.property + "}" : void 0 !== t.value && (i += t.value);
                    break;

                  case 3:
                  case 4:
                    i += n.nodeValue;
                }
                return i;
            },
            "Filter": function(e, t) {
                var i = {
                    "fids": [],
                    "filters": []
                };
                this.readChildNodes(e, i), i.fids.length > 0 ? t.filter = new OpenLayers.Filter.FeatureId({
                    "fids": i.fids
                }) : i.filters.length > 0 && (t.filter = i.filters[0]);
            },
            "FeatureId": function(e, t) {
                var i = e.getAttribute("fid");
                i && t.fids.push(i);
            },
            "And": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.AND
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Or": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.OR
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Not": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.NOT
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLessThan": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LESS_THAN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsGreaterThan": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.GREATER_THAN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLessThanOrEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsGreaterThanOrEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsBetween": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.BETWEEN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Literal": function(e, t) {
                t.value = OpenLayers.String.numericIf(this.getChildValue(e), !0);
            },
            "PropertyName": function(e, t) {
                t.property = this.getChildValue(e);
            },
            "LowerBoundary": function(e, t) {
                t.lowerBoundary = OpenLayers.String.numericIf(this.readers.ogc._expression.call(this, e), !0);
            },
            "UpperBoundary": function(e, t) {
                t.upperBoundary = OpenLayers.String.numericIf(this.readers.ogc._expression.call(this, e), !0);
            },
            "Intersects": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.INTERSECTS);
            },
            "Within": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.WITHIN);
            },
            "Contains": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.CONTAINS);
            },
            "DWithin": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.DWITHIN);
            },
            "Distance": function(e, t) {
                t.distance = parseInt(this.getChildValue(e)), t.distanceUnits = e.getAttribute("units");
            },
            "Function": function(e, t) {},
            "PropertyIsNull": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.IS_NULL
                });
                this.readChildNodes(e, i), t.filters.push(i);
            }
        }
    },
    "readSpatial": function(e, t, i) {
        var n = new OpenLayers.Filter.Spatial({
            "type": i
        });
        this.readChildNodes(e, n), n.value = n.components[0], delete n.components, t.filters.push(n);
    },
    "encodeLiteral": function(e) {
        return e instanceof Date && (e = OpenLayers.Date.toISOString(e)), e;
    },
    "writeOgcExpression": function(e, t) {
        return e instanceof OpenLayers.Filter.Function ? this.writeNode("Function", e, t) : this.writeNode("Literal", e, t), 
        t;
    },
    "write": function(e) {
        return this.writers.ogc.Filter.apply(this, [ e ]);
    },
    "writers": {
        "ogc": {
            "Filter": function(e) {
                var t = this.createElementNSPlus("ogc:Filter");
                return this.writeNode(this.getFilterType(e), e, t), t;
            },
            "_featureIds": function(e) {
                for (var t = this.createDocumentFragment(), i = 0, n = e.fids.length; i < n; ++i) this.writeNode("ogc:FeatureId", e.fids[i], t);
                return t;
            },
            "FeatureId": function(e) {
                return this.createElementNSPlus("ogc:FeatureId", {
                    "attributes": {
                        "fid": e
                    }
                });
            },
            "And": function(e) {
                for (var t, i = this.createElementNSPlus("ogc:And"), n = 0, s = e.filters.length; n < s; ++n) t = e.filters[n], 
                this.writeNode(this.getFilterType(t), t, i);
                return i;
            },
            "Or": function(e) {
                for (var t, i = this.createElementNSPlus("ogc:Or"), n = 0, s = e.filters.length; n < s; ++n) t = e.filters[n], 
                this.writeNode(this.getFilterType(t), t, i);
                return i;
            },
            "Not": function(e) {
                var t = this.createElementNSPlus("ogc:Not"), i = e.filters[0];
                return this.writeNode(this.getFilterType(i), i, t), t;
            },
            "PropertyIsLessThan": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsLessThan");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsGreaterThan": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsGreaterThan");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLessThanOrEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsGreaterThanOrEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsBetween": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsBetween");
                return this.writeNode("PropertyName", e, t), this.writeNode("LowerBoundary", e, t), 
                this.writeNode("UpperBoundary", e, t), t;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("ogc:PropertyName", {
                    "value": e.property
                });
            },
            "Literal": function(e) {
                var t = this.encodeLiteral || OpenLayers.Format.Filter.v1.prototype.encodeLiteral;
                return this.createElementNSPlus("ogc:Literal", {
                    "value": t(e)
                });
            },
            "LowerBoundary": function(e) {
                var t = this.createElementNSPlus("ogc:LowerBoundary");
                return this.writeOgcExpression(e.lowerBoundary, t), t;
            },
            "UpperBoundary": function(e) {
                var t = this.createElementNSPlus("ogc:UpperBoundary");
                return this.writeNode("Literal", e.upperBoundary, t), t;
            },
            "INTERSECTS": function(e) {
                return this.writeSpatial(e, "Intersects");
            },
            "WITHIN": function(e) {
                return this.writeSpatial(e, "Within");
            },
            "CONTAINS": function(e) {
                return this.writeSpatial(e, "Contains");
            },
            "DWITHIN": function(e) {
                var t = this.writeSpatial(e, "DWithin");
                return this.writeNode("Distance", e, t), t;
            },
            "Distance": function(e) {
                return this.createElementNSPlus("ogc:Distance", {
                    "attributes": {
                        "units": e.distanceUnits
                    },
                    "value": e.distance
                });
            },
            "Function": function(e) {
                for (var t = this.createElementNSPlus("ogc:Function", {
                    "attributes": {
                        "name": e.name
                    }
                }), i = e.params, n = 0, s = i.length; n < s; n++) this.writeOgcExpression(i[n], t);
                return t;
            },
            "PropertyIsNull": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsNull");
                return this.writeNode("PropertyName", e, t), t;
            }
        }
    },
    "getFilterType": function(e) {
        var t = this.filterMap[e.type];
        if (!t) throw "Filter writing not supported for rule type: " + e.type;
        return t;
    },
    "filterMap": {
        "&&": "And",
        "||": "Or",
        "!": "Not",
        "==": "PropertyIsEqualTo",
        "!=": "PropertyIsNotEqualTo",
        "<": "PropertyIsLessThan",
        ">": "PropertyIsGreaterThan",
        "<=": "PropertyIsLessThanOrEqualTo",
        ">=": "PropertyIsGreaterThanOrEqualTo",
        "..": "PropertyIsBetween",
        "~": "PropertyIsLike",
        "NULL": "PropertyIsNull",
        "BBOX": "BBOX",
        "DWITHIN": "DWITHIN",
        "WITHIN": "WITHIN",
        "CONTAINS": "CONTAINS",
        "INTERSECTS": "INTERSECTS",
        "FID": "_featureIds"
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v1"
}), OpenLayers.Format.GML = OpenLayers.Class(OpenLayers.Format.XML, {
    "featureNS": "http://mapserver.gis.umn.edu/mapserver",
    "featurePrefix": "feature",
    "featureName": "featureMember",
    "layerName": "features",
    "geometryName": "geometry",
    "collectionName": "FeatureCollection",
    "gmlns": "http://www.opengis.net/gml",
    "extractAttributes": !0,
    "xy": !0,
    "initialize": function(e) {
        this.regExes = {
            "trimSpace": /^\s*|\s*$/g,
            "removeSpace": /\s*/g,
            "splitSpace": /\s+/,
            "trimComma": /\s*,\s*/g
        }, OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        for (var t = this.getElementsByTagNameNS(e.documentElement, this.gmlns, this.featureName), i = [], n = 0; n < t.length; n++) {
            var s = this.parseFeature(t[n]);
            s && i.push(s);
        }
        return i;
    },
    "parseFeature": function(e) {
        for (var t, i, n, s, r = [ "MultiPolygon", "Polygon", "MultiLineString", "LineString", "MultiPoint", "Point", "Envelope" ], o = 0; o < r.length; ++o) if (t = r[o], 
        (i = this.getElementsByTagNameNS(e, this.gmlns, t)).length > 0) {
            if (!(s = this.parseGeometry[t.toLowerCase()])) throw new TypeError("Unsupported geometry type: " + t);
            n = s.apply(this, [ i[0] ]), this.internalProjection && this.externalProjection && n.transform(this.externalProjection, this.internalProjection);
            break;
        }
        var a, l = this.getElementsByTagNameNS(e, this.gmlns, "Box");
        for (o = 0; o < l.length; ++o) {
            var h = l[o], c = this.parseGeometry.box.apply(this, [ h ]), u = h.parentNode;
            "boundedBy" === (u.localName || u.nodeName.split(":").pop()) ? a = c : n = c.toGeometry();
        }
        var p;
        this.extractAttributes && (p = this.parseAttributes(e));
        var d = new OpenLayers.Feature.Vector(n, p);
        d.bounds = a;
        var f = this.getFirstElementChild(e);
        d.gml = {
            "featureType": f.nodeName.split(":")[1],
            "featureNS": f.namespaceURI,
            "featureNSPrefix": f.prefix
        }, d.type = d.gml.featureType;
        for (var m, g = e.firstChild; g && (1 != g.nodeType || !(m = g.getAttribute("fid") || g.getAttribute("id"))); ) g = g.nextSibling;
        return d.fid = m, d;
    },
    "parseGeometry": {
        "point": function(e) {
            var t, i = [];
            if ((t = this.getElementsByTagNameNS(e, this.gmlns, "pos")).length > 0 && (i = t[0].firstChild.nodeValue.replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace)), 
            0 == i.length && (t = this.getElementsByTagNameNS(e, this.gmlns, "coordinates")).length > 0 && (i = t[0].firstChild.nodeValue.replace(this.regExes.removeSpace, "").split(",")), 
            0 == i.length && (t = this.getElementsByTagNameNS(e, this.gmlns, "coord")).length > 0) {
                var n = this.getElementsByTagNameNS(t[0], this.gmlns, "X"), s = this.getElementsByTagNameNS(t[0], this.gmlns, "Y");
                n.length > 0 && s.length > 0 && (i = [ n[0].firstChild.nodeValue, s[0].firstChild.nodeValue ]);
            }
            return 2 == i.length && (i[2] = null), this.xy ? new OpenLayers.Geometry.Point(i[0], i[1], i[2]) : new OpenLayers.Geometry.Point(i[1], i[0], i[2]);
        },
        "multipoint": function(e) {
            var t = this.getElementsByTagNameNS(e, this.gmlns, "Point"), i = [];
            if (t.length > 0) for (var n, s = 0; s < t.length; ++s) (n = this.parseGeometry.point.apply(this, [ t[s] ])) && i.push(n);
            return new OpenLayers.Geometry.MultiPoint(i);
        },
        "linestring": function(e, t) {
            var i, n, s = [], r = [];
            if ((i = this.getElementsByTagNameNS(e, this.gmlns, "posList")).length > 0) {
                s = (n = (n = this.getChildValue(i[0])).replace(this.regExes.trimSpace, "")).split(this.regExes.splitSpace);
                for (var o, a, l, h, c = parseInt(i[0].getAttribute("dimension")), u = 0; u < s.length / c; ++u) a = s[o = u * c], 
                l = s[o + 1], h = 2 == c ? null : s[o + 2], this.xy ? r.push(new OpenLayers.Geometry.Point(a, l, h)) : r.push(new OpenLayers.Geometry.Point(l, a, h));
            }
            if (0 == s.length && (i = this.getElementsByTagNameNS(e, this.gmlns, "coordinates")).length > 0) for (var p = (n = (n = (n = this.getChildValue(i[0])).replace(this.regExes.trimSpace, "")).replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace), u = 0; u < p.length; ++u) 2 == (s = p[u].split(",")).length && (s[2] = null), 
            this.xy ? r.push(new OpenLayers.Geometry.Point(s[0], s[1], s[2])) : r.push(new OpenLayers.Geometry.Point(s[1], s[0], s[2]));
            var d = null;
            return 0 != r.length && (d = t ? new OpenLayers.Geometry.LinearRing(r) : new OpenLayers.Geometry.LineString(r)), 
            d;
        },
        "multilinestring": function(e) {
            var t = this.getElementsByTagNameNS(e, this.gmlns, "LineString"), i = [];
            if (t.length > 0) for (var n, s = 0; s < t.length; ++s) (n = this.parseGeometry.linestring.apply(this, [ t[s] ])) && i.push(n);
            return new OpenLayers.Geometry.MultiLineString(i);
        },
        "polygon": function(e) {
            var t = this.getElementsByTagNameNS(e, this.gmlns, "LinearRing"), i = [];
            if (t.length > 0) for (var n, s = 0; s < t.length; ++s) (n = this.parseGeometry.linestring.apply(this, [ t[s], !0 ])) && i.push(n);
            return new OpenLayers.Geometry.Polygon(i);
        },
        "multipolygon": function(e) {
            var t = this.getElementsByTagNameNS(e, this.gmlns, "Polygon"), i = [];
            if (t.length > 0) for (var n, s = 0; s < t.length; ++s) (n = this.parseGeometry.polygon.apply(this, [ t[s] ])) && i.push(n);
            return new OpenLayers.Geometry.MultiPolygon(i);
        },
        "envelope": function(e) {
            var t, i = [], n = this.getElementsByTagNameNS(e, this.gmlns, "lowerCorner");
            if (n.length > 0) {
                o = [];
                if (n.length > 0 && (o = n[0].firstChild.nodeValue.replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace)), 
                2 == o.length && (o[2] = null), this.xy) s = new OpenLayers.Geometry.Point(o[0], o[1], o[2]); else var s = new OpenLayers.Geometry.Point(o[1], o[0], o[2]);
            }
            var r = this.getElementsByTagNameNS(e, this.gmlns, "upperCorner");
            if (r.length > 0) {
                var o = [];
                if (r.length > 0 && (o = r[0].firstChild.nodeValue.replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace)), 
                2 == o.length && (o[2] = null), this.xy) a = new OpenLayers.Geometry.Point(o[0], o[1], o[2]); else var a = new OpenLayers.Geometry.Point(o[1], o[0], o[2]);
            }
            if (s && a) {
                i.push(new OpenLayers.Geometry.Point(s.x, s.y)), i.push(new OpenLayers.Geometry.Point(a.x, s.y)), 
                i.push(new OpenLayers.Geometry.Point(a.x, a.y)), i.push(new OpenLayers.Geometry.Point(s.x, a.y)), 
                i.push(new OpenLayers.Geometry.Point(s.x, s.y));
                var l = new OpenLayers.Geometry.LinearRing(i);
                t = new OpenLayers.Geometry.Polygon([ l ]);
            }
            return t;
        },
        "box": function(e) {
            var t, i = this.getElementsByTagNameNS(e, this.gmlns, "coordinates"), n = null, s = null;
            if (i.length > 0 && 2 == (t = i[0].firstChild.nodeValue.split(" ")).length && (n = t[0].split(","), 
            s = t[1].split(",")), null !== n && null !== s) return new OpenLayers.Bounds(parseFloat(n[0]), parseFloat(n[1]), parseFloat(s[0]), parseFloat(s[1]));
        }
    },
    "parseAttributes": function(e) {
        for (var t, i, n, s, r, o, a, l = {}, h = e.firstChild; h; ) {
            if (1 == h.nodeType) {
                for (t = h.childNodes, i = 0; i < t.length; ++i) 1 == (n = t[i]).nodeType && (1 == (s = n.childNodes).length ? 3 != (r = s[0]).nodeType && 4 != r.nodeType || (o = n.prefix ? n.nodeName.split(":")[1] : n.nodeName, 
                a = r.nodeValue.replace(this.regExes.trimSpace, ""), l[o] = a) : l[n.nodeName.split(":").pop()] = null);
                break;
            }
            h = h.nextSibling;
        }
        return l;
    },
    "write": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = this.createElementNS("http://www.opengis.net/wfs", "wfs:" + this.collectionName), i = 0; i < e.length; i++) t.appendChild(this.createFeatureXML(e[i]));
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFeatureXML": function(e) {
        var t = e.geometry, i = this.buildGeometryNode(t), n = this.createElementNS(this.featureNS, this.featurePrefix + ":" + this.geometryName);
        n.appendChild(i);
        var s = this.createElementNS(this.gmlns, "gml:" + this.featureName), r = this.createElementNS(this.featureNS, this.featurePrefix + ":" + this.layerName), o = e.fid || e.id;
        r.setAttribute("fid", o), r.appendChild(n);
        for (var a in e.attributes) {
            var l = this.createTextNode(e.attributes[a]), h = a.substring(a.lastIndexOf(":") + 1), c = this.createElementNS(this.featureNS, this.featurePrefix + ":" + h);
            c.appendChild(l), r.appendChild(c);
        }
        return s.appendChild(r), s;
    },
    "buildGeometryNode": function(e) {
        this.externalProjection && this.internalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection);
        var t = e.CLASS_NAME, i = t.substring(t.lastIndexOf(".") + 1);
        return this.buildGeometry[i.toLowerCase()].apply(this, [ e ]);
    },
    "buildGeometry": {
        "point": function(e) {
            var t = this.createElementNS(this.gmlns, "gml:Point");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "multipoint": function(e) {
            for (var t, i, n = this.createElementNS(this.gmlns, "gml:MultiPoint"), s = e.components, r = 0; r < s.length; r++) t = this.createElementNS(this.gmlns, "gml:pointMember"), 
            i = this.buildGeometry.point.apply(this, [ s[r] ]), t.appendChild(i), n.appendChild(t);
            return n;
        },
        "linestring": function(e) {
            var t = this.createElementNS(this.gmlns, "gml:LineString");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "multilinestring": function(e) {
            for (var t, i, n = this.createElementNS(this.gmlns, "gml:MultiLineString"), s = e.components, r = 0; r < s.length; ++r) t = this.createElementNS(this.gmlns, "gml:lineStringMember"), 
            i = this.buildGeometry.linestring.apply(this, [ s[r] ]), t.appendChild(i), n.appendChild(t);
            return n;
        },
        "linearring": function(e) {
            var t = this.createElementNS(this.gmlns, "gml:LinearRing");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "polygon": function(e) {
            for (var t, i, n, s = this.createElementNS(this.gmlns, "gml:Polygon"), r = e.components, o = 0; o < r.length; ++o) n = 0 == o ? "outerBoundaryIs" : "innerBoundaryIs", 
            t = this.createElementNS(this.gmlns, "gml:" + n), i = this.buildGeometry.linearring.apply(this, [ r[o] ]), 
            t.appendChild(i), s.appendChild(t);
            return s;
        },
        "multipolygon": function(e) {
            for (var t, i, n = this.createElementNS(this.gmlns, "gml:MultiPolygon"), s = e.components, r = 0; r < s.length; ++r) t = this.createElementNS(this.gmlns, "gml:polygonMember"), 
            i = this.buildGeometry.polygon.apply(this, [ s[r] ]), t.appendChild(i), n.appendChild(t);
            return n;
        },
        "bounds": function(e) {
            var t = this.createElementNS(this.gmlns, "gml:Box");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        }
    },
    "buildCoordinatesNode": function(e) {
        var t = this.createElementNS(this.gmlns, "gml:coordinates");
        t.setAttribute("decimal", "."), t.setAttribute("cs", ","), t.setAttribute("ts", " ");
        var i = [];
        if (e instanceof OpenLayers.Bounds) i.push(e.left + "," + e.bottom), i.push(e.right + "," + e.top); else for (var n = e.components ? e.components : [ e ], s = 0; s < n.length; s++) i.push(n[s].x + "," + n[s].y);
        var r = this.createTextNode(i.join(" "));
        return t.appendChild(r), t;
    },
    "CLASS_NAME": "OpenLayers.Format.GML"
}), OpenLayers.Format.GML || (OpenLayers.Format.GML = {}), OpenLayers.Format.GML.Base = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "gml": "http://www.opengis.net/gml",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "wfs": "http://www.opengis.net/wfs"
    },
    "defaultPrefix": "gml",
    "schemaLocation": null,
    "featureType": null,
    "featureNS": null,
    "featurePrefix": "feature",
    "geometryName": "geometry",
    "extractAttributes": !0,
    "srsName": null,
    "xy": !0,
    "geometryTypes": null,
    "singleFeatureType": null,
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g,
        "featureMember": /^(.*:)?featureMembers?$/
    },
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]), this.setGeometryTypes(), 
        e && e.featureNS && this.setNamespace(this.featurePrefix, e.featureNS), this.singleFeatureType = !e || "string" == typeof e.featureType;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = [];
        if (this.readNode(e, {
            "features": t
        }, !0), 0 == t.length) {
            var i = this.getElementsByTagNameNS(e, this.namespaces.gml, "featureMember");
            if (i.length) for (var n = 0, s = i.length; n < s; ++n) this.readNode(i[n], {
                "features": t
            }, !0); else (i = this.getElementsByTagNameNS(e, this.namespaces.gml, "featureMembers")).length && this.readNode(i[0], {
                "features": t
            }, !0);
        }
        return t;
    },
    "readNode": function(e, t, i) {
        return !0 === i && !0 === this.autoConfig && (this.featureType = null, delete this.namespaceAlias[this.featureNS], 
        delete this.namespaces.feature, this.featureNS = null), this.featureNS || e.prefix in this.namespaces || e.parentNode.namespaceURI != this.namespaces.gml || !this.regExes.featureMember.test(e.parentNode.nodeName) || (this.featureType = e.nodeName.split(":").pop(), 
        this.setNamespace("feature", e.namespaceURI), this.featureNS = e.namespaceURI, this.autoConfig = !0), 
        OpenLayers.Format.XML.prototype.readNode.apply(this, [ e, t ]);
    },
    "readers": {
        "gml": {
            "_inherit": function(e, t, i) {},
            "featureMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "featureMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "name": function(e, t) {
                t.name = this.getChildValue(e);
            },
            "boundedBy": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), i.components && i.components.length > 0 && (t.bounds = i.components[0]);
            },
            "Point": function(e, t) {
                var i = {
                    "points": []
                };
                this.readChildNodes(e, i), t.components || (t.components = []), t.components.push(i.points[0]);
            },
            "coordinates": function(e, t) {
                for (var i, n = this.getChildValue(e).replace(this.regExes.trimSpace, ""), s = (n = n.replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace), r = s.length, o = new Array(r), a = 0; a < r; ++a) i = s[a].split(","), 
                this.xy ? o[a] = new OpenLayers.Geometry.Point(i[0], i[1], i[2]) : o[a] = new OpenLayers.Geometry.Point(i[1], i[0], i[2]);
                t.points = o;
            },
            "coord": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.points || (t.points = []), t.points.push(new OpenLayers.Geometry.Point(i.x, i.y, i.z));
            },
            "X": function(e, t) {
                t.x = this.getChildValue(e);
            },
            "Y": function(e, t) {
                t.y = this.getChildValue(e);
            },
            "Z": function(e, t) {
                t.z = this.getChildValue(e);
            },
            "MultiPoint": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.MultiPoint(i.components) ];
            },
            "pointMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "LineString": function(e, t) {
                var i = {};
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components || (t.components = []), 
                t.components.push(new OpenLayers.Geometry.LineString(i.points));
            },
            "MultiLineString": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.MultiLineString(i.components) ];
            },
            "lineStringMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Polygon": function(e, t) {
                var i = {
                    "outer": null,
                    "inner": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), i.inner.unshift(i.outer), 
                t.components || (t.components = []), t.components.push(new OpenLayers.Geometry.Polygon(i.inner));
            },
            "LinearRing": function(e, t) {
                var i = {};
                this.readers.gml._inherit.apply(this, [ e, i ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.LinearRing(i.points) ];
            },
            "MultiPolygon": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.MultiPolygon(i.components) ];
            },
            "polygonMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "GeometryCollection": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components = [ new OpenLayers.Geometry.Collection(i.components) ];
            },
            "geometryMember": function(e, t) {
                this.readChildNodes(e, t);
            }
        },
        "feature": {
            "*": function(e, t) {
                var i, n = e.localName || e.nodeName.split(":").pop();
                t.features ? this.singleFeatureType || -1 === OpenLayers.Util.indexOf(this.featureType, n) ? n === this.featureType && (i = "_typeName") : i = "_typeName" : 0 == e.childNodes.length || 1 == e.childNodes.length && 3 == e.firstChild.nodeType ? this.extractAttributes && (i = "_attribute") : i = "_geometry", 
                i && this.readers.feature[i].apply(this, [ e, t ]);
            },
            "_typeName": function(e, t) {
                var i = {
                    "components": [],
                    "attributes": {}
                };
                this.readChildNodes(e, i), i.name && (i.attributes.name = i.name);
                var n = new OpenLayers.Feature.Vector(i.components[0], i.attributes);
                this.singleFeatureType || (n.type = e.nodeName.split(":").pop(), n.namespace = e.namespaceURI);
                var s = e.getAttribute("fid") || this.getAttributeNS(e, this.namespaces.gml, "id");
                s && (n.fid = s), this.internalProjection && this.externalProjection && n.geometry && n.geometry.transform(this.externalProjection, this.internalProjection), 
                i.bounds && (n.bounds = i.bounds), t.features.push(n);
            },
            "_geometry": function(e, t) {
                this.geometryName || (this.geometryName = e.nodeName.split(":").pop()), this.readChildNodes(e, t);
            },
            "_attribute": function(e, t) {
                var i = e.localName || e.nodeName.split(":").pop(), n = this.getChildValue(e);
                t.attributes[i] = n;
            }
        },
        "wfs": {
            "FeatureCollection": function(e, t) {
                this.readChildNodes(e, t);
            }
        }
    },
    "write": function(e) {
        var t;
        t = OpenLayers.Util.isArray(e) ? "featureMembers" : "featureMember";
        var i = this.writeNode("gml:" + t, e);
        return this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "writers": {
        "gml": {
            "featureMember": function(e) {
                var t = this.createElementNSPlus("gml:featureMember");
                return this.writeNode("feature:_typeName", e, t), t;
            },
            "MultiPoint": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiPoint"), i = e.components || [ e ], n = 0, s = i.length; n < s; ++n) this.writeNode("pointMember", i[n], t);
                return t;
            },
            "pointMember": function(e) {
                var t = this.createElementNSPlus("gml:pointMember");
                return this.writeNode("Point", e, t), t;
            },
            "MultiLineString": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiLineString"), i = e.components || [ e ], n = 0, s = i.length; n < s; ++n) this.writeNode("lineStringMember", i[n], t);
                return t;
            },
            "lineStringMember": function(e) {
                var t = this.createElementNSPlus("gml:lineStringMember");
                return this.writeNode("LineString", e, t), t;
            },
            "MultiPolygon": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiPolygon"), i = e.components || [ e ], n = 0, s = i.length; n < s; ++n) this.writeNode("polygonMember", i[n], t);
                return t;
            },
            "polygonMember": function(e) {
                var t = this.createElementNSPlus("gml:polygonMember");
                return this.writeNode("Polygon", e, t), t;
            },
            "GeometryCollection": function(e) {
                for (var t = this.createElementNSPlus("gml:GeometryCollection"), i = 0, n = e.components.length; i < n; ++i) this.writeNode("geometryMember", e.components[i], t);
                return t;
            },
            "geometryMember": function(e) {
                var t = this.createElementNSPlus("gml:geometryMember"), i = this.writeNode("feature:_geometry", e);
                return t.appendChild(i.firstChild), t;
            }
        },
        "feature": {
            "_typeName": function(e) {
                var t = this.createElementNSPlus(this.featurePrefix + ":" + this.featureType, {
                    "attributes": {
                        "fid": e.fid
                    }
                });
                e.geometry && this.writeNode("feature:_geometry", e.geometry, t);
                for (var i in e.attributes) {
                    var n = e.attributes[i];
                    null != n && this.writeNode("feature:_attribute", {
                        "name": i,
                        "value": n
                    }, t);
                }
                return t;
            },
            "_geometry": function(e) {
                this.externalProjection && this.internalProjection && (e = e.clone().transform(this.internalProjection, this.externalProjection));
                var t = this.createElementNSPlus(this.featurePrefix + ":" + this.geometryName), i = this.geometryTypes[e.CLASS_NAME], n = this.writeNode("gml:" + i, e, t);
                return this.srsName && n.setAttribute("srsName", this.srsName), t;
            },
            "_attribute": function(e) {
                return this.createElementNSPlus(this.featurePrefix + ":" + e.name, {
                    "value": e.value
                });
            }
        },
        "wfs": {
            "FeatureCollection": function(e) {
                for (var t = this.createElementNSPlus("wfs:FeatureCollection"), i = 0, n = e.length; i < n; ++i) this.writeNode("gml:featureMember", e[i], t);
                return t;
            }
        }
    },
    "setGeometryTypes": function() {
        this.geometryTypes = {
            "OpenLayers.Geometry.Point": "Point",
            "OpenLayers.Geometry.MultiPoint": "MultiPoint",
            "OpenLayers.Geometry.LineString": "LineString",
            "OpenLayers.Geometry.MultiLineString": "MultiLineString",
            "OpenLayers.Geometry.Polygon": "Polygon",
            "OpenLayers.Geometry.MultiPolygon": "MultiPolygon",
            "OpenLayers.Geometry.Collection": "GeometryCollection"
        };
    },
    "CLASS_NAME": "OpenLayers.Format.GML.Base"
}), OpenLayers.Format.GML.v3 = OpenLayers.Class(OpenLayers.Format.GML.Base, {
    "schemaLocation": "http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",
    "curve": !1,
    "multiCurve": !0,
    "surface": !1,
    "multiSurface": !0,
    "initialize": function(e) {
        OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "gml": OpenLayers.Util.applyDefaults({
            "_inherit": function(e, t, i) {
                var n = parseInt(e.getAttribute("srsDimension"), 10) || i && i.srsDimension;
                n && (t.srsDimension = n);
            },
            "featureMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Curve": function(e, t) {
                var i = {
                    "points": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), t.components || (t.components = []), 
                t.components.push(new OpenLayers.Geometry.LineString(i.points));
            },
            "segments": function(e, t) {
                this.readChildNodes(e, t);
            },
            "LineStringSegment": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), i.points && Array.prototype.push.apply(t.points, i.points);
            },
            "pos": function(e, t) {
                var i, n = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace);
                i = this.xy ? new OpenLayers.Geometry.Point(n[0], n[1], n[2]) : new OpenLayers.Geometry.Point(n[1], n[0], n[2]), 
                t.points || (t.points = []), t.points.push(i);
            },
            "posList": function(e, t) {
                for (var i, n, s, r = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(this.regExes.splitSpace), o = t.srsDimension || parseInt(e.getAttribute("srsDimension") || e.getAttribute("dimension"), 10) || 2, a = r.length / o, l = new Array(a), h = 0, c = r.length; h < c; h += o) i = r[h], 
                n = r[h + 1], s = 2 == o ? void 0 : r[h + 2], this.xy ? l[h / o] = new OpenLayers.Geometry.Point(i, n, s) : l[h / o] = new OpenLayers.Geometry.Point(n, i, s);
                t.points = l;
            },
            "Surface": function(e, t) {
                this.readChildNodes(e, t);
            },
            "patches": function(e, t) {
                this.readChildNodes(e, t);
            },
            "PolygonPatch": function(e, t) {
                this.readers.gml.Polygon.apply(this, [ e, t ]);
            },
            "exterior": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.outer = i.components[0];
            },
            "interior": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.inner.push(i.components[0]);
            },
            "MultiCurve": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), i.components.length > 0 && (t.components = [ new OpenLayers.Geometry.MultiLineString(i.components) ]);
            },
            "curveMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "MultiSurface": function(e, t) {
                var i = {
                    "components": []
                };
                this.readers.gml._inherit.apply(this, [ e, i, t ]), this.readChildNodes(e, i), i.components.length > 0 && (t.components = [ new OpenLayers.Geometry.MultiPolygon(i.components) ]);
            },
            "surfaceMember": function(e, t) {
                this.readChildNodes(e, t);
            },
            "surfaceMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "pointMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "lineStringMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "polygonMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "geometryMembers": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Envelope": function(e, t) {
                var i = {
                    "points": new Array(2)
                };
                this.readChildNodes(e, i), t.components || (t.components = []);
                var n = i.points[0], s = i.points[1];
                t.components.push(new OpenLayers.Bounds(n.x, n.y, s.x, s.y));
            },
            "lowerCorner": function(e, t) {
                var i = {};
                this.readers.gml.pos.apply(this, [ e, i ]), t.points[0] = i.points[0];
            },
            "upperCorner": function(e, t) {
                var i = {};
                this.readers.gml.pos.apply(this, [ e, i ]), t.points[1] = i.points[0];
            }
        }, OpenLayers.Format.GML.Base.prototype.readers.gml),
        "feature": OpenLayers.Format.GML.Base.prototype.readers.feature,
        "wfs": OpenLayers.Format.GML.Base.prototype.readers.wfs
    },
    "write": function(e) {
        var t;
        t = OpenLayers.Util.isArray(e) ? "featureMembers" : "featureMember";
        var i = this.writeNode("gml:" + t, e);
        return this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "writers": {
        "gml": OpenLayers.Util.applyDefaults({
            "featureMembers": function(e) {
                for (var t = this.createElementNSPlus("gml:featureMembers"), i = 0, n = e.length; i < n; ++i) this.writeNode("feature:_typeName", e[i], t);
                return t;
            },
            "Point": function(e) {
                var t = this.createElementNSPlus("gml:Point");
                return this.writeNode("pos", e, t), t;
            },
            "pos": function(e) {
                var t = this.xy ? e.x + " " + e.y : e.y + " " + e.x;
                return this.createElementNSPlus("gml:pos", {
                    "value": t
                });
            },
            "LineString": function(e) {
                var t = this.createElementNSPlus("gml:LineString");
                return this.writeNode("posList", e.components, t), t;
            },
            "Curve": function(e) {
                var t = this.createElementNSPlus("gml:Curve");
                return this.writeNode("segments", e, t), t;
            },
            "segments": function(e) {
                var t = this.createElementNSPlus("gml:segments");
                return this.writeNode("LineStringSegment", e, t), t;
            },
            "LineStringSegment": function(e) {
                var t = this.createElementNSPlus("gml:LineStringSegment");
                return this.writeNode("posList", e.components, t), t;
            },
            "posList": function(e) {
                for (var t, i = e.length, n = new Array(i), s = 0; s < i; ++s) t = e[s], this.xy ? n[s] = t.x + " " + t.y : n[s] = t.y + " " + t.x;
                return this.createElementNSPlus("gml:posList", {
                    "value": n.join(" ")
                });
            },
            "Surface": function(e) {
                var t = this.createElementNSPlus("gml:Surface");
                return this.writeNode("patches", e, t), t;
            },
            "patches": function(e) {
                var t = this.createElementNSPlus("gml:patches");
                return this.writeNode("PolygonPatch", e, t), t;
            },
            "PolygonPatch": function(e) {
                var t = this.createElementNSPlus("gml:PolygonPatch", {
                    "attributes": {
                        "interpolation": "planar"
                    }
                });
                this.writeNode("exterior", e.components[0], t);
                for (var i = 1, n = e.components.length; i < n; ++i) this.writeNode("interior", e.components[i], t);
                return t;
            },
            "Polygon": function(e) {
                var t = this.createElementNSPlus("gml:Polygon");
                this.writeNode("exterior", e.components[0], t);
                for (var i = 1, n = e.components.length; i < n; ++i) this.writeNode("interior", e.components[i], t);
                return t;
            },
            "exterior": function(e) {
                var t = this.createElementNSPlus("gml:exterior");
                return this.writeNode("LinearRing", e, t), t;
            },
            "interior": function(e) {
                var t = this.createElementNSPlus("gml:interior");
                return this.writeNode("LinearRing", e, t), t;
            },
            "LinearRing": function(e) {
                var t = this.createElementNSPlus("gml:LinearRing");
                return this.writeNode("posList", e.components, t), t;
            },
            "MultiCurve": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiCurve"), i = e.components || [ e ], n = 0, s = i.length; n < s; ++n) this.writeNode("curveMember", i[n], t);
                return t;
            },
            "curveMember": function(e) {
                var t = this.createElementNSPlus("gml:curveMember");
                return this.curve ? this.writeNode("Curve", e, t) : this.writeNode("LineString", e, t), 
                t;
            },
            "MultiSurface": function(e) {
                for (var t = this.createElementNSPlus("gml:MultiSurface"), i = e.components || [ e ], n = 0, s = i.length; n < s; ++n) this.writeNode("surfaceMember", i[n], t);
                return t;
            },
            "surfaceMember": function(e) {
                var t = this.createElementNSPlus("gml:surfaceMember");
                return this.surface ? this.writeNode("Surface", e, t) : this.writeNode("Polygon", e, t), 
                t;
            },
            "Envelope": function(e) {
                var t = this.createElementNSPlus("gml:Envelope");
                return this.writeNode("lowerCorner", e, t), this.writeNode("upperCorner", e, t), 
                this.srsName && t.setAttribute("srsName", this.srsName), t;
            },
            "lowerCorner": function(e) {
                var t = this.xy ? e.left + " " + e.bottom : e.bottom + " " + e.left;
                return this.createElementNSPlus("gml:lowerCorner", {
                    "value": t
                });
            },
            "upperCorner": function(e) {
                var t = this.xy ? e.right + " " + e.top : e.top + " " + e.right;
                return this.createElementNSPlus("gml:upperCorner", {
                    "value": t
                });
            }
        }, OpenLayers.Format.GML.Base.prototype.writers.gml),
        "feature": OpenLayers.Format.GML.Base.prototype.writers.feature,
        "wfs": OpenLayers.Format.GML.Base.prototype.writers.wfs
    },
    "setGeometryTypes": function() {
        this.geometryTypes = {
            "OpenLayers.Geometry.Point": "Point",
            "OpenLayers.Geometry.MultiPoint": "MultiPoint",
            "OpenLayers.Geometry.LineString": !0 === this.curve ? "Curve" : "LineString",
            "OpenLayers.Geometry.MultiLineString": !1 === this.multiCurve ? "MultiLineString" : "MultiCurve",
            "OpenLayers.Geometry.Polygon": !0 === this.surface ? "Surface" : "Polygon",
            "OpenLayers.Geometry.MultiPolygon": !1 === this.multiSurface ? "MultiPolygon" : "MultiSurface",
            "OpenLayers.Geometry.Collection": "GeometryCollection"
        };
    },
    "CLASS_NAME": "OpenLayers.Format.GML.v3"
}), OpenLayers.Format.Filter.v1_1_0 = OpenLayers.Class(OpenLayers.Format.GML.v3, OpenLayers.Format.Filter.v1, {
    "VERSION": "1.1.0",
    "schemaLocation": "http://www.opengis.net/ogc/filter/1.1.0/filter.xsd",
    "initialize": function(e) {
        OpenLayers.Format.GML.v3.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "ogc": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e, t) {
                var i = e.getAttribute("matchCase"), n = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.EQUAL_TO,
                    "matchCase": !("false" === i || "0" === i)
                });
                this.readChildNodes(e, n), t.filters.push(n);
            },
            "PropertyIsNotEqualTo": function(e, t) {
                var i = e.getAttribute("matchCase"), n = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.NOT_EQUAL_TO,
                    "matchCase": !("false" === i || "0" === i)
                });
                this.readChildNodes(e, n), t.filters.push(n);
            },
            "PropertyIsLike": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LIKE
                });
                this.readChildNodes(e, i);
                var n = e.getAttribute("wildCard"), s = e.getAttribute("singleChar"), r = e.getAttribute("escapeChar");
                i.value2regex(n, s, r), t.filters.push(i);
            }
        }, OpenLayers.Format.Filter.v1.prototype.readers.ogc),
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.readers.feature
    },
    "writers": {
        "ogc": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsEqualTo", {
                    "attributes": {
                        "matchCase": e.matchCase
                    }
                });
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsNotEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsNotEqualTo", {
                    "attributes": {
                        "matchCase": e.matchCase
                    }
                });
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLike": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsLike", {
                    "attributes": {
                        "matchCase": e.matchCase,
                        "wildCard": "*",
                        "singleChar": ".",
                        "escapeChar": "!"
                    }
                });
                return this.writeNode("PropertyName", e, t), this.writeNode("Literal", e.regex2value(), t), 
                t;
            },
            "BBOX": function(e) {
                var t = this.createElementNSPlus("ogc:BBOX");
                e.property && this.writeNode("PropertyName", e, t);
                var i = this.writeNode("gml:Envelope", e.value);
                return e.projection && i.setAttribute("srsName", e.projection), t.appendChild(i), 
                t;
            },
            "SortBy": function(e) {
                for (var t = this.createElementNSPlus("ogc:SortBy"), i = 0, n = e.length; i < n; i++) this.writeNode("ogc:SortProperty", e[i], t);
                return t;
            },
            "SortProperty": function(e) {
                var t = this.createElementNSPlus("ogc:SortProperty");
                return this.writeNode("ogc:PropertyName", e, t), this.writeNode("ogc:SortOrder", "DESC" == e.order ? "DESC" : "ASC", t), 
                t;
            },
            "SortOrder": function(e) {
                return this.createElementNSPlus("ogc:SortOrder", {
                    "value": e
                });
            }
        }, OpenLayers.Format.Filter.v1.prototype.writers.ogc),
        "gml": OpenLayers.Format.GML.v3.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.writers.feature
    },
    "writeSpatial": function(e, t) {
        var i = this.createElementNSPlus("ogc:" + t);
        if (this.writeNode("PropertyName", e, i), e.value instanceof OpenLayers.Filter.Function) this.writeNode("Function", e.value, i); else {
            var n;
            n = e.value instanceof OpenLayers.Geometry ? this.writeNode("feature:_geometry", e.value).firstChild : this.writeNode("gml:Envelope", e.value), 
            e.projection && n.setAttribute("srsName", e.projection), i.appendChild(n);
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v1_1_0"
}), OpenLayers.Format.OWSCommon.v1_0_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "readers": {
        "ows": OpenLayers.Util.applyDefaults({
            "ExceptionReport": function(e, t) {
                t.success = !1, t.exceptionReport = {
                    "version": e.getAttribute("version"),
                    "language": e.getAttribute("language"),
                    "exceptions": []
                }, this.readChildNodes(e, t.exceptionReport);
            }
        }, OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)
    },
    "writers": {
        "ows": OpenLayers.Format.OWSCommon.v1.prototype.writers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.OWSCommon.v1_0_0"
}), OpenLayers.Format.WFST.v1_1_0 = OpenLayers.Class(OpenLayers.Format.Filter.v1_1_0, OpenLayers.Format.WFST.v1, {
    "version": "1.1.0",
    "schemaLocations": {
        "wfs": "http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"
    },
    "initialize": function(e) {
        OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this, [ e ]), OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [ e ]);
    },
    "readNode": function(e, t, i) {
        return OpenLayers.Format.GML.v3.prototype.readNode.apply(this, arguments);
    },
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "FeatureCollection": function(e, t) {
                t.numberOfFeatures = parseInt(e.getAttribute("numberOfFeatures")), OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this, arguments);
            },
            "TransactionResponse": function(e, t) {
                t.insertIds = [], t.success = !1, this.readChildNodes(e, t);
            },
            "TransactionSummary": function(e, t) {
                t.success = !0;
            },
            "InsertResults": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Feature": function(e, t) {
                var i = {
                    "fids": []
                };
                this.readChildNodes(e, i), t.insertIds.push(i.fids[0]);
            }
        }, OpenLayers.Format.WFST.v1.prototype.readers.wfs),
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.readers.feature,
        "ogc": OpenLayers.Format.Filter.v1_1_0.prototype.readers.ogc,
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows
    },
    "writers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "GetFeature": function(e) {
                var t = OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this, arguments);
                return e && this.setAttributes(t, {
                    "resultType": e.resultType,
                    "startIndex": e.startIndex,
                    "count": e.count
                }), t;
            },
            "Query": function(e) {
                var t = (e = OpenLayers.Util.extend({
                    "featureNS": this.featureNS,
                    "featurePrefix": this.featurePrefix,
                    "featureType": this.featureType,
                    "srsName": this.srsName
                }, e)).featurePrefix, i = this.createElementNSPlus("wfs:Query", {
                    "attributes": {
                        "typeName": (e.featureNS ? t + ":" : "") + e.featureType,
                        "srsName": e.srsName
                    }
                });
                if (e.featureNS && this.setAttributeNS(i, this.namespaces.xmlns, "xmlns:" + t, e.featureNS), 
                e.propertyNames) for (var n = 0, s = e.propertyNames.length; n < s; n++) this.writeNode("wfs:PropertyName", {
                    "property": e.propertyNames[n]
                }, i);
                return e.filter && (OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this, e.filter), 
                this.writeNode("ogc:Filter", e.filter, i)), i;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("wfs:PropertyName", {
                    "value": e.property
                });
            }
        }, OpenLayers.Format.WFST.v1.prototype.writers.wfs),
        "gml": OpenLayers.Format.GML.v3.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.writers.feature,
        "ogc": OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc
    },
    "CLASS_NAME": "OpenLayers.Format.WFST.v1_1_0"
}), OpenLayers.Format.WPSExecute = OpenLayers.Class(OpenLayers.Format.XML, OpenLayers.Format.Filter.v1_1_0, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "gml": "http://www.opengis.net/gml",
        "wps": "http://www.opengis.net/wps/1.0.0",
        "wfs": "http://www.opengis.net/wfs",
        "ogc": "http://www.opengis.net/ogc",
        "wcs": "http://www.opengis.net/wcs",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",
    "schemaLocationAttr": function(e) {},
    "write": function(e) {
        var t;
        OpenLayers.Format.XML.supportActiveX ? (t = new ActiveXObject("Microsoft.XMLDOM"), 
        this.xmldom = t) : t = document.implementation.createDocument("", "", null);
        var i = this.writeNode("wps:Execute", e, t);
        return this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "writers": {
        "wps": {
            "Execute": function(e) {
                var t = this.createElementNSPlus("wps:Execute", {
                    "attributes": {
                        "version": this.VERSION,
                        "service": "WPS"
                    }
                });
                return this.writeNode("ows:Identifier", e.identifier, t), this.writeNode("wps:DataInputs", e.dataInputs, t), 
                this.writeNode("wps:ResponseForm", e.responseForm, t), t;
            },
            "ResponseForm": function(e) {
                var t = this.createElementNSPlus("wps:ResponseForm", {});
                return e.rawDataOutput && this.writeNode("wps:RawDataOutput", e.rawDataOutput, t), 
                e.responseDocument && this.writeNode("wps:ResponseDocument", e.responseDocument, t), 
                t;
            },
            "ResponseDocument": function(e) {
                var t = this.createElementNSPlus("wps:ResponseDocument", {
                    "attributes": {
                        "storeExecuteResponse": e.storeExecuteResponse,
                        "lineage": e.lineage,
                        "status": e.status
                    }
                });
                if (e.outputs) for (var i = 0, n = e.outputs.length; i < n; i++) this.writeNode("wps:Output", e.outputs[i], t);
                return t;
            },
            "Output": function(e) {
                var t = this.createElementNSPlus("wps:Output", {
                    "attributes": {
                        "asReference": e.asReference,
                        "mimeType": e.mimeType,
                        "encoding": e.encoding,
                        "schema": e.schema
                    }
                });
                return this.writeNode("ows:Identifier", e.identifier, t), this.writeNode("ows:Title", e.title, t), 
                this.writeNode("ows:Abstract", e.abstract, t), t;
            },
            "RawDataOutput": function(e) {
                var t = this.createElementNSPlus("wps:RawDataOutput", {
                    "attributes": {
                        "mimeType": e.mimeType,
                        "encoding": e.encoding,
                        "schema": e.schema
                    }
                });
                return this.writeNode("ows:Identifier", e.identifier, t), t;
            },
            "DataInputs": function(e) {
                for (var t = this.createElementNSPlus("wps:DataInputs", {}), i = 0, n = e.length; i < n; ++i) this.writeNode("wps:Input", e[i], t);
                return t;
            },
            "Input": function(e) {
                var t = this.createElementNSPlus("wps:Input", {});
                return this.writeNode("ows:Identifier", e.identifier, t), e.title && this.writeNode("ows:Title", e.title, t), 
                e.data && this.writeNode("wps:Data", e.data, t), e.reference && this.writeNode("wps:Reference", e.reference, t), 
                e.boundingBoxData && this.writeNode("wps:BoundingBoxData", e.boundingBoxData, t), 
                t;
            },
            "Data": function(e) {
                var t = this.createElementNSPlus("wps:Data", {});
                return e.literalData ? this.writeNode("wps:LiteralData", e.literalData, t) : e.complexData ? this.writeNode("wps:ComplexData", e.complexData, t) : e.boundingBoxData && this.writeNode("ows:BoundingBox", e.boundingBoxData, t), 
                t;
            },
            "LiteralData": function(e) {
                return this.createElementNSPlus("wps:LiteralData", {
                    "attributes": {
                        "uom": e.uom
                    },
                    "value": e.value
                });
            },
            "ComplexData": function(e) {
                var t = this.createElementNSPlus("wps:ComplexData", {
                    "attributes": {
                        "mimeType": e.mimeType,
                        "encoding": e.encoding,
                        "schema": e.schema
                    }
                }), i = e.value;
                return "string" == typeof i ? t.appendChild(this.getXMLDoc().createCDATASection(e.value)) : t.appendChild(i), 
                t;
            },
            "Reference": function(e) {
                var t = this.createElementNSPlus("wps:Reference", {
                    "attributes": {
                        "mimeType": e.mimeType,
                        "xlink:href": e.href,
                        "method": e.method,
                        "encoding": e.encoding,
                        "schema": e.schema
                    }
                });
                return e.body && this.writeNode("wps:Body", e.body, t), t;
            },
            "BoundingBoxData": function(e, t) {
                this.writers.ows.BoundingBox.apply(this, [ e, t, "wps:BoundingBoxData" ]);
            },
            "Body": function(e) {
                var t = this.createElementNSPlus("wps:Body", {});
                return e.wcs ? this.writeNode("wcs:GetCoverage", e.wcs, t) : e.wfs ? (this.featureType = e.wfs.featureType, 
                this.version = e.wfs.version, this.writeNode("wfs:GetFeature", e.wfs, t)) : this.writeNode("wps:Execute", e, t), 
                t;
            }
        },
        "wcs": OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,
        "wfs": OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,
        "ogc": OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows
    },
    "readers": {
        "wps": {
            "ExecuteResponse": function(e, t) {
                t.executeResponse = {
                    "lang": e.getAttribute("lang"),
                    "statusLocation": e.getAttribute("statusLocation"),
                    "serviceInstance": e.getAttribute("serviceInstance"),
                    "service": e.getAttribute("service")
                }, this.readChildNodes(e, t.executeResponse);
            },
            "Process": function(e, t) {
                t.process = {}, this.readChildNodes(e, t.process);
            },
            "Status": function(e, t) {
                t.status = {
                    "creationTime": e.getAttribute("creationTime")
                }, this.readChildNodes(e, t.status);
            },
            "ProcessSucceeded": function(e, t) {
                t.processSucceeded = !0;
            },
            "ProcessOutputs": function(e, t) {
                t.processOutputs = [], this.readChildNodes(e, t.processOutputs);
            },
            "Output": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            },
            "Reference": function(e, t) {
                t.reference = {
                    "href": e.getAttribute("href"),
                    "mimeType": e.getAttribute("mimeType"),
                    "encoding": e.getAttribute("encoding"),
                    "schema": e.getAttribute("schema")
                };
            },
            "Data": function(e, t) {
                t.data = {}, this.readChildNodes(e, t);
            },
            "LiteralData": function(e, t) {
                t.literalData = {
                    "dataType": e.getAttribute("dataType"),
                    "uom": e.getAttribute("uom"),
                    "value": this.getChildValue(e)
                };
            },
            "ComplexData": function(e, t) {
                if (t.complexData = {
                    "mimeType": e.getAttribute("mimeType"),
                    "schema": e.getAttribute("schema"),
                    "encoding": e.getAttribute("encoding"),
                    "value": ""
                }, this.isSimpleContent(e)) {
                    var i;
                    for (i = e.firstChild; i; i = i.nextSibling) switch (i.nodeType) {
                      case 3:
                      case 4:
                        t.complexData.value += i.nodeValue;
                    }
                } else for (i = e.firstChild; i; i = i.nextSibling) 1 == i.nodeType && (t.complexData.value = i);
            },
            "BoundingBox": function(e, t) {
                t.boundingBoxData = {
                    "dimensions": e.getAttribute("dimensions"),
                    "crs": e.getAttribute("crs")
                }, this.readChildNodes(e, t.boundingBoxData);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WPSExecute"
}), OpenLayers.WPSProcess = OpenLayers.Class({
    "client": null,
    "server": null,
    "identifier": null,
    "description": null,
    "localWPS": "http://geoserver/wps",
    "formats": null,
    "chained": 0,
    "executeCallbacks": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.executeCallbacks = [], this.formats = {
            "application/wkt": new OpenLayers.Format.WKT(),
            "application/json": new OpenLayers.Format.GeoJSON()
        };
    },
    "describe": function(e) {
        if (e = e || {}, this.description) {
            if (e.callback) {
                var t = this.description;
                window.setTimeout(function() {
                    e.callback.call(e.scope, t);
                }, 0);
            }
        } else this.client.describeProcess(this.server, this.identifier, function(t) {
            this.description || this.parseDescription(t), e.callback && e.callback.call(e.scope, this.description);
        }, this);
    },
    "configure": function(e) {
        return this.describe({
            "callback": function() {
                var t, i, n, s = this.description, r = e.inputs;
                for (i = 0, n = s.dataInputs.length; i < n; ++i) t = s.dataInputs[i], this.setInputData(t, r[t.identifier]);
                e.callback && e.callback.call(e.scope);
            },
            "scope": this
        }), this;
    },
    "execute": function(e) {
        this.configure({
            "inputs": e.inputs,
            "callback": function() {
                var t = this, i = this.getOutputIndex(t.description.processOutputs, e.output);
                t.setResponseForm({
                    "outputIndex": i
                }), function n() {
                    OpenLayers.Util.removeItem(t.executeCallbacks, n), 0 === t.chained ? OpenLayers.Request.POST({
                        "url": t.client.servers[t.server].url,
                        "data": new OpenLayers.Format.WPSExecute().write(t.description),
                        "success": function(n) {
                            var s, r = t.description.processOutputs[i];
                            if (r.literalOutput) s = "boolean" === r.literalOutput.dataType ? "true" === OpenLayers.String.trim(n.responseText).toLowerCase() : "double" === r.literalOutput.dataType ? parseFloat(n.responseText) : n.responseText; else if (r.complexOutput) {
                                var o = t.findMimeType(r.complexOutput.supported.formats);
                                (s = t.formats[o].read(n.responseText)) instanceof OpenLayers.Feature.Vector && (s = [ s ]);
                            }
                            if (e.success) {
                                var a = {};
                                a[e.output || "result"] = s, e.success.call(e.scope, a);
                            }
                        },
                        "scope": t
                    }) : t.executeCallbacks.push(n);
                }();
            },
            "scope": this
        });
    },
    "output": function(e) {
        return new OpenLayers.WPSProcess.ChainLink({
            "process": this,
            "output": e
        });
    },
    "parseDescription": function(e) {
        var t = this.client.servers[this.server];
        this.description = new OpenLayers.Format.WPSDescribeProcess().read(t.processDescription[this.identifier]).processDescriptions[this.identifier];
    },
    "setInputData": function(e, t) {
        if (delete e.data, delete e.reference, t instanceof OpenLayers.WPSProcess.ChainLink) ++this.chained, 
        e.reference = {
            "method": "POST",
            "href": t.process.server === this.server ? this.localWPS : this.client.servers[t.process.server].url
        }, t.process.describe({
            "callback": function() {
                --this.chained, this.chainProcess(e, t);
            },
            "scope": this
        }); else {
            e.data = {};
            var i = e.complexData;
            if (i) {
                var n = this.findMimeType(i.supported.formats);
                e.data.complexData = {
                    "mimeType": n,
                    "value": this.formats[n].write(this.toFeatures(t))
                };
            } else e.data.literalData = {
                "value": t
            };
        }
    },
    "setResponseForm": function(e) {
        e = e || {};
        var t, i = this.description.processOutputs[e.outputIndex || 0];
        i.complexOutput && (t = this.findMimeType(i.complexOutput.supported.formats, e.supportedFormats)), 
        this.description.responseForm = {
            "rawDataOutput": {
                "identifier": i.identifier,
                "mimeType": t
            }
        };
    },
    "getOutputIndex": function(e, t) {
        var i;
        if (t) {
            for (var n = e.length - 1; n >= 0; --n) if (e[n].identifier === t) {
                i = n;
                break;
            }
        } else i = 0;
        return i;
    },
    "chainProcess": function(e, t) {
        var i = this.getOutputIndex(t.process.description.processOutputs, t.output);
        e.reference.mimeType = this.findMimeType(e.complexData.supported.formats, t.process.description.processOutputs[i].complexOutput.supported.formats);
        var n = {};
        for (n[e.reference.mimeType] = !0, t.process.setResponseForm({
            "outputIndex": i,
            "supportedFormats": n
        }), e.reference.body = t.process.description; this.executeCallbacks.length > 0; ) this.executeCallbacks[0]();
    },
    "toFeatures": function(e) {
        var t = OpenLayers.Util.isArray(e);
        t || (e = [ e ]);
        for (var i, n = new Array(e.length), s = 0, r = e.length; s < r; ++s) i = e[s], 
        n[s] = i instanceof OpenLayers.Feature.Vector ? i : new OpenLayers.Feature.Vector(i);
        return t ? n : n[0];
    },
    "findMimeType": function(e, t) {
        t = t || this.formats;
        for (var i in e) if (i in t) return i;
    },
    "CLASS_NAME": "OpenLayers.WPSProcess"
}), OpenLayers.WPSProcess.ChainLink = OpenLayers.Class({
    "process": null,
    "output": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e);
    },
    "CLASS_NAME": "OpenLayers.WPSProcess.ChainLink"
}), OpenLayers.Format.WPSDescribeProcess = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "CLASS_NAME": "OpenLayers.Format.WPSDescribeProcess"
}), OpenLayers.WPSClient = OpenLayers.Class({
    "servers": null,
    "version": "1.0.0",
    "lazy": !1,
    "events": null,
    "initialize": function(e) {
        OpenLayers.Util.extend(this, e), this.events = new OpenLayers.Events(this), this.servers = {};
        for (var t in e.servers) this.servers[t] = "string" == typeof e.servers[t] ? {
            "url": e.servers[t],
            "version": this.version,
            "processDescription": {}
        } : e.servers[t];
    },
    "execute": function(e) {
        this.getProcess(e.server, e.process).execute({
            "inputs": e.inputs,
            "success": e.success,
            "scope": e.scope
        });
    },
    "getProcess": function(e, t, i) {
        var n = new OpenLayers.WPSProcess({
            "client": this,
            "server": e,
            "identifier": t
        });
        return this.lazy || n.describe(i), n;
    },
    "describeProcess": function(e, t, i, n) {
        var s = this.servers[e];
        s.processDescription[t] ? window.setTimeout(function() {
            i.call(n, s.processDescription[t]);
        }, 0) : t in s.processDescription ? this.events.register("describeprocess", this, function e(s) {
            s.identifier === t && (this.events.unregister("describeprocess", this, e), i.call(n, s.raw));
        }) : (s.processDescription[t] = null, OpenLayers.Request.GET({
            "url": s.url,
            "params": {
                "SERVICE": "WPS",
                "VERSION": s.version,
                "REQUEST": "DescribeProcess",
                "IDENTIFIER": t
            },
            "success": function(e) {
                s.processDescription[t] = e.responseText, this.events.triggerEvent("describeprocess", {
                    "identifier": t,
                    "raw": e.responseText
                }), i.call(n, e.responseText);
            },
            "scope": this
        }));
    },
    "destroy": function() {
        this.events.destroy(), this.events = null, this.servers = null;
    },
    "CLASS_NAME": "OpenLayers.WPSClient"
}), OpenLayers.Control.ArgParser = OpenLayers.Class(OpenLayers.Control, {
    "center": null,
    "zoom": null,
    "layers": null,
    "displayProjection": null,
    "getParameters": function(e) {
        e = e || window.location.href;
        var t = OpenLayers.Util.getParameters(e), i = e.indexOf("#");
        return i > 0 && (e = "?" + e.substring(i + 1, e.length), OpenLayers.Util.extend(t, OpenLayers.Util.getParameters(e))), 
        t;
    },
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        for (var t = 0, i = this.map.controls.length; t < i; t++) {
            var n = this.map.controls[t];
            if (n != this && "OpenLayers.Control.ArgParser" == n.CLASS_NAME) {
                n.displayProjection != this.displayProjection && (this.displayProjection = n.displayProjection);
                break;
            }
        }
        if (t == this.map.controls.length) {
            var s = this.getParameters();
            s.layers && (this.layers = s.layers, this.map.events.register("addlayer", this, this.configureLayers), 
            this.configureLayers()), s.lat && s.lon && (this.center = new OpenLayers.LonLat(parseFloat(s.lon), parseFloat(s.lat)), 
            s.zoom && (this.zoom = parseFloat(s.zoom)), this.map.events.register("changebaselayer", this, this.setCenter), 
            this.setCenter());
        }
    },
    "setCenter": function() {
        this.map.baseLayer && (this.map.events.unregister("changebaselayer", this, this.setCenter), 
        this.displayProjection && this.center.transform(this.displayProjection, this.map.getProjectionObject()), 
        this.map.setCenter(this.center, this.zoom));
    },
    "configureLayers": function() {
        if (this.layers.length == this.map.layers.length) {
            this.map.events.unregister("addlayer", this, this.configureLayers);
            for (var e = 0, t = this.layers.length; e < t; e++) {
                var i = this.map.layers[e], n = this.layers.charAt(e);
                "B" == n ? this.map.setBaseLayer(i) : "T" != n && "F" != n || i.setVisibility("T" == n);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Control.ArgParser"
}), OpenLayers.Control.Attribution = OpenLayers.Class(OpenLayers.Control, {
    "separator": ", ",
    "template": "${layers}",
    "layerTemplate": '<a href="${href}" target="_blank">${title}</a>',
    "destroy": function() {
        this.map.events.un({
            "removelayer": this.updateAttribution,
            "addlayer": this.updateAttribution,
            "changelayer": this.updateAttribution,
            "changebaselayer": this.updateAttribution,
            "scope": this
        }), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.map.events.on({
            "changebaselayer": this.updateAttribution,
            "changelayer": this.updateAttribution,
            "addlayer": this.updateAttribution,
            "removelayer": this.updateAttribution,
            "scope": this
        }), this.updateAttribution(), this.div;
    },
    "updateAttribution": function() {
        var e, t = [];
        if (this.map && this.map.layers) {
            for (var i = 0, n = this.map.layers.length; i < n; i++) {
                var s = this.map.layers[i];
                s.attribution && s.getVisibility() && (e = "object" == typeof s.attribution ? OpenLayers.String.format(this.layerTemplate, s.attribution) : s.attribution, 
                -1 === OpenLayers.Util.indexOf(t, e) && t.push(e));
            }
            this.div.innerHTML = OpenLayers.String.format(this.template, {
                "layers": t.join(this.separator)
            });
        }
    },
    "CLASS_NAME": "OpenLayers.Control.Attribution"
}), OpenLayers.Control.Button = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_BUTTON,
    "trigger": function() {},
    "CLASS_NAME": "OpenLayers.Control.Button"
}), OpenLayers.Control.CacheRead = OpenLayers.Class(OpenLayers.Control, {
    "fetchEvent": "tileloadstart",
    "layers": null,
    "autoActivate": !0,
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        var t, i = this.layers || e.layers;
        for (t = i.length - 1; t >= 0; --t) this.addLayer({
            "layer": i[t]
        });
        this.layers || e.events.on({
            "addlayer": this.addLayer,
            "removeLayer": this.removeLayer,
            "scope": this
        });
    },
    "addLayer": function(e) {
        e.layer.events.register(this.fetchEvent, this, this.fetch);
    },
    "removeLayer": function(e) {
        e.layer.events.unregister(this.fetchEvent, this, this.fetch);
    },
    "fetch": function(e) {
        if (this.active && window.localStorage && e.tile instanceof OpenLayers.Tile.Image) {
            var t = e.tile, i = t.url;
            !t.layer.crossOriginKeyword && OpenLayers.ProxyHost && 0 === i.indexOf(OpenLayers.ProxyHost) && (i = OpenLayers.Control.CacheWrite.urlMap[i]);
            var n = window.localStorage.getItem("olCache_" + i);
            n && (t.url = n, "tileerror" === e.type && t.setImgSrc(n));
        }
    },
    "destroy": function() {
        if (this.layers || this.map) {
            var e, t = this.layers || this.map.layers;
            for (e = t.length - 1; e >= 0; --e) this.removeLayer({
                "layer": t[e]
            });
        }
        this.map && this.map.events.un({
            "addlayer": this.addLayer,
            "removeLayer": this.removeLayer,
            "scope": this
        }), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Control.CacheRead"
}), OpenLayers.Control.CacheWrite = OpenLayers.Class(OpenLayers.Control, {
    "layers": null,
    "imageFormat": "image/png",
    "quotaRegEx": /quota/i,
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        var t, i = this.layers || e.layers;
        for (t = i.length - 1; t >= 0; --t) this.addLayer({
            "layer": i[t]
        });
        this.layers || e.events.on({
            "addlayer": this.addLayer,
            "removeLayer": this.removeLayer,
            "scope": this
        });
    },
    "addLayer": function(e) {
        e.layer.events.on({
            "tileloadstart": this.makeSameOrigin,
            "tileloaded": this.onTileLoaded,
            "scope": this
        });
    },
    "removeLayer": function(e) {
        e.layer.events.un({
            "tileloadstart": this.makeSameOrigin,
            "tileloaded": this.onTileLoaded,
            "scope": this
        });
    },
    "makeSameOrigin": function(e) {
        if (this.active) {
            var t = e.tile;
            if (t instanceof OpenLayers.Tile.Image && !t.crossOriginKeyword && "data:" !== t.url.substr(0, 5)) {
                var i = OpenLayers.Request.makeSameOrigin(t.url, OpenLayers.ProxyHost);
                OpenLayers.Control.CacheWrite.urlMap[i] = t.url, t.url = i;
            }
        }
    },
    "onTileLoaded": function(e) {
        this.active && !e.aborted && e.tile instanceof OpenLayers.Tile.Image && "data:" !== e.tile.url.substr(0, 5) && (this.cache({
            "tile": e.tile
        }), delete OpenLayers.Control.CacheWrite.urlMap[e.tile.url]);
    },
    "cache": function(e) {
        if (window.localStorage) {
            var t = e.tile;
            try {
                var i = t.getCanvasContext();
                if (i) {
                    var n = OpenLayers.Control.CacheWrite.urlMap[t.url] || t.url;
                    window.localStorage.setItem("olCache_" + n, i.canvas.toDataURL(this.imageFormat));
                }
            } catch (e) {
                var s = e.name || e.message;
                s && this.quotaRegEx.test(s) ? this.events.triggerEvent("cachefull", {
                    "tile": t
                }) : OpenLayers.Console.error(e.toString());
            }
        }
    },
    "destroy": function() {
        if (this.layers || this.map) {
            var e, t = this.layers || this.map.layers;
            for (e = t.length - 1; e >= 0; --e) this.removeLayer({
                "layer": t[e]
            });
        }
        this.map && this.map.events.un({
            "addlayer": this.addLayer,
            "removeLayer": this.removeLayer,
            "scope": this
        }), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Control.CacheWrite"
}), OpenLayers.Control.CacheWrite.clearCache = function() {
    if (window.localStorage) {
        var e, t;
        for (e = window.localStorage.length - 1; e >= 0; --e) "olCache_" === (t = window.localStorage.key(e)).substr(0, 8) && window.localStorage.removeItem(t);
    }
}, OpenLayers.Control.CacheWrite.urlMap = {}, OpenLayers.Handler.Drag = OpenLayers.Class(OpenLayers.Handler, {
    "started": !1,
    "stopDown": !0,
    "dragging": !1,
    "last": null,
    "start": null,
    "lastMoveEvt": null,
    "oldOnselectstart": null,
    "interval": 0,
    "timeoutId": null,
    "documentDrag": !1,
    "documentEvents": null,
    "initialize": function(e, t, i) {
        if (OpenLayers.Handler.prototype.initialize.apply(this, arguments), !0 === this.documentDrag) {
            var n = this;
            this._docMove = function(e) {
                n.mousemove({
                    "xy": {
                        "x": e.clientX,
                        "y": e.clientY
                    },
                    "element": document
                });
            }, this._docUp = function(e) {
                n.mouseup({
                    "xy": {
                        "x": e.clientX,
                        "y": e.clientY
                    }
                });
            };
        }
    },
    "dragstart": function(e) {
        var t = !0;
        return this.dragging = !1, this.checkModifiers(e) && this._pointerId == e.pointerId && (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) ? (this.started = !0, 
        this.start = e.xy, this.last = e.xy, OpenLayers.Element.addClass(this.map.viewPortDiv, "olDragDown"), 
        this.down(e), this.callback("down", [ e.xy ]), OpenLayers.Event.preventDefault(e), 
        this.oldOnselectstart || (this.oldOnselectstart = document.onselectstart ? document.onselectstart : OpenLayers.Function.True), 
        document.onselectstart = OpenLayers.Function.False, t = !this.stopDown) : (delete this._pointerId, 
        this.started = !1, this.start = null, this.last = null), t;
    },
    "dragmove": function(e) {
        return this.lastMoveEvt = e, !this.started || this._pointerId != e.pointerId || this.timeoutId || e.xy.x == this.last.x && e.xy.y == this.last.y || (!0 === this.documentDrag && this.documentEvents && (e.element === document ? (this.adjustXY(e), 
        this.setEvent(e)) : this.removeDocumentEvents()), this.interval > 0 && (this.timeoutId = setTimeout(OpenLayers.Function.bind(this.removeTimeout, this), this.interval)), 
        this.dragging = !0, this.move(e), this.callback("move", [ e.xy ]), this.oldOnselectstart || (this.oldOnselectstart = document.onselectstart, 
        document.onselectstart = OpenLayers.Function.False), this.last = e.xy), !0;
    },
    "dragend": function(e) {
        if (this.started && this._pointerId == e.pointerId) {
            !0 === this.documentDrag && this.documentEvents && (this.adjustXY(e), this.removeDocumentEvents());
            var t = this.start != this.last;
            this.started = !1, this.dragging = !1, delete this._pointerId, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDragDown"), 
            this.up(e), this.callback("up", [ e.xy ]), t && this.callback("done", [ e.xy ]), 
            document.onselectstart = this.oldOnselectstart;
        }
        return !0;
    },
    "down": function(e) {},
    "move": function(e) {},
    "up": function(e) {},
    "out": function(e) {},
    "mousedown": function(e) {
        return this.dragstart(e);
    },
    "touchstart": function(e) {
        return this.startTouch(), "_pointerId" in this || (this._pointerId = e.pointerId), 
        this.dragstart(e);
    },
    "mousemove": function(e) {
        return this.dragmove(e);
    },
    "touchmove": function(e) {
        return this.dragmove(e);
    },
    "removeTimeout": function() {
        this.timeoutId = null, this.dragging && this.mousemove(this.lastMoveEvt);
    },
    "mouseup": function(e) {
        return this.dragend(e);
    },
    "touchend": function(e) {
        return e.xy = this.last, this.dragend(e);
    },
    "mouseout": function(e) {
        if (this.started && OpenLayers.Util.mouseLeft(e, this.map.viewPortDiv)) if (!0 === this.documentDrag) this.addDocumentEvents(); else {
            var t = this.start != this.last;
            this.started = !1, this.dragging = !1, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDragDown"), 
            this.out(e), this.callback("out", []), t && this.callback("done", [ e.xy ]), document.onselectstart && (document.onselectstart = this.oldOnselectstart);
        }
        return !0;
    },
    "click": function(e) {
        return this.start == this.last;
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.dragging = !1, 
        e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.started = !1, 
        this.dragging = !1, this.start = null, this.last = null, e = !0, OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDragDown")), 
        e;
    },
    "adjustXY": function(e) {
        var t = OpenLayers.Util.pagePosition(this.map.viewPortDiv);
        e.xy.x -= t[0], e.xy.y -= t[1];
    },
    "addDocumentEvents": function() {
        OpenLayers.Element.addClass(document.body, "olDragDown"), this.documentEvents = !0, 
        OpenLayers.Event.observe(document, "mousemove", this._docMove), OpenLayers.Event.observe(document, "mouseup", this._docUp);
    },
    "removeDocumentEvents": function() {
        OpenLayers.Element.removeClass(document.body, "olDragDown"), this.documentEvents = !1, 
        OpenLayers.Event.stopObserving(document, "mousemove", this._docMove), OpenLayers.Event.stopObserving(document, "mouseup", this._docUp);
    },
    "CLASS_NAME": "OpenLayers.Handler.Drag"
}), OpenLayers.Handler.Feature = OpenLayers.Class(OpenLayers.Handler, {
    "EVENTMAP": {
        "click": {
            "in": "click",
            "out": "clickout"
        },
        "mousemove": {
            "in": "over",
            "out": "out"
        },
        "dblclick": {
            "in": "dblclick",
            "out": null
        },
        "mousedown": {
            "in": null,
            "out": null
        },
        "mouseup": {
            "in": null,
            "out": null
        },
        "touchstart": {
            "in": "click",
            "out": "clickout"
        }
    },
    "feature": null,
    "lastFeature": null,
    "down": null,
    "up": null,
    "clickTolerance": 4,
    "geometryTypes": null,
    "stopClick": !0,
    "stopDown": !0,
    "stopUp": !1,
    "initialize": function(e, t, i, n) {
        OpenLayers.Handler.prototype.initialize.apply(this, [ e, i, n ]), this.layer = t;
    },
    "touchstart": function(e) {
        return this.startTouch(), !!OpenLayers.Event.isMultiTouch(e) || this.mousedown(e);
    },
    "touchmove": function(e) {
        OpenLayers.Event.preventDefault(e);
    },
    "mousedown": function(e) {
        return (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) && (this.down = e.xy), 
        !this.handle(e) || !this.stopDown;
    },
    "mouseup": function(e) {
        return this.up = e.xy, !this.handle(e) || !this.stopUp;
    },
    "click": function(e) {
        return !this.handle(e) || !this.stopClick;
    },
    "mousemove": function(e) {
        return !this.callbacks.over && !this.callbacks.out || (this.handle(e), !0);
    },
    "dblclick": function(e) {
        return !this.handle(e);
    },
    "geometryTypeMatches": function(e) {
        return null == this.geometryTypes || OpenLayers.Util.indexOf(this.geometryTypes, e.geometry.CLASS_NAME) > -1;
    },
    "handle": function(e) {
        this.feature && !this.feature.layer && (this.feature = null);
        var t = e.type, i = !1, n = !!this.feature, s = "click" == t || "dblclick" == t || "touchstart" == t;
        if (this.feature = this.layer.getFeatureFromEvent(e), this.feature && !this.feature.layer && (this.feature = null), 
        this.lastFeature && !this.lastFeature.layer && (this.lastFeature = null), this.feature) {
            "touchstart" === t && OpenLayers.Event.preventDefault(e);
            var r = this.feature != this.lastFeature;
            this.geometryTypeMatches(this.feature) ? (n && r ? (this.lastFeature && this.triggerCallback(t, "out", [ this.lastFeature ]), 
            this.triggerCallback(t, "in", [ this.feature ])) : n && !s || this.triggerCallback(t, "in", [ this.feature ]), 
            this.lastFeature = this.feature, i = !0) : (this.lastFeature && (n && r || s) && this.triggerCallback(t, "out", [ this.lastFeature ]), 
            this.feature = null);
        } else this.lastFeature && (n || s) && this.triggerCallback(t, "out", [ this.lastFeature ]);
        return i;
    },
    "triggerCallback": function(e, t, i) {
        var n = this.EVENTMAP[e][t];
        n && ("click" == e && this.up && this.down ? (Math.sqrt(Math.pow(this.up.x - this.down.x, 2) + Math.pow(this.up.y - this.down.y, 2)) <= this.clickTolerance && this.callback(n, i), 
        this.up = this.down = null) : this.callback(n, i));
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.moveLayerToTop(), 
        this.map.events.on({
            "removelayer": this.handleMapEvents,
            "changelayer": this.handleMapEvents,
            "scope": this
        }), e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.moveLayerBack(), 
        this.feature = null, this.lastFeature = null, this.down = null, this.up = null, 
        this.map.events.un({
            "removelayer": this.handleMapEvents,
            "changelayer": this.handleMapEvents,
            "scope": this
        }), e = !0), e;
    },
    "handleMapEvents": function(e) {
        "removelayer" != e.type && "order" != e.property || this.moveLayerToTop();
    },
    "moveLayerToTop": function() {
        var e = Math.max(this.map.Z_INDEX_BASE.Feature - 1, this.layer.getZIndex()) + 1;
        this.layer.setZIndex(e);
    },
    "moveLayerBack": function() {
        var e = this.layer.getZIndex() - 1;
        e >= this.map.Z_INDEX_BASE.Feature ? this.layer.setZIndex(e) : this.map.setLayerZIndex(this.layer, this.map.getLayerIndex(this.layer));
    },
    "CLASS_NAME": "OpenLayers.Handler.Feature"
}), OpenLayers.Control.DragFeature = OpenLayers.Class(OpenLayers.Control, {
    "geometryTypes": null,
    "onStart": function(e, t) {},
    "onDrag": function(e, t) {},
    "onComplete": function(e, t) {},
    "onEnter": function(e) {},
    "onLeave": function(e) {},
    "documentDrag": !1,
    "layer": null,
    "feature": null,
    "dragCallbacks": {},
    "featureCallbacks": {},
    "lastPixel": null,
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), this.layer = e, this.handlers = {
            "drag": new OpenLayers.Handler.Drag(this, OpenLayers.Util.extend({
                "down": this.downFeature,
                "move": this.moveFeature,
                "up": this.upFeature,
                "out": this.cancel,
                "done": this.doneDragging
            }, this.dragCallbacks), {
                "documentDrag": this.documentDrag
            }),
            "feature": new OpenLayers.Handler.Feature(this, this.layer, OpenLayers.Util.extend({
                "click": this.clickFeature,
                "clickout": this.clickoutFeature,
                "over": this.overFeature,
                "out": this.outFeature
            }, this.featureCallbacks), {
                "geometryTypes": this.geometryTypes
            })
        };
    },
    "clickFeature": function(e) {
        this.handlers.feature.touch && !this.over && this.overFeature(e) && (this.handlers.drag.dragstart(this.handlers.feature.evt), 
        this.handlers.drag.stopDown = !1);
    },
    "clickoutFeature": function(e) {
        this.handlers.feature.touch && this.over && (this.outFeature(e), this.handlers.drag.stopDown = !0);
    },
    "destroy": function() {
        this.layer = null, OpenLayers.Control.prototype.destroy.apply(this, []);
    },
    "activate": function() {
        return this.handlers.feature.activate() && OpenLayers.Control.prototype.activate.apply(this, arguments);
    },
    "deactivate": function() {
        return this.handlers.drag.deactivate(), this.handlers.feature.deactivate(), this.feature = null, 
        this.dragging = !1, this.lastPixel = null, OpenLayers.Element.removeClass(this.map.viewPortDiv, this.displayClass + "Over"), 
        OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "overFeature": function(e) {
        var t = !1;
        return this.handlers.drag.dragging ? this.feature.id == e.id ? this.over = !0 : this.over = !1 : (this.feature = e, 
        this.handlers.drag.activate(), t = !0, this.over = !0, OpenLayers.Element.addClass(this.map.viewPortDiv, this.displayClass + "Over"), 
        this.onEnter(e)), t;
    },
    "downFeature": function(e) {
        this.lastPixel = e, this.onStart(this.feature, e);
    },
    "moveFeature": function(e) {
        var t = this.map.getResolution();
        this.feature.geometry.move(t * (e.x - this.lastPixel.x), t * (this.lastPixel.y - e.y)), 
        this.layer.drawFeature(this.feature), this.lastPixel = e, this.onDrag(this.feature, e);
    },
    "upFeature": function(e) {
        this.over || this.handlers.drag.deactivate();
    },
    "doneDragging": function(e) {
        this.onComplete(this.feature, e);
    },
    "outFeature": function(e) {
        this.handlers.drag.dragging ? this.feature.id == e.id && (this.over = !1) : (this.over = !1, 
        this.handlers.drag.deactivate(), OpenLayers.Element.removeClass(this.map.viewPortDiv, this.displayClass + "Over"), 
        this.onLeave(e), this.feature = null);
    },
    "cancel": function() {
        this.handlers.drag.deactivate(), this.over = !1;
    },
    "setMap": function(e) {
        this.handlers.drag.setMap(e), this.handlers.feature.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Control.DragFeature"
}), OpenLayers.Control.DragPan = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_TOOL,
    "panned": !1,
    "interval": 0,
    "documentDrag": !1,
    "kinetic": null,
    "enableKinetic": !0,
    "kineticInterval": 10,
    "draw": function() {
        if (this.enableKinetic && OpenLayers.Kinetic) {
            var e = {
                "interval": this.kineticInterval
            };
            "object" == typeof this.enableKinetic && (e = OpenLayers.Util.extend(e, this.enableKinetic)), 
            this.kinetic = new OpenLayers.Kinetic(e);
        }
        this.handler = new OpenLayers.Handler.Drag(this, {
            "move": this.panMap,
            "done": this.panMapDone,
            "down": this.panMapStart
        }, {
            "interval": this.interval,
            "documentDrag": this.documentDrag
        });
    },
    "panMapStart": function() {
        this.kinetic && this.kinetic.begin();
    },
    "panMap": function(e) {
        this.kinetic && this.kinetic.update(e), this.panned = !0, this.map.pan(this.handler.last.x - e.x, this.handler.last.y - e.y, {
            "dragging": !0,
            "animate": !1
        });
    },
    "panMapDone": function(e) {
        if (this.panned) {
            var t = null;
            if (this.kinetic && (t = this.kinetic.end(e)), this.map.pan(this.handler.last.x - e.x, this.handler.last.y - e.y, {
                "dragging": !!t,
                "animate": !1
            }), t) {
                var i = this;
                this.kinetic.move(t, function(e, t, n) {
                    i.map.pan(e, t, {
                        "dragging": !n,
                        "animate": !1
                    });
                });
            }
            this.panned = !1;
        }
    },
    "CLASS_NAME": "OpenLayers.Control.DragPan"
}), OpenLayers.Control.DrawFeature = OpenLayers.Class(OpenLayers.Control, {
    "layer": null,
    "callbacks": null,
    "multi": !1,
    "featureAdded": function() {},
    "initialize": function(e, t, i) {
        OpenLayers.Control.prototype.initialize.apply(this, [ i ]), this.callbacks = OpenLayers.Util.extend({
            "done": this.drawFeature,
            "modify": function(e, t) {
                this.layer.events.triggerEvent("sketchmodified", {
                    "vertex": e,
                    "feature": t
                });
            },
            "create": function(e, t) {
                this.layer.events.triggerEvent("sketchstarted", {
                    "vertex": e,
                    "feature": t
                });
            }
        }, this.callbacks), this.layer = e, this.handlerOptions = this.handlerOptions || {}, 
        this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions, {
            "renderers": e.renderers,
            "rendererOptions": e.rendererOptions
        }), "multi" in this.handlerOptions || (this.handlerOptions.multi = this.multi);
        var n = this.layer.styleMap && this.layer.styleMap.styles.temporary;
        n && (this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions, {
            "styleMap": new OpenLayers.StyleMap({
                "default": n
            })
        })), this.handler = new t(this, this.callbacks, this.handlerOptions);
    },
    "drawFeature": function(e) {
        var t = new OpenLayers.Feature.Vector(e);
        !1 !== this.layer.events.triggerEvent("sketchcomplete", {
            "feature": t
        }) && (t.state = OpenLayers.State.INSERT, this.layer.addFeatures([ t ]), this.featureAdded(t), 
        this.events.triggerEvent("featureadded", {
            "feature": t
        }));
    },
    "insertXY": function(e, t) {
        this.handler && this.handler.line && this.handler.insertXY(e, t);
    },
    "insertDeltaXY": function(e, t) {
        this.handler && this.handler.line && this.handler.insertDeltaXY(e, t);
    },
    "insertDirectionLength": function(e, t) {
        this.handler && this.handler.line && this.handler.insertDirectionLength(e, t);
    },
    "insertDeflectionLength": function(e, t) {
        this.handler && this.handler.line && this.handler.insertDeflectionLength(e, t);
    },
    "undo": function() {
        return this.handler.undo && this.handler.undo();
    },
    "redo": function() {
        return this.handler.redo && this.handler.redo();
    },
    "finishSketch": function() {
        this.handler.finishGeometry();
    },
    "cancel": function() {
        this.handler.cancel();
    },
    "CLASS_NAME": "OpenLayers.Control.DrawFeature"
}), OpenLayers.Events.buttonclick = OpenLayers.Class({
    "target": null,
    "events": [ "mousedown", "mouseup", "click", "dblclick", "touchstart", "touchmove", "touchend", "keydown" ],
    "startRegEx": /^mousedown|touchstart$/,
    "cancelRegEx": /^touchmove$/,
    "completeRegEx": /^mouseup|touchend$/,
    "isDeviceTouchCapable": "ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch,
    "initialize": function(e) {
        this.target = e;
        for (var t = this.events.length - 1; t >= 0; --t) this.target.register(this.events[t], this, this.buttonClick, {
            "extension": !0
        });
    },
    "destroy": function() {
        for (var e = this.events.length - 1; e >= 0; --e) this.target.unregister(this.events[e], this, this.buttonClick);
        delete this.target;
    },
    "getPressedButton": function(e) {
        var t, i = 3;
        do {
            if (OpenLayers.Element.hasClass(e, "olButton")) {
                t = e;
                break;
            }
            e = e.parentNode;
        } while (--i > 0 && e);
        return t;
    },
    "ignore": function(e) {
        var t = 3, i = !1;
        do {
            if ("a" === e.nodeName.toLowerCase()) {
                i = !0;
                break;
            }
            e = e.parentNode;
        } while (--t > 0 && e);
        return i;
    },
    "buttonClick": function(e) {
        var t = !0, i = OpenLayers.Event.element(e);
        if (i && (OpenLayers.Event.isLeftClick(e) && !this.isDeviceTouchCapable || !~e.type.indexOf("mouse"))) {
            var n = this.getPressedButton(i);
            if (n) {
                if ("keydown" === e.type) switch (e.keyCode) {
                  case OpenLayers.Event.KEY_RETURN:
                  case OpenLayers.Event.KEY_SPACE:
                    this.target.triggerEvent("buttonclick", {
                        "buttonElement": n
                    }), OpenLayers.Event.stop(e), t = !1;
                } else if (this.startEvt) {
                    if (this.completeRegEx.test(e.type)) {
                        var s = OpenLayers.Util.pagePosition(n), r = OpenLayers.Util.getViewportElement(), o = window.pageYOffset || r.scrollTop, a = window.pageXOffset || r.scrollLeft;
                        s[0] = s[0] - a, s[1] = s[1] - o, this.target.triggerEvent("buttonclick", {
                            "buttonElement": n,
                            "buttonXY": {
                                "x": this.startEvt.clientX - s[0],
                                "y": this.startEvt.clientY - s[1]
                            }
                        });
                    }
                    this.cancelRegEx.test(e.type) && e.touches && this.startEvt.touches && (Math.abs(e.touches[0].olClientX - this.startEvt.touches[0].olClientX) > 4 || Math.abs(e.touches[0].olClientY - this.startEvt.touches[0].olClientY)) > 4 && delete this.startEvt, 
                    OpenLayers.Event.stop(e), t = !1;
                }
                this.startRegEx.test(e.type) && (this.startEvt = e, OpenLayers.Event.stop(e), t = !1);
            } else t = !this.ignore(OpenLayers.Event.element(e)), delete this.startEvt;
        }
        return t;
    }
}), OpenLayers.Control.Panel = OpenLayers.Class(OpenLayers.Control, {
    "controls": null,
    "autoActivate": !0,
    "defaultControl": null,
    "saveState": !1,
    "allowDepress": !1,
    "activeState": null,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, [ e ]), this.controls = [], 
        this.activeState = {};
    },
    "destroy": function() {
        this.map && this.map.events.unregister("buttonclick", this, this.onButtonClick), 
        OpenLayers.Control.prototype.destroy.apply(this, arguments);
        for (var e, t = this.controls.length - 1; t >= 0; t--) (e = this.controls[t]).events && e.events.un({
            "activate": this.iconOn,
            "deactivate": this.iconOff
        }), e.panel_div = null;
        this.activeState = null;
    },
    "activate": function() {
        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {
            for (var e, t = 0, i = this.controls.length; t < i; t++) ((e = this.controls[t]) === this.defaultControl || this.saveState && this.activeState[e.id]) && e.activate();
            return !0 === this.saveState && (this.defaultControl = null), this.redraw(), !0;
        }
        return !1;
    },
    "deactivate": function() {
        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {
            for (var e, t = 0, i = this.controls.length; t < i; t++) e = this.controls[t], this.activeState[e.id] = e.deactivate();
            return this.redraw(), !0;
        }
        return !1;
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.outsideViewport ? (this.events.attachToElement(this.div), 
        this.events.register("buttonclick", this, this.onButtonClick)) : this.map.events.register("buttonclick", this, this.onButtonClick), 
        this.addControlsToMap(this.controls), this.div;
    },
    "redraw": function() {
        for (e = this.div.childNodes.length - 1; e >= 0; e--) this.div.removeChild(this.div.childNodes[e]);
        if (this.div.innerHTML = "", this.active) for (var e = 0, t = this.controls.length; e < t; e++) this.div.appendChild(this.controls[e].panel_div);
    },
    "activateControl": function(e) {
        if (!this.active) return !1;
        if (e.type != OpenLayers.Control.TYPE_BUTTON) if (e.type != OpenLayers.Control.TYPE_TOGGLE) if (this.allowDepress && e.active) e.deactivate(); else {
            for (var t, i = 0, n = this.controls.length; i < n; i++) (t = this.controls[i]) == e || t.type !== OpenLayers.Control.TYPE_TOOL && null != t.type || t.deactivate();
            e.activate();
        } else e.active ? e.deactivate() : e.activate(); else e.trigger();
    },
    "addControls": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]), this.controls = this.controls.concat(e);
        for (var t = 0, i = e.length; t < i; t++) {
            var n = e[t], s = this.createControlMarkup(n);
            OpenLayers.Element.addClass(s, n.displayClass + "ItemInactive"), OpenLayers.Element.addClass(s, "olButton"), 
            "" == n.title || s.title || (s.title = n.title), n.panel_div = s;
        }
        this.map && (this.addControlsToMap(e), this.redraw());
    },
    "createControlMarkup": function(e) {
        return document.createElement("div");
    },
    "addControlsToMap": function(e) {
        for (var t, i = 0, n = e.length; i < n; i++) !0 === (t = e[i]).autoActivate ? (t.autoActivate = !1, 
        this.map.addControl(t), t.autoActivate = !0) : (this.map.addControl(t), t.deactivate()), 
        t.events.on({
            "activate": this.iconOn,
            "deactivate": this.iconOff
        });
    },
    "iconOn": function() {
        var e = this.panel_div, t = new RegExp("\\b(" + this.displayClass + "Item)Inactive\\b");
        e.className = e.className.replace(t, "$1Active");
    },
    "iconOff": function() {
        var e = this.panel_div, t = new RegExp("\\b(" + this.displayClass + "Item)Active\\b");
        e.className = e.className.replace(t, "$1Inactive");
    },
    "onButtonClick": function(e) {
        for (var t = this.controls, i = e.buttonElement, n = t.length - 1; n >= 0; --n) if (t[n].panel_div === i) {
            this.activateControl(t[n]);
            break;
        }
    },
    "getControlsBy": function(e, t) {
        var i = "function" == typeof t.test;
        return OpenLayers.Array.filter(this.controls, function(n) {
            return n[e] == t || i && t.test(n[e]);
        });
    },
    "getControlsByName": function(e) {
        return this.getControlsBy("name", e);
    },
    "getControlsByClass": function(e) {
        return this.getControlsBy("CLASS_NAME", e);
    },
    "CLASS_NAME": "OpenLayers.Control.Panel"
}), OpenLayers.Handler.Box = OpenLayers.Class(OpenLayers.Handler, {
    "dragHandler": null,
    "boxDivClassName": "olHandlerBoxZoomBox",
    "boxOffsets": null,
    "initialize": function(e, t, i) {
        OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.dragHandler = new OpenLayers.Handler.Drag(this, {
            "down": this.startBox,
            "move": this.moveBox,
            "out": this.removeBox,
            "up": this.endBox
        }, {
            "keyMask": this.keyMask
        });
    },
    "destroy": function() {
        OpenLayers.Handler.prototype.destroy.apply(this, arguments), this.dragHandler && (this.dragHandler.destroy(), 
        this.dragHandler = null);
    },
    "setMap": function(e) {
        OpenLayers.Handler.prototype.setMap.apply(this, arguments), this.dragHandler && this.dragHandler.setMap(e);
    },
    "startBox": function(e) {
        this.callback("start", []), this.zoomBox = OpenLayers.Util.createDiv("zoomBox", {
            "x": -9999,
            "y": -9999
        }), this.zoomBox.className = this.boxDivClassName, this.zoomBox.style.zIndex = this.map.Z_INDEX_BASE.Popup - 1, 
        this.map.viewPortDiv.appendChild(this.zoomBox), OpenLayers.Element.addClass(this.map.viewPortDiv, "olDrawBox");
    },
    "moveBox": function(e) {
        var t = this.dragHandler.start.x, i = this.dragHandler.start.y, n = Math.abs(t - e.x), s = Math.abs(i - e.y), r = this.getBoxOffsets();
        this.zoomBox.style.width = n + r.width + 1 + "px", this.zoomBox.style.height = s + r.height + 1 + "px", 
        this.zoomBox.style.left = (e.x < t ? t - n - r.left : t - r.left) + "px", this.zoomBox.style.top = (e.y < i ? i - s - r.top : i - r.top) + "px";
    },
    "endBox": function(e) {
        var t;
        if (Math.abs(this.dragHandler.start.x - e.x) > 5 || Math.abs(this.dragHandler.start.y - e.y) > 5) {
            var i = this.dragHandler.start, n = Math.min(i.y, e.y), s = Math.max(i.y, e.y), r = Math.min(i.x, e.x), o = Math.max(i.x, e.x);
            t = new OpenLayers.Bounds(r, s, o, n);
        } else t = this.dragHandler.start.clone();
        this.removeBox(), this.callback("done", [ t ]);
    },
    "removeBox": function() {
        this.map.viewPortDiv.removeChild(this.zoomBox), this.zoomBox = null, this.boxOffsets = null, 
        OpenLayers.Element.removeClass(this.map.viewPortDiv, "olDrawBox");
    },
    "activate": function() {
        return !!OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.dragHandler.activate(), 
        !0);
    },
    "deactivate": function() {
        return !!OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.dragHandler.deactivate() && this.zoomBox && this.removeBox(), 
        !0);
    },
    "getBoxOffsets": function() {
        if (!this.boxOffsets) {
            var e = document.createElement("div");
            e.style.position = "absolute", e.style.border = "1px solid black", e.style.width = "3px", 
            document.body.appendChild(e);
            var t = 3 == e.clientWidth;
            document.body.removeChild(e);
            var i = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-left-width")), n = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-right-width")), s = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-top-width")), r = parseInt(OpenLayers.Element.getStyle(this.zoomBox, "border-bottom-width"));
            this.boxOffsets = {
                "left": i,
                "right": n,
                "top": s,
                "bottom": r,
                "width": !1 === t ? i + n : 0,
                "height": !1 === t ? s + r : 0
            };
        }
        return this.boxOffsets;
    },
    "CLASS_NAME": "OpenLayers.Handler.Box"
}), OpenLayers.Control.ZoomBox = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_TOOL,
    "out": !1,
    "keyMask": null,
    "alwaysZoom": !1,
    "zoomOnClick": !0,
    "draw": function() {
        this.handler = new OpenLayers.Handler.Box(this, {
            "done": this.zoomBox
        }, {
            "keyMask": this.keyMask
        });
    },
    "zoomBox": function(e) {
        if (e instanceof OpenLayers.Bounds) {
            var t, i = e.getCenterPixel();
            if (this.out) {
                var n = e.right - e.left, s = e.bottom - e.top, r = Math.min(this.map.size.h / s, this.map.size.w / n), o = this.map.getExtent(), a = this.map.getLonLatFromPixel(i), l = a.lon - o.getWidth() / 2 * r, h = a.lon + o.getWidth() / 2 * r, c = a.lat - o.getHeight() / 2 * r, u = a.lat + o.getHeight() / 2 * r;
                t = new OpenLayers.Bounds(l, c, h, u);
            } else {
                var p = this.map.getLonLatFromPixel({
                    "x": e.left,
                    "y": e.bottom
                }), d = this.map.getLonLatFromPixel({
                    "x": e.right,
                    "y": e.top
                });
                t = new OpenLayers.Bounds(p.lon, p.lat, d.lon, d.lat);
            }
            var f = this.map.getZoom(), m = this.map.getSize(), g = {
                "x": m.w / 2,
                "y": m.h / 2
            }, y = this.map.getZoomForExtent(t), v = this.map.getResolution(), L = this.map.getResolutionForZoom(y);
            if (v == L) this.map.setCenter(this.map.getLonLatFromPixel(i)); else {
                var w = {
                    "x": (v * i.x - L * g.x) / (v - L),
                    "y": (v * i.y - L * g.y) / (v - L)
                };
                this.map.zoomTo(y, w);
            }
            f == this.map.getZoom() && 1 == this.alwaysZoom && this.map.zoomTo(f + (this.out ? -1 : 1));
        } else this.zoomOnClick && (this.out ? this.map.zoomTo(this.map.getZoom() - 1, e) : this.map.zoomTo(this.map.getZoom() + 1, e));
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomBox"
}), OpenLayers.Handler.MouseWheel = OpenLayers.Class(OpenLayers.Handler, {
    "wheelListener": null,
    "interval": 0,
    "maxDelta": Number.POSITIVE_INFINITY,
    "delta": 0,
    "cumulative": !0,
    "initialize": function(e, t, i) {
        OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.wheelListener = OpenLayers.Function.bindAsEventListener(this.onWheelEvent, this);
    },
    "destroy": function() {
        OpenLayers.Handler.prototype.destroy.apply(this, arguments), this.wheelListener = null;
    },
    "onWheelEvent": function(e) {
        if (this.map && this.checkModifiers(e)) {
            for (var t = !1, i = !1, n = !1, s = OpenLayers.Event.element(e); null != s && !n && !t; ) {
                if (!t) try {
                    var r;
                    t = (r = s.currentStyle ? s.currentStyle.overflow : document.defaultView.getComputedStyle(s, null).getPropertyValue("overflow")) && "auto" == r || "scroll" == r;
                } catch (e) {}
                if (!i && !(i = OpenLayers.Element.hasClass(s, "olScrollable"))) for (var o = 0, a = this.map.layers.length; o < a; o++) {
                    var l = this.map.layers[o];
                    if (s == l.div || s == l.pane) {
                        i = !0;
                        break;
                    }
                }
                n = s == this.map.div, s = s.parentNode;
            }
            if (!t && n) {
                if (i) {
                    var h = 0;
                    if (e.wheelDelta ? ((h = e.wheelDelta) % 160 == 0 && (h *= .75), h /= 120) : e.detail && (h = -e.detail / Math.abs(e.detail)), 
                    this.delta += h, window.clearTimeout(this._timeoutId), this.interval && Math.abs(this.delta) < this.maxDelta) {
                        var c = OpenLayers.Util.extend({}, e);
                        this._timeoutId = window.setTimeout(OpenLayers.Function.bind(function() {
                            this.wheelZoom(c);
                        }, this), this.interval);
                    } else this.wheelZoom(e);
                }
                OpenLayers.Event.stop(e);
            }
        }
    },
    "wheelZoom": function(e) {
        var t = this.delta;
        this.delta = 0, t && (e.xy = this.map.events.getMousePosition(e), t < 0 ? this.callback("down", [ e, this.cumulative ? Math.max(-this.maxDelta, t) : -1 ]) : this.callback("up", [ e, this.cumulative ? Math.min(this.maxDelta, t) : 1 ]));
    },
    "activate": function(e) {
        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {
            var t = this.wheelListener;
            return OpenLayers.Event.observe(window, "DOMMouseScroll", t), OpenLayers.Event.observe(window, "mousewheel", t), 
            OpenLayers.Event.observe(document, "mousewheel", t), !0;
        }
        return !1;
    },
    "deactivate": function(e) {
        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {
            var t = this.wheelListener;
            return OpenLayers.Event.stopObserving(window, "DOMMouseScroll", t), OpenLayers.Event.stopObserving(window, "mousewheel", t), 
            OpenLayers.Event.stopObserving(document, "mousewheel", t), !0;
        }
        return !1;
    },
    "CLASS_NAME": "OpenLayers.Handler.MouseWheel"
}), OpenLayers.Handler.Click = OpenLayers.Class(OpenLayers.Handler, {
    "delay": 300,
    "single": !0,
    "double": !1,
    "pixelTolerance": 0,
    "dblclickTolerance": 13,
    "stopSingle": !1,
    "stopDouble": !1,
    "timerId": null,
    "down": null,
    "last": null,
    "first": null,
    "rightclickTimerId": null,
    "touchstart": function(e) {
        return this.startTouch(), this.down = this.getEventInfo(e), this.last = this.getEventInfo(e), 
        !0;
    },
    "touchmove": function(e) {
        return this.last = this.getEventInfo(e), !0;
    },
    "touchend": function(e) {
        return this.down && (e.xy = this.last.xy, e.lastTouches = this.last.touches, this.handleSingle(e), 
        this.down = null), !0;
    },
    "mousedown": function(e) {
        return this.down = this.getEventInfo(e), this.last = this.getEventInfo(e), !0;
    },
    "mouseup": function(e) {
        var t = !0;
        return this.checkModifiers(e) && this.control.handleRightClicks && OpenLayers.Event.isRightClick(e) && (t = this.rightclick(e)), 
        t;
    },
    "rightclick": function(e) {
        if (this.passesTolerance(e)) {
            if (null != this.rightclickTimerId) return this.clearTimer(), this.callback("dblrightclick", [ e ]), 
            !this.stopDouble;
            var t = this.double ? OpenLayers.Util.extend({}, e) : this.callback("rightclick", [ e ]), i = OpenLayers.Function.bind(this.delayedRightCall, this, t);
            this.rightclickTimerId = window.setTimeout(i, this.delay);
        }
        return !this.stopSingle;
    },
    "delayedRightCall": function(e) {
        this.rightclickTimerId = null, e && this.callback("rightclick", [ e ]);
    },
    "click": function(e) {
        return this.last || (this.last = this.getEventInfo(e)), this.handleSingle(e), !this.stopSingle;
    },
    "dblclick": function(e) {
        return this.handleDouble(e), !this.stopDouble;
    },
    "handleDouble": function(e) {
        this.passesDblclickTolerance(e) && (this.double && this.callback("dblclick", [ e ]), 
        this.clearTimer());
    },
    "handleSingle": function(e) {
        if (this.passesTolerance(e)) if (null != this.timerId) this.last.touches && 1 === this.last.touches.length && (this.double && OpenLayers.Event.preventDefault(e), 
        this.handleDouble(e)), this.last.touches && 2 === this.last.touches.length || this.clearTimer(); else {
            this.first = this.getEventInfo(e);
            var t = this.single ? OpenLayers.Util.extend({}, e) : null;
            this.queuePotentialClick(t);
        }
    },
    "queuePotentialClick": function(e) {
        this.timerId = window.setTimeout(OpenLayers.Function.bind(this.delayedCall, this, e), this.delay);
    },
    "passesTolerance": function(e) {
        var t = !0;
        if (null != this.pixelTolerance && this.down && this.down.xy && (t = this.pixelTolerance >= this.down.xy.distanceTo(e.xy)) && this.touch && this.down.touches.length === this.last.touches.length) for (var i = 0, n = this.down.touches.length; i < n; ++i) if (this.getTouchDistance(this.down.touches[i], this.last.touches[i]) > this.pixelTolerance) {
            t = !1;
            break;
        }
        return t;
    },
    "getTouchDistance": function(e, t) {
        return Math.sqrt(Math.pow(e.clientX - t.clientX, 2) + Math.pow(e.clientY - t.clientY, 2));
    },
    "passesDblclickTolerance": function(e) {
        var t = !0;
        return this.down && this.first && (t = this.down.xy.distanceTo(this.first.xy) <= this.dblclickTolerance), 
        t;
    },
    "clearTimer": function() {
        null != this.timerId && (window.clearTimeout(this.timerId), this.timerId = null), 
        null != this.rightclickTimerId && (window.clearTimeout(this.rightclickTimerId), 
        this.rightclickTimerId = null);
    },
    "delayedCall": function(e) {
        this.timerId = null, e && this.callback("click", [ e ]);
    },
    "getEventInfo": function(e) {
        var t;
        if (e.touches) {
            var i = e.touches.length;
            t = new Array(i);
            for (var n, s = 0; s < i; s++) n = e.touches[s], t[s] = {
                "clientX": n.olClientX,
                "clientY": n.olClientY
            };
        }
        return {
            "xy": e.xy,
            "touches": t
        };
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.clearTimer(), 
        this.down = null, this.first = null, this.last = null, e = !0), e;
    },
    "CLASS_NAME": "OpenLayers.Handler.Click"
}), OpenLayers.Control.Navigation = OpenLayers.Class(OpenLayers.Control, {
    "dragPan": null,
    "dragPanOptions": null,
    "pinchZoom": null,
    "pinchZoomOptions": null,
    "documentDrag": !1,
    "zoomBox": null,
    "zoomBoxEnabled": !0,
    "zoomWheelEnabled": !0,
    "mouseWheelOptions": null,
    "handleRightClicks": !1,
    "zoomBoxKeyMask": OpenLayers.Handler.MOD_SHIFT,
    "autoActivate": !0,
    "initialize": function(e) {
        this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, arguments);
    },
    "destroy": function() {
        this.deactivate(), this.dragPan && this.dragPan.destroy(), this.dragPan = null, 
        this.zoomBox && this.zoomBox.destroy(), this.zoomBox = null, this.pinchZoom && this.pinchZoom.destroy(), 
        this.pinchZoom = null, OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        return this.dragPan.activate(), this.zoomWheelEnabled && this.handlers.wheel.activate(), 
        this.handlers.click.activate(), this.zoomBoxEnabled && this.zoomBox.activate(), 
        this.pinchZoom && this.pinchZoom.activate(), OpenLayers.Control.prototype.activate.apply(this, arguments);
    },
    "deactivate": function() {
        return this.pinchZoom && this.pinchZoom.deactivate(), this.zoomBox.deactivate(), 
        this.dragPan.deactivate(), this.handlers.click.deactivate(), this.handlers.wheel.deactivate(), 
        OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "draw": function() {
        this.handleRightClicks && (this.map.viewPortDiv.oncontextmenu = OpenLayers.Function.False);
        var e = {
            "click": this.defaultClick,
            "dblclick": this.defaultDblClick,
            "dblrightclick": this.defaultDblRightClick
        }, t = {
            "double": !0,
            "stopDouble": !0
        };
        this.handlers.click = new OpenLayers.Handler.Click(this, e, t), this.dragPan = new OpenLayers.Control.DragPan(OpenLayers.Util.extend({
            "map": this.map,
            "documentDrag": this.documentDrag
        }, this.dragPanOptions)), this.zoomBox = new OpenLayers.Control.ZoomBox({
            "map": this.map,
            "keyMask": this.zoomBoxKeyMask
        }), this.dragPan.draw(), this.zoomBox.draw();
        var i = this.map.fractionalZoom ? {} : {
            "cumulative": !1,
            "interval": 50,
            "maxDelta": 6
        };
        this.handlers.wheel = new OpenLayers.Handler.MouseWheel(this, {
            "up": this.wheelUp,
            "down": this.wheelDown
        }, OpenLayers.Util.extend(i, this.mouseWheelOptions)), OpenLayers.Control.PinchZoom && (this.pinchZoom = new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({
            "map": this.map
        }, this.pinchZoomOptions)));
    },
    "defaultClick": function(e) {
        e.lastTouches && 2 == e.lastTouches.length && this.map.zoomOut();
    },
    "defaultDblClick": function(e) {
        this.map.zoomTo(this.map.zoom + 1, e.xy);
    },
    "defaultDblRightClick": function(e) {
        this.map.zoomTo(this.map.zoom - 1, e.xy);
    },
    "wheelChange": function(e, t) {
        this.map.fractionalZoom || (t = Math.round(t));
        var i = this.map.getZoom(), n = i + t;
        n = Math.max(n, 0), (n = Math.min(n, this.map.getNumZoomLevels())) !== i && this.map.zoomTo(n, e.xy);
    },
    "wheelUp": function(e, t) {
        this.wheelChange(e, t || 1);
    },
    "wheelDown": function(e, t) {
        this.wheelChange(e, t || -1);
    },
    "disableZoomBox": function() {
        this.zoomBoxEnabled = !1, this.zoomBox.deactivate();
    },
    "enableZoomBox": function() {
        this.zoomBoxEnabled = !0, this.active && this.zoomBox.activate();
    },
    "disableZoomWheel": function() {
        this.zoomWheelEnabled = !1, this.handlers.wheel.deactivate();
    },
    "enableZoomWheel": function() {
        this.zoomWheelEnabled = !0, this.active && this.handlers.wheel.activate();
    },
    "CLASS_NAME": "OpenLayers.Control.Navigation"
}), OpenLayers.Handler.Point = OpenLayers.Class(OpenLayers.Handler, {
    "point": null,
    "layer": null,
    "multi": !1,
    "citeCompliant": !1,
    "mouseDown": !1,
    "stoppedDown": null,
    "lastDown": null,
    "lastUp": null,
    "persist": !1,
    "stopDown": !1,
    "stopUp": !1,
    "layerOptions": null,
    "pixelTolerance": 5,
    "lastTouchPx": null,
    "initialize": function(e, t, i) {
        i && i.layerOptions && i.layerOptions.styleMap || (this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default, {})), 
        OpenLayers.Handler.prototype.initialize.apply(this, arguments);
    },
    "activate": function() {
        if (!OpenLayers.Handler.prototype.activate.apply(this, arguments)) return !1;
        var e = OpenLayers.Util.extend({
            "displayInLayerSwitcher": !1,
            "calculateInRange": OpenLayers.Function.True,
            "wrapDateLine": this.citeCompliant
        }, this.layerOptions);
        return this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, e), this.map.addLayer(this.layer), 
        !0;
    },
    "createFeature": function(e) {
        var t = this.layer.getLonLatFromViewPortPx(e), i = new OpenLayers.Geometry.Point(t.lon, t.lat);
        this.point = new OpenLayers.Feature.Vector(i), this.callback("create", [ this.point.geometry, this.point ]), 
        this.point.geometry.clearBounds(), this.layer.addFeatures([ this.point ], {
            "silent": !0
        });
    },
    "deactivate": function() {
        return !!OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.cancel(), 
        null != this.layer.map && (this.destroyFeature(!0), this.layer.destroy(!1)), this.layer = null, 
        !0);
    },
    "destroyFeature": function(e) {
        !this.layer || !e && this.persist || this.layer.destroyFeatures(), this.point = null;
    },
    "destroyPersistedFeature": function() {
        var e = this.layer;
        e && e.features.length > 1 && this.layer.features[0].destroy();
    },
    "finalize": function(e) {
        var t = e ? "cancel" : "done";
        this.mouseDown = !1, this.lastDown = null, this.lastUp = null, this.lastTouchPx = null, 
        this.callback(t, [ this.geometryClone() ]), this.destroyFeature(e);
    },
    "cancel": function() {
        this.finalize(!0);
    },
    "click": function(e) {
        return OpenLayers.Event.stop(e), !1;
    },
    "dblclick": function(e) {
        return OpenLayers.Event.stop(e), !1;
    },
    "modifyFeature": function(e) {
        this.point || this.createFeature(e);
        var t = this.layer.getLonLatFromViewPortPx(e);
        this.point.geometry.x = t.lon, this.point.geometry.y = t.lat, this.callback("modify", [ this.point.geometry, this.point, !1 ]), 
        this.point.geometry.clearBounds(), this.drawFeature();
    },
    "drawFeature": function() {
        this.layer.drawFeature(this.point, this.style);
    },
    "getGeometry": function() {
        var e = this.point && this.point.geometry;
        return e && this.multi && (e = new OpenLayers.Geometry.MultiPoint([ e ])), e;
    },
    "geometryClone": function() {
        var e = this.getGeometry();
        return e && e.clone();
    },
    "mousedown": function(e) {
        return this.down(e);
    },
    "touchstart": function(e) {
        return this.startTouch(), this.lastTouchPx = e.xy, this.down(e);
    },
    "mousemove": function(e) {
        return this.move(e);
    },
    "touchmove": function(e) {
        return this.lastTouchPx = e.xy, this.move(e);
    },
    "mouseup": function(e) {
        return this.up(e);
    },
    "touchend": function(e) {
        return e.xy = this.lastTouchPx, this.up(e);
    },
    "down": function(e) {
        return this.mouseDown = !0, this.lastDown = e.xy, this.touch || this.modifyFeature(e.xy), 
        this.stoppedDown = this.stopDown, !this.stopDown;
    },
    "move": function(e) {
        return this.touch || this.mouseDown && !this.stoppedDown || this.modifyFeature(e.xy), 
        !0;
    },
    "up": function(e) {
        return this.mouseDown = !1, this.stoppedDown = this.stopDown, !this.checkModifiers(e) || (!(!this.lastUp || !this.lastUp.equals(e.xy)) || (!this.lastDown || !this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance) || (this.touch && this.modifyFeature(e.xy), 
        this.persist && this.destroyPersistedFeature(), this.lastUp = e.xy, this.finalize(), 
        !this.stopUp)));
    },
    "mouseout": function(e) {
        OpenLayers.Util.mouseLeft(e, this.map.viewPortDiv) && (this.stoppedDown = this.stopDown, 
        this.mouseDown = !1);
    },
    "passesTolerance": function(e, t, i) {
        var n = !0;
        return null != i && e && t && e.distanceTo(t) > i && (n = !1), n;
    },
    "CLASS_NAME": "OpenLayers.Handler.Point"
}), OpenLayers.Handler.Path = OpenLayers.Class(OpenLayers.Handler.Point, {
    "line": null,
    "maxVertices": null,
    "doubleTouchTolerance": 20,
    "freehand": !1,
    "freehandToggle": "shiftKey",
    "timerId": null,
    "redoStack": null,
    "createFeature": function(e) {
        var t = this.layer.getLonLatFromViewPortPx(e), i = new OpenLayers.Geometry.Point(t.lon, t.lat);
        this.point = new OpenLayers.Feature.Vector(i), this.line = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([ this.point.geometry ])), 
        this.callback("create", [ this.point.geometry, this.getSketch() ]), this.point.geometry.clearBounds(), 
        this.layer.addFeatures([ this.line, this.point ], {
            "silent": !0
        });
    },
    "destroyFeature": function(e) {
        OpenLayers.Handler.Point.prototype.destroyFeature.call(this, e), this.line = null;
    },
    "destroyPersistedFeature": function() {
        var e = this.layer;
        e && e.features.length > 2 && this.layer.features[0].destroy();
    },
    "removePoint": function() {
        this.point && this.layer.removeFeatures([ this.point ]);
    },
    "addPoint": function(e) {
        this.layer.removeFeatures([ this.point ]);
        var t = this.layer.getLonLatFromViewPortPx(e);
        this.point = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon, t.lat)), 
        this.line.geometry.addComponent(this.point.geometry, this.line.geometry.components.length), 
        this.layer.addFeatures([ this.point ]), this.callback("point", [ this.point.geometry, this.getGeometry() ]), 
        this.callback("modify", [ this.point.geometry, this.getSketch() ]), this.drawFeature(), 
        delete this.redoStack;
    },
    "insertXY": function(e, t) {
        this.line.geometry.addComponent(new OpenLayers.Geometry.Point(e, t), this.getCurrentPointIndex()), 
        this.drawFeature(), delete this.redoStack;
    },
    "insertDeltaXY": function(e, t) {
        var i = this.getCurrentPointIndex() - 1, n = this.line.geometry.components[i];
        !n || isNaN(n.x) || isNaN(n.y) || this.insertXY(n.x + e, n.y + t);
    },
    "insertDirectionLength": function(e, t) {
        e *= Math.PI / 180;
        var i = t * Math.cos(e), n = t * Math.sin(e);
        this.insertDeltaXY(i, n);
    },
    "insertDeflectionLength": function(e, t) {
        var i = this.getCurrentPointIndex() - 1;
        if (i > 0) {
            var n = this.line.geometry.components[i], s = this.line.geometry.components[i - 1], r = Math.atan2(n.y - s.y, n.x - s.x);
            this.insertDirectionLength(180 * r / Math.PI + e, t);
        }
    },
    "getCurrentPointIndex": function() {
        return this.line.geometry.components.length - 1;
    },
    "undo": function() {
        var e = this.line.geometry, t = e.components, i = this.getCurrentPointIndex() - 1, n = t[i], s = e.removeComponent(n);
        if (s) {
            if (this.touch && i > 0) {
                var r = (t = e.components)[i - 1], o = t[this.getCurrentPointIndex()];
                o.x = r.x, o.y = r.y;
            }
            this.redoStack || (this.redoStack = []), this.redoStack.push(n), this.drawFeature();
        }
        return s;
    },
    "redo": function() {
        var e = this.redoStack && this.redoStack.pop();
        return e && (this.line.geometry.addComponent(e, this.getCurrentPointIndex()), this.drawFeature()), 
        !!e;
    },
    "freehandMode": function(e) {
        return this.freehandToggle && e[this.freehandToggle] ? !this.freehand : this.freehand;
    },
    "modifyFeature": function(e, t) {
        this.line || this.createFeature(e);
        var i = this.layer.getLonLatFromViewPortPx(e);
        this.point.geometry.x = i.lon, this.point.geometry.y = i.lat, this.callback("modify", [ this.point.geometry, this.getSketch(), t ]), 
        this.point.geometry.clearBounds(), this.drawFeature();
    },
    "drawFeature": function() {
        this.layer.drawFeature(this.line, this.style), this.layer.drawFeature(this.point, this.style);
    },
    "getSketch": function() {
        return this.line;
    },
    "getGeometry": function() {
        var e = this.line && this.line.geometry;
        return e && this.multi && (e = new OpenLayers.Geometry.MultiLineString([ e ])), 
        e;
    },
    "touchstart": function(e) {
        return this.timerId && this.passesTolerance(this.lastTouchPx, e.xy, this.doubleTouchTolerance) ? (this.finishGeometry(), 
        window.clearTimeout(this.timerId), this.timerId = null, !1) : (this.timerId && (window.clearTimeout(this.timerId), 
        this.timerId = null), this.timerId = window.setTimeout(OpenLayers.Function.bind(function() {
            this.timerId = null;
        }, this), 300), OpenLayers.Handler.Point.prototype.touchstart.call(this, e));
    },
    "down": function(e) {
        var t = this.stopDown;
        return this.freehandMode(e) && (t = !0, this.touch && (this.modifyFeature(e.xy, !!this.lastUp), 
        OpenLayers.Event.stop(e))), this.touch || this.lastDown && this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance) || this.modifyFeature(e.xy, !!this.lastUp), 
        this.mouseDown = !0, this.lastDown = e.xy, this.stoppedDown = t, !t;
    },
    "move": function(e) {
        return this.stoppedDown && this.freehandMode(e) ? (this.persist && this.destroyPersistedFeature(), 
        this.maxVertices && this.line && this.line.geometry.components.length === this.maxVertices ? (this.removePoint(), 
        this.finalize()) : this.addPoint(e.xy), !1) : (this.touch || this.mouseDown && !this.stoppedDown || this.modifyFeature(e.xy, !!this.lastUp), 
        !0);
    },
    "up": function(e) {
        return !this.mouseDown || this.lastUp && this.lastUp.equals(e.xy) || (this.stoppedDown && this.freehandMode(e) ? (this.persist && this.destroyPersistedFeature(), 
        this.removePoint(), this.finalize()) : this.passesTolerance(this.lastDown, e.xy, this.pixelTolerance) && (this.touch && this.modifyFeature(e.xy), 
        null == this.lastUp && this.persist && this.destroyPersistedFeature(), this.addPoint(e.xy), 
        this.lastUp = e.xy, this.line.geometry.components.length === this.maxVertices + 1 && this.finishGeometry())), 
        this.stoppedDown = this.stopDown, this.mouseDown = !1, !this.stopUp;
    },
    "finishGeometry": function() {
        var e = this.line.geometry.components.length - 1;
        this.line.geometry.removeComponent(this.line.geometry.components[e]), this.removePoint(), 
        this.finalize();
    },
    "dblclick": function(e) {
        return this.freehandMode(e) || this.finishGeometry(), !1;
    },
    "CLASS_NAME": "OpenLayers.Handler.Path"
}), OpenLayers.Handler.Polygon = OpenLayers.Class(OpenLayers.Handler.Path, {
    "holeModifier": null,
    "drawingHole": !1,
    "polygon": null,
    "createFeature": function(e) {
        var t = this.layer.getLonLatFromViewPortPx(e), i = new OpenLayers.Geometry.Point(t.lon, t.lat);
        this.point = new OpenLayers.Feature.Vector(i), this.line = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([ this.point.geometry ])), 
        this.polygon = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([ this.line.geometry ])), 
        this.callback("create", [ this.point.geometry, this.getSketch() ]), this.point.geometry.clearBounds(), 
        this.layer.addFeatures([ this.polygon, this.point ], {
            "silent": !0
        });
    },
    "addPoint": function(e) {
        if (!this.drawingHole && this.holeModifier && this.evt && this.evt[this.holeModifier]) for (var t, i, n = this.point.geometry, s = this.control.layer.features, r = s.length - 1; r >= 0; --r) if (((t = s[r].geometry) instanceof OpenLayers.Geometry.Polygon || t instanceof OpenLayers.Geometry.MultiPolygon) && t.intersects(n)) {
            i = s[r], this.control.layer.removeFeatures([ i ], {
                "silent": !0
            }), this.control.layer.events.registerPriority("sketchcomplete", this, this.finalizeInteriorRing), 
            this.control.layer.events.registerPriority("sketchmodified", this, this.enforceTopology), 
            i.geometry.addComponent(this.line.geometry), this.polygon = i, this.drawingHole = !0;
            break;
        }
        OpenLayers.Handler.Path.prototype.addPoint.apply(this, arguments);
    },
    "getCurrentPointIndex": function() {
        return this.line.geometry.components.length - 2;
    },
    "enforceTopology": function(e) {
        var t = e.vertex, i = this.line.geometry.components;
        if (!this.polygon.geometry.intersects(t)) {
            var n = i[i.length - 3];
            t.x = n.x, t.y = n.y;
        }
    },
    "finishGeometry": function() {
        var e = this.line.geometry.components.length - 2;
        this.line.geometry.removeComponent(this.line.geometry.components[e]), this.removePoint(), 
        this.finalize();
    },
    "finalizeInteriorRing": function() {
        var e = this.line.geometry, t = 0 !== e.getArea();
        if (t) {
            for (var i = this.polygon.geometry.components, n = i.length - 2; n >= 0; --n) if (e.intersects(i[n])) {
                t = !1;
                break;
            }
            if (t) {
                e: for (n = i.length - 2; n > 0; --n) for (var s = i[n].components, r = 0, o = s.length; r < o; ++r) if (e.containsPoint(s[r])) {
                    t = !1;
                    break e;
                }
            }
        }
        return t ? this.polygon.state !== OpenLayers.State.INSERT && (this.polygon.state = OpenLayers.State.UPDATE) : this.polygon.geometry.removeComponent(e), 
        this.restoreFeature(), !1;
    },
    "cancel": function() {
        return this.drawingHole && (this.polygon.geometry.removeComponent(this.line.geometry), 
        this.restoreFeature(!0)), OpenLayers.Handler.Path.prototype.cancel.apply(this, arguments);
    },
    "restoreFeature": function(e) {
        this.control.layer.events.unregister("sketchcomplete", this, this.finalizeInteriorRing), 
        this.control.layer.events.unregister("sketchmodified", this, this.enforceTopology), 
        this.layer.removeFeatures([ this.polygon ], {
            "silent": !0
        }), this.control.layer.addFeatures([ this.polygon ], {
            "silent": !0
        }), this.drawingHole = !1, e || this.control.layer.events.triggerEvent("sketchcomplete", {
            "feature": this.polygon
        });
    },
    "destroyFeature": function(e) {
        OpenLayers.Handler.Path.prototype.destroyFeature.call(this, e), this.polygon = null;
    },
    "drawFeature": function() {
        this.layer.drawFeature(this.polygon, this.style), this.layer.drawFeature(this.point, this.style);
    },
    "getSketch": function() {
        return this.polygon;
    },
    "getGeometry": function() {
        var e = this.polygon && this.polygon.geometry;
        return e && this.multi && (e = new OpenLayers.Geometry.MultiPolygon([ e ])), e;
    },
    "CLASS_NAME": "OpenLayers.Handler.Polygon"
}), OpenLayers.Control.EditingToolbar = OpenLayers.Class(OpenLayers.Control.Panel, {
    "citeCompliant": !1,
    "initialize": function(e, t) {
        OpenLayers.Control.Panel.prototype.initialize.apply(this, [ t ]), this.addControls([ new OpenLayers.Control.Navigation() ]);
        var i = [ new OpenLayers.Control.DrawFeature(e, OpenLayers.Handler.Point, {
            "displayClass": "olControlDrawFeaturePoint",
            "handlerOptions": {
                "citeCompliant": this.citeCompliant
            }
        }), new OpenLayers.Control.DrawFeature(e, OpenLayers.Handler.Path, {
            "displayClass": "olControlDrawFeaturePath",
            "handlerOptions": {
                "citeCompliant": this.citeCompliant
            }
        }), new OpenLayers.Control.DrawFeature(e, OpenLayers.Handler.Polygon, {
            "displayClass": "olControlDrawFeaturePolygon",
            "handlerOptions": {
                "citeCompliant": this.citeCompliant
            }
        }) ];
        this.addControls(i);
    },
    "draw": function() {
        var e = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);
        return null === this.defaultControl && (this.defaultControl = this.controls[0]), 
        e;
    },
    "CLASS_NAME": "OpenLayers.Control.EditingToolbar"
}), OpenLayers.Control.Geolocate = OpenLayers.Class(OpenLayers.Control, {
    "geolocation": null,
    "available": "geolocation" in navigator,
    "bind": !0,
    "watch": !1,
    "geolocationOptions": null,
    "destroy": function() {
        this.deactivate(), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        return this.available && !this.geolocation && (this.geolocation = navigator.geolocation), 
        this.geolocation ? !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.watch ? this.watchId = this.geolocation.watchPosition(OpenLayers.Function.bind(this.geolocate, this), OpenLayers.Function.bind(this.failure, this), this.geolocationOptions) : this.getCurrentLocation(), 
        !0) : (this.events.triggerEvent("locationuncapable"), !1);
    },
    "deactivate": function() {
        return this.active && null !== this.watchId && this.geolocation.clearWatch(this.watchId), 
        OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "geolocate": function(e) {
        var t = new OpenLayers.LonLat(e.coords.longitude, e.coords.latitude).transform(new OpenLayers.Projection("EPSG:4326"), this.map.getProjectionObject());
        this.bind && this.map.setCenter(t), this.events.triggerEvent("locationupdated", {
            "position": e,
            "point": new OpenLayers.Geometry.Point(t.lon, t.lat)
        });
    },
    "getCurrentLocation": function() {
        return !(!this.active || this.watch) && (this.geolocation.getCurrentPosition(OpenLayers.Function.bind(this.geolocate, this), OpenLayers.Function.bind(this.failure, this), this.geolocationOptions), 
        !0);
    },
    "failure": function(e) {
        this.events.triggerEvent("locationfailed", {
            "error": e
        });
    },
    "CLASS_NAME": "OpenLayers.Control.Geolocate"
}), OpenLayers.Handler.Hover = OpenLayers.Class(OpenLayers.Handler, {
    "delay": 500,
    "pixelTolerance": null,
    "stopMove": !1,
    "px": null,
    "timerId": null,
    "mousemove": function(e) {
        return this.passesTolerance(e.xy) && (this.clearTimer(), this.callback("move", [ e ]), 
        this.px = e.xy, e = OpenLayers.Util.extend({}, e), this.timerId = window.setTimeout(OpenLayers.Function.bind(this.delayedCall, this, e), this.delay)), 
        !this.stopMove;
    },
    "mouseout": function(e) {
        return OpenLayers.Util.mouseLeft(e, this.map.viewPortDiv) && (this.clearTimer(), 
        this.callback("move", [ e ])), !0;
    },
    "passesTolerance": function(e) {
        var t = !0;
        return this.pixelTolerance && this.px && Math.sqrt(Math.pow(this.px.x - e.x, 2) + Math.pow(this.px.y - e.y, 2)) < this.pixelTolerance && (t = !1), 
        t;
    },
    "clearTimer": function() {
        null != this.timerId && (window.clearTimeout(this.timerId), this.timerId = null);
    },
    "delayedCall": function(e) {
        this.callback("pause", [ e ]);
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.clearTimer(), 
        e = !0), e;
    },
    "CLASS_NAME": "OpenLayers.Handler.Hover"
}), OpenLayers.Control.GetFeature = OpenLayers.Class(OpenLayers.Control, {
    "protocol": null,
    "multipleKey": null,
    "toggleKey": null,
    "modifiers": null,
    "multiple": !1,
    "click": !0,
    "single": !0,
    "clickout": !0,
    "toggle": !1,
    "clickTolerance": 5,
    "hover": !1,
    "box": !1,
    "maxFeatures": 10,
    "features": null,
    "hoverFeature": null,
    "handlers": null,
    "hoverResponse": null,
    "filterType": OpenLayers.Filter.Spatial.BBOX,
    "initialize": function(e) {
        e.handlerOptions = e.handlerOptions || {}, OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.features = {}, this.handlers = {}, this.click && (this.handlers.click = new OpenLayers.Handler.Click(this, {
            "click": this.selectClick
        }, this.handlerOptions.click || {})), this.box && (this.handlers.box = new OpenLayers.Handler.Box(this, {
            "done": this.selectBox
        }, OpenLayers.Util.extend(this.handlerOptions.box, {
            "boxDivClassName": "olHandlerBoxSelectFeature"
        }))), this.hover && (this.handlers.hover = new OpenLayers.Handler.Hover(this, {
            "move": this.cancelHover,
            "pause": this.selectHover
        }, OpenLayers.Util.applyDefaults(this.handlerOptions.hover, {
            "delay": 250,
            "pixelTolerance": 2
        })));
    },
    "activate": function() {
        if (!this.active) for (var e in this.handlers) this.handlers[e].activate();
        return OpenLayers.Control.prototype.activate.apply(this, arguments);
    },
    "deactivate": function() {
        if (this.active) for (var e in this.handlers) this.handlers[e].deactivate();
        return OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "selectClick": function(e) {
        var t = this.pixelToBounds(e.xy);
        this.setModifiers(e), this.request(t, {
            "single": this.single
        });
    },
    "selectBox": function(e) {
        var t;
        if (e instanceof OpenLayers.Bounds) {
            var i = this.map.getLonLatFromPixel({
                "x": e.left,
                "y": e.bottom
            }), n = this.map.getLonLatFromPixel({
                "x": e.right,
                "y": e.top
            });
            t = new OpenLayers.Bounds(i.lon, i.lat, n.lon, n.lat);
        } else {
            if (this.click) return;
            t = this.pixelToBounds(e);
        }
        this.setModifiers(this.handlers.box.dragHandler.evt), this.request(t);
    },
    "selectHover": function(e) {
        var t = this.pixelToBounds(e.xy);
        this.request(t, {
            "single": !0,
            "hover": !0
        });
    },
    "cancelHover": function() {
        this.hoverResponse && (this.protocol.abort(this.hoverResponse), this.hoverResponse = null, 
        OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait"));
    },
    "request": function(e, t) {
        t = t || {};
        var i = new OpenLayers.Filter.Spatial({
            "type": this.filterType,
            "value": e
        });
        OpenLayers.Element.addClass(this.map.viewPortDiv, "olCursorWait");
        var n = this.protocol.read({
            "maxFeatures": 1 == t.single ? this.maxFeatures : void 0,
            "filter": i,
            "callback": function(i) {
                i.success() && (i.features.length ? 1 == t.single ? this.selectBestFeature(i.features, e.getCenterLonLat(), t) : this.select(i.features) : t.hover ? this.hoverSelect() : (this.events.triggerEvent("clickout"), 
                this.clickout && this.unselectAll())), OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait");
            },
            "scope": this
        });
        1 == t.hover && (this.hoverResponse = n);
    },
    "selectBestFeature": function(e, t, i) {
        if (i = i || {}, e.length) {
            for (var n, s, r, o = new OpenLayers.Geometry.Point(t.lon, t.lat), a = Number.MAX_VALUE, l = 0; l < e.length && !((n = e[l]).geometry && (r = o.distanceTo(n.geometry, {
                "edge": !1
            })) < a && (a = r, s = n, 0 == a)); ++l) ;
            1 == i.hover ? this.hoverSelect(s) : this.select(s || e);
        }
    },
    "setModifiers": function(e) {
        this.modifiers = {
            "multiple": this.multiple || this.multipleKey && e[this.multipleKey],
            "toggle": this.toggle || this.toggleKey && e[this.toggleKey]
        };
    },
    "select": function(e) {
        this.modifiers.multiple || this.modifiers.toggle || this.unselectAll(), OpenLayers.Util.isArray(e) || (e = [ e ]);
        var t = this.events.triggerEvent("beforefeaturesselected", {
            "features": e
        });
        if (!1 !== t) {
            for (var i, n = [], s = 0, r = e.length; s < r; ++s) i = e[s], this.features[i.fid || i.id] ? this.modifiers.toggle && this.unselect(this.features[i.fid || i.id]) : !1 !== (t = this.events.triggerEvent("beforefeatureselected", {
                "feature": i
            })) && (this.features[i.fid || i.id] = i, n.push(i), this.events.triggerEvent("featureselected", {
                "feature": i
            }));
            this.events.triggerEvent("featuresselected", {
                "features": n
            });
        }
    },
    "hoverSelect": function(e) {
        var t = e ? e.fid || e.id : null, i = this.hoverFeature ? this.hoverFeature.fid || this.hoverFeature.id : null;
        i && i != t && (this.events.triggerEvent("outfeature", {
            "feature": this.hoverFeature
        }), this.hoverFeature = null), t && t != i && (this.events.triggerEvent("hoverfeature", {
            "feature": e
        }), this.hoverFeature = e);
    },
    "unselect": function(e) {
        delete this.features[e.fid || e.id], this.events.triggerEvent("featureunselected", {
            "feature": e
        });
    },
    "unselectAll": function() {
        for (var e in this.features) this.unselect(this.features[e]);
    },
    "setMap": function(e) {
        for (var t in this.handlers) this.handlers[t].setMap(e);
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "pixelToBounds": function(e) {
        var t = e.add(-this.clickTolerance / 2, this.clickTolerance / 2), i = e.add(this.clickTolerance / 2, -this.clickTolerance / 2), n = this.map.getLonLatFromPixel(t), s = this.map.getLonLatFromPixel(i);
        return new OpenLayers.Bounds(n.lon, n.lat, s.lon, s.lat);
    },
    "CLASS_NAME": "OpenLayers.Control.GetFeature"
}), OpenLayers.Layer.Vector = OpenLayers.Class(OpenLayers.Layer, {
    "isBaseLayer": !1,
    "isFixed": !1,
    "features": null,
    "filter": null,
    "selectedFeatures": null,
    "unrenderedFeatures": null,
    "reportError": !0,
    "style": null,
    "styleMap": null,
    "strategies": null,
    "protocol": null,
    "renderers": [ "SVG", "VML", "Canvas" ],
    "renderer": null,
    "rendererOptions": null,
    "geometryType": null,
    "drawn": !1,
    "ratio": 1,
    "initialize": function(e, t) {
        if (OpenLayers.Layer.prototype.initialize.apply(this, arguments), this.renderer && this.renderer.supported() || this.assignRenderer(), 
        this.renderer && this.renderer.supported() || (this.renderer = null, this.displayError()), 
        this.styleMap || (this.styleMap = new OpenLayers.StyleMap()), this.features = [], 
        this.selectedFeatures = [], this.unrenderedFeatures = {}, this.strategies) for (var i = 0, n = this.strategies.length; i < n; i++) this.strategies[i].setLayer(this);
    },
    "destroy": function() {
        if (this.strategies) {
            var e, t, i;
            for (t = 0, i = this.strategies.length; t < i; t++) (e = this.strategies[t]).autoDestroy && e.destroy();
            this.strategies = null;
        }
        this.protocol && (this.protocol.autoDestroy && this.protocol.destroy(), this.protocol = null), 
        this.destroyFeatures(), this.features = null, this.selectedFeatures = null, this.unrenderedFeatures = null, 
        this.renderer && this.renderer.destroy(), this.renderer = null, this.geometryType = null, 
        this.drawn = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "clone": function(e) {
        null == e && (e = new OpenLayers.Layer.Vector(this.name, this.getOptions())), e = OpenLayers.Layer.prototype.clone.apply(this, [ e ]);
        for (var t = this.features, i = t.length, n = new Array(i), s = 0; s < i; ++s) n[s] = t[s].clone();
        return e.features = n, e;
    },
    "refresh": function(e) {
        this.calculateInRange() && this.visibility && this.events.triggerEvent("refresh", e);
    },
    "assignRenderer": function() {
        for (var e = 0, t = this.renderers.length; e < t; e++) {
            var i = this.renderers[e], n = "function" == typeof i ? i : OpenLayers.Renderer[i];
            if (n && n.prototype.supported()) {
                this.renderer = new n(this.div, this.rendererOptions);
                break;
            }
        }
    },
    "displayError": function() {
        this.reportError && OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported", {
            "renderers": this.renderers.join("\n")
        }));
    },
    "setMap": function(e) {
        if (OpenLayers.Layer.prototype.setMap.apply(this, arguments), this.renderer) {
            this.renderer.map = this.map;
            var t = this.map.getSize();
            t.w = t.w * this.ratio, t.h = t.h * this.ratio, this.renderer.setSize(t);
        } else this.map.removeLayer(this);
    },
    "afterAdd": function() {
        if (this.strategies) {
            var e, t, i;
            for (t = 0, i = this.strategies.length; t < i; t++) (e = this.strategies[t]).autoActivate && e.activate();
        }
    },
    "removeMap": function(e) {
        if (this.drawn = !1, this.strategies) {
            var t, i, n;
            for (i = 0, n = this.strategies.length; i < n; i++) (t = this.strategies[i]).autoActivate && t.deactivate();
        }
    },
    "onMapResize": function() {
        OpenLayers.Layer.prototype.onMapResize.apply(this, arguments);
        var e = this.map.getSize();
        e.w = e.w * this.ratio, e.h = e.h * this.ratio, this.renderer.setSize(e);
    },
    "moveTo": function(e, t, i) {
        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);
        var n = !0;
        if (!i) {
            this.renderer.root.style.visibility = "hidden";
            var s = this.map.getSize(), r = s.w, o = s.h, a = r / 2 * this.ratio - r / 2, l = o / 2 * this.ratio - o / 2;
            a += this.map.layerContainerOriginPx.x, a = -Math.round(a), l += this.map.layerContainerOriginPx.y, 
            l = -Math.round(l), this.div.style.left = a + "px", this.div.style.top = l + "px";
            var h = this.map.getExtent().scale(this.ratio);
            if (n = this.renderer.setExtent(h, t), this.renderer.root.style.visibility = "visible", 
            !0 === OpenLayers.IS_GECKO && (this.div.scrollLeft = this.div.scrollLeft), !t && n) for (var c in this.unrenderedFeatures) {
                u = this.unrenderedFeatures[c];
                this.drawFeature(u);
            }
        }
        if (!this.drawn || t || !n) {
            this.drawn = !0;
            for (var u, c = 0, p = this.features.length; c < p; c++) this.renderer.locked = c !== p - 1, 
            u = this.features[c], this.drawFeature(u);
        }
    },
    "display": function(e) {
        OpenLayers.Layer.prototype.display.apply(this, arguments);
        var t = this.div.style.display;
        t != this.renderer.root.style.display && (this.renderer.root.style.display = t);
    },
    "addFeatures": function(e, t) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        var i = !t || !t.silent;
        if (i) {
            var n = {
                "features": e
            };
            if (!1 === this.events.triggerEvent("beforefeaturesadded", n)) return;
            e = n.features;
        }
        for (var s = [], r = 0, o = e.length; r < o; r++) {
            r != e.length - 1 ? this.renderer.locked = !0 : this.renderer.locked = !1;
            var a = e[r];
            if (this.geometryType && !(a.geometry instanceof this.geometryType)) throw new TypeError("addFeatures: component should be an " + this.geometryType.prototype.CLASS_NAME);
            if (a.layer = this, !a.style && this.style && (a.style = OpenLayers.Util.extend({}, this.style)), 
            i) {
                if (!1 === this.events.triggerEvent("beforefeatureadded", {
                    "feature": a
                })) continue;
                this.preFeatureInsert(a);
            }
            s.push(a), this.features.push(a), this.drawFeature(a), i && (this.events.triggerEvent("featureadded", {
                "feature": a
            }), this.onFeatureInsert(a));
        }
        i && this.events.triggerEvent("featuresadded", {
            "features": s
        });
    },
    "removeFeatures": function(e, t) {
        if (e && 0 !== e.length) {
            if (e === this.features) return this.removeAllFeatures(t);
            OpenLayers.Util.isArray(e) || (e = [ e ]), e === this.selectedFeatures && (e = e.slice());
            var i = !t || !t.silent;
            i && this.events.triggerEvent("beforefeaturesremoved", {
                "features": e
            });
            for (var n = e.length - 1; n >= 0; n--) {
                0 != n && e[n - 1].geometry ? this.renderer.locked = !0 : this.renderer.locked = !1;
                var s = e[n];
                delete this.unrenderedFeatures[s.id], i && this.events.triggerEvent("beforefeatureremoved", {
                    "feature": s
                }), this.features = OpenLayers.Util.removeItem(this.features, s), s.layer = null, 
                s.geometry && this.renderer.eraseFeatures(s), -1 != OpenLayers.Util.indexOf(this.selectedFeatures, s) && OpenLayers.Util.removeItem(this.selectedFeatures, s), 
                i && this.events.triggerEvent("featureremoved", {
                    "feature": s
                });
            }
            i && this.events.triggerEvent("featuresremoved", {
                "features": e
            });
        }
    },
    "removeAllFeatures": function(e) {
        var t = !e || !e.silent, i = this.features;
        t && this.events.triggerEvent("beforefeaturesremoved", {
            "features": i
        });
        for (var n, s = i.length - 1; s >= 0; s--) n = i[s], t && this.events.triggerEvent("beforefeatureremoved", {
            "feature": n
        }), n.layer = null, t && this.events.triggerEvent("featureremoved", {
            "feature": n
        });
        this.renderer.clear(), this.features = [], this.unrenderedFeatures = {}, this.selectedFeatures = [], 
        t && this.events.triggerEvent("featuresremoved", {
            "features": i
        });
    },
    "destroyFeatures": function(e, t) {
        if (void 0 == e && (e = this.features), e) {
            this.removeFeatures(e, t);
            for (var i = e.length - 1; i >= 0; i--) e[i].destroy();
        }
    },
    "drawFeature": function(e, t) {
        if (this.drawn) {
            if ("object" != typeof t) {
                t || e.state !== OpenLayers.State.DELETE || (t = "delete");
                var i = t || e.renderIntent;
                (t = e.style || this.style) || (t = this.styleMap.createSymbolizer(e, i));
            }
            var n = this.renderer.drawFeature(e, t);
            !1 === n || null === n ? this.unrenderedFeatures[e.id] = e : delete this.unrenderedFeatures[e.id];
        }
    },
    "eraseFeatures": function(e) {
        this.renderer.eraseFeatures(e);
    },
    "getFeatureFromEvent": function(e) {
        if (!this.renderer) throw new Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");
        var t = null, i = this.renderer.getFeatureIdFromEvent(e);
        return i && (t = "string" == typeof i ? this.getFeatureById(i) : i), t;
    },
    "getFeatureBy": function(e, t) {
        for (var i = null, n = 0, s = this.features.length; n < s; ++n) if (this.features[n][e] == t) {
            i = this.features[n];
            break;
        }
        return i;
    },
    "getFeatureById": function(e) {
        return this.getFeatureBy("id", e);
    },
    "getFeatureByFid": function(e) {
        return this.getFeatureBy("fid", e);
    },
    "getFeaturesByAttribute": function(e, t) {
        var i, n, s = this.features.length, r = [];
        for (i = 0; i < s; i++) (n = this.features[i]) && n.attributes && n.attributes[e] === t && r.push(n);
        return r;
    },
    "onFeatureInsert": function(e) {},
    "preFeatureInsert": function(e) {},
    "getDataExtent": function() {
        var e = null, t = this.features;
        if (t && t.length > 0) for (var i = null, n = 0, s = t.length; n < s; n++) (i = t[n].geometry) && (null === e && (e = new OpenLayers.Bounds()), 
        e.extend(i.getBounds()));
        return e;
    },
    "CLASS_NAME": "OpenLayers.Layer.Vector"
}), OpenLayers.Control.Graticule = OpenLayers.Class(OpenLayers.Control, {
    "autoActivate": !0,
    "intervals": [ 90, 45, 30, 20, 10, 5, 2, 1, .5, .2, .1, .05, .01, .005, .002, .001 ],
    "intervalHeights": null,
    "intervalHeightFactor": 1,
    "displayInLayerSwitcher": !0,
    "visible": !0,
    "numPoints": 50,
    "targetSize": 200,
    "layerName": null,
    "labelled": !0,
    "labelFormat": "dm",
    "labelLonYOffset": 2,
    "labelLatXOffset": -2,
    "lineSymbolizer": {
        "strokeColor": "#333",
        "strokeWidth": 1,
        "strokeOpacity": .5
    },
    "labelSymbolizer": null,
    "gratLayer": null,
    "epsg4326Projection": null,
    "projection": null,
    "projectionCenterLonLat": null,
    "maxLat": 1 / 0,
    "maxLon": 1 / 0,
    "minLat": -1 / 0,
    "minLon": -1 / 0,
    "meridians": null,
    "parallels": null,
    "initialize": function(e) {
        (e = e || {}).layerName = e.layerName || OpenLayers.i18n("Graticule"), OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.labelSymbolizer = {
            "stroke": !1,
            "fill": !1,
            "label": "${label}",
            "labelAlign": "${labelAlign}",
            "labelXOffset": "${xOffset}",
            "labelYOffset": "${yOffset}"
        }, this.epsg4326Projection = new OpenLayers.Projection("EPSG:4326"), this.parallels = [], 
        this.meridians = [];
    },
    "destroy": function() {
        this.deactivate(), OpenLayers.Control.prototype.destroy.apply(this, arguments), 
        this.gratLayer && (this.gratLayer.destroy(), this.gratLayer = null);
    },
    "draw": function() {
        if (OpenLayers.Control.prototype.draw.apply(this, arguments), !this.gratLayer) {
            var e = new OpenLayers.Style({}, {
                "rules": [ new OpenLayers.Rule({
                    "symbolizer": {
                        "Point": this.labelSymbolizer,
                        "Line": this.lineSymbolizer
                    }
                }) ]
            });
            this.gratLayer = new OpenLayers.Layer.Vector(this.layerName, {
                "styleMap": new OpenLayers.StyleMap({
                    "default": e
                }),
                "visibility": this.visible,
                "displayInLayerSwitcher": this.displayInLayerSwitcher,
                "renderers": [ "Canvas", "VML", "SVG" ]
            });
        }
        return this.div;
    },
    "activate": function() {
        return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.map.addLayer(this.gratLayer), 
        this.map.events.register("moveend", this, this.update), this.update(), !0);
    },
    "deactivate": function() {
        return !!OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.map.events.unregister("moveend", this, this.update), 
        this.map.removeLayer(this.gratLayer), !0);
    },
    "update": function() {
        var e = this.map, t = this.map.getExtent();
        if (t) {
            var i = e.getCenter(), n = e.getProjectionObject(), s = e.getResolution(), r = s * s / 4;
            if ((!this.projection || !this.projection.equals(n)) && this.updateProjectionInfo(n), 
            this.createGraticule(t, i, s, r), this.gratLayer.destroyFeatures(), this.gratLayer.addFeatures(this.meridians), 
            this.gratLayer.addFeatures(this.parallels), this.labelled) {
                var o, a, l, h, c, u, p = new OpenLayers.Geometry.LineString([ new OpenLayers.Geometry.Point(t.left, t.bottom), new OpenLayers.Geometry.Point(t.left, t.top) ]), d = new OpenLayers.Geometry.LineString([ new OpenLayers.Geometry.Point(t.left, t.top), new OpenLayers.Geometry.Point(t.right, t.top) ]), f = [];
                for (o = 0, a = this.meridians.length; o < a; ++o) u = "cb", (h = (l = this.meridians[o]).attributes.labelPoint) || (c = l.geometry.split(p)) && (h = c[0].components[1], 
                u = "lt"), h && f.push(new OpenLayers.Feature.Vector(h, {
                    "value": l.attributes.lon,
                    "label": OpenLayers.Util.getFormattedLonLat(l.attributes.lon, "lon", this.labelFormat),
                    "labelAlign": u,
                    "xOffset": 0,
                    "yOffset": this.labelLonYOffset
                }));
                for (o = 0, a = this.parallels.length; o < a; ++o) u = "rb", (h = (l = this.parallels[o]).attributes.labelPoint) || (c = l.geometry.split(d)) && (h = c[0].components[1], 
                u = "ct"), h && f.push(new OpenLayers.Feature.Vector(h, {
                    "value": l.attributes.lat,
                    "label": OpenLayers.Util.getFormattedLonLat(l.attributes.lat, "lat", this.labelFormat),
                    "labelAlign": u,
                    "xOffset": this.labelLatXOffset,
                    "yOffset": 2
                }));
                this.gratLayer.addFeatures(f);
            }
        }
    },
    "createGraticule": function(e, t, i, n) {
        var s = t.clone().transform(this.projection, this.epsg4326Projection);
        (isNaN(s.lon) || isNaN(s.lat)) && (s = t.add(1e-9, 1e-9).transform(this.projection, this.epsg4326Projection));
        var r, o, a, l, h = e.toGeometry(), c = e.clone().transform(this.projection, this.epsg4326Projection), u = this.map.getGeodesicPixelSize();
        u.w < .5 && u.h < .5 && c.right > c.left && c.top > c.bottom && Math.abs(c.bottom) / c.bottom == Math.abs(c.top) / c.top && Math.abs(c.left) / c.left == Math.abs(c.right) / c.right ? (r = Math.max(c.left, this.minLon), 
        o = Math.max(c.bottom, this.minLat), a = Math.min(c.right, this.maxLon), l = Math.min(c.top, this.maxLat)) : (r = this.minLon, 
        o = this.minLat, a = this.maxLon, l = this.maxLat);
        var p, d, f, m, g, y, v, L, w, b = this.map.getSize();
        g = Math.ceil(b.w / this.targetSize), v = 0;
        do {
            for (y = this.intervals[v++], L = Math.floor(s.lon / y) * y, f = Math.max(L, this.minLon), 
            f = Math.min(f, this.maxLon), p = this.addMeridian(f, o, l, n, h, 0); f != this.minLon && (f = Math.max(f - y, this.minLon), 
            d = p, p = this.addMeridian(f, o, l, n, h, p), d != p); ) ;
            for (f = Math.max(L, this.minLon), f = Math.min(f, this.maxLon); f != this.maxLon && (f = Math.min(f + y, this.maxLon), 
            d = p, p = this.addMeridian(f, o, l, n, h, p), d != p); ) ;
        } while (v < this.intervals.length && p <= g);
        this.meridians.length = p, g = Math.ceil(b.h / this.targetSize), v = 0;
        do {
            for (y = this.intervalHeights ? this.intervalHeights[v++] : this.intervals[v++] * this.intervalHeightFactor, 
            w = Math.floor(s.lat / y) * y, m = Math.max(w, this.minLat), m = Math.min(m, this.maxLat), 
            p = this.addParallel(m, r, a, n, h, 0); m != this.minLat && (m = Math.max(m - y, this.minLat), 
            d = p, p = this.addParallel(m, r, a, n, h, p), d != p); ) ;
            for (m = Math.max(w, this.minLat), m = Math.min(m, this.maxLat); m != this.maxLat && (m = Math.min(m + y, this.maxLat), 
            d = p, p = this.addParallel(m, r, a, n, h, p), d != p); ) ;
        } while (v < this.intervals.length && p <= g);
        this.parallels.length = p;
    },
    "updateProjectionInfo": function(e) {
        var t = OpenLayers.Projection.defaults[e.getCode()], i = t && t.maxExtent ? OpenLayers.Bounds.fromArray(t.maxExtent) : this.map.getMaxExtent(), n = t && t.worldExtent ? t.worldExtent : [ -180, -90, 180, 90 ];
        this.maxLat = n[3], this.maxLon = n[2], this.minLat = n[1], this.minLon = n[0], 
        this.projectionCenterLonLat = i.clone().transform(e, this.epsg4326Projection).getCenterLonLat(), 
        this.projection = e;
    },
    "addMeridian": function(e, t, i, n, s, r) {
        var o = OpenLayers.Geometry.LineString.geodesicMeridian(e, t, i, this.projection, n), a = o.split(new OpenLayers.Geometry.LineString(s.components[0].components.slice(0, 2)));
        return (a || s.intersects(o)) && (this.meridians[r++] = new OpenLayers.Feature.Vector(o, {
            "lon": e,
            "labelPoint": a ? a[0].components[1] : void 0
        })), r;
    },
    "addParallel": function(e, t, i, n, s, r) {
        var o = OpenLayers.Geometry.LineString.geodesicParallel(e, t, i, this.projection, n), a = o.split(new OpenLayers.Geometry.LineString(s.components[0].components.slice(1, 3)));
        return (a || s.intersects(o)) && (this.parallels[r++] = new OpenLayers.Feature.Vector(o, {
            "lat": e,
            "labelPoint": a ? a[0].components[1] : void 0
        })), r;
    },
    "CLASS_NAME": "OpenLayers.Control.Graticule"
}), OpenLayers.Handler.Keyboard = OpenLayers.Class(OpenLayers.Handler, {
    "KEY_EVENTS": [ "keydown", "keyup" ],
    "eventListener": null,
    "observeElement": null,
    "initialize": function(e, t, i) {
        OpenLayers.Handler.prototype.initialize.apply(this, arguments), this.eventListener = OpenLayers.Function.bindAsEventListener(this.handleKeyEvent, this);
    },
    "destroy": function() {
        this.deactivate(), this.eventListener = null, OpenLayers.Handler.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {
            this.observeElement = this.observeElement || document;
            for (var e = 0, t = this.KEY_EVENTS.length; e < t; e++) OpenLayers.Event.observe(this.observeElement, this.KEY_EVENTS[e], this.eventListener);
            return !0;
        }
        return !1;
    },
    "deactivate": function() {
        var e = !1;
        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {
            for (var t = 0, i = this.KEY_EVENTS.length; t < i; t++) OpenLayers.Event.stopObserving(this.observeElement, this.KEY_EVENTS[t], this.eventListener);
            e = !0;
        }
        return e;
    },
    "handleKeyEvent": function(e) {
        this.checkModifiers(e) && this.callback(e.type, [ e ]);
    },
    "CLASS_NAME": "OpenLayers.Handler.Keyboard"
}), OpenLayers.Control.KeyboardDefaults = OpenLayers.Class(OpenLayers.Control, {
    "autoActivate": !0,
    "slideFactor": 75,
    "observeElement": null,
    "draw": function() {
        var e = this.observeElement || document;
        this.handler = new OpenLayers.Handler.Keyboard(this, {
            "keydown": this.defaultKeyPress
        }, {
            "observeElement": e
        });
    },
    "defaultKeyPress": function(e) {
        var t, i = !0, n = OpenLayers.Event.element(e);
        if (!n || "INPUT" != n.tagName && "TEXTAREA" != n.tagName && "SELECT" != n.tagName) {
            switch (e.keyCode) {
              case OpenLayers.Event.KEY_LEFT:
                this.map.pan(-this.slideFactor, 0);
                break;

              case OpenLayers.Event.KEY_RIGHT:
                this.map.pan(this.slideFactor, 0);
                break;

              case OpenLayers.Event.KEY_UP:
                this.map.pan(0, -this.slideFactor);
                break;

              case OpenLayers.Event.KEY_DOWN:
                this.map.pan(0, this.slideFactor);
                break;

              case 33:
                t = this.map.getSize(), this.map.pan(0, -.75 * t.h);
                break;

              case 34:
                t = this.map.getSize(), this.map.pan(0, .75 * t.h);
                break;

              case 35:
                t = this.map.getSize(), this.map.pan(.75 * t.w, 0);
                break;

              case 36:
                t = this.map.getSize(), this.map.pan(-.75 * t.w, 0);
                break;

              case 43:
              case 61:
              case 187:
              case 107:
                this.map.zoomIn();
                break;

              case 45:
              case 109:
              case 189:
              case 95:
                this.map.zoomOut();
                break;

              default:
                i = !1;
            }
            i && OpenLayers.Event.stop(e);
        }
    },
    "CLASS_NAME": "OpenLayers.Control.KeyboardDefaults"
}), OpenLayers.Control.LayerSwitcher = OpenLayers.Class(OpenLayers.Control, {
    "layerStates": null,
    "layersDiv": null,
    "baseLayersDiv": null,
    "baseLayers": null,
    "dataLbl": null,
    "dataLayersDiv": null,
    "dataLayers": null,
    "minimizeDiv": null,
    "maximizeDiv": null,
    "ascending": !0,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, arguments), this.layerStates = [];
    },
    "destroy": function() {
        this.clearLayersArray("base"), this.clearLayersArray("data"), this.map.events.un({
            "buttonclick": this.onButtonClick,
            "addlayer": this.redraw,
            "changelayer": this.redraw,
            "removelayer": this.redraw,
            "changebaselayer": this.redraw,
            "scope": this
        }), this.events.unregister("buttonclick", this, this.onButtonClick), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments), this.map.events.on({
            "addlayer": this.redraw,
            "changelayer": this.redraw,
            "removelayer": this.redraw,
            "changebaselayer": this.redraw,
            "scope": this
        }), this.outsideViewport ? (this.events.attachToElement(this.div), this.events.register("buttonclick", this, this.onButtonClick)) : this.map.events.register("buttonclick", this, this.onButtonClick);
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this), this.loadContents(), this.outsideViewport || this.minimizeControl(), 
        this.redraw(), this.div;
    },
    "onButtonClick": function(e) {
        var t = e.buttonElement;
        t === this.minimizeDiv ? this.minimizeControl() : t === this.maximizeDiv ? this.maximizeControl() : t._layerSwitcher === this.id && (t.for && (t = document.getElementById(t.for)), 
        t.disabled || ("radio" == t.type ? (t.checked = !0, this.map.setBaseLayer(this.map.getLayer(t._layer))) : (t.checked = !t.checked, 
        this.updateMap())));
    },
    "clearLayersArray": function(e) {
        this[e + "LayersDiv"].innerHTML = "", this[e + "Layers"] = [];
    },
    "checkRedraw": function() {
        if (!this.layerStates.length || this.map.layers.length != this.layerStates.length) return !0;
        for (var e = 0, t = this.layerStates.length; e < t; e++) {
            var i = this.layerStates[e], n = this.map.layers[e];
            if (i.name != n.name || i.inRange != n.inRange || i.id != n.id || i.visibility != n.visibility) return !0;
        }
        return !1;
    },
    "redraw": function() {
        if (!this.checkRedraw()) return this.div;
        this.clearLayersArray("base"), this.clearLayersArray("data");
        var e = !1, t = !1, i = this.map.layers.length;
        this.layerStates = new Array(i);
        for (r = 0; r < i; r++) {
            var n = this.map.layers[r];
            this.layerStates[r] = {
                "name": n.name,
                "visibility": n.visibility,
                "inRange": n.inRange,
                "id": n.id
            };
        }
        var s = this.map.layers.slice();
        this.ascending || s.reverse();
        for (var r = 0, i = s.length; r < i; r++) {
            var o = (n = s[r]).isBaseLayer;
            if (n.displayInLayerSwitcher) {
                o ? t = !0 : e = !0;
                var a = o ? n == this.map.baseLayer : n.getVisibility(), l = document.createElement("input"), h = OpenLayers.Util.createUniqueID(this.id + "_input_");
                l.id = h, l.name = o ? this.id + "_baseLayers" : n.name, l.type = o ? "radio" : "checkbox", 
                l.value = n.name, l.checked = a, l.defaultChecked = a, l.className = "olButton", 
                l._layer = n.id, l._layerSwitcher = this.id, o || n.inRange || (l.disabled = !0);
                var c = document.createElement("label");
                c.for = l.id, OpenLayers.Element.addClass(c, "labelSpan olButton"), c._layer = n.id, 
                c._layerSwitcher = this.id, o || n.inRange || (c.style.color = "gray"), c.innerHTML = n.name, 
                c.style.verticalAlign = o ? "bottom" : "baseline";
                var u = document.createElement("br");
                (o ? this.baseLayers : this.dataLayers).push({
                    "layer": n,
                    "inputElem": l,
                    "labelSpan": c
                });
                var p = o ? this.baseLayersDiv : this.dataLayersDiv;
                p.appendChild(l), p.appendChild(c), p.appendChild(u);
            }
        }
        return this.dataLbl.style.display = e ? "" : "none", this.baseLbl.style.display = t ? "" : "none", 
        this.div;
    },
    "updateMap": function() {
        for (var e = 0, t = this.baseLayers.length; e < t; e++) (i = this.baseLayers[e]).inputElem.checked && this.map.setBaseLayer(i.layer, !1);
        for (var e = 0, t = this.dataLayers.length; e < t; e++) {
            var i = this.dataLayers[e];
            i.layer.setVisibility(i.inputElem.checked);
        }
    },
    "maximizeControl": function(e) {
        this.div.style.width = "", this.div.style.height = "", this.showControls(!1), null != e && OpenLayers.Event.stop(e);
    },
    "minimizeControl": function(e) {
        this.div.style.width = "0px", this.div.style.height = "0px", this.showControls(!0), 
        null != e && OpenLayers.Event.stop(e);
    },
    "showControls": function(e) {
        this.maximizeDiv.style.display = e ? "" : "none", this.minimizeDiv.style.display = e ? "none" : "", 
        this.layersDiv.style.display = e ? "none" : "";
    },
    "loadContents": function() {
        this.layersDiv = document.createElement("div"), this.layersDiv.id = this.id + "_layersDiv", 
        OpenLayers.Element.addClass(this.layersDiv, "layersDiv"), this.baseLbl = document.createElement("div"), 
        this.baseLbl.innerHTML = OpenLayers.i18n("Base Layer"), OpenLayers.Element.addClass(this.baseLbl, "baseLbl"), 
        this.baseLayersDiv = document.createElement("div"), OpenLayers.Element.addClass(this.baseLayersDiv, "baseLayersDiv"), 
        this.dataLbl = document.createElement("div"), this.dataLbl.innerHTML = OpenLayers.i18n("Overlays"), 
        OpenLayers.Element.addClass(this.dataLbl, "dataLbl"), this.dataLayersDiv = document.createElement("div"), 
        OpenLayers.Element.addClass(this.dataLayersDiv, "dataLayersDiv"), this.ascending ? (this.layersDiv.appendChild(this.baseLbl), 
        this.layersDiv.appendChild(this.baseLayersDiv), this.layersDiv.appendChild(this.dataLbl), 
        this.layersDiv.appendChild(this.dataLayersDiv)) : (this.layersDiv.appendChild(this.dataLbl), 
        this.layersDiv.appendChild(this.dataLayersDiv), this.layersDiv.appendChild(this.baseLbl), 
        this.layersDiv.appendChild(this.baseLayersDiv)), this.div.appendChild(this.layersDiv);
        e = OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");
        this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv", null, null, e, "absolute"), 
        OpenLayers.Element.addClass(this.maximizeDiv, "maximizeDiv olButton"), this.maximizeDiv.style.display = "none", 
        this.div.appendChild(this.maximizeDiv);
        var e = OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");
        this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv", null, null, e, "absolute"), 
        OpenLayers.Element.addClass(this.minimizeDiv, "minimizeDiv olButton"), this.minimizeDiv.style.display = "none", 
        this.div.appendChild(this.minimizeDiv);
    },
    "CLASS_NAME": "OpenLayers.Control.LayerSwitcher"
}), OpenLayers.Control.Measure = OpenLayers.Class(OpenLayers.Control, {
    "callbacks": null,
    "displaySystem": "metric",
    "geodesic": !1,
    "displaySystemUnits": {
        "geographic": [ "dd" ],
        "english": [ "mi", "ft", "in" ],
        "metric": [ "km", "m" ]
    },
    "partialDelay": 300,
    "delayedTrigger": null,
    "persist": !1,
    "immediate": !1,
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]);
        var i = {
            "done": this.measureComplete,
            "point": this.measurePartial
        };
        this.immediate && (i.modify = this.measureImmediate), this.callbacks = OpenLayers.Util.extend(i, this.callbacks), 
        this.handlerOptions = OpenLayers.Util.extend({
            "persist": this.persist
        }, this.handlerOptions), this.handler = new e(this, this.callbacks, this.handlerOptions);
    },
    "deactivate": function() {
        return this.cancelDelay(), OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "cancel": function() {
        this.cancelDelay(), this.handler.cancel();
    },
    "setImmediate": function(e) {
        this.immediate = e, this.immediate ? this.callbacks.modify = this.measureImmediate : delete this.callbacks.modify;
    },
    "updateHandler": function(e, t) {
        var i = this.active;
        i && this.deactivate(), this.handler = new e(this, this.callbacks, t), i && this.activate();
    },
    "measureComplete": function(e) {
        this.cancelDelay(), this.measure(e, "measure");
    },
    "measurePartial": function(e, t) {
        this.cancelDelay(), t = t.clone(), this.handler.freehandMode(this.handler.evt) ? this.measure(t, "measurepartial") : this.delayedTrigger = window.setTimeout(OpenLayers.Function.bind(function() {
            this.delayedTrigger = null, this.measure(t, "measurepartial");
        }, this), this.partialDelay);
    },
    "measureImmediate": function(e, t, i) {
        i && !this.handler.freehandMode(this.handler.evt) && (this.cancelDelay(), this.measure(t.geometry, "measurepartial"));
    },
    "cancelDelay": function() {
        null !== this.delayedTrigger && (window.clearTimeout(this.delayedTrigger), this.delayedTrigger = null);
    },
    "measure": function(e, t) {
        var i, n;
        e.CLASS_NAME.indexOf("LineString") > -1 ? (i = this.getBestLength(e), n = 1) : (i = this.getBestArea(e), 
        n = 2), this.events.triggerEvent(t, {
            "measure": i[0],
            "units": i[1],
            "order": n,
            "geometry": e
        });
    },
    "getBestArea": function(e) {
        for (var t, i, n = this.displaySystemUnits[this.displaySystem], s = 0, r = n.length; s < r && (t = n[s], 
        !((i = this.getArea(e, t)) > 1)); ++s) ;
        return [ i, t ];
    },
    "getArea": function(e, t) {
        var i, n;
        this.geodesic ? (i = e.getGeodesicArea(this.map.getProjectionObject()), n = "m") : (i = e.getArea(), 
        n = this.map.getUnits());
        var s = OpenLayers.INCHES_PER_UNIT[t];
        if (s) {
            var r = OpenLayers.INCHES_PER_UNIT[n];
            i *= Math.pow(r / s, 2);
        }
        return i;
    },
    "getBestLength": function(e) {
        for (var t, i, n = this.displaySystemUnits[this.displaySystem], s = 0, r = n.length; s < r && (t = n[s], 
        !((i = this.getLength(e, t)) > 1)); ++s) ;
        return [ i, t ];
    },
    "getLength": function(e, t) {
        var i, n;
        this.geodesic ? (i = e.getGeodesicLength(this.map.getProjectionObject()), n = "m") : (i = e.getLength(), 
        n = this.map.getUnits());
        var s = OpenLayers.INCHES_PER_UNIT[t];
        return s && (i *= OpenLayers.INCHES_PER_UNIT[n] / s), i;
    },
    "CLASS_NAME": "OpenLayers.Control.Measure"
}), OpenLayers.Control.ModifyFeature = OpenLayers.Class(OpenLayers.Control, {
    "bySegment": !1,
    "documentDrag": !1,
    "geometryTypes": null,
    "clickout": !0,
    "toggle": !0,
    "standalone": !1,
    "layer": null,
    "feature": null,
    "vertex": null,
    "vertices": null,
    "virtualVertices": null,
    "handlers": null,
    "deleteCodes": null,
    "virtualStyle": null,
    "vertexRenderIntent": null,
    "mode": null,
    "createVertices": !0,
    "modified": !1,
    "radiusHandle": null,
    "dragHandle": null,
    "onModificationStart": function() {},
    "onModification": function() {},
    "onModificationEnd": function() {},
    "initialize": function(e, t) {
        t = t || {}, this.layer = e, this.vertices = [], this.virtualVertices = [], this.virtualStyle = OpenLayers.Util.extend({}, this.layer.style || this.layer.styleMap.createSymbolizer(null, t.vertexRenderIntent)), 
        this.virtualStyle.fillOpacity = .3, this.virtualStyle.strokeOpacity = .3, this.deleteCodes = [ 46, 68 ], 
        this.mode = OpenLayers.Control.ModifyFeature.RESHAPE, OpenLayers.Control.prototype.initialize.apply(this, [ t ]), 
        OpenLayers.Util.isArray(this.deleteCodes) || (this.deleteCodes = [ this.deleteCodes ]);
        var i = {
            "down": function(e) {
                this.vertex = null;
                var t = this.layer.getFeatureFromEvent(this.handlers.drag.evt);
                t ? this.dragStart(t) : this.clickout && (this._unselect = this.feature);
            },
            "move": function(e) {
                delete this._unselect, this.vertex && this.dragVertex(this.vertex, e);
            },
            "up": function() {
                this.handlers.drag.stopDown = !1, this._unselect && (this.unselectFeature(this._unselect), 
                delete this._unselect);
            },
            "done": function(e) {
                this.vertex && this.dragComplete(this.vertex);
            }
        }, n = this, s = {
            "documentDrag": this.documentDrag,
            "setEvent": function(e) {
                var t = n.feature;
                n._lastVertex = t ? t.layer.getFeatureFromEvent(e) : null, OpenLayers.Handler.Drag.prototype.setEvent.apply(this, arguments);
            },
            "stopDown": !1
        }, r = {
            "keydown": this.handleKeypress
        };
        if (this.handlers = {
            "keyboard": new OpenLayers.Handler.Keyboard(this, r),
            "drag": new OpenLayers.Handler.Drag(this, i, s)
        }, this.bySegment) {
            if (!window.rbush) throw new Error("The rbush library is required");
            if (!OpenLayers.Control.ModifyFeature.BySegment) throw new Error("OpenLayers.Control.ModifyFeature.BySegment is missing from the build");
            OpenLayers.Util.extend(this, OpenLayers.Control.ModifyFeature.BySegment);
        }
    },
    "createVirtualVertex": function(e, t) {
        var i = (e.x + t.x) / 2, n = (e.y + t.y) / 2, s = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(i, n), null, this.virtualStyle);
        return s._sketch = !0, s;
    },
    "destroy": function() {
        this.map && this.map.events.un({
            "removelayer": this.handleMapEvents,
            "changelayer": this.handleMapEvents,
            "scope": this
        }), this.layer = null, OpenLayers.Control.prototype.destroy.apply(this, []);
    },
    "activate": function() {
        return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.moveLayerToTop(), 
        this.map.events.on({
            "removelayer": this.handleMapEvents,
            "changelayer": this.handleMapEvents,
            "scope": this
        }), this._lastVertex = null, this.handlers.keyboard.activate() && this.handlers.drag.activate());
    },
    "deactivate": function() {
        var e = !1;
        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {
            this.moveLayerBack(), this.map.events.un({
                "removelayer": this.handleMapEvents,
                "changelayer": this.handleMapEvents,
                "scope": this
            }), this.layer.removeFeatures(this.vertices, {
                "silent": !0
            }), this.layer.removeFeatures(this.virtualVertices, {
                "silent": !0
            }), this.vertices = [], this.handlers.drag.deactivate(), this.handlers.keyboard.deactivate();
            var t = this.feature;
            t && t.geometry && t.layer && this.unselectFeature(t), e = !0;
        }
        return e;
    },
    "beforeSelectFeature": function(e) {
        return this.layer.events.triggerEvent("beforefeaturemodified", {
            "feature": e
        });
    },
    "selectFeature": function(e) {
        var t = OpenLayers.Util.indexOf;
        if (!(this.feature === e || this.geometryTypes && -1 == t(this.geometryTypes, e.geometry.CLASS_NAME))) {
            !1 !== this.beforeSelectFeature(e) && (this.feature && this.unselectFeature(this.feature), 
            this.feature = e, -1 == t(this.layer.selectedFeatures, e) && this.layer.selectedFeatures.push(e), 
            this.layer.drawFeature(e, "select"), this.modified = !1, this.resetVertices(), this.onModificationStart(this.feature));
            var i = e.modified;
            !e.geometry || i && i.geometry || (this._originalGeometry = e.geometry.clone());
        }
    },
    "unselectFeature": function(e) {
        this.layer.removeFeatures(this.vertices, {
            "silent": !0
        }), this.vertices = [], this.layer.destroyFeatures(this.virtualVertices, {
            "silent": !0
        }), this.virtualVertices = [], this.dragHandle && (this.layer.destroyFeatures([ this.dragHandle ], {
            "silent": !0
        }), delete this.dragHandle), this.radiusHandle && (this.layer.destroyFeatures([ this.radiusHandle ], {
            "silent": !0
        }), delete this.radiusHandle), this.layer.drawFeature(this.feature, "default"), 
        this.feature = null, OpenLayers.Util.removeItem(this.layer.selectedFeatures, e), 
        this.onModificationEnd(e), this.layer.events.triggerEvent("afterfeaturemodified", {
            "feature": e,
            "modified": this.modified
        }), this.modified = !1;
    },
    "dragStart": function(e) {
        var t = "OpenLayers.Geometry.Point" == e.geometry.CLASS_NAME;
        this.standalone || (e._sketch || !t) && e._sketch || (this.toggle && this.feature === e && (this._unselect = e), 
        this.selectFeature(e)), this.feature && (e._sketch || t && e === this.feature) && (this.vertex = e, 
        this.handlers.drag.stopDown = !0);
    },
    "dragVertex": function(e, t) {
        var i = this.map.getLonLatFromViewPortPx(t), n = e.geometry;
        n.move(i.lon - n.x, i.lat - n.y), this.modified = !0, "OpenLayers.Geometry.Point" == this.feature.geometry.CLASS_NAME ? this.layer.events.triggerEvent("vertexmodified", {
            "vertex": e.geometry,
            "feature": this.feature,
            "pixel": t
        }) : (e._index ? (-1 == e._index && (e._index = OpenLayers.Util.indexOf(e.geometry.parent.components, e._next)), 
        e.geometry.parent.addComponent(e.geometry, e._index), delete e._index, OpenLayers.Util.removeItem(this.virtualVertices, e), 
        this.vertices.push(e)) : e == this.dragHandle ? (this.layer.removeFeatures(this.vertices, {
            "silent": !0
        }), this.vertices = [], this.radiusHandle && (this.layer.destroyFeatures([ this.radiusHandle ], {
            "silent": !0
        }), this.radiusHandle = null)) : e !== this.radiusHandle && this.layer.events.triggerEvent("vertexmodified", {
            "vertex": e.geometry,
            "feature": this.feature,
            "pixel": t
        }), this.virtualVertices.length > 0 && (this.layer.destroyFeatures(this.virtualVertices, {
            "silent": !0
        }), this.virtualVertices = []), this.layer.drawFeature(this.feature, this.standalone ? void 0 : "select")), 
        this.layer.drawFeature(e);
    },
    "dragComplete": function(e) {
        this.resetVertices(), this.setFeatureState(), this.onModification(this.feature), 
        this.layer.events.triggerEvent("featuremodified", {
            "feature": this.feature
        });
    },
    "setFeatureState": function() {
        if (this.feature.state != OpenLayers.State.INSERT && this.feature.state != OpenLayers.State.DELETE && (this.feature.state = OpenLayers.State.UPDATE, 
        this.modified && this._originalGeometry)) {
            var e = this.feature;
            e.modified = OpenLayers.Util.extend(e.modified, {
                "geometry": this._originalGeometry
            }), delete this._originalGeometry;
        }
    },
    "resetVertices": function() {
        this.vertices.length > 0 && (this.layer.removeFeatures(this.vertices, {
            "silent": !0
        }), this.vertices = []), this.virtualVertices.length > 0 && (this.layer.removeFeatures(this.virtualVertices, {
            "silent": !0
        }), this.virtualVertices = []), this.dragHandle && (this.layer.destroyFeatures([ this.dragHandle ], {
            "silent": !0
        }), this.dragHandle = null), this.radiusHandle && (this.layer.destroyFeatures([ this.radiusHandle ], {
            "silent": !0
        }), this.radiusHandle = null), this.feature && "OpenLayers.Geometry.Point" != this.feature.geometry.CLASS_NAME && (this.mode & OpenLayers.Control.ModifyFeature.DRAG && this.collectDragHandle(), 
        this.mode & (OpenLayers.Control.ModifyFeature.ROTATE | OpenLayers.Control.ModifyFeature.RESIZE) && this.collectRadiusHandle(), 
        this.mode & OpenLayers.Control.ModifyFeature.RESHAPE && (this.mode & OpenLayers.Control.ModifyFeature.RESIZE || this.collectVertices()));
    },
    "handleKeypress": function(e) {
        var t = e.keyCode;
        if (this.feature && -1 != OpenLayers.Util.indexOf(this.deleteCodes, t)) {
            var i = this._lastVertex;
            i && -1 != OpenLayers.Util.indexOf(this.vertices, i) && !this.handlers.drag.dragging && i.geometry.parent && (i.geometry.parent.removeComponent(i.geometry), 
            this.layer.events.triggerEvent("vertexremoved", {
                "vertex": i.geometry,
                "feature": this.feature,
                "pixel": e.xy
            }), this.layer.drawFeature(this.feature, this.standalone ? void 0 : "select"), this.modified = !0, 
            this.resetVertices(), this.setFeatureState(), this.onModification(this.feature), 
            this.layer.events.triggerEvent("featuremodified", {
                "feature": this.feature
            }));
        }
    },
    "collectVertices": function() {
        function e(i) {
            var n, s, r, o;
            if ("OpenLayers.Geometry.Point" == i.CLASS_NAME) (s = new OpenLayers.Feature.Vector(i))._sketch = !0, 
            s.renderIntent = t.vertexRenderIntent, t.vertices.push(s); else {
                var a = i.components.length;
                for ("OpenLayers.Geometry.LinearRing" == i.CLASS_NAME && (a -= 1), n = 0; n < a; ++n) "OpenLayers.Geometry.Point" == (r = i.components[n]).CLASS_NAME ? ((s = new OpenLayers.Feature.Vector(r))._sketch = !0, 
                s.renderIntent = t.vertexRenderIntent, t.vertices.push(s)) : e(r);
                if (t.createVertices && "OpenLayers.Geometry.MultiPoint" != i.CLASS_NAME) for (n = 0, 
                o = i.components.length; n < o - 1; ++n) {
                    var l = i.components[n], h = i.components[n + 1];
                    if ("OpenLayers.Geometry.Point" == l.CLASS_NAME && "OpenLayers.Geometry.Point" == h.CLASS_NAME) {
                        var c = t.createVirtualVertex.call(t, l, h);
                        c.geometry.parent = i, c._index = n + 1, t.virtualVertices.push(c);
                    }
                }
            }
        }
        this.vertices = [], this.virtualVertices = [];
        var t = this;
        e.call(this, this.feature.geometry), this.layer.addFeatures(this.virtualVertices, {
            "silent": !0
        }), this.layer.addFeatures(this.vertices, {
            "silent": !0
        });
    },
    "collectDragHandle": function() {
        var e = this.feature.geometry, t = e.getBounds().getCenterLonLat(), i = new OpenLayers.Geometry.Point(t.lon, t.lat), n = new OpenLayers.Feature.Vector(i);
        i.move = function(t, i) {
            OpenLayers.Geometry.Point.prototype.move.call(this, t, i), e.move(t, i);
        }, n._sketch = !0, this.dragHandle = n, this.dragHandle.renderIntent = this.vertexRenderIntent, 
        this.layer.addFeatures([ this.dragHandle ], {
            "silent": !0
        });
    },
    "collectRadiusHandle": function() {
        var e = this.feature.geometry, t = e.getBounds(), i = t.getCenterLonLat(), n = new OpenLayers.Geometry.Point(i.lon, i.lat), s = new OpenLayers.Geometry.Point(t.right, t.bottom), r = new OpenLayers.Feature.Vector(s), o = this.mode & OpenLayers.Control.ModifyFeature.RESIZE, a = this.mode & OpenLayers.Control.ModifyFeature.RESHAPE, l = this.mode & OpenLayers.Control.ModifyFeature.ROTATE;
        s.move = function(t, i) {
            OpenLayers.Geometry.Point.prototype.move.call(this, t, i);
            var s = this.x - n.x, r = this.y - n.y, h = s - t, c = r - i;
            if (l) {
                var u = Math.atan2(c, h), p = Math.atan2(r, s) - u;
                p *= 180 / Math.PI, e.rotate(p, n);
            }
            if (o) {
                var d, f;
                if (a) f = s / h / (d = r / c); else {
                    var m = Math.sqrt(h * h + c * c);
                    d = Math.sqrt(s * s + r * r) / m;
                }
                e.resize(d, n, f);
            }
        }, r._sketch = !0, this.radiusHandle = r, this.radiusHandle.renderIntent = this.vertexRenderIntent, 
        this.layer.addFeatures([ this.radiusHandle ], {
            "silent": !0
        });
    },
    "setMap": function(e) {
        this.handlers.drag.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "handleMapEvents": function(e) {
        "removelayer" != e.type && "order" != e.property || this.moveLayerToTop();
    },
    "moveLayerToTop": function() {
        var e = Math.max(this.map.Z_INDEX_BASE.Feature - 1, this.layer.getZIndex()) + 1;
        this.layer.setZIndex(e);
    },
    "moveLayerBack": function() {
        var e = this.layer.getZIndex() - 1;
        e >= this.map.Z_INDEX_BASE.Feature ? this.layer.setZIndex(e) : this.map.setLayerZIndex(this.layer, this.map.getLayerIndex(this.layer));
    },
    "CLASS_NAME": "OpenLayers.Control.ModifyFeature"
}), OpenLayers.Control.ModifyFeature.RESHAPE = 1, OpenLayers.Control.ModifyFeature.RESIZE = 2, 
OpenLayers.Control.ModifyFeature.ROTATE = 4, OpenLayers.Control.ModifyFeature.DRAG = 8, 
OpenLayers.Control.MousePosition = OpenLayers.Class(OpenLayers.Control, {
    "autoActivate": !0,
    "element": null,
    "prefix": "",
    "separator": ", ",
    "suffix": "",
    "numDigits": 5,
    "granularity": 10,
    "emptyString": null,
    "lastXy": null,
    "displayProjection": null,
    "destroy": function() {
        this.deactivate(), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.map.events.register("mousemove", this, this.redraw), 
        this.map.events.register("mouseout", this, this.reset), this.redraw(), !0);
    },
    "deactivate": function() {
        return !!OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.map.events.unregister("mousemove", this, this.redraw), 
        this.map.events.unregister("mouseout", this, this.reset), this.element.innerHTML = "", 
        !0);
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || (this.div.left = "", 
        this.div.top = "", this.element = this.div), this.div;
    },
    "redraw": function(e) {
        var t;
        if (null != e) {
            if (null == this.lastXy || Math.abs(e.xy.x - this.lastXy.x) > this.granularity || Math.abs(e.xy.y - this.lastXy.y) > this.granularity) this.lastXy = e.xy; else if (t = this.map.getLonLatFromPixel(e.xy)) {
                this.displayProjection && t.transform(this.map.getProjectionObject(), this.displayProjection), 
                this.lastXy = e.xy;
                var i = this.formatOutput(t);
                i != this.element.innerHTML && (this.element.innerHTML = i);
            }
        } else this.reset();
    },
    "reset": function(e) {
        null != this.emptyString && (this.element.innerHTML = this.emptyString);
    },
    "formatOutput": function(e) {
        var t = parseInt(this.numDigits);
        return this.prefix + e.lon.toFixed(t) + this.separator + e.lat.toFixed(t) + this.suffix;
    },
    "CLASS_NAME": "OpenLayers.Control.MousePosition"
}), OpenLayers.Control.NavigationHistory = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_TOGGLE,
    "previous": null,
    "previousOptions": null,
    "next": null,
    "nextOptions": null,
    "limit": 50,
    "autoActivate": !0,
    "clearOnDeactivate": !1,
    "registry": null,
    "nextStack": null,
    "previousStack": null,
    "listeners": null,
    "restoring": !1,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, [ e ]), this.registry = OpenLayers.Util.extend({
            "moveend": this.getState
        }, this.registry);
        var t = {
            "trigger": OpenLayers.Function.bind(this.previousTrigger, this),
            "displayClass": this.displayClass + " " + this.displayClass + "Previous"
        };
        OpenLayers.Util.extend(t, this.previousOptions), this.previous = new OpenLayers.Control.Button(t);
        var i = {
            "trigger": OpenLayers.Function.bind(this.nextTrigger, this),
            "displayClass": this.displayClass + " " + this.displayClass + "Next"
        };
        OpenLayers.Util.extend(i, this.nextOptions), this.next = new OpenLayers.Control.Button(i), 
        this.clear();
    },
    "onPreviousChange": function(e, t) {
        e && !this.previous.active ? this.previous.activate() : !e && this.previous.active && this.previous.deactivate();
    },
    "onNextChange": function(e, t) {
        e && !this.next.active ? this.next.activate() : !e && this.next.active && this.next.deactivate();
    },
    "destroy": function() {
        OpenLayers.Control.prototype.destroy.apply(this), this.previous.destroy(), this.next.destroy(), 
        this.deactivate();
        for (var e in this) this[e] = null;
    },
    "setMap": function(e) {
        this.map = e, this.next.setMap(e), this.previous.setMap(e);
    },
    "draw": function() {
        OpenLayers.Control.prototype.draw.apply(this, arguments), this.next.draw(), this.previous.draw();
    },
    "previousTrigger": function() {
        var e = this.previousStack.shift(), t = this.previousStack.shift();
        return void 0 != t ? (this.nextStack.unshift(e), this.previousStack.unshift(t), 
        this.restoring = !0, this.restore(t), this.restoring = !1, this.onNextChange(this.nextStack[0], this.nextStack.length), 
        this.onPreviousChange(this.previousStack[1], this.previousStack.length - 1)) : this.previousStack.unshift(e), 
        t;
    },
    "nextTrigger": function() {
        var e = this.nextStack.shift();
        return void 0 != e && (this.previousStack.unshift(e), this.restoring = !0, this.restore(e), 
        this.restoring = !1, this.onNextChange(this.nextStack[0], this.nextStack.length), 
        this.onPreviousChange(this.previousStack[1], this.previousStack.length - 1)), e;
    },
    "clear": function() {
        this.previousStack = [], this.previous.deactivate(), this.nextStack = [], this.next.deactivate();
    },
    "getState": function() {
        return {
            "center": this.map.getCenter(),
            "resolution": this.map.getResolution(),
            "projection": this.map.getProjectionObject(),
            "units": this.map.getProjectionObject().getUnits() || this.map.units || this.map.baseLayer.units
        };
    },
    "restore": function(e) {
        var t, i;
        if (this.map.getProjectionObject() == e.projection) i = this.map.getZoomForResolution(e.resolution), 
        t = e.center; else {
            (t = e.center.clone()).transform(e.projection, this.map.getProjectionObject());
            var n = e.units, s = this.map.getProjectionObject().getUnits() || this.map.units || this.map.baseLayer.units, r = n && s ? OpenLayers.INCHES_PER_UNIT[n] / OpenLayers.INCHES_PER_UNIT[s] : 1;
            i = this.map.getZoomForResolution(r * e.resolution);
        }
        this.map.setCenter(t, i);
    },
    "setListeners": function() {
        this.listeners = {};
        for (var e in this.registry) this.listeners[e] = OpenLayers.Function.bind(function() {
            if (!this.restoring) {
                var t = this.registry[e].apply(this, arguments);
                this.previousStack.unshift(t), this.previousStack.length > 1 && this.onPreviousChange(this.previousStack[1], this.previousStack.length - 1), 
                this.previousStack.length > this.limit + 1 && this.previousStack.pop(), this.nextStack.length > 0 && (this.nextStack = [], 
                this.onNextChange(null, 0));
            }
            return !0;
        }, this);
    },
    "activate": function() {
        var e = !1;
        if (this.map && OpenLayers.Control.prototype.activate.apply(this)) {
            null == this.listeners && this.setListeners();
            for (var t in this.listeners) this.map.events.register(t, this, this.listeners[t]);
            e = !0, 0 == this.previousStack.length && this.initStack();
        }
        return e;
    },
    "initStack": function() {
        this.map.getCenter() && this.listeners.moveend();
    },
    "deactivate": function() {
        var e = !1;
        if (this.map && OpenLayers.Control.prototype.deactivate.apply(this)) {
            for (var t in this.listeners) this.map.events.unregister(t, this, this.listeners[t]);
            this.clearOnDeactivate && this.clear(), e = !0;
        }
        return e;
    },
    "CLASS_NAME": "OpenLayers.Control.NavigationHistory"
}), OpenLayers.Control.NavToolbar = OpenLayers.Class(OpenLayers.Control.Panel, {
    "initialize": function(e) {
        OpenLayers.Control.Panel.prototype.initialize.apply(this, [ e ]), this.addControls([ new OpenLayers.Control.Navigation(), new OpenLayers.Control.ZoomBox() ]);
    },
    "draw": function() {
        var e = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);
        return null === this.defaultControl && (this.defaultControl = this.controls[0]), 
        e;
    },
    "CLASS_NAME": "OpenLayers.Control.NavToolbar"
}), OpenLayers.Control.OverviewMap = OpenLayers.Class(OpenLayers.Control, {
    "element": null,
    "ovmap": null,
    "size": {
        "w": 180,
        "h": 90
    },
    "layers": null,
    "minRectSize": 15,
    "minRectDisplayClass": "RectReplacement",
    "minRatio": 8,
    "maxRatio": 32,
    "mapOptions": null,
    "autoPan": !1,
    "handlers": null,
    "resolutionFactor": 1,
    "maximized": !1,
    "maximizeTitle": "",
    "minimizeTitle": "",
    "initialize": function(e) {
        this.layers = [], this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, [ e ]);
    },
    "destroy": function() {
        this.mapDiv && (this.handlers.click && this.handlers.click.destroy(), this.handlers.drag && this.handlers.drag.destroy(), 
        this.ovmap && this.ovmap.viewPortDiv.removeChild(this.extentRectangle), this.extentRectangle = null, 
        this.rectEvents && (this.rectEvents.destroy(), this.rectEvents = null), this.ovmap && (this.ovmap.destroy(), 
        this.ovmap = null), this.element.removeChild(this.mapDiv), this.mapDiv = null, this.div.removeChild(this.element), 
        this.element = null, this.maximizeDiv && (this.div.removeChild(this.maximizeDiv), 
        this.maximizeDiv = null), this.minimizeDiv && (this.div.removeChild(this.minimizeDiv), 
        this.minimizeDiv = null), this.map.events.un({
            "buttonclick": this.onButtonClick,
            "moveend": this.update,
            "changebaselayer": this.baseLayerDraw,
            "scope": this
        }), OpenLayers.Control.prototype.destroy.apply(this, arguments));
    },
    "draw": function() {
        if (OpenLayers.Control.prototype.draw.apply(this, arguments), 0 === this.layers.length) {
            if (!this.map.baseLayer) return this.map.events.register("changebaselayer", this, this.baseLayerDraw), 
            this.div;
            var e = this.map.baseLayer.clone();
            this.layers = [ e ];
        }
        if (this.element = document.createElement("div"), this.element.className = this.displayClass + "Element", 
        this.element.style.display = "none", this.mapDiv = document.createElement("div"), 
        this.mapDiv.style.width = this.size.w + "px", this.mapDiv.style.height = this.size.h + "px", 
        this.mapDiv.style.position = "relative", this.mapDiv.style.overflow = "hidden", 
        this.mapDiv.id = OpenLayers.Util.createUniqueID("overviewMap"), this.extentRectangle = document.createElement("div"), 
        this.extentRectangle.style.position = "absolute", this.extentRectangle.style.zIndex = 1e3, 
        this.extentRectangle.className = this.displayClass + "ExtentRectangle", this.element.appendChild(this.mapDiv), 
        this.div.appendChild(this.element), this.outsideViewport) this.element.style.display = ""; else {
            this.div.className += " " + this.displayClass + "Container";
            t = OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");
            this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv(this.displayClass + "MaximizeButton", null, null, t, "absolute"), 
            this.maximizeDiv.style.display = "none", this.maximizeDiv.className = this.displayClass + "MaximizeButton olButton", 
            this.maximizeTitle && (this.maximizeDiv.title = this.maximizeTitle), this.div.appendChild(this.maximizeDiv);
            var t = OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");
            this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv", null, null, t, "absolute"), 
            this.minimizeDiv.style.display = "none", this.minimizeDiv.className = this.displayClass + "MinimizeButton olButton", 
            this.minimizeTitle && (this.minimizeDiv.title = this.minimizeTitle), this.div.appendChild(this.minimizeDiv), 
            this.minimizeControl();
        }
        return this.map.getExtent() && this.update(), this.map.events.on({
            "buttonclick": this.onButtonClick,
            "moveend": this.update,
            "scope": this
        }), this.maximized && this.maximizeControl(), this.div;
    },
    "baseLayerDraw": function() {
        this.draw(), this.map.events.unregister("changebaselayer", this, this.baseLayerDraw);
    },
    "rectDrag": function(e) {
        var t = this.handlers.drag.last.x - e.x, i = this.handlers.drag.last.y - e.y;
        if (0 != t || 0 != i) {
            var n = this.rectPxBounds.top, s = this.rectPxBounds.left, r = Math.abs(this.rectPxBounds.getHeight()), o = this.rectPxBounds.getWidth(), a = Math.max(0, n - i);
            a = Math.min(a, this.ovmap.size.h - this.hComp - r);
            var l = Math.max(0, s - t);
            l = Math.min(l, this.ovmap.size.w - this.wComp - o), this.setRectPxBounds(new OpenLayers.Bounds(l, a + r, l + o, a));
        }
    },
    "mapDivClick": function(e) {
        var t = this.rectPxBounds.getCenterPixel(), i = e.xy.x - t.x, n = e.xy.y - t.y, s = this.rectPxBounds.top, r = this.rectPxBounds.left, o = Math.abs(this.rectPxBounds.getHeight()), a = this.rectPxBounds.getWidth(), l = Math.max(0, s + n);
        l = Math.min(l, this.ovmap.size.h - o);
        var h = Math.max(0, r + i);
        h = Math.min(h, this.ovmap.size.w - a), this.setRectPxBounds(new OpenLayers.Bounds(h, l + o, h + a, l)), 
        this.updateMapToRect();
    },
    "onButtonClick": function(e) {
        e.buttonElement === this.minimizeDiv ? this.minimizeControl() : e.buttonElement === this.maximizeDiv && this.maximizeControl();
    },
    "maximizeControl": function(e) {
        this.element.style.display = "", this.showToggle(!1), null != e && OpenLayers.Event.stop(e);
    },
    "minimizeControl": function(e) {
        this.element.style.display = "none", this.showToggle(!0), null != e && OpenLayers.Event.stop(e);
    },
    "showToggle": function(e) {
        this.maximizeDiv && (this.maximizeDiv.style.display = e ? "" : "none"), this.minimizeDiv && (this.minimizeDiv.style.display = e ? "none" : "");
    },
    "update": function() {
        null == this.ovmap && this.createMap(), !this.autoPan && this.isSuitableOverview() || this.updateOverview(), 
        this.updateRectToMap();
    },
    "isSuitableOverview": function() {
        var e = this.map.getExtent(), t = this.map.getMaxExtent(), i = new OpenLayers.Bounds(Math.max(e.left, t.left), Math.max(e.bottom, t.bottom), Math.min(e.right, t.right), Math.min(e.top, t.top));
        this.ovmap.getProjection() != this.map.getProjection() && (i = i.transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject()));
        var n = this.ovmap.getResolution() / this.map.getResolution();
        return n > this.minRatio && n <= this.maxRatio && this.ovmap.getExtent().containsBounds(i);
    },
    "updateOverview": function() {
        var e = this.map.getResolution(), t = this.ovmap.getResolution(), i = t / e;
        i > this.maxRatio ? t = this.minRatio * e : i <= this.minRatio && (t = this.maxRatio * e);
        var n;
        this.ovmap.getProjection() != this.map.getProjection() ? (n = this.map.center.clone()).transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject()) : n = this.map.center, 
        this.ovmap.setCenter(n, this.ovmap.getZoomForResolution(t * this.resolutionFactor)), 
        this.updateRectToMap();
    },
    "createMap": function() {
        var e = OpenLayers.Util.extend({
            "controls": [],
            "maxResolution": "auto",
            "fallThrough": !1
        }, this.mapOptions);
        if (this.ovmap = new OpenLayers.Map(this.mapDiv, e), this.ovmap.viewPortDiv.appendChild(this.extentRectangle), 
        OpenLayers.Event.stopObserving(window, "unload", this.ovmap.unloadDestroy), this.ovmap.addLayers(this.layers), 
        this.ovmap.zoomToMaxExtent(), this.wComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-left-width")) + parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-right-width")), 
        this.wComp = this.wComp ? this.wComp : 2, this.hComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-top-width")) + parseInt(OpenLayers.Element.getStyle(this.extentRectangle, "border-bottom-width")), 
        this.hComp = this.hComp ? this.hComp : 2, this.handlers.drag = new OpenLayers.Handler.Drag(this, {
            "move": this.rectDrag,
            "done": this.updateMapToRect
        }, {
            "map": this.ovmap
        }), this.handlers.click = new OpenLayers.Handler.Click(this, {
            "click": this.mapDivClick
        }, {
            "single": !0,
            "double": !1,
            "stopSingle": !0,
            "stopDouble": !0,
            "pixelTolerance": 1,
            "map": this.ovmap
        }), this.handlers.click.activate(), this.rectEvents = new OpenLayers.Events(this, this.extentRectangle, null, !0), 
        this.rectEvents.register("mouseover", this, function(e) {
            this.handlers.drag.active || this.map.dragging || this.handlers.drag.activate();
        }), this.rectEvents.register("mouseout", this, function(e) {
            this.handlers.drag.dragging || this.handlers.drag.deactivate();
        }), this.ovmap.getProjection() != this.map.getProjection()) {
            var t = this.map.getProjectionObject().getUnits() || this.map.units || this.map.baseLayer.units, i = this.ovmap.getProjectionObject().getUnits() || this.ovmap.units || this.ovmap.baseLayer.units;
            this.resolutionFactor = t && i ? OpenLayers.INCHES_PER_UNIT[t] / OpenLayers.INCHES_PER_UNIT[i] : 1;
        }
    },
    "updateRectToMap": function() {
        var e;
        e = this.ovmap.getProjection() != this.map.getProjection() ? this.map.getExtent().transform(this.map.getProjectionObject(), this.ovmap.getProjectionObject()) : this.map.getExtent();
        var t = this.getRectBoundsFromMapBounds(e);
        t && this.setRectPxBounds(t);
    },
    "updateMapToRect": function() {
        var e = this.getMapBoundsFromRectBounds(this.rectPxBounds);
        this.ovmap.getProjection() != this.map.getProjection() && (e = e.transform(this.ovmap.getProjectionObject(), this.map.getProjectionObject())), 
        this.map.panTo(e.getCenterLonLat());
    },
    "setRectPxBounds": function(e) {
        var t = Math.max(e.top, 0), i = Math.max(e.left, 0), n = Math.min(e.top + Math.abs(e.getHeight()), this.ovmap.size.h - this.hComp), s = Math.min(e.left + e.getWidth(), this.ovmap.size.w - this.wComp), r = Math.max(s - i, 0), o = Math.max(n - t, 0);
        if (r < this.minRectSize || o < this.minRectSize) {
            this.extentRectangle.className = this.displayClass + this.minRectDisplayClass;
            var a = i + r / 2 - this.minRectSize / 2, l = t + o / 2 - this.minRectSize / 2;
            this.extentRectangle.style.top = Math.round(l) + "px", this.extentRectangle.style.left = Math.round(a) + "px", 
            this.extentRectangle.style.height = this.minRectSize + "px", this.extentRectangle.style.width = this.minRectSize + "px";
        } else this.extentRectangle.className = this.displayClass + "ExtentRectangle", this.extentRectangle.style.top = Math.round(t) + "px", 
        this.extentRectangle.style.left = Math.round(i) + "px", this.extentRectangle.style.height = Math.round(o) + "px", 
        this.extentRectangle.style.width = Math.round(r) + "px";
        this.rectPxBounds = new OpenLayers.Bounds(Math.round(i), Math.round(n), Math.round(s), Math.round(t));
    },
    "getRectBoundsFromMapBounds": function(e) {
        var t = this.getOverviewPxFromLonLat({
            "lon": e.left,
            "lat": e.bottom
        }), i = this.getOverviewPxFromLonLat({
            "lon": e.right,
            "lat": e.top
        }), n = null;
        return t && i && (n = new OpenLayers.Bounds(t.x, t.y, i.x, i.y)), n;
    },
    "getMapBoundsFromRectBounds": function(e) {
        var t = this.getLonLatFromOverviewPx({
            "x": e.left,
            "y": e.bottom
        }), i = this.getLonLatFromOverviewPx({
            "x": e.right,
            "y": e.top
        });
        return new OpenLayers.Bounds(t.lon, t.lat, i.lon, i.lat);
    },
    "getLonLatFromOverviewPx": function(e) {
        var t = this.ovmap.size, i = this.ovmap.getResolution(), n = this.ovmap.getExtent().getCenterLonLat(), s = e.x - t.w / 2, r = e.y - t.h / 2;
        return {
            "lon": n.lon + s * i,
            "lat": n.lat - r * i
        };
    },
    "getOverviewPxFromLonLat": function(e) {
        var t = this.ovmap.getResolution(), i = this.ovmap.getExtent();
        if (i) return {
            "x": Math.round(1 / t * (e.lon - i.left)),
            "y": Math.round(1 / t * (i.top - e.lat))
        };
    },
    "CLASS_NAME": "OpenLayers.Control.OverviewMap"
}), OpenLayers.Control.Pan = OpenLayers.Class(OpenLayers.Control.Button, {
    "slideFactor": 50,
    "slideRatio": null,
    "direction": null,
    "initialize": function(e, t) {
        this.direction = e, this.CLASS_NAME += this.direction, OpenLayers.Control.prototype.initialize.apply(this, [ t ]);
    },
    "trigger": function() {
        if (this.map) {
            var e = OpenLayers.Function.bind(function(e) {
                return this.slideRatio ? this.map.getSize()[e] * this.slideRatio : this.slideFactor;
            }, this);
            switch (this.direction) {
              case OpenLayers.Control.Pan.NORTH:
                this.map.pan(0, -e("h"));
                break;

              case OpenLayers.Control.Pan.SOUTH:
                this.map.pan(0, e("h"));
                break;

              case OpenLayers.Control.Pan.WEST:
                this.map.pan(-e("w"), 0);
                break;

              case OpenLayers.Control.Pan.EAST:
                this.map.pan(e("w"), 0);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Control.Pan"
}), OpenLayers.Control.Pan.NORTH = "North", OpenLayers.Control.Pan.SOUTH = "South", 
OpenLayers.Control.Pan.EAST = "East", OpenLayers.Control.Pan.WEST = "West", OpenLayers.Control.PanPanel = OpenLayers.Class(OpenLayers.Control.Panel, {
    "slideFactor": 50,
    "slideRatio": null,
    "initialize": function(e) {
        OpenLayers.Control.Panel.prototype.initialize.apply(this, [ e ]);
        var e = {
            "slideFactor": this.slideFactor,
            "slideRatio": this.slideRatio
        };
        this.addControls([ new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH, e), new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH, e), new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST, e), new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST, e) ]);
    },
    "CLASS_NAME": "OpenLayers.Control.PanPanel"
}), OpenLayers.Control.PanZoom = OpenLayers.Class(OpenLayers.Control, {
    "slideFactor": 50,
    "slideRatio": null,
    "buttons": null,
    "position": null,
    "initialize": function(e) {
        this.position = new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X, OpenLayers.Control.PanZoom.Y), 
        OpenLayers.Control.prototype.initialize.apply(this, arguments);
    },
    "destroy": function() {
        this.map && !this.outsideViewport && this.map.events.unregister("buttonclick", this, this.onButtonClick), 
        this.removeButtons(), this.buttons = null, this.position = null, OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        var t;
        this.outsideViewport ? (this.events.attachToElement(this.div), t = this) : t = this.map, 
        t.events.register("buttonclick", this, this.onButtonClick);
    },
    "draw": function(e) {
        OpenLayers.Control.prototype.draw.apply(this, arguments), e = this.position, this.buttons = [];
        var t = {
            "w": 18,
            "h": 18
        }, i = new OpenLayers.Pixel(e.x + t.w / 2, e.y);
        return this._addButton("panup", "north-mini.png", i, t), e.y = i.y + t.h, this._addButton("panleft", "west-mini.png", e, t), 
        this._addButton("panright", "east-mini.png", e.add(t.w, 0), t), this._addButton("pandown", "south-mini.png", i.add(0, 2 * t.h), t), 
        this._addButton("zoomin", "zoom-plus-mini.png", i.add(0, 3 * t.h + 5), t), this._addButton("zoomworld", "zoom-world-mini.png", i.add(0, 4 * t.h + 5), t), 
        this._addButton("zoomout", "zoom-minus-mini.png", i.add(0, 5 * t.h + 5), t), this.div;
    },
    "_addButton": function(e, t, i, n) {
        var s = OpenLayers.Util.getImageLocation(t), r = OpenLayers.Util.createAlphaImageDiv(this.id + "_" + e, i, n, s, "absolute");
        return r.style.cursor = "pointer", this.div.appendChild(r), r.action = e, r.className = "olButton", 
        this.buttons.push(r), r;
    },
    "_removeButton": function(e) {
        this.div.removeChild(e), OpenLayers.Util.removeItem(this.buttons, e);
    },
    "removeButtons": function() {
        for (var e = this.buttons.length - 1; e >= 0; --e) this._removeButton(this.buttons[e]);
    },
    "onButtonClick": function(e) {
        switch (e.buttonElement.action) {
          case "panup":
            this.map.pan(0, -this.getSlideFactor("h"));
            break;

          case "pandown":
            this.map.pan(0, this.getSlideFactor("h"));
            break;

          case "panleft":
            this.map.pan(-this.getSlideFactor("w"), 0);
            break;

          case "panright":
            this.map.pan(this.getSlideFactor("w"), 0);
            break;

          case "zoomin":
            this.map.zoomIn();
            break;

          case "zoomout":
            this.map.zoomOut();
            break;

          case "zoomworld":
            this.map.zoomToMaxExtent();
        }
    },
    "getSlideFactor": function(e) {
        return this.slideRatio ? this.map.getSize()[e] * this.slideRatio : this.slideFactor;
    },
    "CLASS_NAME": "OpenLayers.Control.PanZoom"
}), OpenLayers.Control.PanZoom.X = 4, OpenLayers.Control.PanZoom.Y = 4, OpenLayers.Control.PanZoomBar = OpenLayers.Class(OpenLayers.Control.PanZoom, {
    "zoomStopWidth": 18,
    "zoomStopHeight": 11,
    "slider": null,
    "sliderEvents": null,
    "zoombarDiv": null,
    "zoomWorldIcon": !1,
    "panIcons": !0,
    "forceFixedZoomLevel": !1,
    "mouseDragStart": null,
    "deltaY": null,
    "zoomStart": null,
    "destroy": function() {
        this._removeZoomBar(), this.map.events.un({
            "changebaselayer": this.redraw,
            "updatesize": this.redraw,
            "scope": this
        }), OpenLayers.Control.PanZoom.prototype.destroy.apply(this, arguments), delete this.mouseDragStart, 
        delete this.zoomStart;
    },
    "setMap": function(e) {
        OpenLayers.Control.PanZoom.prototype.setMap.apply(this, arguments), this.outsideViewport && this.events.attachToElement(this.div), 
        this.map.events.on({
            "changebaselayer": this.redraw,
            "updatesize": this.redraw,
            "scope": this
        });
    },
    "redraw": function() {
        null != this.div && (this.removeButtons(), this._removeZoomBar()), this.draw();
    },
    "draw": function(e) {
        OpenLayers.Control.prototype.draw.apply(this, arguments), e = this.position.clone(), 
        this.buttons = [];
        var t = {
            "w": 18,
            "h": 18
        };
        if (this.panIcons) {
            var i = new OpenLayers.Pixel(e.x + t.w / 2, e.y), n = t.w;
            this.zoomWorldIcon && (i = new OpenLayers.Pixel(e.x + t.w, e.y)), this._addButton("panup", "north-mini.png", i, t), 
            e.y = i.y + t.h, this._addButton("panleft", "west-mini.png", e, t), this.zoomWorldIcon && (this._addButton("zoomworld", "zoom-world-mini.png", e.add(t.w, 0), t), 
            n *= 2), this._addButton("panright", "east-mini.png", e.add(n, 0), t), this._addButton("pandown", "south-mini.png", i.add(0, 2 * t.h), t), 
            this._addButton("zoomin", "zoom-plus-mini.png", i.add(0, 3 * t.h + 5), t), i = this._addZoomBar(i.add(0, 4 * t.h + 5)), 
            this._addButton("zoomout", "zoom-minus-mini.png", i, t);
        } else this._addButton("zoomin", "zoom-plus-mini.png", e, t), i = this._addZoomBar(e.add(0, t.h)), 
        this._addButton("zoomout", "zoom-minus-mini.png", i, t), this.zoomWorldIcon && (i = i.add(0, t.h + 3), 
        this._addButton("zoomworld", "zoom-world-mini.png", i, t));
        return this.div;
    },
    "_addZoomBar": function(e) {
        var t = OpenLayers.Util.getImageLocation("slider.png"), i = this.id + "_" + this.map.id, n = this.map.getMinZoom(), s = this.map.getNumZoomLevels() - 1 - this.map.getZoom(), r = OpenLayers.Util.createAlphaImageDiv(i, e.add(-1, s * this.zoomStopHeight), {
            "w": 20,
            "h": 9
        }, t, "absolute");
        r.style.cursor = "move", this.slider = r, this.sliderEvents = new OpenLayers.Events(this, r, null, !0, {
            "includeXY": !0
        }), this.sliderEvents.on({
            "touchstart": this.zoomBarDown,
            "touchmove": this.zoomBarDrag,
            "touchend": this.zoomBarUp,
            "mousedown": this.zoomBarDown,
            "mousemove": this.zoomBarDrag,
            "mouseup": this.zoomBarUp
        });
        var o = {
            "w": this.zoomStopWidth,
            "h": this.zoomStopHeight * (this.map.getNumZoomLevels() - n)
        }, t = OpenLayers.Util.getImageLocation("zoombar.png"), a = null;
        if (OpenLayers.Util.alphaHack()) {
            i = this.id + "_" + this.map.id;
            (a = OpenLayers.Util.createAlphaImageDiv(i, e, {
                "w": o.w,
                "h": this.zoomStopHeight
            }, t, "absolute", null, "crop")).style.height = o.h + "px";
        } else a = OpenLayers.Util.createDiv("OpenLayers_Control_PanZoomBar_Zoombar" + this.map.id, e, o, t);
        return a.style.cursor = "pointer", a.className = "olButton", this.zoombarDiv = a, 
        this.div.appendChild(a), this.startTop = parseInt(a.style.top), this.div.appendChild(r), 
        this.map.events.register("zoomend", this, this.moveZoomBar), e = e.add(0, this.zoomStopHeight * (this.map.getNumZoomLevels() - n));
    },
    "_removeZoomBar": function() {
        this.sliderEvents.un({
            "touchstart": this.zoomBarDown,
            "touchmove": this.zoomBarDrag,
            "touchend": this.zoomBarUp,
            "mousedown": this.zoomBarDown,
            "mousemove": this.zoomBarDrag,
            "mouseup": this.zoomBarUp
        }), this.sliderEvents.destroy(), this.div.removeChild(this.zoombarDiv), this.zoombarDiv = null, 
        this.div.removeChild(this.slider), this.slider = null, this.map.events.unregister("zoomend", this, this.moveZoomBar);
    },
    "onButtonClick": function(e) {
        if (OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this, arguments), e.buttonElement === this.zoombarDiv) {
            var t = e.buttonXY.y / this.zoomStopHeight;
            !this.forceFixedZoomLevel && this.map.fractionalZoom || (t = Math.floor(t));
            var i = this.map.getNumZoomLevels() - 1 - t;
            i = Math.min(Math.max(i, 0), this.map.getNumZoomLevels() - 1), this.map.zoomTo(i);
        }
    },
    "passEventToSlider": function(e) {
        this.sliderEvents.handleBrowserEvent(e);
    },
    "zoomBarDown": function(e) {
        (OpenLayers.Event.isLeftClick(e) || OpenLayers.Event.isSingleTouch(e)) && ((this.outsideViewport ? this : this.map).events.on({
            "touchmove": this.passEventToSlider,
            "mousemove": this.passEventToSlider,
            "mouseup": this.passEventToSlider,
            "scope": this
        }), this.mouseDragStart = e.xy.clone(), this.zoomStart = e.xy.clone(), this.div.style.cursor = "move", 
        this.zoombarDiv.offsets = null, OpenLayers.Event.stop(e));
    },
    "zoomBarDrag": function(e) {
        if (null != this.mouseDragStart) {
            var t = this.mouseDragStart.y - e.xy.y, i = OpenLayers.Util.pagePosition(this.zoombarDiv);
            if (e.clientY - i[1] > 0 && e.clientY - i[1] < parseInt(this.zoombarDiv.style.height) - 2) {
                var n = parseInt(this.slider.style.top) - t;
                this.slider.style.top = n + "px", this.mouseDragStart = e.xy.clone();
            }
            this.deltaY = this.zoomStart.y - e.xy.y, OpenLayers.Event.stop(e);
        }
    },
    "zoomBarUp": function(e) {
        if ((OpenLayers.Event.isLeftClick(e) || "touchend" === e.type) && this.mouseDragStart) {
            this.div.style.cursor = "", (this.outsideViewport ? this : this.map).events.un({
                "touchmove": this.passEventToSlider,
                "mouseup": this.passEventToSlider,
                "mousemove": this.passEventToSlider,
                "scope": this
            });
            var t = this.map.zoom;
            !this.forceFixedZoomLevel && this.map.fractionalZoom ? (t += this.deltaY / this.zoomStopHeight, 
            t = Math.min(Math.max(t, 0), this.map.getNumZoomLevels() - 1)) : (t += this.deltaY / this.zoomStopHeight, 
            t = Math.max(Math.round(t), 0)), this.map.zoomTo(t), this.mouseDragStart = null, 
            this.zoomStart = null, this.deltaY = 0, OpenLayers.Event.stop(e);
        }
    },
    "moveZoomBar": function() {
        var e = (this.map.getNumZoomLevels() - 1 - this.map.getZoom()) * this.zoomStopHeight + this.startTop + 1;
        this.slider.style.top = e + "px";
    },
    "CLASS_NAME": "OpenLayers.Control.PanZoomBar"
}), OpenLayers.Control.Permalink = OpenLayers.Class(OpenLayers.Control, {
    "argParserClass": OpenLayers.Control.ArgParser,
    "element": null,
    "anchor": !1,
    "base": "",
    "displayProjection": null,
    "initialize": function(e, t, i) {
        null === e || "object" != typeof e || OpenLayers.Util.isElement(e) ? (OpenLayers.Control.prototype.initialize.apply(this, [ i ]), 
        this.element = OpenLayers.Util.getElement(e), this.base = t || document.location.href) : (i = e, 
        this.base = document.location.href, OpenLayers.Control.prototype.initialize.apply(this, [ i ]), 
        null != this.element && (this.element = OpenLayers.Util.getElement(this.element)));
    },
    "destroy": function() {
        this.element && this.element.parentNode == this.div && (this.div.removeChild(this.element), 
        this.element = null), this.map && this.map.events.unregister("moveend", this, this.updateLink), 
        OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "setMap": function(e) {
        OpenLayers.Control.prototype.setMap.apply(this, arguments);
        for (var t = 0, i = this.map.controls.length; t < i; t++) {
            var n = this.map.controls[t];
            if (n.CLASS_NAME == this.argParserClass.CLASS_NAME) {
                n.displayProjection != this.displayProjection && (this.displayProjection = n.displayProjection);
                break;
            }
        }
        t == this.map.controls.length && this.map.addControl(new this.argParserClass({
            "displayProjection": this.displayProjection
        }));
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || this.anchor || (this.element = document.createElement("a"), 
        this.element.innerHTML = OpenLayers.i18n("Permalink"), this.element.href = "", this.div.appendChild(this.element)), 
        this.map.events.on({
            "moveend": this.updateLink,
            "changelayer": this.updateLink,
            "changebaselayer": this.updateLink,
            "scope": this
        }), this.updateLink(), this.div;
    },
    "updateLink": function() {
        var e = this.anchor ? "#" : "?", t = this.base, i = null;
        -1 != t.indexOf("#") && 0 == this.anchor && (i = t.substring(t.indexOf("#"), t.length)), 
        -1 != t.indexOf(e) && (t = t.substring(0, t.indexOf(e))), t = t.split("#")[0] + e + OpenLayers.Util.getParameterString(this.createParams()), 
        i && (t += i), this.anchor && !this.element ? window.location.href = t : this.element.href = t;
    },
    "createParams": function(e, t, i) {
        e = e || this.map.getCenter();
        var n = OpenLayers.Util.getParameters(this.base);
        if (e) {
            n.zoom = t || this.map.getZoom();
            var s = e.lat, r = e.lon;
            if (this.displayProjection) {
                var o = OpenLayers.Projection.transform({
                    "x": r,
                    "y": s
                }, this.map.getProjectionObject(), this.displayProjection);
                r = o.x, s = o.y;
            }
            n.lat = Math.round(1e5 * s) / 1e5, n.lon = Math.round(1e5 * r) / 1e5, i = i || this.map.layers, 
            n.layers = "";
            for (var a = 0, l = i.length; a < l; a++) {
                var h = i[a];
                h.isBaseLayer ? n.layers += h == this.map.baseLayer ? "B" : "0" : n.layers += h.getVisibility() ? "T" : "F";
            }
        }
        return n;
    },
    "CLASS_NAME": "OpenLayers.Control.Permalink"
}), OpenLayers.Handler.Pinch = OpenLayers.Class(OpenLayers.Handler, {
    "started": !1,
    "stopDown": !1,
    "pinching": !1,
    "last": null,
    "start": null,
    "touchstart": function(e) {
        var t = !0;
        if (this.pinching = !1, OpenLayers.Event.isMultiTouch(e)) this.started = !0, this.last = this.start = {
            "distance": this.getDistance(e.touches),
            "delta": 0,
            "scale": 1
        }, this.callback("start", [ e, this.start ]), t = !this.stopDown; else {
            if (this.started) return !1;
            this.started = !1, this.start = null, this.last = null;
        }
        return OpenLayers.Event.preventDefault(e), t;
    },
    "touchmove": function(e) {
        if (this.started && OpenLayers.Event.isMultiTouch(e)) {
            this.pinching = !0;
            var t = this.getPinchData(e);
            this.callback("move", [ e, t ]), this.last = t, OpenLayers.Event.stop(e);
        } else if (this.started) return !1;
        return !0;
    },
    "touchend": function(e) {
        return !(this.started && !OpenLayers.Event.isMultiTouch(e)) || (this.started = !1, 
        this.pinching = !1, this.callback("done", [ e, this.start, this.last ]), this.start = null, 
        this.last = null, !1);
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.activate.apply(this, arguments) && (this.pinching = !1, 
        e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.prototype.deactivate.apply(this, arguments) && (this.started = !1, 
        this.pinching = !1, this.start = null, this.last = null, e = !0), e;
    },
    "getDistance": function(e) {
        var t = e[0], i = e[1];
        return Math.sqrt(Math.pow(t.olClientX - i.olClientX, 2) + Math.pow(t.olClientY - i.olClientY, 2));
    },
    "getPinchData": function(e) {
        var t = this.getDistance(e.touches), i = t / this.start.distance;
        return {
            "distance": t,
            "delta": this.last.distance - t,
            "scale": i
        };
    },
    "CLASS_NAME": "OpenLayers.Handler.Pinch"
}), OpenLayers.Control.PinchZoom = OpenLayers.Class(OpenLayers.Control, {
    "type": OpenLayers.Control.TYPE_TOOL,
    "pinchOrigin": null,
    "currentCenter": null,
    "autoActivate": !0,
    "preserveCenter": !1,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, arguments), this.handler = new OpenLayers.Handler.Pinch(this, {
            "start": this.pinchStart,
            "move": this.pinchMove,
            "done": this.pinchDone
        }, this.handlerOptions);
    },
    "pinchStart": function(e, t) {
        var i = this.preserveCenter ? this.map.getPixelFromLonLat(this.map.getCenter()) : e.xy;
        this.pinchOrigin = i, this.currentCenter = i;
    },
    "pinchMove": function(e, t) {
        var i = t.scale, n = this.map.layerContainerOriginPx, s = this.pinchOrigin, r = this.preserveCenter ? this.map.getPixelFromLonLat(this.map.getCenter()) : e.xy, o = Math.round(n.x + r.x - s.x + (i - 1) * (n.x - s.x)), a = Math.round(n.y + r.y - s.y + (i - 1) * (n.y - s.y));
        this.map.applyTransform(o, a, i), this.currentCenter = r;
    },
    "pinchDone": function(e, t, i) {
        this.map.applyTransform();
        var n = this.map.getZoomForResolution(this.map.getResolution() / i.scale, !0);
        if (n !== this.map.getZoom() || !this.currentCenter.equals(this.pinchOrigin)) {
            var s = this.map.getResolutionForZoom(n), r = this.map.getLonLatFromPixel(this.pinchOrigin), o = this.currentCenter, a = this.map.getSize();
            r.lon += s * (a.w / 2 - o.x), r.lat -= s * (a.h / 2 - o.y), this.map.div.clientWidth = this.map.div.clientWidth, 
            this.map.setCenter(r, n);
        }
    },
    "CLASS_NAME": "OpenLayers.Control.PinchZoom"
}), OpenLayers.Control.Scale = OpenLayers.Class(OpenLayers.Control, {
    "element": null,
    "geodesic": !1,
    "template": "Scale = 1 : ${scaleDenom}",
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), this.element = OpenLayers.Util.getElement(e);
    },
    "draw": function() {
        return OpenLayers.Control.prototype.draw.apply(this, arguments), this.element || (this.element = document.createElement("div"), 
        this.div.appendChild(this.element)), this.map.events.register("moveend", this, this.updateScale), 
        this.updateScale(), this.div;
    },
    "updateScale": function() {
        var e;
        if (!0 === this.geodesic) {
            if (!this.map.getUnits()) return;
            var t = OpenLayers.INCHES_PER_UNIT;
            e = (this.map.getGeodesicPixelSize().w || 1e-6) * t.km * OpenLayers.DOTS_PER_INCH;
        } else e = this.map.getScale();
        if (e) {
            e = e >= 9500 && e <= 95e4 ? Math.round(e / 1e3) + "K" : e >= 95e4 ? Math.round(e / 1e6) + "M" : Math.round(e);
            var i = OpenLayers.i18n(this.template, {
                "scaleDenom": e
            });
            this.element.innerHTML = i;
        }
    },
    "CLASS_NAME": "OpenLayers.Control.Scale"
}), OpenLayers.Control.ScaleLine = OpenLayers.Class(OpenLayers.Control, {
    "maxWidth": 100,
    "topOutUnits": "km",
    "topInUnits": "m",
    "bottomOutUnits": "mi",
    "bottomInUnits": "ft",
    "eTop": null,
    "eBottom": null,
    "geodesic": !1,
    "draw": function() {
        if (OpenLayers.Control.prototype.draw.apply(this, arguments), !this.eTop) {
            this.eTop = document.createElement("div"), this.eTop.className = this.displayClass + "Top";
            this.topInUnits.length;
            this.div.appendChild(this.eTop), "" == this.topOutUnits || "" == this.topInUnits ? this.eTop.style.visibility = "hidden" : this.eTop.style.visibility = "visible", 
            this.eBottom = document.createElement("div"), this.eBottom.className = this.displayClass + "Bottom", 
            this.div.appendChild(this.eBottom), "" == this.bottomOutUnits || "" == this.bottomInUnits ? this.eBottom.style.visibility = "hidden" : this.eBottom.style.visibility = "visible";
        }
        return this.map.events.register("moveend", this, this.update), this.update(), this.div;
    },
    "getBarLen": function(e) {
        var t = parseInt(Math.log(e) / Math.log(10)), i = Math.pow(10, t), n = parseInt(e / i);
        return (n > 5 ? 5 : n > 2 ? 2 : 1) * i;
    },
    "update": function() {
        var e = this.map.getResolution();
        if (e) {
            var t = this.map.getUnits(), i = OpenLayers.INCHES_PER_UNIT, n = this.maxWidth * e * i[t], s = 1;
            !0 === this.geodesic && (n *= s = (this.map.getGeodesicPixelSize().w || 1e-6) * this.maxWidth / (n / i.km));
            var r, o;
            n > 1e5 ? (r = this.topOutUnits, o = this.bottomOutUnits) : (r = this.topInUnits, 
            o = this.bottomInUnits);
            var a = n / i[r], l = n / i[o], h = this.getBarLen(a), c = this.getBarLen(l), u = (a = h / i[t] * i[r]) / e / s, p = (l = c / i[t] * i[o]) / e / s;
            "visible" == this.eBottom.style.visibility && (this.eBottom.style.width = Math.round(p) + "px", 
            this.eBottom.innerHTML = c + " " + o), "visible" == this.eTop.style.visibility && (this.eTop.style.width = Math.round(u) + "px", 
            this.eTop.innerHTML = h + " " + r);
        }
    },
    "CLASS_NAME": "OpenLayers.Control.ScaleLine"
}), OpenLayers.Layer.Vector.RootContainer = OpenLayers.Class(OpenLayers.Layer.Vector, {
    "displayInLayerSwitcher": !1,
    "layers": null,
    "display": function() {},
    "getFeatureFromEvent": function(e) {
        for (var t, i = this.layers, n = 0; n < i.length; n++) if (t = i[n].getFeatureFromEvent(e)) return t;
    },
    "setMap": function(e) {
        OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments), this.collectRoots(), 
        e.events.register("changelayer", this, this.handleChangeLayer);
    },
    "removeMap": function(e) {
        e.events.unregister("changelayer", this, this.handleChangeLayer), this.resetRoots(), 
        OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments);
    },
    "collectRoots": function() {
        for (var e, t = 0; t < this.map.layers.length; ++t) e = this.map.layers[t], -1 != OpenLayers.Util.indexOf(this.layers, e) && e.renderer.moveRoot(this.renderer);
    },
    "resetRoots": function() {
        for (var e, t = 0; t < this.layers.length; ++t) e = this.layers[t], this.renderer && e.renderer.getRenderLayerId() == this.id && this.renderer.moveRoot(e.renderer);
    },
    "handleChangeLayer": function(e) {
        var t = e.layer;
        "order" == e.property && -1 != OpenLayers.Util.indexOf(this.layers, t) && (this.resetRoots(), 
        this.collectRoots());
    },
    "CLASS_NAME": "OpenLayers.Layer.Vector.RootContainer"
}), OpenLayers.Control.SelectFeature = OpenLayers.Class(OpenLayers.Control, {
    "multipleKey": null,
    "toggleKey": null,
    "multiple": !1,
    "clickout": !0,
    "toggle": !1,
    "hover": !1,
    "highlightOnly": !1,
    "box": !1,
    "onBeforeSelect": function() {},
    "onSelect": function() {},
    "onUnselect": function() {},
    "scope": null,
    "geometryTypes": null,
    "layer": null,
    "layers": null,
    "callbacks": null,
    "selectStyle": null,
    "renderIntent": "select",
    "handlers": null,
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), null === this.scope && (this.scope = this), 
        this.initLayer(e);
        var i = {
            "click": this.clickFeature,
            "clickout": this.clickoutFeature
        };
        this.hover && (i.over = this.overFeature, i.out = this.outFeature), this.callbacks = OpenLayers.Util.extend(i, this.callbacks), 
        this.handlers = {
            "feature": new OpenLayers.Handler.Feature(this, this.layer, this.callbacks, {
                "geometryTypes": this.geometryTypes
            })
        }, this.box && (this.handlers.box = new OpenLayers.Handler.Box(this, {
            "done": this.selectBox
        }, {
            "boxDivClassName": "olHandlerBoxSelectFeature"
        }));
    },
    "initLayer": function(e) {
        OpenLayers.Util.isArray(e) ? (this.layers = e, this.layer = new OpenLayers.Layer.Vector.RootContainer(this.id + "_container", {
            "layers": e
        })) : this.layer = e;
    },
    "destroy": function() {
        this.active && this.layers && this.map.removeLayer(this.layer), OpenLayers.Control.prototype.destroy.apply(this, arguments), 
        this.layers && this.layer.destroy();
    },
    "activate": function() {
        return this.active || (this.layers && this.map.addLayer(this.layer), this.handlers.feature.activate(), 
        this.box && this.handlers.box && this.handlers.box.activate()), OpenLayers.Control.prototype.activate.apply(this, arguments);
    },
    "deactivate": function() {
        return this.active && (this.handlers.feature.deactivate(), this.handlers.box && this.handlers.box.deactivate(), 
        this.layers && this.map.removeLayer(this.layer)), OpenLayers.Control.prototype.deactivate.apply(this, arguments);
    },
    "unselectAll": function(e) {
        var t, i, n, s, r = this.layers || [ this.layer ];
        for (n = 0; n < r.length; ++n) if (t = r[n], s = 0, null != t.selectedFeatures) for (;t.selectedFeatures.length > s; ) i = t.selectedFeatures[s], 
        e && e.except == i ? ++s : this.unselect(i);
    },
    "clickFeature": function(e) {
        this.hover || (OpenLayers.Util.indexOf(e.layer.selectedFeatures, e) > -1 ? this.toggleSelect() ? this.unselect(e) : this.multipleSelect() || this.unselectAll({
            "except": e
        }) : (this.multipleSelect() || this.unselectAll({
            "except": e
        }), this.select(e)));
    },
    "multipleSelect": function() {
        return this.multiple || this.handlers.feature.evt && this.handlers.feature.evt[this.multipleKey];
    },
    "toggleSelect": function() {
        return this.toggle || this.handlers.feature.evt && this.handlers.feature.evt[this.toggleKey];
    },
    "clickoutFeature": function(e) {
        !this.hover && this.clickout && this.unselectAll();
    },
    "overFeature": function(e) {
        var t = e.layer;
        this.hover && (this.highlightOnly ? this.highlight(e) : -1 == OpenLayers.Util.indexOf(t.selectedFeatures, e) && this.select(e));
    },
    "outFeature": function(e) {
        if (this.hover) if (this.highlightOnly) {
            if (e._lastHighlighter == this.id) if (e._prevHighlighter && e._prevHighlighter != this.id) {
                delete e._lastHighlighter;
                var t = this.map.getControl(e._prevHighlighter);
                t && t.highlight(e);
            } else this.unhighlight(e);
        } else this.unselect(e);
    },
    "highlight": function(e) {
        var t = e.layer;
        if (!1 !== this.events.triggerEvent("beforefeaturehighlighted", {
            "feature": e
        })) {
            e._prevHighlighter = e._lastHighlighter, e._lastHighlighter = this.id;
            var i = this.selectStyle || this.renderIntent;
            t.drawFeature(e, i), this.events.triggerEvent("featurehighlighted", {
                "feature": e
            });
        }
    },
    "unhighlight": function(e) {
        var t = e.layer;
        void 0 == e._prevHighlighter ? delete e._lastHighlighter : e._prevHighlighter == this.id ? delete e._prevHighlighter : (e._lastHighlighter = e._prevHighlighter, 
        delete e._prevHighlighter), t.drawFeature(e, e.style || e.layer.style || "default"), 
        this.events.triggerEvent("featureunhighlighted", {
            "feature": e
        });
    },
    "select": function(e) {
        var t = this.onBeforeSelect.call(this.scope, e), i = e.layer;
        !1 !== t && !1 !== (t = i.events.triggerEvent("beforefeatureselected", {
            "feature": e
        })) && (i.selectedFeatures.push(e), this.highlight(e), this.handlers.feature.lastFeature || (this.handlers.feature.lastFeature = i.selectedFeatures[0]), 
        i.events.triggerEvent("featureselected", {
            "feature": e
        }), this.onSelect.call(this.scope, e));
    },
    "unselect": function(e) {
        var t = e.layer;
        this.unhighlight(e), OpenLayers.Util.removeItem(t.selectedFeatures, e), t.events.triggerEvent("featureunselected", {
            "feature": e
        }), this.onUnselect.call(this.scope, e);
    },
    "selectBox": function(e) {
        if (e instanceof OpenLayers.Bounds) {
            var t = this.map.getLonLatFromPixel({
                "x": e.left,
                "y": e.bottom
            }), i = this.map.getLonLatFromPixel({
                "x": e.right,
                "y": e.top
            }), n = new OpenLayers.Bounds(t.lon, t.lat, i.lon, i.lat);
            this.multipleSelect() || this.unselectAll();
            var s = this.multiple;
            this.multiple = !0;
            var r = this.layers || [ this.layer ];
            this.events.triggerEvent("boxselectionstart", {
                "layers": r
            });
            for (var o, a = 0; a < r.length; ++a) for (var l = 0, h = (o = r[a]).features.length; l < h; ++l) {
                var c = o.features[l];
                c.getVisibility() && ((null == this.geometryTypes || OpenLayers.Util.indexOf(this.geometryTypes, c.geometry.CLASS_NAME) > -1) && n.toGeometry().intersects(c.geometry) && -1 == OpenLayers.Util.indexOf(o.selectedFeatures, c) && this.select(c));
            }
            this.multiple = s, this.events.triggerEvent("boxselectionend", {
                "layers": r
            });
        }
    },
    "setMap": function(e) {
        this.handlers.feature.setMap(e), this.box && this.handlers.box.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "setLayer": function(e) {
        var t = this.active;
        this.unselectAll(), this.deactivate(), this.layers && (this.layer.destroy(), this.layers = null), 
        this.initLayer(e), this.handlers.feature.layer = this.layer, t && this.activate();
    },
    "addLayer": function(e) {
        var t = this.active;
        this.deactivate(), null == this.layers ? null != this.layer ? (this.layers = [ this.layer ], 
        this.layers.push(e)) : this.layers = [ e ] : this.layers.push(e), this.initLayer(this.layers), 
        this.handlers.feature.layer = this.layer, t && this.activate();
    },
    "CLASS_NAME": "OpenLayers.Control.SelectFeature"
}), OpenLayers.Layer.WMS = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {
        "service": "WMS",
        "version": "1.1.1",
        "request": "GetMap",
        "styles": "",
        "format": "image/jpeg"
    },
    "isBaseLayer": !0,
    "encodeBBOX": !1,
    "noMagic": !1,
    "yx": {},
    "initialize": function(e, t, i, n) {
        var s = [];
        i = OpenLayers.Util.upperCaseObject(i), parseFloat(i.VERSION) >= 1.3 && !i.EXCEPTIONS && (i.EXCEPTIONS = "INIMAGE"), 
        s.push(e, t, i, n), OpenLayers.Layer.Grid.prototype.initialize.apply(this, s), OpenLayers.Util.applyDefaults(this.params, OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)), 
        !this.noMagic && this.params.TRANSPARENT && "true" == this.params.TRANSPARENT.toString().toLowerCase() && (null != n && n.isBaseLayer || (this.isBaseLayer = !1), 
        "image/jpeg" == this.params.FORMAT && (this.params.FORMAT = OpenLayers.Util.alphaHack() ? "image/gif" : "image/png"));
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.WMS(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "reverseAxisOrder": function() {
        var e = this.projection.getCode();
        return parseFloat(this.params.VERSION) >= 1.3 && !!(this.yx[e] || OpenLayers.Projection.defaults[e] && OpenLayers.Projection.defaults[e].yx);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.getImageSize(e), i = {}, n = this.reverseAxisOrder();
        return i.BBOX = this.encodeBBOX ? e.toBBOX(null, n) : e.toArray(n), i.WIDTH = t.w, 
        i.HEIGHT = t.h, this.getFullRequestString(i);
    },
    "mergeNewParams": function(e) {
        var t = [ OpenLayers.Util.upperCaseObject(e) ];
        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, t);
    },
    "getFullRequestString": function(e, t) {
        var i = this.map.getProjectionObject(), n = this.projection && this.projection.equals(i) ? this.projection.getCode() : i.getCode(), s = "none" == n ? null : n;
        return parseFloat(this.params.VERSION) >= 1.3 ? this.params.CRS = s : this.params.SRS = s, 
        "boolean" == typeof this.params.TRANSPARENT && (e.TRANSPARENT = this.params.TRANSPARENT ? "TRUE" : "FALSE"), 
        OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Layer.WMS"
}), OpenLayers.Handler.RegularPolygon = OpenLayers.Class(OpenLayers.Handler.Drag, {
    "sides": 4,
    "radius": null,
    "snapAngle": null,
    "snapToggle": "shiftKey",
    "layerOptions": null,
    "persist": !1,
    "irregular": !1,
    "citeCompliant": !1,
    "angle": null,
    "fixedRadius": !1,
    "feature": null,
    "layer": null,
    "origin": null,
    "initialize": function(e, t, i) {
        i && i.layerOptions && i.layerOptions.styleMap || (this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default, {})), 
        OpenLayers.Handler.Drag.prototype.initialize.apply(this, [ e, t, i ]), this.options = i || {};
    },
    "setOptions": function(e) {
        OpenLayers.Util.extend(this.options, e), OpenLayers.Util.extend(this, e);
    },
    "activate": function() {
        var e = !1;
        if (OpenLayers.Handler.Drag.prototype.activate.apply(this, arguments)) {
            var t = OpenLayers.Util.extend({
                "displayInLayerSwitcher": !1,
                "calculateInRange": OpenLayers.Function.True,
                "wrapDateLine": this.citeCompliant
            }, this.layerOptions);
            this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, t), this.map.addLayer(this.layer), 
            e = !0;
        }
        return e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.Drag.prototype.deactivate.apply(this, arguments) && (this.dragging && this.cancel(), 
        null != this.layer.map && (this.layer.destroy(!1), this.feature && this.feature.destroy()), 
        this.layer = null, this.feature = null, e = !0), e;
    },
    "down": function(e) {
        this.fixedRadius = !!this.radius;
        var t = this.layer.getLonLatFromViewPortPx(e.xy);
        this.origin = new OpenLayers.Geometry.Point(t.lon, t.lat), this.fixedRadius && !this.irregular || (this.radius = this.map.getResolution()), 
        this.persist && this.clear(), this.feature = new OpenLayers.Feature.Vector(), this.createGeometry(), 
        this.callback("create", [ this.origin, this.feature ]), this.layer.addFeatures([ this.feature ], {
            "silent": !0
        }), this.layer.drawFeature(this.feature, this.style);
    },
    "move": function(e) {
        var t = this.layer.getLonLatFromViewPortPx(e.xy), i = new OpenLayers.Geometry.Point(t.lon, t.lat);
        if (this.irregular) {
            var n = Math.sqrt(2) * Math.abs(i.y - this.origin.y) / 2;
            this.radius = Math.max(this.map.getResolution() / 2, n);
        } else this.fixedRadius ? this.origin = i : (this.calculateAngle(i, e), this.radius = Math.max(this.map.getResolution() / 2, i.distanceTo(this.origin)));
        if (this.modifyGeometry(), this.irregular) {
            var s, r = i.x - this.origin.x, o = i.y - this.origin.y;
            s = 0 == o ? r / (this.radius * Math.sqrt(2)) : r / o, this.feature.geometry.resize(1, this.origin, s), 
            this.feature.geometry.move(r / 2, o / 2);
        }
        this.layer.drawFeature(this.feature, this.style);
    },
    "up": function(e) {
        this.finalize(), this.start == this.last && this.callback("done", [ e.xy ]);
    },
    "out": function(e) {
        this.finalize();
    },
    "createGeometry": function() {
        this.angle = Math.PI * (1 / this.sides - .5), this.snapAngle && (this.angle += this.snapAngle * (Math.PI / 180)), 
        this.feature.geometry = OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin, this.radius, this.sides, this.snapAngle);
    },
    "modifyGeometry": function() {
        var e, t, i = this.feature.geometry.components[0];
        i.components.length != this.sides + 1 && (this.createGeometry(), i = this.feature.geometry.components[0]);
        for (var n = 0; n < this.sides; ++n) t = i.components[n], e = this.angle + 2 * n * Math.PI / this.sides, 
        t.x = this.origin.x + this.radius * Math.cos(e), t.y = this.origin.y + this.radius * Math.sin(e), 
        t.clearBounds();
    },
    "calculateAngle": function(e, t) {
        var i = Math.atan2(e.y - this.origin.y, e.x - this.origin.x);
        if (this.snapAngle && this.snapToggle && !t[this.snapToggle]) {
            var n = Math.PI / 180 * this.snapAngle;
            this.angle = Math.round(i / n) * n;
        } else this.angle = i;
    },
    "cancel": function() {
        this.callback("cancel", null), this.finalize();
    },
    "finalize": function() {
        this.origin = null, this.radius = this.options.radius;
    },
    "clear": function() {
        this.layer && (this.layer.renderer.clear(), this.layer.destroyFeatures());
    },
    "callback": function(e, t) {
        this.callbacks[e] && this.callbacks[e].apply(this.control, [ this.feature.geometry.clone() ]), 
        this.persist || "done" != e && "cancel" != e || this.clear();
    },
    "CLASS_NAME": "OpenLayers.Handler.RegularPolygon"
}), OpenLayers.Format.SLD = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "profile": null,
    "defaultVersion": "1.0.0",
    "stringifyOutput": !0,
    "namedLayersAsArray": !1,
    "CLASS_NAME": "OpenLayers.Format.SLD"
}), OpenLayers.Format.GML.v2 = OpenLayers.Class(OpenLayers.Format.GML.Base, {
    "schemaLocation": "http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",
    "initialize": function(e) {
        OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "gml": OpenLayers.Util.applyDefaults({
            "outerBoundaryIs": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.outer = i.components[0];
            },
            "innerBoundaryIs": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.inner.push(i.components[0]);
            },
            "Box": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.components || (t.components = []);
                var n = i.points[0], s = i.points[1];
                t.components.push(new OpenLayers.Bounds(n.x, n.y, s.x, s.y));
            }
        }, OpenLayers.Format.GML.Base.prototype.readers.gml),
        "feature": OpenLayers.Format.GML.Base.prototype.readers.feature,
        "wfs": OpenLayers.Format.GML.Base.prototype.readers.wfs
    },
    "write": function(e) {
        var t;
        t = OpenLayers.Util.isArray(e) ? "wfs:FeatureCollection" : "gml:featureMember";
        var i = this.writeNode(t, e);
        return this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "writers": {
        "gml": OpenLayers.Util.applyDefaults({
            "Point": function(e) {
                var t = this.createElementNSPlus("gml:Point");
                return this.writeNode("coordinates", [ e ], t), t;
            },
            "coordinates": function(e) {
                for (var t, i = e.length, n = new Array(i), s = 0; s < i; ++s) t = e[s], this.xy ? n[s] = t.x + "," + t.y : n[s] = t.y + "," + t.x, 
                void 0 != t.z && (n[s] += "," + t.z);
                return this.createElementNSPlus("gml:coordinates", {
                    "attributes": {
                        "decimal": ".",
                        "cs": ",",
                        "ts": " "
                    },
                    "value": 1 == i ? n[0] : n.join(" ")
                });
            },
            "LineString": function(e) {
                var t = this.createElementNSPlus("gml:LineString");
                return this.writeNode("coordinates", e.components, t), t;
            },
            "Polygon": function(e) {
                var t = this.createElementNSPlus("gml:Polygon");
                this.writeNode("outerBoundaryIs", e.components[0], t);
                for (var i = 1; i < e.components.length; ++i) this.writeNode("innerBoundaryIs", e.components[i], t);
                return t;
            },
            "outerBoundaryIs": function(e) {
                var t = this.createElementNSPlus("gml:outerBoundaryIs");
                return this.writeNode("LinearRing", e, t), t;
            },
            "innerBoundaryIs": function(e) {
                var t = this.createElementNSPlus("gml:innerBoundaryIs");
                return this.writeNode("LinearRing", e, t), t;
            },
            "LinearRing": function(e) {
                var t = this.createElementNSPlus("gml:LinearRing");
                return this.writeNode("coordinates", e.components, t), t;
            },
            "Box": function(e) {
                var t = this.createElementNSPlus("gml:Box");
                return this.writeNode("coordinates", [ {
                    "x": e.left,
                    "y": e.bottom
                }, {
                    "x": e.right,
                    "y": e.top
                } ], t), this.srsName && t.setAttribute("srsName", this.srsName), t;
            }
        }, OpenLayers.Format.GML.Base.prototype.writers.gml),
        "feature": OpenLayers.Format.GML.Base.prototype.writers.feature,
        "wfs": OpenLayers.Format.GML.Base.prototype.writers.wfs
    },
    "CLASS_NAME": "OpenLayers.Format.GML.v2"
}), OpenLayers.Format.Filter.v1_0_0 = OpenLayers.Class(OpenLayers.Format.GML.v2, OpenLayers.Format.Filter.v1, {
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/ogc/filter/1.0.0/filter.xsd",
    "initialize": function(e) {
        OpenLayers.Format.GML.v2.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "ogc": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsNotEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.NOT_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLike": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LIKE
                });
                this.readChildNodes(e, i);
                var n = e.getAttribute("wildCard"), s = e.getAttribute("singleChar"), r = e.getAttribute("escape");
                i.value2regex(n, s, r), t.filters.push(i);
            }
        }, OpenLayers.Format.Filter.v1.prototype.readers.ogc),
        "gml": OpenLayers.Format.GML.v2.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v2.prototype.readers.feature
    },
    "writers": {
        "ogc": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsEqualTo");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsNotEqualTo": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsNotEqualTo");
                return this.writeNode("PropertyName", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLike": function(e) {
                var t = this.createElementNSPlus("ogc:PropertyIsLike", {
                    "attributes": {
                        "wildCard": "*",
                        "singleChar": ".",
                        "escape": "!"
                    }
                });
                return this.writeNode("PropertyName", e, t), this.writeNode("Literal", e.regex2value(), t), 
                t;
            },
            "BBOX": function(e) {
                var t = this.createElementNSPlus("ogc:BBOX");
                e.property && this.writeNode("PropertyName", e, t);
                var i = this.writeNode("gml:Box", e.value, t);
                return e.projection && i.setAttribute("srsName", e.projection), t;
            }
        }, OpenLayers.Format.Filter.v1.prototype.writers.ogc),
        "gml": OpenLayers.Format.GML.v2.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v2.prototype.writers.feature
    },
    "writeSpatial": function(e, t) {
        var i = this.createElementNSPlus("ogc:" + t);
        if (this.writeNode("PropertyName", e, i), e.value instanceof OpenLayers.Filter.Function) this.writeNode("Function", e.value, i); else {
            var n;
            n = e.value instanceof OpenLayers.Geometry ? this.writeNode("feature:_geometry", e.value).firstChild : this.writeNode("gml:Box", e.value), 
            e.projection && n.setAttribute("srsName", e.projection), i.appendChild(n);
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v1_0_0"
}), OpenLayers.Format.SLD.v1 = OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0, {
    "namespaces": {
        "sld": "http://www.opengis.net/sld",
        "ogc": "http://www.opengis.net/ogc",
        "gml": "http://www.opengis.net/gml",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "defaultPrefix": "sld",
    "schemaLocation": null,
    "multipleSymbolizers": !1,
    "featureTypeCounter": null,
    "defaultSymbolizer": {
        "fillColor": "#808080",
        "fillOpacity": 1,
        "strokeColor": "#000000",
        "strokeOpacity": 1,
        "strokeWidth": 1,
        "strokeDashstyle": "solid",
        "pointRadius": 3,
        "graphicName": "square"
    },
    "read": function(e, t) {
        var i = {
            "namedLayers": !0 === (t = OpenLayers.Util.applyDefaults(t, this.options)).namedLayersAsArray ? [] : {}
        };
        return this.readChildNodes(e, i), i;
    },
    "readers": OpenLayers.Util.applyDefaults({
        "sld": {
            "StyledLayerDescriptor": function(e, t) {
                t.version = e.getAttribute("version"), this.readChildNodes(e, t);
            },
            "Name": function(e, t) {
                t.name = this.getChildValue(e);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.description = this.getChildValue(e);
            },
            "NamedLayer": function(e, t) {
                var i = {
                    "userStyles": [],
                    "namedStyles": []
                };
                this.readChildNodes(e, i);
                for (var n = 0, s = i.userStyles.length; n < s; ++n) i.userStyles[n].layerName = i.name;
                OpenLayers.Util.isArray(t.namedLayers) ? t.namedLayers.push(i) : t.namedLayers[i.name] = i;
            },
            "NamedStyle": function(e, t) {
                t.namedStyles.push(this.getChildValue(e.firstChild));
            },
            "UserStyle": function(e, t) {
                var i = {
                    "defaultsPerSymbolizer": !0,
                    "rules": []
                };
                this.featureTypeCounter = -1, this.readChildNodes(e, i);
                var n;
                this.multipleSymbolizers ? (delete i.defaultsPerSymbolizer, n = new OpenLayers.Style2(i)) : n = new OpenLayers.Style(this.defaultSymbolizer, i), 
                t.userStyles.push(n);
            },
            "IsDefault": function(e, t) {
                "1" == this.getChildValue(e) && (t.isDefault = !0);
            },
            "FeatureTypeStyle": function(e, t) {
                ++this.featureTypeCounter;
                var i = {
                    "rules": this.multipleSymbolizers ? t.rules : []
                };
                this.readChildNodes(e, i), this.multipleSymbolizers || (t.rules = i.rules);
            },
            "Rule": function(e, t) {
                var i;
                this.multipleSymbolizers && (i = {
                    "symbolizers": []
                });
                var n = new OpenLayers.Rule(i);
                this.readChildNodes(e, n), t.rules.push(n);
            },
            "ElseFilter": function(e, t) {
                t.elseFilter = !0;
            },
            "MinScaleDenominator": function(e, t) {
                t.minScaleDenominator = parseFloat(this.getChildValue(e));
            },
            "MaxScaleDenominator": function(e, t) {
                t.maxScaleDenominator = parseFloat(this.getChildValue(e));
            },
            "TextSymbolizer": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, 
                t.symbolizers.push(new OpenLayers.Symbolizer.Text(i))) : t.symbolizer.Text = OpenLayers.Util.applyDefaults(i, t.symbolizer.Text);
            },
            "LabelPlacement": function(e, t) {
                this.readChildNodes(e, t);
            },
            "PointPlacement": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), i.labelRotation = i.rotation, delete i.rotation;
                var n, s = t.labelAnchorPointX, r = t.labelAnchorPointY;
                s <= 1 / 3 ? n = "l" : s > 1 / 3 && s < 2 / 3 ? n = "c" : s >= 2 / 3 && (n = "r"), 
                r <= 1 / 3 ? n += "b" : r > 1 / 3 && r < 2 / 3 ? n += "m" : r >= 2 / 3 && (n += "t"), 
                i.labelAlign = n, OpenLayers.Util.applyDefaults(t, i);
            },
            "AnchorPoint": function(e, t) {
                this.readChildNodes(e, t);
            },
            "AnchorPointX": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelAnchorPointX = i);
            },
            "AnchorPointY": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelAnchorPointY = i);
            },
            "Displacement": function(e, t) {
                this.readChildNodes(e, t);
            },
            "DisplacementX": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelXOffset = i);
            },
            "DisplacementY": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelYOffset = i);
            },
            "LinePlacement": function(e, t) {
                this.readChildNodes(e, t);
            },
            "PerpendicularOffset": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.labelPerpendicularOffset = i);
            },
            "Label": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.label = OpenLayers.String.trim(i));
            },
            "Font": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Halo": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.haloRadius = i.haloRadius, t.haloColor = i.fillColor, 
                t.haloOpacity = i.fillOpacity;
            },
            "Radius": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                null != i && (t.haloRadius = i);
            },
            "RasterSymbolizer": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, 
                t.symbolizers.push(new OpenLayers.Symbolizer.Raster(i))) : t.symbolizer.Raster = OpenLayers.Util.applyDefaults(i, t.symbolizer.Raster);
            },
            "Geometry": function(e, t) {
                t.geometry = {}, this.readChildNodes(e, t.geometry);
            },
            "ColorMap": function(e, t) {
                t.colorMap = [], this.readChildNodes(e, t.colorMap);
            },
            "ColorMapEntry": function(e, t) {
                var i = e.getAttribute("quantity"), n = e.getAttribute("opacity");
                t.push({
                    "color": e.getAttribute("color"),
                    "quantity": null !== i ? parseFloat(i) : void 0,
                    "label": e.getAttribute("label") || void 0,
                    "opacity": null !== n ? parseFloat(n) : void 0
                });
            },
            "LineSymbolizer": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, 
                t.symbolizers.push(new OpenLayers.Symbolizer.Line(i))) : t.symbolizer.Line = OpenLayers.Util.applyDefaults(i, t.symbolizer.Line);
            },
            "PolygonSymbolizer": function(e, t) {
                var i = {
                    "fill": !1,
                    "stroke": !1
                };
                this.multipleSymbolizers || (i = t.symbolizer.Polygon || i), this.readChildNodes(e, i), 
                this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, t.symbolizers.push(new OpenLayers.Symbolizer.Polygon(i))) : t.symbolizer.Polygon = i;
            },
            "PointSymbolizer": function(e, t) {
                var i = {
                    "fill": !1,
                    "stroke": !1,
                    "graphic": !1
                };
                this.multipleSymbolizers || (i = t.symbolizer.Point || i), this.readChildNodes(e, i), 
                this.multipleSymbolizers ? (i.zIndex = this.featureTypeCounter, t.symbolizers.push(new OpenLayers.Symbolizer.Point(i))) : t.symbolizer.Point = i;
            },
            "Stroke": function(e, t) {
                t.stroke = !0, this.readChildNodes(e, t);
            },
            "Fill": function(e, t) {
                t.fill = !0, this.readChildNodes(e, t);
            },
            "CssParameter": function(e, t) {
                var i = e.getAttribute("name"), n = this.cssMap[i];
                if (t.label && ("fill" === i ? n = "fontColor" : "fill-opacity" === i && (n = "fontOpacity")), 
                n) {
                    var s = this.readers.ogc._expression.call(this, e);
                    s && (t[n] = s);
                }
            },
            "Graphic": function(e, t) {
                t.graphic = !0;
                var i = {};
                this.readChildNodes(e, i);
                for (var n, s, r = [ "stroke", "strokeColor", "strokeWidth", "strokeOpacity", "strokeLinecap", "fill", "fillColor", "fillOpacity", "graphicName", "rotation", "graphicFormat" ], o = 0, a = r.length; o < a; ++o) void 0 != (s = i[n = r[o]]) && (t[n] = s);
                if (void 0 != i.opacity && (t.graphicOpacity = i.opacity), void 0 != i.size) {
                    var l = i.size / 2;
                    isNaN(l) ? t.graphicWidth = i.size : t.pointRadius = i.size / 2;
                }
                void 0 != i.href && (t.externalGraphic = i.href), void 0 != i.rotation && (t.rotation = i.rotation);
            },
            "ExternalGraphic": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Mark": function(e, t) {
                this.readChildNodes(e, t);
            },
            "WellKnownName": function(e, t) {
                t.graphicName = this.getChildValue(e);
            },
            "Opacity": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.opacity = i);
            },
            "Size": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.size = i);
            },
            "Rotation": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.rotation = i);
            },
            "OnlineResource": function(e, t) {
                t.href = this.getAttributeNS(e, this.namespaces.xlink, "href");
            },
            "Format": function(e, t) {
                t.graphicFormat = this.getChildValue(e);
            }
        }
    }, OpenLayers.Format.Filter.v1_0_0.prototype.readers),
    "cssMap": {
        "stroke": "strokeColor",
        "stroke-opacity": "strokeOpacity",
        "stroke-width": "strokeWidth",
        "stroke-linecap": "strokeLinecap",
        "stroke-dasharray": "strokeDashstyle",
        "fill": "fillColor",
        "fill-opacity": "fillOpacity",
        "font-family": "fontFamily",
        "font-size": "fontSize",
        "font-weight": "fontWeight",
        "font-style": "fontStyle"
    },
    "getCssProperty": function(e) {
        var t = null;
        for (var i in this.cssMap) if (this.cssMap[i] == e) {
            t = i;
            break;
        }
        return t;
    },
    "getGraphicFormat": function(e) {
        var t;
        for (var i in this.graphicFormats) if (this.graphicFormats[i].test(e)) {
            t = i;
            break;
        }
        return t || this.defaultGraphicFormat;
    },
    "defaultGraphicFormat": "image/png",
    "graphicFormats": {
        "image/jpeg": /\.jpe?g$/i,
        "image/gif": /\.gif$/i,
        "image/png": /\.png$/i
    },
    "write": function(e) {
        return this.writers.sld.StyledLayerDescriptor.apply(this, [ e ]);
    },
    "writers": OpenLayers.Util.applyDefaults({
        "sld": {
            "_OGCExpression": function(e, t) {
                var i = this.createElementNSPlus(e), n = "string" == typeof t ? t.split("${") : [ t ];
                i.appendChild(this.createTextNode(n[0]));
                for (var s, r, o = 1, a = n.length; o < a; o++) (r = (s = n[o]).indexOf("}")) > 0 ? (this.writeNode("ogc:PropertyName", {
                    "property": s.substring(0, r)
                }, i), i.appendChild(this.createTextNode(s.substring(++r)))) : i.appendChild(this.createTextNode("${" + s));
                return i;
            },
            "StyledLayerDescriptor": function(e) {
                var t = this.createElementNSPlus("sld:StyledLayerDescriptor", {
                    "attributes": {
                        "version": this.VERSION,
                        "xsi:schemaLocation": this.schemaLocation
                    }
                });
                if (this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:ogc", this.namespaces.ogc), 
                this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:gml", this.namespaces.gml), 
                e.name && this.writeNode("Name", e.name, t), e.title && this.writeNode("Title", e.title, t), 
                e.description && this.writeNode("Abstract", e.description, t), OpenLayers.Util.isArray(e.namedLayers)) for (var i = 0, n = e.namedLayers.length; i < n; ++i) this.writeNode("NamedLayer", e.namedLayers[i], t); else for (var s in e.namedLayers) this.writeNode("NamedLayer", e.namedLayers[s], t);
                return t;
            },
            "Name": function(e) {
                return this.createElementNSPlus("sld:Name", {
                    "value": e
                });
            },
            "Title": function(e) {
                return this.createElementNSPlus("sld:Title", {
                    "value": e
                });
            },
            "Abstract": function(e) {
                return this.createElementNSPlus("sld:Abstract", {
                    "value": e
                });
            },
            "NamedLayer": function(e) {
                var t = this.createElementNSPlus("sld:NamedLayer");
                if (this.writeNode("Name", e.name, t), e.namedStyles) for (var i = 0, n = e.namedStyles.length; i < n; ++i) this.writeNode("NamedStyle", e.namedStyles[i], t);
                if (e.userStyles) for (var i = 0, n = e.userStyles.length; i < n; ++i) this.writeNode("UserStyle", e.userStyles[i], t);
                return t;
            },
            "NamedStyle": function(e) {
                var t = this.createElementNSPlus("sld:NamedStyle");
                return this.writeNode("Name", e, t), t;
            },
            "UserStyle": function(e) {
                var t = this.createElementNSPlus("sld:UserStyle");
                if (e.name && this.writeNode("Name", e.name, t), e.title && this.writeNode("Title", e.title, t), 
                e.description && this.writeNode("Abstract", e.description, t), e.isDefault && this.writeNode("IsDefault", e.isDefault, t), 
                this.multipleSymbolizers && e.rules) {
                    for (var i, n, s, r, o, a = {
                        "0": []
                    }, l = [ 0 ], h = 0, c = e.rules.length; h < c; ++h) if ((i = e.rules[h]).symbolizers) {
                        n = {};
                        for (var u = 0, p = i.symbolizers.length; u < p; ++u) (r = (s = i.symbolizers[u]).zIndex) in n || ((o = i.clone()).symbolizers = [], 
                        n[r] = o), n[r].symbolizers.push(s.clone());
                        for (r in n) r in a || (l.push(r), a[r] = []), a[r].push(n[r]);
                    } else a[0].push(i.clone());
                    l.sort();
                    for (var h = 0, c = l.length; h < c; ++h) a[l[h]].length > 0 && ((o = e.clone()).rules = a[l[h]], 
                    this.writeNode("FeatureTypeStyle", o, t));
                } else this.writeNode("FeatureTypeStyle", e, t);
                return t;
            },
            "IsDefault": function(e) {
                return this.createElementNSPlus("sld:IsDefault", {
                    "value": e ? "1" : "0"
                });
            },
            "FeatureTypeStyle": function(e) {
                for (var t = this.createElementNSPlus("sld:FeatureTypeStyle"), i = 0, n = e.rules.length; i < n; ++i) this.writeNode("Rule", e.rules[i], t);
                return t;
            },
            "Rule": function(e) {
                var t = this.createElementNSPlus("sld:Rule");
                e.name && this.writeNode("Name", e.name, t), e.title && this.writeNode("Title", e.title, t), 
                e.description && this.writeNode("Abstract", e.description, t), e.elseFilter ? this.writeNode("ElseFilter", null, t) : e.filter && this.writeNode("ogc:Filter", e.filter, t), 
                void 0 != e.minScaleDenominator && this.writeNode("MinScaleDenominator", e.minScaleDenominator, t), 
                void 0 != e.maxScaleDenominator && this.writeNode("MaxScaleDenominator", e.maxScaleDenominator, t);
                var i;
                if (this.multipleSymbolizers && e.symbolizers) for (var n, s = 0, r = e.symbolizers.length; s < r; ++s) i = (n = e.symbolizers[s]).CLASS_NAME.split(".").pop(), 
                this.writeNode(i + "Symbolizer", n, t); else for (var o = OpenLayers.Style.SYMBOLIZER_PREFIXES, s = 0, a = o.length; s < a; ++s) i = o[s], 
                (n = e.symbolizer[i]) && this.writeNode(i + "Symbolizer", n, t);
                return t;
            },
            "ElseFilter": function() {
                return this.createElementNSPlus("sld:ElseFilter");
            },
            "MinScaleDenominator": function(e) {
                return this.createElementNSPlus("sld:MinScaleDenominator", {
                    "value": e
                });
            },
            "MaxScaleDenominator": function(e) {
                return this.createElementNSPlus("sld:MaxScaleDenominator", {
                    "value": e
                });
            },
            "LineSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:LineSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), this.writeNode("Stroke", e, t), 
                t;
            },
            "Stroke": function(e) {
                var t = this.createElementNSPlus("sld:Stroke");
                return void 0 != e.strokeColor && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeColor"
                }, t), void 0 != e.strokeOpacity && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeOpacity"
                }, t), void 0 != e.strokeWidth && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeWidth"
                }, t), void 0 != e.strokeDashstyle && "solid" !== e.strokeDashstyle && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeDashstyle"
                }, t), void 0 != e.strokeLinecap && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "strokeLinecap"
                }, t), t;
            },
            "CssParameter": function(e) {
                return this.createElementNSPlus("sld:CssParameter", {
                    "attributes": {
                        "name": this.getCssProperty(e.key)
                    },
                    "value": e.symbolizer[e.key]
                });
            },
            "TextSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:TextSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), null != e.label && this.writeNode("Label", e.label, t), 
                null == e.fontFamily && null == e.fontSize && null == e.fontWeight && null == e.fontStyle || this.writeNode("Font", e, t), 
                null == e.labelAnchorPointX && null == e.labelAnchorPointY && null == e.labelAlign && null == e.labelXOffset && null == e.labelYOffset && null == e.labelRotation && null == e.labelPerpendicularOffset || this.writeNode("LabelPlacement", e, t), 
                null == e.haloRadius && null == e.haloColor && null == e.haloOpacity || this.writeNode("Halo", e, t), 
                null == e.fontColor && null == e.fontOpacity || this.writeNode("Fill", {
                    "fillColor": e.fontColor,
                    "fillOpacity": e.fontOpacity
                }, t), t;
            },
            "LabelPlacement": function(e) {
                var t = this.createElementNSPlus("sld:LabelPlacement");
                return null == e.labelAnchorPointX && null == e.labelAnchorPointY && null == e.labelAlign && null == e.labelXOffset && null == e.labelYOffset && null == e.labelRotation || null != e.labelPerpendicularOffset || this.writeNode("PointPlacement", e, t), 
                null != e.labelPerpendicularOffset && this.writeNode("LinePlacement", e, t), t;
            },
            "LinePlacement": function(e) {
                var t = this.createElementNSPlus("sld:LinePlacement");
                return this.writeNode("PerpendicularOffset", e.labelPerpendicularOffset, t), t;
            },
            "PerpendicularOffset": function(e) {
                return this.createElementNSPlus("sld:PerpendicularOffset", {
                    "value": e
                });
            },
            "PointPlacement": function(e) {
                var t = this.createElementNSPlus("sld:PointPlacement");
                return null == e.labelAnchorPointX && null == e.labelAnchorPointY && null == e.labelAlign || this.writeNode("AnchorPoint", e, t), 
                null == e.labelXOffset && null == e.labelYOffset || this.writeNode("Displacement", e, t), 
                null != e.labelRotation && this.writeNode("Rotation", e.labelRotation, t), t;
            },
            "AnchorPoint": function(e) {
                var t = this.createElementNSPlus("sld:AnchorPoint"), i = e.labelAnchorPointX, n = e.labelAnchorPointY;
                if (null != i && this.writeNode("AnchorPointX", i, t), null != n && this.writeNode("AnchorPointY", n, t), 
                null == i && null == n) {
                    var s = e.labelAlign.substr(0, 1), r = e.labelAlign.substr(1, 1);
                    "l" === s ? i = 0 : "c" === s ? i = .5 : "r" === s && (i = 1), "b" === r ? n = 0 : "m" === r ? n = .5 : "t" === r && (n = 1), 
                    this.writeNode("AnchorPointX", i, t), this.writeNode("AnchorPointY", n, t);
                }
                return t;
            },
            "AnchorPointX": function(e) {
                return this.createElementNSPlus("sld:AnchorPointX", {
                    "value": e
                });
            },
            "AnchorPointY": function(e) {
                return this.createElementNSPlus("sld:AnchorPointY", {
                    "value": e
                });
            },
            "Displacement": function(e) {
                var t = this.createElementNSPlus("sld:Displacement");
                return null != e.labelXOffset && this.writeNode("DisplacementX", e.labelXOffset, t), 
                null != e.labelYOffset && this.writeNode("DisplacementY", e.labelYOffset, t), t;
            },
            "DisplacementX": function(e) {
                return this.createElementNSPlus("sld:DisplacementX", {
                    "value": e
                });
            },
            "DisplacementY": function(e) {
                return this.createElementNSPlus("sld:DisplacementY", {
                    "value": e
                });
            },
            "Font": function(e) {
                var t = this.createElementNSPlus("sld:Font");
                return e.fontFamily && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fontFamily"
                }, t), e.fontSize && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fontSize"
                }, t), e.fontWeight && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fontWeight"
                }, t), e.fontStyle && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fontStyle"
                }, t), t;
            },
            "Label": function(e) {
                return this.writers.sld._OGCExpression.call(this, "sld:Label", e);
            },
            "Halo": function(e) {
                var t = this.createElementNSPlus("sld:Halo");
                return e.haloRadius && this.writeNode("Radius", e.haloRadius, t), (e.haloColor || e.haloOpacity) && this.writeNode("Fill", {
                    "fillColor": e.haloColor,
                    "fillOpacity": e.haloOpacity
                }, t), t;
            },
            "Radius": function(e) {
                return this.createElementNSPlus("sld:Radius", {
                    "value": e
                });
            },
            "RasterSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:RasterSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), e.opacity && this.writeNode("Opacity", e.opacity, t), 
                e.colorMap && this.writeNode("ColorMap", e.colorMap, t), t;
            },
            "Geometry": function(e) {
                var t = this.createElementNSPlus("sld:Geometry");
                return e.property && this.writeNode("ogc:PropertyName", e, t), t;
            },
            "ColorMap": function(e) {
                for (var t = this.createElementNSPlus("sld:ColorMap"), i = 0, n = e.length; i < n; ++i) this.writeNode("ColorMapEntry", e[i], t);
                return t;
            },
            "ColorMapEntry": function(e) {
                var t = this.createElementNSPlus("sld:ColorMapEntry"), i = e;
                return t.setAttribute("color", i.color), void 0 !== i.opacity && t.setAttribute("opacity", parseFloat(i.opacity)), 
                void 0 !== i.quantity && t.setAttribute("quantity", parseFloat(i.quantity)), void 0 !== i.label && t.setAttribute("label", i.label), 
                t;
            },
            "PolygonSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:PolygonSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), !1 !== e.fill && this.writeNode("Fill", e, t), 
                !1 !== e.stroke && this.writeNode("Stroke", e, t), t;
            },
            "Fill": function(e) {
                var t = this.createElementNSPlus("sld:Fill");
                return e.fillColor && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fillColor"
                }, t), null != e.fillOpacity && this.writeNode("CssParameter", {
                    "symbolizer": e,
                    "key": "fillOpacity"
                }, t), t;
            },
            "PointSymbolizer": function(e) {
                var t = this.createElementNSPlus("sld:PointSymbolizer");
                return e.geometry && this.writeNode("Geometry", e.geometry, t), this.writeNode("Graphic", e, t), 
                t;
            },
            "Graphic": function(e) {
                var t = this.createElementNSPlus("sld:Graphic");
                return void 0 != e.externalGraphic ? this.writeNode("ExternalGraphic", e, t) : this.writeNode("Mark", e, t), 
                void 0 != e.graphicOpacity && this.writeNode("Opacity", e.graphicOpacity, t), void 0 != e.pointRadius ? this.writeNode("Size", 2 * e.pointRadius, t) : void 0 != e.graphicWidth && this.writeNode("Size", e.graphicWidth, t), 
                void 0 != e.rotation && this.writeNode("Rotation", e.rotation, t), t;
            },
            "ExternalGraphic": function(e) {
                var t = this.createElementNSPlus("sld:ExternalGraphic");
                this.writeNode("OnlineResource", e.externalGraphic, t);
                var i = e.graphicFormat || this.getGraphicFormat(e.externalGraphic);
                return this.writeNode("Format", i, t), t;
            },
            "Mark": function(e) {
                var t = this.createElementNSPlus("sld:Mark");
                return e.graphicName && this.writeNode("WellKnownName", e.graphicName, t), !1 !== e.fill && this.writeNode("Fill", e, t), 
                !1 !== e.stroke && this.writeNode("Stroke", e, t), t;
            },
            "WellKnownName": function(e) {
                return this.createElementNSPlus("sld:WellKnownName", {
                    "value": e
                });
            },
            "Opacity": function(e) {
                return this.createElementNSPlus("sld:Opacity", {
                    "value": e
                });
            },
            "Size": function(e) {
                return this.writers.sld._OGCExpression.call(this, "sld:Size", e);
            },
            "Rotation": function(e) {
                return this.createElementNSPlus("sld:Rotation", {
                    "value": e
                });
            },
            "OnlineResource": function(e) {
                return this.createElementNSPlus("sld:OnlineResource", {
                    "attributes": {
                        "xlink:type": "simple",
                        "xlink:href": e
                    }
                });
            },
            "Format": function(e) {
                return this.createElementNSPlus("sld:Format", {
                    "value": e
                });
            }
        }
    }, OpenLayers.Format.Filter.v1_0_0.prototype.writers),
    "CLASS_NAME": "OpenLayers.Format.SLD.v1"
}), OpenLayers.Format.SLD.v1_0_0 = OpenLayers.Class(OpenLayers.Format.SLD.v1, {
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd",
    "CLASS_NAME": "OpenLayers.Format.SLD.v1_0_0"
}), OpenLayers.Control.SLDSelect = OpenLayers.Class(OpenLayers.Control, {
    "clearOnDeactivate": !1,
    "layers": null,
    "callbacks": null,
    "selectionSymbolizer": {
        "Polygon": {
            "fillColor": "#FF0000",
            "stroke": !1
        },
        "Line": {
            "strokeColor": "#FF0000",
            "strokeWidth": 2
        },
        "Point": {
            "graphicName": "square",
            "fillColor": "#FF0000",
            "pointRadius": 5
        }
    },
    "layerOptions": null,
    "sketchStyle": null,
    "wfsCache": {},
    "layerCache": {},
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), this.callbacks = OpenLayers.Util.extend({
            "done": this.select,
            "click": this.select
        }, this.callbacks), this.handlerOptions = this.handlerOptions || {}, this.layerOptions = OpenLayers.Util.applyDefaults(this.layerOptions, {
            "displayInLayerSwitcher": !1,
            "tileOptions": {
                "maxGetUrlLength": 2048
            }
        }), this.sketchStyle && (this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions, {
            "styleMap": new OpenLayers.StyleMap({
                "default": this.sketchStyle
            })
        })), this.handler = new e(this, this.callbacks, this.handlerOptions);
    },
    "destroy": function() {
        for (var e in this.layerCache) delete this.layerCache[e];
        for (var e in this.wfsCache) delete this.wfsCache[e];
        OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "coupleLayerVisiblity": function(e) {
        this.setVisibility(e.object.getVisibility());
    },
    "createSelectionLayer": function(e) {
        var t;
        return this.layerCache[e.id] ? t = this.layerCache[e.id] : (t = new OpenLayers.Layer.WMS(e.name, e.url, e.params, OpenLayers.Util.applyDefaults(this.layerOptions, e.getOptions())), 
        this.layerCache[e.id] = t, !1 === this.layerOptions.displayInLayerSwitcher && e.events.on({
            "visibilitychanged": this.coupleLayerVisiblity,
            "scope": t
        }), this.map.addLayer(t)), t;
    },
    "createSLD": function(e, t, i) {
        for (var n = {
            "version": "1.0.0",
            "namedLayers": {}
        }, s = [ e.params.LAYERS ].join(",").split(","), r = 0, o = s.length; r < o; r++) {
            var a = s[r];
            n.namedLayers[a] = {
                "name": a,
                "userStyles": []
            };
            var l = this.selectionSymbolizer, h = i[r];
            h.type.indexOf("Polygon") >= 0 ? l = {
                "Polygon": this.selectionSymbolizer.Polygon
            } : h.type.indexOf("LineString") >= 0 ? l = {
                "Line": this.selectionSymbolizer.Line
            } : h.type.indexOf("Point") >= 0 && (l = {
                "Point": this.selectionSymbolizer.Point
            });
            var c = t[r];
            n.namedLayers[a].userStyles.push({
                "name": "default",
                "rules": [ new OpenLayers.Rule({
                    "symbolizer": l,
                    "filter": c,
                    "maxScaleDenominator": e.options.minScale
                }) ]
            });
        }
        return new OpenLayers.Format.SLD({
            "srsName": this.map.getProjection()
        }).write(n);
    },
    "parseDescribeLayer": function(e) {
        var t = new OpenLayers.Format.WMSDescribeLayer(), i = e.responseXML;
        i && i.documentElement || (i = e.responseText);
        for (var n = t.read(i), s = [], r = null, o = 0, a = n.length; o < a; o++) "WFS" == n[o].owsType && (s.push(n[o].typeName), 
        r = n[o].owsURL);
        var l = {
            "url": r,
            "params": {
                "SERVICE": "WFS",
                "TYPENAME": s.toString(),
                "REQUEST": "DescribeFeatureType",
                "VERSION": "1.0.0"
            },
            "callback": function(e) {
                var t = new OpenLayers.Format.WFSDescribeFeatureType(), i = e.responseXML;
                i && i.documentElement || (i = e.responseText);
                var n = t.read(i);
                this.control.wfsCache[this.layer.id] = n, this.control._queue && this.control.applySelection();
            },
            "scope": this
        };
        OpenLayers.Request.GET(l);
    },
    "getGeometryAttributes": function(e) {
        for (var t = [], i = this.wfsCache[e.id], n = 0, s = i.featureTypes.length; n < s; n++) for (var r = i.featureTypes[n].properties, o = 0, a = r.length; o < a; o++) {
            var l = r[o], h = l.type;
            (h.indexOf("LineString") >= 0 || h.indexOf("GeometryAssociationType") >= 0 || h.indexOf("GeometryPropertyType") >= 0 || h.indexOf("Point") >= 0 || h.indexOf("Polygon") >= 0) && t.push(l);
        }
        return t;
    },
    "activate": function() {
        var e = OpenLayers.Control.prototype.activate.call(this);
        if (e) for (var t = 0, i = this.layers.length; t < i; t++) {
            var n = this.layers[t];
            if (n && !this.wfsCache[n.id]) {
                var s = {
                    "url": n.url,
                    "params": {
                        "SERVICE": "WMS",
                        "VERSION": n.params.VERSION,
                        "LAYERS": n.params.LAYERS,
                        "REQUEST": "DescribeLayer"
                    },
                    "callback": this.parseDescribeLayer,
                    "scope": {
                        "layer": n,
                        "control": this
                    }
                };
                OpenLayers.Request.GET(s);
            }
        }
        return e;
    },
    "deactivate": function() {
        var e = OpenLayers.Control.prototype.deactivate.call(this);
        if (e) for (var t = 0, i = this.layers.length; t < i; t++) {
            var n = this.layers[t];
            if (n && !0 === this.clearOnDeactivate) {
                var s = this.layerCache, r = s[n.id];
                r && (n.events.un({
                    "visibilitychanged": this.coupleLayerVisiblity,
                    "scope": r
                }), r.destroy(), delete s[n.id]);
            }
        }
        return e;
    },
    "setLayers": function(e) {
        this.active ? (this.deactivate(), this.layers = e, this.activate()) : this.layers = e;
    },
    "createFilter": function(e, t) {
        var i = null;
        return this.handler instanceof OpenLayers.Handler.RegularPolygon ? i = !0 === this.handler.irregular ? new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.BBOX,
            "property": e.name,
            "value": t.getBounds()
        }) : new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.INTERSECTS,
            "property": e.name,
            "value": t
        }) : this.handler instanceof OpenLayers.Handler.Polygon ? i = new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.INTERSECTS,
            "property": e.name,
            "value": t
        }) : this.handler instanceof OpenLayers.Handler.Path ? i = e.type.indexOf("Point") >= 0 ? new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.DWITHIN,
            "property": e.name,
            "distance": .01 * this.map.getExtent().getWidth(),
            "distanceUnits": this.map.getUnits(),
            "value": t
        }) : new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.INTERSECTS,
            "property": e.name,
            "value": t
        }) : this.handler instanceof OpenLayers.Handler.Click && (i = e.type.indexOf("Polygon") >= 0 ? new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.INTERSECTS,
            "property": e.name,
            "value": t
        }) : new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.DWITHIN,
            "property": e.name,
            "distance": .01 * this.map.getExtent().getWidth(),
            "distanceUnits": this.map.getUnits(),
            "value": t
        })), i;
    },
    "select": function(e) {
        this._queue = function() {
            for (var t = 0, i = this.layers.length; t < i; t++) {
                for (var n = this.layers[t], s = this.getGeometryAttributes(n), r = [], o = 0, a = s.length; o < a; o++) {
                    var l = s[o];
                    if (null !== l) {
                        if (!(e instanceof OpenLayers.Geometry)) {
                            var h = this.map.getLonLatFromPixel(e.xy);
                            e = new OpenLayers.Geometry.Point(h.lon, h.lat);
                        }
                        var c = this.createFilter(l, e);
                        null !== c && r.push(c);
                    }
                }
                var u = this.createSelectionLayer(n);
                this.events.triggerEvent("selected", {
                    "layer": n,
                    "filters": r
                });
                var p = this.createSLD(n, r, s);
                u.mergeNewParams({
                    "SLD_BODY": p
                }), delete this._queue;
            }
        }, this.applySelection();
    },
    "applySelection": function() {
        for (var e = !0, t = 0, i = this.layers.length; t < i; t++) if (!this.wfsCache[this.layers[t].id]) {
            e = !1;
            break;
        }
        e && this._queue.call(this);
    },
    "CLASS_NAME": "OpenLayers.Control.SLDSelect"
}), OpenLayers.Control.Snapping = OpenLayers.Class(OpenLayers.Control, {
    "DEFAULTS": {
        "tolerance": 10,
        "node": !0,
        "edge": !0,
        "vertex": !0
    },
    "greedy": !0,
    "precedence": [ "node", "vertex", "edge" ],
    "resolution": null,
    "geoToleranceCache": null,
    "layer": null,
    "feature": null,
    "point": null,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, [ e ]), this.options = e || {}, 
        this.options.layer && this.setLayer(this.options.layer);
        var t = OpenLayers.Util.extend({}, this.options.defaults);
        this.defaults = OpenLayers.Util.applyDefaults(t, this.DEFAULTS), this.setTargets(this.options.targets), 
        0 === this.targets.length && this.layer && this.addTargetLayer(this.layer), this.geoToleranceCache = {};
    },
    "setLayer": function(e) {
        this.active ? (this.deactivate(), this.layer = e, this.activate()) : this.layer = e;
    },
    "setTargets": function(e) {
        if (this.targets = [], e && e.length) for (var t, i = 0, n = e.length; i < n; ++i) (t = e[i]) instanceof OpenLayers.Layer.Vector ? this.addTargetLayer(t) : this.addTarget(t);
    },
    "addTargetLayer": function(e) {
        this.addTarget({
            "layer": e
        });
    },
    "addTarget": function(e) {
        (e = OpenLayers.Util.applyDefaults(e, this.defaults)).nodeTolerance = e.nodeTolerance || e.tolerance, 
        e.vertexTolerance = e.vertexTolerance || e.tolerance, e.edgeTolerance = e.edgeTolerance || e.tolerance, 
        this.targets.push(e);
    },
    "removeTargetLayer": function(e) {
        for (var t, i = this.targets.length - 1; i >= 0; --i) (t = this.targets[i]).layer === e && this.removeTarget(t);
    },
    "removeTarget": function(e) {
        return OpenLayers.Util.removeItem(this.targets, e);
    },
    "activate": function() {
        var e = OpenLayers.Control.prototype.activate.call(this);
        return e && this.layer && this.layer.events && this.layer.events.on({
            "sketchstarted": this.onSketchModified,
            "sketchmodified": this.onSketchModified,
            "vertexmodified": this.onVertexModified,
            "scope": this
        }), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Control.prototype.deactivate.call(this);
        return e && this.layer && this.layer.events && this.layer.events.un({
            "sketchstarted": this.onSketchModified,
            "sketchmodified": this.onSketchModified,
            "vertexmodified": this.onVertexModified,
            "scope": this
        }), this.feature = null, this.point = null, e;
    },
    "onSketchModified": function(e) {
        this.feature = e.feature, this.considerSnapping(e.vertex, e.vertex);
    },
    "onVertexModified": function(e) {
        this.feature = e.feature;
        var t = this.layer.map.getLonLatFromViewPortPx(e.pixel);
        this.considerSnapping(e.vertex, new OpenLayers.Geometry.Point(t.lon, t.lat));
    },
    "considerSnapping": function(e, t) {
        for (var i, n, s = {
            "rank": Number.POSITIVE_INFINITY,
            "dist": Number.POSITIVE_INFINITY,
            "x": null,
            "y": null
        }, r = !1, o = 0, a = this.targets.length; o < a; ++o) if (n = this.targets[o], 
        i = this.testTarget(n, t)) {
            if (this.greedy) {
                (s = i).target = n, r = !0;
                break;
            }
            (i.rank < s.rank || i.rank === s.rank && i.dist < s.dist) && ((s = i).target = n, 
            r = !0);
        }
        r && (!1 !== this.events.triggerEvent("beforesnap", {
            "point": e,
            "x": s.x,
            "y": s.y,
            "distance": s.dist,
            "layer": s.target.layer,
            "snapType": this.precedence[s.rank]
        }) ? (e.x = s.x, e.y = s.y, this.point = e, this.events.triggerEvent("snap", {
            "point": e,
            "snapType": this.precedence[s.rank],
            "layer": s.target.layer,
            "distance": s.dist
        })) : r = !1), this.point && !r && (e.x = t.x, e.y = t.y, this.point = null, this.events.triggerEvent("unsnap", {
            "point": e
        }));
    },
    "testTarget": function(e, t) {
        var i = this.layer.map.getResolution();
        if ("minResolution" in e && i < e.minResolution) return null;
        if ("maxResolution" in e && i >= e.maxResolution) return null;
        for (var n, s, r, o, a, l, h, c = {
            "node": this.getGeoTolerance(e.nodeTolerance, i),
            "vertex": this.getGeoTolerance(e.vertexTolerance, i),
            "edge": this.getGeoTolerance(e.edgeTolerance, i)
        }, u = Math.max(c.node, c.vertex, c.edge), p = {
            "rank": Number.POSITIVE_INFINITY,
            "dist": Number.POSITIVE_INFINITY
        }, d = !1, f = e.layer.features, m = this.precedence.length, g = new OpenLayers.LonLat(t.x, t.y), y = 0, v = f.length; y < v; ++y) if ((n = f[y]) !== this.feature && !n._sketch && n.state !== OpenLayers.State.DELETE && (!e.filter || e.filter.evaluate(n)) && n.atPoint(g, u, u)) for (var L = 0, w = Math.min(p.rank + 1, m); L < w; ++L) if (s = this.precedence[L], 
        e[s]) if ("edge" === s) {
            if (a = n.geometry.distanceTo(t, {
                "details": !0
            }), (l = a.distance) <= c[s] && l < p.dist) {
                p = {
                    "rank": L,
                    "dist": l,
                    "x": a.x0,
                    "y": a.y0
                }, d = !0;
                break;
            }
        } else {
            h = !1;
            for (var b = 0, C = (r = n.geometry.getVertices("node" === s)).length; b < C; ++b) (l = (o = r[b]).distanceTo(t)) <= c[s] && (L < p.rank || L === p.rank && l < p.dist) && (p = {
                "rank": L,
                "dist": l,
                "x": o.x,
                "y": o.y
            }, d = !0, h = !0);
            if (h) break;
        }
        return d ? p : null;
    },
    "getGeoTolerance": function(e, t) {
        t !== this.resolution && (this.resolution = t, this.geoToleranceCache = {});
        var i = this.geoToleranceCache[e];
        return void 0 === i && (i = e * t, this.geoToleranceCache[e] = i), i;
    },
    "destroy": function() {
        this.active && this.deactivate(), delete this.layer, delete this.targets, OpenLayers.Control.prototype.destroy.call(this);
    },
    "CLASS_NAME": "OpenLayers.Control.Snapping"
}), OpenLayers.Control.Split = OpenLayers.Class(OpenLayers.Control, {
    "layer": null,
    "source": null,
    "sourceOptions": null,
    "tolerance": null,
    "edge": !0,
    "deferDelete": !1,
    "mutual": !0,
    "targetFilter": null,
    "sourceFilter": null,
    "handler": null,
    "initialize": function(e) {
        OpenLayers.Control.prototype.initialize.apply(this, [ e ]), this.options = e || {}, 
        this.options.source && this.setSource(this.options.source);
    },
    "setSource": function(e) {
        this.active ? (this.deactivate(), this.handler && (this.handler.destroy(), delete this.handler), 
        this.source = e, this.activate()) : this.source = e;
    },
    "activate": function() {
        var e = OpenLayers.Control.prototype.activate.call(this);
        return e && (this.source ? this.source.events && this.source.events.on({
            "sketchcomplete": this.onSketchComplete,
            "afterfeaturemodified": this.afterFeatureModified,
            "scope": this
        }) : (this.handler || (this.handler = new OpenLayers.Handler.Path(this, {
            "done": function(e) {
                this.onSketchComplete({
                    "feature": new OpenLayers.Feature.Vector(e)
                });
            }
        }, {
            "layerOptions": this.sourceOptions
        })), this.handler.activate())), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Control.prototype.deactivate.call(this);
        return e && this.source && this.source.events && this.source.events.un({
            "sketchcomplete": this.onSketchComplete,
            "afterfeaturemodified": this.afterFeatureModified,
            "scope": this
        }), e;
    },
    "onSketchComplete": function(e) {
        return this.feature = null, !this.considerSplit(e.feature);
    },
    "afterFeatureModified": function(e) {
        e.modified && "function" == typeof e.feature.geometry.split && (this.feature = e.feature, 
        this.considerSplit(e.feature));
    },
    "removeByGeometry": function(e, t) {
        for (var i = 0, n = e.length; i < n; ++i) if (e[i].geometry === t) {
            e.splice(i, 1);
            break;
        }
    },
    "isEligible": function(e) {
        return !!e.geometry && (e.state !== OpenLayers.State.DELETE && "function" == typeof e.geometry.split && this.feature !== e && (!this.targetFilter || this.targetFilter.evaluate(e.attributes)));
    },
    "considerSplit": function(e) {
        var t = !1, i = !1;
        if (!this.sourceFilter || this.sourceFilter.evaluate(e.attributes)) {
            for (var n, s, r, o, a, l, h = this.layer && this.layer.features || [], c = [], u = [], p = this.layer === this.source && this.mutual, d = {
                "edge": this.edge,
                "tolerance": this.tolerance,
                "mutual": p
            }, f = [ e.geometry ], m = 0, g = h.length; m < g; ++m) if (r = h[m], this.isEligible(r)) {
                o = [ r.geometry ];
                for (var y = 0; y < f.length; ++y) {
                    a = f[y];
                    for (var v = 0; v < o.length; ++v) n = o[v], a.getBounds().intersectsBounds(n.getBounds()) && (s = a.split(n, d)) && !1 !== this.events.triggerEvent("beforesplit", {
                        "source": e,
                        "target": r
                    }) && (p && ((l = s[0]).length > 1 && (l.unshift(y, 1), Array.prototype.splice.apply(f, l), 
                    y += l.length - 3), s = s[1]), s.length > 1 && (s.unshift(v, 1), Array.prototype.splice.apply(o, s), 
                    v += s.length - 3));
                }
                o && o.length > 1 && (this.geomsToFeatures(r, o), this.events.triggerEvent("split", {
                    "original": r,
                    "features": o
                }), Array.prototype.push.apply(c, o), u.push(r), i = !0);
            }
            if (f && f.length > 1 && (this.geomsToFeatures(e, f), this.events.triggerEvent("split", {
                "original": e,
                "features": f
            }), Array.prototype.push.apply(c, f), u.push(e), t = !0), t || i) {
                if (this.deferDelete) {
                    for (var L, w = [], m = 0, g = u.length; m < g; ++m) (L = u[m]).state === OpenLayers.State.INSERT ? w.push(L) : (L.state = OpenLayers.State.DELETE, 
                    this.layer.drawFeature(L));
                    this.layer.destroyFeatures(w, {
                        "silent": !0
                    });
                    for (var m = 0, g = c.length; m < g; ++m) c[m].state = OpenLayers.State.INSERT;
                } else this.layer.destroyFeatures(u, {
                    "silent": !0
                });
                this.layer.addFeatures(c, {
                    "silent": !0
                }), this.events.triggerEvent("aftersplit", {
                    "source": e,
                    "features": c
                });
            }
        }
        return t;
    },
    "geomsToFeatures": function(e, t) {
        var i = e.clone();
        delete i.geometry;
        for (var n, s = 0, r = t.length; s < r; ++s) (n = i.clone()).geometry = t[s], n.state = OpenLayers.State.INSERT, 
        t[s] = n;
    },
    "destroy": function() {
        this.active && this.deactivate(), OpenLayers.Control.prototype.destroy.call(this);
    },
    "CLASS_NAME": "OpenLayers.Control.Split"
}), OpenLayers.Control.TextButtonPanel = OpenLayers.Class(OpenLayers.Control.Panel, {
    "vertical": !1,
    "additionalClass": null,
    "draw": function() {
        return OpenLayers.Control.Panel.prototype.draw.apply(this, arguments), this.setOrientationClass(), 
        this.setAdditionalClass(), this.div;
    },
    "redraw": function() {
        OpenLayers.Control.Panel.prototype.redraw.apply(this, arguments), this.setOrientationClass();
    },
    "setOrientationClass": function() {
        this.vertical ? OpenLayers.Element.addClass(this.div, "vertical") : OpenLayers.Element.removeClass(this.div, "vertical");
    },
    "setAdditionalClass": function() {
        this.additionalClass && OpenLayers.Element.addClass(this.div, this.additionalClass);
    },
    "CLASS_NAME": "OpenLayers.Control.TextButtonPanel"
}), OpenLayers.Control.TouchNavigation = OpenLayers.Class(OpenLayers.Control, {
    "dragPan": null,
    "dragPanOptions": null,
    "pinchZoom": null,
    "pinchZoomOptions": null,
    "clickHandlerOptions": null,
    "documentDrag": !1,
    "autoActivate": !0,
    "initialize": function(e) {
        this.handlers = {}, OpenLayers.Control.prototype.initialize.apply(this, arguments);
    },
    "destroy": function() {
        this.deactivate(), this.dragPan && this.dragPan.destroy(), this.dragPan = null, 
        this.pinchZoom && (this.pinchZoom.destroy(), delete this.pinchZoom), OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "activate": function() {
        return !!OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.dragPan.activate(), 
        this.handlers.click.activate(), this.pinchZoom.activate(), !0);
    },
    "deactivate": function() {
        return !!OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.dragPan.deactivate(), 
        this.handlers.click.deactivate(), this.pinchZoom.deactivate(), !0);
    },
    "draw": function() {
        var e = {
            "click": this.defaultClick,
            "dblclick": this.defaultDblClick
        }, t = OpenLayers.Util.extend({
            "double": !0,
            "stopDouble": !0,
            "pixelTolerance": 2
        }, this.clickHandlerOptions);
        this.handlers.click = new OpenLayers.Handler.Click(this, e, t), this.dragPan = new OpenLayers.Control.DragPan(OpenLayers.Util.extend({
            "map": this.map,
            "documentDrag": this.documentDrag
        }, this.dragPanOptions)), this.dragPan.draw(), this.pinchZoom = new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({
            "map": this.map
        }, this.pinchZoomOptions));
    },
    "defaultClick": function(e) {
        e.lastTouches && 2 == e.lastTouches.length && this.map.zoomOut();
    },
    "defaultDblClick": function(e) {
        this.map.zoomTo(this.map.zoom + 1, e.xy);
    },
    "CLASS_NAME": "OpenLayers.Control.TouchNavigation"
}), OpenLayers.Control.TransformFeature = OpenLayers.Class(OpenLayers.Control, {
    "geometryTypes": null,
    "layer": null,
    "preserveAspectRatio": !1,
    "rotate": !0,
    "feature": null,
    "renderIntent": "temporary",
    "rotationHandleSymbolizer": null,
    "box": null,
    "center": null,
    "scale": 1,
    "ratio": 1,
    "rotation": 0,
    "handles": null,
    "rotationHandles": null,
    "dragControl": null,
    "irregular": !1,
    "initialize": function(e, t) {
        OpenLayers.Control.prototype.initialize.apply(this, [ t ]), this.layer = e, this.rotationHandleSymbolizer || (this.rotationHandleSymbolizer = {
            "stroke": !1,
            "pointRadius": 10,
            "fillOpacity": 0,
            "cursor": "pointer"
        }), this.createBox(), this.createControl();
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Control.prototype.activate.apply(this, arguments) && (this.dragControl.activate(), 
        this.layer.addFeatures([ this.box ]), this.rotate && this.layer.addFeatures(this.rotationHandles), 
        this.layer.addFeatures(this.handles), e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Control.prototype.deactivate.apply(this, arguments) && (this.layer.removeFeatures(this.handles), 
        this.rotate && this.layer.removeFeatures(this.rotationHandles), this.layer.removeFeatures([ this.box ]), 
        this.dragControl.deactivate(), e = !0), e;
    },
    "setMap": function(e) {
        this.dragControl.setMap(e), OpenLayers.Control.prototype.setMap.apply(this, arguments);
    },
    "setFeature": function(e, t) {
        t = OpenLayers.Util.applyDefaults(t, {
            "rotation": 0,
            "scale": 1,
            "ratio": 1
        });
        var i = this.rotation, n = this.center;
        if (OpenLayers.Util.extend(this, t), !1 !== this.events.triggerEvent("beforesetfeature", {
            "feature": e
        })) {
            this.feature = e, this.activate(), this._setfeature = !0;
            var s = this.feature.geometry.getBounds();
            this.box.move(s.getCenterLonLat()), this.box.geometry.rotate(-i, n), this._angle = 0;
            var r;
            if (this.rotation) {
                var o = e.geometry.clone();
                o.rotate(-this.rotation, this.center);
                var a = new OpenLayers.Feature.Vector(o.getBounds().toGeometry());
                a.geometry.rotate(this.rotation, this.center), this.box.geometry.rotate(this.rotation, this.center), 
                this.box.move(a.geometry.getBounds().getCenterLonLat()), r = a.geometry.components[0].components[0].getBounds().getCenterLonLat();
            } else r = new OpenLayers.LonLat(s.left, s.bottom);
            this.handles[0].move(r), delete this._setfeature, this.events.triggerEvent("setfeature", {
                "feature": e
            });
        }
    },
    "unsetFeature": function() {
        this.active ? this.deactivate() : (this.feature = null, this.rotation = 0, this.scale = 1, 
        this.ratio = 1);
    },
    "createBox": function() {
        var e = this;
        this.center = new OpenLayers.Geometry.Point(0, 0), this.box = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([ new OpenLayers.Geometry.Point(-1, -1), new OpenLayers.Geometry.Point(0, -1), new OpenLayers.Geometry.Point(1, -1), new OpenLayers.Geometry.Point(1, 0), new OpenLayers.Geometry.Point(1, 1), new OpenLayers.Geometry.Point(0, 1), new OpenLayers.Geometry.Point(-1, 1), new OpenLayers.Geometry.Point(-1, 0), new OpenLayers.Geometry.Point(-1, -1) ]), null, "string" == typeof this.renderIntent ? null : this.renderIntent), 
        this.box.geometry.move = function(t, i) {
            e._moving = !0, OpenLayers.Geometry.LineString.prototype.move.apply(this, arguments), 
            e.center.move(t, i), delete e._moving;
        };
        for (var t, i, n, s = new Array(8), r = new Array(4), o = [ "sw", "s", "se", "e", "ne", "n", "nw", "w" ], a = 0; a < 8; ++a) t = this.box.geometry.components[a], 
        i = new OpenLayers.Feature.Vector(t.clone(), {
            "role": o[a] + "-resize"
        }, "string" == typeof this.renderIntent ? null : this.renderIntent), a % 2 == 0 && ((n = new OpenLayers.Feature.Vector(t.clone(), {
            "role": o[a] + "-rotate"
        }, "string" == typeof this.rotationHandleSymbolizer ? null : this.rotationHandleSymbolizer)).geometry.move = function(t, i) {
            var n = this.x, s = this.y;
            if (OpenLayers.Geometry.Point.prototype.move.call(this, t, i), !e._moving) {
                var r = e.dragControl.handlers.drag.evt, o = r && r.shiftKey ? 45 : 1, a = e.center, l = this.x - a.x, h = this.y - a.y, c = l - t, u = h - i;
                this.x = n, this.y = s;
                var p = Math.atan2(u, c), d = Math.atan2(h, l) - p;
                d *= 180 / Math.PI, e._angle = (e._angle + d) % 360;
                var f = e.rotation % o;
                (Math.abs(e._angle) >= o || 0 !== f) && (d = Math.round(e._angle / o) * o - f, e._angle = 0, 
                e.box.geometry.rotate(d, a), e.transformFeature({
                    "rotation": d
                }));
            }
        }, t._rotationHandle = n, r[a / 2] = n), t.move = function(e, t) {
            OpenLayers.Geometry.Point.prototype.move.apply(this, arguments), this._rotationHandle && this._rotationHandle.geometry.move(e, t), 
            this._handle.geometry.move(e, t);
        }, t.resize = function(e, t, i) {
            OpenLayers.Geometry.Point.prototype.resize.apply(this, arguments), this._rotationHandle && this._rotationHandle.geometry.resize(e, t, i), 
            this._handle.geometry.resize(e, t, i);
        }, t.rotate = function(e, t) {
            OpenLayers.Geometry.Point.prototype.rotate.apply(this, arguments), this._rotationHandle && this._rotationHandle.geometry.rotate(e, t), 
            this._handle.geometry.rotate(e, t);
        }, i.geometry.move = function(t, i) {
            var n = this.x, s = this.y;
            if (OpenLayers.Geometry.Point.prototype.move.call(this, t, i), !e._moving) {
                var r = e.dragControl.handlers.drag.evt, o = !(!e._setfeature && e.preserveAspectRatio || r && r.shiftKey), a = new OpenLayers.Geometry.Point(n, s), l = e.center;
                this.rotate(-e.rotation, l), a.rotate(-e.rotation, l);
                var h = this.x - l.x, c = this.y - l.y, u = h - (this.x - a.x), p = c - (this.y - a.y);
                e.irregular && !e._setfeature && (h -= (this.x - a.x) / 2, c -= (this.y - a.y) / 2), 
                this.x = n, this.y = s;
                var d, f = 1;
                if (o) d = Math.abs(p) < 1e-5 ? 1 : c / p, f = (Math.abs(u) < 1e-5 ? 1 : h / u) / d; else {
                    var m = Math.sqrt(u * u + p * p);
                    d = Math.sqrt(h * h + c * c) / m;
                }
                if (e._moving = !0, e.box.geometry.rotate(-e.rotation, l), delete e._moving, e.box.geometry.resize(d, l, f), 
                e.box.geometry.rotate(e.rotation, l), e.transformFeature({
                    "scale": d,
                    "ratio": f
                }), e.irregular && !e._setfeature) {
                    var g = l.clone();
                    g.x += Math.abs(n - l.x) < 1e-5 ? 0 : this.x - n, g.y += Math.abs(s - l.y) < 1e-5 ? 0 : this.y - s, 
                    e.box.geometry.move(this.x - n, this.y - s), e.transformFeature({
                        "center": g
                    });
                }
            }
        }, t._handle = i, s[a] = i;
        this.rotationHandles = r, this.handles = s;
    },
    "createControl": function() {
        var e = this;
        this.dragControl = new OpenLayers.Control.DragFeature(this.layer, {
            "documentDrag": !0,
            "moveFeature": function(t) {
                this.feature === e.feature && (this.feature = e.box), OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this, arguments);
            },
            "onDrag": function(t, i) {
                t === e.box && e.transformFeature({
                    "center": e.center
                });
            },
            "onStart": function(t, i) {
                var n = !e.geometryTypes || -1 !== OpenLayers.Util.indexOf(e.geometryTypes, t.geometry.CLASS_NAME), s = OpenLayers.Util.indexOf(e.handles, t);
                s += OpenLayers.Util.indexOf(e.rotationHandles, t), t !== e.feature && t !== e.box && -2 == s && n && e.setFeature(t);
            },
            "onComplete": function(t, i) {
                e.events.triggerEvent("transformcomplete", {
                    "feature": e.feature
                });
            }
        });
    },
    "drawHandles": function() {
        for (var e = this.layer, t = 0; t < 8; ++t) this.rotate && t % 2 == 0 && e.drawFeature(this.rotationHandles[t / 2], this.rotationHandleSymbolizer), 
        e.drawFeature(this.handles[t], this.renderIntent);
    },
    "transformFeature": function(e) {
        if (!this._setfeature) {
            this.scale *= e.scale || 1, this.ratio *= e.ratio || 1;
            var t = this.rotation;
            if (this.rotation = (this.rotation + (e.rotation || 0)) % 360, !1 !== this.events.triggerEvent("beforetransform", e)) {
                var i = this.feature, n = i.geometry, s = this.center;
                n.rotate(-t, s), e.scale || e.ratio ? n.resize(e.scale, s, e.ratio) : e.center && i.move(e.center.getBounds().getCenterLonLat()), 
                n.rotate(this.rotation, s), this.layer.drawFeature(i), i.toState(OpenLayers.State.UPDATE), 
                this.events.triggerEvent("transform", e);
            }
        }
        this.layer.drawFeature(this.box, this.renderIntent), this.drawHandles();
    },
    "destroy": function() {
        for (var e, t = 0; t < 8; ++t) (e = this.box.geometry.components[t])._handle.destroy(), 
        e._handle = null, e._rotationHandle && e._rotationHandle.destroy(), e._rotationHandle = null;
        this.center = null, this.feature = null, this.handles = null, this.rotationHandleSymbolizer = null, 
        this.rotationHandles = null, this.box.destroy(), this.box = null, this.layer = null, 
        this.dragControl.destroy(), this.dragControl = null, OpenLayers.Control.prototype.destroy.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Control.TransformFeature"
}), OpenLayers.Control.UTFGrid = OpenLayers.Class(OpenLayers.Control, {
    "autoActivate": !0,
    "layers": null,
    "defaultHandlerOptions": {
        "delay": 300,
        "pixelTolerance": 4,
        "stopMove": !1,
        "single": !0,
        "double": !1,
        "stopSingle": !1,
        "stopDouble": !1
    },
    "handlerMode": "click",
    "setHandler": function(e) {
        this.handlerMode = e, this.resetHandler();
    },
    "resetHandler": function() {
        return this.handler && (this.handler.deactivate(), this.handler.destroy(), this.handler = null), 
        "hover" == this.handlerMode ? this.handler = new OpenLayers.Handler.Hover(this, {
            "pause": this.handleEvent,
            "move": this.reset
        }, this.handlerOptions) : "click" == this.handlerMode ? this.handler = new OpenLayers.Handler.Click(this, {
            "click": this.handleEvent
        }, this.handlerOptions) : "move" == this.handlerMode && (this.handler = new OpenLayers.Handler.Hover(this, {
            "pause": this.handleEvent,
            "move": this.handleEvent
        }, this.handlerOptions)), !!this.handler;
    },
    "initialize": function(e) {
        (e = e || {}).handlerOptions = e.handlerOptions || this.defaultHandlerOptions, OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.resetHandler();
    },
    "handleEvent": function(e) {
        if (null != e) {
            var t = this.map.getLonLatFromPixel(e.xy);
            if (t) {
                var i = this.findLayers();
                if (i.length > 0) {
                    for (var n, s = {}, r = 0, o = i.length; r < o; r++) n = i[r], s[OpenLayers.Util.indexOf(this.map.layers, n)] = n.getFeatureInfo(t);
                    this.callback(s, t, e.xy);
                }
            }
        } else this.reset();
    },
    "callback": function(e) {},
    "reset": function(e) {
        this.callback(null);
    },
    "findLayers": function() {
        for (var e, t = this.layers || this.map.layers, i = [], n = t.length - 1; n >= 0; --n) (e = t[n]) instanceof OpenLayers.Layer.UTFGrid && i.push(e);
        return i;
    },
    "CLASS_NAME": "OpenLayers.Control.UTFGrid"
}), OpenLayers.Format.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Format.XML, {
    "layerIdentifier": "_layer",
    "featureIdentifier": "_feature",
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "gmlFormat": null,
    "read": function(e) {
        var t;
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var i = e.documentElement;
        if (i) {
            var n = this["read_" + i.nodeName];
            t = n ? n.call(this, i) : new OpenLayers.Format.GML(this.options ? this.options : {}).read(e);
        } else t = e;
        return t;
    },
    "read_msGMLOutput": function(e) {
        var t = [], i = this.getSiblingNodesByTagCriteria(e, this.layerIdentifier);
        if (i) for (var n = 0, s = i.length; n < s; ++n) {
            var r = i[n], o = r.nodeName;
            r.prefix && (o = o.split(":")[1]);
            var o = o.replace(this.layerIdentifier, ""), a = this.getSiblingNodesByTagCriteria(r, this.featureIdentifier);
            if (a) for (var l = 0; l < a.length; l++) {
                var h = a[l], c = this.parseGeometry(h), u = this.parseAttributes(h), p = new OpenLayers.Feature.Vector(c.geometry, u, null);
                p.bounds = c.bounds, p.type = o, t.push(p);
            }
        }
        return t;
    },
    "read_FeatureInfoResponse": function(e) {
        for (var t = [], i = this.getElementsByTagNameNS(e, "*", "FIELDS"), n = 0, s = i.length; n < s; n++) {
            var r, o = i[n], a = {}, l = o.attributes.length;
            if (l > 0) for (r = 0; r < l; r++) {
                var h = o.attributes[r];
                a[h.nodeName] = h.nodeValue;
            } else {
                var c = o.childNodes;
                for (r = 0, l = c.length; r < l; ++r) {
                    var u = c[r];
                    3 != u.nodeType && (a[u.getAttribute("name")] = u.getAttribute("value"));
                }
            }
            t.push(new OpenLayers.Feature.Vector(null, a, null));
        }
        return t;
    },
    "getSiblingNodesByTagCriteria": function(e, t) {
        var i, n, s, r, o, a = [];
        if (e && e.hasChildNodes()) {
            s = (i = e.childNodes).length;
            for (var l = 0; l < s; l++) {
                for (o = i[l]; o && 1 != o.nodeType; ) o = o.nextSibling, l++;
                (n = o ? o.nodeName : "").length > 0 && n.indexOf(t) > -1 ? a.push(o) : (r = this.getSiblingNodesByTagCriteria(o, t)).length > 0 && (0 == a.length ? a = r : a.push(r));
            }
        }
        return a;
    },
    "parseAttributes": function(e) {
        var t = {};
        if (1 == e.nodeType) for (var i = e.childNodes, n = i.length, s = 0; s < n; ++s) {
            var r = i[s];
            if (1 == r.nodeType) {
                var o = r.childNodes, a = r.prefix ? r.nodeName.split(":")[1] : r.nodeName;
                if (0 == o.length) t[a] = null; else if (1 == o.length || o[0].nodeValue.replace(this.regExes.trimSpace, "").length > 0) {
                    var l = o[0];
                    if (3 == l.nodeType || 4 == l.nodeType) {
                        var h = l.wholeText ? l.wholeText : l.nodeValue;
                        t[a] = h.replace(this.regExes.trimSpace, "");
                    }
                }
            }
        }
        return t;
    },
    "parseGeometry": function(e) {
        this.gmlFormat || (this.gmlFormat = new OpenLayers.Format.GML());
        var t, i = this.gmlFormat.parseFeature(e), n = null;
        return i && (t = i.geometry && i.geometry.clone(), n = i.bounds && i.bounds.clone(), 
        i.destroy()), {
            "geometry": t,
            "bounds": n
        };
    },
    "CLASS_NAME": "OpenLayers.Format.WMSGetFeatureInfo"
}), OpenLayers.Control.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {
    "hover": !1,
    "drillDown": !1,
    "maxFeatures": 10,
    "clickCallback": "click",
    "output": "features",
    "layers": null,
    "queryVisible": !1,
    "url": null,
    "layerUrls": null,
    "infoFormat": "text/html",
    "vendorParams": {},
    "format": null,
    "formatOptions": null,
    "handler": null,
    "hoverRequest": null,
    "initialize": function(e) {
        if (e = e || {}, e.handlerOptions = e.handlerOptions || {}, OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.format || (this.format = new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)), 
        !0 === this.drillDown && (this.hover = !1), this.hover) this.handler = new OpenLayers.Handler.Hover(this, {
            "move": this.cancelHover,
            "pause": this.getInfoForHover
        }, OpenLayers.Util.extend(this.handlerOptions.hover || {}, {
            "delay": 250
        })); else {
            var t = {};
            t[this.clickCallback] = this.getInfoForClick, this.handler = new OpenLayers.Handler.Click(this, t, this.handlerOptions.click || {});
        }
    },
    "getInfoForClick": function(e) {
        this.events.triggerEvent("beforegetfeatureinfo", {
            "xy": e.xy
        }), OpenLayers.Element.addClass(this.map.viewPortDiv, "olCursorWait"), this.request(e.xy, {});
    },
    "getInfoForHover": function(e) {
        this.events.triggerEvent("beforegetfeatureinfo", {
            "xy": e.xy
        }), this.request(e.xy, {
            "hover": !0
        });
    },
    "cancelHover": function() {
        this.hoverRequest && (this.hoverRequest.abort(), this.hoverRequest = null);
    },
    "findLayers": function() {
        for (var e, t, i = this.layers || this.map.layers, n = [], s = i.length - 1; s >= 0; --s) (e = i[s]) instanceof OpenLayers.Layer.WMS && (!this.queryVisible || e.getVisibility()) && (t = OpenLayers.Util.isArray(e.url) ? e.url[0] : e.url, 
        !1 !== this.drillDown || this.url || (this.url = t), (!0 === this.drillDown || this.urlMatches(t)) && n.push(e));
        return n;
    },
    "urlMatches": function(e) {
        var t = OpenLayers.Util.isEquivalentUrl(this.url, e);
        if (!t && this.layerUrls) for (var i = 0, n = this.layerUrls.length; i < n; ++i) if (OpenLayers.Util.isEquivalentUrl(this.layerUrls[i], e)) {
            t = !0;
            break;
        }
        return t;
    },
    "buildWMSOptions": function(e, t, i, n) {
        for (var s = [], r = [], o = 0, a = t.length; o < a; o++) null != t[o].params.LAYERS && (s = s.concat(t[o].params.LAYERS), 
        r = r.concat(this.getStyleNames(t[o])));
        var l = t[0], h = this.map.getProjection(), c = l.projection;
        c && c.equals(this.map.getProjectionObject()) && (h = c.getCode());
        var u = OpenLayers.Util.extend({
            "service": "WMS",
            "version": l.params.VERSION,
            "request": "GetFeatureInfo",
            "exceptions": l.params.EXCEPTIONS,
            "bbox": this.map.getExtent().toBBOX(null, l.reverseAxisOrder()),
            "feature_count": this.maxFeatures,
            "height": this.map.getSize().h,
            "width": this.map.getSize().w,
            "format": n,
            "info_format": l.params.INFO_FORMAT || this.infoFormat
        }, parseFloat(l.params.VERSION) >= 1.3 ? {
            "crs": h,
            "i": parseInt(i.x),
            "j": parseInt(i.y)
        } : {
            "srs": h,
            "x": parseInt(i.x),
            "y": parseInt(i.y)
        });
        return 0 != s.length && (u = OpenLayers.Util.extend({
            "layers": s,
            "query_layers": s,
            "styles": r
        }, u)), OpenLayers.Util.applyDefaults(u, this.vendorParams), {
            "url": e,
            "params": OpenLayers.Util.upperCaseObject(u),
            "callback": function(t) {
                this.handleResponse(i, t, e);
            },
            "scope": this
        };
    },
    "getStyleNames": function(e) {
        return e.params.STYLES ? e.params.STYLES : OpenLayers.Util.isArray(e.params.LAYERS) ? new Array(e.params.LAYERS.length) : e.params.LAYERS.toString().replace(/[^,]/g, "");
    },
    "request": function(e, t) {
        if (0 == (l = this.findLayers()).length) return this.events.triggerEvent("nogetfeatureinfo"), 
        void OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait");
        if (t = t || {}, !1 === this.drillDown) {
            var i = this.buildWMSOptions(this.url, l, e, l[0].params.FORMAT), n = OpenLayers.Request.GET(i);
            !0 === t.hover && (this.hoverRequest = n);
        } else {
            this._requestCount = 0, this._numRequests = 0, this.features = [];
            for (var s = {}, r = 0, o = l.length; r < o; r++) {
                var a = l[r];
                (h = OpenLayers.Util.isArray(a.url) ? a.url[0] : a.url) in s ? s[h].push(a) : (this._numRequests++, 
                s[h] = [ a ]);
            }
            var l;
            for (var h in s) {
                l = s[h];
                i = this.buildWMSOptions(h, l, e, l[0].params.FORMAT);
                OpenLayers.Request.GET(i);
            }
        }
    },
    "triggerGetFeatureInfo": function(e, t, i) {
        this.events.triggerEvent("getfeatureinfo", {
            "text": e.responseText,
            "features": i,
            "request": e,
            "xy": t
        }), OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait");
    },
    "handleResponse": function(e, t, i) {
        var n = t.responseXML;
        n && n.documentElement || (n = t.responseText);
        var s = [], r = t.getAllResponseHeaders();
        s = r && "application/json" === this.infoFormat && -1 !== r.indexOf("application/json") ? new OpenLayers.Format.GeoJSON().read(n) : this.format.read(n), 
        !1 === this.drillDown ? this.triggerGetFeatureInfo(t, e, s) : (this._requestCount++, 
        "object" === this.output ? this._features = (this._features || []).concat({
            "url": i,
            "features": s
        }) : this._features = (this._features || []).concat(s), this._requestCount === this._numRequests && (this.triggerGetFeatureInfo(t, e, this._features.concat()), 
        delete this._features, delete this._requestCount, delete this._numRequests));
    },
    "CLASS_NAME": "OpenLayers.Control.WMSGetFeatureInfo"
}), OpenLayers.Control.WMTSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {
    "hover": !1,
    "requestEncoding": "KVP",
    "drillDown": !1,
    "maxFeatures": 10,
    "clickCallback": "click",
    "layers": null,
    "queryVisible": !0,
    "infoFormat": "text/html",
    "vendorParams": {},
    "format": null,
    "formatOptions": null,
    "handler": null,
    "hoverRequest": null,
    "pending": 0,
    "initialize": function(e) {
        if (e = e || {}, e.handlerOptions = e.handlerOptions || {}, OpenLayers.Control.prototype.initialize.apply(this, [ e ]), 
        this.format || (this.format = new OpenLayers.Format.WMSGetFeatureInfo(e.formatOptions)), 
        !0 === this.drillDown && (this.hover = !1), this.hover) this.handler = new OpenLayers.Handler.Hover(this, {
            "move": this.cancelHover,
            "pause": this.getInfoForHover
        }, OpenLayers.Util.extend(this.handlerOptions.hover || {}, {
            "delay": 250
        })); else {
            var t = {};
            t[this.clickCallback] = this.getInfoForClick, this.handler = new OpenLayers.Handler.Click(this, t, this.handlerOptions.click || {});
        }
    },
    "getInfoForClick": function(e) {
        this.request(e.xy, {});
    },
    "getInfoForHover": function(e) {
        this.request(e.xy, {
            "hover": !0
        });
    },
    "cancelHover": function() {
        this.hoverRequest && (--this.pending <= 0 && (OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait"), 
        this.pending = 0), this.hoverRequest.abort(), this.hoverRequest = null);
    },
    "findLayers": function() {
        for (var e, t = this.layers || this.map.layers, i = [], n = t.length - 1; n >= 0 && (!((e = t[n]) instanceof OpenLayers.Layer.WMTS && e.requestEncoding === this.requestEncoding) || this.queryVisible && !e.getVisibility() || (i.push(e), 
        this.drillDown && !this.hover)); --n) ;
        return i;
    },
    "buildRequestOptions": function(e, t) {
        var i = this.map.getLonLatFromPixel(t), n = e.getURL(new OpenLayers.Bounds(i.lon, i.lat, i.lon, i.lat)), s = OpenLayers.Util.getParameters(n), r = e.getTileInfo(i);
        return OpenLayers.Util.extend(s, {
            "service": "WMTS",
            "version": e.version,
            "request": "GetFeatureInfo",
            "infoFormat": this.infoFormat,
            "feature_count": this.maxFeatures,
            "i": r.i,
            "j": r.j
        }), OpenLayers.Util.applyDefaults(s, this.vendorParams), {
            "url": OpenLayers.Util.isArray(e.url) ? e.url[0] : e.url,
            "params": OpenLayers.Util.upperCaseObject(s),
            "callback": function(i) {
                this.handleResponse(t, i, e);
            },
            "scope": this
        };
    },
    "request": function(e, t) {
        t = t || {};
        var i = this.findLayers();
        if (i.length > 0) {
            for (var n, s = 0, r = i.length; s < r; s++) if (n = i[s], !1 !== this.events.triggerEvent("beforegetfeatureinfo", {
                "xy": e,
                "layer": n
            })) {
                ++this.pending;
                var o = this.buildRequestOptions(n, e), a = OpenLayers.Request.GET(o);
                !0 === t.hover && (this.hoverRequest = a);
            }
            this.pending > 0 && OpenLayers.Element.addClass(this.map.viewPortDiv, "olCursorWait");
        }
    },
    "handleResponse": function(e, t, i) {
        if (--this.pending <= 0 && (OpenLayers.Element.removeClass(this.map.viewPortDiv, "olCursorWait"), 
        this.pending = 0), t.status && (t.status < 200 || t.status >= 300)) this.events.triggerEvent("exception", {
            "xy": e,
            "request": t,
            "layer": i
        }); else {
            var n = t.responseXML;
            n && n.documentElement || (n = t.responseText);
            var s, r;
            try {
                s = this.format.read(n);
            } catch (n) {
                r = !0, this.events.triggerEvent("exception", {
                    "xy": e,
                    "request": t,
                    "error": n,
                    "layer": i
                });
            }
            r || this.events.triggerEvent("getfeatureinfo", {
                "text": t.responseText,
                "features": s,
                "request": t,
                "xy": e,
                "layer": i
            });
        }
    },
    "CLASS_NAME": "OpenLayers.Control.WMTSGetFeatureInfo"
}), OpenLayers.Control.Zoom = OpenLayers.Class(OpenLayers.Control, {
    "zoomInText": "+",
    "zoomInId": "olZoomInLink",
    "zoomOutText": "−",
    "zoomOutId": "olZoomOutLink",
    "draw": function() {
        var e = OpenLayers.Control.prototype.draw.apply(this), t = this.getOrCreateLinks(e), i = t.zoomIn, n = t.zoomOut, s = this.map.events;
        return n.parentNode !== e && (s = this.events).attachToElement(n.parentNode), s.register("buttonclick", this, this.onZoomClick), 
        this.zoomInLink = i, this.zoomOutLink = n, e;
    },
    "getOrCreateLinks": function(e) {
        var t = document.getElementById(this.zoomInId), i = document.getElementById(this.zoomOutId);
        return t || ((t = document.createElement("a")).href = "#zoomIn", t.appendChild(document.createTextNode(this.zoomInText)), 
        t.className = "olControlZoomIn", e.appendChild(t)), OpenLayers.Element.addClass(t, "olButton"), 
        i || ((i = document.createElement("a")).href = "#zoomOut", i.appendChild(document.createTextNode(this.zoomOutText)), 
        i.className = "olControlZoomOut", e.appendChild(i)), OpenLayers.Element.addClass(i, "olButton"), 
        {
            "zoomIn": t,
            "zoomOut": i
        };
    },
    "onZoomClick": function(e) {
        var t = e.buttonElement;
        t === this.zoomInLink ? this.map.zoomIn() : t === this.zoomOutLink && this.map.zoomOut();
    },
    "destroy": function() {
        this.map && this.map.events.unregister("buttonclick", this, this.onZoomClick), delete this.zoomInLink, 
        delete this.zoomOutLink, OpenLayers.Control.prototype.destroy.apply(this);
    },
    "CLASS_NAME": "OpenLayers.Control.Zoom"
}), OpenLayers.Control.ZoomIn = OpenLayers.Class(OpenLayers.Control.Button, {
    "trigger": function() {
        this.map && this.map.zoomIn();
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomIn"
}), OpenLayers.Control.ZoomOut = OpenLayers.Class(OpenLayers.Control.Button, {
    "trigger": function() {
        this.map && this.map.zoomOut();
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomOut"
}), OpenLayers.Control.ZoomToMaxExtent = OpenLayers.Class(OpenLayers.Control.Button, {
    "trigger": function() {
        this.map && this.map.zoomToMaxExtent();
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomToMaxExtent"
}), OpenLayers.Control.ZoomPanel = OpenLayers.Class(OpenLayers.Control.Panel, {
    "initialize": function(e) {
        OpenLayers.Control.Panel.prototype.initialize.apply(this, [ e ]), this.addControls([ new OpenLayers.Control.ZoomIn(), new OpenLayers.Control.ZoomToMaxExtent(), new OpenLayers.Control.ZoomOut() ]);
    },
    "CLASS_NAME": "OpenLayers.Control.ZoomPanel"
}), OpenLayers.Control.ModifyFeature.BySegment = {
    "hoverTolerance": 25,
    "collectVertices": OpenLayers.Function.Void,
    "setMap": function(e) {
        OpenLayers.Control.ModifyFeature.prototype.setMap.apply(this, arguments), this.handlers.hover || (this.handlers.hover = new OpenLayers.Handler.Hover(this, {
            "move": this.onHoverMove
        })), this.handlers.hover.setMap(e), this.layer.events.on({
            "beforefeaturemodified": this.createSpatialIndex,
            "afterfeaturemodified": this.deactivateHover,
            "scope": this
        });
    },
    "deactivateHover": function() {
        this.handlers.hover.deactivate();
    },
    "destroy": function() {
        this.layer && this.layer.events.un({
            "beforefeaturemodified": this.createSpatialIndex,
            "afterfeaturemodified": this.deactivateHover,
            "scope": this
        }), OpenLayers.Control.ModifyFeature.prototype.destroy.apply(this, []);
    },
    "dragStart": function(e) {
        OpenLayers.Control.ModifyFeature.prototype.dragStart.apply(this, arguments), this.vertexGeom = e.geometry.clone(), 
        this.handlers.drag.stopDown && this.handlers.hover.deactivate();
    },
    "dragComplete": function(e) {
        this.updateSpatialIndex(e), OpenLayers.Control.ModifyFeature.prototype.dragComplete.apply(this, arguments), 
        this.handlers.hover.activate();
    },
    "onHoverMove": function(e) {
        this.vertices.length > 0 && (this.layer.removeFeatures(this.vertices, {
            "silent": !0
        }), this.vertices = []), this.virtualVertices.length > 0 && (this.layer.removeFeatures(this.virtualVertices, {
            "silent": !0
        }), this.virtualVertices = []);
        var t = e.xy, i = t.add(-this.hoverTolerance / 2, this.hoverTolerance / 2), n = t.add(this.hoverTolerance / 2, -this.hoverTolerance / 2), s = this.map.getLonLatFromPixel(i), r = this.map.getLonLatFromPixel(n), o = this.tree.search([ s.lon, s.lat, r.lon, r.lat ]);
        if (o.length > 0) {
            for (var a, l = this.map.getLonLatFromPixel(t), h = new OpenLayers.Geometry.Point(l.lon, l.lat), c = Number.MAX_VALUE, u = 0, p = o.length; u < p; ++u) {
                var d = o[u], f = OpenLayers.Geometry.distanceSquaredToSegment(h, {
                    "x1": d.point1.x,
                    "x2": d.point2.x,
                    "y1": d.point1.y,
                    "y2": d.point2.y
                }).distance;
                f < c && (a = d), c = f;
            }
            var m = function(e) {
                var t = new OpenLayers.Feature.Vector(e);
                t._sketch = !0, t.renderIntent = this.vertexRenderIntent, this.vertices.push(t);
            };
            m.call(this, a.point1), m.call(this, a.point2);
            var g = this.createVirtualVertex(a.point1, a.point2);
            g._previous = a.point1, g._next = a.point2, g._index = -1, g.geometry.parent = a.point1.parent, 
            this.virtualVertices.push(g);
        }
        this.layer.addFeatures(this.vertices, {
            "silent": !0
        }), this.layer.addFeatures(this.virtualVertices, {
            "silent": !0
        });
    },
    "createSpatialIndex": function(e) {
        function t(e) {
            var i, s, r;
            if ("OpenLayers.Geometry.Point" !== e.CLASS_NAME) {
                var o = e.components.length;
                for ("OpenLayers.Geometry.LinearRing" != e.CLASS_NAME && "OpenLayers.Geometry.LineString" != e.CLASS_NAME || (o -= 1), 
                r = e.components[0], i = 1; i <= o; ++i) if (s = r, r = e.components[i], "OpenLayers.Geometry.Point" == s.CLASS_NAME) {
                    var a = this.createBBOX(s, r);
                    a.point1 = s, a.point2 = r, n.push(a);
                } else t.call(this, s);
            }
        }
        var i = e.feature, n = [];
        t.call(this, i.geometry), this.tree = window.rbush(), this.tree.load(n), this.handlers.hover.activate();
    },
    "createBBOX": function(e, t) {
        return [ e.x < t.x ? e.x : t.x, e.y < t.y ? e.y : t.y, e.x < t.x ? t.x : e.x, e.y < t.y ? t.y : e.y ];
    },
    "updateSpatialIndex": function(e) {
        var t, i, n, s = this.tree.search([ this.vertexGeom.x, this.vertexGeom.y, this.vertexGeom.x, this.vertexGeom.y ]);
        if (e._previous) (t = this.createBBOX(e._previous, e.geometry)).point1 = e._previous, 
        t.point2 = e.geometry, this.tree.insert(t), (t = this.createBBOX(e.geometry, e._next)).point1 = e.geometry, 
        t.point2 = e._next, this.tree.insert(t), this.tree.remove(s[0]), delete e._next, 
        delete e._previous; else for (i = 0, n = s.length; i < n; ++i) {
            var r = s[i];
            this.vertexGeom.equals(r.point1) ? ((t = this.createBBOX(e.geometry, r.point2)).point1 = e.geometry, 
            t.point2 = r.point2) : ((t = this.createBBOX(e.geometry, r.point1)).point1 = r.point1, 
            t.point2 = e.geometry), this.tree.insert(t), this.tree.remove(r);
        }
        this.vertexGeom.destroy(), this.vertexGeom = null;
    }
}, OpenLayers.Events.featureclick = OpenLayers.Class({
    "cache": null,
    "map": null,
    "provides": [ "featureclick", "nofeatureclick", "featureover", "featureout" ],
    "lastClientX": 0,
    "lastClientY": 0,
    "initialize": function(e) {
        if (this.target = e, e.object instanceof OpenLayers.Map) this.setMap(e.object); else {
            if (!(e.object instanceof OpenLayers.Layer.Vector)) throw "Listeners for '" + this.provides.join("', '") + "' events can only be registered for OpenLayers.Layer.Vector or OpenLayers.Map instances";
            e.object.map ? this.setMap(e.object.map) : e.object.events.register("added", this, function(t) {
                this.setMap(e.object.map);
            });
        }
        for (var t = this.provides.length - 1; t >= 0; --t) e.extensions[this.provides[t]] = !0;
    },
    "setMap": function(e) {
        this.map = e, this.cache = {}, e.events.register("mousedown", this, this.start, {
            "extension": !0
        }), e.events.register("mouseup", this, this.onClick, {
            "extension": !0
        }), e.events.register("touchstart", this, this.start, {
            "extension": !0
        }), e.events.register("touchmove", this, this.cancel, {
            "extension": !0
        }), e.events.register("touchend", this, this.onClick, {
            "extension": !0
        }), e.events.register("mousemove", this, this.onMousemove, {
            "extension": !0
        });
    },
    "start": function(e) {
        this.startEvt = e;
    },
    "cancel": function(e) {
        delete this.startEvt;
    },
    "onClick": function(e) {
        if (this.startEvt && ("touchend" === e.type || OpenLayers.Event.isLeftClick(e))) {
            var t = this.getFeatures(this.startEvt);
            delete this.startEvt;
            for (var i, n, s = {}, r = 0, o = t.length; r < o && (i = t[r], n = i.layer, s[n.id] = !0, 
            !1 !== this.triggerEvent("featureclick", {
                "feature": i
            })); ++r) ;
            for (r = 0, o = this.map.layers.length; r < o; ++r) (n = this.map.layers[r]) instanceof OpenLayers.Layer.Vector && !s[n.id] && this.triggerEvent("nofeatureclick", {
                "layer": n
            });
        }
    },
    "onMousemove": function(e) {
        delete this.startEvt;
        var t = e.clientX, i = e.clientY;
        if (this.lastClientX != t || this.lastClientY != i) {
            this.lastClientX = t, this.lastClientY = i;
            for (var n, s = this.getFeatures(e), r = {}, o = [], a = 0, l = s.length; a < l; ++a) r[(n = s[a]).id] = n, 
            this.cache[n.id] || o.push(n);
            var h = [];
            for (var c in this.cache) (n = this.cache[c]).layer && n.layer.map ? r[n.id] || h.push(n) : delete this.cache[c];
            for (a = 0, l = o.length; a < l && (n = o[a], this.cache[n.id] = n, !1 !== this.triggerEvent("featureover", {
                "feature": n
            })); ++a) ;
            for (a = 0, l = h.length; a < l && (n = h[a], delete this.cache[n.id], !1 !== this.triggerEvent("featureout", {
                "feature": n
            })); ++a) ;
        }
    },
    "triggerEvent": function(e, t) {
        var i = t.feature ? t.feature.layer : t.layer, n = this.target.object;
        if (n instanceof OpenLayers.Map || n === i) return this.target.triggerEvent(e, t);
    },
    "getFeatures": function(e) {
        var t, i, n, s, r, o, a, l = e.clientX, h = e.clientY, c = [], u = [], p = [];
        for (r = this.map.layers.length - 1; r >= 0; --r) if (t = this.map.layers[r], i = t.renderer, 
        "none" !== t.div.style.display) if (i instanceof OpenLayers.Renderer.Elements) {
            if (t instanceof OpenLayers.Layer.Vector) for (n = document.elementFromPoint(l, h); n && (a = i.getFeatureIdFromEvent({
                "target": n
            })); ) (s = t.getFeatureById(a)) ? (c.push(s), n.style.display = "none", u.push(n), 
            n = document.elementFromPoint(l, h)) : n = !1;
            p.push(t), t.div.style.display = "none";
        } else i instanceof OpenLayers.Renderer.Canvas && (s = i.getFeatureIdFromEvent(e)) && (c.push(s), 
        p.push(t));
        for (r = 0, o = u.length; r < o; ++r) u[r].style.display = "";
        for (r = p.length - 1; r >= 0; --r) p[r].div.style.display = "block";
        return c;
    },
    "destroy": function() {
        for (var e = this.provides.length - 1; e >= 0; --e) delete this.target.extensions[this.provides[e]];
        this.map.events.un({
            "mousemove": this.onMousemove,
            "mousedown": this.start,
            "mouseup": this.onClick,
            "touchstart": this.start,
            "touchmove": this.cancel,
            "touchend": this.onClick,
            "scope": this
        }), delete this.cache, delete this.map, delete this.target;
    }
}), OpenLayers.Events.nofeatureclick = OpenLayers.Events.featureclick, OpenLayers.Events.featureover = OpenLayers.Events.featureclick, 
OpenLayers.Events.featureout = OpenLayers.Events.featureclick, OpenLayers.Format.ArcXML = OpenLayers.Class(OpenLayers.Format.XML, {
    "fontStyleKeys": [ "antialiasing", "blockout", "font", "fontcolor", "fontsize", "fontstyle", "glowing", "interval", "outline", "printmode", "shadow", "transparency" ],
    "request": null,
    "response": null,
    "initialize": function(e) {
        if (this.request = new OpenLayers.Format.ArcXML.Request(), this.response = new OpenLayers.Format.ArcXML.Response(), 
        e) if ("feature" == e.requesttype) {
            this.request.get_image = null;
            var t = this.request.get_feature.query;
            this.addCoordSys(t.featurecoordsys, e.featureCoordSys), this.addCoordSys(t.filtercoordsys, e.filterCoordSys), 
            e.polygon ? (t.isspatial = !0, t.spatialfilter.polygon = e.polygon) : e.envelope && (t.isspatial = !0, 
            t.spatialfilter.envelope = {
                "minx": 0,
                "miny": 0,
                "maxx": 0,
                "maxy": 0
            }, this.parseEnvelope(t.spatialfilter.envelope, e.envelope));
        } else if ("image" == e.requesttype) {
            this.request.get_feature = null;
            var i = this.request.get_image.properties;
            this.parseEnvelope(i.envelope, e.envelope), this.addLayers(i.layerlist, e.layers), 
            this.addImageSize(i.imagesize, e.tileSize), this.addCoordSys(i.featurecoordsys, e.featureCoordSys), 
            this.addCoordSys(i.filtercoordsys, e.filterCoordSys);
        } else this.request = null;
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "parseEnvelope": function(e, t) {
        t && 4 == t.length && (e.minx = t[0], e.miny = t[1], e.maxx = t[2], e.maxy = t[3]);
    },
    "addLayers": function(e, t) {
        for (var i = 0, n = t.length; i < n; i++) e.push(t[i]);
    },
    "addImageSize": function(e, t) {
        null !== t && (e.width = t.w, e.height = t.h, e.printwidth = t.w, e.printheight = t.h);
    },
    "addCoordSys": function(e, t) {
        "string" == typeof t ? (e.id = parseInt(t), e.string = t) : "object" == typeof t && null !== t.proj ? (e.id = t.proj.srsProjNumber, 
        e.string = t.proj.srsCode) : e = t;
    },
    "iserror": function(e) {
        var t = null;
        if (e) {
            var i = (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])).documentElement.getElementsByTagName("ERROR");
            t = null !== i && i.length > 0;
        } else t = "" !== this.response.error;
        return t;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = null;
        if (e && e.documentElement && (t = "ARCXML" == e.documentElement.nodeName ? e.documentElement : e.documentElement.getElementsByTagName("ARCXML")[0]), 
        !t || "parsererror" === t.firstChild.nodeName) {
            var i, n;
            try {
                i = e.firstChild.nodeValue, n = e.firstChild.childNodes[1].firstChild.nodeValue;
            } catch (e) {}
            throw {
                "message": "Error parsing the ArcXML request",
                "error": i,
                "source": n
            };
        }
        return this.parseResponse(t);
    },
    "write": function(e) {
        e || (e = this.request);
        var t = this.createElementNS("", "ARCXML");
        t.setAttribute("version", "1.1");
        var i = this.createElementNS("", "REQUEST");
        if (null != e.get_image) {
            var n = this.createElementNS("", "GET_IMAGE");
            i.appendChild(n);
            var s = this.createElementNS("", "PROPERTIES");
            n.appendChild(s);
            var r = e.get_image.properties;
            if (null != r.featurecoordsys) {
                var o = this.createElementNS("", "FEATURECOORDSYS");
                s.appendChild(o), 0 === r.featurecoordsys.id ? o.setAttribute("string", r.featurecoordsys.string) : o.setAttribute("id", r.featurecoordsys.id);
            }
            if (null != r.filtercoordsys) {
                var a = this.createElementNS("", "FILTERCOORDSYS");
                s.appendChild(a), 0 === r.filtercoordsys.id ? a.setAttribute("string", r.filtercoordsys.string) : a.setAttribute("id", r.filtercoordsys.id);
            }
            if (null != r.envelope) {
                var l = this.createElementNS("", "ENVELOPE");
                s.appendChild(l), l.setAttribute("minx", r.envelope.minx), l.setAttribute("miny", r.envelope.miny), 
                l.setAttribute("maxx", r.envelope.maxx), l.setAttribute("maxy", r.envelope.maxy);
            }
            var h = this.createElementNS("", "IMAGESIZE");
            if (s.appendChild(h), h.setAttribute("height", r.imagesize.height), h.setAttribute("width", r.imagesize.width), 
            r.imagesize.height == r.imagesize.printheight && r.imagesize.width == r.imagesize.printwidth || (h.setAttribute("printheight", r.imagesize.printheight), 
            h.setArrtibute("printwidth", r.imagesize.printwidth)), null != r.background) {
                var c = this.createElementNS("", "BACKGROUND");
                s.appendChild(c), c.setAttribute("color", r.background.color.r + "," + r.background.color.g + "," + r.background.color.b), 
                null !== r.background.transcolor && c.setAttribute("transcolor", r.background.transcolor.r + "," + r.background.transcolor.g + "," + r.background.transcolor.b);
            }
            if (null != r.layerlist && r.layerlist.length > 0) {
                var u = this.createElementNS("", "LAYERLIST");
                s.appendChild(u);
                for (var p = 0; p < r.layerlist.length; p++) {
                    var d = this.createElementNS("", "LAYERDEF");
                    if (u.appendChild(d), d.setAttribute("id", r.layerlist[p].id), d.setAttribute("visible", r.layerlist[p].visible), 
                    "object" == typeof r.layerlist[p].query) {
                        var f = r.layerlist[p].query;
                        if (f.where.length < 0) continue;
                        var m = null;
                        (m = "boolean" == typeof f.spatialfilter && f.spatialfilter ? this.createElementNS("", "SPATIALQUERY") : this.createElementNS("", "QUERY")).setAttribute("where", f.where), 
                        "number" == typeof f.accuracy && f.accuracy > 0 && m.setAttribute("accuracy", f.accuracy), 
                        "number" == typeof f.featurelimit && f.featurelimit < 2e3 && m.setAttribute("featurelimit", f.featurelimit), 
                        "string" == typeof f.subfields && "#ALL#" != f.subfields && m.setAttribute("subfields", f.subfields), 
                        "string" == typeof f.joinexpression && f.joinexpression.length > 0 && m.setAttribute("joinexpression", f.joinexpression), 
                        "string" == typeof f.jointables && f.jointables.length > 0 && m.setAttribute("jointables", f.jointables), 
                        d.appendChild(m);
                    }
                    "object" == typeof r.layerlist[p].renderer && this.addRenderer(d, r.layerlist[p].renderer);
                }
            }
        } else if (null != e.get_feature) {
            if ((n = this.createElementNS("", "GET_FEATURES")).setAttribute("outputmode", "newxml"), 
            n.setAttribute("checkesc", "true"), e.get_feature.geometry ? n.setAttribute("geometry", e.get_feature.geometry) : n.setAttribute("geometry", "false"), 
            e.get_feature.compact && n.setAttribute("compact", e.get_feature.compact), "number" == e.get_feature.featurelimit && n.setAttribute("featurelimit", e.get_feature.featurelimit), 
            n.setAttribute("globalenvelope", "true"), i.appendChild(n), null != e.get_feature.layer && e.get_feature.layer.length > 0) {
                var g = this.createElementNS("", "LAYER");
                g.setAttribute("id", e.get_feature.layer), n.appendChild(g);
            }
            var y = e.get_feature.query;
            if (null != y) {
                var v = null;
                if (v = y.isspatial ? this.createElementNS("", "SPATIALQUERY") : this.createElementNS("", "QUERY"), 
                n.appendChild(v), "number" == typeof y.accuracy && v.setAttribute("accuracy", y.accuracy), 
                null != y.featurecoordsys) {
                    var L = this.createElementNS("", "FEATURECOORDSYS");
                    0 == y.featurecoordsys.id ? L.setAttribute("string", y.featurecoordsys.string) : L.setAttribute("id", y.featurecoordsys.id), 
                    v.appendChild(L);
                }
                if (null != y.filtercoordsys) {
                    var w = this.createElementNS("", "FILTERCOORDSYS");
                    0 === y.filtercoordsys.id ? w.setAttribute("string", y.filtercoordsys.string) : w.setAttribute("id", y.filtercoordsys.id), 
                    v.appendChild(w);
                }
                if (y.buffer > 0) {
                    var b = this.createElementNS("", "BUFFER");
                    b.setAttribute("distance", y.buffer), v.appendChild(b);
                }
                if (y.isspatial) {
                    var C = this.createElementNS("", "SPATIALFILTER");
                    if (C.setAttribute("relation", y.spatialfilter.relation), v.appendChild(C), y.spatialfilter.envelope) {
                        var O = this.createElementNS("", "ENVELOPE");
                        O.setAttribute("minx", y.spatialfilter.envelope.minx), O.setAttribute("miny", y.spatialfilter.envelope.miny), 
                        O.setAttribute("maxx", y.spatialfilter.envelope.maxx), O.setAttribute("maxy", y.spatialfilter.envelope.maxy), 
                        C.appendChild(O);
                    } else "object" == typeof y.spatialfilter.polygon && C.appendChild(this.writePolygonGeometry(y.spatialfilter.polygon));
                }
                null != y.where && y.where.length > 0 && v.setAttribute("where", y.where);
            }
        }
        return t.appendChild(i), OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "addGroupRenderer": function(e, t) {
        var i = this.createElementNS("", "GROUPRENDERER");
        e.appendChild(i);
        for (var n = 0; n < t.length; n++) {
            var s = t[n];
            this.addRenderer(i, s);
        }
    },
    "addRenderer": function(e, t) {
        if (OpenLayers.Util.isArray(t)) this.addGroupRenderer(e, t); else {
            var i = this.createElementNS("", t.type.toUpperCase() + "RENDERER");
            e.appendChild(i), "VALUEMAPRENDERER" == i.tagName ? this.addValueMapRenderer(i, t) : "VALUEMAPLABELRENDERER" == i.tagName ? this.addValueMapLabelRenderer(i, t) : "SIMPLELABELRENDERER" == i.tagName ? this.addSimpleLabelRenderer(i, t) : "SCALEDEPENDENTRENDERER" == i.tagName && this.addScaleDependentRenderer(i, t);
        }
    },
    "addScaleDependentRenderer": function(e, t) {
        "string" != typeof t.lower && "number" != typeof t.lower || e.setAttribute("lower", t.lower), 
        "string" != typeof t.upper && "number" != typeof t.upper || e.setAttribute("upper", t.upper), 
        this.addRenderer(e, t.renderer);
    },
    "addValueMapLabelRenderer": function(e, t) {
        if (e.setAttribute("lookupfield", t.lookupfield), e.setAttribute("labelfield", t.labelfield), 
        "object" == typeof t.exacts) for (var i = 0, n = t.exacts.length; i < n; i++) {
            var s = t.exacts[i], r = this.createElementNS("", "EXACT");
            if ("string" == typeof s.value && r.setAttribute("value", s.value), "string" == typeof s.label && r.setAttribute("label", s.label), 
            "string" == typeof s.method && r.setAttribute("method", s.method), e.appendChild(r), 
            "object" == typeof s.symbol) {
                var o = null;
                if ("text" == s.symbol.type && (o = this.createElementNS("", "TEXTSYMBOL")), null != o) {
                    for (var a = this.fontStyleKeys, l = 0, h = a.length; l < h; l++) {
                        var c = a[l];
                        s.symbol[c] && o.setAttribute(c, s.symbol[c]);
                    }
                    r.appendChild(o);
                }
            }
        }
    },
    "addValueMapRenderer": function(e, t) {
        if (e.setAttribute("lookupfield", t.lookupfield), "object" == typeof t.ranges) for (var i = 0, n = t.ranges.length; i < n; i++) {
            var s = t.ranges[i], r = this.createElementNS("", "RANGE");
            if (r.setAttribute("lower", s.lower), r.setAttribute("upper", s.upper), e.appendChild(r), 
            "object" == typeof s.symbol) {
                c = null;
                "simplepolygon" == s.symbol.type && (c = this.createElementNS("", "SIMPLEPOLYGONSYMBOL")), 
                null != c && ("string" == typeof s.symbol.boundarycolor && c.setAttribute("boundarycolor", s.symbol.boundarycolor), 
                "string" == typeof s.symbol.fillcolor && c.setAttribute("fillcolor", s.symbol.fillcolor), 
                "number" == typeof s.symbol.filltransparency && c.setAttribute("filltransparency", s.symbol.filltransparency), 
                r.appendChild(c));
            }
        } else if ("object" == typeof t.exacts) for (var o = 0, a = t.exacts.length; o < a; o++) {
            var l = t.exacts[o], h = this.createElementNS("", "EXACT");
            if ("string" == typeof l.value && h.setAttribute("value", l.value), "string" == typeof l.label && h.setAttribute("label", l.label), 
            "string" == typeof l.method && h.setAttribute("method", l.method), e.appendChild(h), 
            "object" == typeof l.symbol) {
                var c = null;
                "simplemarker" == l.symbol.type && (c = this.createElementNS("", "SIMPLEMARKERSYMBOL")), 
                null != c && ("string" == typeof l.symbol.antialiasing && c.setAttribute("antialiasing", l.symbol.antialiasing), 
                "string" == typeof l.symbol.color && c.setAttribute("color", l.symbol.color), "string" == typeof l.symbol.outline && c.setAttribute("outline", l.symbol.outline), 
                "string" == typeof l.symbol.overlap && c.setAttribute("overlap", l.symbol.overlap), 
                "string" == typeof l.symbol.shadow && c.setAttribute("shadow", l.symbol.shadow), 
                "number" == typeof l.symbol.transparency && c.setAttribute("transparency", l.symbol.transparency), 
                "string" == typeof l.symbol.usecentroid && c.setAttribute("usecentroid", l.symbol.usecentroid), 
                "number" == typeof l.symbol.width && c.setAttribute("width", l.symbol.width), h.appendChild(c));
            }
        }
    },
    "addSimpleLabelRenderer": function(e, t) {
        e.setAttribute("field", t.field);
        for (var i = [ "featureweight", "howmanylabels", "labelbufferratio", "labelpriorities", "labelweight", "linelabelposition", "rotationalangles" ], n = 0, s = i.length; n < s; n++) t[a = i[n]] && e.setAttribute(a, t[a]);
        if ("text" == t.symbol.type) {
            var r = t.symbol, o = this.createElementNS("", "TEXTSYMBOL");
            e.appendChild(o);
            for (var n = 0, s = (i = this.fontStyleKeys).length; n < s; n++) {
                var a = i[n];
                r[a] && o.setAttribute(a, t[a]);
            }
        }
    },
    "writePolygonGeometry": function(e) {
        if (!(e instanceof OpenLayers.Geometry.Polygon)) throw {
            "message": "Cannot write polygon geometry to ArcXML with an " + e.CLASS_NAME + " object.",
            "geometry": e
        };
        for (var t = this.createElementNS("", "POLYGON"), i = 0, n = e.components.length; i < n; i++) {
            for (var s = e.components[i], r = this.createElementNS("", "RING"), o = 0, a = s.components.length; o < a; o++) {
                var l = s.components[o], h = this.createElementNS("", "POINT");
                h.setAttribute("x", l.x), h.setAttribute("y", l.y), r.appendChild(h);
            }
            t.appendChild(r);
        }
        return t;
    },
    "parseResponse": function(e) {
        "string" == typeof e && (e = new OpenLayers.Format.XML().read(e));
        var t = new OpenLayers.Format.ArcXML.Response(), i = e.getElementsByTagName("ERROR");
        if (null != i && i.length > 0) t.error = this.getChildValue(i, "Unknown error."); else {
            var n = e.getElementsByTagName("RESPONSE");
            if (null == n || 0 == n.length) return t.error = "No RESPONSE tag found in ArcXML response.", 
            t;
            var s = n[0].firstChild.nodeName;
            if ("#text" == s && (s = n[0].firstChild.nextSibling.nodeName), "IMAGE" == s) {
                var r = e.getElementsByTagName("ENVELOPE"), o = e.getElementsByTagName("OUTPUT");
                if (null == r || 0 == r.length) t.error = "No ENVELOPE tag found in ArcXML response."; else if (null == o || 0 == o.length) t.error = "No OUTPUT tag found in ArcXML response."; else {
                    var a = this.parseAttributes(r[0]), l = this.parseAttributes(o[0]);
                    "string" == typeof l.type ? t.image = {
                        "envelope": a,
                        "output": {
                            "type": l.type,
                            "data": this.getChildValue(o[0])
                        }
                    } : t.image = {
                        "envelope": a,
                        "output": l
                    };
                }
            } else if ("FEATURES" == s) {
                var h = n[0].getElementsByTagName("FEATURES"), c = h[0].getElementsByTagName("FEATURECOUNT");
                if (t.features.featurecount = c[0].getAttribute("count"), t.features.featurecount > 0) {
                    var u = h[0].getElementsByTagName("ENVELOPE");
                    t.features.envelope = this.parseAttributes(u[0], "number");
                    for (var p = h[0].getElementsByTagName("FEATURE"), d = 0; d < p.length; d++) {
                        for (var f = new OpenLayers.Feature.Vector(), m = p[d].getElementsByTagName("FIELD"), g = 0; g < m.length; g++) {
                            var y = m[g].getAttribute("name"), v = m[g].getAttribute("value");
                            f.attributes[y] = v;
                        }
                        var L = p[d].getElementsByTagName("POLYGON");
                        if (L.length > 0) {
                            for (var w = L[0].getElementsByTagName("RING"), b = [], C = 0; C < w.length; C++) {
                                var O = [];
                                O.push(this.parsePointGeometry(w[C]));
                                for (var S = w[C].getElementsByTagName("HOLE"), x = 0; x < S.length; x++) O.push(this.parsePointGeometry(S[x]));
                                S = null, b.push(new OpenLayers.Geometry.Polygon(O)), O = null;
                            }
                            w = null, 1 == b.length ? f.geometry = b[0] : f.geometry = new OpenLayers.Geometry.MultiPolygon(b);
                        }
                        t.features.feature.push(f);
                    }
                }
            } else t.error = "Unidentified response type.";
        }
        return t;
    },
    "parseAttributes": function(e, t) {
        for (var i = {}, n = 0; n < e.attributes.length; n++) i[e.attributes[n].nodeName] = "number" == t ? parseFloat(e.attributes[n].nodeValue) : e.attributes[n].nodeValue;
        return i;
    },
    "parsePointGeometry": function(e) {
        var t = [], i = e.getElementsByTagName("COORDS");
        if (i.length > 0) {
            var n = this.getChildValue(i[0]);
            n = n.split(/;/);
            for (var s = 0; s < n.length; s++) {
                var r = n[s].split(/ /);
                t.push(new OpenLayers.Geometry.Point(r[0], r[1]));
            }
            i = null;
        } else {
            var o = e.getElementsByTagName("POINT");
            if (o.length > 0) for (var a = 0; a < o.length; a++) t.push(new OpenLayers.Geometry.Point(parseFloat(o[a].getAttribute("x")), parseFloat(o[a].getAttribute("y"))));
            o = null;
        }
        return new OpenLayers.Geometry.LinearRing(t);
    },
    "CLASS_NAME": "OpenLayers.Format.ArcXML"
}), OpenLayers.Format.ArcXML.Request = OpenLayers.Class({
    "initialize": function(e) {
        var t = {
            "get_image": {
                "properties": {
                    "background": null,
                    "draw": !0,
                    "envelope": {
                        "minx": 0,
                        "miny": 0,
                        "maxx": 0,
                        "maxy": 0
                    },
                    "featurecoordsys": {
                        "id": 0,
                        "string": "",
                        "datumtransformid": 0,
                        "datumtransformstring": ""
                    },
                    "filtercoordsys": {
                        "id": 0,
                        "string": "",
                        "datumtransformid": 0,
                        "datumtransformstring": ""
                    },
                    "imagesize": {
                        "height": 0,
                        "width": 0,
                        "dpi": 96,
                        "printheight": 0,
                        "printwidth": 0,
                        "scalesymbols": !1
                    },
                    "layerlist": [],
                    "output": {
                        "baseurl": "",
                        "legendbaseurl": "",
                        "legendname": "",
                        "legendpath": "",
                        "legendurl": "",
                        "name": "",
                        "path": "",
                        "type": "jpg",
                        "url": ""
                    }
                }
            },
            "get_feature": {
                "layer": "",
                "query": {
                    "isspatial": !1,
                    "featurecoordsys": {
                        "id": 0,
                        "string": "",
                        "datumtransformid": 0,
                        "datumtransformstring": ""
                    },
                    "filtercoordsys": {
                        "id": 0,
                        "string": "",
                        "datumtransformid": 0,
                        "datumtransformstring": ""
                    },
                    "buffer": 0,
                    "where": "",
                    "spatialfilter": {
                        "relation": "envelope_intersection",
                        "envelope": null
                    }
                }
            },
            "environment": {
                "separators": {
                    "cs": " ",
                    "ts": ";"
                }
            },
            "layer": [],
            "workspaces": []
        };
        return OpenLayers.Util.extend(this, t);
    },
    "CLASS_NAME": "OpenLayers.Format.ArcXML.Request"
}), OpenLayers.Format.ArcXML.Response = OpenLayers.Class({
    "initialize": function(e) {
        var t = {
            "image": {
                "envelope": null,
                "output": ""
            },
            "features": {
                "featurecount": 0,
                "envelope": null,
                "feature": []
            },
            "error": ""
        };
        return OpenLayers.Util.extend(this, t);
    },
    "CLASS_NAME": "OpenLayers.Format.ArcXML.Response"
}), OpenLayers.Format.Atom = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "atom": "http://www.w3.org/2005/Atom",
        "georss": "http://www.georss.org/georss"
    },
    "feedTitle": "untitled",
    "defaultEntryTitle": "untitled",
    "gmlParser": null,
    "xy": !1,
    "read": function(e) {
        return "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        this.parseFeatures(e);
    },
    "write": function(e) {
        var t;
        if (OpenLayers.Util.isArray(e)) {
            (t = this.createElementNSPlus("atom:feed")).appendChild(this.createElementNSPlus("atom:title", {
                "value": this.feedTitle
            }));
            for (var i = 0, n = e.length; i < n; i++) t.appendChild(this.buildEntryNode(e[i]));
        } else t = this.buildEntryNode(e);
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "buildContentNode": function(e) {
        var t = this.createElementNSPlus("atom:content", {
            "attributes": {
                "type": e.type || null
            }
        });
        if (e.src) t.setAttribute("src", e.src); else if ("text" == e.type || null == e.type) t.appendChild(this.createTextNode(e.value)); else if ("html" == e.type) {
            if ("string" != typeof e.value) throw "HTML content must be in form of an escaped string";
            t.appendChild(this.createTextNode(e.value));
        } else "xhtml" == e.type ? t.appendChild(e.value) : "xhtml" == e.type || e.type.match(/(\+|\/)xml$/) ? t.appendChild(e.value) : t.appendChild(this.createTextNode(e.value));
        return t;
    },
    "buildEntryNode": function(e) {
        var t = e.attributes, i = t.atom || {}, n = this.createElementNSPlus("atom:entry");
        if (i.authors) for (var s = OpenLayers.Util.isArray(i.authors) ? i.authors : [ i.authors ], r = 0, o = s.length; r < o; r++) n.appendChild(this.buildPersonConstructNode("author", s[r]));
        if (i.categories) for (var a, l = OpenLayers.Util.isArray(i.categories) ? i.categories : [ i.categories ], r = 0, o = l.length; r < o; r++) a = l[r], 
        n.appendChild(this.createElementNSPlus("atom:category", {
            "attributes": {
                "term": a.term,
                "scheme": a.scheme || null,
                "label": a.label || null
            }
        }));
        if (i.content && n.appendChild(this.buildContentNode(i.content)), i.contributors) for (var h = OpenLayers.Util.isArray(i.contributors) ? i.contributors : [ i.contributors ], r = 0, o = h.length; r < o; r++) n.appendChild(this.buildPersonConstructNode("contributor", h[r]));
        if (e.fid && n.appendChild(this.createElementNSPlus("atom:id", {
            "value": e.fid
        })), i.links) for (var c, u = OpenLayers.Util.isArray(i.links) ? i.links : [ i.links ], r = 0, o = u.length; r < o; r++) c = u[r], 
        n.appendChild(this.createElementNSPlus("atom:link", {
            "attributes": {
                "href": c.href,
                "rel": c.rel || null,
                "type": c.type || null,
                "hreflang": c.hreflang || null,
                "title": c.title || null,
                "length": c.length || null
            }
        }));
        if (i.published && n.appendChild(this.createElementNSPlus("atom:published", {
            "value": i.published
        })), i.rights && n.appendChild(this.createElementNSPlus("atom:rights", {
            "value": i.rights
        })), (i.summary || t.description) && n.appendChild(this.createElementNSPlus("atom:summary", {
            "value": i.summary || t.description
        })), n.appendChild(this.createElementNSPlus("atom:title", {
            "value": i.title || t.title || this.defaultEntryTitle
        })), i.updated && n.appendChild(this.createElementNSPlus("atom:updated", {
            "value": i.updated
        })), e.geometry) {
            var p = this.createElementNSPlus("georss:where");
            p.appendChild(this.buildGeometryNode(e.geometry)), n.appendChild(p);
        }
        return n;
    },
    "initGmlParser": function() {
        this.gmlParser = new OpenLayers.Format.GML.v3({
            "xy": this.xy,
            "featureNS": "http://example.com#feature",
            "internalProjection": this.internalProjection,
            "externalProjection": this.externalProjection
        });
    },
    "buildGeometryNode": function(e) {
        return this.gmlParser || this.initGmlParser(), this.gmlParser.writeNode("feature:_geometry", e).firstChild;
    },
    "buildPersonConstructNode": function(e, t) {
        var i = [ "uri", "email" ], n = this.createElementNSPlus("atom:" + e);
        n.appendChild(this.createElementNSPlus("atom:name", {
            "value": t.name
        }));
        for (var s = 0, r = i.length; s < r; s++) t[i[s]] && n.appendChild(this.createElementNSPlus("atom:" + i[s], {
            "value": t[i[s]]
        }));
        return n;
    },
    "getFirstChildValue": function(e, t, i, n) {
        var s = this.getElementsByTagNameNS(e, t, i);
        return s && s.length > 0 ? this.getChildValue(s[0], n) : n;
    },
    "parseFeature": function(e) {
        var t = {}, i = null, n = null, s = null, r = this.namespaces.atom;
        this.parsePersonConstructs(e, "author", t), (n = this.getElementsByTagNameNS(e, r, "category")).length > 0 && (t.categories = []);
        for (var o = 0, a = n.length; o < a; o++) (i = {}).term = n[o].getAttribute("term"), 
        (s = n[o].getAttribute("scheme")) && (i.scheme = s), (s = n[o].getAttribute("label")) && (i.label = s), 
        t.categories.push(i);
        (n = this.getElementsByTagNameNS(e, r, "content")).length > 0 && (i = {}, (s = n[0].getAttribute("type")) && (i.type = s), 
        (s = n[0].getAttribute("src")) ? i.src = s : ("text" == i.type || "html" == i.type || null == i.type ? i.value = this.getFirstChildValue(e, r, "content", null) : "xhtml" == i.type || i.type.match(/(\+|\/)xml$/) ? i.value = this.getChildEl(n[0]) : i.value = this.getFirstChildValue(e, r, "content", null), 
        t.content = i)), this.parsePersonConstructs(e, "contributor", t), t.id = this.getFirstChildValue(e, r, "id", null), 
        (n = this.getElementsByTagNameNS(e, r, "link")).length > 0 && (t.links = new Array(n.length));
        for (var l = [ "rel", "type", "hreflang", "title", "length" ], o = 0, a = n.length; o < a; o++) {
            (i = {}).href = n[o].getAttribute("href");
            for (var h = 0, c = l.length; h < c; h++) (s = n[o].getAttribute(l[h])) && (i[l[h]] = s);
            t.links[o] = i;
        }
        (i = this.getFirstChildValue(e, r, "published", null)) && (t.published = i), (i = this.getFirstChildValue(e, r, "rights", null)) && (t.rights = i), 
        (i = this.getFirstChildValue(e, r, "summary", null)) && (t.summary = i), t.title = this.getFirstChildValue(e, r, "title", null), 
        t.updated = this.getFirstChildValue(e, r, "updated", null);
        var u = {
            "title": t.title,
            "description": t.summary,
            "atom": t
        }, p = this.parseLocations(e)[0], d = new OpenLayers.Feature.Vector(p, u);
        return d.fid = t.id, d;
    },
    "parseFeatures": function(e) {
        var t = [], i = this.getElementsByTagNameNS(e, this.namespaces.atom, "entry");
        0 == i.length && (i = [ e ]);
        for (var n = 0, s = i.length; n < s; n++) t.push(this.parseFeature(i[n]));
        return t;
    },
    "parseLocations": function(e) {
        var t = this.namespaces.georss, i = {
            "components": []
        }, n = this.getElementsByTagNameNS(e, t, "where");
        if (n && n.length > 0) {
            this.gmlParser || this.initGmlParser();
            for (var s = 0, r = n.length; s < r; s++) this.gmlParser.readChildNodes(n[s], i);
        }
        var o = i.components, a = this.getElementsByTagNameNS(e, t, "point");
        if (a && a.length > 0) for (var s = 0, r = a.length; s < r; s++) {
            var l = OpenLayers.String.trim(a[s].firstChild.nodeValue).split(/\s+/);
            2 != l.length && (l = OpenLayers.String.trim(a[s].firstChild.nodeValue).split(/\s*,\s*/)), 
            o.push(new OpenLayers.Geometry.Point(l[1], l[0]));
        }
        var h = this.getElementsByTagNameNS(e, t, "line");
        if (h && h.length > 0) for (var s = 0, r = h.length; s < r; s++) {
            m = [];
            for (var c = 0, u = (d = OpenLayers.String.trim(h[s].firstChild.nodeValue).split(/\s+/)).length; c < u; c += 2) f = new OpenLayers.Geometry.Point(d[c + 1], d[c]), 
            m.push(f);
            o.push(new OpenLayers.Geometry.LineString(m));
        }
        var p = this.getElementsByTagNameNS(e, t, "polygon");
        if (p && p.length > 0) for (var d, f, m, s = 0, r = p.length; s < r; s++) {
            m = [];
            for (var c = 0, u = (d = OpenLayers.String.trim(p[s].firstChild.nodeValue).split(/\s+/)).length; c < u; c += 2) f = new OpenLayers.Geometry.Point(d[c + 1], d[c]), 
            m.push(f);
            o.push(new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing(m) ]));
        }
        if (this.internalProjection && this.externalProjection) for (var s = 0, r = o.length; s < r; s++) o[s] && o[s].transform(this.externalProjection, this.internalProjection);
        return o;
    },
    "parsePersonConstructs": function(e, t, i) {
        for (var n = [], s = this.namespaces.atom, r = this.getElementsByTagNameNS(e, s, t), o = [ "uri", "email" ], a = 0, l = r.length; a < l; a++) {
            var h = {};
            h.name = this.getFirstChildValue(r[a], s, "name", null);
            for (var c = 0, u = o.length; c < u; c++) {
                var p = this.getFirstChildValue(r[a], s, o[c], null);
                p && (h[o[c]] = p);
            }
            n.push(h);
        }
        n.length > 0 && (i[t + "s"] = n);
    },
    "CLASS_NAME": "OpenLayers.Format.Atom"
}), OpenLayers.Format.Context = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "layerOptions": null,
    "layerParams": null,
    "read": function(e, t) {
        var i, n = OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this, arguments);
        if (t && t.map) if (this.context = n, t.map instanceof OpenLayers.Map) i = this.mergeContextToMap(n, t.map); else {
            var s = t.map;
            (OpenLayers.Util.isElement(s) || "string" == typeof s) && (s = {
                "div": s
            }), i = this.contextToMap(n, s);
        } else i = n;
        return i;
    },
    "getLayerFromContext": function(e) {
        var t, i, n = {
            "queryable": e.queryable,
            "visibility": e.visibility,
            "maxExtent": e.maxExtent,
            "metadata": OpenLayers.Util.applyDefaults(e.metadata, {
                "styles": e.styles,
                "formats": e.formats,
                "abstract": e.abstract,
                "dataURL": e.dataURL
            }),
            "numZoomLevels": e.numZoomLevels,
            "units": e.units,
            "isBaseLayer": e.isBaseLayer,
            "opacity": e.opacity,
            "gutter": e.gutter,
            "displayInLayerSwitcher": e.displayInLayerSwitcher,
            "singleTile": e.singleTile,
            "tileSize": e.tileSize ? new OpenLayers.Size(e.tileSize.width, e.tileSize.height) : void 0,
            "minScale": e.minScale || e.maxScaleDenominator,
            "maxScale": e.maxScale || e.minScaleDenominator,
            "srs": e.srs,
            "dimensions": e.dimensions,
            "metadataURL": e.metadataURL,
            "attribution": e.attribution
        };
        this.layerOptions && OpenLayers.Util.applyDefaults(n, this.layerOptions);
        var s = {
            "layers": e.name,
            "transparent": e.transparent,
            "version": e.version
        };
        if (e.formats && e.formats.length > 0) for (s.format = e.formats[0].value, t = 0, 
        i = e.formats.length; t < i; t++) {
            var r = e.formats[t];
            if (1 == r.current) {
                s.format = r.value;
                break;
            }
        }
        if (e.styles && e.styles.length > 0) for (t = 0, i = e.styles.length; t < i; t++) {
            var o = e.styles[t];
            if (1 == o.current) {
                o.href ? s.sld = o.href : o.body ? s.sld_body = o.body : s.styles = o.name;
                break;
            }
        }
        this.layerParams && OpenLayers.Util.applyDefaults(s, this.layerParams);
        var a = null, l = e.service;
        return l == OpenLayers.Format.Context.serviceTypes.WFS ? (n.strategies = [ new OpenLayers.Strategy.BBOX() ], 
        n.protocol = new OpenLayers.Protocol.WFS({
            "url": e.url,
            "featurePrefix": e.name.split(":")[0],
            "featureType": e.name.split(":").pop()
        }), a = new OpenLayers.Layer.Vector(e.title || e.name, n)) : l == OpenLayers.Format.Context.serviceTypes.KML ? (n.strategies = [ new OpenLayers.Strategy.Fixed() ], 
        n.protocol = new OpenLayers.Protocol.HTTP({
            "url": e.url,
            "format": new OpenLayers.Format.KML()
        }), a = new OpenLayers.Layer.Vector(e.title || e.name, n)) : l == OpenLayers.Format.Context.serviceTypes.GML ? (n.strategies = [ new OpenLayers.Strategy.Fixed() ], 
        n.protocol = new OpenLayers.Protocol.HTTP({
            "url": e.url,
            "format": new OpenLayers.Format.GML()
        }), a = new OpenLayers.Layer.Vector(e.title || e.name, n)) : e.features ? (a = new OpenLayers.Layer.Vector(e.title || e.name, n)).addFeatures(e.features) : !0 !== e.categoryLayer && (a = new OpenLayers.Layer.WMS(e.title || e.name, e.url, s, n)), 
        a;
    },
    "getLayersFromContext": function(e) {
        for (var t = [], i = 0, n = e.length; i < n; i++) {
            var s = this.getLayerFromContext(e[i]);
            null !== s && t.push(s);
        }
        return t;
    },
    "contextToMap": function(e, t) {
        (t = OpenLayers.Util.applyDefaults({
            "maxExtent": e.maxExtent,
            "projection": e.projection,
            "units": e.units
        }, t)).maxExtent && (t.maxResolution = t.maxExtent.getWidth() / OpenLayers.Map.TILE_WIDTH);
        var i = {
            "contactInformation": e.contactInformation,
            "abstract": e.abstract,
            "keywords": e.keywords,
            "logo": e.logo,
            "descriptionURL": e.descriptionURL
        };
        t.metadata = i;
        var n = new OpenLayers.Map(t);
        return n.addLayers(this.getLayersFromContext(e.layersContext)), n.setCenter(e.bounds.getCenterLonLat(), n.getZoomForExtent(e.bounds, !0)), 
        n;
    },
    "mergeContextToMap": function(e, t) {
        return t.addLayers(this.getLayersFromContext(e.layersContext)), t;
    },
    "write": function(e, t) {
        return e = this.toContext(e), OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Format.Context"
}), OpenLayers.Format.Context.serviceTypes = {
    "WMS": "urn:ogc:serviceType:WMS",
    "WFS": "urn:ogc:serviceType:WFS",
    "WCS": "urn:ogc:serviceType:WCS",
    "GML": "urn:ogc:serviceType:GML",
    "SLD": "urn:ogc:serviceType:SLD",
    "FES": "urn:ogc:serviceType:FES",
    "KML": "urn:ogc:serviceType:KML"
}, OpenLayers.Format.CQL = function() {
    function e(e, t) {
        return t instanceof RegExp ? t.exec(e) : t(e);
    }
    function t(t, i) {
        var n, s, o = i.length;
        for (n = 0; n < o; n++) {
            s = i[n];
            var a = e(t, r[s]);
            if (a) {
                var l = a[0];
                return {
                    "type": s,
                    "text": l,
                    "remainder": t.substr(l.length).replace(/^\s*/, "")
                };
            }
        }
        var h = "ERROR: In parsing: [" + t + "], expected one of: ";
        for (n = 0; n < o; n++) h += "\n    " + (s = i[n]) + ": " + r[s];
        throw new Error(h);
    }
    function i(e) {
        var i, n = [], s = [ "NOT", "GEOMETRY", "SPATIAL", "PROPERTY", "LPAREN" ];
        do {
            if (i = t(e, s), e = i.remainder, s = o[i.type], "END" != i.type && !s) throw new Error("No follows list for " + i.type);
            n.push(i);
        } while ("END" != i.type);
        return n;
    }
    function n(e) {
        function t() {
            var e = n.pop();
            switch (e.type) {
              case "LOGICAL":
                var i = t(), s = t();
                return new OpenLayers.Filter.Logical({
                    "filters": [ s, i ],
                    "type": h[e.text.toUpperCase()]
                });

              case "NOT":
                var r = t();
                return new OpenLayers.Filter.Logical({
                    "filters": [ r ],
                    "type": OpenLayers.Filter.Logical.NOT
                });

              case "BETWEEN":
                var o, l;
                return n.pop(), l = t(), o = t(), u = t(), new OpenLayers.Filter.Comparison({
                    "property": u,
                    "lowerBoundary": o,
                    "upperBoundary": l,
                    "type": OpenLayers.Filter.Comparison.BETWEEN
                });

              case "COMPARISON":
                var c = t(), u = t();
                return new OpenLayers.Filter.Comparison({
                    "property": u,
                    "value": c,
                    "type": a[e.text.toUpperCase()]
                });

              case "IS_NULL":
                u = t();
                return new OpenLayers.Filter.Comparison({
                    "property": u,
                    "type": a[e.text.toUpperCase()]
                });

              case "VALUE":
                var p = e.text.match(/^'(.*)'$/);
                return p ? p[1].replace(/''/g, "'") : Number(e.text);

              case "SPATIAL":
                switch (e.text.toUpperCase()) {
                  case "BBOX":
                    var d = t(), f = t(), m = t(), g = t(), y = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.BBOX,
                        "property": y,
                        "value": OpenLayers.Bounds.fromArray([ g, m, f, d ])
                    });

                  case "INTERSECTS":
                    var c = t(), u = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.INTERSECTS,
                        "property": u,
                        "value": c
                    });

                  case "WITHIN":
                    var c = t(), u = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.WITHIN,
                        "property": u,
                        "value": c
                    });

                  case "CONTAINS":
                    var c = t(), u = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.CONTAINS,
                        "property": u,
                        "value": c
                    });

                  case "DWITHIN":
                    var v = t(), c = t(), u = t();
                    return new OpenLayers.Filter.Spatial({
                        "type": OpenLayers.Filter.Spatial.DWITHIN,
                        "value": c,
                        "property": u,
                        "distance": Number(v)
                    });
                }

              case "GEOMETRY":
                return OpenLayers.Geometry.fromWKT(e.text);

              default:
                return e.text;
            }
        }
        for (var i = [], n = []; e.length; ) {
            var s = e.shift();
            switch (s.type) {
              case "PROPERTY":
              case "GEOMETRY":
              case "VALUE":
                n.push(s);
                break;

              case "COMPARISON":
              case "BETWEEN":
              case "IS_NULL":
              case "LOGICAL":
                for (var r = u[s.type]; i.length > 0 && u[i[i.length - 1].type] <= r; ) n.push(i.pop());
                i.push(s);
                break;

              case "SPATIAL":
              case "NOT":
              case "LPAREN":
                i.push(s);
                break;

              case "RPAREN":
                for (;i.length > 0 && "LPAREN" != i[i.length - 1].type; ) n.push(i.pop());
                i.pop(), i.length > 0 && "SPATIAL" == i[i.length - 1].type && n.push(i.pop());

              case "COMMA":
              case "END":
                break;

              default:
                throw new Error("Unknown token type " + s.type);
            }
        }
        for (;i.length > 0; ) n.push(i.pop());
        var o = t();
        if (n.length > 0) {
            for (var l = "Remaining tokens after building AST: \n", c = n.length - 1; c >= 0; c--) l += n[c].type + ": " + n[c].text + "\n";
            throw new Error(l);
        }
        return o;
    }
    var s, r = {
        "PROPERTY": /^[_a-zA-Z]\w*/,
        "COMPARISON": /^(=|<>|<=|<|>=|>|LIKE)/i,
        "IS_NULL": /^IS NULL/i,
        "COMMA": /^,/,
        "LOGICAL": /^(AND|OR)/i,
        "VALUE": /^('([^']|'')*'|-?\d+(\.\d*)?|\.\d+)/,
        "LPAREN": /^\(/,
        "RPAREN": /^\)/,
        "SPATIAL": /^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,
        "NOT": /^NOT/i,
        "BETWEEN": /^BETWEEN/i,
        "GEOMETRY": function(e) {
            var t = /^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e);
            if (t) {
                var i = e.length, n = e.indexOf("(", t[0].length);
                if (n > -1) for (var s = 1; n < i && s > 0; ) switch (n++, e.charAt(n)) {
                  case "(":
                    s++;
                    break;

                  case ")":
                    s--;
                }
                return [ e.substr(0, n + 1) ];
            }
        },
        "END": /^$/
    }, o = {
        "LPAREN": [ "GEOMETRY", "SPATIAL", "PROPERTY", "VALUE", "LPAREN" ],
        "RPAREN": [ "NOT", "LOGICAL", "END", "RPAREN" ],
        "PROPERTY": [ "COMPARISON", "BETWEEN", "COMMA", "IS_NULL" ],
        "BETWEEN": [ "VALUE" ],
        "IS_NULL": [ "END" ],
        "COMPARISON": [ "VALUE" ],
        "COMMA": [ "GEOMETRY", "VALUE", "PROPERTY" ],
        "VALUE": [ "LOGICAL", "COMMA", "RPAREN", "END" ],
        "SPATIAL": [ "LPAREN" ],
        "LOGICAL": [ "NOT", "VALUE", "SPATIAL", "PROPERTY", "LPAREN" ],
        "NOT": [ "PROPERTY", "LPAREN" ],
        "GEOMETRY": [ "COMMA", "RPAREN" ]
    }, a = {
        "=": OpenLayers.Filter.Comparison.EQUAL_TO,
        "<>": OpenLayers.Filter.Comparison.NOT_EQUAL_TO,
        "<": OpenLayers.Filter.Comparison.LESS_THAN,
        "<=": OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,
        ">": OpenLayers.Filter.Comparison.GREATER_THAN,
        ">=": OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,
        "LIKE": OpenLayers.Filter.Comparison.LIKE,
        "BETWEEN": OpenLayers.Filter.Comparison.BETWEEN,
        "IS NULL": OpenLayers.Filter.Comparison.IS_NULL
    }, l = {}, h = {
        "AND": OpenLayers.Filter.Logical.AND,
        "OR": OpenLayers.Filter.Logical.OR
    }, c = {}, u = {
        "RPAREN": 3,
        "LOGICAL": 2,
        "COMPARISON": 1
    };
    for (s in a) a.hasOwnProperty(s) && (l[a[s]] = s);
    for (s in h) h.hasOwnProperty(s) && (c[h[s]] = s);
    return OpenLayers.Class(OpenLayers.Format, {
        "read": function(e) {
            var t = n(i(e));
            return this.keepData && (this.data = t), t;
        },
        "write": function(e) {
            if (e instanceof OpenLayers.Geometry) return e.toString();
            switch (e.CLASS_NAME) {
              case "OpenLayers.Filter.Spatial":
                switch (e.type) {
                  case OpenLayers.Filter.Spatial.BBOX:
                    return "BBOX(" + e.property + "," + e.value.toBBOX() + ")";

                  case OpenLayers.Filter.Spatial.DWITHIN:
                    return "DWITHIN(" + e.property + ", " + this.write(e.value) + ", " + e.distance + ")";

                  case OpenLayers.Filter.Spatial.WITHIN:
                    return "WITHIN(" + e.property + ", " + this.write(e.value) + ")";

                  case OpenLayers.Filter.Spatial.INTERSECTS:
                    return "INTERSECTS(" + e.property + ", " + this.write(e.value) + ")";

                  case OpenLayers.Filter.Spatial.CONTAINS:
                    return "CONTAINS(" + e.property + ", " + this.write(e.value) + ")";

                  default:
                    throw new Error("Unknown spatial filter type: " + e.type);
                }

              case "OpenLayers.Filter.Logical":
                if (e.type == OpenLayers.Filter.Logical.NOT) return "NOT (" + this.write(e.filters[0]) + ")";
                for (var t = "(", i = !0, n = 0; n < e.filters.length; n++) i ? i = !1 : t += ") " + c[e.type] + " (", 
                t += this.write(e.filters[n]);
                return t + ")";

              case "OpenLayers.Filter.Comparison":
                return e.type == OpenLayers.Filter.Comparison.BETWEEN ? e.property + " BETWEEN " + this.write(e.lowerBoundary) + " AND " + this.write(e.upperBoundary) : null !== e.value ? e.property + " " + l[e.type] + " " + this.write(e.value) : e.property + " " + l[e.type];

              case void 0:
                if ("string" == typeof e) return "'" + e.replace(/'/g, "''") + "'";
                if ("number" == typeof e) return String(e);

              default:
                throw new Error("Can't encode: " + e.CLASS_NAME + " " + e);
            }
        },
        "CLASS_NAME": "OpenLayers.Format.CQL"
    });
}(), OpenLayers.Format.CSWGetDomain = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Format.CSWGetDomain.DEFAULTS);
    var t = OpenLayers.Format.CSWGetDomain["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported CSWGetDomain version: " + e.version;
    return new t(e);
}, OpenLayers.Format.CSWGetDomain.DEFAULTS = {
    "version": "2.0.2"
}, OpenLayers.Format.CSWGetRecords = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Format.CSWGetRecords.DEFAULTS);
    var t = OpenLayers.Format.CSWGetRecords["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported CSWGetRecords version: " + e.version;
    return new t(e);
}, OpenLayers.Format.CSWGetRecords.DEFAULTS = {
    "version": "2.0.2"
}, OpenLayers.Format.EncodedPolyline = OpenLayers.Class(OpenLayers.Format, {
    "geometryType": "linestring",
    "initialize": function(e) {
        OpenLayers.Format.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        var t;
        if ("linestring" == this.geometryType) t = OpenLayers.Geometry.LineString; else if ("linearring" == this.geometryType) t = OpenLayers.Geometry.LinearRing; else if ("multipoint" == this.geometryType) t = OpenLayers.Geometry.MultiPoint; else if ("point" != this.geometryType && "polygon" != this.geometryType) return null;
        for (var i = this.decodeDeltas(e, 2), n = i.length, s = [], r = 0; r + 1 < n; ) {
            var o = i[r++], a = i[r++];
            s.push(new OpenLayers.Geometry.Point(a, o));
        }
        return "point" == this.geometryType ? new OpenLayers.Feature.Vector(s[0]) : "polygon" == this.geometryType ? new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing(s) ])) : new OpenLayers.Feature.Vector(new t(s));
    },
    "decode": function(e, t, i) {
        for (var n = i || 1e5, s = this.decodeDeltas(e, t, n), r = s.length, o = [], a = 0; a + (t - 1) < r; ) {
            for (var l = [], h = 0; h < t; ++h) l.push(s[a++]);
            o.push(l);
        }
        return o;
    },
    "write": function(e) {
        var t, i, n = (t = e.constructor == Array ? e[0] : e).geometry, s = n.CLASS_NAME.split(".")[2].toLowerCase();
        if ("point" == s) i = new Array(n); else if ("linestring" == s || "linearring" == s || "multipoint" == s) i = n.components; else {
            if ("polygon" != s) return null;
            i = n.components[0].components;
        }
        for (var r = [], o = i.length, a = 0; a < o; ++a) {
            var l = i[a];
            r.push(l.y), r.push(l.x);
        }
        return this.encodeDeltas(r, 2);
    },
    "encode": function(e, t, i) {
        for (var n = i || 1e5, s = [], r = e.length, o = 0; o < r; ++o) for (var a = e[o], l = 0; l < t; ++l) s.push(a[l]);
        return this.encodeDeltas(s, t, n);
    },
    "encodeDeltas": function(e, t, i) {
        var n, s = i || 1e5, r = new Array(t);
        for (n = 0; n < t; ++n) r[n] = 0;
        for (var o = e.length, a = 0; a < o; ) for (n = 0; n < t; ++n, ++a) {
            var l = e[a], h = l - r[n];
            r[n] = l, e[a] = h;
        }
        return this.encodeFloats(e, s);
    },
    "decodeDeltas": function(e, t, i) {
        var n, s = i || 1e5, r = new Array(t);
        for (n = 0; n < t; ++n) r[n] = 0;
        for (var o = this.decodeFloats(e, s), a = o.length, l = 0; l < a; ) for (n = 0; n < t; ++n, 
        ++l) r[n] += o[l], o[l] = r[n];
        return o;
    },
    "encodeFloats": function(e, t) {
        for (var i = t || 1e5, n = e.length, s = 0; s < n; ++s) e[s] = Math.round(e[s] * i);
        return this.encodeSignedIntegers(e);
    },
    "decodeFloats": function(e, t) {
        for (var i = t || 1e5, n = this.decodeSignedIntegers(e), s = n.length, r = 0; r < s; ++r) n[r] /= i;
        return n;
    },
    "encodeSignedIntegers": function(e) {
        for (var t = e.length, i = 0; i < t; ++i) {
            var n = e[i], s = n << 1;
            n < 0 && (s = ~s), e[i] = s;
        }
        return this.encodeUnsignedIntegers(e);
    },
    "decodeSignedIntegers": function(e) {
        for (var t = this.decodeUnsignedIntegers(e), i = t.length, n = 0; n < i; ++n) {
            var s = t[n];
            t[n] = 1 & s ? ~(s >> 1) : s >> 1;
        }
        return t;
    },
    "encodeUnsignedIntegers": function(e) {
        for (var t = "", i = e.length, n = 0; n < i; ++n) t += this.encodeUnsignedInteger(e[n]);
        return t;
    },
    "decodeUnsignedIntegers": function(e) {
        for (var t = [], i = 0, n = 0, s = e.length, r = 0; r < s; ++r) {
            var o = e.charCodeAt(r) - 63;
            i |= (31 & o) << n, o < 32 ? (t.push(i), i = 0, n = 0) : n += 5;
        }
        return t;
    },
    "encodeFloat": function(e, t) {
        return e = Math.round(e * (t || 1e5)), this.encodeSignedInteger(e);
    },
    "decodeFloat": function(e, t) {
        return this.decodeSignedInteger(e) / (t || 1e5);
    },
    "encodeSignedInteger": function(e) {
        var t = e << 1;
        return e < 0 && (t = ~t), this.encodeUnsignedInteger(t);
    },
    "decodeSignedInteger": function(e) {
        var t = this.decodeUnsignedInteger(e);
        return 1 & t ? ~(t >> 1) : t >> 1;
    },
    "encodeUnsignedInteger": function(e) {
        for (var t, i = ""; e >= 32; ) t = 63 + (32 | 31 & e), i += String.fromCharCode(t), 
        e >>= 5;
        return t = e + 63, i += String.fromCharCode(t);
    },
    "decodeUnsignedInteger": function(e) {
        for (var t = 0, i = 0, n = e.length, s = 0; s < n; ++s) {
            var r = e.charCodeAt(s) - 63;
            if (t |= (31 & r) << i, r < 32) break;
            i += 5;
        }
        return t;
    },
    "CLASS_NAME": "OpenLayers.Format.EncodedPolyline"
}), OpenLayers.Format.GeoRSS = OpenLayers.Class(OpenLayers.Format.XML, {
    "rssns": "http://backend.userland.com/rss2",
    "featureNS": "http://mapserver.gis.umn.edu/mapserver",
    "georssns": "http://www.georss.org/georss",
    "geons": "http://www.w3.org/2003/01/geo/wgs84_pos#",
    "featureTitle": "Untitled",
    "featureDescription": "No Description",
    "gmlParser": null,
    "xy": !1,
    "createGeometryFromItem": function(e) {
        var t = this.getElementsByTagNameNS(e, this.georssns, "point"), i = this.getElementsByTagNameNS(e, this.geons, "lat"), n = this.getElementsByTagNameNS(e, this.geons, "long"), s = this.getElementsByTagNameNS(e, this.georssns, "line"), r = this.getElementsByTagNameNS(e, this.georssns, "polygon"), o = this.getElementsByTagNameNS(e, this.georssns, "where"), a = this.getElementsByTagNameNS(e, this.georssns, "box");
        if (t.length > 0 || i.length > 0 && n.length > 0) {
            var l;
            t.length > 0 ? 2 != (l = OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s+/)).length && (l = OpenLayers.String.trim(t[0].firstChild.nodeValue).split(/\s*,\s*/)) : l = [ parseFloat(i[0].firstChild.nodeValue), parseFloat(n[0].firstChild.nodeValue) ];
            var h = new OpenLayers.Geometry.Point(l[1], l[0]);
        } else if (s.length > 0) {
            for (var c = [], u = 0, p = (d = OpenLayers.String.trim(this.getChildValue(s[0])).split(/\s+/)).length; u < p; u += 2) t = new OpenLayers.Geometry.Point(d[u + 1], d[u]), 
            c.push(t);
            h = new OpenLayers.Geometry.LineString(c);
        } else if (r.length > 0) {
            for (var c = [], u = 0, p = (d = OpenLayers.String.trim(this.getChildValue(r[0])).split(/\s+/)).length; u < p; u += 2) t = new OpenLayers.Geometry.Point(d[u + 1], d[u]), 
            c.push(t);
            h = new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing(c) ]);
        } else if (o.length > 0) this.gmlParser || (this.gmlParser = new OpenLayers.Format.GML({
            "xy": this.xy
        })), h = this.gmlParser.parseFeature(o[0]).geometry; else if (a.length > 0) {
            var d = OpenLayers.String.trim(a[0].firstChild.nodeValue).split(/\s+/), c = [];
            d.length > 3 && (t = new OpenLayers.Geometry.Point(d[1], d[0]), c.push(t), t = new OpenLayers.Geometry.Point(d[1], d[2]), 
            c.push(t), t = new OpenLayers.Geometry.Point(d[3], d[2]), c.push(t), t = new OpenLayers.Geometry.Point(d[3], d[0]), 
            c.push(t), t = new OpenLayers.Geometry.Point(d[1], d[0]), c.push(t)), h = new OpenLayers.Geometry.Polygon([ new OpenLayers.Geometry.LinearRing(c) ]);
        }
        return h && this.internalProjection && this.externalProjection && h.transform(this.externalProjection, this.internalProjection), 
        h;
    },
    "createFeatureFromItem": function(e) {
        var t = this.createGeometryFromItem(e), i = this._getChildValue(e, "*", "title", this.featureTitle), n = this._getChildValue(e, "*", "description", this._getChildValue(e, "*", "content", this._getChildValue(e, "*", "summary", this.featureDescription))), s = this._getChildValue(e, "*", "link");
        if (!s) try {
            s = this.getElementsByTagNameNS(e, "*", "link")[0].getAttribute("href");
        } catch (e) {
            s = null;
        }
        var r = this._getChildValue(e, "*", "id", null), o = {
            "title": i,
            "description": n,
            "link": s
        }, a = new OpenLayers.Feature.Vector(t, o);
        return a.fid = r, a;
    },
    "_getChildValue": function(e, t, i, n) {
        var s = this.getElementsByTagNameNS(e, t, i);
        return s && s[0] && s[0].firstChild && s[0].firstChild.nodeValue ? this.getChildValue(s[0]) : void 0 == n ? "" : n;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = null;
        0 == (t = this.getElementsByTagNameNS(e, "*", "item")).length && (t = this.getElementsByTagNameNS(e, "*", "entry"));
        for (var i = t.length, n = new Array(i), s = 0; s < i; s++) n[s] = this.createFeatureFromItem(t[s]);
        return n;
    },
    "write": function(e) {
        var t;
        if (OpenLayers.Util.isArray(e)) {
            t = this.createElementNS(this.rssns, "rss");
            for (var i = 0, n = e.length; i < n; i++) t.appendChild(this.createFeatureXML(e[i]));
        } else t = this.createFeatureXML(e);
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFeatureXML": function(e) {
        var t = this.buildGeometryNode(e.geometry), i = this.createElementNS(this.rssns, "item"), n = this.createElementNS(this.rssns, "title");
        n.appendChild(this.createTextNode(e.attributes.title ? e.attributes.title : ""));
        var s = this.createElementNS(this.rssns, "description");
        if (s.appendChild(this.createTextNode(e.attributes.description ? e.attributes.description : "")), 
        i.appendChild(n), i.appendChild(s), e.attributes.link) {
            var r = this.createElementNS(this.rssns, "link");
            r.appendChild(this.createTextNode(e.attributes.link)), i.appendChild(r);
        }
        for (var o in e.attributes) if ("link" != o && "title" != o && "description" != o) {
            var a = this.createTextNode(e.attributes[o]), l = o;
            -1 != o.search(":") && (l = o.split(":")[1]);
            var h = this.createElementNS(this.featureNS, "feature:" + l);
            h.appendChild(a), i.appendChild(h);
        }
        return i.appendChild(t), i;
    },
    "buildGeometryNode": function(e) {
        this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection);
        var t;
        if ("OpenLayers.Geometry.Polygon" == e.CLASS_NAME) (t = this.createElementNS(this.georssns, "georss:polygon")).appendChild(this.buildCoordinatesNode(e.components[0])); else if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME) (t = this.createElementNS(this.georssns, "georss:line")).appendChild(this.buildCoordinatesNode(e)); else {
            if ("OpenLayers.Geometry.Point" != e.CLASS_NAME) throw "Couldn't parse " + e.CLASS_NAME;
            (t = this.createElementNS(this.georssns, "georss:point")).appendChild(this.buildCoordinatesNode(e));
        }
        return t;
    },
    "buildCoordinatesNode": function(e) {
        var t = null;
        e.components && (t = e.components);
        var i;
        if (t) {
            for (var n = t.length, s = new Array(n), r = 0; r < n; r++) s[r] = t[r].y + " " + t[r].x;
            i = s.join(" ");
        } else i = e.y + " " + e.x;
        return this.createTextNode(i);
    },
    "CLASS_NAME": "OpenLayers.Format.GeoRSS"
}), OpenLayers.Format.GPX = OpenLayers.Class(OpenLayers.Format.XML, {
    "defaultDesc": "No description available",
    "extractWaypoints": !0,
    "extractTracks": !0,
    "extractRoutes": !0,
    "extractAttributes": !0,
    "namespaces": {
        "gpx": "http://www.topografix.com/GPX/1/1",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "schemaLocation": "http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",
    "creator": "OpenLayers",
    "initialize": function(e) {
        this.externalProjection = new OpenLayers.Projection("EPSG:4326"), OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = [];
        if (this.extractTracks) for (var i = e.getElementsByTagName("trk"), n = 0, s = i.length; n < s; n++) {
            m = {};
            this.extractAttributes && (m = this.parseAttributes(i[n]));
            for (var r = this.getElementsByTagNameNS(i[n], i[n].namespaceURI, "trkseg"), o = 0, a = r.length; o < a; o++) {
                var l = this.extractSegment(r[o], "trkpt");
                t.push(new OpenLayers.Feature.Vector(l, m));
            }
        }
        if (this.extractRoutes) for (var h = e.getElementsByTagName("rte"), c = 0, u = h.length; c < u; c++) {
            m = {};
            this.extractAttributes && (m = this.parseAttributes(h[c]));
            var p = this.extractSegment(h[c], "rtept");
            t.push(new OpenLayers.Feature.Vector(p, m));
        }
        if (this.extractWaypoints) for (var d = e.getElementsByTagName("wpt"), f = 0, s = d.length; f < s; f++) {
            var m = {};
            this.extractAttributes && (m = this.parseAttributes(d[f]));
            var g = new OpenLayers.Geometry.Point(d[f].getAttribute("lon"), d[f].getAttribute("lat"));
            t.push(new OpenLayers.Feature.Vector(g, m));
        }
        if (this.internalProjection && this.externalProjection) for (var y = 0, v = t.length; y < v; y++) t[y].geometry.transform(this.externalProjection, this.internalProjection);
        return t;
    },
    "extractSegment": function(e, t) {
        for (var i = this.getElementsByTagNameNS(e, e.namespaceURI, t), n = [], s = 0, r = i.length; s < r; s++) n.push(new OpenLayers.Geometry.Point(i[s].getAttribute("lon"), i[s].getAttribute("lat")));
        return new OpenLayers.Geometry.LineString(n);
    },
    "parseAttributes": function(e) {
        for (var t, i, n = {}, s = e.firstChild; s; ) 1 == s.nodeType && s.firstChild && (3 != (t = s.firstChild).nodeType && 4 != t.nodeType || "trkseg" != (i = s.prefix ? s.nodeName.split(":")[1] : s.nodeName) && "rtept" != i && (n[i] = t.nodeValue)), 
        s = s.nextSibling;
        return n;
    },
    "write": function(e, t) {
        e = OpenLayers.Util.isArray(e) ? e : [ e ];
        var i = this.createElementNS(this.namespaces.gpx, "gpx");
        i.setAttribute("version", "1.1"), i.setAttribute("creator", this.creator), this.setAttributes(i, {
            "xsi:schemaLocation": this.schemaLocation
        }), t && "object" == typeof t && i.appendChild(this.buildMetadataNode(t));
        for (var n = 0, s = e.length; n < s; n++) i.appendChild(this.buildFeatureNode(e[n]));
        return OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "buildMetadataNode": function(e) {
        for (var t = [ "name", "desc", "author" ], i = this.createElementNS(this.namespaces.gpx, "metadata"), n = 0; n < t.length; n++) {
            var s = t[n];
            if (e[s]) {
                var r = this.createElementNS(this.namespaces.gpx, s);
                r.appendChild(this.createTextNode(e[s])), i.appendChild(r);
            }
        }
        return i;
    },
    "buildFeatureNode": function(e) {
        var t = e.geometry;
        if (t = t.clone(), this.internalProjection && this.externalProjection && t.transform(this.internalProjection, this.externalProjection), 
        "OpenLayers.Geometry.Point" == t.CLASS_NAME) {
            var i = this.buildWptNode(t);
            return this.appendAttributesNode(i, e), i;
        }
        var n = this.createElementNS(this.namespaces.gpx, "trk");
        this.appendAttributesNode(n, e);
        for (var s = this.buildTrkSegNode(t), r = 0, o = (s = OpenLayers.Util.isArray(s) ? s : [ s ]).length; r < o; r++) n.appendChild(s[r]);
        return n;
    },
    "buildTrkSegNode": function(e) {
        var t, i, n, s, r;
        if ("OpenLayers.Geometry.LineString" == e.CLASS_NAME || "OpenLayers.Geometry.LinearRing" == e.CLASS_NAME) {
            for (t = this.createElementNS(this.namespaces.gpx, "trkseg"), i = 0, n = e.components.length; i < n; i++) s = e.components[i], 
            t.appendChild(this.buildTrkPtNode(s));
            return t;
        }
        for (r = [], i = 0, n = e.components.length; i < n; i++) r.push(this.buildTrkSegNode(e.components[i]));
        return r;
    },
    "buildTrkPtNode": function(e) {
        var t = this.createElementNS(this.namespaces.gpx, "trkpt");
        return t.setAttribute("lon", e.x), t.setAttribute("lat", e.y), t;
    },
    "buildWptNode": function(e) {
        var t = this.createElementNS(this.namespaces.gpx, "wpt");
        return t.setAttribute("lon", e.x), t.setAttribute("lat", e.y), t;
    },
    "appendAttributesNode": function(e, t) {
        var i = this.createElementNS(this.namespaces.gpx, "name");
        i.appendChild(this.createTextNode(t.attributes.name || t.id)), e.appendChild(i);
        var n = this.createElementNS(this.namespaces.gpx, "desc");
        n.appendChild(this.createTextNode(t.attributes.description || t.attributes.desc || this.defaultDesc)), 
        e.appendChild(n);
    },
    "CLASS_NAME": "OpenLayers.Format.GPX"
}), OpenLayers.Format.KML = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "kml": "http://www.opengis.net/kml/2.2",
        "gx": "http://www.google.com/kml/ext/2.2"
    },
    "kmlns": "http://earth.google.com/kml/2.0",
    "placemarksDesc": "No description available",
    "foldersName": "OpenLayers export",
    "foldersDesc": "Exported on " + new Date(),
    "extractAttributes": !0,
    "kvpAttributes": !1,
    "extractStyles": !1,
    "extractTracks": !1,
    "trackAttributes": null,
    "internalns": null,
    "features": null,
    "styles": null,
    "styleBaseUrl": "",
    "fetched": null,
    "maxDepth": 0,
    "initialize": function(e) {
        this.regExes = {
            "trimSpace": /^\s*|\s*$/g,
            "removeSpace": /\s*/g,
            "splitSpace": /\s+/,
            "trimComma": /\s*,\s*/g,
            "kmlColor": /(\w{2})(\w{2})(\w{2})(\w{2})/,
            "kmlIconPalette": /root:\/\/icons\/palette-(\d+)(\.\w+)/,
            "straightBracket": /\$\[(.*?)\]/g
        }, this.externalProjection = new OpenLayers.Projection("EPSG:4326"), OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        this.features = [], this.styles = {}, this.fetched = {};
        var t = {
            "depth": 0,
            "styleBaseUrl": this.styleBaseUrl
        };
        return this.parseData(e, t);
    },
    "parseData": function(e, t) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        for (var i = [ "Link", "NetworkLink", "Style", "StyleMap", "Placemark" ], n = 0, s = i.length; n < s; ++n) {
            var r = i[n], o = this.getElementsByTagNameNS(e, "*", r);
            if (0 != o.length) switch (r.toLowerCase()) {
              case "link":
              case "networklink":
                this.parseLinks(o, t);
                break;

              case "style":
                this.extractStyles && this.parseStyles(o, t);
                break;

              case "stylemap":
                this.extractStyles && this.parseStyleMaps(o, t);
                break;

              case "placemark":
                this.parseFeatures(o, t);
            }
        }
        return this.features;
    },
    "parseLinks": function(e, t) {
        if (t.depth >= this.maxDepth) return !1;
        var i = OpenLayers.Util.extend({}, t);
        i.depth++;
        for (var n = 0, s = e.length; n < s; n++) {
            var r = this.parseProperty(e[n], "*", "href");
            if (r && !this.fetched[r]) {
                this.fetched[r] = !0;
                var o = this.fetchLink(r);
                o && this.parseData(o, i);
            }
        }
    },
    "fetchLink": function(e) {
        var t = OpenLayers.Request.GET({
            "url": e,
            "async": !1
        });
        if (t) return t.responseText;
    },
    "parseStyles": function(e, t) {
        for (var i = 0, n = e.length; i < n; i++) {
            var s = this.parseStyle(e[i]);
            if (s) {
                var r = (t.styleBaseUrl || "") + "#" + s.id;
                this.styles[r] = s;
            }
        }
    },
    "parseKmlColor": function(e) {
        var t = null;
        if (e) {
            var i = e.match(this.regExes.kmlColor);
            i && (t = {
                "color": "#" + i[4] + i[3] + i[2],
                "opacity": parseInt(i[1], 16) / 255
            });
        }
        return t;
    },
    "parseStyle": function(e) {
        for (var t, i, n = {}, s = [ "LineStyle", "PolyStyle", "IconStyle", "BalloonStyle", "LabelStyle" ], r = 0, o = s.length; r < o; ++r) if (t = s[r], 
        i = this.getElementsByTagNameNS(e, "*", t)[0]) switch (t.toLowerCase()) {
          case "linestyle":
            S = this.parseProperty(i, "*", "color");
            (x = this.parseKmlColor(S)) && (n.strokeColor = x.color, n.strokeOpacity = x.opacity), 
            (l = this.parseProperty(i, "*", "width")) && (n.strokeWidth = l);
            break;

          case "polystyle":
            S = this.parseProperty(i, "*", "color");
            (x = this.parseKmlColor(S)) && (n.fillOpacity = x.opacity, n.fillColor = x.color), 
            "0" == this.parseProperty(i, "*", "fill") && (n.fillColor = "none"), "0" == this.parseProperty(i, "*", "outline") && (n.strokeWidth = "0");
            break;

          case "iconstyle":
            var a = parseFloat(this.parseProperty(i, "*", "scale") || 1), l = 32 * a, h = 32 * a, c = this.getElementsByTagNameNS(i, "*", "Icon")[0];
            if (c) {
                var u = this.parseProperty(c, "*", "href");
                if (u) {
                    var p = this.parseProperty(c, "*", "w"), d = this.parseProperty(c, "*", "h");
                    !OpenLayers.String.startsWith(u, "http://maps.google.com/mapfiles/kml") || p || d || (p = 64, 
                    d = 64, a /= 2), p = p || d, d = d || p, p && (l = parseInt(p) * a), d && (h = parseInt(d) * a);
                    var f = u.match(this.regExes.kmlIconPalette);
                    if (f) {
                        var m = f[1], g = f[2], y = this.parseProperty(c, "*", "x"), v = this.parseProperty(c, "*", "y"), L = y ? y / 32 : 0;
                        u = "http://maps.google.com/mapfiles/kml/pal" + m + "/icon" + (8 * (v ? 7 - v / 32 : 7) + L) + g;
                    }
                    n.graphicOpacity = 1, n.externalGraphic = u;
                }
            }
            var w = this.getElementsByTagNameNS(i, "*", "hotSpot")[0];
            if (w) {
                var y = parseFloat(w.getAttribute("x")), v = parseFloat(w.getAttribute("y")), b = w.getAttribute("xunits");
                "pixels" == b ? n.graphicXOffset = -y * a : "insetPixels" == b ? n.graphicXOffset = y * a - l : "fraction" == b && (n.graphicXOffset = -l * y);
                var C = w.getAttribute("yunits");
                "pixels" == C ? n.graphicYOffset = v * a - h + 1 : "insetPixels" == C ? n.graphicYOffset = -v * a + 1 : "fraction" == C && (n.graphicYOffset = -h * (1 - v) + 1);
            }
            n.graphicWidth = l, n.graphicHeight = h;
            break;

          case "balloonstyle":
            var O = OpenLayers.Util.getXmlNodeValue(i);
            O && (n.balloonStyle = O.replace(this.regExes.straightBracket, "${$1}"));
            break;

          case "labelstyle":
            var S = this.parseProperty(i, "*", "color"), x = this.parseKmlColor(S);
            x && (n.fontColor = x.color, n.fontOpacity = x.opacity);
        }
        !n.strokeColor && n.fillColor && (n.strokeColor = n.fillColor);
        var E = e.getAttribute("id");
        return E && n && (n.id = E), n;
    },
    "parseStyleMaps": function(e, t) {
        for (var i = 0, n = e.length; i < n; i++) for (var s = e[i], r = this.getElementsByTagNameNS(s, "*", "Pair"), o = s.getAttribute("id"), a = 0, l = r.length; a < l; a++) {
            var h = r[a], c = this.parseProperty(h, "*", "key"), u = this.parseProperty(h, "*", "styleUrl");
            u && "normal" == c && (this.styles[(t.styleBaseUrl || "") + "#" + o] = this.styles[(t.styleBaseUrl || "") + u]);
        }
    },
    "parseFeatures": function(e, t) {
        for (var i = [], n = 0, s = e.length; n < s; n++) {
            var r = e[n], o = this.parseFeature.apply(this, [ r ]);
            if (!o) throw "Bad Placemark: " + n;
            if (this.extractStyles && o.attributes && o.attributes.styleUrl && (o.style = this.getStyle(o.attributes.styleUrl, t)), 
            this.extractStyles) {
                var a = this.getElementsByTagNameNS(r, "*", "Style")[0];
                if (a) {
                    var l = this.parseStyle(a);
                    l && (o.style = OpenLayers.Util.extend(o.style, l));
                }
            }
            if (this.extractTracks) {
                var h = this.getElementsByTagNameNS(r, this.namespaces.gx, "Track");
                if (h && h.length > 0) {
                    var c = h[0], u = {
                        "features": [],
                        "feature": o
                    };
                    this.readNode(c, u), u.features.length > 0 && i.push.apply(i, u.features);
                }
            } else i.push(o);
        }
        this.features = this.features.concat(i);
    },
    "readers": {
        "kml": {
            "when": function(e, t) {
                t.whens.push(OpenLayers.Date.parse(this.getChildValue(e)));
            },
            "_trackPointAttribute": function(e, t) {
                var i = e.nodeName.split(":").pop();
                t.attributes[i].push(this.getChildValue(e));
            }
        },
        "gx": {
            "Track": function(e, t) {
                var i = {
                    "whens": [],
                    "points": [],
                    "angles": []
                };
                if (this.trackAttributes) {
                    i.attributes = {};
                    for (var n = 0, s = this.trackAttributes.length; n < s; ++n) u = this.trackAttributes[n], 
                    i.attributes[u] = [], u in this.readers.kml || (this.readers.kml[u] = this.readers.kml._trackPointAttribute);
                }
                if (this.readChildNodes(e, i), i.whens.length !== i.points.length) throw new Error("gx:Track with unequal number of when (" + i.whens.length + ") and gx:coord (" + i.points.length + ") elements.");
                var r = i.angles.length > 0;
                if (r && i.whens.length !== i.angles.length) throw new Error("gx:Track with unequal number of when (" + i.whens.length + ") and gx:angles (" + i.angles.length + ") elements.");
                for (var o, a, l, n = 0, s = i.whens.length; n < s; ++n) {
                    if (o = t.feature.clone(), o.fid = t.feature.fid || t.feature.id, a = i.points[n], 
                    o.geometry = a, "z" in a && (o.attributes.altitude = a.z), this.internalProjection && this.externalProjection && o.geometry.transform(this.externalProjection, this.internalProjection), 
                    this.trackAttributes) for (var h = 0, c = this.trackAttributes.length; h < c; ++h) {
                        var u = this.trackAttributes[h];
                        o.attributes[u] = i.attributes[u][n];
                    }
                    o.attributes.when = i.whens[n], o.attributes.trackId = t.feature.id, r && (l = i.angles[n], 
                    o.attributes.heading = parseFloat(l[0]), o.attributes.tilt = parseFloat(l[1]), o.attributes.roll = parseFloat(l[2])), 
                    t.features.push(o);
                }
            },
            "coord": function(e, t) {
                var i = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(/\s+/), n = new OpenLayers.Geometry.Point(i[0], i[1]);
                i.length > 2 && (n.z = parseFloat(i[2])), t.points.push(n);
            },
            "angles": function(e, t) {
                var i = this.getChildValue(e).replace(this.regExes.trimSpace, "").split(/\s+/);
                t.angles.push(i);
            }
        }
    },
    "parseFeature": function(e) {
        for (var t, i, n, s, r = [ "MultiGeometry", "Polygon", "LineString", "Point" ], o = 0, a = r.length; o < a; ++o) if (t = r[o], 
        this.internalns = e.namespaceURI ? e.namespaceURI : this.kmlns, (i = this.getElementsByTagNameNS(e, this.internalns, t)).length > 0) {
            if (!(s = this.parseGeometry[t.toLowerCase()])) throw new TypeError("Unsupported geometry type: " + t);
            n = s.apply(this, [ i[0] ]), this.internalProjection && this.externalProjection && n.transform(this.externalProjection, this.internalProjection);
            break;
        }
        var l;
        this.extractAttributes && (l = this.parseAttributes(e));
        var h = new OpenLayers.Feature.Vector(n, l), c = e.getAttribute("id") || e.getAttribute("name");
        return null != c && (h.fid = c), h;
    },
    "getStyle": function(e, t) {
        var i = OpenLayers.Util.removeTail(e), n = OpenLayers.Util.extend({}, t);
        if (n.depth++, n.styleBaseUrl = i, !this.styles[e] && !OpenLayers.String.startsWith(e, "#") && n.depth <= this.maxDepth && !this.fetched[i]) {
            var s = this.fetchLink(i);
            s && this.parseData(s, n);
        }
        return OpenLayers.Util.extend({}, this.styles[e]);
    },
    "parseGeometry": {
        "point": function(e) {
            var t = this.getElementsByTagNameNS(e, this.internalns, "coordinates"), i = [];
            if (t.length > 0) {
                var n = t[0].firstChild.nodeValue;
                i = (n = n.replace(this.regExes.removeSpace, "")).split(",");
            }
            if (!(i.length > 1)) throw "Bad coordinate string: " + n;
            return 2 == i.length && (i[2] = null), new OpenLayers.Geometry.Point(i[0], i[1], i[2]);
        },
        "linestring": function(e, t) {
            var i = this.getElementsByTagNameNS(e, this.internalns, "coordinates"), n = null;
            if (i.length > 0) {
                for (var s, r = this.getChildValue(i[0]), o = (r = (r = r.replace(this.regExes.trimSpace, "")).replace(this.regExes.trimComma, ",")).split(this.regExes.splitSpace), a = o.length, l = new Array(a), h = 0; h < a; ++h) {
                    if (s = o[h].split(","), !(s.length > 1)) throw "Bad LineString point coordinates: " + o[h];
                    2 == s.length && (s[2] = null), l[h] = new OpenLayers.Geometry.Point(s[0], s[1], s[2]);
                }
                if (!a) throw "Bad LineString coordinates: " + r;
                n = t ? new OpenLayers.Geometry.LinearRing(l) : new OpenLayers.Geometry.LineString(l);
            }
            return n;
        },
        "polygon": function(e) {
            var t = this.getElementsByTagNameNS(e, this.internalns, "LinearRing"), i = t.length, n = new Array(i);
            if (i > 0) for (var s, r = 0, o = t.length; r < o; ++r) {
                if (!(s = this.parseGeometry.linestring.apply(this, [ t[r], !0 ]))) throw "Bad LinearRing geometry: " + r;
                n[r] = s;
            }
            return new OpenLayers.Geometry.Polygon(n);
        },
        "multigeometry": function(e) {
            for (var t, i, n = [], s = e.childNodes, r = 0, o = s.length; r < o; ++r) if (1 == (t = s[r]).nodeType) {
                var a = t.prefix ? t.nodeName.split(":")[1] : t.nodeName;
                (i = this.parseGeometry[a.toLowerCase()]) && n.push(i.apply(this, [ t ]));
            }
            return new OpenLayers.Geometry.Collection(n);
        }
    },
    "parseAttributes": function(e) {
        var t = {}, i = e.getElementsByTagName("ExtendedData");
        i.length && (t = this.parseExtendedData(i[0]));
        for (var n, s, r = e.childNodes, o = 0, a = r.length; o < a; ++o) if (1 == (n = r[o]).nodeType && (s = n.childNodes).length >= 1 && s.length <= 3) {
            var l;
            switch (s.length) {
              case 1:
                l = s[0];
                break;

              case 2:
                var h = s[0], c = s[1];
                l = 3 == h.nodeType || 4 == h.nodeType ? h : c;
                break;

              case 3:
              default:
                l = s[1];
            }
            if (3 == l.nodeType || 4 == l.nodeType) {
                var u = n.prefix ? n.nodeName.split(":")[1] : n.nodeName, p = OpenLayers.Util.getXmlNodeValue(l);
                p && (p = p.replace(this.regExes.trimSpace, ""), t[u] = p);
            }
        }
        return t;
    },
    "parseExtendedData": function(e) {
        var t, i, n, s, r = {}, o = e.getElementsByTagName("Data");
        for (t = 0, i = o.length; t < i; t++) {
            s = (n = o[t]).getAttribute("name");
            var a = {}, l = n.getElementsByTagName("value");
            if (l.length && (a.value = this.getChildValue(l[0])), this.kvpAttributes) r[s] = a.value; else {
                var h = n.getElementsByTagName("displayName");
                h.length && (a.displayName = this.getChildValue(h[0])), r[s] = a;
            }
        }
        var c = e.getElementsByTagName("SimpleData");
        for (t = 0, i = c.length; t < i; t++) {
            a = {};
            s = (n = c[t]).getAttribute("name"), a.value = this.getChildValue(n), this.kvpAttributes ? r[s] = a.value : (a.displayName = s, 
            r[s] = a);
        }
        return r;
    },
    "parseProperty": function(e, t, i) {
        var n, s = this.getElementsByTagNameNS(e, t, i);
        try {
            n = OpenLayers.Util.getXmlNodeValue(s[0]);
        } catch (e) {
            n = null;
        }
        return n;
    },
    "write": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = this.createElementNS(this.kmlns, "kml"), i = this.createFolderXML(), n = 0, s = e.length; n < s; ++n) i.appendChild(this.createPlacemarkXML(e[n]));
        return t.appendChild(i), OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFolderXML": function() {
        var e = this.createElementNS(this.kmlns, "Folder");
        if (this.foldersName) {
            var t = this.createElementNS(this.kmlns, "name"), i = this.createTextNode(this.foldersName);
            t.appendChild(i), e.appendChild(t);
        }
        if (this.foldersDesc) {
            var n = this.createElementNS(this.kmlns, "description"), s = this.createTextNode(this.foldersDesc);
            n.appendChild(s), e.appendChild(n);
        }
        return e;
    },
    "createPlacemarkXML": function(e) {
        var t = this.createElementNS(this.kmlns, "name"), i = e.style && e.style.label ? e.style.label : e.id, n = e.attributes.name || i;
        t.appendChild(this.createTextNode(n));
        var s = this.createElementNS(this.kmlns, "description"), r = e.attributes.description || this.placemarksDesc;
        s.appendChild(this.createTextNode(r));
        var o = this.createElementNS(this.kmlns, "Placemark");
        if (null != e.fid && o.setAttribute("id", e.fid), o.appendChild(t), o.appendChild(s), 
        e.attributes) {
            var a = this.buildExtendedData(e.attributes);
            a && o.appendChild(a);
        }
        var l = this.buildGeometryNode(e.geometry);
        return o.appendChild(l), o;
    },
    "buildGeometryNode": function(e) {
        var t = e.CLASS_NAME, i = t.substring(t.lastIndexOf(".") + 1), n = this.buildGeometry[i.toLowerCase()], s = null;
        return n && (s = n.apply(this, [ e ])), s;
    },
    "buildGeometry": {
        "point": function(e) {
            var t = this.createElementNS(this.kmlns, "Point");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "multipoint": function(e) {
            return this.buildGeometry.collection.apply(this, [ e ]);
        },
        "linestring": function(e) {
            var t = this.createElementNS(this.kmlns, "LineString");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "multilinestring": function(e) {
            return this.buildGeometry.collection.apply(this, [ e ]);
        },
        "linearring": function(e) {
            var t = this.createElementNS(this.kmlns, "LinearRing");
            return t.appendChild(this.buildCoordinatesNode(e)), t;
        },
        "polygon": function(e) {
            for (var t, i, n, s = this.createElementNS(this.kmlns, "Polygon"), r = e.components, o = 0, a = r.length; o < a; ++o) n = 0 == o ? "outerBoundaryIs" : "innerBoundaryIs", 
            t = this.createElementNS(this.kmlns, n), i = this.buildGeometry.linearring.apply(this, [ r[o] ]), 
            t.appendChild(i), s.appendChild(t);
            return s;
        },
        "multipolygon": function(e) {
            return this.buildGeometry.collection.apply(this, [ e ]);
        },
        "collection": function(e) {
            for (var t, i = this.createElementNS(this.kmlns, "MultiGeometry"), n = 0, s = e.components.length; n < s; ++n) (t = this.buildGeometryNode.apply(this, [ e.components[n] ])) && i.appendChild(t);
            return i;
        }
    },
    "buildCoordinatesNode": function(e) {
        var t, i = this.createElementNS(this.kmlns, "coordinates"), n = e.components;
        if (n) {
            for (var s, r = n.length, o = new Array(r), a = 0; a < r; ++a) s = n[a], o[a] = this.buildCoordinates(s);
            t = o.join(" ");
        } else t = this.buildCoordinates(e);
        var l = this.createTextNode(t);
        return i.appendChild(l), i;
    },
    "buildCoordinates": function(e) {
        return this.internalProjection && this.externalProjection && (e = e.clone()).transform(this.internalProjection, this.externalProjection), 
        e.x + "," + e.y;
    },
    "buildExtendedData": function(e) {
        var t = this.createElementNS(this.kmlns, "ExtendedData");
        for (var i in e) if (e[i] && "name" != i && "description" != i && "styleUrl" != i) {
            var n = this.createElementNS(this.kmlns, "Data");
            n.setAttribute("name", i);
            var s = this.createElementNS(this.kmlns, "value");
            if ("object" == typeof e[i]) {
                if (e[i].value && s.appendChild(this.createTextNode(e[i].value)), e[i].displayName) {
                    var r = this.createElementNS(this.kmlns, "displayName");
                    r.appendChild(this.getXMLDoc().createCDATASection(e[i].displayName)), n.appendChild(r);
                }
            } else s.appendChild(this.createTextNode(e[i]));
            n.appendChild(s), t.appendChild(n);
        }
        return this.isSimpleContent(t) ? null : t;
    },
    "CLASS_NAME": "OpenLayers.Format.KML"
}), OpenLayers.Format.OSM = OpenLayers.Class(OpenLayers.Format.XML, {
    "checkTags": !1,
    "shareNode": !1,
    "interestingTagsExclude": null,
    "areaTags": null,
    "relationsParsers": {},
    "initialize": function(e) {
        var t = {
            "interestingTagsExclude": [ "source", "source_ref", "source:ref", "history", "attribution", "created_by" ],
            "areaTags": [ "area", "building", "leisure", "tourism", "ruins", "historic", "landuse", "military", "natural", "sport" ]
        };
        e = e || {}, t = OpenLayers.Util.extend(t, e);
        for (var i = {}, n = 0; n < t.interestingTagsExclude.length; n++) i[t.interestingTagsExclude[n]] = !0;
        t.interestingTagsExclude = i;
        for (var s = {}, n = 0; n < t.areaTags.length; n++) s[t.areaTags[n]] = !0;
        t.areaTags = s, this.externalProjection = new OpenLayers.Projection("EPSG:4326"), 
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ t ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = this.getNodes(e), i = this.getWays(e), n = this.getRelations(e), s = [];
        for (var r in n) {
            var o = n[r];
            if (this.relationsParsers[o.tags.type]) for (var a = this.relationsParsers[o.tags.type](o, this, t, i, n), l = 0, h = a.length; l < h; l++) s.push(a[l]);
        }
        for (var c in i) {
            var u = i[c];
            if (u.interesting) {
                var p = this.isWayArea(u) ? 1 : 0, d = this.getPointList(u, t), f = null;
                f = p ? new OpenLayers.Geometry.Polygon(new OpenLayers.Geometry.LinearRing(d)) : new OpenLayers.Geometry.LineString(d);
                var m = new OpenLayers.Feature.Vector(f, u.tags);
                m.osm_id = parseInt(u.id), m.osm_version = parseInt(u.version), m.geometry.osm_id = m.osm_id, 
                m.type = "way", m.fid = "way." + m.osm_id, s.push(m);
            }
        }
        for (var g in t) {
            var y = t[g];
            (!y.used || !this.checkTags || Object.keys(y.attributes).length > 1) && s.push(y);
        }
        return s;
    },
    "getPointList": function(e, t) {
        if (!e) return [];
        for (var i = new Array(e.nodes.length), n = 0; n < e.nodes.length; n++) {
            var s = t[e.nodes[n]];
            s.used = !0;
            var r = s.geometry;
            this.shareNode || ((r = new OpenLayers.Geometry.Point(s.geometry.x, s.geometry.y)).osm_id = s.osm_id), 
            i[n] = r;
        }
        return i;
    },
    "concatPathsIfLinear": function(e, t) {
        var i = {};
        return 0 == e.length ? (i.succed = !0, i.lastPointList = t, i) : 0 == t.length ? (i.succed = !0, 
        i.lastPointList = e, i) : e[e.length - 1].x == t[0].x && e[e.length - 1].y == t[0].y ? (t = t.slice(1, t.length), 
        e = e.concat(t), i.succed = !0, i.lastPointList = e, i) : e[0].x == t[t.length - 1].x && e[0].y == t[t.length - 1].y ? (e = e.slice(1, e.length), 
        e = t.concat(e), i.succed = !0, i.lastPointList = e, i) : e[0].x == t[0].x && e[0].y == t[0].y ? (e = e.length > t.length ? (t = t.slice(1, t.length)).reverse().concat(e) : (e = e.slice(1, e.length)).reverse().concat(t), 
        i.succed = !0, i.lastPointList = e, i) : e[e.length - 1].x == t[t.length - 1].x && e[e.length - 1].y == t[t.length - 1].y ? (e.length > t.length ? (t = t.slice(0, t.length - 1), 
        e = e.concat(t.reverse())) : (e = e.slice(0, e.length - 1), e = t.concat(e.reverse())), 
        i.succed = !0, i.lastPointList = e, i) : (i.succed = !1, i);
    },
    "getNodes": function(e) {
        for (var t = e.getElementsByTagName("node"), i = {}, n = 0; n < t.length; n++) {
            var s = t[n], r = s.getAttribute("id"), o = new OpenLayers.Geometry.Point(s.getAttribute("lon"), s.getAttribute("lat"));
            this.internalProjection && this.externalProjection && o.transform(this.externalProjection, this.internalProjection);
            var a = new OpenLayers.Feature.Vector(o, this.getTags(s));
            a.osm_id = parseInt(r), a.osm_version = parseInt(s.getAttribute("version")), a.type = "node", 
            a.fid = "node." + a.osm_id, a.geometry.osm_id = a.osm_id, i[r] = a;
        }
        return i;
    },
    "getRelations": function(e) {
        for (var t = e.getElementsByTagName("relation"), i = {}, n = 0; n < t.length; n++) {
            var s = t[n], r = s.getAttribute("id"), o = {
                "id": r,
                "version": s.getAttribute("version")
            };
            o.tags = this.getTags(s), o.nodes = [], o.ways = [], o.relations = [];
            for (var a = s.getElementsByTagName("member"), l = 0; l < a.length; l++) {
                var h = a[l], c = h.getAttribute("type");
                "node" == c ? o.nodes[o.nodes.length] = h : "way" == c ? o.ways[o.ways.length] = h : "relation" == c && (o.relations[o.relations.length] = h);
            }
            i[r] = o;
        }
        return i;
    },
    "getWays": function(e) {
        for (var t = e.getElementsByTagName("way"), i = {}, n = 0; n < t.length; n++) {
            var s = t[n], r = s.getAttribute("id"), o = {
                "id": r,
                "version": s.getAttribute("version")
            };
            if (this.checkTags) {
                var a = this.getTags(s, !0);
                o.interesting = a[1], o.tags = a[0];
            } else o.interesting = !0, o.tags = this.getTags(s);
            var l = s.getElementsByTagName("nd");
            o.nodes = new Array(l.length);
            for (var h = 0; h < l.length; h++) o.nodes[h] = l[h].getAttribute("ref");
            i[r] = o;
        }
        return i;
    },
    "getTags": function(e, t) {
        for (var i = e.getElementsByTagName("tag"), n = {}, s = !1, r = 0; r < i.length; r++) {
            var o = i[r].getAttribute("k");
            this.checkTags && this.interestingTagsExclude[o] || (n[o] = i[r].getAttribute("v")), 
            t && !this.interestingTagsExclude[o] && (s = !0);
        }
        return t ? [ n, s ] : n;
    },
    "isWayArea": function(e) {
        var t = !1, i = !1;
        if (e.nodes[0] == e.nodes[e.nodes.length - 1] && (t = !0), this.checkTags) for (var n in e.tags) if (this.areaTags[n]) {
            i = !0;
            break;
        }
        return t && (!this.checkTags || i);
    },
    "write": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]), this.osm_id = 1, this.created_nodes = {};
        var t = this.createElementNS(null, "osm");
        t.setAttribute("version", "0.5"), t.setAttribute("generator", "OpenLayers " + OpenLayers.VERSION_NUMBER);
        for (var i = e.length - 1; i >= 0; i--) for (var n = this.createFeatureNodes(e[i]), s = 0; s < n.length; s++) t.appendChild(n[s]);
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFeatureNodes": function(e) {
        var t = [], i = e.geometry.CLASS_NAME, n = i.substring(i.lastIndexOf(".") + 1);
        n = n.toLowerCase();
        var s = this.createXML[n];
        return s && (t = s.apply(this, [ e ])), t;
    },
    "createXML": {
        "point": function(e) {
            var t = null, i = e.geometry ? e.geometry : e;
            this.internalProjection && this.externalProjection && (i = i.clone()).transform(this.internalProjection, this.externalProjection);
            var n = !1;
            if (e.osm_id ? (t = e.osm_id, this.created_nodes[t] && (n = !0)) : (t = -this.osm_id, 
            this.osm_id++), n) s = this.created_nodes[t]; else var s = this.createElementNS(null, "node");
            return this.created_nodes[t] = s, s.setAttribute("id", t), s.setAttribute("lon", i.x), 
            s.setAttribute("lat", i.y), e.attributes && this.serializeTags(e, s), this.setState(e, s), 
            n ? [] : [ s ];
        },
        "linestring": function(e) {
            var t, i = [], n = e.geometry;
            e.osm_id ? t = e.osm_id : (t = -this.osm_id, this.osm_id++);
            var s = this.createElementNS(null, "way");
            s.setAttribute("id", t);
            for (var r = 0; r < n.components.length; r++) {
                var o = this.createXML.point.apply(this, [ n.components[r] ]);
                if (o.length) {
                    var a = (o = o[0]).getAttribute("id");
                    i.push(o);
                } else a = n.components[r].osm_id, o = this.created_nodes[a];
                this.setState(e, o);
                var l = this.createElementNS(null, "nd");
                l.setAttribute("ref", a), s.appendChild(l);
            }
            return this.serializeTags(e, s), i.push(s), i;
        },
        "polygon": function(e) {
            var t = OpenLayers.Util.extend({
                "area": "yes"
            }, e.attributes), i = new OpenLayers.Feature.Vector(e.geometry.components[0], t);
            return i.osm_id = e.osm_id, i.geometry.osm_id = i.osm_id, this.createXML.linestring.apply(this, [ i ]);
        }
    },
    "serializeTags": function(e, t) {
        for (var i in e.attributes) {
            var n = this.createElementNS(null, "tag");
            n.setAttribute("k", i), n.setAttribute("v", e.attributes[i]), t.appendChild(n);
        }
    },
    "setState": function(e, t) {
        if (e.state) {
            var i = null;
            switch (e.state) {
              case OpenLayers.State.UPDATE:
                i = "modify";

              case OpenLayers.State.DELETE:
                i = "delete";
            }
            i && t.setAttribute("action", i);
        }
    },
    "CLASS_NAME": "OpenLayers.Format.OSM"
}), OpenLayers.Format.OSM.multipolygonParser = function(e, t, i, n, s) {
    for (var r = "", o = [], a = [], l = [], h = 0; h < e.ways.length; h++) {
        var c = e.ways[h], u = c.getAttribute("ref"), p = c.getAttribute("role"), d = t.getPointList(n[u], i);
        if (0 != d.length) {
            var f = !0;
            if ("" == r && (r = p), r == p) {
                var m = t.concatPathsIfLinear(o, d);
                m.succed && (f = !1, o = m.lastPointList);
            }
            if (f) {
                if (o.length > 0) if ("inner" == r || "enclave" == r) {
                    w = new OpenLayers.Geometry.LinearRing(o);
                    a.push(w);
                } else {
                    w = new OpenLayers.Geometry.LinearRing(o);
                    l.push(w);
                }
                o = d, r = p;
            }
        }
    }
    if (o.length > 0) if ("inner" == r || "enclave" == r) {
        w = new OpenLayers.Geometry.LinearRing(o);
        a.push(w);
    } else {
        w = new OpenLayers.Geometry.LinearRing(o);
        l.push(w);
    }
    for (var g = [], h = 0; h < l.length; h++) if (0 == a.length) g.push(new OpenLayers.Geometry.Polygon([ l[h] ])); else {
        for (var y = [], v = 0; v < a.length; v++) {
            var L = a[v];
            l[h].containsPoint(L.getCentroid()) && y.push(L);
        }
        g.push(new OpenLayers.Geometry.Polygon([ l[h] ].concat(y)));
    }
    var w = new OpenLayers.Geometry.MultiPolygon(g), b = new OpenLayers.Feature.Vector(w, e.tags);
    return b.osm_id = parseInt(e.id), b.type = "relation", b.fid = "relation." + b.osm_id, 
    [ b ];
}, OpenLayers.Format.OSM.getLineStrings = function(e, t, i, n) {
    for (var s = [], r = 0; r < e.ways.length; r++) {
        var o = e.ways[r].getAttribute("ref"), a = t.getPointList(n[o], i);
        0 != a.length && s.push(new OpenLayers.Geometry.LineString(a));
    }
    return s;
}, OpenLayers.Format.OSM.routeParser = function(e, t, i, n, s) {
    var r = OpenLayers.Format.OSM.getLineStrings(e, t, i, n), o = new OpenLayers.Geometry.MultiLineString(r), a = new OpenLayers.Feature.Vector(o, e.tags);
    return a.osm_id = parseInt(e.id), a.type = "relation", a.fid = "relation." + a.osm_id, 
    [ a ];
}, OpenLayers.Format.OSM.genericParser = function(e, t, i, n, s) {
    for (var r = OpenLayers.Format.OSM.getLineStrings(e, t, i, n), o = 0; o < e.nodes.length; o++) {
        var a = e.nodes[o];
        r.push(new OpenLayers.Geometry.Node(a));
    }
    var l = new OpenLayers.Geometry.Collection(r), h = new OpenLayers.Feature.Vector(l, e.tags);
    return h.osm_id = parseInt(e.id), h.type = "relation", h.fid = "relation." + h.osm_id, 
    [ h ];
}, OpenLayers.Format.OSM.routeParserWithRoles = function(e, t, i, n, s) {
    for (var r = "", o = [], a = [], l = 0; l < e.ways.length; l++) {
        var h = e.ways[l], c = h.getAttribute("ref"), u = h.getAttribute("role"), p = t.getPointList(n[c], i);
        if (0 != p.length) {
            var d = !0;
            if ("" == r && (r = u), r == u) {
                var f = t.concatPathsIfLinear(o, p);
                f.succed && (d = !1, o = f.lastPointList);
            }
            if (d) {
                var m = new OpenLayers.Geometry.LineString(o), g = new OpenLayers.Feature.Vector(m, e.tags);
                u && (g.attributes.role = u), g.osm_id = parseInt(e.id), g.type = "relation", g.fid = "relation." + g.osm_id + "." + l, 
                a.push(g), o = p, r = u;
            }
        }
    }
    var m = new OpenLayers.Geometry.LineString(o), g = new OpenLayers.Feature.Vector(m, e.tags);
    return u && (g.attributes.role = u), g.osm_id = parseInt(e.id), g.type = "relation", 
    g.fid = "relation." + g.osm_id, a.push(g), a;
}, OpenLayers.Format.OWSContext = OpenLayers.Class(OpenLayers.Format.Context, {
    "defaultVersion": "0.3.1",
    "getVersion": function(e, t) {
        var i = OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply(this, arguments);
        return "0.3.0" === i && (i = this.defaultVersion), i;
    },
    "toContext": function(e) {
        var t = {};
        return "OpenLayers.Map" == e.CLASS_NAME && (t.bounds = e.getExtent(), t.maxExtent = e.maxExtent, 
        t.projection = e.projection, t.size = e.getSize(), t.layers = e.layers), t;
    },
    "CLASS_NAME": "OpenLayers.Format.OWSContext"
}), OpenLayers.Format.QueryStringFilter = function() {
    function e(e) {
        return e = e.replace(/%/g, "\\%"), e = e.replace(/\\\\\.(\*)?/g, function(e, t) {
            return t ? e : "\\\\_";
        }), e = e.replace(/\\\\\.\*/g, "\\\\%"), e = e.replace(/(\\)?\.(\*)?/g, function(e, t, i) {
            return t || i ? e : "_";
        }), e = e.replace(/(\\)?\.\*/g, function(e, t) {
            return t ? e : "%";
        }), e = e.replace(/\\\./g, "."), e = e.replace(/(\\)?\\\*/g, function(e, t) {
            return t ? e : "*";
        });
    }
    var t = {};
    return t[OpenLayers.Filter.Comparison.EQUAL_TO] = "eq", t[OpenLayers.Filter.Comparison.NOT_EQUAL_TO] = "ne", 
    t[OpenLayers.Filter.Comparison.LESS_THAN] = "lt", t[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO] = "lte", 
    t[OpenLayers.Filter.Comparison.GREATER_THAN] = "gt", t[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO] = "gte", 
    t[OpenLayers.Filter.Comparison.LIKE] = "ilike", OpenLayers.Class(OpenLayers.Format, {
        "wildcarded": !1,
        "srsInBBOX": !1,
        "write": function(i, n) {
            n = n || {};
            var s = i.CLASS_NAME, r = s.substring(s.lastIndexOf(".") + 1);
            switch (r) {
              case "Spatial":
                switch (i.type) {
                  case OpenLayers.Filter.Spatial.BBOX:
                    n.bbox = i.value.toArray(), this.srsInBBOX && i.projection && n.bbox.push(i.projection.getCode());
                    break;

                  case OpenLayers.Filter.Spatial.DWITHIN:
                    n.tolerance = i.distance;

                  case OpenLayers.Filter.Spatial.WITHIN:
                    n.lon = i.value.x, n.lat = i.value.y;
                    break;

                  default:
                    OpenLayers.Console.warn("Unknown spatial filter type " + i.type);
                }
                break;

              case "Comparison":
                var o = t[i.type];
                if (void 0 !== o) {
                    var a = i.value;
                    i.type == OpenLayers.Filter.Comparison.LIKE && (a = e(a), this.wildcarded && (a = "%" + a + "%")), 
                    n[i.property + "__" + o] = a, n.queryable = n.queryable || [], n.queryable.push(i.property);
                } else OpenLayers.Console.warn("Unknown comparison filter type " + i.type);
                break;

              case "Logical":
                if (i.type === OpenLayers.Filter.Logical.AND) for (var l = 0, h = i.filters.length; l < h; l++) n = this.write(i.filters[l], n); else OpenLayers.Console.warn("Unsupported logical filter type " + i.type);
                break;

              default:
                OpenLayers.Console.warn("Unknown filter type " + r);
            }
            return n;
        },
        "CLASS_NAME": "OpenLayers.Format.QueryStringFilter"
    });
}(), OpenLayers.Format.SOSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "CLASS_NAME": "OpenLayers.Format.SOSCapabilities"
}), OpenLayers.Format.SOSGetFeatureOfInterest = OpenLayers.Class(OpenLayers.Format.XML, {
    "VERSION": "1.0.0",
    "namespaces": {
        "sos": "http://www.opengis.net/sos/1.0",
        "gml": "http://www.opengis.net/gml",
        "sa": "http://www.opengis.net/sampling/1.0",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "schemaLocation": "http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd",
    "defaultPrefix": "sos",
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {
            "features": []
        };
        this.readNode(e, t);
        for (var i = [], n = 0, s = t.features.length; n < s; n++) {
            var r = t.features[n];
            this.internalProjection && this.externalProjection && r.components[0] && r.components[0].transform(this.externalProjection, this.internalProjection);
            var o = new OpenLayers.Feature.Vector(r.components[0], r.attributes);
            i.push(o);
        }
        return i;
    },
    "readers": {
        "sa": {
            "SamplingPoint": function(e, t) {
                if (!t.attributes) {
                    var i = {
                        "attributes": {}
                    };
                    t.features.push(i), t = i;
                }
                t.attributes.id = this.getAttributeNS(e, this.namespaces.gml, "id"), this.readChildNodes(e, t);
            },
            "position": function(e, t) {
                this.readChildNodes(e, t);
            }
        },
        "gml": OpenLayers.Util.applyDefaults({
            "FeatureCollection": function(e, t) {
                this.readChildNodes(e, t);
            },
            "featureMember": function(e, t) {
                var i = {
                    "attributes": {}
                };
                t.features.push(i), this.readChildNodes(e, i);
            },
            "name": function(e, t) {
                t.attributes.name = this.getChildValue(e);
            },
            "pos": function(e, t) {
                this.externalProjection || (this.externalProjection = new OpenLayers.Projection(e.getAttribute("srsName"))), 
                OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply(this, [ e, t ]);
            }
        }, OpenLayers.Format.GML.v3.prototype.readers.gml)
    },
    "writers": {
        "sos": {
            "GetFeatureOfInterest": function(e) {
                for (var t = this.createElementNSPlus("GetFeatureOfInterest", {
                    "attributes": {
                        "version": this.VERSION,
                        "service": "SOS",
                        "xsi:schemaLocation": this.schemaLocation
                    }
                }), i = 0, n = e.fois.length; i < n; i++) this.writeNode("FeatureOfInterestId", {
                    "foi": e.fois[i]
                }, t);
                return t;
            },
            "FeatureOfInterestId": function(e) {
                return this.createElementNSPlus("FeatureOfInterestId", {
                    "value": e.foi
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.SOSGetFeatureOfInterest"
}), OpenLayers.Format.SOSGetObservation = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows",
        "gml": "http://www.opengis.net/gml",
        "sos": "http://www.opengis.net/sos/1.0",
        "ogc": "http://www.opengis.net/ogc",
        "om": "http://www.opengis.net/om/1.0",
        "sa": "http://www.opengis.net/sampling/1.0",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosGetObservation.xsd",
    "defaultPrefix": "sos",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {
            "measurements": [],
            "observations": []
        };
        return this.readNode(e, t), t;
    },
    "write": function(e) {
        var t = this.writeNode("sos:GetObservation", e);
        return this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:om", this.namespaces.om), 
        this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:ogc", this.namespaces.ogc), 
        this.setAttributeNS(t, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "readers": {
        "om": {
            "ObservationCollection": function(e, t) {
                t.id = this.getAttributeNS(e, this.namespaces.gml, "id"), this.readChildNodes(e, t);
            },
            "member": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Measurement": function(e, t) {
                var i = {};
                t.measurements.push(i), this.readChildNodes(e, i);
            },
            "Observation": function(e, t) {
                var i = {};
                t.observations.push(i), this.readChildNodes(e, i);
            },
            "samplingTime": function(e, t) {
                var i = {};
                t.samplingTime = i, this.readChildNodes(e, i);
            },
            "observedProperty": function(e, t) {
                t.observedProperty = this.getAttributeNS(e, this.namespaces.xlink, "href"), this.readChildNodes(e, t);
            },
            "procedure": function(e, t) {
                t.procedure = this.getAttributeNS(e, this.namespaces.xlink, "href"), this.readChildNodes(e, t);
            },
            "featureOfInterest": function(e, t) {
                var i = {
                    "features": []
                };
                t.fois = [], t.fois.push(i), this.readChildNodes(e, i);
                for (var n = [], s = 0, r = i.features.length; s < r; s++) {
                    var o = i.features[s];
                    n.push(new OpenLayers.Feature.Vector(o.components[0], o.attributes));
                }
                i.features = n;
            },
            "result": function(e, t) {
                var i = {};
                t.result = i, "" !== this.getChildValue(e) ? (i.value = this.getChildValue(e), i.uom = e.getAttribute("uom")) : this.readChildNodes(e, i);
            }
        },
        "sa": OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,
        "gml": OpenLayers.Util.applyDefaults({
            "TimeInstant": function(e, t) {
                var i = {};
                t.timeInstant = i, this.readChildNodes(e, i);
            },
            "timePosition": function(e, t) {
                t.timePosition = this.getChildValue(e);
            }
        }, OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)
    },
    "writers": {
        "sos": {
            "GetObservation": function(e) {
                var t = this.createElementNSPlus("GetObservation", {
                    "attributes": {
                        "version": this.VERSION,
                        "service": "SOS"
                    }
                });
                this.writeNode("offering", e, t), e.eventTime && this.writeNode("eventTime", e, t);
                for (var i in e.procedures) this.writeNode("procedure", e.procedures[i], t);
                for (var n in e.observedProperties) this.writeNode("observedProperty", e.observedProperties[n], t);
                return e.foi && this.writeNode("featureOfInterest", e.foi, t), this.writeNode("responseFormat", e, t), 
                e.resultModel && this.writeNode("resultModel", e, t), e.responseMode && this.writeNode("responseMode", e, t), 
                t;
            },
            "featureOfInterest": function(e) {
                var t = this.createElementNSPlus("featureOfInterest");
                return this.writeNode("ObjectID", e.objectId, t), t;
            },
            "ObjectID": function(e) {
                return this.createElementNSPlus("ObjectID", {
                    "value": e
                });
            },
            "responseFormat": function(e) {
                return this.createElementNSPlus("responseFormat", {
                    "value": e.responseFormat
                });
            },
            "procedure": function(e) {
                return this.createElementNSPlus("procedure", {
                    "value": e
                });
            },
            "offering": function(e) {
                return this.createElementNSPlus("offering", {
                    "value": e.offering
                });
            },
            "observedProperty": function(e) {
                return this.createElementNSPlus("observedProperty", {
                    "value": e
                });
            },
            "eventTime": function(e) {
                var t = this.createElementNSPlus("eventTime");
                return "latest" === e.eventTime && this.writeNode("ogc:TM_Equals", e, t), t;
            },
            "resultModel": function(e) {
                return this.createElementNSPlus("resultModel", {
                    "value": e.resultModel
                });
            },
            "responseMode": function(e) {
                return this.createElementNSPlus("responseMode", {
                    "value": e.responseMode
                });
            }
        },
        "ogc": {
            "TM_Equals": function(e) {
                var t = this.createElementNSPlus("ogc:TM_Equals");
                return this.writeNode("ogc:PropertyName", {
                    "property": "urn:ogc:data:time:iso8601"
                }, t), "latest" === e.eventTime && this.writeNode("gml:TimeInstant", {
                    "value": "latest"
                }, t), t;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("ogc:PropertyName", {
                    "value": e.property
                });
            }
        },
        "gml": {
            "TimeInstant": function(e) {
                var t = this.createElementNSPlus("gml:TimeInstant");
                return this.writeNode("gml:timePosition", e, t), t;
            },
            "timePosition": function(e) {
                return this.createElementNSPlus("gml:timePosition", {
                    "value": e.value
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.SOSGetObservation"
}), OpenLayers.Format.Text = OpenLayers.Class(OpenLayers.Format, {
    "defaultStyle": null,
    "extractStyles": !0,
    "initialize": function(e) {
        !1 !== (e = e || {}).extractStyles && (e.defaultStyle = {
            "externalGraphic": OpenLayers.Util.getImageLocation("marker.png"),
            "graphicWidth": 21,
            "graphicHeight": 25,
            "graphicXOffset": -10.5,
            "graphicYOffset": -12.5
        }), OpenLayers.Format.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        for (var t, i = e.split("\n"), n = [], s = 0; s < i.length - 1; s++) {
            var r = i[s].replace(/^\s*/, "").replace(/\s*$/, "");
            if ("#" != r.charAt(0)) if (t) {
                for (var o = r.split("\t"), a = new OpenLayers.Geometry.Point(0, 0), l = {}, h = this.defaultStyle ? OpenLayers.Util.applyDefaults({}, this.defaultStyle) : null, c = !1, u = 0; u < o.length; u++) if (o[u]) if ("point" == t[u]) {
                    var p = o[u].split(",");
                    a.y = parseFloat(p[0]), a.x = parseFloat(p[1]), c = !0;
                } else if ("lat" == t[u]) a.y = parseFloat(o[u]), c = !0; else if ("lon" == t[u]) a.x = parseFloat(o[u]), 
                c = !0; else if ("title" == t[u]) l.title = o[u]; else if ("image" == t[u] || "icon" == t[u] && h) h.externalGraphic = o[u]; else if ("iconSize" == t[u] && h) {
                    var d = o[u].split(",");
                    h.graphicWidth = parseFloat(d[0]), h.graphicHeight = parseFloat(d[1]);
                } else if ("iconOffset" == t[u] && h) {
                    var f = o[u].split(",");
                    h.graphicXOffset = parseFloat(f[0]), h.graphicYOffset = parseFloat(f[1]);
                } else "description" == t[u] ? l.description = o[u] : "overflow" == t[u] ? l.overflow = o[u] : l[t[u]] = o[u];
                if (c) {
                    this.internalProjection && this.externalProjection && a.transform(this.externalProjection, this.internalProjection);
                    var m = new OpenLayers.Feature.Vector(a, l, h);
                    n.push(m);
                }
            } else t = r.split("\t");
        }
        return n;
    },
    "CLASS_NAME": "OpenLayers.Format.Text"
}), OpenLayers.Format.TMSCapabilities = OpenLayers.Class(OpenLayers.Format.XML, {
    "defaultPrefix": "tms",
    "readers": {
        "tms": {
            "Services": function(e, t) {
                t.services = [], this.readChildNodes(e, t);
            },
            "TileMapService": function(e, t) {
                t.services ? t.services.push({
                    "service": "TMS",
                    "version": e.getAttribute("version"),
                    "title": e.getAttribute("title"),
                    "href": e.getAttribute("href")
                }) : this.readChildNodes(e, t);
            },
            "TileMaps": function(e, t) {
                t.tileMaps = [], this.readChildNodes(e, t);
            },
            "TileMap": function(e, t) {
                t.tileMaps ? t.tileMaps.push({
                    "href": e.getAttribute("href"),
                    "srs": e.getAttribute("srs"),
                    "title": e.getAttribute("title"),
                    "profile": e.getAttribute("profile")
                }) : (t.version = e.getAttribute("version"), t.tileMapService = e.getAttribute("tilemapservice"), 
                this.readChildNodes(e, t));
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.abstract = this.getChildValue(e);
            },
            "SRS": function(e, t) {
                t.srs = this.getChildValue(e);
            },
            "BoundingBox": function(e, t) {
                t.bbox = new OpenLayers.Bounds(e.getAttribute("minx"), e.getAttribute("miny"), e.getAttribute("maxx"), e.getAttribute("maxy"));
            },
            "Origin": function(e, t) {
                t.origin = new OpenLayers.LonLat(e.getAttribute("x"), e.getAttribute("y"));
            },
            "TileFormat": function(e, t) {
                t.tileFormat = {
                    "width": parseInt(e.getAttribute("width"), 10),
                    "height": parseInt(e.getAttribute("height"), 10),
                    "mimeType": e.getAttribute("mime-type"),
                    "extension": e.getAttribute("extension")
                };
            },
            "TileSets": function(e, t) {
                t.tileSets = [], this.readChildNodes(e, t);
            },
            "TileSet": function(e, t) {
                t.tileSets.push({
                    "href": e.getAttribute("href"),
                    "unitsPerPixel": parseFloat(e.getAttribute("units-per-pixel")),
                    "order": parseInt(e.getAttribute("order"), 10)
                });
            },
            "TileMapServerError": function(e, t) {
                t.error = !0;
            },
            "Message": function(e, t) {
                t.message = this.getChildValue(e);
            }
        }
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "CLASS_NAME": "OpenLayers.Format.TMSCapabilities"
}), OpenLayers.Format.WCSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.0",
    "CLASS_NAME": "OpenLayers.Format.WCSCapabilities"
}), OpenLayers.Format.WCSDescribeCoverage = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.0",
    "CLASS_NAME": "OpenLayers.Format.WCSDescribeCoverage"
}), OpenLayers.Format.WFS = OpenLayers.Class(OpenLayers.Format.GML, {
    "layer": null,
    "wfsns": "http://www.opengis.net/wfs",
    "ogcns": "http://www.opengis.net/ogc",
    "initialize": function(e, t) {
        OpenLayers.Format.GML.prototype.initialize.apply(this, [ e ]), this.layer = t, this.layer.featureNS && (this.featureNS = this.layer.featureNS), 
        this.layer.options.geometry_column && (this.geometryName = this.layer.options.geometry_column), 
        this.layer.options.typename && (this.featureName = this.layer.options.typename);
    },
    "write": function(e) {
        var t = this.createElementNS(this.wfsns, "wfs:Transaction");
        t.setAttribute("version", "1.0.0"), t.setAttribute("service", "WFS");
        for (var i = 0; i < e.length; i++) switch (e[i].state) {
          case OpenLayers.State.INSERT:
            t.appendChild(this.insert(e[i]));
            break;

          case OpenLayers.State.UPDATE:
            t.appendChild(this.update(e[i]));
            break;

          case OpenLayers.State.DELETE:
            t.appendChild(this.remove(e[i]));
        }
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "createFeatureXML": function(e) {
        var t = this.buildGeometryNode(e.geometry), i = this.createElementNS(this.featureNS, "feature:" + this.geometryName);
        i.appendChild(t);
        var n = this.createElementNS(this.featureNS, "feature:" + this.featureName);
        n.appendChild(i);
        for (var s in e.attributes) {
            var r = this.createTextNode(e.attributes[s]), o = s;
            -1 != s.search(":") && (o = s.split(":")[1]);
            var a = this.createElementNS(this.featureNS, "feature:" + o);
            a.appendChild(r), n.appendChild(a);
        }
        return n;
    },
    "insert": function(e) {
        var t = this.createElementNS(this.wfsns, "wfs:Insert");
        return t.appendChild(this.createFeatureXML(e)), t;
    },
    "update": function(e) {
        e.fid || OpenLayers.Console.userError(OpenLayers.i18n("noFID"));
        var t = this.createElementNS(this.wfsns, "wfs:Update");
        t.setAttribute("typeName", this.featurePrefix + ":" + this.featureName), t.setAttribute("xmlns:" + this.featurePrefix, this.featureNS);
        var i = this.createElementNS(this.wfsns, "wfs:Property"), n = this.createElementNS(this.wfsns, "wfs:Name"), s = this.createTextNode(this.geometryName);
        n.appendChild(s), i.appendChild(n);
        var r = this.createElementNS(this.wfsns, "wfs:Value"), o = this.buildGeometryNode(e.geometry);
        e.layer && o.setAttribute("srsName", e.layer.projection.getCode()), r.appendChild(o), 
        i.appendChild(r), t.appendChild(i);
        for (var a in e.attributes) i = this.createElementNS(this.wfsns, "wfs:Property"), 
        (n = this.createElementNS(this.wfsns, "wfs:Name")).appendChild(this.createTextNode(a)), 
        i.appendChild(n), (r = this.createElementNS(this.wfsns, "wfs:Value")).appendChild(this.createTextNode(e.attributes[a])), 
        i.appendChild(r), t.appendChild(i);
        var l = this.createElementNS(this.ogcns, "ogc:Filter"), h = this.createElementNS(this.ogcns, "ogc:FeatureId");
        return h.setAttribute("fid", e.fid), l.appendChild(h), t.appendChild(l), t;
    },
    "remove": function(e) {
        if (!e.fid) return OpenLayers.Console.userError(OpenLayers.i18n("noFID")), !1;
        var t = this.createElementNS(this.wfsns, "wfs:Delete");
        t.setAttribute("typeName", this.featurePrefix + ":" + this.featureName), t.setAttribute("xmlns:" + this.featurePrefix, this.featureNS);
        var i = this.createElementNS(this.ogcns, "ogc:Filter"), n = this.createElementNS(this.ogcns, "ogc:FeatureId");
        return n.setAttribute("fid", e.fid), i.appendChild(n), t.appendChild(i), t;
    },
    "destroy": function() {
        this.layer = null;
    },
    "CLASS_NAME": "OpenLayers.Format.WFS"
}), OpenLayers.Format.WFSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.0",
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities"
}), OpenLayers.Format.WFSDescribeFeatureType = OpenLayers.Class(OpenLayers.Format.XML, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g
    },
    "namespaces": {
        "xsd": "http://www.w3.org/2001/XMLSchema"
    },
    "readers": {
        "xsd": {
            "schema": function(e, t) {
                var i, n, s = [], r = {}, o = {
                    "complexTypes": s,
                    "customTypes": r
                };
                this.readChildNodes(e, o);
                var a, l, h = e.attributes;
                for (i = 0, n = h.length; i < n; ++i) 0 === (l = (a = h[i]).name).indexOf("xmlns") ? this.setNamespace(l.split(":")[1] || "", a.value) : t[l] = a.value;
                t.featureTypes = s, t.targetPrefix = this.namespaceAlias[t.targetNamespace];
                var c, u;
                for (i = 0, n = s.length; i < n; ++i) u = r[(c = s[i]).typeName], r[c.typeName] && (c.typeName = u.name);
            },
            "complexType": function(e, t) {
                var i = {
                    "typeName": e.getAttribute("name")
                };
                this.readChildNodes(e, i), t.complexTypes.push(i);
            },
            "complexContent": function(e, t) {
                this.readChildNodes(e, t);
            },
            "extension": function(e, t) {
                this.readChildNodes(e, t);
            },
            "sequence": function(e, t) {
                var i = {
                    "elements": []
                };
                this.readChildNodes(e, i), t.properties = i.elements;
            },
            "element": function(e, t) {
                var i;
                if (t.elements) {
                    for (var n, s = {}, r = e.attributes, o = 0, a = r.length; o < a; ++o) s[(n = r[o]).name] = n.value;
                    (i = s.type) || (i = {}, this.readChildNodes(e, i), s.restriction = i, s.type = i.base);
                    var l = i.base || i;
                    s.localType = l.split(":").pop(), t.elements.push(s), this.readChildNodes(e, s);
                }
                if (t.complexTypes) {
                    var h = (i = e.getAttribute("type")).split(":").pop();
                    t.customTypes[h] = {
                        "name": e.getAttribute("name"),
                        "type": i
                    };
                }
            },
            "annotation": function(e, t) {
                t.annotation = {}, this.readChildNodes(e, t.annotation);
            },
            "appinfo": function(e, t) {
                t.appinfo || (t.appinfo = []), t.appinfo.push(this.getChildValue(e));
            },
            "documentation": function(e, t) {
                t.documentation || (t.documentation = []);
                var i = this.getChildValue(e);
                t.documentation.push({
                    "lang": e.getAttribute("xml:lang"),
                    "textContent": i.replace(this.regExes.trimSpace, "")
                });
            },
            "simpleType": function(e, t) {
                this.readChildNodes(e, t);
            },
            "restriction": function(e, t) {
                t.base = e.getAttribute("base"), this.readRestriction(e, t);
            }
        }
    },
    "readRestriction": function(e, t) {
        for (var i, n, s, r = e.childNodes, o = 0, a = r.length; o < a; ++o) 1 == (i = r[o]).nodeType && (n = i.nodeName.split(":").pop(), 
        s = i.getAttribute("value"), t[n] ? ("string" == typeof t[n] && (t[n] = [ t[n] ]), 
        t[n].push(s)) : t[n] = s);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        if ("ExceptionReport" === e.nodeName.split(":").pop()) {
            var i = new OpenLayers.Format.OGCExceptionReport();
            t.error = i.read(e);
        } else this.readNode(e, t);
        return t;
    },
    "CLASS_NAME": "OpenLayers.Format.WFSDescribeFeatureType"
}), OpenLayers.Format.WMC = OpenLayers.Class(OpenLayers.Format.Context, {
    "defaultVersion": "1.1.0",
    "layerToContext": function(e) {
        var t = this.getParser(), i = {
            "queryable": e.queryable,
            "visibility": e.visibility,
            "name": e.params.LAYERS,
            "title": e.name,
            "abstract": e.metadata.abstract,
            "dataURL": e.metadata.dataURL,
            "metadataURL": e.metadataURL,
            "attribution": e.attribution,
            "server": {
                "version": e.params.VERSION,
                "url": e.url
            },
            "maxExtent": e.maxExtent,
            "transparent": e.params.TRANSPARENT,
            "numZoomLevels": e.numZoomLevels,
            "units": e.units,
            "isBaseLayer": e.isBaseLayer,
            "opacity": 1 == e.opacity ? void 0 : e.opacity,
            "gutter": 0 == e.gutter ? void 0 : e.gutter,
            "displayInLayerSwitcher": e.displayInLayerSwitcher,
            "singleTile": e.singleTile,
            "tileSize": e.singleTile || !e.tileSize ? void 0 : {
                "width": e.tileSize.w,
                "height": e.tileSize.h
            },
            "minScale": e.options.resolutions || e.options.scales || e.options.maxResolution || e.options.minScale ? e.minScale : void 0,
            "maxScale": e.options.resolutions || e.options.scales || e.options.minResolution || e.options.maxScale ? e.maxScale : void 0,
            "formats": [],
            "styles": [],
            "srs": e.srs,
            "dimensions": e.dimensions
        };
        if (e.metadata.servertitle && (i.server.title = e.metadata.servertitle), e.metadata.formats && e.metadata.formats.length > 0) for (var n = 0, s = e.metadata.formats.length; n < s; n++) {
            var r = e.metadata.formats[n];
            i.formats.push({
                "value": r.value,
                "current": r.value == e.params.FORMAT
            });
        } else i.formats.push({
            "value": e.params.FORMAT,
            "current": !0
        });
        if (e.metadata.styles && e.metadata.styles.length > 0) for (var n = 0, s = e.metadata.styles.length; n < s; n++) {
            var o = e.metadata.styles[n];
            o.href == e.params.SLD || o.body == e.params.SLD_BODY || o.name == e.params.STYLES ? o.current = !0 : o.current = !1, 
            i.styles.push(o);
        } else i.styles.push({
            "href": e.params.SLD,
            "body": e.params.SLD_BODY,
            "name": e.params.STYLES || t.defaultStyleName,
            "title": t.defaultStyleTitle,
            "current": !0
        });
        return i;
    },
    "toContext": function(e) {
        var t = {}, i = e.layers;
        if ("OpenLayers.Map" == e.CLASS_NAME) {
            var n = e.metadata || {};
            t.size = e.getSize(), t.bounds = e.getExtent(), t.projection = e.projection, t.title = e.title, 
            t.keywords = n.keywords, t.abstract = n.abstract, t.logo = n.logo, t.descriptionURL = n.descriptionURL, 
            t.contactInformation = n.contactInformation, t.maxExtent = e.maxExtent;
        } else OpenLayers.Util.applyDefaults(t, e), void 0 != t.layers && delete t.layers;
        if (void 0 == t.layersContext && (t.layersContext = []), void 0 != i && OpenLayers.Util.isArray(i)) for (var s = 0, r = i.length; s < r; s++) {
            var o = i[s];
            o instanceof OpenLayers.Layer.WMS && t.layersContext.push(this.layerToContext(o));
        }
        return t;
    },
    "CLASS_NAME": "OpenLayers.Format.WMC"
}), OpenLayers.Format.WMSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.1",
    "profile": null,
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities"
}), OpenLayers.Format.WMSDescribeLayer = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.1",
    "CLASS_NAME": "OpenLayers.Format.WMSDescribeLayer"
}), OpenLayers.Format.WMTSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "yx": {
        "urn:ogc:def:crs:EPSG::4326": !0
    },
    "createLayer": function(e, t) {
        if (!("layer" in t)) throw new Error("Missing property 'layer' in configuration.");
        for (var i, n = e.contents, s = (n.layers, 0), r = n.layers.length; s < r; ++s) if (n.layers[s].identifier === t.layer) {
            i = n.layers[s];
            break;
        }
        if (!i) throw new Error("Layer not found");
        var o = t.format;
        !o && i.formats && i.formats.length && (o = i.formats[0]);
        var a;
        if (t.matrixSet) a = n.tileMatrixSets[t.matrixSet]; else if (t.projection) {
            for (var s = 0, l = i.tileMatrixSetLinks.length; s < l; s++) if (n.tileMatrixSets[i.tileMatrixSetLinks[s].tileMatrixSet].supportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/, "$1:$3") === t.projection) {
                a = n.tileMatrixSets[i.tileMatrixSetLinks[s].tileMatrixSet];
                break;
            }
        } else i.tileMatrixSetLinks.length >= 1 && (a = n.tileMatrixSets[i.tileMatrixSetLinks[0].tileMatrixSet]);
        if (!a) throw new Error("matrixSet not found");
        for (var h, s = 0, r = i.styles.length; s < r && !(h = i.styles[s]).isDefault; ++s) ;
        var c = t.requestEncoding;
        if (!c && (c = "KVP", e.operationsMetadata.GetTile.dcp.http)) {
            var u = e.operationsMetadata.GetTile.dcp.http;
            if (u.get[0].constraints) {
                var p = u.get[0].constraints.GetEncoding.allowedValues;
                p.KVP || !p.REST && !p.RESTful || (c = "REST");
            }
        }
        var d = [], f = t.params || {};
        delete t.params;
        for (var m = 0, g = i.dimensions.length; m < g; m++) {
            var y = i.dimensions[m];
            d.push(y.identifier), f.hasOwnProperty(y.identifier) || (f[y.identifier] = y.default);
        }
        for (var v, L, w, b = t.projection || a.supportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/, "$1:$3"), C = t.units || ("EPSG:4326" === b ? "degrees" : "m"), O = [], S = [], x = i.tileMatrixSetLinks, E = function(e) {
            O.push(28e-5 * e / OpenLayers.METERS_PER_INCH / OpenLayers.INCHES_PER_UNIT[C]), 
            (!v || v > e) && (v = e), (!L || L < e) && (L = e);
        }, A = 0, l = x.length; A < l; A++) if ((w = x[A]).tileMatrixSet === a.identifier) {
            if (w.tileMatrixSetLimits) {
                for (var _, F = {}, N = 0, T = a.matrixIds.length; N < T; N++) F[a.matrixIds[N].identifier] = a.matrixIds[N];
                for (var N = 0, T = w.tileMatrixSetLimits.length; N < T; N++) _ = F[w.tileMatrixSetLimits[N].tileMatrix], 
                S.push(_), E(_.scaleDenominator);
            } else for (var N = 0, T = a.matrixIds.length; N < T; N++) E(a.matrixIds[N].scaleDenominator);
            break;
        }
        var M;
        if ("REST" === c && i.resourceUrls) {
            M = [];
            i.resourceUrls;
            for (var k, D = 0, P = i.resourceUrls.length; D < P; ++D) (k = i.resourceUrls[D]).format === o && "tile" === k.resourceType && M.push(k.template);
        } else {
            var R = e.operationsMetadata.GetTile.dcp.http.get;
            M = [];
            for (var I, s = 0, r = R.length; s < r; s++) (!(I = R[s].constraints) || I && I.GetEncoding.allowedValues[c]) && M.push(R[s].url);
        }
        O.sort(function(e, t) {
            return t - e;
        });
        var B = OpenLayers.Util.applyDefaults(t, {
            "url": M,
            "requestEncoding": c,
            "name": i.title,
            "style": h && h.identifier || "",
            "format": o,
            "matrixIds": S.length ? S : a.matrixIds,
            "matrixSet": a.identifier,
            "projection": b,
            "units": C,
            "tileFullExtent": a.bounds,
            "dimensions": d,
            "params": f,
            "resolutions": !1 === t.isBaseLayer ? void 0 : O,
            "serverResolutions": O,
            "minScale": 1 / Math.ceil(L),
            "maxScale": 1 / Math.floor(v)
        });
        return new OpenLayers.Layer.WMTS(B);
    },
    "CLASS_NAME": "OpenLayers.Format.WMTSCapabilities"
}), OpenLayers.Format.WPSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.0.0",
    "CLASS_NAME": "OpenLayers.Format.WPSCapabilities"
}), OpenLayers.Format.XLS = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {
    "defaultVersion": "1.1.0",
    "stringifyOutput": !0,
    "CLASS_NAME": "OpenLayers.Format.XLS"
}), OpenLayers.Format.ArcXML.Features = OpenLayers.Class(OpenLayers.Format.XML, {
    "read": function(e) {
        return new OpenLayers.Format.ArcXML().read(e).features.feature;
    }
}), OpenLayers.Format.CSWGetDomain.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "csw": "http://www.opengis.net/cat/csw/2.0.2"
    },
    "defaultPrefix": "csw",
    "version": "2.0.2",
    "schemaLocation": "http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",
    "PropertyName": null,
    "ParameterName": null,
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "csw": {
            "GetDomainResponse": function(e, t) {
                this.readChildNodes(e, t);
            },
            "DomainValues": function(e, t) {
                OpenLayers.Util.isArray(t.DomainValues) || (t.DomainValues = []);
                for (var i = e.attributes, n = {}, s = 0, r = i.length; s < r; ++s) n[i[s].name] = i[s].nodeValue;
                this.readChildNodes(e, n), t.DomainValues.push(n);
            },
            "PropertyName": function(e, t) {
                t.PropertyName = this.getChildValue(e);
            },
            "ParameterName": function(e, t) {
                t.ParameterName = this.getChildValue(e);
            },
            "ListOfValues": function(e, t) {
                OpenLayers.Util.isArray(t.ListOfValues) || (t.ListOfValues = []), this.readChildNodes(e, t.ListOfValues);
            },
            "Value": function(e, t) {
                for (var i = e.attributes, n = {}, s = 0, r = i.length; s < r; ++s) n[i[s].name] = i[s].nodeValue;
                n.value = this.getChildValue(e), t.push({
                    "Value": n
                });
            },
            "ConceptualScheme": function(e, t) {
                t.ConceptualScheme = {}, this.readChildNodes(e, t.ConceptualScheme);
            },
            "Name": function(e, t) {
                t.Name = this.getChildValue(e);
            },
            "Document": function(e, t) {
                t.Document = this.getChildValue(e);
            },
            "Authority": function(e, t) {
                t.Authority = this.getChildValue(e);
            },
            "RangeOfValues": function(e, t) {
                t.RangeOfValues = {}, this.readChildNodes(e, t.RangeOfValues);
            },
            "MinValue": function(e, t) {
                for (var i = e.attributes, n = {}, s = 0, r = i.length; s < r; ++s) n[i[s].name] = i[s].nodeValue;
                n.value = this.getChildValue(e), t.MinValue = n;
            },
            "MaxValue": function(e, t) {
                for (var i = e.attributes, n = {}, s = 0, r = i.length; s < r; ++s) n[i[s].name] = i[s].nodeValue;
                n.value = this.getChildValue(e), t.MaxValue = n;
            }
        }
    },
    "write": function(e) {
        var t = this.writeNode("csw:GetDomain", e);
        return OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "writers": {
        "csw": {
            "GetDomain": function(e) {
                var t = this.createElementNSPlus("csw:GetDomain", {
                    "attributes": {
                        "service": "CSW",
                        "version": this.version
                    }
                });
                return e.PropertyName || this.PropertyName ? this.writeNode("csw:PropertyName", e.PropertyName || this.PropertyName, t) : (e.ParameterName || this.ParameterName) && this.writeNode("csw:ParameterName", e.ParameterName || this.ParameterName, t), 
                this.readChildNodes(t, e), t;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("csw:PropertyName", {
                    "value": e
                });
            },
            "ParameterName": function(e) {
                return this.createElementNSPlus("csw:ParameterName", {
                    "value": e
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.CSWGetDomain.v2_0_2"
}), OpenLayers.Format.CSWGetRecords.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "csw": "http://www.opengis.net/cat/csw/2.0.2",
        "dc": "http://purl.org/dc/elements/1.1/",
        "dct": "http://purl.org/dc/terms/",
        "gmd": "http://www.isotc211.org/2005/gmd",
        "geonet": "http://www.fao.org/geonetwork",
        "ogc": "http://www.opengis.net/ogc",
        "ows": "http://www.opengis.net/ows",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "defaultPrefix": "csw",
    "version": "2.0.2",
    "schemaLocation": "http://www.opengis.net/cat/csw/2.0.2 http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd",
    "requestId": null,
    "resultType": null,
    "outputFormat": null,
    "outputSchema": null,
    "startPosition": null,
    "maxRecords": null,
    "DistributedSearch": null,
    "ResponseHandler": null,
    "Query": null,
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "csw": {
            "GetRecordsResponse": function(e, t) {
                t.records = [], this.readChildNodes(e, t);
                var i = this.getAttributeNS(e, "", "version");
                "" != i && (t.version = i);
            },
            "RequestId": function(e, t) {
                t.RequestId = this.getChildValue(e);
            },
            "SearchStatus": function(e, t) {
                t.SearchStatus = {};
                var i = this.getAttributeNS(e, "", "timestamp");
                "" != i && (t.SearchStatus.timestamp = i);
            },
            "SearchResults": function(e, t) {
                this.readChildNodes(e, t);
                for (var i = e.attributes, n = {}, s = 0, r = i.length; s < r; ++s) "numberOfRecordsMatched" == i[s].name || "numberOfRecordsReturned" == i[s].name || "nextRecord" == i[s].name ? n[i[s].name] = parseInt(i[s].nodeValue) : n[i[s].name] = i[s].nodeValue;
                t.SearchResults = n;
            },
            "SummaryRecord": function(e, t) {
                var i = {
                    "type": "SummaryRecord"
                };
                this.readChildNodes(e, i), t.records.push(i);
            },
            "BriefRecord": function(e, t) {
                var i = {
                    "type": "BriefRecord"
                };
                this.readChildNodes(e, i), t.records.push(i);
            },
            "DCMIRecord": function(e, t) {
                var i = {
                    "type": "DCMIRecord"
                };
                this.readChildNodes(e, i), t.records.push(i);
            },
            "Record": function(e, t) {
                var i = {
                    "type": "Record"
                };
                this.readChildNodes(e, i), t.records.push(i);
            },
            "*": function(e, t) {
                t[e.localName || e.nodeName.split(":").pop()] = this.getChildValue(e);
            }
        },
        "geonet": {
            "info": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.gninfo = i;
            }
        },
        "dc": {
            "*": function(e, t) {
                var i = e.localName || e.nodeName.split(":").pop();
                OpenLayers.Util.isArray(t[i]) || (t[i] = []);
                for (var n = {}, s = e.attributes, r = 0, o = s.length; r < o; ++r) n[s[r].name] = s[r].nodeValue;
                n.value = this.getChildValue(e), "" != n.value && t[i].push(n);
            }
        },
        "dct": {
            "*": function(e, t) {
                var i = e.localName || e.nodeName.split(":").pop();
                OpenLayers.Util.isArray(t[i]) || (t[i] = []), t[i].push(this.getChildValue(e));
            }
        },
        "ows": OpenLayers.Util.applyDefaults({
            "BoundingBox": function(e, t) {
                t.bounds && (t.BoundingBox = [ {
                    "crs": t.projection,
                    "value": [ t.bounds.left, t.bounds.bottom, t.bounds.right, t.bounds.top ]
                } ], delete t.projection, delete t.bounds), OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows.BoundingBox.apply(this, arguments);
            }
        }, OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows)
    },
    "write": function(e) {
        var t = this.writeNode("csw:GetRecords", e);
        return this.setAttributeNS(t, this.namespaces.xmlns, "xmlns:gmd", this.namespaces.gmd), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
    },
    "writers": {
        "csw": {
            "GetRecords": function(e) {
                e || (e = {});
                var t = this.createElementNSPlus("csw:GetRecords", {
                    "attributes": {
                        "service": "CSW",
                        "version": this.version,
                        "requestId": e.requestId || this.requestId,
                        "resultType": e.resultType || this.resultType,
                        "outputFormat": e.outputFormat || this.outputFormat,
                        "outputSchema": e.outputSchema || this.outputSchema,
                        "startPosition": e.startPosition || this.startPosition,
                        "maxRecords": e.maxRecords || this.maxRecords
                    }
                });
                (e.DistributedSearch || this.DistributedSearch) && this.writeNode("csw:DistributedSearch", e.DistributedSearch || this.DistributedSearch, t);
                var i = e.ResponseHandler || this.ResponseHandler;
                if (OpenLayers.Util.isArray(i) && i.length > 0) for (var n = 0, s = i.length; n < s; n++) this.writeNode("csw:ResponseHandler", i[n], t);
                return this.writeNode("Query", e.Query || this.Query, t), t;
            },
            "DistributedSearch": function(e) {
                return this.createElementNSPlus("csw:DistributedSearch", {
                    "attributes": {
                        "hopCount": e.hopCount
                    }
                });
            },
            "ResponseHandler": function(e) {
                return this.createElementNSPlus("csw:ResponseHandler", {
                    "value": e.value
                });
            },
            "Query": function(e) {
                e || (e = {});
                var t = this.createElementNSPlus("csw:Query", {
                    "attributes": {
                        "typeNames": e.typeNames || "csw:Record"
                    }
                }), i = e.ElementName;
                if (OpenLayers.Util.isArray(i) && i.length > 0) for (var n = 0, s = i.length; n < s; n++) this.writeNode("csw:ElementName", i[n], t); else this.writeNode("csw:ElementSetName", e.ElementSetName || {
                    "value": "summary"
                }, t);
                return e.Constraint && this.writeNode("csw:Constraint", e.Constraint, t), e.SortBy && this.writeNode("ogc:SortBy", e.SortBy, t), 
                t;
            },
            "ElementName": function(e) {
                return this.createElementNSPlus("csw:ElementName", {
                    "value": e.value
                });
            },
            "ElementSetName": function(e) {
                return this.createElementNSPlus("csw:ElementSetName", {
                    "attributes": {
                        "typeNames": e.typeNames
                    },
                    "value": e.value
                });
            },
            "Constraint": function(e) {
                var t = this.createElementNSPlus("csw:Constraint", {
                    "attributes": {
                        "version": e.version
                    }
                });
                if (e.Filter) {
                    var i = new OpenLayers.Format.Filter({
                        "version": e.version
                    });
                    t.appendChild(i.write(e.Filter));
                } else if (e.CqlText) {
                    var n = this.createElementNSPlus("CqlText", {
                        "value": e.CqlText.value
                    });
                    t.appendChild(n);
                }
                return t;
            }
        },
        "ogc": OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc
    },
    "CLASS_NAME": "OpenLayers.Format.CSWGetRecords.v2_0_2"
}), OpenLayers.Format.Filter.v2 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "fes": "http://www.opengis.net/fes/2.0",
        "gml": "http://www.opengis.net/gml/3.2",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "defaultPrefix": "fes",
    "schemaLocation": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        var t = {};
        return this.readers.fes.Filter.apply(this, [ e, t ]), t.filter;
    },
    "readers": {
        "fes": {
            "_expression": function(e) {
                for (var t, i = "", n = e.firstChild; n; n = n.nextSibling) switch (n.nodeType) {
                  case 1:
                    (t = this.readNode(n)).property ? i += "${" + t.property + "}" : void 0 !== t.value && (i += t.value);
                    break;

                  case 3:
                  case 4:
                    i += n.nodeValue;
                }
                return i;
            },
            "Filter": function(e, t) {
                var i = {
                    "fids": [],
                    "filters": []
                };
                this.readChildNodes(e, i), i.fids.length > 0 ? t.filter = new OpenLayers.Filter.FeatureId({
                    "fids": i.fids
                }) : i.filters.length > 0 && (t.filter = i.filters[0]);
            },
            "ResourceId": function(e, t) {
                var i = e.getAttribute("rid");
                i && t.fids.push(i);
            },
            "And": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.AND
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Or": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.OR
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Not": function(e, t) {
                var i = new OpenLayers.Filter.Logical({
                    "type": OpenLayers.Filter.Logical.NOT
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLessThan": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LESS_THAN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsGreaterThan": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.GREATER_THAN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsLessThanOrEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsGreaterThanOrEqualTo": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "PropertyIsBetween": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.BETWEEN
                });
                this.readChildNodes(e, i), t.filters.push(i);
            },
            "Literal": function(e, t) {
                t.value = OpenLayers.String.numericIf(this.getChildValue(e), !0);
            },
            "ValueReference": function(e, t) {
                t.property = this.getChildValue(e);
            },
            "LowerBoundary": function(e, t) {
                t.lowerBoundary = OpenLayers.String.numericIf(this.readers.fes._expression.call(this, e), !0);
            },
            "UpperBoundary": function(e, t) {
                t.upperBoundary = OpenLayers.String.numericIf(this.readers.fes._expression.call(this, e), !0);
            },
            "Intersects": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.INTERSECTS);
            },
            "Within": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.WITHIN);
            },
            "Contains": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.CONTAINS);
            },
            "DWithin": function(e, t) {
                this.readSpatial(e, t, OpenLayers.Filter.Spatial.DWITHIN);
            },
            "Distance": function(e, t) {
                t.distance = parseInt(this.getChildValue(e)), t.distanceUnits = e.getAttribute("units");
            },
            "Function": function(e, t) {},
            "PropertyIsNull": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.IS_NULL
                });
                this.readChildNodes(e, i), t.filters.push(i);
            }
        }
    },
    "readSpatial": function(e, t, i) {
        var n = new OpenLayers.Filter.Spatial({
            "type": i
        });
        this.readChildNodes(e, n), n.value = n.components[0], delete n.components, t.filters.push(n);
    },
    "encodeLiteral": function(e) {
        return e instanceof Date && (e = OpenLayers.Date.toISOString(e)), e;
    },
    "writeOgcExpression": function(e, t) {
        return e instanceof OpenLayers.Filter.Function ? this.writeNode("Function", e, t) : this.writeNode("Literal", e, t), 
        t;
    },
    "write": function(e) {
        return this.writers.fes.Filter.apply(this, [ e ]);
    },
    "writers": {
        "fes": {
            "Filter": function(e) {
                var t = this.createElementNSPlus("fes:Filter");
                return this.writeNode(this.getFilterType(e), e, t), t;
            },
            "_featureIds": function(e) {
                for (var t = this.createDocumentFragment(), i = 0, n = e.fids.length; i < n; ++i) this.writeNode("fes:ResourceId", e.fids[i], t);
                return t;
            },
            "ResourceId": function(e) {
                return this.createElementNSPlus("fes:ResourceId", {
                    "attributes": {
                        "rid": e
                    }
                });
            },
            "And": function(e) {
                for (var t, i = this.createElementNSPlus("fes:And"), n = 0, s = e.filters.length; n < s; ++n) t = e.filters[n], 
                this.writeNode(this.getFilterType(t), t, i);
                return i;
            },
            "Or": function(e) {
                for (var t, i = this.createElementNSPlus("fes:Or"), n = 0, s = e.filters.length; n < s; ++n) t = e.filters[n], 
                this.writeNode(this.getFilterType(t), t, i);
                return i;
            },
            "Not": function(e) {
                var t = this.createElementNSPlus("fes:Not"), i = e.filters[0];
                return this.writeNode(this.getFilterType(i), i, t), t;
            },
            "PropertyIsLessThan": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsLessThan");
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsGreaterThan": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsGreaterThan");
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLessThanOrEqualTo": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsLessThanOrEqualTo");
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsGreaterThanOrEqualTo": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsGreaterThanOrEqualTo");
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsBetween": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsBetween");
                return this.writeNode("ValueReference", e, t), this.writeNode("LowerBoundary", e, t), 
                this.writeNode("UpperBoundary", e, t), t;
            },
            "ValueReference": function(e) {
                return this.createElementNSPlus("fes:ValueReference", {
                    "value": e.property
                });
            },
            "Literal": function(e) {
                var t = this.encodeLiteral || OpenLayers.Format.Filter.v1.prototype.encodeLiteral;
                return this.createElementNSPlus("fes:Literal", {
                    "value": t(e)
                });
            },
            "LowerBoundary": function(e) {
                var t = this.createElementNSPlus("fes:LowerBoundary");
                return this.writeOgcExpression(e.lowerBoundary, t), t;
            },
            "UpperBoundary": function(e) {
                var t = this.createElementNSPlus("fes:UpperBoundary");
                return this.writeNode("Literal", e.upperBoundary, t), t;
            },
            "INTERSECTS": function(e) {
                return this.writeSpatial(e, "Intersects");
            },
            "WITHIN": function(e) {
                return this.writeSpatial(e, "Within");
            },
            "CONTAINS": function(e) {
                return this.writeSpatial(e, "Contains");
            },
            "DWITHIN": function(e) {
                var t = this.writeSpatial(e, "DWithin");
                return this.writeNode("Distance", e, t), t;
            },
            "Distance": function(e) {
                return this.createElementNSPlus("fes:Distance", {
                    "attributes": {
                        "units": e.distanceUnits
                    },
                    "value": e.distance
                });
            },
            "Function": function(e) {
                for (var t = this.createElementNSPlus("fes:Function", {
                    "attributes": {
                        "name": e.name
                    }
                }), i = e.params, n = 0, s = i.length; n < s; n++) this.writeOgcExpression(i[n], t);
                return t;
            },
            "PropertyIsNull": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsNull");
                return this.writeNode("ValueReference", e, t), t;
            }
        }
    },
    "getFilterType": function(e) {
        var t = this.filterMap[e.type];
        if (!t) throw "Filter writing not supported for rule type: " + e.type;
        return t;
    },
    "filterMap": {
        "&&": "And",
        "||": "Or",
        "!": "Not",
        "==": "PropertyIsEqualTo",
        "!=": "PropertyIsNotEqualTo",
        "<": "PropertyIsLessThan",
        ">": "PropertyIsGreaterThan",
        "<=": "PropertyIsLessThanOrEqualTo",
        ">=": "PropertyIsGreaterThanOrEqualTo",
        "..": "PropertyIsBetween",
        "~": "PropertyIsLike",
        "NULL": "PropertyIsNull",
        "BBOX": "BBOX",
        "DWITHIN": "DWITHIN",
        "WITHIN": "WITHIN",
        "CONTAINS": "CONTAINS",
        "INTERSECTS": "INTERSECTS",
        "FID": "_featureIds"
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v2"
}), OpenLayers.Format.Filter.v2_0_0 = OpenLayers.Class(OpenLayers.Format.GML.v3, OpenLayers.Format.Filter.v2, {
    "VERSION": "2.0.0",
    "schemaLocation": "http://schemas.opengis.net/filter/2.0/filterAll.xsd",
    "initialize": function(e) {
        OpenLayers.Format.GML.v3.prototype.initialize.apply(this, [ e ]);
    },
    "readers": {
        "fes": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e, t) {
                var i = e.getAttribute("matchCase"), n = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.EQUAL_TO,
                    "matchCase": !("false" === i || "0" === i)
                });
                this.readChildNodes(e, n), t.filters.push(n);
            },
            "PropertyIsNotEqualTo": function(e, t) {
                var i = e.getAttribute("matchCase"), n = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.NOT_EQUAL_TO,
                    "matchCase": !("false" === i || "0" === i)
                });
                this.readChildNodes(e, n), t.filters.push(n);
            },
            "PropertyIsLike": function(e, t) {
                var i = new OpenLayers.Filter.Comparison({
                    "type": OpenLayers.Filter.Comparison.LIKE
                });
                this.readChildNodes(e, i);
                var n = e.getAttribute("wildCard"), s = e.getAttribute("singleChar"), r = e.getAttribute("escapeChar");
                i.value2regex(n, s, r), t.filters.push(i);
            }
        }, OpenLayers.Format.Filter.v2.prototype.readers.fes),
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.readers.feature
    },
    "writers": {
        "fes": OpenLayers.Util.applyDefaults({
            "PropertyIsEqualTo": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsEqualTo", {
                    "attributes": {
                        "matchCase": e.matchCase
                    }
                });
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsNotEqualTo": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsNotEqualTo", {
                    "attributes": {
                        "matchCase": e.matchCase
                    }
                });
                return this.writeNode("ValueReference", e, t), this.writeOgcExpression(e.value, t), 
                t;
            },
            "PropertyIsLike": function(e) {
                var t = this.createElementNSPlus("fes:PropertyIsLike", {
                    "attributes": {
                        "matchCase": e.matchCase,
                        "wildCard": "*",
                        "singleChar": ".",
                        "escapeChar": "!"
                    }
                });
                return this.writeNode("ValueReference", e, t), this.writeNode("Literal", e.regex2value(), t), 
                t;
            },
            "BBOX": function(e) {
                var t = this.createElementNSPlus("fes:BBOX");
                e.property && this.writeNode("ValueReference", e, t);
                var i = this.writeNode("gml:Envelope", e.value);
                return e.projection && i.setAttribute("srsName", e.projection), t.appendChild(i), 
                t;
            },
            "SortBy": function(e) {
                for (var t = this.createElementNSPlus("fes:SortBy"), i = 0, n = e.length; i < n; i++) this.writeNode("fes:SortProperty", e[i], t);
                return t;
            },
            "SortProperty": function(e) {
                var t = this.createElementNSPlus("fes:SortProperty");
                return this.writeNode("fes:ValueReference", e, t), this.writeNode("fes:SortOrder", "DESC" == e.order ? "DESC" : "ASC", t), 
                t;
            },
            "SortOrder": function(e) {
                return this.createElementNSPlus("fes:SortOrder", {
                    "value": e
                });
            }
        }, OpenLayers.Format.Filter.v2.prototype.writers.fes),
        "gml": OpenLayers.Format.GML.v3.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.writers.feature
    },
    "writeSpatial": function(e, t) {
        var i = this.createElementNSPlus("fes:" + t);
        if (this.writeNode("ValueReference", e, i), e.value instanceof OpenLayers.Filter.Function) this.writeNode("Function", e.value, i); else {
            var n;
            n = e.value instanceof OpenLayers.Geometry ? this.writeNode("feature:_geometry", e.value).firstChild : this.writeNode("gml:Envelope", e.value), 
            e.projection && n.setAttribute("srsName", e.projection), i.appendChild(n);
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Format.Filter.v2_0_0"
}), OpenLayers.Format.OWSContext.v0_3_1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "owc": "http://www.opengis.net/ows-context",
        "gml": "http://www.opengis.net/gml",
        "kml": "http://www.opengis.net/kml/2.2",
        "ogc": "http://www.opengis.net/ogc",
        "ows": "http://www.opengis.net/ows",
        "sld": "http://www.opengis.net/sld",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "VERSION": "0.3.1",
    "schemaLocation": "http://www.opengis.net/ows-context http://www.ogcnetwork.net/schemas/owc/0.3.1/owsContext.xsd",
    "defaultPrefix": "owc",
    "extractAttributes": !0,
    "xy": !0,
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "featurePrefix": "feature",
    "featureNS": "http://mapserver.gis.umn.edu/mapserver",
    "featureType": "vector",
    "geometryName": "geometry",
    "nestingLayerLookup": null,
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]), OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this);
    },
    "setNestingPath": function(e) {
        if (e.layersContext) for (var t = 0, i = e.layersContext.length; t < i; t++) {
            var n = e.layersContext[t], s = [], r = e.title || "";
            e.metadata && e.metadata.nestingPath && (s = e.metadata.nestingPath.slice()), "" != r && s.push(r), 
            n.metadata.nestingPath = s, n.layersContext && this.setNestingPath(n);
        }
    },
    "decomposeNestingPath": function(e) {
        var t = [];
        if (OpenLayers.Util.isArray(e)) {
            for (var i = e.slice(); i.length > 0; ) t.push(i.slice()), i.pop();
            t.reverse();
        }
        return t;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        this.readNode(e, t), this.setNestingPath({
            "layersContext": t.layersContext
        });
        var i = [];
        return this.processLayer(i, t), delete t.layersContext, t.layersContext = i, t;
    },
    "processLayer": function(e, t) {
        if (t.layersContext) for (var i = 0, n = t.layersContext.length; i < n; i++) {
            var s = t.layersContext[i];
            e.push(s), s.layersContext && this.processLayer(e, s);
        }
    },
    "write": function(e, t) {
        this.nestingLayerLookup = {}, t = t || {}, OpenLayers.Util.applyDefaults(t, e);
        var i = this.writeNode("OWSContext", t);
        return this.nestingLayerLookup = null, this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "readers": {
        "kml": {
            "Document": function(e, t) {
                t.features = new OpenLayers.Format.KML({
                    "kmlns": this.namespaces.kml,
                    "extractStyles": !0
                }).read(e);
            }
        },
        "owc": {
            "OWSContext": function(e, t) {
                this.readChildNodes(e, t);
            },
            "General": function(e, t) {
                this.readChildNodes(e, t);
            },
            "ResourceList": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Layer": function(e, t) {
                var i = {
                    "metadata": {},
                    "visibility": "1" != e.getAttribute("hidden"),
                    "queryable": "1" == e.getAttribute("queryable"),
                    "opacity": null != e.getAttribute("opacity") ? parseFloat(e.getAttribute("opacity")) : null,
                    "name": e.getAttribute("name"),
                    "categoryLayer": null == e.getAttribute("name"),
                    "formats": [],
                    "styles": []
                };
                t.layersContext || (t.layersContext = []), t.layersContext.push(i), this.readChildNodes(e, i);
            },
            "InlineGeometry": function(e, t) {
                t.features = [];
                var i, n = this.getElementsByTagNameNS(e, this.namespaces.gml, "featureMember");
                if (n.length >= 1 && (i = n[0]), i && i.firstChild) {
                    var s = i.firstChild.nextSibling ? i.firstChild.nextSibling : i.firstChild;
                    this.setNamespace("feature", s.namespaceURI), this.featureType = s.localName || s.nodeName.split(":").pop(), 
                    this.readChildNodes(e, t);
                }
            },
            "Server": function(e, t) {
                (t.service || t.version) && t.service == OpenLayers.Format.Context.serviceTypes.WMS || (t.service = e.getAttribute("service"), 
                t.version = e.getAttribute("version"), this.readChildNodes(e, t));
            },
            "Name": function(e, t) {
                t.name = this.getChildValue(e), this.readChildNodes(e, t);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e), this.readChildNodes(e, t);
            },
            "StyleList": function(e, t) {
                this.readChildNodes(e, t.styles);
            },
            "Style": function(e, t) {
                var i = {};
                t.push(i), this.readChildNodes(e, i);
            },
            "LegendURL": function(e, t) {
                var i = {};
                t.legend = i, this.readChildNodes(e, i);
            },
            "OnlineResource": function(e, t) {
                t.url = this.getAttributeNS(e, this.namespaces.xlink, "href"), this.readChildNodes(e, t);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,
        "gml": OpenLayers.Format.GML.v2.prototype.readers.gml,
        "sld": OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,
        "feature": OpenLayers.Format.GML.v2.prototype.readers.feature
    },
    "writers": {
        "owc": {
            "OWSContext": function(e) {
                var t = this.createElementNSPlus("OWSContext", {
                    "attributes": {
                        "version": this.VERSION,
                        "id": e.id || OpenLayers.Util.createUniqueID("OpenLayers_OWSContext_")
                    }
                });
                return this.writeNode("General", e, t), this.writeNode("ResourceList", e, t), t;
            },
            "General": function(e) {
                var t = this.createElementNSPlus("General");
                return this.writeNode("ows:BoundingBox", e, t), this.writeNode("ows:Title", e.title || "OpenLayers OWSContext", t), 
                t;
            },
            "ResourceList": function(e) {
                for (var t = this.createElementNSPlus("ResourceList"), i = 0, n = e.layers.length; i < n; i++) {
                    var s = e.layers[i], r = this.decomposeNestingPath(s.metadata.nestingPath);
                    this.writeNode("_Layer", {
                        "layer": s,
                        "subPaths": r
                    }, t);
                }
                return t;
            },
            "Server": function(e) {
                var t = this.createElementNSPlus("Server", {
                    "attributes": {
                        "version": e.version,
                        "service": e.service
                    }
                });
                return this.writeNode("OnlineResource", e, t), t;
            },
            "OnlineResource": function(e) {
                return this.createElementNSPlus("OnlineResource", {
                    "attributes": {
                        "xlink:href": e.url
                    }
                });
            },
            "InlineGeometry": function(e) {
                var t = this.createElementNSPlus("InlineGeometry"), i = e.getDataExtent();
                null !== i && this.writeNode("gml:boundedBy", i, t);
                for (var n = 0, s = e.features.length; n < s; n++) this.writeNode("gml:featureMember", e.features[n], t);
                return t;
            },
            "StyleList": function(e) {
                for (var t = this.createElementNSPlus("StyleList"), i = 0, n = e.length; i < n; i++) this.writeNode("Style", e[i], t);
                return t;
            },
            "Style": function(e) {
                var t = this.createElementNSPlus("Style");
                return this.writeNode("Name", e, t), this.writeNode("Title", e, t), e.legend && this.writeNode("LegendURL", e, t), 
                t;
            },
            "Name": function(e) {
                return this.createElementNSPlus("Name", {
                    "value": e.name
                });
            },
            "Title": function(e) {
                return this.createElementNSPlus("Title", {
                    "value": e.title
                });
            },
            "LegendURL": function(e) {
                var t = this.createElementNSPlus("LegendURL");
                return this.writeNode("OnlineResource", e.legend, t), t;
            },
            "_WMS": function(e) {
                var t = this.createElementNSPlus("Layer", {
                    "attributes": {
                        "name": e.params.LAYERS,
                        "queryable": e.queryable ? "1" : "0",
                        "hidden": e.visibility ? "0" : "1",
                        "opacity": e.hasOwnProperty("opacity") ? e.opacity : null
                    }
                });
                return this.writeNode("ows:Title", e.name, t), this.writeNode("ows:OutputFormat", e.params.FORMAT, t), 
                this.writeNode("Server", {
                    "service": OpenLayers.Format.Context.serviceTypes.WMS,
                    "version": e.params.VERSION,
                    "url": e.url
                }, t), e.metadata.styles && e.metadata.styles.length > 0 && this.writeNode("StyleList", e.metadata.styles, t), 
                t;
            },
            "_Layer": function(e) {
                var t, i, n, s;
                if (t = e.layer, i = e.subPaths, n = null, s = null, i.length > 0) {
                    var r = i[0].join("/"), o = r.lastIndexOf("/");
                    return n = this.nestingLayerLookup[r], s = o > 0 ? r.substring(o + 1, r.length) : r, 
                    n || (n = this.createElementNSPlus("Layer"), this.writeNode("ows:Title", s, n), 
                    this.nestingLayerLookup[r] = n), e.subPaths.shift(), this.writeNode("_Layer", e, n), 
                    n;
                }
                return t instanceof OpenLayers.Layer.WMS ? n = this.writeNode("_WMS", t) : t instanceof OpenLayers.Layer.Vector && (t.protocol instanceof OpenLayers.Protocol.WFS.v1 ? n = this.writeNode("_WFS", t) : t.protocol instanceof OpenLayers.Protocol.HTTP ? t.protocol.format instanceof OpenLayers.Format.GML ? (t.protocol.format.version = "2.1.2", 
                n = this.writeNode("_GML", t)) : t.protocol.format instanceof OpenLayers.Format.KML && (t.protocol.format.version = "2.2", 
                n = this.writeNode("_KML", t)) : (this.setNamespace("feature", this.featureNS), 
                n = this.writeNode("_InlineGeometry", t))), t.options.maxScale && this.writeNode("sld:MinScaleDenominator", t.options.maxScale, n), 
                t.options.minScale && this.writeNode("sld:MaxScaleDenominator", t.options.minScale, n), 
                this.nestingLayerLookup[t.name] = n, n;
            },
            "_WFS": function(e) {
                var t = this.createElementNSPlus("Layer", {
                    "attributes": {
                        "name": e.protocol.featurePrefix + ":" + e.protocol.featureType,
                        "hidden": e.visibility ? "0" : "1"
                    }
                });
                return this.writeNode("ows:Title", e.name, t), this.writeNode("Server", {
                    "service": OpenLayers.Format.Context.serviceTypes.WFS,
                    "version": e.protocol.version,
                    "url": e.protocol.url
                }, t), t;
            },
            "_InlineGeometry": function(e) {
                var t = this.createElementNSPlus("Layer", {
                    "attributes": {
                        "name": this.featureType,
                        "hidden": e.visibility ? "0" : "1"
                    }
                });
                return this.writeNode("ows:Title", e.name, t), this.writeNode("InlineGeometry", e, t), 
                t;
            },
            "_GML": function(e) {
                var t = this.createElementNSPlus("Layer");
                return this.writeNode("ows:Title", e.name, t), this.writeNode("Server", {
                    "service": OpenLayers.Format.Context.serviceTypes.GML,
                    "url": e.protocol.url,
                    "version": e.protocol.format.version
                }, t), t;
            },
            "_KML": function(e) {
                var t = this.createElementNSPlus("Layer");
                return this.writeNode("ows:Title", e.name, t), this.writeNode("Server", {
                    "service": OpenLayers.Format.Context.serviceTypes.KML,
                    "version": e.protocol.format.version,
                    "url": e.protocol.url
                }, t), t;
            }
        },
        "gml": OpenLayers.Util.applyDefaults({
            "boundedBy": function(e) {
                var t = this.createElementNSPlus("gml:boundedBy");
                return this.writeNode("gml:Box", e, t), t;
            }
        }, OpenLayers.Format.GML.v2.prototype.writers.gml),
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,
        "sld": OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,
        "feature": OpenLayers.Format.GML.v2.prototype.writers.feature
    },
    "CLASS_NAME": "OpenLayers.Format.OWSContext.v0_3_1"
}), OpenLayers.Format.SLD.v1_0_0_GeoServer = OpenLayers.Class(OpenLayers.Format.SLD.v1_0_0, {
    "version": "1.0.0",
    "profile": "GeoServer",
    "readers": OpenLayers.Util.applyDefaults({
        "sld": OpenLayers.Util.applyDefaults({
            "Priority": function(e, t) {
                var i = this.readers.ogc._expression.call(this, e);
                i && (t.priority = OpenLayers.String.trim(i));
            },
            "VendorOption": function(e, t) {
                t.vendorOptions || (t.vendorOptions = {}), t.vendorOptions[e.getAttribute("name")] = this.getChildValue(e);
            },
            "TextSymbolizer": function(e, t) {
                OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld.TextSymbolizer.apply(this, arguments);
                var i = this.multipleSymbolizers ? t.symbolizers[t.symbolizers.length - 1] : t.symbolizer.Text;
                void 0 === i.graphic && (i.graphic = !1);
            }
        }, OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld)
    }, OpenLayers.Format.SLD.v1_0_0.prototype.readers),
    "writers": OpenLayers.Util.applyDefaults({
        "sld": OpenLayers.Util.applyDefaults({
            "Priority": function(e) {
                return this.writers.sld._OGCExpression.call(this, "sld:Priority", e);
            },
            "VendorOption": function(e) {
                return this.createElementNSPlus("sld:VendorOption", {
                    "attributes": {
                        "name": e.name
                    },
                    "value": e.value
                });
            },
            "TextSymbolizer": function(e) {
                var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.TextSymbolizer.apply(this, arguments);
                return !1 !== e.graphic && (e.externalGraphic || e.graphicName) && this.writeNode("Graphic", e, t), 
                "priority" in e && this.writeNode("Priority", e.priority, t), this.addVendorOptions(t, e);
            },
            "PointSymbolizer": function(e) {
                var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PointSymbolizer.apply(this, arguments);
                return this.addVendorOptions(t, e);
            },
            "LineSymbolizer": function(e) {
                var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.LineSymbolizer.apply(this, arguments);
                return this.addVendorOptions(t, e);
            },
            "PolygonSymbolizer": function(e) {
                var t = OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld.PolygonSymbolizer.apply(this, arguments);
                return this.addVendorOptions(t, e);
            }
        }, OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld)
    }, OpenLayers.Format.SLD.v1_0_0.prototype.writers),
    "addVendorOptions": function(e, t) {
        if (t.vendorOptions) for (var i in t.vendorOptions) this.writeNode("VendorOption", {
            "name": i,
            "value": t.vendorOptions[i]
        }, e);
        return e;
    },
    "CLASS_NAME": "OpenLayers.Format.SLD.v1_0_0_GeoServer"
}), OpenLayers.Format.SOSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.SOSCapabilities, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "sos": "http://www.opengis.net/sos/1.0",
        "gml": "http://www.opengis.net/gml",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]), this.options = e;
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "gml": OpenLayers.Util.applyDefaults({
            "name": function(e, t) {
                t.name = this.getChildValue(e);
            },
            "TimePeriod": function(e, t) {
                t.timePeriod = {}, this.readChildNodes(e, t.timePeriod);
            },
            "beginPosition": function(e, t) {
                t.beginPosition = this.getChildValue(e);
            },
            "endPosition": function(e, t) {
                t.endPosition = this.getChildValue(e);
            }
        }, OpenLayers.Format.GML.v3.prototype.readers.gml),
        "sos": {
            "Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Contents": function(e, t) {
                t.contents = {}, this.readChildNodes(e, t.contents);
            },
            "ObservationOfferingList": function(e, t) {
                t.offeringList = {}, this.readChildNodes(e, t.offeringList);
            },
            "ObservationOffering": function(e, t) {
                var i = this.getAttributeNS(e, this.namespaces.gml, "id");
                t[i] = {
                    "procedures": [],
                    "observedProperties": [],
                    "featureOfInterestIds": [],
                    "responseFormats": [],
                    "resultModels": [],
                    "responseModes": []
                }, this.readChildNodes(e, t[i]);
            },
            "time": function(e, t) {
                t.time = {}, this.readChildNodes(e, t.time);
            },
            "procedure": function(e, t) {
                t.procedures.push(this.getAttributeNS(e, this.namespaces.xlink, "href"));
            },
            "observedProperty": function(e, t) {
                t.observedProperties.push(this.getAttributeNS(e, this.namespaces.xlink, "href"));
            },
            "featureOfInterest": function(e, t) {
                t.featureOfInterestIds.push(this.getAttributeNS(e, this.namespaces.xlink, "href"));
            },
            "responseFormat": function(e, t) {
                t.responseFormats.push(this.getChildValue(e));
            },
            "resultModel": function(e, t) {
                t.resultModels.push(this.getChildValue(e));
            },
            "responseMode": function(e, t) {
                t.responseModes.push(this.getChildValue(e));
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.SOSCapabilities.v1_0_0"
}), OpenLayers.Format.WCSCapabilities.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "splitSpace": /\s+/
    },
    "defaultPrefix": "wcs",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "CLASS_NAME": "OpenLayers.Format.WCSCapabilities.v1"
}), OpenLayers.Format.WCSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.GML.v3, OpenLayers.Format.WCSCapabilities.v1, {
    "namespaces": {
        "wcs": "http://www.opengis.net/wcs",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows"
    },
    "errorProperty": "serviceIdentification",
    "readers": {
        "wcs": {
            "WCS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Service": function(e, t) {
                var i = {};
                this.readChildNodes(e, i);
                var n = i.serviceContact.providerName;
                delete i.serviceContact.providerName, t.serviceProvider = {
                    "providerName": n,
                    "serviceContact": i.serviceContact
                }, i.serviceContact = void 0, t.serviceIdentification = i;
            },
            "keywords": function(e, t) {
                t.keywords = [], this.readChildNodes(e, t.keywords);
            },
            "keyword": function(e, t) {
                t.push(this.getChildValue(e));
            },
            "responsibleParty": function(e, t) {
                t.serviceContact = {}, this.readChildNodes(e, t.serviceContact);
            },
            "individualName": function(e, t) {
                t.individualName = this.getChildValue(e);
            },
            "organisationName": function(e, t) {
                t.providerName = this.getChildValue(e);
            },
            "positionName": function(e, t) {
                t.positionName = this.getChildValue(e);
            },
            "contactInfo": function(e, t) {
                t.contactInfo = {}, this.readChildNodes(e, t.contactInfo);
            },
            "phone": function(e, t) {
                t.phone = {}, this.readChildNodes(e, t.phone);
            },
            "voice": function(e, t) {
                t.voice = this.getChildValue(e);
            },
            "facsimile": function(e, t) {
                t.facsimile = this.getChildValue(e);
            },
            "address": function(e, t) {
                t.address = {}, this.readChildNodes(e, t.address);
            },
            "deliveryPoint": function(e, t) {
                t.deliveryPoint = this.getChildValue(e);
            },
            "city": function(e, t) {
                t.city = this.getChildValue(e);
            },
            "postalCode": function(e, t) {
                t.postalCode = this.getChildValue(e);
            },
            "country": function(e, t) {
                t.country = this.getChildValue(e);
            },
            "electronicMailAddress": function(e, t) {
                t.electronicMailAddress = this.getChildValue(e);
            },
            "fees": function(e, t) {
                t.fees = this.getChildValue(e);
            },
            "accessConstraints": function(e, t) {
                t.accessConstraints = this.getChildValue(e);
            },
            "ContentMetadata": function(e, t) {
                t.contentMetadata = [], this.readChildNodes(e, t.contentMetadata);
            },
            "CoverageOfferingBrief": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            },
            "name": function(e, t) {
                "Service" === e.parentNode.nodeName.split(":").pop() ? t.title = this.getChildValue(e) : t.identifier = this.getChildValue(e);
            },
            "label": function(e, t) {
                "Service" === e.parentNode.nodeName.split(":").pop() ? t.abstract = this.getChildValue(e) : t.title = this.getChildValue(e);
            },
            "lonLatEnvelope": function(e, t) {
                var i = this.getElementsByTagNameNS(e, "http://www.opengis.net/gml", "pos");
                if (2 == i.length) {
                    var n = {}, s = {};
                    this.xy = !0, this.readers.gml.pos.apply(this, [ i[0], n ]), this.readers.gml.pos.apply(this, [ i[1], s ]), 
                    t.lonLatEnvelope = {}, t.lonLatEnvelope.srsName = e.getAttribute("srsName"), t.lonLatEnvelope.min = n.points[0], 
                    t.lonLatEnvelope.max = s.points[0];
                }
            }
        },
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml
    },
    "CLASS_NAME": "OpenLayers.Format.WCSCapabilities.v1_0_0"
}), OpenLayers.Format.WCSCapabilities.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WCSCapabilities.v1, {
    "namespaces": {
        "wcs": "http://www.opengis.net/wcs/1.1",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows/1.1"
    },
    "errorProperty": "operationsMetadata",
    "readers": {
        "wcs": OpenLayers.Util.applyDefaults({
            "Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Contents": function(e, t) {
                t.contentMetadata = [], this.readChildNodes(e, t.contentMetadata);
            },
            "CoverageSummary": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            },
            "Identifier": function(e, t) {
                t.identifier = this.getChildValue(e);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.abstract = this.getChildValue(e);
            },
            "SupportedCRS": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.supportedCRS || (t.supportedCRS = []), t.supportedCRS.push(i));
            },
            "SupportedFormat": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.supportedFormat || (t.supportedFormat = []), t.supportedFormat.push(i));
            }
        }, OpenLayers.Format.WCSCapabilities.v1.prototype.readers.wcs),
        "ows": OpenLayers.Util.applyDefaults({
            "Keywords": function(e, t) {
                t.keywords = [], this.readChildNodes(e, t.keywords);
            },
            "Keyword": function(e, t) {
                t.push(this.getChildValue(e));
            }
        }, OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows)
    },
    "CLASS_NAME": "OpenLayers.Format.WCSCapabilities.v1_1_0"
}), OpenLayers.Format.WCSDescribeCoverage.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "splitSpace": /\s+/
    },
    "defaultPrefix": "wcs",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        if ("ExceptionReport" === e.nodeName.split(":").pop()) {
            var i = new OpenLayers.Format.OGCExceptionReport();
            t.error = i.read(e);
        } else this.readNode(e, t);
        return t;
    },
    "CLASS_NAME": "OpenLayers.Format.WCSDescribeCoverage.v1"
}), OpenLayers.Format.WCSDescribeCoverage.v1_0_0 = OpenLayers.Class(OpenLayers.Format.WCSDescribeCoverage.v1, {
    "namespaces": {
        "wcs": "http://www.opengis.net/wcs",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows",
        "gml": "http://www.opengis.net/gml"
    },
    "readers": {
        "wcs": {
            "CoverageDescription": function(e, t) {
                t.coverageDescriptions = {}, this.readChildNodes(e, t.coverageDescriptions), t.coverageDescriptionKeys = [];
                for (var i in t.coverageDescriptions) t.coverageDescriptionKeys.push(i);
            },
            "CoverageOffering": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t[i.identifier] = i, i.nativeCRS = i.supportedCRSs.nativeCRSs[0];
            },
            "name": function(e, t) {
                t.identifier = this.getChildValue(e);
            },
            "label": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "lonLatEnvelope": function(e, t) {
                OpenLayers.Format.WCSCapabilities.v1_0_0.prototype.readers.wcs.lonLatEnvelope.call(this, e, t);
            },
            "domainSet": function(e, t) {
                t.domain = {}, this.readChildNodes(e, t.domain);
            },
            "spatialDomain": function(e, t) {
                t.spatialDomain = {
                    "boundingBoxes": {}
                }, this.readChildNodes(e, t.spatialDomain);
            },
            "nativeCRSs": function(e, t) {
                t.nativeCRSs || (t.nativeCRSs = []);
                var i = this.getChildValue(e);
                t.nativeCRSs.push(i);
            },
            "supportedCRSs": function(e, t) {
                t.supportedCRSs || (t.supportedCRSs = []), this.readChildNodes(e, t.supportedCRSs);
            },
            "requestResponseCRSs": function(e, t) {
                t.push(this.getChildValue(e));
            },
            "supportedFormats": function(e, t) {
                t.supportedFormats || (t.supportedFormats = []), this.readChildNodes(e, t.supportedFormats);
            },
            "formats": function(e, t) {
                t.push(this.getChildValue(e));
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,
        "gml": OpenLayers.Util.applyDefaults({
            "Envelope": function(e, t) {
                var i = e.getAttribute("srsName");
                if (i) {
                    var n = {
                        "points": []
                    };
                    this.readChildNodes(e, n);
                    var s = n.points[0], r = n.points[1], o = new OpenLayers.Bounds(s.x, s.y, r.x, r.y);
                    t.boundingBoxes[i] = o;
                }
            }
        }, OpenLayers.Format.GML.v3.prototype.readers.gml)
    },
    "CLASS_NAME": "OpenLayers.Format.WCSDescribeCoverage.v1_0_0"
}), OpenLayers.Format.WCSDescribeCoverage.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WCSDescribeCoverage.v1, {
    "namespaces": {
        "wcs": "http://www.opengis.net/wcs/1.1",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows/1.1",
        "owsesri": "http://www.opengis.net/ows"
    },
    "readers": {
        "wcs": {
            "CoverageDescriptions": function(e, t) {
                t.coverageDescriptions = {}, this.readChildNodes(e, t.coverageDescriptions), t.coverageDescriptionKeys = [];
                for (var i in t.coverageDescriptions) t.coverageDescriptionKeys.push(i);
            },
            "CoverageDescription": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t[i.identifier] = i, i.nativeCRS = i.domain.spatialDomain.gridCRS.gridBaseCRS;
            },
            "Identifier": function(e, t) {
                t.identifier = this.getChildValue(e);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Domain": function(e, t) {
                t.domain = {}, this.readChildNodes(e, t.domain);
            },
            "SpatialDomain": function(e, t) {
                t.spatialDomain = {
                    "boundingBoxes": {}
                };
                var i = {
                    "BoundingBox": []
                };
                this.readChildNodes(e, i);
                for (var n = 0, s = i.BoundingBox.length; n < s; n++) i.BoundingBox[n].crs && (t.spatialDomain.boundingBoxes[i.BoundingBox[n].crs] = i.BoundingBox[n].bounds);
                t.spatialDomain.gridCRS = i.gridCRS;
            },
            "GridCRS": function(e, t) {
                t.gridCRS = {}, this.readChildNodes(e, t.gridCRS);
            },
            "GridBaseCRS": function(e, t) {
                t.gridBaseCRS = this.getChildValue(e);
            },
            "GridType": function(e, t) {
                t.gridType = this.getChildValue(e);
            },
            "GridOrigin": function(e, t) {
                var i = this.getChildValue(e).split(" ");
                2 == i.length && (t.gridOrigin = {}, t.gridOrigin.x = Number(i[0]), t.gridOrigin.y = Number(i[1]));
            },
            "GridOffsets": function(e, t) {
                var i = this.getChildValue(e).split(" ");
                2 == i.length && (t.gridOffsets = {}, t.gridOffsets.x = Number(i[0]), t.gridOffsets.y = Number(i[1]));
            },
            "GridCS": function(e, t) {
                t.gridCS = this.getChildValue(e);
            },
            "SupportedCRS": function(e, t) {
                t.supportedCRSs || (t.supportedCRSs = []);
                var i = this.getChildValue(e);
                t.supportedCRSs.push(i);
            },
            "SupportedFormat": function(e, t) {
                t.supportedFormats || (t.supportedFormats = []);
                var i = this.getChildValue(e);
                t.supportedFormats.push(i);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows,
        "owsesri": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WCSDescribeCoverage.v1_1_0"
}), OpenLayers.Format.WFSCapabilities.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "wfs": "http://www.opengis.net/wfs",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows"
    },
    "errorProperty": "featureTypeList",
    "defaultPrefix": "wfs",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "wfs": {
            "WFS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "FeatureTypeList": function(e, t) {
                t.featureTypeList = {
                    "featureTypes": []
                }, this.readChildNodes(e, t.featureTypeList);
            },
            "FeatureType": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.featureTypes.push(i);
            },
            "Name": function(e, t) {
                var i = this.getChildValue(e);
                if (i) {
                    var n = i.split(":");
                    t.name = n.pop(), n.length > 0 && (t.featureNS = this.lookupNamespaceURI(e, n[0]));
                }
            },
            "Title": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.title = i);
            },
            "Abstract": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.abstract = i);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities.v1"
}), OpenLayers.Format.WFSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1, {
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "Service": function(e, t) {
                t.service = {}, this.readChildNodes(e, t.service);
            },
            "Fees": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.fees = i);
            },
            "AccessConstraints": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.accessConstraints = i);
            },
            "OnlineResource": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.onlineResource = i);
            },
            "Keywords": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.keywords = i.split(", "));
            },
            "Capability": function(e, t) {
                t.capability = {}, this.readChildNodes(e, t.capability);
            },
            "Request": function(e, t) {
                t.request = {}, this.readChildNodes(e, t.request);
            },
            "GetFeature": function(e, t) {
                t.getfeature = {
                    "href": {},
                    "formats": []
                }, this.readChildNodes(e, t.getfeature);
            },
            "ResultFormat": function(e, t) {
                for (var i, n = e.childNodes, s = 0; s < n.length; s++) 1 == (i = n[s]).nodeType && t.formats.push(i.nodeName);
            },
            "DCPType": function(e, t) {
                this.readChildNodes(e, t);
            },
            "HTTP": function(e, t) {
                this.readChildNodes(e, t.href);
            },
            "Get": function(e, t) {
                t.get = e.getAttribute("onlineResource");
            },
            "Post": function(e, t) {
                t.post = e.getAttribute("onlineResource");
            },
            "SRS": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.srs = i);
            },
            "LatLongBoundingBox": function(e, t) {
                t.latLongBoundingBox = [ parseFloat(e.getAttribute("minx")), parseFloat(e.getAttribute("miny")), parseFloat(e.getAttribute("maxx")), parseFloat(e.getAttribute("maxy")) ];
            }
        }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs)
    },
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities.v1_0_0"
}), OpenLayers.Format.WFSCapabilities.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WFSCapabilities.v1, {
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "DefaultSRS": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.srs = i);
            }
        }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers.wfs),
        "ows": OpenLayers.Format.OWSCommon.v1.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities.v1_1_0"
}), OpenLayers.Format.WFSCapabilities.v2_0_0 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "wfs": "http://www.opengis.net/wfs/2.0",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "ows": "http://www.opengis.net/ows/1.1"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "errorProperty": "featureTypeList",
    "defaultPrefix": "wfs",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "wfs": {
            "WFS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "FeatureTypeList": function(e, t) {
                t.featureTypeList = {
                    "featureTypes": []
                }, this.readChildNodes(e, t.featureTypeList);
            },
            "FeatureType": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.featureTypes.push(i);
            },
            "Name": function(e, t) {
                var i = this.getChildValue(e);
                if (i) {
                    var n = i.split(":");
                    t.name = n.pop(), n.length > 0 && (t.featureNS = this.lookupNamespaceURI(e, n[0]));
                }
            },
            "Title": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.title = i);
            },
            "Abstract": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.abstract = i);
            },
            "DefaultCRS": function(e, t) {
                var i = this.getChildValue(e);
                i && (t.srs = i);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WFSCapabilities.v2_0_0"
}), OpenLayers.Format.WFST.v1_0_0 = OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0, OpenLayers.Format.WFST.v1, {
    "version": "1.0.0",
    "srsNameInQuery": !1,
    "schemaLocations": {
        "wfs": "http://schemas.opengis.net/wfs/1.0.0/WFS-transaction.xsd"
    },
    "initialize": function(e) {
        OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this, [ e ]), OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [ e ]);
    },
    "readNode": function(e, t, i) {
        return OpenLayers.Format.GML.v2.prototype.readNode.apply(this, arguments);
    },
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "WFS_TransactionResponse": function(e, t) {
                t.insertIds = [], t.success = !1, this.readChildNodes(e, t);
            },
            "InsertResult": function(e, t) {
                var i = {
                    "fids": []
                };
                this.readChildNodes(e, i), t.insertIds = t.insertIds.concat(i.fids);
            },
            "TransactionResult": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Status": function(e, t) {
                this.readChildNodes(e, t);
            },
            "SUCCESS": function(e, t) {
                t.success = !0;
            }
        }, OpenLayers.Format.WFST.v1.prototype.readers.wfs),
        "gml": OpenLayers.Format.GML.v2.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v2.prototype.readers.feature,
        "ogc": OpenLayers.Format.Filter.v1_0_0.prototype.readers.ogc
    },
    "writers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "Query": function(e) {
                var t = (e = OpenLayers.Util.extend({
                    "featureNS": this.featureNS,
                    "featurePrefix": this.featurePrefix,
                    "featureType": this.featureType,
                    "srsName": this.srsName,
                    "srsNameInQuery": this.srsNameInQuery
                }, e)).featurePrefix, i = this.createElementNSPlus("wfs:Query", {
                    "attributes": {
                        "typeName": (e.featureNS ? t + ":" : "") + e.featureType
                    }
                });
                if (e.srsNameInQuery && e.srsName && i.setAttribute("srsName", e.srsName), e.featureNS && this.setAttributeNS(i, this.namespaces.xmlns, "xmlns:" + t, e.featureNS), 
                e.propertyNames) for (var n = 0, s = e.propertyNames.length; n < s; n++) this.writeNode("ogc:PropertyName", {
                    "property": e.propertyNames[n]
                }, i);
                return e.filter && (this.setFilterProperty(e.filter), this.writeNode("ogc:Filter", e.filter, i)), 
                i;
            }
        }, OpenLayers.Format.WFST.v1.prototype.writers.wfs),
        "gml": OpenLayers.Format.GML.v2.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v2.prototype.writers.feature,
        "ogc": OpenLayers.Format.Filter.v1_0_0.prototype.writers.ogc
    },
    "CLASS_NAME": "OpenLayers.Format.WFST.v1_0_0"
}), OpenLayers.Format.WFST.v2_0_0 = OpenLayers.Class(OpenLayers.Format.Filter.v2_0_0, OpenLayers.Format.WFST.v1, {
    "namespaces": {
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "wfs": "http://www.opengis.net/wfs/2.0",
        "gml": "http://www.opengis.net/gml/3.2",
        "fes": "http://www.opengis.net/fes/2.0",
        "xmlns": "http://www.w3.org/2000/xmlns/"
    },
    "version": "2.0.0",
    "schemaLocations": {
        "wfs": "http://schemas.opengis.net/wfs/2.0/wfs.xsd"
    },
    "initialize": function(e) {
        OpenLayers.Format.Filter.v2_0_0.prototype.initialize.apply(this, [ e ]), OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [ e ]);
    },
    "readNode": function(e, t, i) {
        return OpenLayers.Format.GML.v3.prototype.readNode.apply(this, arguments);
    },
    "readers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "FeatureCollection": function(e, t) {
                t.numberReturned = parseInt(e.getAttribute("numberReturned")), t.numberMatched = parseInt(e.getAttribute("numberMatched")), 
                OpenLayers.Format.WFST.v1.prototype.readers.wfs.FeatureCollection.apply(this, arguments);
            },
            "TransactionResponse": function(e, t) {
                t.insertIds = [], t.success = !1, this.readChildNodes(e, t);
            },
            "TransactionSummary": function(e, t) {
                t.success = !0;
            },
            "InsertResults": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Feature": function(e, t) {
                var i = {
                    "fids": []
                };
                this.readChildNodes(e, i), t.insertIds.push(i.fids[0]);
            },
            "member": function(e, t) {
                this.readChildNodes(e, t);
            },
            "boundedBy": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), i.components && i.components.length > 0 && (t.bounds = i.components[0]);
            }
        }, OpenLayers.Format.WFST.v1.prototype.readers.wfs),
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.readers.feature,
        "ows": OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,
        "fes": OpenLayers.Format.Filter.v2_0_0.prototype.readers.fes
    },
    "writers": {
        "wfs": OpenLayers.Util.applyDefaults({
            "GetFeature": function(e) {
                var t = OpenLayers.Format.WFST.v1.prototype.writers.wfs.GetFeature.apply(this, arguments);
                return e && this.setAttributes(t, {
                    "resultType": e.resultType,
                    "startIndex": e.startIndex,
                    "count": e.count
                }), t;
            },
            "Query": function(e) {
                var t = (e = OpenLayers.Util.extend({
                    "featureNS": this.featureNS,
                    "featurePrefix": this.featurePrefix,
                    "featureType": this.featureType,
                    "srsName": this.srsName
                }, e)).featurePrefix, i = this.createElementNSPlus("wfs:Query", {
                    "attributes": {
                        "typeNames": (e.featureNS ? t + ":" : "") + e.featureType,
                        "srsName": e.srsName
                    }
                });
                if (e.featureNS && this.setAttributeNS(i, this.namespaces.xmlns, "xmlns:" + t, e.featureNS), 
                e.propertyNames) for (var n = 0, s = e.propertyNames.length; n < s; n++) this.writeNode("wfs:PropertyName", {
                    "property": e.propertyNames[n]
                }, i);
                return e.filter && (this.setFilterProperty(e.filter), this.writeNode("fes:Filter", e.filter, i)), 
                i;
            },
            "Update": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Update", {
                    "attributes": {
                        "handle": i && i.handle,
                        "typeName": (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                    }
                });
                this.featureNS && this.setAttributeNS(n, this.namespaces.xmlns, "xmlns:" + this.featurePrefix, this.featureNS);
                var s = t.modified;
                null === this.geometryName || s && void 0 === s.geometry || (this.srsName = this.getSrsName(t), 
                this.writeNode("Property", {
                    "name": this.geometryName,
                    "value": t.geometry
                }, n));
                for (var r in t.attributes) void 0 === t.attributes[r] || s && s.attributes && !(s.attributes && r in s.attributes) || this.writeNode("Property", {
                    "name": r,
                    "value": t.attributes[r]
                }, n);
                return this.writeNode("fes:Filter", new OpenLayers.Filter.FeatureId({
                    "fids": [ t.fid ]
                }), n), n;
            },
            "Property": function(e) {
                var t = this.createElementNSPlus("wfs:Property");
                return this.writeNode("ValueReference", e.name, t), null !== e.value && this.writeNode("Value", e.value, t), 
                t;
            },
            "PropertyName": function(e) {
                return this.createElementNSPlus("wfs:PropertyName", {
                    "value": e.property
                });
            },
            "ValueReference": function(e) {
                return this.createElementNSPlus("wfs:ValueReference", {
                    "value": e
                });
            },
            "Delete": function(e) {
                var t = e.feature, i = e.options, n = this.createElementNSPlus("wfs:Delete", {
                    "attributes": {
                        "handle": i && i.handle,
                        "typeName": (this.featureNS ? this.featurePrefix + ":" : "") + this.featureType
                    }
                });
                return this.featureNS && this.setAttributeNS(n, this.namespaces.xmlns, "xmlns:" + this.featurePrefix, this.featureNS), 
                this.writeNode("fes:Filter", new OpenLayers.Filter.FeatureId({
                    "fids": [ t.fid ]
                }), n), n;
            }
        }, OpenLayers.Format.WFST.v1.prototype.writers.wfs),
        "gml": OpenLayers.Format.GML.v3.prototype.writers.gml,
        "feature": OpenLayers.Format.GML.v3.prototype.writers.feature,
        "fes": OpenLayers.Format.Filter.v2_0_0.prototype.writers.fes
    },
    "CLASS_NAME": "OpenLayers.Format.WFST.v2_0_0"
}), OpenLayers.Format.WMC.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ol": "http://openlayers.org/context",
        "wmc": "http://www.opengis.net/context",
        "sld": "http://www.opengis.net/sld",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "schemaLocation": "",
    "getNamespacePrefix": function(e) {
        var t = null;
        if (null == e) t = this.namespaces[this.defaultPrefix]; else for (t in this.namespaces) if (this.namespaces[t] == e) break;
        return t;
    },
    "defaultPrefix": "wmc",
    "rootPrefix": null,
    "defaultStyleName": "",
    "defaultStyleTitle": "Default",
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = e.documentElement;
        this.rootPrefix = t.prefix;
        var i = {
            "version": t.getAttribute("version")
        };
        return this.runChildNodes(i, t), i;
    },
    "runChildNodes": function(e, t) {
        for (var i, n, s = t.childNodes, r = 0, o = s.length; r < o; ++r) 1 == (i = s[r]).nodeType && (n = this["read_" + this.getNamespacePrefix(i.namespaceURI) + "_" + i.nodeName.split(":").pop()]) && n.apply(this, [ e, i ]);
    },
    "read_wmc_General": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_wmc_BoundingBox": function(e, t) {
        e.projection = t.getAttribute("SRS"), e.bounds = new OpenLayers.Bounds(t.getAttribute("minx"), t.getAttribute("miny"), t.getAttribute("maxx"), t.getAttribute("maxy"));
    },
    "read_wmc_LayerList": function(e, t) {
        e.layersContext = [], this.runChildNodes(e, t);
    },
    "read_wmc_Layer": function(e, t) {
        var i = {
            "visibility": "1" != t.getAttribute("hidden"),
            "queryable": "1" == t.getAttribute("queryable"),
            "formats": [],
            "styles": [],
            "metadata": {}
        };
        this.runChildNodes(i, t), e.layersContext.push(i);
    },
    "read_wmc_Extension": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_ol_units": function(e, t) {
        e.units = this.getChildValue(t);
    },
    "read_ol_maxExtent": function(e, t) {
        var i = new OpenLayers.Bounds(t.getAttribute("minx"), t.getAttribute("miny"), t.getAttribute("maxx"), t.getAttribute("maxy"));
        e.maxExtent = i;
    },
    "read_ol_transparent": function(e, t) {
        e.transparent = this.getChildValue(t);
    },
    "read_ol_numZoomLevels": function(e, t) {
        e.numZoomLevels = parseInt(this.getChildValue(t));
    },
    "read_ol_opacity": function(e, t) {
        e.opacity = parseFloat(this.getChildValue(t));
    },
    "read_ol_singleTile": function(e, t) {
        e.singleTile = "true" == this.getChildValue(t);
    },
    "read_ol_tileSize": function(e, t) {
        var i = {
            "width": t.getAttribute("width"),
            "height": t.getAttribute("height")
        };
        e.tileSize = i;
    },
    "read_ol_gutter": function(e, t) {
        e.gutter = parseInt(this.getChildValue(t));
    },
    "read_ol_isBaseLayer": function(e, t) {
        e.isBaseLayer = "true" == this.getChildValue(t);
    },
    "read_ol_displayInLayerSwitcher": function(e, t) {
        e.displayInLayerSwitcher = "true" == this.getChildValue(t);
    },
    "read_ol_attribution": function(e, t) {
        e.attribution = {}, this.runChildNodes(e.attribution, t);
    },
    "read_wmc_Server": function(e, t) {
        e.version = t.getAttribute("version"), e.url = this.getOnlineResource_href(t), e.metadata.servertitle = t.getAttribute("title");
    },
    "read_wmc_FormatList": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_wmc_Format": function(e, t) {
        var i = {
            "value": this.getChildValue(t)
        };
        "1" == t.getAttribute("current") && (i.current = !0), e.formats.push(i);
    },
    "read_wmc_StyleList": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_wmc_Style": function(e, t) {
        var i = {};
        this.runChildNodes(i, t), "1" == t.getAttribute("current") && (i.current = !0), 
        e.styles.push(i);
    },
    "read_wmc_SLD": function(e, t) {
        this.runChildNodes(e, t);
    },
    "read_sld_StyledLayerDescriptor": function(e, t) {
        var i = OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
        e.body = i;
    },
    "read_sld_FeatureTypeStyle": function(e, t) {
        var i = OpenLayers.Format.XML.prototype.write.apply(this, [ t ]);
        e.body = i;
    },
    "read_wmc_OnlineResource": function(e, t) {
        e.href = this.getAttributeNS(t, this.namespaces.xlink, "href");
    },
    "read_wmc_Name": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.name = i);
    },
    "read_wmc_Title": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.title = i);
    },
    "read_wmc_MetadataURL": function(e, t) {
        e.metadataURL = this.getOnlineResource_href(t);
    },
    "read_wmc_KeywordList": function(e, t) {
        e.keywords = [], this.runChildNodes(e.keywords, t);
    },
    "read_wmc_Keyword": function(e, t) {
        e.push(this.getChildValue(t));
    },
    "read_wmc_Abstract": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.abstract = i);
    },
    "read_wmc_LogoURL": function(e, t) {
        e.logo = {
            "width": t.getAttribute("width"),
            "height": t.getAttribute("height"),
            "format": t.getAttribute("format"),
            "href": this.getOnlineResource_href(t)
        };
    },
    "read_wmc_DescriptionURL": function(e, t) {
        e.descriptionURL = this.getOnlineResource_href(t);
    },
    "read_wmc_ContactInformation": function(e, t) {
        var i = {};
        this.runChildNodes(i, t), e.contactInformation = i;
    },
    "read_wmc_ContactPersonPrimary": function(e, t) {
        var i = {};
        this.runChildNodes(i, t), e.personPrimary = i;
    },
    "read_wmc_ContactPerson": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.person = i);
    },
    "read_wmc_ContactOrganization": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.organization = i);
    },
    "read_wmc_ContactPosition": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.position = i);
    },
    "read_wmc_ContactAddress": function(e, t) {
        var i = {};
        this.runChildNodes(i, t), e.contactAddress = i;
    },
    "read_wmc_AddressType": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.type = i);
    },
    "read_wmc_Address": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.address = i);
    },
    "read_wmc_City": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.city = i);
    },
    "read_wmc_StateOrProvince": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.stateOrProvince = i);
    },
    "read_wmc_PostCode": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.postcode = i);
    },
    "read_wmc_Country": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.country = i);
    },
    "read_wmc_ContactVoiceTelephone": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.phone = i);
    },
    "read_wmc_ContactFacsimileTelephone": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.fax = i);
    },
    "read_wmc_ContactElectronicMailAddress": function(e, t) {
        var i = this.getChildValue(t);
        i && (e.email = i);
    },
    "read_wmc_DataURL": function(e, t) {
        e.dataURL = this.getOnlineResource_href(t);
    },
    "read_wmc_LegendURL": function(e, t) {
        var i = {
            "width": t.getAttribute("width"),
            "height": t.getAttribute("height"),
            "format": t.getAttribute("format"),
            "href": this.getOnlineResource_href(t)
        };
        e.legend = i;
    },
    "read_wmc_DimensionList": function(e, t) {
        e.dimensions = {}, this.runChildNodes(e.dimensions, t);
    },
    "read_wmc_Dimension": function(e, t) {
        var i = {
            "name": t.getAttribute("name").toLowerCase(),
            "units": t.getAttribute("units") || "",
            "unitSymbol": t.getAttribute("unitSymbol") || "",
            "userValue": t.getAttribute("userValue") || "",
            "nearestValue": "1" === t.getAttribute("nearestValue"),
            "multipleValues": "1" === t.getAttribute("multipleValues"),
            "current": "1" === t.getAttribute("current"),
            "default": t.getAttribute("default") || ""
        }, n = this.getChildValue(t);
        i.values = n.split(","), e[i.name] = i;
    },
    "write": function(e, t) {
        var i = this.createElementDefaultNS("ViewContext");
        return this.setAttributes(i, {
            "version": this.VERSION,
            "id": t && "string" == typeof t.id ? t.id : OpenLayers.Util.createUniqueID("OpenLayers_Context_")
        }), this.setAttributeNS(i, this.namespaces.xsi, "xsi:schemaLocation", this.schemaLocation), 
        i.appendChild(this.write_wmc_General(e)), i.appendChild(this.write_wmc_LayerList(e)), 
        OpenLayers.Format.XML.prototype.write.apply(this, [ i ]);
    },
    "createElementDefaultNS": function(e, t, i) {
        var n = this.createElementNS(this.namespaces[this.defaultPrefix], e);
        return t && n.appendChild(this.createTextNode(t)), i && this.setAttributes(n, i), 
        n;
    },
    "setAttributes": function(e, t) {
        var i;
        for (var n in t) (i = t[n].toString()).match(/[A-Z]/) ? this.setAttributeNS(e, null, n, i) : e.setAttribute(n, i);
    },
    "write_wmc_General": function(e) {
        var t = this.createElementDefaultNS("General");
        e.size && t.appendChild(this.createElementDefaultNS("Window", null, {
            "width": e.size.w,
            "height": e.size.h
        }));
        var i = e.bounds;
        return t.appendChild(this.createElementDefaultNS("BoundingBox", null, {
            "minx": i.left.toPrecision(18),
            "miny": i.bottom.toPrecision(18),
            "maxx": i.right.toPrecision(18),
            "maxy": i.top.toPrecision(18),
            "SRS": e.projection
        })), t.appendChild(this.createElementDefaultNS("Title", e.title)), e.keywords && t.appendChild(this.write_wmc_KeywordList(e.keywords)), 
        e.abstract && t.appendChild(this.createElementDefaultNS("Abstract", e.abstract)), 
        e.logo && t.appendChild(this.write_wmc_URLType("LogoURL", e.logo.href, e.logo)), 
        e.descriptionURL && t.appendChild(this.write_wmc_URLType("DescriptionURL", e.descriptionURL)), 
        e.contactInformation && t.appendChild(this.write_wmc_ContactInformation(e.contactInformation)), 
        t.appendChild(this.write_ol_MapExtension(e)), t;
    },
    "write_wmc_KeywordList": function(e) {
        for (var t = this.createElementDefaultNS("KeywordList"), i = 0, n = e.length; i < n; i++) t.appendChild(this.createElementDefaultNS("Keyword", e[i]));
        return t;
    },
    "write_wmc_ContactInformation": function(e) {
        var t = this.createElementDefaultNS("ContactInformation");
        return e.personPrimary && t.appendChild(this.write_wmc_ContactPersonPrimary(e.personPrimary)), 
        e.position && t.appendChild(this.createElementDefaultNS("ContactPosition", e.position)), 
        e.contactAddress && t.appendChild(this.write_wmc_ContactAddress(e.contactAddress)), 
        e.phone && t.appendChild(this.createElementDefaultNS("ContactVoiceTelephone", e.phone)), 
        e.fax && t.appendChild(this.createElementDefaultNS("ContactFacsimileTelephone", e.fax)), 
        e.email && t.appendChild(this.createElementDefaultNS("ContactElectronicMailAddress", e.email)), 
        t;
    },
    "write_wmc_ContactPersonPrimary": function(e) {
        var t = this.createElementDefaultNS("ContactPersonPrimary");
        return e.person && t.appendChild(this.createElementDefaultNS("ContactPerson", e.person)), 
        e.organization && t.appendChild(this.createElementDefaultNS("ContactOrganization", e.organization)), 
        t;
    },
    "write_wmc_ContactAddress": function(e) {
        var t = this.createElementDefaultNS("ContactAddress");
        return e.type && t.appendChild(this.createElementDefaultNS("AddressType", e.type)), 
        e.address && t.appendChild(this.createElementDefaultNS("Address", e.address)), e.city && t.appendChild(this.createElementDefaultNS("City", e.city)), 
        e.stateOrProvince && t.appendChild(this.createElementDefaultNS("StateOrProvince", e.stateOrProvince)), 
        e.postcode && t.appendChild(this.createElementDefaultNS("PostCode", e.postcode)), 
        e.country && t.appendChild(this.createElementDefaultNS("Country", e.country)), t;
    },
    "write_ol_MapExtension": function(e) {
        var t = this.createElementDefaultNS("Extension"), i = e.maxExtent;
        if (i) {
            var n = this.createElementNS(this.namespaces.ol, "ol:maxExtent");
            this.setAttributes(n, {
                "minx": i.left.toPrecision(18),
                "miny": i.bottom.toPrecision(18),
                "maxx": i.right.toPrecision(18),
                "maxy": i.top.toPrecision(18)
            }), t.appendChild(n);
        }
        return t;
    },
    "write_wmc_LayerList": function(e) {
        for (var t = this.createElementDefaultNS("LayerList"), i = 0, n = e.layersContext.length; i < n; ++i) t.appendChild(this.write_wmc_Layer(e.layersContext[i]));
        return t;
    },
    "write_wmc_Layer": function(e) {
        var t = this.createElementDefaultNS("Layer", null, {
            "queryable": e.queryable ? "1" : "0",
            "hidden": e.visibility ? "0" : "1"
        });
        return t.appendChild(this.write_wmc_Server(e)), t.appendChild(this.createElementDefaultNS("Name", e.name)), 
        t.appendChild(this.createElementDefaultNS("Title", e.title)), e.abstract && t.appendChild(this.createElementDefaultNS("Abstract", e.abstract)), 
        e.dataURL && t.appendChild(this.write_wmc_URLType("DataURL", e.dataURL)), e.metadataURL && t.appendChild(this.write_wmc_URLType("MetadataURL", e.metadataURL)), 
        t;
    },
    "write_ol_attribution": function(e) {
        "string" == typeof e && (e = {
            "title": e
        });
        var t = this.createElementNS(this.namespaces.ol, "ol:attribution");
        return t.appendChild(this.createElementDefaultNS("Title", e.title)), e.href && t.appendChild(this.write_wmc_OnlineResource(e.href)), 
        e.logo && t.appendChild(this.write_wmc_URLType("LogoURL", e.logo.href, e.logo)), 
        t;
    },
    "write_wmc_LayerExtension": function(e) {
        var t = this.createElementDefaultNS("Extension"), i = e.maxExtent, n = this.createElementNS(this.namespaces.ol, "ol:maxExtent");
        if (this.setAttributes(n, {
            "minx": i.left.toPrecision(18),
            "miny": i.bottom.toPrecision(18),
            "maxx": i.right.toPrecision(18),
            "maxy": i.top.toPrecision(18)
        }), t.appendChild(n), e.tileSize && !e.singleTile) {
            var s = this.createElementNS(this.namespaces.ol, "ol:tileSize");
            this.setAttributes(s, e.tileSize), t.appendChild(s);
        }
        for (var r, o = [ "transparent", "numZoomLevels", "units", "isBaseLayer", "opacity", "displayInLayerSwitcher", "singleTile", "gutter" ], a = 0, l = o.length; a < l; ++a) (r = this.createOLPropertyNode(e, o[a])) && t.appendChild(r);
        if (e.attribution) {
            var h = this.write_ol_attribution(e.attribution);
            t.appendChild(h);
        }
        return t;
    },
    "createOLPropertyNode": function(e, t) {
        var i = null;
        return null != e[t] && (i = this.createElementNS(this.namespaces.ol, "ol:" + t)).appendChild(this.createTextNode(e[t].toString())), 
        i;
    },
    "write_wmc_Server": function(e) {
        var t = e.server, i = this.createElementDefaultNS("Server"), n = {
            "service": "OGC:WMS",
            "version": t.version
        };
        return t.title && (n.title = t.title), this.setAttributes(i, n), i.appendChild(this.write_wmc_OnlineResource(t.url)), 
        i;
    },
    "write_wmc_URLType": function(e, t, i) {
        var n = this.createElementDefaultNS(e);
        if (n.appendChild(this.write_wmc_OnlineResource(t)), i) for (var s = [ "width", "height", "format" ], r = 0; r < s.length; r++) s[r] in i && n.setAttribute(s[r], i[s[r]]);
        return n;
    },
    "write_wmc_DimensionList": function(e) {
        var t = this.createElementDefaultNS("DimensionList");
        for (var i in e.dimensions) {
            var n = {}, s = e.dimensions[i];
            for (var r in s) "boolean" == typeof s[r] ? n[r] = Number(s[r]) : n[r] = s[r];
            var o = "";
            n.values && (o = n.values.join(","), delete n.values), t.appendChild(this.createElementDefaultNS("Dimension", o, n));
        }
        return t;
    },
    "write_wmc_FormatList": function(e) {
        for (var t = this.createElementDefaultNS("FormatList"), i = 0, n = e.formats.length; i < n; i++) {
            var s = e.formats[i];
            t.appendChild(this.createElementDefaultNS("Format", s.value, s.current && 1 == s.current ? {
                "current": "1"
            } : null));
        }
        return t;
    },
    "write_wmc_StyleList": function(e) {
        var t = this.createElementDefaultNS("StyleList"), i = e.styles;
        if (i && OpenLayers.Util.isArray(i)) for (var n, s = 0, r = i.length; s < r; s++) {
            var o = i[s], a = this.createElementDefaultNS("Style", null, o.current && 1 == o.current ? {
                "current": "1"
            } : null);
            if (o.href) {
                n = this.createElementDefaultNS("SLD"), o.name && n.appendChild(this.createElementDefaultNS("Name", o.name)), 
                o.title && n.appendChild(this.createElementDefaultNS("Title", o.title)), o.legend && n.appendChild(this.write_wmc_URLType("LegendURL", o.legend.href, o.legend));
                var l = this.write_wmc_OnlineResource(o.href);
                n.appendChild(l), a.appendChild(n);
            } else if (o.body) {
                n = this.createElementDefaultNS("SLD"), o.name && n.appendChild(this.createElementDefaultNS("Name", o.name)), 
                o.title && n.appendChild(this.createElementDefaultNS("Title", o.title)), o.legend && n.appendChild(this.write_wmc_URLType("LegendURL", o.legend.href, o.legend));
                var h = OpenLayers.Format.XML.prototype.read.apply(this, [ o.body ]).documentElement;
                n.ownerDocument && n.ownerDocument.importNode && (h = n.ownerDocument.importNode(h, !0)), 
                n.appendChild(h), a.appendChild(n);
            } else a.appendChild(this.createElementDefaultNS("Name", o.name)), a.appendChild(this.createElementDefaultNS("Title", o.title)), 
            o.abstract && a.appendChild(this.createElementDefaultNS("Abstract", o.abstract)), 
            o.legend && a.appendChild(this.write_wmc_URLType("LegendURL", o.legend.href, o.legend));
            t.appendChild(a);
        }
        return t;
    },
    "write_wmc_OnlineResource": function(e) {
        var t = this.createElementDefaultNS("OnlineResource");
        return this.setAttributeNS(t, this.namespaces.xlink, "xlink:type", "simple"), this.setAttributeNS(t, this.namespaces.xlink, "xlink:href", e), 
        t;
    },
    "getOnlineResource_href": function(e) {
        var t = {}, i = e.getElementsByTagName("OnlineResource");
        return i.length > 0 && this.read_wmc_OnlineResource(t, i[0]), t.href;
    },
    "CLASS_NAME": "OpenLayers.Format.WMC.v1"
}), OpenLayers.Format.WMC.v1_0_0 = OpenLayers.Class(OpenLayers.Format.WMC.v1, {
    "VERSION": "1.0.0",
    "schemaLocation": "http://www.opengis.net/context http://schemas.opengis.net/context/1.0.0/context.xsd",
    "initialize": function(e) {
        OpenLayers.Format.WMC.v1.prototype.initialize.apply(this, [ e ]);
    },
    "read_wmc_SRS": function(e, t) {
        var i = this.getChildValue(t);
        "object" != typeof e.projections && (e.projections = {});
        for (var n = i.split(/ +/), s = 0, r = n.length; s < r; s++) e.projections[n[s]] = !0;
    },
    "write_wmc_Layer": function(e) {
        var t = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this, [ e ]);
        if (e.srs) {
            var i = [];
            for (var n in e.srs) i.push(n);
            t.appendChild(this.createElementDefaultNS("SRS", i.join(" ")));
        }
        t.appendChild(this.write_wmc_FormatList(e)), t.appendChild(this.write_wmc_StyleList(e)), 
        e.dimensions && t.appendChild(this.write_wmc_DimensionList(e)), t.appendChild(this.write_wmc_LayerExtension(e));
    },
    "CLASS_NAME": "OpenLayers.Format.WMC.v1_0_0"
}), OpenLayers.Format.WMC.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WMC.v1, {
    "VERSION": "1.1.0",
    "schemaLocation": "http://www.opengis.net/context http://schemas.opengis.net/context/1.1.0/context.xsd",
    "initialize": function(e) {
        OpenLayers.Format.WMC.v1.prototype.initialize.apply(this, [ e ]);
    },
    "read_sld_MinScaleDenominator": function(e, t) {
        var i = parseFloat(this.getChildValue(t));
        i > 0 && (e.maxScale = i);
    },
    "read_sld_MaxScaleDenominator": function(e, t) {
        e.minScale = parseFloat(this.getChildValue(t));
    },
    "read_wmc_SRS": function(e, t) {
        "srs" in e || (e.srs = {}), e.srs[this.getChildValue(t)] = !0;
    },
    "write_wmc_Layer": function(e) {
        var t = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply(this, [ e ]);
        if (e.maxScale) {
            var i = this.createElementNS(this.namespaces.sld, "sld:MinScaleDenominator");
            i.appendChild(this.createTextNode(e.maxScale.toPrecision(16))), t.appendChild(i);
        }
        if (e.minScale) {
            var n = this.createElementNS(this.namespaces.sld, "sld:MaxScaleDenominator");
            n.appendChild(this.createTextNode(e.minScale.toPrecision(16))), t.appendChild(n);
        }
        if (e.srs) for (var s in e.srs) t.appendChild(this.createElementDefaultNS("SRS", s));
        return t.appendChild(this.write_wmc_FormatList(e)), t.appendChild(this.write_wmc_StyleList(e)), 
        e.dimensions && t.appendChild(this.write_wmc_DimensionList(e)), t.appendChild(this.write_wmc_LayerExtension(e)), 
        t;
    },
    "CLASS_NAME": "OpenLayers.Format.WMC.v1_1_0"
}), OpenLayers.Format.WMSCapabilities.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "wms": "http://www.opengis.net/wms",
        "xlink": "http://www.w3.org/1999/xlink",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "defaultPrefix": "wms",
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        var t = e;
        e && 9 == e.nodeType && (e = e.documentElement);
        var i = {};
        if (this.readNode(e, i), void 0 === i.service) {
            var n = new OpenLayers.Format.OGCExceptionReport();
            i.error = n.read(t);
        }
        return i;
    },
    "readers": {
        "wms": {
            "Service": function(e, t) {
                t.service = {}, this.readChildNodes(e, t.service);
            },
            "Name": function(e, t) {
                t.name = this.getChildValue(e);
            },
            "Title": function(e, t) {
                t.title = this.getChildValue(e);
            },
            "Abstract": function(e, t) {
                t.abstract = this.getChildValue(e);
            },
            "BoundingBox": function(e, t) {
                var i = {};
                i.bbox = [ parseFloat(e.getAttribute("minx")), parseFloat(e.getAttribute("miny")), parseFloat(e.getAttribute("maxx")), parseFloat(e.getAttribute("maxy")) ];
                var n = {
                    "x": parseFloat(e.getAttribute("resx")),
                    "y": parseFloat(e.getAttribute("resy"))
                };
                return isNaN(n.x) && isNaN(n.y) || (i.res = n), i;
            },
            "OnlineResource": function(e, t) {
                t.href = this.getAttributeNS(e, this.namespaces.xlink, "href");
            },
            "ContactInformation": function(e, t) {
                t.contactInformation = {}, this.readChildNodes(e, t.contactInformation);
            },
            "ContactPersonPrimary": function(e, t) {
                t.personPrimary = {}, this.readChildNodes(e, t.personPrimary);
            },
            "ContactPerson": function(e, t) {
                t.person = this.getChildValue(e);
            },
            "ContactOrganization": function(e, t) {
                t.organization = this.getChildValue(e);
            },
            "ContactPosition": function(e, t) {
                t.position = this.getChildValue(e);
            },
            "ContactAddress": function(e, t) {
                t.contactAddress = {}, this.readChildNodes(e, t.contactAddress);
            },
            "AddressType": function(e, t) {
                t.type = this.getChildValue(e);
            },
            "Address": function(e, t) {
                t.address = this.getChildValue(e);
            },
            "City": function(e, t) {
                t.city = this.getChildValue(e);
            },
            "StateOrProvince": function(e, t) {
                t.stateOrProvince = this.getChildValue(e);
            },
            "PostCode": function(e, t) {
                t.postcode = this.getChildValue(e);
            },
            "Country": function(e, t) {
                t.country = this.getChildValue(e);
            },
            "ContactVoiceTelephone": function(e, t) {
                t.phone = this.getChildValue(e);
            },
            "ContactFacsimileTelephone": function(e, t) {
                t.fax = this.getChildValue(e);
            },
            "ContactElectronicMailAddress": function(e, t) {
                t.email = this.getChildValue(e);
            },
            "Fees": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.fees = i);
            },
            "AccessConstraints": function(e, t) {
                var i = this.getChildValue(e);
                i && "none" != i.toLowerCase() && (t.accessConstraints = i);
            },
            "Capability": function(e, t) {
                t.capability = {
                    "nestedLayers": [],
                    "layers": []
                }, this.readChildNodes(e, t.capability);
            },
            "Request": function(e, t) {
                t.request = {}, this.readChildNodes(e, t.request);
            },
            "GetCapabilities": function(e, t) {
                t.getcapabilities = {
                    "formats": []
                }, this.readChildNodes(e, t.getcapabilities);
            },
            "Format": function(e, t) {
                OpenLayers.Util.isArray(t.formats) ? t.formats.push(this.getChildValue(e)) : t.format = this.getChildValue(e);
            },
            "DCPType": function(e, t) {
                this.readChildNodes(e, t);
            },
            "HTTP": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Get": function(e, t) {
                t.get = {}, this.readChildNodes(e, t.get), t.href || (t.href = t.get.href);
            },
            "Post": function(e, t) {
                t.post = {}, this.readChildNodes(e, t.post), t.href || (t.href = t.get.href);
            },
            "GetMap": function(e, t) {
                t.getmap = {
                    "formats": []
                }, this.readChildNodes(e, t.getmap);
            },
            "GetFeatureInfo": function(e, t) {
                t.getfeatureinfo = {
                    "formats": []
                }, this.readChildNodes(e, t.getfeatureinfo);
            },
            "Exception": function(e, t) {
                t.exception = {
                    "formats": []
                }, this.readChildNodes(e, t.exception);
            },
            "Layer": function(e, t) {
                var i, n;
                t.capability ? (n = t.capability, i = t) : n = t;
                var s = e.getAttributeNode("queryable"), r = s && s.specified ? e.getAttribute("queryable") : null, o = (s = e.getAttributeNode("cascaded")) && s.specified ? e.getAttribute("cascaded") : null, a = (s = e.getAttributeNode("opaque")) && s.specified ? e.getAttribute("opaque") : null, l = e.getAttribute("noSubsets"), h = e.getAttribute("fixedWidth"), c = e.getAttribute("fixedHeight"), u = i || {}, p = OpenLayers.Util.extend, d = {
                    "nestedLayers": [],
                    "styles": i ? [].concat(i.styles) : [],
                    "srs": i ? p({}, u.srs) : {},
                    "metadataURLs": [],
                    "bbox": i ? p({}, u.bbox) : {},
                    "llbbox": u.llbbox,
                    "dimensions": i ? p({}, u.dimensions) : {},
                    "authorityURLs": i ? p({}, u.authorityURLs) : {},
                    "identifiers": {},
                    "keywords": [],
                    "queryable": r && "" !== r ? "1" === r || "true" === r : u.queryable || !1,
                    "cascaded": null !== o ? parseInt(o) : u.cascaded || 0,
                    "opaque": a ? "1" === a || "true" === a : u.opaque || !1,
                    "noSubsets": null !== l ? "1" === l || "true" === l : u.noSubsets || !1,
                    "fixedWidth": null != h ? parseInt(h) : u.fixedWidth || 0,
                    "fixedHeight": null != c ? parseInt(c) : u.fixedHeight || 0,
                    "minScale": u.minScale,
                    "maxScale": u.maxScale,
                    "attribution": u.attribution
                };
                if (t.nestedLayers.push(d), d.capability = n, this.readChildNodes(e, d), delete d.capability, 
                d.name) {
                    var f = d.name.split(":"), m = n.request, g = m.getfeatureinfo;
                    f.length > 0 && (d.prefix = f[0]), n.layers.push(d), void 0 === d.formats && (d.formats = m.getmap.formats), 
                    void 0 === d.infoFormats && g && (d.infoFormats = g.formats);
                }
            },
            "Attribution": function(e, t) {
                t.attribution = {}, this.readChildNodes(e, t.attribution);
            },
            "LogoURL": function(e, t) {
                t.logo = {
                    "width": e.getAttribute("width"),
                    "height": e.getAttribute("height")
                }, this.readChildNodes(e, t.logo);
            },
            "Style": function(e, t) {
                var i = {};
                t.styles.push(i), this.readChildNodes(e, i);
            },
            "LegendURL": function(e, t) {
                var i = {
                    "width": e.getAttribute("width"),
                    "height": e.getAttribute("height")
                };
                t.legend = i, this.readChildNodes(e, i);
            },
            "MetadataURL": function(e, t) {
                var i = {
                    "type": e.getAttribute("type")
                };
                t.metadataURLs.push(i), this.readChildNodes(e, i);
            },
            "DataURL": function(e, t) {
                t.dataURL = {}, this.readChildNodes(e, t.dataURL);
            },
            "FeatureListURL": function(e, t) {
                t.featureListURL = {}, this.readChildNodes(e, t.featureListURL);
            },
            "AuthorityURL": function(e, t) {
                var i = e.getAttribute("name"), n = {};
                this.readChildNodes(e, n), t.authorityURLs[i] = n.href;
            },
            "Identifier": function(e, t) {
                var i = e.getAttribute("authority");
                t.identifiers[i] = this.getChildValue(e);
            },
            "KeywordList": function(e, t) {
                this.readChildNodes(e, t);
            },
            "SRS": function(e, t) {
                t.srs[this.getChildValue(e)] = !0;
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1"
}), OpenLayers.Format.WMSCapabilities.v1_1 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1, {
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "WMT_MS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Keyword": function(e, t) {
                t.keywords && t.keywords.push(this.getChildValue(e));
            },
            "DescribeLayer": function(e, t) {
                t.describelayer = {
                    "formats": []
                }, this.readChildNodes(e, t.describelayer);
            },
            "GetLegendGraphic": function(e, t) {
                t.getlegendgraphic = {
                    "formats": []
                }, this.readChildNodes(e, t.getlegendgraphic);
            },
            "GetStyles": function(e, t) {
                t.getstyles = {
                    "formats": []
                }, this.readChildNodes(e, t.getstyles);
            },
            "PutStyles": function(e, t) {
                t.putstyles = {
                    "formats": []
                }, this.readChildNodes(e, t.putstyles);
            },
            "UserDefinedSymbolization": function(e, t) {
                var i = {
                    "supportSLD": 1 == parseInt(e.getAttribute("SupportSLD")),
                    "userLayer": 1 == parseInt(e.getAttribute("UserLayer")),
                    "userStyle": 1 == parseInt(e.getAttribute("UserStyle")),
                    "remoteWFS": 1 == parseInt(e.getAttribute("RemoteWFS"))
                };
                t.userSymbols = i;
            },
            "LatLonBoundingBox": function(e, t) {
                t.llbbox = [ parseFloat(e.getAttribute("minx")), parseFloat(e.getAttribute("miny")), parseFloat(e.getAttribute("maxx")), parseFloat(e.getAttribute("maxy")) ];
            },
            "BoundingBox": function(e, t) {
                var i = OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this, [ e, t ]);
                i.srs = e.getAttribute("SRS"), t.bbox[i.srs] = i;
            },
            "ScaleHint": function(e, t) {
                var i = e.getAttribute("min"), n = e.getAttribute("max"), s = Math.pow(2, .5), r = OpenLayers.INCHES_PER_UNIT.m;
                0 != i && (t.maxScale = parseFloat((i / s * r * OpenLayers.DOTS_PER_INCH).toPrecision(13))), 
                n != Number.POSITIVE_INFINITY && (t.minScale = parseFloat((n / s * r * OpenLayers.DOTS_PER_INCH).toPrecision(13)));
            },
            "Dimension": function(e, t) {
                var i = {
                    "name": e.getAttribute("name").toLowerCase(),
                    "units": e.getAttribute("units"),
                    "unitsymbol": e.getAttribute("unitSymbol")
                };
                t.dimensions[i.name] = i;
            },
            "Extent": function(e, t) {
                var i = e.getAttribute("name").toLowerCase();
                if (i in t.dimensions) {
                    var n = t.dimensions[i];
                    n.nearestVal = "1" === e.getAttribute("nearestValue"), n.multipleVal = "1" === e.getAttribute("multipleValues"), 
                    n.current = "1" === e.getAttribute("current"), n.default = e.getAttribute("default") || "";
                    var s = this.getChildValue(e);
                    n.values = s.split(",");
                }
            }
        }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms)
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_1"
}), OpenLayers.Format.WMSCapabilities.v1_1_0 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1, {
    "version": "1.1.0",
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "SRS": function(e, t) {
                for (var i = this.getChildValue(e).split(/ +/), n = 0, s = i.length; n < s; n++) t.srs[i[n]] = !0;
            }
        }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_1_0"
}), OpenLayers.Format.WMSCapabilities.v1_1_1 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1, {
    "version": "1.1.1",
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "SRS": function(e, t) {
                t.srs[this.getChildValue(e)] = !0;
            }
        }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers.wms)
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_1_1"
}), OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_1_1, {
    "version": "1.1.1",
    "profile": "WMSC",
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "VendorSpecificCapabilities": function(e, t) {
                t.vendorSpecific = {
                    "tileSets": []
                }, this.readChildNodes(e, t.vendorSpecific);
            },
            "TileSet": function(e, t) {
                var i = {
                    "srs": {},
                    "bbox": {},
                    "resolutions": []
                };
                this.readChildNodes(e, i), t.tileSets.push(i);
            },
            "Resolutions": function(e, t) {
                for (var i = this.getChildValue(e).split(" "), n = 0, s = i.length; n < s; n++) "" != i[n] && t.resolutions.push(parseFloat(i[n]));
            },
            "Width": function(e, t) {
                t.width = parseInt(this.getChildValue(e));
            },
            "Height": function(e, t) {
                t.height = parseInt(this.getChildValue(e));
            },
            "Layers": function(e, t) {
                t.layers = this.getChildValue(e);
            },
            "Styles": function(e, t) {
                t.styles = this.getChildValue(e);
            }
        }, OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers.wms)
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC"
}), OpenLayers.Format.WMSCapabilities.v1_3 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1, {
    "readers": {
        "wms": OpenLayers.Util.applyDefaults({
            "WMS_Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "LayerLimit": function(e, t) {
                t.layerLimit = parseInt(this.getChildValue(e));
            },
            "MaxWidth": function(e, t) {
                t.maxWidth = parseInt(this.getChildValue(e));
            },
            "MaxHeight": function(e, t) {
                t.maxHeight = parseInt(this.getChildValue(e));
            },
            "BoundingBox": function(e, t) {
                var i = OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms.BoundingBox.apply(this, [ e, t ]);
                i.srs = e.getAttribute("CRS"), t.bbox[i.srs] = i;
            },
            "CRS": function(e, t) {
                this.readers.wms.SRS.apply(this, [ e, t ]);
            },
            "EX_GeographicBoundingBox": function(e, t) {
                t.llbbox = [], this.readChildNodes(e, t.llbbox);
            },
            "westBoundLongitude": function(e, t) {
                t[0] = this.getChildValue(e);
            },
            "eastBoundLongitude": function(e, t) {
                t[2] = this.getChildValue(e);
            },
            "southBoundLatitude": function(e, t) {
                t[1] = this.getChildValue(e);
            },
            "northBoundLatitude": function(e, t) {
                t[3] = this.getChildValue(e);
            },
            "MinScaleDenominator": function(e, t) {
                var i = parseFloat(this.getChildValue(e)).toPrecision(16);
                0 != i && (t.maxScale = i);
            },
            "MaxScaleDenominator": function(e, t) {
                var i = parseFloat(this.getChildValue(e)).toPrecision(16);
                i != Number.POSITIVE_INFINITY && (t.minScale = i);
            },
            "Dimension": function(e, t) {
                var i = {
                    "name": e.getAttribute("name").toLowerCase(),
                    "units": e.getAttribute("units"),
                    "unitsymbol": e.getAttribute("unitSymbol"),
                    "nearestVal": "1" === e.getAttribute("nearestValue"),
                    "multipleVal": "1" === e.getAttribute("multipleValues"),
                    "default": e.getAttribute("default") || "",
                    "current": "1" === e.getAttribute("current"),
                    "values": this.getChildValue(e).split(",")
                };
                t.dimensions[i.name] = i;
            },
            "Keyword": function(e, t) {
                var i = {
                    "value": this.getChildValue(e),
                    "vocabulary": e.getAttribute("vocabulary")
                };
                t.keywords && t.keywords.push(i);
            }
        }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers.wms),
        "sld": {
            "UserDefinedSymbolization": function(e, t) {
                this.readers.wms.UserDefinedSymbolization.apply(this, [ e, t ]), t.userSymbols.inlineFeature = 1 == parseInt(e.getAttribute("InlineFeature")), 
                t.userSymbols.remoteWCS = 1 == parseInt(e.getAttribute("RemoteWCS"));
            },
            "DescribeLayer": function(e, t) {
                this.readers.wms.DescribeLayer.apply(this, [ e, t ]);
            },
            "GetLegendGraphic": function(e, t) {
                this.readers.wms.GetLegendGraphic.apply(this, [ e, t ]);
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_3"
}), OpenLayers.Format.WMSCapabilities.v1_3_0 = OpenLayers.Class(OpenLayers.Format.WMSCapabilities.v1_3, {
    "version": "1.3.0",
    "CLASS_NAME": "OpenLayers.Format.WMSCapabilities.v1_3_0"
}), OpenLayers.Format.WMSDescribeLayer.v1_1_1 = OpenLayers.Class(OpenLayers.Format.WMSDescribeLayer, {
    "initialize": function(e) {
        OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ]));
        for (var t, i, n = e.documentElement.childNodes, s = {
            "layerDescriptions": []
        }, r = 0; r < n.length; ++r) if (t = n[r], "LayerDescription" == (i = t.nodeName)) {
            var o = t.getAttribute("name"), a = "", l = "", h = "";
            t.getAttribute("owsType") ? (a = t.getAttribute("owsType"), l = t.getAttribute("owsURL")) : "" != t.getAttribute("wfs") ? (a = "WFS", 
            l = t.getAttribute("wfs")) : "" != t.getAttribute("wcs") && (a = "WCS", l = t.getAttribute("wcs"));
            var c = t.getElementsByTagName("Query");
            c.length > 0 && ((h = c[0].getAttribute("typeName")) || (h = c[0].getAttribute("typename")));
            var u = {
                "layerName": o,
                "owsType": a,
                "owsURL": l,
                "typeName": h
            };
            s.layerDescriptions.push(u), s.length = s.layerDescriptions.length, s[s.length - 1] = u;
        } else if ("ServiceException" == i) return {
            "error": new OpenLayers.Format.OGCExceptionReport().read(e)
        };
        return s;
    },
    "CLASS_NAME": "OpenLayers.Format.WMSDescribeLayer.v1_1_1"
}), OpenLayers.Format.WMSDescribeLayer.v1_1_0 = OpenLayers.Format.WMSDescribeLayer.v1_1_1, 
OpenLayers.Format.WMTSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1_1_0, {
    "version": "1.0.0",
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "wmts": "http://www.opengis.net/wmts/1.0",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "yx": null,
    "defaultPrefix": "wmts",
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]), this.options = e;
        var t = OpenLayers.Util.extend({}, OpenLayers.Format.WMTSCapabilities.prototype.yx);
        this.yx = OpenLayers.Util.extend(t, this.yx);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t.version = this.version, t;
    },
    "readers": {
        "wmts": {
            "Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Contents": function(e, t) {
                t.contents = {}, t.contents.layers = [], t.contents.tileMatrixSets = {}, this.readChildNodes(e, t.contents);
            },
            "Layer": function(e, t) {
                var i = {
                    "styles": [],
                    "formats": [],
                    "dimensions": [],
                    "tileMatrixSetLinks": []
                };
                this.readChildNodes(e, i), t.layers.push(i);
            },
            "Style": function(e, t) {
                var i = {};
                i.isDefault = "true" === e.getAttribute("isDefault"), this.readChildNodes(e, i), 
                t.styles.push(i);
            },
            "Format": function(e, t) {
                t.formats.push(this.getChildValue(e));
            },
            "TileMatrixSetLink": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.tileMatrixSetLinks.push(i);
            },
            "TileMatrixSet": function(e, t) {
                if (t.layers) {
                    var i = {
                        "matrixIds": []
                    };
                    this.readChildNodes(e, i), t.tileMatrixSets[i.identifier] = i;
                } else t.tileMatrixSet = this.getChildValue(e);
            },
            "TileMatrixSetLimits": function(e, t) {
                t.tileMatrixSetLimits = [], this.readChildNodes(e, t);
            },
            "TileMatrixLimits": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.tileMatrixSetLimits.push(i);
            },
            "MinTileRow": function(e, t) {
                t.minTileRow = parseInt(this.getChildValue(e));
            },
            "MaxTileRow": function(e, t) {
                t.maxTileRow = parseInt(this.getChildValue(e));
            },
            "MinTileCol": function(e, t) {
                t.minTileCol = parseInt(this.getChildValue(e));
            },
            "MaxTileCol": function(e, t) {
                t.maxTileCol = parseInt(this.getChildValue(e));
            },
            "TileMatrix": function(e, t) {
                if (t.identifier) {
                    var i = {
                        "supportedCRS": t.supportedCRS
                    };
                    this.readChildNodes(e, i), t.matrixIds.push(i);
                } else t.tileMatrix = this.getChildValue(e);
            },
            "ScaleDenominator": function(e, t) {
                t.scaleDenominator = parseFloat(this.getChildValue(e));
            },
            "TopLeftCorner": function(e, t) {
                var i, n = this.getChildValue(e).split(" ");
                if (t.supportedCRS) {
                    var s = t.supportedCRS.replace(/urn:ogc:def:crs:(\w+):.+:(\w+)$/, "urn:ogc:def:crs:$1::$2");
                    i = !!this.yx[s];
                }
                t.topLeftCorner = i ? new OpenLayers.LonLat(n[1], n[0]) : new OpenLayers.LonLat(n[0], n[1]);
            },
            "TileWidth": function(e, t) {
                t.tileWidth = parseInt(this.getChildValue(e));
            },
            "TileHeight": function(e, t) {
                t.tileHeight = parseInt(this.getChildValue(e));
            },
            "MatrixWidth": function(e, t) {
                t.matrixWidth = parseInt(this.getChildValue(e));
            },
            "MatrixHeight": function(e, t) {
                t.matrixHeight = parseInt(this.getChildValue(e));
            },
            "ResourceURL": function(e, t) {
                t.resourceUrl = t.resourceUrl || {};
                var i = e.getAttribute("resourceType");
                t.resourceUrls || (t.resourceUrls = []);
                var n = t.resourceUrl[i] = {
                    "format": e.getAttribute("format"),
                    "template": e.getAttribute("template"),
                    "resourceType": i
                };
                t.resourceUrls.push(n);
            },
            "LegendURL": function(e, t) {
                t.legends = t.legends || [];
                var i = {
                    "format": e.getAttribute("format"),
                    "href": e.getAttribute("xlink:href")
                }, n = e.getAttribute("width"), s = e.getAttribute("height"), r = e.getAttribute("minScaleDenominator"), o = e.getAttribute("maxScaleDenominator");
                null !== n && (i.width = parseInt(n)), null !== s && (i.height = parseInt(s)), null !== r && (i.minScaleDenominator = parseInt(r)), 
                null !== o && (i.maxScaleDenominator = parseInt(o)), t.legends.push(i);
            },
            "InfoFormat": function(e, t) {
                t.infoFormats = t.infoFormats || [], t.infoFormats.push(this.getChildValue(e));
            },
            "WSDL": function(e, t) {
                t.wsdl = {}, t.wsdl.href = e.getAttribute("xlink:href");
            },
            "ServiceMetadataURL": function(e, t) {
                t.serviceMetadataUrl = {}, t.serviceMetadataUrl.href = e.getAttribute("xlink:href");
            },
            "Dimension": function(e, t) {
                var i = {
                    "values": []
                };
                this.readChildNodes(e, i), t.dimensions.push(i);
            },
            "Default": function(e, t) {
                t.default = this.getChildValue(e);
            },
            "Value": function(e, t) {
                t.values.push(this.getChildValue(e));
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WMTSCapabilities.v1_0_0"
}), OpenLayers.Format.WPSCapabilities.v1_0_0 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "ows": "http://www.opengis.net/ows/1.1",
        "wps": "http://www.opengis.net/wps/1.0.0",
        "xlink": "http://www.w3.org/1999/xlink"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "initialize": function(e) {
        OpenLayers.Format.XML.prototype.initialize.apply(this, [ e ]);
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "wps": {
            "Capabilities": function(e, t) {
                this.readChildNodes(e, t);
            },
            "ProcessOfferings": function(e, t) {
                t.processOfferings = {}, this.readChildNodes(e, t.processOfferings);
            },
            "Process": function(e, t) {
                var i = {
                    "processVersion": this.getAttributeNS(e, this.namespaces.wps, "processVersion")
                };
                this.readChildNodes(e, i), t[i.identifier] = i;
            },
            "Languages": function(e, t) {
                t.languages = [], this.readChildNodes(e, t.languages);
            },
            "Default": function(e, t) {
                var i = {
                    "isDefault": !0
                };
                this.readChildNodes(e, i), t.push(i);
            },
            "Supported": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WPSCapabilities.v1_0_0"
}), OpenLayers.Format.WPSDescribeProcess.v1_0_0 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "wps": "http://www.opengis.net/wps/1.0.0",
        "ows": "http://www.opengis.net/ows/1.1",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "errorProperty": "processDescriptions",
    "schemaLocation": "http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd",
    "defaultPrefix": "wps",
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "read": function(e) {
        "string" == typeof e && (e = OpenLayers.Format.XML.prototype.read.apply(this, [ e ])), 
        e && 9 == e.nodeType && (e = e.documentElement);
        var t = {};
        return this.readNode(e, t), t;
    },
    "readers": {
        "wps": {
            "ProcessDescriptions": function(e, t) {
                t.processDescriptions = {}, this.readChildNodes(e, t.processDescriptions);
            },
            "ProcessDescription": function(e, t) {
                var i = {
                    "processVersion": this.getAttributeNS(e, this.namespaces.wps, "processVersion"),
                    "statusSupported": "true" === e.getAttribute("statusSupported"),
                    "storeSupported": "true" === e.getAttribute("storeSupported")
                };
                this.readChildNodes(e, i), t[i.identifier] = i;
            },
            "DataInputs": function(e, t) {
                t.dataInputs = [], this.readChildNodes(e, t.dataInputs);
            },
            "ProcessOutputs": function(e, t) {
                t.processOutputs = [], this.readChildNodes(e, t.processOutputs);
            },
            "Output": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.push(i);
            },
            "ComplexOutput": function(e, t) {
                t.complexOutput = {}, this.readChildNodes(e, t.complexOutput);
            },
            "LiteralOutput": function(e, t) {
                t.literalOutput = {}, this.readChildNodes(e, t.literalOutput);
            },
            "Input": function(e, t) {
                var i = {
                    "maxOccurs": parseInt(e.getAttribute("maxOccurs")),
                    "minOccurs": parseInt(e.getAttribute("minOccurs"))
                };
                this.readChildNodes(e, i), t.push(i);
            },
            "BoundingBoxData": function(e, t) {
                t.boundingBoxData = {}, this.readChildNodes(e, t.boundingBoxData);
            },
            "CRS": function(e, t) {
                t.CRSs || (t.CRSs = {}), t.CRSs[this.getChildValue(e)] = !0;
            },
            "LiteralData": function(e, t) {
                t.literalData = {}, this.readChildNodes(e, t.literalData);
            },
            "ComplexData": function(e, t) {
                t.complexData = {}, this.readChildNodes(e, t.complexData);
            },
            "Default": function(e, t) {
                t.default = {}, this.readChildNodes(e, t.default);
            },
            "Supported": function(e, t) {
                t.supported = {}, this.readChildNodes(e, t.supported);
            },
            "Format": function(e, t) {
                var i = {};
                this.readChildNodes(e, i), t.formats || (t.formats = {}), t.formats[i.mimeType] = !0;
            },
            "MimeType": function(e, t) {
                t.mimeType = this.getChildValue(e);
            }
        },
        "ows": OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers.ows
    },
    "CLASS_NAME": "OpenLayers.Format.WPSDescribeProcess"
}), OpenLayers.Format.XLS.v1 = OpenLayers.Class(OpenLayers.Format.XML, {
    "namespaces": {
        "xls": "http://www.opengis.net/xls",
        "gml": "http://www.opengis.net/gml",
        "xsi": "http://www.w3.org/2001/XMLSchema-instance"
    },
    "regExes": {
        "trimSpace": /^\s*|\s*$/g,
        "removeSpace": /\s*/g,
        "splitSpace": /\s+/,
        "trimComma": /\s*,\s*/g
    },
    "xy": !0,
    "defaultPrefix": "xls",
    "schemaLocation": null,
    "read": function(e, t) {
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var i = {};
        return this.readChildNodes(e, i), i;
    },
    "readers": {
        "xls": {
            "XLS": function(e, t) {
                t.version = e.getAttribute("version"), this.readChildNodes(e, t);
            },
            "Response": function(e, t) {
                this.readChildNodes(e, t);
            },
            "GeocodeResponse": function(e, t) {
                t.responseLists = [], this.readChildNodes(e, t);
            },
            "GeocodeResponseList": function(e, t) {
                var i = {
                    "features": [],
                    "numberOfGeocodedAddresses": parseInt(e.getAttribute("numberOfGeocodedAddresses"))
                };
                t.responseLists.push(i), this.readChildNodes(e, i);
            },
            "GeocodedAddress": function(e, t) {
                var i = new OpenLayers.Feature.Vector();
                t.features.push(i), this.readChildNodes(e, i), i.geometry = i.components[0];
            },
            "GeocodeMatchCode": function(e, t) {
                t.attributes.matchCode = {
                    "accuracy": parseFloat(e.getAttribute("accuracy")),
                    "matchType": e.getAttribute("matchType")
                };
            },
            "Address": function(e, t) {
                var i = {
                    "countryCode": e.getAttribute("countryCode"),
                    "addressee": e.getAttribute("addressee"),
                    "street": [],
                    "place": []
                };
                t.attributes.address = i, this.readChildNodes(e, i);
            },
            "freeFormAddress": function(e, t) {
                t.freeFormAddress = this.getChildValue(e);
            },
            "StreetAddress": function(e, t) {
                this.readChildNodes(e, t);
            },
            "Building": function(e, t) {
                t.building = {
                    "number": e.getAttribute("number"),
                    "subdivision": e.getAttribute("subdivision"),
                    "buildingName": e.getAttribute("buildingName")
                };
            },
            "Street": function(e, t) {
                t.street.push(this.getChildValue(e));
            },
            "Place": function(e, t) {
                t.place[e.getAttribute("type")] = this.getChildValue(e);
            },
            "PostalCode": function(e, t) {
                t.postalCode = this.getChildValue(e);
            }
        },
        "gml": OpenLayers.Format.GML.v3.prototype.readers.gml
    },
    "write": function(e) {
        return this.writers.xls.XLS.apply(this, [ e ]);
    },
    "writers": {
        "xls": {
            "XLS": function(e) {
                var t = this.createElementNSPlus("xls:XLS", {
                    "attributes": {
                        "version": this.VERSION,
                        "xsi:schemaLocation": this.schemaLocation
                    }
                });
                return this.writeNode("RequestHeader", e.header, t), this.writeNode("Request", e, t), 
                t;
            },
            "RequestHeader": function(e) {
                return this.createElementNSPlus("xls:RequestHeader");
            },
            "Request": function(e) {
                var t = this.createElementNSPlus("xls:Request", {
                    "attributes": {
                        "methodName": "GeocodeRequest",
                        "requestID": e.requestID || "",
                        "version": this.VERSION
                    }
                });
                return this.writeNode("GeocodeRequest", e.addresses, t), t;
            },
            "GeocodeRequest": function(e) {
                for (var t = this.createElementNSPlus("xls:GeocodeRequest"), i = 0, n = e.length; i < n; i++) this.writeNode("Address", e[i], t);
                return t;
            },
            "Address": function(e) {
                var t = this.createElementNSPlus("xls:Address", {
                    "attributes": {
                        "countryCode": e.countryCode
                    }
                });
                return e.freeFormAddress ? this.writeNode("freeFormAddress", e.freeFormAddress, t) : (e.street && this.writeNode("StreetAddress", e, t), 
                e.municipality && this.writeNode("Municipality", e.municipality, t), e.countrySubdivision && this.writeNode("CountrySubdivision", e.countrySubdivision, t), 
                e.postalCode && this.writeNode("PostalCode", e.postalCode, t)), t;
            },
            "freeFormAddress": function(e) {
                return this.createElementNSPlus("freeFormAddress", {
                    "value": e
                });
            },
            "StreetAddress": function(e) {
                var t = this.createElementNSPlus("xls:StreetAddress");
                e.building && this.writeNode(t, "Building", e.building);
                var i = e.street;
                OpenLayers.Util.isArray(i) || (i = [ i ]);
                for (var n = 0, s = i.length; n < s; n++) this.writeNode("Street", i[n], t);
                return t;
            },
            "Building": function(e) {
                return this.createElementNSPlus("xls:Building", {
                    "attributes": {
                        "number": e.number,
                        "subdivision": e.subdivision,
                        "buildingName": e.buildingName
                    }
                });
            },
            "Street": function(e) {
                return this.createElementNSPlus("xls:Street", {
                    "value": e
                });
            },
            "Municipality": function(e) {
                return this.createElementNSPlus("xls:Place", {
                    "attributes": {
                        "type": "Municipality"
                    },
                    "value": e
                });
            },
            "CountrySubdivision": function(e) {
                return this.createElementNSPlus("xls:Place", {
                    "attributes": {
                        "type": "CountrySubdivision"
                    },
                    "value": e
                });
            },
            "PostalCode": function(e) {
                return this.createElementNSPlus("xls:PostalCode", {
                    "value": e
                });
            }
        }
    },
    "CLASS_NAME": "OpenLayers.Format.XLS.v1"
}), OpenLayers.Format.XLS.v1_1_0 = OpenLayers.Class(OpenLayers.Format.XLS.v1, {
    "VERSION": "1.1",
    "schemaLocation": "http://www.opengis.net/xls http://schemas.opengis.net/ols/1.1.0/LocationUtilityService.xsd",
    "CLASS_NAME": "OpenLayers.Format.XLS.v1_1_0"
}), OpenLayers.Format.XLS.v1_1 = OpenLayers.Format.XLS.v1_1_0, OpenLayers.Layer.ArcGIS93Rest = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {
        "format": "png"
    },
    "isBaseLayer": !0,
    "initialize": function(e, t, i, n) {
        var s = [];
        i = OpenLayers.Util.upperCaseObject(i), s.push(e, t, i, n), OpenLayers.Layer.Grid.prototype.initialize.apply(this, s), 
        OpenLayers.Util.applyDefaults(this.params, OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)), 
        this.params.TRANSPARENT && "true" == this.params.TRANSPARENT.toString().toLowerCase() && (null != n && n.isBaseLayer || (this.isBaseLayer = !1), 
        "jpg" == this.params.FORMAT && (this.params.FORMAT = OpenLayers.Util.alphaHack() ? "gif" : "png"));
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.ArcGIS93Rest(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.projection.getCode().split(":"), i = t[t.length - 1], n = this.getImageSize(e), s = {
            "BBOX": e.toBBOX(),
            "SIZE": n.w + "," + n.h,
            "F": "image",
            "BBOXSR": i,
            "IMAGESR": i
        };
        if (this.layerDefs) {
            var r, o = [];
            for (r in this.layerDefs) this.layerDefs.hasOwnProperty(r) && this.layerDefs[r] && (o.push(r), 
            o.push(":"), o.push(this.layerDefs[r]), o.push(";"));
            o.length > 0 && (s.LAYERDEFS = o.join(""));
        }
        return this.getFullRequestString(s);
    },
    "setLayerFilter": function(e, t) {
        this.layerDefs || (this.layerDefs = {}), t ? this.layerDefs[e] = t : delete this.layerDefs[e];
    },
    "clearLayerFilter": function(e) {
        e ? delete this.layerDefs[e] : delete this.layerDefs;
    },
    "mergeNewParams": function(e) {
        var t = [ OpenLayers.Util.upperCaseObject(e) ];
        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, t);
    },
    "CLASS_NAME": "OpenLayers.Layer.ArcGIS93Rest"
}), OpenLayers.Layer.XYZ = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "sphericalMercator": !1,
    "zoomOffset": 0,
    "serverResolutions": null,
    "initialize": function(e, t, i) {
        (i && i.sphericalMercator || this.sphericalMercator) && (i = OpenLayers.Util.extend({
            "projection": "EPSG:900913",
            "numZoomLevels": this.serverResolutions ? this.serverResolutions.length : 19
        }, i)), OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e || this.name, t || this.url, {}, i ]);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.XYZ(this.name, this.url, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        var t = this.getXYZ(e), i = this.url;
        if (OpenLayers.Util.isArray(i)) {
            var n = "" + t.x + t.y + t.z;
            i = this.selectUrl(n, i);
        }
        return OpenLayers.String.format(i, t);
    },
    "getXYZ": function(e) {
        var t = this.getServerResolution(), i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w)), n = Math.round((this.tileOrigin.lat - e.top) / (t * this.tileSize.h)), s = this.getServerZoom();
        if (this.wrapDateLine) {
            var r = Math.pow(2, s);
            i = (i % r + r) % r;
        }
        return {
            "x": i,
            "y": n,
            "z": s
        };
    },
    "setMap": function(e) {
        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments), this.tileOrigin || (this.tileOrigin = new OpenLayers.LonLat(this.maxExtent.left, this.maxExtent.top));
    },
    "CLASS_NAME": "OpenLayers.Layer.XYZ"
}), OpenLayers.Layer.ArcGISCache = OpenLayers.Class(OpenLayers.Layer.XYZ, {
    "url": null,
    "tileOrigin": null,
    "tileSize": new OpenLayers.Size(256, 256),
    "useArcGISServer": !0,
    "type": "png",
    "useScales": !1,
    "overrideDPI": !1,
    "hexZoom": !1,
    "initialize": function(e, t, i) {
        if (OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments), this.resolutions && (this.serverResolutions = this.resolutions, 
        this.maxExtent = this.getMaxExtentForResolution(this.resolutions[0])), this.layerInfo) {
            var n = this.layerInfo, s = new OpenLayers.Bounds(n.fullExtent.xmin, n.fullExtent.ymin, n.fullExtent.xmax, n.fullExtent.ymax);
            if (this.projection = "EPSG:" + n.spatialReference.wkid, this.sphericalMercator = 102100 == n.spatialReference.wkid, 
            this.units = "esriFeet" == n.units ? "ft" : "m", n.tileInfo) {
                this.tileSize = new OpenLayers.Size(n.tileInfo.width || n.tileInfo.cols, n.tileInfo.height || n.tileInfo.rows), 
                this.tileOrigin = new OpenLayers.LonLat(n.tileInfo.origin.x, n.tileInfo.origin.y);
                var r = new OpenLayers.Geometry.Point(s.left, s.top), o = new OpenLayers.Geometry.Point(s.right, s.bottom);
                this.useScales ? this.scales = [] : this.resolutions = [], this.lods = [];
                for (var a in n.tileInfo.lods) if (n.tileInfo.lods.hasOwnProperty(a)) {
                    var l = n.tileInfo.lods[a];
                    this.useScales ? this.scales.push(l.scale) : this.resolutions.push(l.resolution);
                    var h = this.getContainingTileCoords(r, l.resolution);
                    l.startTileCol = h.x, l.startTileRow = h.y;
                    var c = this.getContainingTileCoords(o, l.resolution);
                    l.endTileCol = c.x, l.endTileRow = c.y, this.lods.push(l);
                }
                this.maxExtent = this.calculateMaxExtentWithLOD(this.lods[0]), this.serverResolutions = this.resolutions, 
                this.overrideDPI && n.tileInfo.dpi && (OpenLayers.DOTS_PER_INCH = n.tileInfo.dpi);
            }
        }
    },
    "getContainingTileCoords": function(e, t) {
        return new OpenLayers.Pixel(Math.max(Math.floor((e.x - this.tileOrigin.lon) / (this.tileSize.w * t)), 0), Math.max(Math.floor((this.tileOrigin.lat - e.y) / (this.tileSize.h * t)), 0));
    },
    "calculateMaxExtentWithLOD": function(e) {
        var t = e.endTileCol - e.startTileCol + 1, i = e.endTileRow - e.startTileRow + 1, n = this.tileOrigin.lon + e.startTileCol * this.tileSize.w * e.resolution, s = n + t * this.tileSize.w * e.resolution, r = this.tileOrigin.lat - e.startTileRow * this.tileSize.h * e.resolution, o = r - i * this.tileSize.h * e.resolution;
        return new OpenLayers.Bounds(n, o, s, r);
    },
    "calculateMaxExtentWithExtent": function(e, t) {
        var i = new OpenLayers.Geometry.Point(e.left, e.top), n = new OpenLayers.Geometry.Point(e.right, e.bottom), s = this.getContainingTileCoords(i, t), r = this.getContainingTileCoords(n, t), o = {
            "resolution": t,
            "startTileCol": s.x,
            "startTileRow": s.y,
            "endTileCol": r.x,
            "endTileRow": r.y
        };
        return this.calculateMaxExtentWithLOD(o);
    },
    "getUpperLeftTileCoord": function(e) {
        var t = new OpenLayers.Geometry.Point(this.maxExtent.left, this.maxExtent.top);
        return this.getContainingTileCoords(t, e);
    },
    "getLowerRightTileCoord": function(e) {
        var t = new OpenLayers.Geometry.Point(this.maxExtent.right, this.maxExtent.bottom);
        return this.getContainingTileCoords(t, e);
    },
    "getMaxExtentForResolution": function(e) {
        var t = this.getUpperLeftTileCoord(e), i = this.getLowerRightTileCoord(e), n = i.x - t.x + 1, s = i.y - t.y + 1, r = this.tileOrigin.lon + t.x * this.tileSize.w * e, o = r + n * this.tileSize.w * e, a = this.tileOrigin.lat - t.y * this.tileSize.h * e, l = a - s * this.tileSize.h * e;
        return new OpenLayers.Bounds(r, l, o, a);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.ArcGISCache(this.name, this.url, this.options)), 
        OpenLayers.Layer.XYZ.prototype.clone.apply(this, [ e ]);
    },
    "initGriddedTiles": function(e) {
        delete this._tileOrigin, OpenLayers.Layer.XYZ.prototype.initGriddedTiles.apply(this, arguments);
    },
    "getMaxExtent": function() {
        var e = this.map.getResolution();
        return this.maxExtent = this.getMaxExtentForResolution(e);
    },
    "getTileOrigin": function() {
        if (!this._tileOrigin) {
            var e = this.getMaxExtent();
            this._tileOrigin = new OpenLayers.LonLat(e.left, e.bottom);
        }
        return this._tileOrigin;
    },
    "getURL": function(e) {
        var t = this.getResolution(), i = this.tileOrigin.lon + t * this.tileSize.w / 2, n = this.tileOrigin.lat - t * this.tileSize.h / 2, s = e.getCenterLonLat(), r = (s.lon, 
        s.lat, Math.round(Math.abs((s.lon - i) / (t * this.tileSize.w)))), o = Math.round(Math.abs((n - s.lat) / (t * this.tileSize.h))), a = this.map.getZoom();
        if (this.lods) {
            var l = this.lods[this.map.getZoom()];
            if (r < l.startTileCol || r > l.endTileCol || o < l.startTileRow || o > l.endTileRow) return null;
        } else {
            var h = this.getUpperLeftTileCoord(t), c = this.getLowerRightTileCoord(t);
            if (r < h.x || r >= c.x || o < h.y || o >= c.y) return null;
        }
        var u = this.url, p = "" + r + o + a;
        return OpenLayers.Util.isArray(u) && (u = this.selectUrl(p, u)), this.useArcGISServer ? u += "/tile/${z}/${y}/${x}" : (r = "C" + OpenLayers.Number.zeroPad(r, 8, 16), 
        o = "R" + OpenLayers.Number.zeroPad(o, 8, 16), a = "L" + OpenLayers.Number.zeroPad(a, 2, this.hexZoom ? 16 : 10), 
        u = u + "/${z}/${y}/${x}." + this.type), u = OpenLayers.String.format(u, {
            "x": r,
            "y": o,
            "z": a
        }), OpenLayers.Util.urlAppend(u, OpenLayers.Util.getParameterString(this.params));
    },
    "CLASS_NAME": "OpenLayers.Layer.ArcGISCache"
}), OpenLayers.Layer.ArcIMS = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {
        "ClientVersion": "9.2",
        "ServiceName": ""
    },
    "featureCoordSys": "4326",
    "filterCoordSys": "4326",
    "layers": null,
    "async": !0,
    "name": "ArcIMS",
    "isBaseLayer": !0,
    "DEFAULT_OPTIONS": {
        "tileSize": new OpenLayers.Size(512, 512),
        "featureCoordSys": "4326",
        "filterCoordSys": "4326",
        "layers": null,
        "isBaseLayer": !0,
        "async": !0,
        "name": "ArcIMS"
    },
    "initialize": function(e, t, i) {
        this.tileSize = new OpenLayers.Size(512, 512), this.params = OpenLayers.Util.applyDefaults({
            "ServiceName": i.serviceName
        }, this.DEFAULT_PARAMS), this.options = OpenLayers.Util.applyDefaults(i, this.DEFAULT_OPTIONS), 
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e, t, this.params, i ]), 
        this.transparent && (this.isBaseLayer || (this.isBaseLayer = !1), "image/jpeg" == this.format && (this.format = OpenLayers.Util.alphaHack() ? "image/gif" : "image/png")), 
        null === this.options.layers && (this.options.layers = []);
    },
    "getURL": function(e) {
        var t = "";
        e = this.adjustBounds(e);
        var i = new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options, {
            "requesttype": "image",
            "envelope": e.toArray(),
            "tileSize": this.tileSize
        })), n = new OpenLayers.Request.POST({
            "url": this.getFullRequestString(),
            "data": i.write(),
            "async": !1
        });
        if (null != n) {
            var s = n.responseXML;
            s && s.documentElement || (s = n.responseText);
            var r = new OpenLayers.Format.ArcXML().read(s);
            t = this.getUrlOrImage(r.image.output);
        }
        return t;
    },
    "getURLasync": function(e, t, i) {
        e = this.adjustBounds(e);
        var n = new OpenLayers.Format.ArcXML(OpenLayers.Util.extend(this.options, {
            "requesttype": "image",
            "envelope": e.toArray(),
            "tileSize": this.tileSize
        }));
        OpenLayers.Request.POST({
            "url": this.getFullRequestString(),
            "async": !0,
            "data": n.write(),
            "callback": function(e) {
                var n = e.responseXML;
                n && n.documentElement || (n = e.responseText);
                var s = new OpenLayers.Format.ArcXML().read(n);
                t.call(i, this.getUrlOrImage(s.image.output));
            },
            "scope": this
        });
    },
    "getUrlOrImage": function(e) {
        var t = "";
        return e.url ? t = e.url : e.data && (t = "data:image/" + e.type + ";base64," + e.data), 
        t;
    },
    "setLayerQuery": function(e, t) {
        for (var i = 0; i < this.options.layers.length; i++) if (e == this.options.layers[i].id) return void (this.options.layers[i].query = t);
        this.options.layers.push({
            "id": e,
            "visible": !0,
            "query": t
        });
    },
    "getFeatureInfo": function(e, t, i) {
        var n = i.buffer || 1, s = i.callback || function() {}, r = i.scope || window, o = {};
        OpenLayers.Util.extend(o, this.options), o.requesttype = "feature", e instanceof OpenLayers.LonLat ? (o.polygon = null, 
        o.envelope = [ e.lon - n, e.lat - n, e.lon + n, e.lat + n ]) : e instanceof OpenLayers.Geometry.Polygon && (o.envelope = null, 
        o.polygon = e);
        var a = new OpenLayers.Format.ArcXML(o);
        if (OpenLayers.Util.extend(a.request.get_feature, i), a.request.get_feature.layer = t.id, 
        "number" == typeof t.query.accuracy) a.request.get_feature.query.accuracy = t.query.accuracy; else {
            var l = this.map.getCenter(), h = this.map.getViewPortPxFromLonLat(l);
            h.x++;
            var c = this.map.getLonLatFromPixel(h);
            a.request.get_feature.query.accuracy = c.lon - l.lon;
        }
        a.request.get_feature.query.where = t.query.where, a.request.get_feature.query.spatialfilter.relation = "area_intersection", 
        OpenLayers.Request.POST({
            "url": this.getFullRequestString({
                "CustomService": "Query"
            }),
            "data": a.write(),
            "callback": function(e) {
                var t = a.parseResponse(e.responseText);
                a.iserror() ? s.call(r, null) : s.call(r, t.features);
            }
        });
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.ArcIMS(this.name, this.url, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "CLASS_NAME": "OpenLayers.Layer.ArcIMS"
}), OpenLayers.Layer.Bing = OpenLayers.Class(OpenLayers.Layer.XYZ, {
    "key": null,
    "serverResolutions": [ 156543.03390625, 78271.516953125, 39135.7584765625, 19567.87923828125, 9783.939619140625, 4891.9698095703125, 2445.9849047851562, 1222.9924523925781, 611.4962261962891, 305.74811309814453, 152.87405654907226, 76.43702827453613, 38.218514137268066, 19.109257068634033, 9.554628534317017, 4.777314267158508, 2.388657133579254, 1.194328566789627, .5971642833948135, .29858214169740677, .14929107084870338, .07464553542435169, .03732276771218, .01866138385609 ],
    "attributionTemplate": '<span class="olBingAttribution ${type}"><div><a target="_blank" href="http://www.bing.com/maps/"><img src="${logo}" /></a></div>${copyrights}<a style="white-space: nowrap" target="_blank" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a></span>',
    "metadata": null,
    "protocolRegex": /^http:/i,
    "type": "Road",
    "culture": "en-US",
    "metadataParams": null,
    "tileOptions": null,
    "protocol": ~window.location.href.indexOf("http") ? "" : "http:",
    "initialize": function(e) {
        var t = [ (e = OpenLayers.Util.applyDefaults({
            "sphericalMercator": !0
        }, e)).name || "Bing " + (e.type || this.type), null, e ];
        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, t), this.tileOptions = OpenLayers.Util.extend({
            "crossOriginKeyword": "anonymous"
        }, this.options.tileOptions), this.loadMetadata();
    },
    "loadMetadata": function() {
        this._callbackId = "_callback_" + this.id.replace(/\./g, "_"), window[this._callbackId] = OpenLayers.Function.bind(OpenLayers.Layer.Bing.processMetadata, this);
        var e = OpenLayers.Util.applyDefaults({
            "key": this.key,
            "jsonp": this._callbackId,
            "include": "ImageryProviders"
        }, this.metadataParams), t = this.protocol + "//dev.virtualearth.net/REST/v1/Imagery/Metadata/" + this.type + "?" + OpenLayers.Util.getParameterString(e), i = document.createElement("script");
        i.type = "text/javascript", i.src = t, i.id = this._callbackId, document.getElementsByTagName("head")[0].appendChild(i);
    },
    "initLayer": function() {
        var e = this.metadata.resourceSets[0].resources[0], t = e.imageUrl.replace("{quadkey}", "${quadkey}");
        t = (t = t.replace("{culture}", this.culture)).replace(this.protocolRegex, this.protocol), 
        this.url = [];
        for (var i = 0; i < e.imageUrlSubdomains.length; ++i) this.url.push(t.replace("{subdomain}", e.imageUrlSubdomains[i]));
        this.addOptions({
            "maxResolution": Math.min(this.serverResolutions[e.zoomMin], this.maxResolution || Number.POSITIVE_INFINITY),
            "numZoomLevels": Math.min(e.zoomMax + 1 - e.zoomMin, this.numZoomLevels)
        }, !0), this.isBaseLayer || this.redraw(), this.updateAttribution();
    },
    "getURL": function(e) {
        if (this.url) {
            for (var t = this.getXYZ(e), i = t.x, n = t.y, s = t.z, r = [], o = s; o > 0; --o) {
                var a = "0", l = 1 << o - 1;
                0 != (i & l) && a++, 0 != (n & l) && (a++, a++), r.push(a);
            }
            var h = r.join(""), c = this.selectUrl("" + i + n + s, this.url);
            return OpenLayers.String.format(c, {
                "quadkey": h
            });
        }
    },
    "updateAttribution": function() {
        var e = this.metadata;
        if (e.resourceSets && this.map && this.map.center) {
            var t, i, n, s, r, o, a, l = e.resourceSets[0].resources[0], h = this.map.getExtent().transform(this.map.getProjectionObject(), new OpenLayers.Projection("EPSG:4326")), c = l.imageryProviders || [], u = OpenLayers.Util.indexOf(this.serverResolutions, this.getServerResolution()), p = "";
            for (i = 0, n = c.length; i < n; ++i) for (s = 0, r = (t = c[i]).coverageAreas.length; s < r; ++s) a = t.coverageAreas[s], 
            o = OpenLayers.Bounds.fromArray(a.bbox, !0), h.intersectsBounds(o) && u <= a.zoomMax && u >= a.zoomMin && (p += t.attribution + " ");
            var d = e.brandLogoUri.replace(this.protocolRegex, this.protocol);
            this.attribution = OpenLayers.String.format(this.attributionTemplate, {
                "type": this.type.toLowerCase(),
                "logo": d,
                "copyrights": p
            }), this.map && this.map.events.triggerEvent("changelayer", {
                "layer": this,
                "property": "attribution"
            });
        }
    },
    "setMap": function() {
        OpenLayers.Layer.XYZ.prototype.setMap.apply(this, arguments), this.map.events.register("moveend", this, this.updateAttribution);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.Bing(this.options)), e = OpenLayers.Layer.XYZ.prototype.clone.apply(this, [ e ]);
    },
    "destroy": function() {
        this.map && this.map.events.unregister("moveend", this, this.updateAttribution), 
        OpenLayers.Layer.XYZ.prototype.destroy.apply(this, arguments);
    },
    "CLASS_NAME": "OpenLayers.Layer.Bing"
}), OpenLayers.Layer.Bing.processMetadata = function(e) {
    this.metadata = e, this.initLayer();
    var t = document.getElementById(this._callbackId);
    t.parentNode.removeChild(t), window[this._callbackId] = void 0, delete this._callbackId;
}, OpenLayers.Layer.Markers = OpenLayers.Class(OpenLayers.Layer, {
    "isBaseLayer": !1,
    "markers": null,
    "drawn": !1,
    "initialize": function(e, t) {
        OpenLayers.Layer.prototype.initialize.apply(this, arguments), this.markers = [];
    },
    "destroy": function() {
        this.clearMarkers(), this.markers = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "setOpacity": function(e) {
        if (e != this.opacity) {
            this.opacity = e;
            for (var t = 0, i = this.markers.length; t < i; t++) this.markers[t].setOpacity(this.opacity);
        }
    },
    "moveTo": function(e, t, i) {
        if (OpenLayers.Layer.prototype.moveTo.apply(this, arguments), t || !this.drawn) {
            for (var n = 0, s = this.markers.length; n < s; n++) this.drawMarker(this.markers[n]);
            this.drawn = !0;
        }
    },
    "addMarker": function(e) {
        this.markers.push(e), this.opacity < 1 && e.setOpacity(this.opacity), this.map && this.map.getExtent() && (e.map = this.map, 
        this.drawMarker(e));
    },
    "removeMarker": function(e) {
        this.markers && this.markers.length && (OpenLayers.Util.removeItem(this.markers, e), 
        e.erase());
    },
    "clearMarkers": function() {
        if (null != this.markers) for (;this.markers.length > 0; ) this.removeMarker(this.markers[0]);
    },
    "drawMarker": function(e) {
        var t = this.map.getLayerPxFromLonLat(e.lonlat);
        if (null == t) e.display(!1); else if (e.isDrawn()) e.icon && e.icon.moveTo(t); else {
            var i = e.draw(t);
            this.div.appendChild(i);
        }
    },
    "getDataExtent": function() {
        e = null;
        if (this.markers && this.markers.length > 0) for (var e = new OpenLayers.Bounds(), t = 0, i = this.markers.length; t < i; t++) {
            var n = this.markers[t];
            e.extend(n.lonlat);
        }
        return e;
    },
    "CLASS_NAME": "OpenLayers.Layer.Markers"
}), OpenLayers.Layer.Boxes = OpenLayers.Class(OpenLayers.Layer.Markers, {
    "drawMarker": function(e) {
        var t = this.map.getLayerPxFromLonLat({
            "lon": e.bounds.left,
            "lat": e.bounds.top
        }), i = this.map.getLayerPxFromLonLat({
            "lon": e.bounds.right,
            "lat": e.bounds.bottom
        });
        if (null == i || null == t) e.display(!1); else {
            var n = e.draw(t, {
                "w": Math.max(1, i.x - t.x),
                "h": Math.max(1, i.y - t.y)
            });
            e.drawn || (this.div.appendChild(n), e.drawn = !0);
        }
    },
    "removeMarker": function(e) {
        OpenLayers.Util.removeItem(this.markers, e), null != e.div && e.div.parentNode == this.div && this.div.removeChild(e.div);
    },
    "CLASS_NAME": "OpenLayers.Layer.Boxes"
}), OpenLayers.Layer.EventPane = OpenLayers.Class(OpenLayers.Layer, {
    "smoothDragPan": !0,
    "isBaseLayer": !0,
    "isFixed": !0,
    "pane": null,
    "mapObject": null,
    "initialize": function(e, t) {
        OpenLayers.Layer.prototype.initialize.apply(this, arguments), null == this.pane && (this.pane = OpenLayers.Util.createDiv(this.div.id + "_EventPane"));
    },
    "destroy": function() {
        this.mapObject = null, this.pane = null, OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "setMap": function(e) {
        OpenLayers.Layer.prototype.setMap.apply(this, arguments), this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1, 
        this.pane.style.display = this.div.style.display, this.pane.style.width = "100%", 
        this.pane.style.height = "100%", "msie" == OpenLayers.BROWSER_NAME && (this.pane.style.background = "url(" + OpenLayers.Util.getImageLocation("blank.gif") + ")"), 
        this.isFixed ? this.map.viewPortDiv.appendChild(this.pane) : this.map.layerContainerDiv.appendChild(this.pane), 
        this.loadMapObject(), null == this.mapObject && this.loadWarningMessage(), this.map.events.register("zoomstart", this, this.onZoomStart);
    },
    "removeMap": function(e) {
        this.map.events.unregister("zoomstart", this, this.onZoomStart), this.pane && this.pane.parentNode && this.pane.parentNode.removeChild(this.pane), 
        OpenLayers.Layer.prototype.removeMap.apply(this, arguments);
    },
    "onZoomStart": function(e) {
        if (null != this.mapObject) {
            var t = this.getMapObjectLonLatFromOLLonLat(e.center), i = this.getMapObjectZoomFromOLZoom(e.zoom);
            this.setMapObjectCenter(t, i, !1);
        }
    },
    "loadWarningMessage": function() {
        this.div.style.backgroundColor = "darkblue";
        var e = this.map.getSize(), t = Math.min(e.w, 300), i = Math.min(e.h, 200), n = new OpenLayers.Size(t, i), s = new OpenLayers.Pixel(e.w / 2, e.h / 2).add(-n.w / 2, -n.h / 2), r = OpenLayers.Util.createDiv(this.name + "_warning", s, n, null, null, null, "auto");
        r.style.padding = "7px", r.style.backgroundColor = "yellow", r.innerHTML = this.getWarningHTML(), 
        this.div.appendChild(r);
    },
    "getWarningHTML": function() {
        return "";
    },
    "display": function(e) {
        OpenLayers.Layer.prototype.display.apply(this, arguments), this.pane.style.display = this.div.style.display;
    },
    "setZIndex": function(e) {
        OpenLayers.Layer.prototype.setZIndex.apply(this, arguments), this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1;
    },
    "moveByPx": function(e, t) {
        OpenLayers.Layer.prototype.moveByPx.apply(this, arguments), this.dragPanMapObject ? this.dragPanMapObject(e, -t) : this.moveTo(this.map.getCachedCenter());
    },
    "moveTo": function(e, t, i) {
        if (OpenLayers.Layer.prototype.moveTo.apply(this, arguments), null != this.mapObject) {
            var n = this.map.getCenter(), s = this.map.getZoom();
            if (null != n) {
                var r = this.getMapObjectCenter(), o = this.getOLLonLatFromMapObjectLonLat(r), a = this.getMapObjectZoom(), l = this.getOLZoomFromMapObjectZoom(a);
                if (!n.equals(o) || s != l) if (!t && o && this.dragPanMapObject && this.smoothDragPan) {
                    var h = this.map.getViewPortPxFromLonLat(o), c = this.map.getViewPortPxFromLonLat(n);
                    this.dragPanMapObject(c.x - h.x, h.y - c.y);
                } else {
                    var u = this.getMapObjectLonLatFromOLLonLat(n), p = this.getMapObjectZoomFromOLZoom(s);
                    this.setMapObjectCenter(u, p, i);
                }
            }
        }
    },
    "getLonLatFromViewPortPx": function(e) {
        var t = null;
        if (null != this.mapObject && null != this.getMapObjectCenter()) {
            var i = this.getMapObjectPixelFromOLPixel(e), n = this.getMapObjectLonLatFromMapObjectPixel(i);
            t = this.getOLLonLatFromMapObjectLonLat(n);
        }
        return t;
    },
    "getViewPortPxFromLonLat": function(e) {
        var t = null;
        if (null != this.mapObject && null != this.getMapObjectCenter()) {
            var i = this.getMapObjectLonLatFromOLLonLat(e), n = this.getMapObjectPixelFromMapObjectLonLat(i);
            t = this.getOLPixelFromMapObjectPixel(n);
        }
        return t;
    },
    "getOLLonLatFromMapObjectLonLat": function(e) {
        var t = null;
        if (null != e) {
            var i = this.getLongitudeFromMapObjectLonLat(e), n = this.getLatitudeFromMapObjectLonLat(e);
            t = new OpenLayers.LonLat(i, n);
        }
        return t;
    },
    "getMapObjectLonLatFromOLLonLat": function(e) {
        var t = null;
        return null != e && (t = this.getMapObjectLonLatFromLonLat(e.lon, e.lat)), t;
    },
    "getOLPixelFromMapObjectPixel": function(e) {
        var t = null;
        if (null != e) {
            var i = this.getXFromMapObjectPixel(e), n = this.getYFromMapObjectPixel(e);
            t = new OpenLayers.Pixel(i, n);
        }
        return t;
    },
    "getMapObjectPixelFromOLPixel": function(e) {
        var t = null;
        return null != e && (t = this.getMapObjectPixelFromXY(e.x, e.y)), t;
    },
    "CLASS_NAME": "OpenLayers.Layer.EventPane"
}), OpenLayers.Layer.FixedZoomLevels = OpenLayers.Class({
    "initialize": function() {},
    "initResolutions": function() {
        for (var e = [ "minZoomLevel", "maxZoomLevel", "numZoomLevels" ], t = 0, i = e.length; t < i; t++) {
            var n = e[t];
            this[n] = null != this.options[n] ? this.options[n] : this.map[n];
        }
        (null == this.minZoomLevel || this.minZoomLevel < this.MIN_ZOOM_LEVEL) && (this.minZoomLevel = this.MIN_ZOOM_LEVEL);
        var s, r = this.MAX_ZOOM_LEVEL - this.minZoomLevel + 1;
        if (s = null == this.options.numZoomLevels && null != this.options.maxZoomLevel || null == this.numZoomLevels && null != this.maxZoomLevel ? this.maxZoomLevel - this.minZoomLevel + 1 : this.numZoomLevels, 
        this.numZoomLevels = null != s ? Math.min(s, r) : r, this.maxZoomLevel = this.minZoomLevel + this.numZoomLevels - 1, 
        null != this.RESOLUTIONS) {
            var o = 0;
            this.resolutions = [];
            for (t = this.minZoomLevel; t <= this.maxZoomLevel; t++) this.resolutions[o++] = this.RESOLUTIONS[t];
            this.maxResolution = this.resolutions[0], this.minResolution = this.resolutions[this.resolutions.length - 1];
        }
    },
    "getResolution": function() {
        if (null != this.resolutions) return OpenLayers.Layer.prototype.getResolution.apply(this, arguments);
        var e = null, t = this.map.getSize(), i = this.getExtent();
        return null != t && null != i && (e = Math.max(i.getWidth() / t.w, i.getHeight() / t.h)), 
        e;
    },
    "getExtent": function() {
        var e = this.map.getSize(), t = this.getLonLatFromViewPortPx({
            "x": 0,
            "y": 0
        }), i = this.getLonLatFromViewPortPx({
            "x": e.w,
            "y": e.h
        });
        return null != t && null != i ? new OpenLayers.Bounds(t.lon, i.lat, i.lon, t.lat) : null;
    },
    "getZoomForResolution": function(e) {
        if (null != this.resolutions) return OpenLayers.Layer.prototype.getZoomForResolution.apply(this, arguments);
        var t = OpenLayers.Layer.prototype.getExtent.apply(this, []);
        return this.getZoomForExtent(t);
    },
    "getOLZoomFromMapObjectZoom": function(e) {
        var t = null;
        return null != e && (t = e - this.minZoomLevel, this.map.baseLayer !== this && (t = this.map.baseLayer.getZoomForResolution(this.getResolutionForZoom(t)))), 
        t;
    },
    "getMapObjectZoomFromOLZoom": function(e) {
        var t = null;
        return null != e && (t = e + this.minZoomLevel, this.map.baseLayer !== this && (t = this.getZoomForResolution(this.map.baseLayer.getResolutionForZoom(t)))), 
        t;
    },
    "CLASS_NAME": "OpenLayers.Layer.FixedZoomLevels"
}), OpenLayers.Layer.GeoRSS = OpenLayers.Class(OpenLayers.Layer.Markers, {
    "location": null,
    "features": null,
    "formatOptions": null,
    "selectedFeature": null,
    "icon": null,
    "popupSize": null,
    "useFeedTitle": !0,
    "initialize": function(e, t, i) {
        OpenLayers.Layer.Markers.prototype.initialize.apply(this, [ e, i ]), this.location = t, 
        this.features = [];
    },
    "destroy": function() {
        OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments), this.clearFeatures(), 
        this.features = null;
    },
    "loadRSS": function() {
        this.loaded || (this.events.triggerEvent("loadstart"), OpenLayers.Request.GET({
            "url": this.location,
            "success": this.parseData,
            "scope": this
        }), this.loaded = !0);
    },
    "moveTo": function(e, t, i) {
        OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments), this.visibility && !this.loaded && this.loadRSS();
    },
    "parseData": function(e) {
        var t = e.responseXML;
        if (t && t.documentElement || (t = OpenLayers.Format.XML.prototype.read(e.responseText)), 
        this.useFeedTitle) {
            var i = null;
            try {
                i = t.getElementsByTagNameNS("*", "title")[0].firstChild.nodeValue;
            } catch (e) {
                i = t.getElementsByTagName("title")[0].firstChild.nodeValue;
            }
            i && this.setName(i);
        }
        var n = {};
        OpenLayers.Util.extend(n, this.formatOptions), this.map && !this.projection.equals(this.map.getProjectionObject()) && (n.externalProjection = this.projection, 
        n.internalProjection = this.map.getProjectionObject());
        for (var s = new OpenLayers.Format.GeoRSS(n).read(t), r = 0, o = s.length; r < o; r++) {
            var a = {};
            if ((d = s[r]).geometry) {
                var l = d.attributes.title ? d.attributes.title : "Untitled", h = d.attributes.description ? d.attributes.description : "No description.", c = d.attributes.link ? d.attributes.link : "", u = d.geometry.getBounds().getCenterLonLat();
                if (a.icon = null == this.icon ? OpenLayers.Marker.defaultIcon() : this.icon.clone(), 
                a.popupSize = this.popupSize ? this.popupSize.clone() : new OpenLayers.Size(250, 120), 
                l || h) {
                    a.title = l, a.description = h;
                    var p = '<div class="olLayerGeoRSSClose">[x]</div>';
                    p += '<div class="olLayerGeoRSSTitle">', c && (p += '<a class="link" href="' + c + '" target="_blank">'), 
                    p += l, c && (p += "</a>"), p += "</div>", p += '<div style="" class="olLayerGeoRSSDescription">', 
                    p += h, p += "</div>", a.popupContentHTML = p;
                }
                var d = new OpenLayers.Feature(this, u, a);
                this.features.push(d);
                var f = d.createMarker();
                f.events.register("click", d, this.markerClick), this.addMarker(f);
            }
        }
        this.events.triggerEvent("loadend");
    },
    "markerClick": function(e) {
        var t = this == this.layer.selectedFeature;
        this.layer.selectedFeature = t ? null : this;
        for (var i = 0, n = this.layer.map.popups.length; i < n; i++) this.layer.map.removePopup(this.layer.map.popups[i]);
        if (!t) {
            var s = this.createPopup();
            OpenLayers.Event.observe(s.div, "click", OpenLayers.Function.bind(function() {
                for (var e = 0, t = this.layer.map.popups.length; e < t; e++) this.layer.map.removePopup(this.layer.map.popups[e]);
            }, this)), this.layer.map.addPopup(s);
        }
        OpenLayers.Event.stop(e);
    },
    "clearFeatures": function() {
        if (null != this.features) for (;this.features.length > 0; ) {
            var e = this.features[0];
            OpenLayers.Util.removeItem(this.features, e), e.destroy();
        }
    },
    "CLASS_NAME": "OpenLayers.Layer.GeoRSS"
}), OpenLayers.Layer.SphericalMercator = {
    "getExtent": function() {
        return this.sphericalMercator ? this.map.calculateBounds() : OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this);
    },
    "getLonLatFromViewPortPx": function(e) {
        return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this, arguments);
    },
    "getViewPortPxFromLonLat": function(e) {
        return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this, arguments);
    },
    "initMercatorParameters": function() {
        this.RESOLUTIONS = [];
        for (var e = 0; e <= this.MAX_ZOOM_LEVEL; ++e) this.RESOLUTIONS[e] = 156543.03390625 / Math.pow(2, e);
        this.units = "m", this.projection = this.projection || "EPSG:900913";
    },
    "forwardMercator": function() {
        var e = new OpenLayers.Projection("EPSG:4326"), t = new OpenLayers.Projection("EPSG:900913");
        return function(i, n) {
            var s = OpenLayers.Projection.transform({
                "x": i,
                "y": n
            }, e, t);
            return new OpenLayers.LonLat(s.x, s.y);
        };
    }(),
    "inverseMercator": function() {
        var e = new OpenLayers.Projection("EPSG:4326"), t = new OpenLayers.Projection("EPSG:900913");
        return function(i, n) {
            var s = OpenLayers.Projection.transform({
                "x": i,
                "y": n
            }, t, e);
            return new OpenLayers.LonLat(s.x, s.y);
        };
    }()
}, OpenLayers.Layer.Google = OpenLayers.Class(OpenLayers.Layer.EventPane, OpenLayers.Layer.FixedZoomLevels, {
    "MIN_ZOOM_LEVEL": 0,
    "MAX_ZOOM_LEVEL": 21,
    "RESOLUTIONS": [ 1.40625, .703125, .3515625, .17578125, .087890625, .0439453125, .02197265625, .010986328125, .0054931640625, .00274658203125, .001373291015625, .0006866455078125, .00034332275390625, .000171661376953125, 858306884765625e-19, 4291534423828125e-20, 2145767211914062e-20, 1072883605957031e-20, 536441802978515e-20, 268220901489257e-20, 1341104507446289e-21, 6.705522537231445e-7 ],
    "type": null,
    "wrapDateLine": !0,
    "sphericalMercator": !1,
    "useTiltImages": !1,
    "version": null,
    "initialize": function(e, t) {
        (t = t || {}).version = "3";
        var i = OpenLayers.Layer.Google["v" + t.version.replace(/\./g, "_")];
        if (!i) throw "Unsupported Google Maps API version: " + t.version;
        OpenLayers.Util.applyDefaults(t, i), OpenLayers.Util.applyDefaults(t, i.DEFAULTS), 
        t.maxExtent && (t.maxExtent = t.maxExtent.clone()), OpenLayers.Layer.EventPane.prototype.initialize.apply(this, [ e, t ]), 
        OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this, [ e, t ]), this.sphericalMercator && (OpenLayers.Util.extend(this, OpenLayers.Layer.SphericalMercator), 
        this.initMercatorParameters());
    },
    "clone": function() {
        return new OpenLayers.Layer.Google(this.name, this.getOptions());
    },
    "setVisibility": function(e) {
        var t = null == this.opacity ? 1 : this.opacity;
        OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this, arguments), this.setOpacity(t);
    },
    "display": function(e) {
        this._dragging || this.setGMapVisibility(e), OpenLayers.Layer.EventPane.prototype.display.apply(this, arguments);
    },
    "moveTo": function(e, t, i) {
        this._dragging = i, OpenLayers.Layer.EventPane.prototype.moveTo.apply(this, arguments), 
        delete this._dragging;
    },
    "setOpacity": function(e) {
        if (e !== this.opacity && (null != this.map && this.map.events.triggerEvent("changelayer", {
            "layer": this,
            "property": "opacity"
        }), this.opacity = e), this.getVisibility()) {
            var t = this.getMapContainer();
            OpenLayers.Util.modifyDOMElement(t, null, null, null, null, null, null, e);
        }
    },
    "destroy": function() {
        if (this.map) {
            this.setGMapVisibility(!1);
            var e = OpenLayers.Layer.Google.cache[this.map.id];
            e && e.count <= 1 && this.removeGMapElements();
        }
        OpenLayers.Layer.EventPane.prototype.destroy.apply(this, arguments);
    },
    "removeGMapElements": function() {
        var e = OpenLayers.Layer.Google.cache[this.map.id];
        if (e) {
            var t = this.mapObject && this.getMapContainer();
            t && t.parentNode && t.parentNode.removeChild(t);
            var i = e.termsOfUse;
            i && i.parentNode && i.parentNode.removeChild(i);
            var n = e.poweredBy;
            n && n.parentNode && n.parentNode.removeChild(n), this.mapObject && window.google && google.maps && google.maps.event && google.maps.event.clearListeners && google.maps.event.clearListeners(this.mapObject, "tilesloaded");
        }
    },
    "removeMap": function(e) {
        this.visibility && this.mapObject && this.setGMapVisibility(!1);
        var t = OpenLayers.Layer.Google.cache[e.id];
        t && (t.count <= 1 ? (this.removeGMapElements(), delete OpenLayers.Layer.Google.cache[e.id]) : --t.count), 
        delete this.termsOfUse, delete this.poweredBy, delete this.mapObject, delete this.dragObject, 
        OpenLayers.Layer.EventPane.prototype.removeMap.apply(this, arguments);
    },
    "getOLBoundsFromMapObjectBounds": function(e) {
        var t = null;
        if (null != e) {
            var i = e.getSouthWest(), n = e.getNorthEast();
            this.sphericalMercator ? (i = this.forwardMercator(i.lng(), i.lat()), n = this.forwardMercator(n.lng(), n.lat())) : (i = new OpenLayers.LonLat(i.lng(), i.lat()), 
            n = new OpenLayers.LonLat(n.lng(), n.lat())), t = new OpenLayers.Bounds(i.lon, i.lat, n.lon, n.lat);
        }
        return t;
    },
    "getWarningHTML": function() {
        return OpenLayers.i18n("googleWarning");
    },
    "getMapObjectCenter": function() {
        return this.mapObject.getCenter();
    },
    "getMapObjectZoom": function() {
        return this.mapObject.getZoom();
    },
    "getLongitudeFromMapObjectLonLat": function(e) {
        return this.sphericalMercator ? this.forwardMercator(e.lng(), e.lat()).lon : e.lng();
    },
    "getLatitudeFromMapObjectLonLat": function(e) {
        return this.sphericalMercator ? this.forwardMercator(e.lng(), e.lat()).lat : e.lat();
    },
    "getXFromMapObjectPixel": function(e) {
        return e.x;
    },
    "getYFromMapObjectPixel": function(e) {
        return e.y;
    },
    "CLASS_NAME": "OpenLayers.Layer.Google"
}), OpenLayers.Layer.Google.cache = {}, OpenLayers.Layer.Image = OpenLayers.Class(OpenLayers.Layer, {
    "isBaseLayer": !0,
    "url": null,
    "extent": null,
    "size": null,
    "tile": null,
    "aspectRatio": null,
    "initialize": function(e, t, i, n, s) {
        this.url = t, this.extent = i, this.maxExtent = i, this.size = n, OpenLayers.Layer.prototype.initialize.apply(this, [ e, s ]), 
        this.aspectRatio = this.extent.getHeight() / this.size.h / (this.extent.getWidth() / this.size.w);
    },
    "destroy": function() {
        this.tile && (this.removeTileMonitoringHooks(this.tile), this.tile.destroy(), this.tile = null), 
        OpenLayers.Layer.prototype.destroy.apply(this, arguments);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.Image(this.name, this.url, this.extent, this.size, this.getOptions())), 
        e = OpenLayers.Layer.prototype.clone.apply(this, [ e ]);
    },
    "setMap": function(e) {
        null == this.options.maxResolution && (this.options.maxResolution = this.aspectRatio * this.extent.getWidth() / this.size.w), 
        OpenLayers.Layer.prototype.setMap.apply(this, arguments);
    },
    "moveTo": function(e, t, i) {
        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);
        var n = null == this.tile;
        if (t || n) {
            this.setTileSize();
            var s = this.map.getLayerPxFromLonLat({
                "lon": this.extent.left,
                "lat": this.extent.top
            });
            n ? (this.tile = new OpenLayers.Tile.Image(this, s, this.extent, null, this.tileSize), 
            this.addTileMonitoringHooks(this.tile)) : (this.tile.size = this.tileSize.clone(), 
            this.tile.position = s.clone()), this.tile.draw();
        }
    },
    "setTileSize": function() {
        var e = this.extent.getWidth() / this.map.getResolution(), t = this.extent.getHeight() / this.map.getResolution();
        this.tileSize = new OpenLayers.Size(e, t);
    },
    "addTileMonitoringHooks": function(e) {
        e.onLoadStart = function() {
            this.events.triggerEvent("loadstart");
        }, e.events.register("loadstart", this, e.onLoadStart), e.onLoadEnd = function() {
            this.events.triggerEvent("loadend");
        }, e.events.register("loadend", this, e.onLoadEnd), e.events.register("unload", this, e.onLoadEnd);
    },
    "removeTileMonitoringHooks": function(e) {
        e.unload(), e.events.un({
            "loadstart": e.onLoadStart,
            "loadend": e.onLoadEnd,
            "unload": e.onLoadEnd,
            "scope": this
        });
    },
    "setUrl": function(e) {
        this.url = e, this.tile.draw();
    },
    "getURL": function(e) {
        return this.url;
    },
    "CLASS_NAME": "OpenLayers.Layer.Image"
}), OpenLayers.Layer.KaMap = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "DEFAULT_PARAMS": {
        "i": "jpeg",
        "map": ""
    },
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments), this.params = OpenLayers.Util.applyDefaults(this.params, this.DEFAULT_PARAMS);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.map.getResolution(), i = Math.round(1e4 * this.map.getScale()) / 1e4, n = Math.round(e.left / t), s = -Math.round(e.top / t);
        return this.getFullRequestString({
            "t": s,
            "l": n,
            "s": i
        });
    },
    "calculateGridLayout": function(e, t, i) {
        var n = i * this.tileSize.w, s = i * this.tileSize.h, r = e.left, o = Math.floor(r / n) - this.buffer, a = e.top;
        return {
            "tilelon": n,
            "tilelat": s,
            "startcol": o,
            "startrow": Math.floor(a / s) + this.buffer
        };
    },
    "getTileBoundsForGridIndex": function(e, t) {
        this.getTileOrigin();
        var i = this.gridLayout, n = i.tilelon, s = i.tilelat, r = (i.startcol + t) * n, o = (i.startrow - e) * s;
        return new OpenLayers.Bounds(r, o, r + n, o + s);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.KaMap(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]), null != this.tileSize && (e.tileSize = this.tileSize.clone()), 
        e.grid = [], e;
    },
    "getTileBounds": function(e) {
        var t = this.getResolution(), i = t * this.tileSize.w, n = t * this.tileSize.h, s = this.getLonLatFromViewPortPx(e), r = i * Math.floor(s.lon / i), o = n * Math.floor(s.lat / n);
        return new OpenLayers.Bounds(r, o, r + i, o + n);
    },
    "CLASS_NAME": "OpenLayers.Layer.KaMap"
}), OpenLayers.Layer.KaMapCache = OpenLayers.Class(OpenLayers.Layer.KaMap, {
    "IMAGE_EXTENSIONS": {
        "jpeg": "jpg",
        "gif": "gif",
        "png": "png",
        "png8": "png",
        "png24": "png",
        "dithered": "png"
    },
    "DEFAULT_FORMAT": "jpeg",
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.KaMap.prototype.initialize.apply(this, arguments), this.extension = this.IMAGE_EXTENSIONS[this.params.i.toLowerCase() || this.DEFAULT_FORMAT];
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.map.getResolution(), i = Math.round(1e4 * this.map.getScale()) / 1e4, n = Math.round(e.left / t), s = -Math.round(e.top / t), r = Math.floor(n / this.tileSize.w / this.params.metaTileSize.w) * this.tileSize.w * this.params.metaTileSize.w, o = Math.floor(s / this.tileSize.h / this.params.metaTileSize.h) * this.tileSize.h * this.params.metaTileSize.h, a = [ "/", this.params.map, "/", i, "/", this.params.g.replace(/\s/g, "_"), "/def/t", o, "/l", r, "/t", s, "l", n, ".", this.extension ], l = this.url;
        return OpenLayers.Util.isArray(l) && (l = this.selectUrl(a.join(""), l)), l + a.join("");
    },
    "CLASS_NAME": "OpenLayers.Layer.KaMapCache"
}), OpenLayers.Layer.MapGuide = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "useHttpTile": !1,
    "singleTile": !1,
    "useOverlay": !1,
    "useAsyncOverlay": !0,
    "TILE_PARAMS": {
        "operation": "GETTILEIMAGE",
        "version": "1.2.0"
    },
    "SINGLE_TILE_PARAMS": {
        "operation": "GETMAPIMAGE",
        "format": "PNG",
        "locale": "en",
        "clip": "1",
        "version": "1.0.0"
    },
    "OVERLAY_PARAMS": {
        "operation": "GETDYNAMICMAPOVERLAYIMAGE",
        "format": "PNG",
        "locale": "en",
        "clip": "1",
        "version": "2.0.0"
    },
    "FOLDER_PARAMS": {
        "tileColumnsPerFolder": 30,
        "tileRowsPerFolder": 30,
        "format": "png",
        "querystring": null
    },
    "defaultSize": new OpenLayers.Size(300, 300),
    "tileOriginCorner": "tl",
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments), null != n && null != n.isBaseLayer || (this.isBaseLayer = "true" != this.transparent && 1 != this.transparent), 
        n && null != n.useOverlay && (this.useOverlay = n.useOverlay), this.singleTile ? this.useOverlay ? (OpenLayers.Util.applyDefaults(this.params, this.OVERLAY_PARAMS), 
        this.useAsyncOverlay || (this.params.version = "1.0.0")) : OpenLayers.Util.applyDefaults(this.params, this.SINGLE_TILE_PARAMS) : (this.useHttpTile ? OpenLayers.Util.applyDefaults(this.params, this.FOLDER_PARAMS) : OpenLayers.Util.applyDefaults(this.params, this.TILE_PARAMS), 
        this.setTileSize(this.defaultSize));
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.MapGuide(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        var t, i = e.getCenterLonLat(), n = this.map.getSize();
        if (this.singleTile) {
            var s = {
                "setdisplaydpi": OpenLayers.DOTS_PER_INCH,
                "setdisplayheight": n.h * this.ratio,
                "setdisplaywidth": n.w * this.ratio,
                "setviewcenterx": i.lon,
                "setviewcentery": i.lat,
                "setviewscale": this.map.getScale()
            };
            if (this.useOverlay && !this.useAsyncOverlay) {
                var r = {};
                (r = OpenLayers.Util.extend(r, s)).operation = "GETVISIBLEMAPEXTENT", r.version = "1.0.0", 
                r.session = this.params.session, r.mapName = this.params.mapName, r.format = "text/xml", 
                t = this.getFullRequestString(r), OpenLayers.Request.GET({
                    "url": t,
                    "async": !1
                });
            }
            t = this.getFullRequestString(s);
        } else {
            var o = this.map.getResolution(), a = Math.floor((e.left - this.maxExtent.left) / o);
            a = Math.round(a / this.tileSize.w);
            var l = Math.floor((this.maxExtent.top - e.top) / o);
            l = Math.round(l / this.tileSize.h), t = this.useHttpTile ? this.getImageFilePath({
                "tilecol": a,
                "tilerow": l,
                "scaleindex": this.resolutions.length - this.map.zoom - 1
            }) : this.getFullRequestString({
                "tilecol": a,
                "tilerow": l,
                "scaleindex": this.resolutions.length - this.map.zoom - 1
            });
        }
        return t;
    },
    "getFullRequestString": function(e, t) {
        var i = null == t ? this.url : t;
        "object" == typeof i && (i = i[Math.floor(Math.random() * i.length)]);
        var n = i, s = OpenLayers.Util.extend({}, this.params);
        s = OpenLayers.Util.extend(s, e);
        var r = OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i));
        for (var o in s) o.toUpperCase() in r && delete s[o];
        var a = OpenLayers.Util.getParameterString(s);
        if ("" != (a = a.replace(/,/g, "+"))) {
            var l = i.charAt(i.length - 1);
            "&" == l || "?" == l ? n += a : -1 == i.indexOf("?") ? n += "?" + a : n += "&" + a;
        }
        return n;
    },
    "getImageFilePath": function(e, t) {
        var i = null == t ? this.url : t;
        "object" == typeof i && (i = i[Math.floor(Math.random() * i.length)]);
        var n = i, s = "", r = "";
        e.tilerow < 0 && (s = "-"), 0 == e.tilerow ? s += "0" : s += Math.floor(Math.abs(e.tilerow / this.params.tileRowsPerFolder)) * this.params.tileRowsPerFolder, 
        e.tilecol < 0 && (r = "-"), 0 == e.tilecol ? r += "0" : r += Math.floor(Math.abs(e.tilecol / this.params.tileColumnsPerFolder)) * this.params.tileColumnsPerFolder;
        var o = "/S" + Math.floor(e.scaleindex) + "/" + this.params.basemaplayergroupname + "/R" + s + "/C" + r + "/" + e.tilerow % this.params.tileRowsPerFolder + "_" + e.tilecol % this.params.tileColumnsPerFolder + "." + this.params.format;
        return this.params.querystring && (o += "?" + this.params.querystring), n += o;
    },
    "CLASS_NAME": "OpenLayers.Layer.MapGuide"
}), OpenLayers.Layer.MapServer = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {
        "mode": "map",
        "map_imagetype": "png"
    },
    "initialize": function(e, t, i, n) {
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments), this.params = OpenLayers.Util.applyDefaults(this.params, this.DEFAULT_PARAMS), 
        null != n && null != n.isBaseLayer || (this.isBaseLayer = "true" != this.params.transparent && 1 != this.params.transparent);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.MapServer(this.name, this.url, this.params, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        var t = [ (e = this.adjustBounds(e)).left, e.bottom, e.right, e.top ], i = this.getImageSize(e);
        return this.getFullRequestString({
            "mapext": t,
            "imgext": t,
            "map_size": [ i.w, i.h ],
            "imgx": i.w / 2,
            "imgy": i.h / 2,
            "imgxy": [ i.w, i.h ]
        });
    },
    "getFullRequestString": function(e, t) {
        var i = null == t ? this.url : t, n = OpenLayers.Util.extend({}, this.params);
        n = OpenLayers.Util.extend(n, e);
        var s = OpenLayers.Util.getParameterString(n);
        OpenLayers.Util.isArray(i) && (i = this.selectUrl(s, i));
        var r = OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(i));
        for (var o in n) o.toUpperCase() in r && delete n[o];
        var a = i;
        if ("" != (s = (s = OpenLayers.Util.getParameterString(n)).replace(/,/g, "+"))) {
            var l = i.charAt(i.length - 1);
            "&" == l || "?" == l ? a += s : -1 == i.indexOf("?") ? a += "?" + s : a += "&" + s;
        }
        return a;
    },
    "CLASS_NAME": "OpenLayers.Layer.MapServer"
}), OpenLayers.Layer.OSM = OpenLayers.Class(OpenLayers.Layer.XYZ, {
    "name": "OpenStreetMap",
    "url": [ "//a.tile.openstreetmap.org/${z}/${x}/${y}.png", "//b.tile.openstreetmap.org/${z}/${x}/${y}.png", "//c.tile.openstreetmap.org/${z}/${x}/${y}.png" ],
    "attribution": "&copy; <a href='//www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors",
    "sphericalMercator": !0,
    "wrapDateLine": !0,
    "tileOptions": null,
    "initialize": function(e, t, i) {
        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments), this.tileOptions = OpenLayers.Util.extend({
            "crossOriginKeyword": "anonymous"
        }, this.options && this.options.tileOptions);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.OSM(this.name, this.url, this.getOptions())), 
        e = OpenLayers.Layer.XYZ.prototype.clone.apply(this, [ e ]);
    },
    "CLASS_NAME": "OpenLayers.Layer.OSM"
}), OpenLayers.Layer.PointGrid = OpenLayers.Class(OpenLayers.Layer.Vector, {
    "dx": null,
    "dy": null,
    "ratio": 1.5,
    "maxFeatures": 250,
    "rotation": 0,
    "origin": null,
    "gridBounds": null,
    "initialize": function(e) {
        e = e || {}, OpenLayers.Layer.Vector.prototype.initialize.apply(this, [ e.name, e ]);
    },
    "setMap": function(e) {
        OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments), e.events.register("moveend", this, this.onMoveEnd);
    },
    "removeMap": function(e) {
        e.events.unregister("moveend", this, this.onMoveEnd), OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments);
    },
    "setRatio": function(e) {
        this.ratio = e, this.updateGrid(!0);
    },
    "setMaxFeatures": function(e) {
        this.maxFeatures = e, this.updateGrid(!0);
    },
    "setSpacing": function(e, t) {
        this.dx = e, this.dy = t || e, this.updateGrid(!0);
    },
    "setOrigin": function(e) {
        this.origin = e, this.updateGrid(!0);
    },
    "getOrigin": function() {
        return this.origin || (this.origin = this.map.getExtent().getCenterLonLat()), this.origin;
    },
    "setRotation": function(e) {
        this.rotation = e, this.updateGrid(!0);
    },
    "onMoveEnd": function() {
        this.updateGrid();
    },
    "getViewBounds": function() {
        var e = this.map.getExtent();
        if (this.rotation) {
            var t = this.getOrigin(), i = new OpenLayers.Geometry.Point(t.lon, t.lat), n = e.toGeometry();
            n.rotate(-this.rotation, i), e = n.getBounds();
        }
        return e;
    },
    "updateGrid": function(e) {
        if (e || this.invalidBounds()) {
            var t = this.getViewBounds(), i = this.getOrigin(), n = new OpenLayers.Geometry.Point(i.lon, i.lat), s = t.getWidth(), r = t.getHeight(), o = s / r, a = Math.sqrt(this.dx * this.dy * this.maxFeatures / o), l = a * o, h = Math.min(s * this.ratio, l), c = Math.min(r * this.ratio, a), u = t.getCenterLonLat();
            this.gridBounds = new OpenLayers.Bounds(u.lon - h / 2, u.lat - c / 2, u.lon + h / 2, u.lat + c / 2);
            for (var p, d, f, m = Math.floor(c / this.dy), g = Math.floor(h / this.dx), y = i.lon + this.dx * Math.ceil((this.gridBounds.left - i.lon) / this.dx), v = i.lat + this.dy * Math.ceil((this.gridBounds.bottom - i.lat) / this.dy), L = new Array(m * g), w = 0; w < g; ++w) {
                p = y + w * this.dx;
                for (var b = 0; b < m; ++b) d = v + b * this.dy, f = new OpenLayers.Geometry.Point(p, d), 
                this.rotation && f.rotate(this.rotation, n), L[w * m + b] = new OpenLayers.Feature.Vector(f);
            }
            this.destroyFeatures(this.features, {
                "silent": !0
            }), this.addFeatures(L, {
                "silent": !0
            });
        }
    },
    "invalidBounds": function() {
        return !this.gridBounds || !this.gridBounds.containsBounds(this.getViewBounds());
    },
    "CLASS_NAME": "OpenLayers.Layer.PointGrid"
}), OpenLayers.Layer.PointTrack = OpenLayers.Class(OpenLayers.Layer.Vector, {
    "dataFrom": null,
    "styleFrom": null,
    "addNodes": function(e, t) {
        if (e.length < 2) throw new Error("At least two point features have to be added to create a line from");
        for (var i, n, s, r = new Array(e.length - 1), o = 0, a = e.length; o < a; o++) {
            if (i = e[o], s = i.geometry) {
                if ("OpenLayers.Geometry.Point" != s.CLASS_NAME) throw new TypeError("Only features with point geometries are supported.");
            } else {
                var l = i.lonlat;
                s = new OpenLayers.Geometry.Point(l.lon, l.lat);
            }
            if (o > 0) {
                var h = null != this.dataFrom ? e[o + this.dataFrom].data || e[o + this.dataFrom].attributes : null, c = null != this.styleFrom ? e[o + this.styleFrom].style : null, u = new OpenLayers.Geometry.LineString([ n, s ]);
                r[o - 1] = new OpenLayers.Feature.Vector(u, h, c);
            }
            n = s;
        }
        this.addFeatures(r, t);
    },
    "CLASS_NAME": "OpenLayers.Layer.PointTrack"
}), OpenLayers.Layer.PointTrack.SOURCE_NODE = -1, OpenLayers.Layer.PointTrack.TARGET_NODE = 0, 
OpenLayers.Layer.PointTrack.dataFrom = {
    "SOURCE_NODE": -1,
    "TARGET_NODE": 0
}, OpenLayers.Layer.Text = OpenLayers.Class(OpenLayers.Layer.Markers, {
    "location": null,
    "features": null,
    "formatOptions": null,
    "selectedFeature": null,
    "initialize": function(e, t) {
        OpenLayers.Layer.Markers.prototype.initialize.apply(this, arguments), this.features = [];
    },
    "destroy": function() {
        OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments), this.clearFeatures(), 
        this.features = null;
    },
    "loadText": function() {
        if (!this.loaded && null != this.location) {
            this.events.triggerEvent("loadstart"), OpenLayers.Request.GET({
                "url": this.location,
                "success": this.parseData,
                "failure": function(e) {
                    this.events.triggerEvent("loadend");
                },
                "scope": this
            }), this.loaded = !0;
        }
    },
    "moveTo": function(e, t, i) {
        OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments), this.visibility && !this.loaded && this.loadText();
    },
    "parseData": function(e) {
        var t = e.responseText, i = {};
        OpenLayers.Util.extend(i, this.formatOptions), this.map && !this.projection.equals(this.map.getProjectionObject()) && (i.externalProjection = this.projection, 
        i.internalProjection = this.map.getProjectionObject());
        for (var n = new OpenLayers.Format.Text(i).read(t), s = 0, r = n.length; s < r; s++) {
            var o, a, l, h = {}, c = n[s];
            o = new OpenLayers.LonLat(c.geometry.x, c.geometry.y), c.style.graphicWidth && c.style.graphicHeight && (a = new OpenLayers.Size(c.style.graphicWidth, c.style.graphicHeight)), 
            void 0 !== c.style.graphicXOffset && void 0 !== c.style.graphicYOffset && (l = new OpenLayers.Pixel(c.style.graphicXOffset, c.style.graphicYOffset)), 
            null != c.style.externalGraphic ? h.icon = new OpenLayers.Icon(c.style.externalGraphic, a, l) : (h.icon = OpenLayers.Marker.defaultIcon(), 
            null != a && h.icon.setSize(a)), null != c.attributes.title && null != c.attributes.description && (h.popupContentHTML = "<h2>" + c.attributes.title + "</h2><p>" + c.attributes.description + "</p>"), 
            h.overflow = c.attributes.overflow || "auto";
            var u = new OpenLayers.Feature(this, o, h);
            this.features.push(u);
            var p = u.createMarker();
            null != c.attributes.title && null != c.attributes.description && p.events.register("click", u, this.markerClick), 
            this.addMarker(p);
        }
        this.events.triggerEvent("loadend");
    },
    "markerClick": function(e) {
        var t = this == this.layer.selectedFeature;
        this.layer.selectedFeature = t ? null : this;
        for (var i = 0, n = this.layer.map.popups.length; i < n; i++) this.layer.map.removePopup(this.layer.map.popups[i]);
        t || this.layer.map.addPopup(this.createPopup()), OpenLayers.Event.stop(e);
    },
    "clearFeatures": function() {
        if (null != this.features) for (;this.features.length > 0; ) {
            var e = this.features[0];
            OpenLayers.Util.removeItem(this.features, e), e.destroy();
        }
    },
    "CLASS_NAME": "OpenLayers.Layer.Text"
}), OpenLayers.Layer.TileCache = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "format": "image/png",
    "serverResolutions": null,
    "initialize": function(e, t, i, n) {
        this.layername = i, OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e, t, {}, n ]), 
        this.extension = this.format.split("/")[1].toLowerCase(), this.extension = "jpg" == this.extension ? "jpeg" : this.extension;
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.TileCache(this.name, this.url, this.layername, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        var t = this.getServerResolution(), i = this.maxExtent, n = this.tileSize, s = Math.round((e.left - i.left) / (t * n.w)), r = Math.round((e.bottom - i.bottom) / (t * n.h)), o = null != this.serverResolutions ? OpenLayers.Util.indexOf(this.serverResolutions, t) : this.map.getZoom(), a = [ this.layername, OpenLayers.Number.zeroPad(o, 2), OpenLayers.Number.zeroPad(parseInt(s / 1e6), 3), OpenLayers.Number.zeroPad(parseInt(s / 1e3) % 1e3, 3), OpenLayers.Number.zeroPad(parseInt(s) % 1e3, 3), OpenLayers.Number.zeroPad(parseInt(r / 1e6), 3), OpenLayers.Number.zeroPad(parseInt(r / 1e3) % 1e3, 3), OpenLayers.Number.zeroPad(parseInt(r) % 1e3, 3) + "." + this.extension ].join("/"), l = this.url;
        return OpenLayers.Util.isArray(l) && (l = this.selectUrl(a, l)), (l = "/" == l.charAt(l.length - 1) ? l : l + "/") + a;
    },
    "CLASS_NAME": "OpenLayers.Layer.TileCache"
}), OpenLayers.Layer.TMS = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "serviceVersion": "1.0.0",
    "layername": null,
    "type": null,
    "isBaseLayer": !0,
    "tileOrigin": null,
    "serverResolutions": null,
    "zoomOffset": 0,
    "initialize": function(e, t, i) {
        var n = [];
        n.push(e, t, {}, i), OpenLayers.Layer.Grid.prototype.initialize.apply(this, n);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.TMS(this.name, this.url, this.getOptions())), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.getServerResolution(), i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w)), n = Math.round((e.bottom - this.tileOrigin.lat) / (t * this.tileSize.h)), s = this.getServerZoom(), r = this.serviceVersion + "/" + this.layername + "/" + s + "/" + i + "/" + n + "." + this.type, o = this.url;
        return OpenLayers.Util.isArray(o) && (o = this.selectUrl(r, o)), o + r;
    },
    "setMap": function(e) {
        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments), this.tileOrigin || (this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left, this.map.maxExtent.bottom));
    },
    "CLASS_NAME": "OpenLayers.Layer.TMS"
}), OpenLayers.Tile.UTFGrid = OpenLayers.Class(OpenLayers.Tile, {
    "url": null,
    "utfgridResolution": 2,
    "json": null,
    "format": null,
    "destroy": function() {
        this.clear(), OpenLayers.Tile.prototype.destroy.apply(this, arguments);
    },
    "draw": function() {
        var e = OpenLayers.Tile.prototype.draw.apply(this, arguments);
        if (e) if (this.isLoading ? (this.abortLoading(), this.events.triggerEvent("reload")) : (this.isLoading = !0, 
        this.events.triggerEvent("loadstart")), this.url = this.layer.getURL(this.bounds), 
        this.layer.useJSONP) {
            var t = new OpenLayers.Protocol.Script({
                "url": this.url,
                "callback": function(e) {
                    this.isLoading = !1, this.events.triggerEvent("loadend"), this.json = e.data;
                },
                "scope": this
            });
            t.read(), this.request = t;
        } else this.request = OpenLayers.Request.GET({
            "url": this.url,
            "callback": function(e) {
                this.isLoading = !1, this.events.triggerEvent("loadend"), 200 === e.status && this.parseData(e.responseText);
            },
            "scope": this
        }); else this.unload();
        return e;
    },
    "abortLoading": function() {
        this.request && (this.request.abort(), delete this.request), this.isLoading = !1;
    },
    "getFeatureInfo": function(e, t) {
        var i = null;
        if (this.json) {
            var n = this.getFeatureId(e, t);
            null !== n && (i = {
                "id": n,
                "data": this.json.data[n]
            });
        }
        return i;
    },
    "getFeatureId": function(e, t) {
        var i = null;
        if (this.json) {
            var n = this.utfgridResolution, s = Math.floor(t / n), r = Math.floor(e / n), o = this.json.grid[s].charCodeAt(r), a = this.indexFromCharCode(o), l = this.json.keys;
            !isNaN(a) && a in l && (i = l[a]);
        }
        return i;
    },
    "indexFromCharCode": function(e) {
        return e >= 93 && e--, e >= 35 && e--, e - 32;
    },
    "parseData": function(e) {
        this.format || (this.format = new OpenLayers.Format.JSON()), this.json = this.format.read(e);
    },
    "clear": function() {
        this.json = null;
    },
    "CLASS_NAME": "OpenLayers.Tile.UTFGrid"
}), OpenLayers.Layer.UTFGrid = OpenLayers.Class(OpenLayers.Layer.XYZ, {
    "isBaseLayer": !1,
    "projection": new OpenLayers.Projection("EPSG:900913"),
    "useJSONP": !1,
    "tileClass": OpenLayers.Tile.UTFGrid,
    "initialize": function(e) {
        OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e.name, e.url, {}, e ]), 
        this.tileOptions = OpenLayers.Util.extend({
            "utfgridResolution": this.utfgridResolution
        }, this.tileOptions);
    },
    "createBackBuffer": function() {},
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.UTFGrid(this.getOptions())), e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getFeatureInfo": function(e) {
        var t = null, i = this.getTileData(e);
        return i && i.tile && (t = i.tile.getFeatureInfo(i.i, i.j)), t;
    },
    "getFeatureId": function(e) {
        var t = null, i = this.getTileData(e);
        return i.tile && (t = i.tile.getFeatureId(i.i, i.j)), t;
    },
    "CLASS_NAME": "OpenLayers.Layer.UTFGrid"
}), OpenLayers.Layer.WMTS = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "isBaseLayer": !0,
    "version": "1.0.0",
    "requestEncoding": "KVP",
    "url": null,
    "layer": null,
    "matrixSet": null,
    "style": null,
    "format": "image/jpeg",
    "tileOrigin": null,
    "tileFullExtent": null,
    "formatSuffix": null,
    "matrixIds": null,
    "dimensions": null,
    "params": null,
    "zoomOffset": 0,
    "serverResolutions": null,
    "formatSuffixMap": {
        "image/png": "png",
        "image/png8": "png",
        "image/png24": "png",
        "image/png32": "png",
        "png": "png",
        "image/jpeg": "jpg",
        "image/jpg": "jpg",
        "jpeg": "jpg",
        "jpg": "jpg"
    },
    "matrix": null,
    "initialize": function(e) {
        var t = {
            "url": !0,
            "layer": !0,
            "style": !0,
            "matrixSet": !0
        };
        for (var i in t) if (!(i in e)) throw new Error("Missing property '" + i + "' in layer configuration.");
        e.params = OpenLayers.Util.upperCaseObject(e.params);
        var n = [ e.name, e.url, e.params, e ];
        if (OpenLayers.Layer.Grid.prototype.initialize.apply(this, n), this.formatSuffix || (this.formatSuffix = this.formatSuffixMap[this.format] || this.format.split("/").pop()), 
        this.matrixIds) {
            var s = this.matrixIds.length;
            if (s && "string" == typeof this.matrixIds[0]) {
                var r = this.matrixIds;
                this.matrixIds = new Array(s);
                for (var o = 0; o < s; ++o) this.matrixIds[o] = {
                    "identifier": r[o]
                };
            }
        }
    },
    "setMap": function() {
        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);
    },
    "updateMatrixProperties": function() {
        this.matrix = this.getMatrix(), this.matrix && (this.matrix.topLeftCorner && (this.tileOrigin = this.matrix.topLeftCorner), 
        this.matrix.tileWidth && this.matrix.tileHeight && (this.tileSize = new OpenLayers.Size(this.matrix.tileWidth, this.matrix.tileHeight)), 
        this.tileOrigin || (this.tileOrigin = new OpenLayers.LonLat(this.maxExtent.left, this.maxExtent.top)), 
        this.tileFullExtent || (this.tileFullExtent = this.maxExtent));
    },
    "moveTo": function(e, t, i) {
        return !t && this.matrix || this.updateMatrixProperties(), OpenLayers.Layer.Grid.prototype.moveTo.apply(this, arguments);
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.WMTS(this.options)), e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "getIdentifier": function() {
        return this.getServerZoom();
    },
    "getMatrix": function() {
        var e;
        if (this.matrixIds && 0 !== this.matrixIds.length) if ("scaleDenominator" in this.matrixIds[0]) for (var t, i = OpenLayers.METERS_PER_INCH * OpenLayers.INCHES_PER_UNIT[this.units] * this.getServerResolution() / 28e-5, n = Number.POSITIVE_INFINITY, s = 0, r = this.matrixIds.length; s < r; ++s) (t = Math.abs(1 - this.matrixIds[s].scaleDenominator / i)) < n && (n = t, 
        e = this.matrixIds[s]); else e = this.matrixIds[this.getIdentifier()]; else e = {
            "identifier": this.getIdentifier()
        };
        return e;
    },
    "getTileInfo": function(e) {
        var t = this.getServerResolution(), i = (e.lon - this.tileOrigin.lon) / (t * this.tileSize.w), n = (this.tileOrigin.lat - e.lat) / (t * this.tileSize.h), s = Math.floor(i), r = Math.floor(n);
        return {
            "col": s,
            "row": r,
            "i": Math.floor((i - s) * this.tileSize.w),
            "j": Math.floor((n - r) * this.tileSize.h)
        };
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = "";
        if (!this.tileFullExtent || this.tileFullExtent.intersectsBounds(e)) {
            var i, n = e.getCenterLonLat(), s = this.getTileInfo(n), r = (this.matrix.identifier, 
            this.dimensions);
            if (t = OpenLayers.Util.isArray(this.url) ? this.selectUrl([ this.version, this.style, this.matrixSet, this.matrix.identifier, s.row, s.col ].join(","), this.url) : this.url, 
            "REST" === this.requestEncoding.toUpperCase()) if (i = this.params, -1 !== t.indexOf("{")) {
                var o = t.replace(/\{/g, "${"), a = {
                    "style": this.style,
                    "Style": this.style,
                    "TileMatrixSet": this.matrixSet,
                    "TileMatrix": this.matrix.identifier,
                    "TileRow": s.row,
                    "TileCol": s.col
                };
                if (r) {
                    var l;
                    for (c = r.length - 1; c >= 0; --c) a[l = r[c]] = i[l.toUpperCase()];
                }
                t = OpenLayers.String.format(o, a);
            } else {
                var h = this.version + "/" + this.layer + "/" + this.style + "/";
                if (r) for (var c = 0; c < r.length; c++) void 0 !== i[r[c]] && (h = h + i[r[c]] + "/");
                h = h + this.matrixSet + "/" + this.matrix.identifier + "/" + s.row + "/" + s.col + "." + this.formatSuffix, 
                t.match(/\/$/) || (t += "/"), t += h;
            } else "KVP" === this.requestEncoding.toUpperCase() && (i = {
                "SERVICE": "WMTS",
                "REQUEST": "GetTile",
                "VERSION": this.version,
                "LAYER": this.layer,
                "STYLE": this.style,
                "TILEMATRIXSET": this.matrixSet,
                "TILEMATRIX": this.matrix.identifier,
                "TILEROW": s.row,
                "TILECOL": s.col,
                "FORMAT": this.format
            }, t = OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this, [ i ]));
        }
        return t;
    },
    "mergeNewParams": function(e) {
        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, [ OpenLayers.Util.upperCaseObject(e) ]);
    },
    "CLASS_NAME": "OpenLayers.Layer.WMTS"
}), OpenLayers.Layer.WorldWind = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "DEFAULT_PARAMS": {},
    "isBaseLayer": !0,
    "lzd": null,
    "zoomLevels": null,
    "initialize": function(e, t, i, n, s, r) {
        this.lzd = i, this.zoomLevels = n;
        var o = [];
        o.push(e, t, s, r), OpenLayers.Layer.Grid.prototype.initialize.apply(this, o), this.params = OpenLayers.Util.applyDefaults(this.params, this.DEFAULT_PARAMS);
    },
    "getZoom": function() {
        var e = this.map.getZoom();
        this.map.getMaxExtent();
        return e -= Math.log(this.maxResolution / (this.lzd / 512)) / Math.log(2);
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.getZoom(), i = this.map.getMaxExtent(), n = this.lzd / Math.pow(2, this.getZoom()), s = Math.floor((e.left - i.left) / n), r = Math.floor((e.bottom - i.bottom) / n);
        return this.map.getResolution() <= this.lzd / 512 && this.getZoom() <= this.zoomLevels ? this.getFullRequestString({
            "L": t,
            "X": s,
            "Y": r
        }) : OpenLayers.Util.getImageLocation("blank.gif");
    },
    "CLASS_NAME": "OpenLayers.Layer.WorldWind"
}), OpenLayers.Layer.Zoomify = OpenLayers.Class(OpenLayers.Layer.Grid, {
    "size": null,
    "isBaseLayer": !0,
    "standardTileSize": 256,
    "tileOriginCorner": "tl",
    "numberOfTiers": 0,
    "tileCountUpToTier": null,
    "tierSizeInTiles": null,
    "tierImageSize": null,
    "initialize": function(e, t, i, n) {
        this.initializeZoomify(i), OpenLayers.Layer.Grid.prototype.initialize.apply(this, [ e, t, {}, n ]);
    },
    "initializeZoomify": function(e) {
        var t = e.clone();
        this.size = e.clone();
        var i = new OpenLayers.Size(Math.ceil(t.w / this.standardTileSize), Math.ceil(t.h / this.standardTileSize));
        for (this.tierSizeInTiles = [ i ], this.tierImageSize = [ t ]; t.w > this.standardTileSize || t.h > this.standardTileSize; ) t = new OpenLayers.Size(Math.floor(t.w / 2), Math.floor(t.h / 2)), 
        i = new OpenLayers.Size(Math.ceil(t.w / this.standardTileSize), Math.ceil(t.h / this.standardTileSize)), 
        this.tierSizeInTiles.push(i), this.tierImageSize.push(t);
        this.tierSizeInTiles.reverse(), this.tierImageSize.reverse(), this.numberOfTiers = this.tierSizeInTiles.length;
        var n = [ 1 ];
        this.tileCountUpToTier = [ 0 ];
        for (var s = 1; s < this.numberOfTiers; s++) n.unshift(Math.pow(2, s)), this.tileCountUpToTier.push(this.tierSizeInTiles[s - 1].w * this.tierSizeInTiles[s - 1].h + this.tileCountUpToTier[s - 1]);
        this.serverResolutions || (this.serverResolutions = n);
    },
    "destroy": function() {
        OpenLayers.Layer.Grid.prototype.destroy.apply(this, arguments), this.tileCountUpToTier.length = 0, 
        this.tierSizeInTiles.length = 0, this.tierImageSize.length = 0;
    },
    "clone": function(e) {
        return null == e && (e = new OpenLayers.Layer.Zoomify(this.name, this.url, this.size, this.options)), 
        e = OpenLayers.Layer.Grid.prototype.clone.apply(this, [ e ]);
    },
    "createBackBuffer": function() {
        var e = OpenLayers.Layer.Grid.prototype.createBackBuffer.apply(this, arguments);
        if (e) for (var t, i = e.childNodes.length - 1; i >= 0; --i) (t = e.childNodes[i])._w = t.width, 
        t._h = t.height;
        return e;
    },
    "getURL": function(e) {
        e = this.adjustBounds(e);
        var t = this.getServerResolution(), i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w)), n = Math.round((this.tileOrigin.lat - e.top) / (t * this.tileSize.h)), s = this.getZoomForResolution(t), r = i + n * this.tierSizeInTiles[s].w + this.tileCountUpToTier[s], o = "TileGroup" + Math.floor(r / 256) + "/" + s + "-" + i + "-" + n + ".jpg", a = this.url;
        return OpenLayers.Util.isArray(a) && (a = this.selectUrl(o, a)), a + o;
    },
    "getImageSize": function() {
        if (arguments.length > 0) {
            var e = this.adjustBounds(arguments[0]), t = this.getServerResolution(), i = Math.round((e.left - this.tileOrigin.lon) / (t * this.tileSize.w)), n = Math.round((this.tileOrigin.lat - e.top) / (t * this.tileSize.h)), s = this.getZoomForResolution(t), r = this.standardTileSize, o = this.standardTileSize;
            return i == this.tierSizeInTiles[s].w - 1 && 0 == (r = this.tierImageSize[s].w % this.standardTileSize) && (r = this.standardTileSize), 
            n == this.tierSizeInTiles[s].h - 1 && 0 == (o = this.tierImageSize[s].h % this.standardTileSize) && (o = this.standardTileSize), 
            i == this.tierSizeInTiles[s].w && (r = Math.ceil(this.size.w / Math.pow(2, this.numberOfTiers - 1 - s) - this.tierImageSize[s].w)), 
            n == this.tierSizeInTiles[s].h && (o = Math.ceil(this.size.h / Math.pow(2, this.numberOfTiers - 1 - s) - this.tierImageSize[s].h)), 
            new OpenLayers.Size(r, o);
        }
        return this.tileSize;
    },
    "setMap": function(e) {
        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments), this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left, this.map.maxExtent.top);
    },
    "CLASS_NAME": "OpenLayers.Layer.Zoomify"
}), OpenLayers.Layer.Google.v3 = {
    "DEFAULTS": {
        "sphericalMercator": !0,
        "projection": "EPSG:900913"
    },
    "animationEnabled": !0,
    "loadMapObject": function() {
        this.type || (this.type = google.maps.MapTypeId.ROADMAP);
        var e, t = OpenLayers.Layer.Google.cache[this.map.id];
        if (t) e = t.mapObject, ++t.count; else {
            var i = this.map.getCenter(), n = document.createElement("div");
            n.className = "olForeignContainer", n.style.width = "100%", n.style.height = "100%", 
            e = new google.maps.Map(n, {
                "center": i ? new google.maps.LatLng(i.lat, i.lon) : new google.maps.LatLng(0, 0),
                "zoom": this.map.getZoom() || 0,
                "mapTypeId": this.type,
                "disableDefaultUI": !0,
                "keyboardShortcuts": !1,
                "draggable": !1,
                "disableDoubleClickZoom": !0,
                "scrollwheel": !1,
                "streetViewControl": !1,
                "tilt": this.useTiltImages ? 45 : 0
            });
            var s = document.createElement("div");
            s.style.width = "100%", s.style.height = "100%", e.controls[google.maps.ControlPosition.TOP_LEFT].push(s), 
            t = {
                "googleControl": s,
                "mapObject": e,
                "count": 1
            }, OpenLayers.Layer.Google.cache[this.map.id] = t;
        }
        this.mapObject = e, this.setGMapVisibility(this.visibility);
    },
    "onMapResize": function() {
        this.visibility && google.maps.event.trigger(this.mapObject, "resize");
    },
    "setGMapVisibility": function(e) {
        var t = OpenLayers.Layer.Google.cache[this.map.id], i = this.map;
        if (t) {
            for (var n, s = this.type, r = i.layers, o = r.length - 1; o >= 0; --o) if ((n = r[o]) instanceof OpenLayers.Layer.Google && !0 === n.visibility && !0 === n.inRange) {
                s = n.type, e = !0;
                break;
            }
            var a = this.mapObject.getDiv();
            if (!0 === e) {
                if (a.parentNode !== i.div) {
                    if (t.rendered) t.googleControl.appendChild(i.viewPortDiv); else {
                        a.style.visibility = "hidden";
                        var l = this;
                        google.maps.event.addListenerOnce(this.mapObject, "tilesloaded", function() {
                            t.rendered = !0, a.style.visibility = "", l.setGMapVisibility(!0), l.moveTo(l.map.getCenter()), 
                            t.googleControl.appendChild(i.viewPortDiv), l.setGMapVisibility(l.visible);
                        });
                    }
                    i.div.appendChild(a), google.maps.event.trigger(this.mapObject, "resize");
                }
                this.mapObject.setMapTypeId(s);
            } else t.googleControl.hasChildNodes() && (i.div.appendChild(i.viewPortDiv), i.div.contains(a) && i.div.removeChild(a));
        }
    },
    "getMapContainer": function() {
        return this.mapObject.getDiv();
    },
    "getMapObjectBoundsFromOLBounds": function(e) {
        var t = null;
        if (null != e) {
            var i = this.sphericalMercator ? this.inverseMercator(e.bottom, e.left) : new OpenLayers.LonLat(e.bottom, e.left), n = this.sphericalMercator ? this.inverseMercator(e.top, e.right) : new OpenLayers.LonLat(e.top, e.right);
            t = new google.maps.LatLngBounds(new google.maps.LatLng(i.lat, i.lon), new google.maps.LatLng(n.lat, n.lon));
        }
        return t;
    },
    "getMapObjectLonLatFromMapObjectPixel": function(e) {
        var t = this.map.getSize(), i = this.getLongitudeFromMapObjectLonLat(this.mapObject.center), n = this.getLatitudeFromMapObjectLonLat(this.mapObject.center), s = this.map.getResolution(), r = e.x - t.w / 2, o = e.y - t.h / 2, a = new OpenLayers.LonLat(i + r * s, n - o * s);
        return this.wrapDateLine && (a = a.wrapDateLine(this.maxExtent)), this.getMapObjectLonLatFromLonLat(a.lon, a.lat);
    },
    "getMapObjectPixelFromMapObjectLonLat": function(e) {
        var t = this.getLongitudeFromMapObjectLonLat(e), i = this.getLatitudeFromMapObjectLonLat(e), n = this.map.getResolution(), s = this.map.getExtent();
        return this.getMapObjectPixelFromXY(1 / n * (t - s.left), 1 / n * (s.top - i));
    },
    "setMapObjectCenter": function(e, t) {
        if (!1 === this.animationEnabled && t != this.mapObject.zoom) {
            var i = this.getMapContainer();
            google.maps.event.addListenerOnce(this.mapObject, "idle", function() {
                i.style.visibility = "";
            }), i.style.visibility = "hidden";
        }
        this.mapObject.setOptions({
            "center": e,
            "zoom": t
        });
    },
    "getMapObjectZoomFromMapObjectBounds": function(e) {
        return this.mapObject.getBoundsZoomLevel(e);
    },
    "getMapObjectLonLatFromLonLat": function(e, t) {
        var i;
        if (this.sphericalMercator) {
            var n = this.inverseMercator(e, t);
            i = new google.maps.LatLng(n.lat, n.lon);
        } else i = new google.maps.LatLng(t, e);
        return i;
    },
    "getMapObjectPixelFromXY": function(e, t) {
        return new google.maps.Point(e, t);
    }
}, OpenLayers.Marker.Box = OpenLayers.Class(OpenLayers.Marker, {
    "bounds": null,
    "div": null,
    "initialize": function(e, t, i) {
        this.bounds = e, this.div = OpenLayers.Util.createDiv(), this.div.style.overflow = "hidden", 
        this.events = new OpenLayers.Events(this, this.div), this.setBorder(t, i);
    },
    "destroy": function() {
        this.bounds = null, this.div = null, OpenLayers.Marker.prototype.destroy.apply(this, arguments);
    },
    "setBorder": function(e, t) {
        e || (e = "red"), t || (t = 2), this.div.style.border = t + "px solid " + e;
    },
    "draw": function(e, t) {
        return OpenLayers.Util.modifyDOMElement(this.div, null, e, t), this.div;
    },
    "onScreen": function() {
        var e = !1;
        return this.map && (e = this.map.getExtent().containsBounds(this.bounds, !0, !0)), 
        e;
    },
    "display": function(e) {
        this.div.style.display = e ? "" : "none";
    },
    "CLASS_NAME": "OpenLayers.Marker.Box"
}), OpenLayers.Popup.Anchored = OpenLayers.Class(OpenLayers.Popup, {
    "relativePosition": null,
    "keepInMap": !0,
    "anchor": null,
    "initialize": function(e, t, i, n, s, r, o) {
        var a = [ e, t, i, n, r, o ];
        OpenLayers.Popup.prototype.initialize.apply(this, a), this.anchor = null != s ? s : {
            "size": new OpenLayers.Size(0, 0),
            "offset": new OpenLayers.Pixel(0, 0)
        };
    },
    "destroy": function() {
        this.anchor = null, this.relativePosition = null, OpenLayers.Popup.prototype.destroy.apply(this, arguments);
    },
    "show": function() {
        this.updatePosition(), OpenLayers.Popup.prototype.show.apply(this, arguments);
    },
    "moveTo": function(e) {
        var t = this.relativePosition;
        this.relativePosition = this.calculateRelativePosition(e), OpenLayers.Popup.prototype.moveTo.call(this, this.calculateNewPx(e)), 
        this.relativePosition != t && this.updateRelativePosition();
    },
    "setSize": function(e) {
        if (OpenLayers.Popup.prototype.setSize.apply(this, arguments), this.lonlat && this.map) {
            var t = this.map.getLayerPxFromLonLat(this.lonlat);
            this.moveTo(t);
        }
    },
    "calculateRelativePosition": function(e) {
        var t = this.map.getLonLatFromLayerPx(e), i = this.map.getExtent().determineQuadrant(t);
        return OpenLayers.Bounds.oppositeQuadrant(i);
    },
    "updateRelativePosition": function() {},
    "calculateNewPx": function(e) {
        var t = e.offset(this.anchor.offset), i = this.size || this.contentSize, n = "t" == this.relativePosition.charAt(0);
        t.y += n ? -i.h : this.anchor.size.h;
        var s = "l" == this.relativePosition.charAt(1);
        return t.x += s ? -i.w : this.anchor.size.w, t;
    },
    "CLASS_NAME": "OpenLayers.Popup.Anchored"
}), OpenLayers.Popup.Framed = OpenLayers.Class(OpenLayers.Popup.Anchored, {
    "imageSrc": null,
    "imageSize": null,
    "isAlphaImage": !1,
    "positionBlocks": null,
    "blocks": null,
    "fixedRelativePosition": !1,
    "initialize": function(e, t, i, n, s, r, o) {
        OpenLayers.Popup.Anchored.prototype.initialize.apply(this, arguments), this.fixedRelativePosition && (this.updateRelativePosition(), 
        this.calculateRelativePosition = function(e) {
            return this.relativePosition;
        }), this.contentDiv.style.position = "absolute", this.contentDiv.style.zIndex = 1, 
        r && (this.closeDiv.style.zIndex = 1), this.groupDiv.style.position = "absolute", 
        this.groupDiv.style.top = "0px", this.groupDiv.style.left = "0px", this.groupDiv.style.height = "100%", 
        this.groupDiv.style.width = "100%";
    },
    "destroy": function() {
        this.imageSrc = null, this.imageSize = null, this.isAlphaImage = null, this.fixedRelativePosition = !1, 
        this.positionBlocks = null;
        for (var e = 0; e < this.blocks.length; e++) {
            var t = this.blocks[e];
            t.image && t.div.removeChild(t.image), t.image = null, t.div && this.groupDiv.removeChild(t.div), 
            t.div = null;
        }
        this.blocks = null, OpenLayers.Popup.Anchored.prototype.destroy.apply(this, arguments);
    },
    "setBackgroundColor": function(e) {},
    "setBorder": function() {},
    "setOpacity": function(e) {},
    "setSize": function(e) {
        OpenLayers.Popup.Anchored.prototype.setSize.apply(this, arguments), this.updateBlocks();
    },
    "updateRelativePosition": function() {
        if (this.padding = this.positionBlocks[this.relativePosition].padding, this.closeDiv) {
            var e = this.getContentDivPadding();
            this.closeDiv.style.right = e.right + this.padding.right + "px", this.closeDiv.style.top = e.top + this.padding.top + "px";
        }
        this.updateBlocks();
    },
    "calculateNewPx": function(e) {
        var t = OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this, arguments);
        return t = t.offset(this.positionBlocks[this.relativePosition].offset);
    },
    "createBlocks": function() {
        this.blocks = [];
        var e = null;
        for (var t in this.positionBlocks) {
            e = t;
            break;
        }
        for (var i = this.positionBlocks[e], n = 0; n < i.blocks.length; n++) {
            var s = {};
            this.blocks.push(s);
            var r = this.id + "_FrameDecorationDiv_" + n;
            s.div = OpenLayers.Util.createDiv(r, null, null, null, "absolute", null, "hidden", null);
            var o = this.id + "_FrameDecorationImg_" + n, a = this.isAlphaImage ? OpenLayers.Util.createAlphaImageDiv : OpenLayers.Util.createImage;
            s.image = a(o, null, this.imageSize, this.imageSrc, "absolute", null, null, null), 
            s.div.appendChild(s.image), this.groupDiv.appendChild(s.div);
        }
    },
    "updateBlocks": function() {
        if (this.blocks || this.createBlocks(), this.size && this.relativePosition) {
            for (var e = this.positionBlocks[this.relativePosition], t = 0; t < e.blocks.length; t++) {
                var i = e.blocks[t], n = this.blocks[t], s = i.anchor.left, r = i.anchor.bottom, o = i.anchor.right, a = i.anchor.top, l = isNaN(i.size.w) ? this.size.w - (o + s) : i.size.w, h = isNaN(i.size.h) ? this.size.h - (r + a) : i.size.h;
                n.div.style.width = (l < 0 ? 0 : l) + "px", n.div.style.height = (h < 0 ? 0 : h) + "px", 
                n.div.style.left = null != s ? s + "px" : "", n.div.style.bottom = null != r ? r + "px" : "", 
                n.div.style.right = null != o ? o + "px" : "", n.div.style.top = null != a ? a + "px" : "", 
                n.image.style.left = i.position.x + "px", n.image.style.top = i.position.y + "px";
            }
            this.contentDiv.style.left = this.padding.left + "px", this.contentDiv.style.top = this.padding.top + "px";
        }
    },
    "CLASS_NAME": "OpenLayers.Popup.Framed"
}), OpenLayers.Popup.FramedCloud = OpenLayers.Class(OpenLayers.Popup.Framed, {
    "contentDisplayClass": "olFramedCloudPopupContent",
    "autoSize": !0,
    "panMapIfOutOfView": !0,
    "imageSize": new OpenLayers.Size(1276, 736),
    "isAlphaImage": !1,
    "fixedRelativePosition": !1,
    "positionBlocks": {
        "tl": {
            "offset": new OpenLayers.Pixel(44, 0),
            "padding": new OpenLayers.Bounds(8, 40, 8, 9),
            "blocks": [ {
                "size": new OpenLayers.Size("auto", "auto"),
                "anchor": new OpenLayers.Bounds(0, 51, 22, 0),
                "position": new OpenLayers.Pixel(0, 0)
            }, {
                "size": new OpenLayers.Size(22, "auto"),
                "anchor": new OpenLayers.Bounds(null, 50, 0, 0),
                "position": new OpenLayers.Pixel(-1238, 0)
            }, {
                "size": new OpenLayers.Size("auto", 19),
                "anchor": new OpenLayers.Bounds(0, 32, 22, null),
                "position": new OpenLayers.Pixel(0, -631)
            }, {
                "size": new OpenLayers.Size(22, 18),
                "anchor": new OpenLayers.Bounds(null, 32, 0, null),
                "position": new OpenLayers.Pixel(-1238, -632)
            }, {
                "size": new OpenLayers.Size(81, 35),
                "anchor": new OpenLayers.Bounds(null, 0, 0, null),
                "position": new OpenLayers.Pixel(0, -688)
            } ]
        },
        "tr": {
            "offset": new OpenLayers.Pixel(-45, 0),
            "padding": new OpenLayers.Bounds(8, 40, 8, 9),
            "blocks": [ {
                "size": new OpenLayers.Size("auto", "auto"),
                "anchor": new OpenLayers.Bounds(0, 51, 22, 0),
                "position": new OpenLayers.Pixel(0, 0)
            }, {
                "size": new OpenLayers.Size(22, "auto"),
                "anchor": new OpenLayers.Bounds(null, 50, 0, 0),
                "position": new OpenLayers.Pixel(-1238, 0)
            }, {
                "size": new OpenLayers.Size("auto", 19),
                "anchor": new OpenLayers.Bounds(0, 32, 22, null),
                "position": new OpenLayers.Pixel(0, -631)
            }, {
                "size": new OpenLayers.Size(22, 19),
                "anchor": new OpenLayers.Bounds(null, 32, 0, null),
                "position": new OpenLayers.Pixel(-1238, -631)
            }, {
                "size": new OpenLayers.Size(81, 35),
                "anchor": new OpenLayers.Bounds(0, 0, null, null),
                "position": new OpenLayers.Pixel(-215, -687)
            } ]
        },
        "bl": {
            "offset": new OpenLayers.Pixel(45, 0),
            "padding": new OpenLayers.Bounds(8, 9, 8, 40),
            "blocks": [ {
                "size": new OpenLayers.Size("auto", "auto"),
                "anchor": new OpenLayers.Bounds(0, 21, 22, 32),
                "position": new OpenLayers.Pixel(0, 0)
            }, {
                "size": new OpenLayers.Size(22, "auto"),
                "anchor": new OpenLayers.Bounds(null, 21, 0, 32),
                "position": new OpenLayers.Pixel(-1238, 0)
            }, {
                "size": new OpenLayers.Size("auto", 21),
                "anchor": new OpenLayers.Bounds(0, 0, 22, null),
                "position": new OpenLayers.Pixel(0, -629)
            }, {
                "size": new OpenLayers.Size(22, 21),
                "anchor": new OpenLayers.Bounds(null, 0, 0, null),
                "position": new OpenLayers.Pixel(-1238, -629)
            }, {
                "size": new OpenLayers.Size(81, 33),
                "anchor": new OpenLayers.Bounds(null, null, 0, 0),
                "position": new OpenLayers.Pixel(-101, -674)
            } ]
        },
        "br": {
            "offset": new OpenLayers.Pixel(-44, 0),
            "padding": new OpenLayers.Bounds(8, 9, 8, 40),
            "blocks": [ {
                "size": new OpenLayers.Size("auto", "auto"),
                "anchor": new OpenLayers.Bounds(0, 21, 22, 32),
                "position": new OpenLayers.Pixel(0, 0)
            }, {
                "size": new OpenLayers.Size(22, "auto"),
                "anchor": new OpenLayers.Bounds(null, 21, 0, 32),
                "position": new OpenLayers.Pixel(-1238, 0)
            }, {
                "size": new OpenLayers.Size("auto", 21),
                "anchor": new OpenLayers.Bounds(0, 0, 22, null),
                "position": new OpenLayers.Pixel(0, -629)
            }, {
                "size": new OpenLayers.Size(22, 21),
                "anchor": new OpenLayers.Bounds(null, 0, 0, null),
                "position": new OpenLayers.Pixel(-1238, -629)
            }, {
                "size": new OpenLayers.Size(81, 33),
                "anchor": new OpenLayers.Bounds(0, null, null, 0),
                "position": new OpenLayers.Pixel(-311, -674)
            } ]
        }
    },
    "minSize": new OpenLayers.Size(105, 10),
    "maxSize": new OpenLayers.Size(1200, 660),
    "initialize": function(e, t, i, n, s, r, o) {
        this.imageSrc = OpenLayers.Util.getImageLocation("cloud-popup-relative.png"), OpenLayers.Popup.Framed.prototype.initialize.apply(this, arguments), 
        this.contentDiv.className = this.contentDisplayClass;
    },
    "CLASS_NAME": "OpenLayers.Popup.FramedCloud"
}), OpenLayers.Protocol.CSW = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Protocol.CSW.DEFAULTS);
    var t = OpenLayers.Protocol.CSW["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported CSW version: " + e.version;
    return new t(e);
}, OpenLayers.Protocol.CSW.DEFAULTS = {
    "version": "2.0.2"
}, OpenLayers.Protocol.HTTP = OpenLayers.Class(OpenLayers.Protocol, {
    "url": null,
    "headers": null,
    "params": null,
    "callback": null,
    "scope": null,
    "readWithPOST": !1,
    "updateWithPOST": !1,
    "deleteWithPOST": !1,
    "wildcarded": !1,
    "srsInBBOX": !1,
    "initialize": function(e) {
        if (e = e || {}, this.params = {}, this.headers = {}, OpenLayers.Protocol.prototype.initialize.apply(this, arguments), 
        !this.filterToParams && OpenLayers.Format.QueryStringFilter) {
            var t = new OpenLayers.Format.QueryStringFilter({
                "wildcarded": this.wildcarded,
                "srsInBBOX": this.srsInBBOX
            });
            this.filterToParams = function(e, i) {
                return t.write(e, i);
            };
        }
    },
    "destroy": function() {
        this.params = null, this.headers = null, OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "read": function(e) {
        OpenLayers.Protocol.prototype.read.apply(this, arguments), (e = e || {}).params = OpenLayers.Util.applyDefaults(e.params, this.options.params), 
        (e = OpenLayers.Util.applyDefaults(e, this.options)).filter && this.filterToParams && (e.params = this.filterToParams(e.filter, e.params));
        var t = void 0 !== e.readWithPOST ? e.readWithPOST : this.readWithPOST, i = new OpenLayers.Protocol.Response({
            "requestType": "read"
        });
        if (t) {
            var n = e.headers || {};
            n["Content-Type"] = "application/x-www-form-urlencoded", i.priv = OpenLayers.Request.POST({
                "url": e.url,
                "callback": this.createCallback(this.handleRead, i, e),
                "data": OpenLayers.Util.getParameterString(e.params),
                "headers": n
            });
        } else i.priv = OpenLayers.Request.GET({
            "url": e.url,
            "callback": this.createCallback(this.handleRead, i, e),
            "params": e.params,
            "headers": e.headers
        });
        return i;
    },
    "handleRead": function(e, t) {
        this.handleResponse(e, t);
    },
    "create": function(e, t) {
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var i = new OpenLayers.Protocol.Response({
            "reqFeatures": e,
            "requestType": "create"
        });
        return i.priv = OpenLayers.Request.POST({
            "url": t.url,
            "callback": this.createCallback(this.handleCreate, i, t),
            "headers": t.headers,
            "data": this.format.write(e)
        }), i;
    },
    "handleCreate": function(e, t) {
        this.handleResponse(e, t);
    },
    "update": function(e, t) {
        var i = (t = t || {}).url || e.url || this.options.url + "/" + e.fid;
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var n = new OpenLayers.Protocol.Response({
            "reqFeatures": e,
            "requestType": "update"
        }), s = this.updateWithPOST ? "POST" : "PUT";
        return n.priv = OpenLayers.Request[s]({
            "url": i,
            "callback": this.createCallback(this.handleUpdate, n, t),
            "headers": t.headers,
            "data": this.format.write(e)
        }), n;
    },
    "handleUpdate": function(e, t) {
        this.handleResponse(e, t);
    },
    "delete": function(e, t) {
        var i = (t = t || {}).url || e.url || this.options.url + "/" + e.fid;
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var n = new OpenLayers.Protocol.Response({
            "reqFeatures": e,
            "requestType": "delete"
        }), s = this.deleteWithPOST ? "POST" : "DELETE", r = {
            "url": i,
            "callback": this.createCallback(this.handleDelete, n, t),
            "headers": t.headers
        };
        return this.deleteWithPOST && (r.data = this.format.write(e)), n.priv = OpenLayers.Request[s](r), 
        n;
    },
    "handleDelete": function(e, t) {
        this.handleResponse(e, t);
    },
    "handleResponse": function(e, t) {
        var i = e.priv;
        t.callback && (i.status >= 200 && i.status < 300 ? ("delete" != e.requestType && (e.features = this.parseFeatures(i)), 
        e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, 
        t.callback.call(t.scope, e));
    },
    "parseFeatures": function(e) {
        var t = e.responseXML;
        return t && t.documentElement || (t = e.responseText), !t || t.length <= 0 ? null : this.format.read(t);
    },
    "commit": function(e, t) {
        function i(e) {
            this.callUserCallback(e, t), p = p && e.success(), ++s >= u && t.callback && (d.code = p ? OpenLayers.Protocol.Response.SUCCESS : OpenLayers.Protocol.Response.FAILURE, 
            t.callback.apply(t.scope, [ d ]));
        }
        t = OpenLayers.Util.applyDefaults(t, this.options);
        var n = [], s = 0, r = {};
        r[OpenLayers.State.INSERT] = [], r[OpenLayers.State.UPDATE] = [], r[OpenLayers.State.DELETE] = [];
        for (var o, a, l = [], h = 0, c = e.length; h < c; ++h) (a = r[(o = e[h]).state]) && (a.push(o), 
        l.push(o));
        var u = (r[OpenLayers.State.INSERT].length > 0 ? 1 : 0) + r[OpenLayers.State.UPDATE].length + r[OpenLayers.State.DELETE].length, p = !0, d = new OpenLayers.Protocol.Response({
            "reqFeatures": l
        }), f = r[OpenLayers.State.INSERT];
        f.length > 0 && n.push(this.create(f, OpenLayers.Util.applyDefaults({
            "callback": function(e) {
                for (var t = e.features ? e.features.length : 0, n = new Array(t), s = 0; s < t; ++s) n[s] = e.features[s].fid;
                d.insertIds = n, i.apply(this, [ e ]);
            },
            "scope": this
        }, t.create)));
        for (h = (f = r[OpenLayers.State.UPDATE]).length - 1; h >= 0; --h) n.push(this.update(f[h], OpenLayers.Util.applyDefaults({
            "callback": i,
            "scope": this
        }, t.update)));
        for (h = (f = r[OpenLayers.State.DELETE]).length - 1; h >= 0; --h) n.push(this.delete(f[h], OpenLayers.Util.applyDefaults({
            "callback": i,
            "scope": this
        }, t.delete)));
        return n;
    },
    "abort": function(e) {
        e && e.priv.abort();
    },
    "callUserCallback": function(e, t) {
        var i = t[e.requestType];
        i && i.callback && i.callback.call(i.scope, e);
    },
    "CLASS_NAME": "OpenLayers.Protocol.HTTP"
}), OpenLayers.Protocol.Script = OpenLayers.Class(OpenLayers.Protocol, {
    "url": null,
    "params": null,
    "callback": null,
    "callbackTemplate": "OpenLayers.Protocol.Script.registry.${id}",
    "callbackKey": "callback",
    "callbackPrefix": "",
    "scope": null,
    "format": null,
    "pendingRequests": null,
    "srsInBBOX": !1,
    "initialize": function(e) {
        if (e = e || {}, this.params = {}, this.pendingRequests = {}, OpenLayers.Protocol.prototype.initialize.apply(this, arguments), 
        this.format || (this.format = new OpenLayers.Format.GeoJSON()), !this.filterToParams && OpenLayers.Format.QueryStringFilter) {
            var t = new OpenLayers.Format.QueryStringFilter({
                "srsInBBOX": this.srsInBBOX
            });
            this.filterToParams = function(e, i) {
                return t.write(e, i);
            };
        }
    },
    "read": function(e) {
        OpenLayers.Protocol.prototype.read.apply(this, arguments), (e = OpenLayers.Util.applyDefaults(e, this.options)).params = OpenLayers.Util.applyDefaults(e.params, this.options.params), 
        e.filter && this.filterToParams && (e.params = this.filterToParams(e.filter, e.params));
        var t = new OpenLayers.Protocol.Response({
            "requestType": "read"
        }), i = this.createRequest(e.url, e.params, OpenLayers.Function.bind(function(i) {
            t.data = i, this.handleRead(t, e);
        }, this));
        return t.priv = i, t;
    },
    "createRequest": function(e, t, i) {
        var n = OpenLayers.Protocol.Script.register(i), s = OpenLayers.String.format(this.callbackTemplate, {
            "id": n
        });
        (t = OpenLayers.Util.extend({}, t))[this.callbackKey] = this.callbackPrefix + s, 
        e = OpenLayers.Util.urlAppend(e, OpenLayers.Util.getParameterString(t));
        var r = document.createElement("script");
        return r.type = "text/javascript", r.src = e, r.id = "OpenLayers_Protocol_Script_" + n, 
        this.pendingRequests[r.id] = r, document.getElementsByTagName("head")[0].appendChild(r), 
        r;
    },
    "destroyRequest": function(e) {
        OpenLayers.Protocol.Script.unregister(e.id.split("_").pop()), delete this.pendingRequests[e.id], 
        e.parentNode && e.parentNode.removeChild(e);
    },
    "handleRead": function(e, t) {
        this.handleResponse(e, t);
    },
    "handleResponse": function(e, t) {
        t.callback && (e.data ? (e.features = this.parseFeatures(e.data), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, 
        this.destroyRequest(e.priv), t.callback.call(t.scope, e));
    },
    "parseFeatures": function(e) {
        return this.format.read(e);
    },
    "abort": function(e) {
        if (e) this.destroyRequest(e.priv); else for (var t in this.pendingRequests) this.destroyRequest(this.pendingRequests[t]);
    },
    "destroy": function() {
        this.abort(), delete this.params, delete this.format, OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "CLASS_NAME": "OpenLayers.Protocol.Script"
}), function() {
    var e = OpenLayers.Protocol.Script, t = 0;
    e.registry = {}, e.register = function(i) {
        var n = "c" + ++t;
        return e.registry[n] = function() {
            i.apply(this, arguments);
        }, n;
    }, e.unregister = function(t) {
        delete e.registry[t];
    };
}(), OpenLayers.Protocol.SOS = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Protocol.SOS.DEFAULTS);
    var t = OpenLayers.Protocol.SOS["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported SOS version: " + e.version;
    return new t(e);
}, OpenLayers.Protocol.SOS.DEFAULTS = {
    "version": "1.0.0"
}, OpenLayers.Protocol.WFS = function(e) {
    e = OpenLayers.Util.applyDefaults(e, OpenLayers.Protocol.WFS.DEFAULTS);
    var t = OpenLayers.Protocol.WFS["v" + e.version.replace(/\./g, "_")];
    if (!t) throw "Unsupported WFS version: " + e.version;
    return new t(e);
}, OpenLayers.Protocol.WFS.fromWMSLayer = function(e, t) {
    var i, n, s = e.params.LAYERS, r = (OpenLayers.Util.isArray(s) ? s[0] : s).split(":");
    r.length > 1 && (n = r[0]), i = r.pop();
    var o = {
        "url": e.url,
        "featureType": i,
        "featurePrefix": n,
        "srsName": e.projection && e.projection.getCode() || e.map && e.map.getProjectionObject().getCode(),
        "version": "1.1.0"
    };
    return new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults(t, o));
}, OpenLayers.Protocol.WFS.DEFAULTS = {
    "version": "1.0.0"
}, OpenLayers.Protocol.CSW.v2_0_2 = OpenLayers.Class(OpenLayers.Protocol, {
    "formatOptions": null,
    "initialize": function(e) {
        OpenLayers.Protocol.prototype.initialize.apply(this, [ e ]), e.format || (this.format = new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({}, this.formatOptions)));
    },
    "destroy": function() {
        this.options && !this.options.format && this.format.destroy(), this.format = null, 
        OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "read": function(e) {
        e = OpenLayers.Util.extend({}, e), OpenLayers.Util.applyDefaults(e, this.options || {});
        var t = new OpenLayers.Protocol.Response({
            "requestType": "read"
        }), i = this.format.write(e.params || e);
        return t.priv = OpenLayers.Request.POST({
            "url": e.url,
            "callback": this.createCallback(this.handleRead, t, e),
            "params": e.params,
            "headers": e.headers,
            "data": i
        }), t;
    },
    "handleRead": function(e, t) {
        if (t.callback) {
            var i = e.priv;
            i.status >= 200 && i.status < 300 ? (e.data = this.parseData(i), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, 
            t.callback.call(t.scope, e);
        }
    },
    "parseData": function(e) {
        var t = e.responseXML;
        return t && t.documentElement || (t = e.responseText), !t || t.length <= 0 ? null : this.format.read(t);
    },
    "CLASS_NAME": "OpenLayers.Protocol.CSW.v2_0_2"
}), OpenLayers.Protocol.SOS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol, {
    "fois": null,
    "formatOptions": null,
    "initialize": function(e) {
        OpenLayers.Protocol.prototype.initialize.apply(this, [ e ]), e.format || (this.format = new OpenLayers.Format.SOSGetFeatureOfInterest(this.formatOptions));
    },
    "destroy": function() {
        this.options && !this.options.format && this.format.destroy(), this.format = null, 
        OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "read": function(e) {
        e = OpenLayers.Util.extend({}, e), OpenLayers.Util.applyDefaults(e, this.options || {});
        var t = new OpenLayers.Protocol.Response({
            "requestType": "read"
        }), i = this.format, n = OpenLayers.Format.XML.prototype.write.apply(i, [ i.writeNode("sos:GetFeatureOfInterest", {
            "fois": this.fois
        }) ]);
        return t.priv = OpenLayers.Request.POST({
            "url": e.url,
            "callback": this.createCallback(this.handleRead, t, e),
            "data": n
        }), t;
    },
    "handleRead": function(e, t) {
        if (t.callback) {
            var i = e.priv;
            i.status >= 200 && i.status < 300 ? (e.features = this.parseFeatures(i), e.code = OpenLayers.Protocol.Response.SUCCESS) : e.code = OpenLayers.Protocol.Response.FAILURE, 
            t.callback.call(t.scope, e);
        }
    },
    "parseFeatures": function(e) {
        var t = e.responseXML;
        return t && t.documentElement || (t = e.responseText), !t || t.length <= 0 ? null : this.format.read(t);
    },
    "CLASS_NAME": "OpenLayers.Protocol.SOS.v1_0_0"
}), OpenLayers.Protocol.WFS.v1 = OpenLayers.Class(OpenLayers.Protocol, {
    "version": null,
    "srsName": "EPSG:4326",
    "featureType": null,
    "featureNS": null,
    "geometryName": "the_geom",
    "schema": null,
    "featurePrefix": "feature",
    "formatOptions": null,
    "readFormat": null,
    "readOptions": null,
    "initialize": function(e) {
        OpenLayers.Protocol.prototype.initialize.apply(this, [ e ]), e.format || (this.format = OpenLayers.Format.WFST(OpenLayers.Util.extend({
            "version": this.version,
            "featureType": this.featureType,
            "featureNS": this.featureNS,
            "featurePrefix": this.featurePrefix,
            "geometryName": this.geometryName,
            "srsName": this.srsName,
            "schema": this.schema
        }, this.formatOptions))), !e.geometryName && parseFloat(this.format.version) > 1 && this.setGeometryName(null);
    },
    "destroy": function() {
        this.options && !this.options.format && this.format.destroy(), this.format = null, 
        OpenLayers.Protocol.prototype.destroy.apply(this);
    },
    "read": function(e) {
        OpenLayers.Protocol.prototype.read.apply(this, arguments), e = OpenLayers.Util.extend({}, e), 
        OpenLayers.Util.applyDefaults(e, this.options || {});
        var t = new OpenLayers.Protocol.Response({
            "requestType": "read"
        }), i = OpenLayers.Format.XML.prototype.write.apply(this.format, [ this.format.writeNode("wfs:GetFeature", e) ]);
        return t.priv = OpenLayers.Request.POST({
            "url": e.url,
            "callback": this.createCallback(this.handleRead, t, e),
            "params": e.params,
            "headers": e.headers,
            "data": i
        }), t;
    },
    "setFeatureType": function(e) {
        this.featureType = e, this.format.featureType = e;
    },
    "setGeometryName": function(e) {
        this.geometryName = e, this.format.geometryName = e;
    },
    "handleRead": function(e, t) {
        if (t = OpenLayers.Util.extend({}, t), OpenLayers.Util.applyDefaults(t, this.options), 
        t.callback) {
            var i = e.priv;
            if (i.status >= 200 && i.status < 300) {
                var n = this.parseResponse(i, t.readOptions);
                n && !1 !== n.success ? (t.readOptions && "object" == t.readOptions.output ? OpenLayers.Util.extend(e, n) : e.features = n, 
                e.code = OpenLayers.Protocol.Response.SUCCESS) : (e.code = OpenLayers.Protocol.Response.FAILURE, 
                e.error = n);
            } else e.code = OpenLayers.Protocol.Response.FAILURE;
            t.callback.call(t.scope, e);
        }
    },
    "parseResponse": function(e, t) {
        var i = e.responseXML;
        if (i && i.documentElement || (i = e.responseText), !i || i.length <= 0) return null;
        var n = null !== this.readFormat ? this.readFormat.read(i) : this.format.read(i, t);
        if (!this.featureNS) {
            var s = this.readFormat || this.format;
            this.featureNS = s.featureNS, s.autoConfig = !1, this.geometryName || this.setGeometryName(s.geometryName);
        }
        return n;
    },
    "commit": function(e, t) {
        t = OpenLayers.Util.extend({}, t), OpenLayers.Util.applyDefaults(t, this.options);
        var i = new OpenLayers.Protocol.Response({
            "requestType": "commit",
            "reqFeatures": e
        });
        return i.priv = OpenLayers.Request.POST({
            "url": t.url,
            "headers": t.headers,
            "data": this.format.write(e, t),
            "callback": this.createCallback(this.handleCommit, i, t)
        }), i;
    },
    "handleCommit": function(e, t) {
        if (t.callback) {
            var i = e.priv, n = i.responseXML;
            n && n.documentElement || (n = i.responseText);
            var s = this.format.read(n) || {};
            e.insertIds = s.insertIds || [], s.success ? e.code = OpenLayers.Protocol.Response.SUCCESS : (e.code = OpenLayers.Protocol.Response.FAILURE, 
            e.error = s), t.callback.call(t.scope, e);
        }
    },
    "filterDelete": function(e, t) {
        t = OpenLayers.Util.extend({}, t), OpenLayers.Util.applyDefaults(t, this.options);
        new OpenLayers.Protocol.Response({
            "requestType": "commit"
        });
        var i = this.format.createElementNSPlus("wfs:Transaction", {
            "attributes": {
                "service": "WFS",
                "version": this.version
            }
        }), n = this.format.createElementNSPlus("wfs:Delete", {
            "attributes": {
                "typeName": (t.featureNS ? this.featurePrefix + ":" : "") + t.featureType
            }
        });
        t.featureNS && n.setAttribute("xmlns:" + this.featurePrefix, t.featureNS);
        var s = this.format.writeNode("ogc:Filter", e);
        n.appendChild(s), i.appendChild(n);
        var r = OpenLayers.Format.XML.prototype.write.apply(this.format, [ i ]);
        return OpenLayers.Request.POST({
            "url": this.url,
            "callback": t.callback || function() {},
            "data": r
        });
    },
    "abort": function(e) {
        e && e.priv.abort();
    },
    "CLASS_NAME": "OpenLayers.Protocol.WFS.v1"
}), OpenLayers.Protocol.WFS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {
    "version": "1.0.0",
    "CLASS_NAME": "OpenLayers.Protocol.WFS.v1_0_0"
}), OpenLayers.Protocol.WFS.v1_1_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {
    "version": "1.1.0",
    "initialize": function(e) {
        OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this, arguments), this.outputFormat && !this.readFormat && ("gml2" == this.outputFormat.toLowerCase() ? this.readFormat = new OpenLayers.Format.GML.v2({
            "featureType": this.featureType,
            "featureNS": this.featureNS,
            "geometryName": this.geometryName
        }) : "json" == this.outputFormat.toLowerCase() && (this.readFormat = new OpenLayers.Format.GeoJSON()));
    },
    "CLASS_NAME": "OpenLayers.Protocol.WFS.v1_1_0"
}), OpenLayers.Protocol.WFS.v2_0_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {
    "version": "2.0.0",
    "initialize": function(e) {
        OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this, arguments), this.outputFormat && !this.readFormat && ("gml3" == this.outputFormat.toLowerCase() ? this.readFormat = new OpenLayers.Format.GML.v3({
            "featureType": this.featureType,
            "featureNS": this.featureNS,
            "geometryName": this.geometryName
        }) : "json" == this.outputFormat.toLowerCase() && (this.readFormat = new OpenLayers.Format.GeoJSON()));
    },
    "CLASS_NAME": "OpenLayers.Protocol.WFS.v2_0_0"
}), OpenLayers.Renderer.Canvas = OpenLayers.Class(OpenLayers.Renderer, {
    "hitDetection": !0,
    "hitOverflow": 0,
    "canvas": null,
    "features": null,
    "pendingRedraw": !1,
    "cachedSymbolBounds": {},
    "initialize": function(e, t) {
        OpenLayers.Renderer.prototype.initialize.apply(this, arguments), this.root = document.createElement("canvas"), 
        this.container.appendChild(this.root), this.canvas = this.root.getContext("2d"), 
        this._clearRectId = OpenLayers.Util.createUniqueID(), this.features = {}, this.hitDetection && (this.hitCanvas = document.createElement("canvas"), 
        this.hitContext = this.hitCanvas.getContext("2d"));
    },
    "setExtent": function() {
        return OpenLayers.Renderer.prototype.setExtent.apply(this, arguments), !1;
    },
    "eraseGeometry": function(e, t) {
        this.eraseFeatures(this.features[t][0]);
    },
    "supported": function() {
        return OpenLayers.CANVAS_SUPPORTED;
    },
    "setSize": function(e) {
        this.size = e.clone();
        var t = this.root;
        if (t.style.width = e.w + "px", t.style.height = e.h + "px", t.width = e.w, t.height = e.h, 
        this.resolution = null, this.hitDetection) {
            var i = this.hitCanvas;
            i.style.width = e.w + "px", i.style.height = e.h + "px", i.width = e.w, i.height = e.h;
        }
    },
    "drawFeature": function(e, t) {
        var i;
        if (e.geometry) {
            t = this.applyDefaultSymbolizer(t || e.style);
            var n, s = e.geometry.getBounds();
            this.map.baseLayer && this.map.baseLayer.wrapDateLine && (n = this.map.getMaxExtent());
            var r = s && s.intersectsBounds(this.extent, {
                "worldBounds": n
            });
            (i = "none" !== t.display && !!s && r) ? this.features[e.id] = [ e, t ] : delete this.features[e.id], 
            this.pendingRedraw = !0;
        }
        return this.pendingRedraw && !this.locked && (this.redraw(), this.pendingRedraw = !1), 
        i;
    },
    "drawGeometry": function(e, t, i) {
        var n = e.CLASS_NAME;
        if ("OpenLayers.Geometry.Collection" != n && "OpenLayers.Geometry.MultiPoint" != n && "OpenLayers.Geometry.MultiLineString" != n && "OpenLayers.Geometry.MultiPolygon" != n) switch (e.CLASS_NAME) {
          case "OpenLayers.Geometry.Point":
            this.drawPoint(e, t, i);
            break;

          case "OpenLayers.Geometry.LineString":
            this.drawLineString(e, t, i);
            break;

          case "OpenLayers.Geometry.LinearRing":
            this.drawLinearRing(e, t, i);
            break;

          case "OpenLayers.Geometry.Polygon":
            this.drawPolygon(e, t, i);
        } else for (var s = this.map.baseLayer && this.map.baseLayer.wrapDateLine && this.map.getMaxExtent(), r = 0; r < e.components.length; r++) this.calculateFeatureDx(e.components[r].getBounds(), s), 
        this.drawGeometry(e.components[r], t, i);
    },
    "drawExternalGraphic": function(e, t, i) {
        var n = new Image(), s = t.title || t.graphicTitle;
        s && (n.title = s);
        var r = t.graphicWidth || t.graphicHeight, o = t.graphicHeight || t.graphicWidth;
        r = r || 2 * t.pointRadius, o = o || 2 * t.pointRadius;
        var a = void 0 != t.graphicXOffset ? t.graphicXOffset : -.5 * r, l = void 0 != t.graphicYOffset ? t.graphicYOffset : -.5 * o, h = this._clearRectId, c = t.graphicOpacity || t.fillOpacity;
        n.onload = OpenLayers.Function.bind(function() {
            if (this.features[i] && h === this._clearRectId) {
                var t = this.getLocalXY(e), s = t[0], u = t[1];
                if (!isNaN(s) && !isNaN(u)) {
                    var p = s + a | 0, d = u + l | 0, f = this.canvas;
                    f.globalAlpha = c;
                    var m = OpenLayers.Renderer.Canvas.drawImageScaleFactor || (OpenLayers.Renderer.Canvas.drawImageScaleFactor = /android 2.1/.test(navigator.userAgent.toLowerCase()) ? 320 / window.screen.width : 1);
                    f.drawImage(n, p * m, d * m, r * m, o * m), this.hitDetection && (this.setHitContextStyle("fill", i), 
                    this.hitContext.fillRect(p, d, r, o));
                }
            }
        }, this), n.src = t.externalGraphic, n.complete && (n.onload(), n.onload = null);
    },
    "drawNamedSymbol": function(e, t, i) {
        var n, s, r, o, a, l, h, c, u, p = Math.PI / 180, d = OpenLayers.Renderer.symbol[t.graphicName];
        if (!d) throw new Error(t.graphicName + " is not a valid symbol name");
        if (d.length && !(d.length < 2)) {
            var f = this.getLocalXY(e), m = f[0], g = f[1];
            if (!isNaN(m) && !isNaN(g)) {
                if (this.canvas.lineCap = "round", this.canvas.lineJoin = "round", this.hitDetection && (this.hitContext.lineCap = "round", 
                this.hitContext.lineJoin = "round"), t.graphicName in this.cachedSymbolBounds) l = this.cachedSymbolBounds[t.graphicName]; else {
                    for (l = new OpenLayers.Bounds(), a = 0; a < d.length; a += 2) l.extend(new OpenLayers.LonLat(d[a], d[a + 1]));
                    this.cachedSymbolBounds[t.graphicName] = l;
                }
                if (this.canvas.save(), this.hitDetection && this.hitContext.save(), this.canvas.translate(m, g), 
                this.hitDetection && this.hitContext.translate(m, g), c = p * t.rotation, isNaN(c) || (this.canvas.rotate(c), 
                this.hitDetection && this.hitContext.rotate(c)), h = 2 * t.pointRadius / Math.max(l.getWidth(), l.getHeight()), 
                this.canvas.scale(h, h), this.hitDetection && this.hitContext.scale(h, h), r = l.getCenterLonLat().lon, 
                o = l.getCenterLonLat().lat, this.canvas.translate(-r, -o), this.hitDetection && this.hitContext.translate(-r, -o), 
                u = t.strokeWidth, t.strokeWidth = u / h, !1 !== t.fill) {
                    for (this.setCanvasStyle("fill", t), this.canvas.beginPath(), a = 0; a < d.length; a += 2) n = d[a], 
                    s = d[a + 1], 0 == a && this.canvas.moveTo(n, s), this.canvas.lineTo(n, s);
                    if (this.canvas.closePath(), this.canvas.fill(), this.hitDetection) {
                        for (this.setHitContextStyle("fill", i, t), this.hitContext.beginPath(), a = 0; a < d.length; a += 2) n = d[a], 
                        s = d[a + 1], 0 == a && this.canvas.moveTo(n, s), this.hitContext.lineTo(n, s);
                        this.hitContext.closePath(), this.hitContext.fill();
                    }
                }
                if (!1 !== t.stroke) {
                    for (this.setCanvasStyle("stroke", t), this.canvas.beginPath(), a = 0; a < d.length; a += 2) n = d[a], 
                    s = d[a + 1], 0 == a && this.canvas.moveTo(n, s), this.canvas.lineTo(n, s);
                    if (this.canvas.closePath(), this.canvas.stroke(), this.hitDetection) {
                        for (this.setHitContextStyle("stroke", i, t, h), this.hitContext.beginPath(), a = 0; a < d.length; a += 2) n = d[a], 
                        s = d[a + 1], 0 == a && this.hitContext.moveTo(n, s), this.hitContext.lineTo(n, s);
                        this.hitContext.closePath(), this.hitContext.stroke();
                    }
                }
                t.strokeWidth = u, this.canvas.restore(), this.hitDetection && this.hitContext.restore(), 
                this.setCanvasStyle("reset");
            }
        }
    },
    "setCanvasStyle": function(e, t) {
        "fill" === e ? (this.canvas.globalAlpha = t.fillOpacity, this.canvas.fillStyle = t.fillColor) : "stroke" === e ? (this.canvas.globalAlpha = t.strokeOpacity, 
        this.canvas.strokeStyle = t.strokeColor, this.canvas.lineWidth = t.strokeWidth) : (this.canvas.globalAlpha = 0, 
        this.canvas.lineWidth = 1);
    },
    "featureIdToHex": function(e) {
        var t = Number(e.split("_").pop()) + 1;
        t >= 16777216 && (this.hitOverflow = t - 16777215, t = t % 16777216 + 1);
        var i = "000000" + t.toString(16), n = i.length;
        return i = "#" + i.substring(n - 6, n);
    },
    "setHitContextStyle": function(e, t, i, n) {
        var s = this.featureIdToHex(t);
        "fill" == e ? (this.hitContext.globalAlpha = 1, this.hitContext.fillStyle = s) : "stroke" == e ? (this.hitContext.globalAlpha = 1, 
        this.hitContext.strokeStyle = s, void 0 === n ? this.hitContext.lineWidth = i.strokeWidth + 2 : isNaN(n) || (this.hitContext.lineWidth = i.strokeWidth + 2 / n)) : (this.hitContext.globalAlpha = 0, 
        this.hitContext.lineWidth = 1);
    },
    "drawPoint": function(e, t, i) {
        if (!1 !== t.graphic) if (t.externalGraphic) this.drawExternalGraphic(e, t, i); else if (t.graphicName && "circle" != t.graphicName) this.drawNamedSymbol(e, t, i); else {
            var n = this.getLocalXY(e), s = n[0], r = n[1];
            if (!isNaN(s) && !isNaN(r)) {
                var o = 2 * Math.PI, a = t.pointRadius;
                !1 !== t.fill && (this.setCanvasStyle("fill", t), this.canvas.beginPath(), this.canvas.arc(s, r, a, 0, o, !0), 
                this.canvas.fill(), this.hitDetection && (this.setHitContextStyle("fill", i, t), 
                this.hitContext.beginPath(), this.hitContext.arc(s, r, a, 0, o, !0), this.hitContext.fill())), 
                !1 !== t.stroke && (this.setCanvasStyle("stroke", t), this.canvas.beginPath(), this.canvas.arc(s, r, a, 0, o, !0), 
                this.canvas.stroke(), this.hitDetection && (this.setHitContextStyle("stroke", i, t), 
                this.hitContext.beginPath(), this.hitContext.arc(s, r, a, 0, o, !0), this.hitContext.stroke()), 
                this.setCanvasStyle("reset"));
            }
        }
    },
    "drawLineString": function(e, t, i) {
        t = OpenLayers.Util.applyDefaults({
            "fill": !1
        }, t), this.drawLinearRing(e, t, i);
    },
    "drawLinearRing": function(e, t, i) {
        !1 !== t.fill && (this.setCanvasStyle("fill", t), this.renderPath(this.canvas, e, t, i, "fill"), 
        this.hitDetection && (this.setHitContextStyle("fill", i, t), this.renderPath(this.hitContext, e, t, i, "fill"))), 
        !1 !== t.stroke && (this.setCanvasStyle("stroke", t), this.renderPath(this.canvas, e, t, i, "stroke"), 
        this.hitDetection && (this.setHitContextStyle("stroke", i, t), this.renderPath(this.hitContext, e, t, i, "stroke"))), 
        this.setCanvasStyle("reset");
    },
    "renderPath": function(e, t, i, n, s) {
        var r = t.components, o = r.length;
        e.beginPath();
        var a = this.getLocalXY(r[0]), l = a[0], h = a[1];
        if (!isNaN(l) && !isNaN(h)) {
            e.moveTo(a[0], a[1]);
            for (var c = 1; c < o; ++c) {
                var u = this.getLocalXY(r[c]);
                e.lineTo(u[0], u[1]);
            }
            "fill" === s ? e.fill() : e.stroke();
        }
    },
    "drawPolygon": function(e, t, i) {
        var n = e.components, s = n.length;
        this.drawLinearRing(n[0], t, i);
        for (var r = 1; r < s; ++r) this.canvas.globalCompositeOperation = "destination-out", 
        this.hitDetection && (this.hitContext.globalCompositeOperation = "destination-out"), 
        this.drawLinearRing(n[r], OpenLayers.Util.applyDefaults({
            "stroke": !1,
            "fillOpacity": 1
        }, t), i), this.canvas.globalCompositeOperation = "source-over", this.hitDetection && (this.hitContext.globalCompositeOperation = "source-over"), 
        this.drawLinearRing(n[r], OpenLayers.Util.applyDefaults({
            "fill": !1
        }, t), i);
    },
    "drawText": function(e, t) {
        var i = this.getLocalXY(e);
        this.setCanvasStyle("reset"), this.canvas.fillStyle = t.fontColor, this.canvas.globalAlpha = t.fontOpacity || 1;
        var n = [ t.fontStyle ? t.fontStyle : "normal", "normal", t.fontWeight ? t.fontWeight : "normal", t.fontSize ? t.fontSize : "1em", t.fontFamily ? t.fontFamily : "sans-serif" ].join(" "), s = t.label.split("\n"), r = s.length;
        if (this.canvas.fillText) {
            this.canvas.font = n, this.canvas.textAlign = OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[0]] || "center", 
            this.canvas.textBaseline = OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[1]] || "middle", 
            null == (a = OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]]) && (a = -.5);
            l = this.canvas.measureText("Mg").height || this.canvas.measureText("xx").width;
            i[1] += l * a * (r - 1);
            for (h = 0; h < r; h++) t.labelOutlineWidth && (this.canvas.save(), this.canvas.globalAlpha = t.labelOutlineOpacity || t.fontOpacity || 1, 
            this.canvas.strokeStyle = t.labelOutlineColor, this.canvas.lineWidth = t.labelOutlineWidth, 
            this.canvas.strokeText(s[h], i[0], i[1] + l * h + 1), this.canvas.restore()), this.canvas.fillText(s[h], i[0], i[1] + l * h);
        } else if (this.canvas.mozDrawText) {
            this.canvas.mozTextStyle = n;
            var o = OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[0]];
            null == o && (o = -.5);
            var a = OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];
            null == a && (a = -.5);
            var l = this.canvas.mozMeasureText("xx");
            i[1] += l * (1 + a * r);
            for (var h = 0; h < r; h++) {
                var c = i[0] + o * this.canvas.mozMeasureText(s[h]), u = i[1] + h * l;
                this.canvas.translate(c, u), this.canvas.mozDrawText(s[h]), this.canvas.translate(-c, -u);
            }
        }
        this.setCanvasStyle("reset");
    },
    "getLocalXY": function(e) {
        var t = this.getResolution(), i = this.extent;
        return [ (e.x - this.featureDx) / t + -i.left / t, i.top / t - e.y / t ];
    },
    "clear": function() {
        this.clearCanvas(), this.features = {};
    },
    "clearCanvas": function() {
        var e = this.root.height, t = this.root.width;
        this.canvas.clearRect(0, 0, t, e), this._clearRectId = OpenLayers.Util.createUniqueID(), 
        this.hitDetection && this.hitContext.clearRect(0, 0, t, e);
    },
    "getFeatureIdFromEvent": function(e) {
        var t, i;
        if (this.hitDetection && "none" !== this.root.style.display && !this.map.dragging) {
            var n = e.xy, s = 0 | n.x, r = 0 | n.y, o = this.hitContext.getImageData(s, r, 1, 1).data;
            if (255 === o[3]) {
                var a = o[2] + 256 * (o[1] + 256 * o[0]);
                if (a) {
                    t = "OpenLayers_Feature_Vector_" + (a - 1 + this.hitOverflow);
                    try {
                        i = this.features[t][0];
                    } catch (e) {}
                }
            }
        }
        return i;
    },
    "eraseFeatures": function(e) {
        OpenLayers.Util.isArray(e) || (e = [ e ]);
        for (var t = 0; t < e.length; ++t) delete this.features[e[t].id];
        this.redraw();
    },
    "redraw": function() {
        if (!this.locked) {
            this.clearCanvas();
            var e, t, i, n = [], s = this.map.baseLayer && this.map.baseLayer.wrapDateLine && this.map.getMaxExtent();
            for (var r in this.features) this.features.hasOwnProperty(r) && (t = (e = this.features[r][0]).geometry, 
            this.calculateFeatureDx(t.getBounds(), s), i = this.features[r][1], this.drawGeometry(t, i, e.id), 
            i.label && n.push([ e, i ]));
            for (var o, a = 0, l = n.length; a < l; ++a) o = n[a], this.drawText(o[0].geometry.getCentroid(), o[1]);
        }
    },
    "CLASS_NAME": "OpenLayers.Renderer.Canvas"
}), OpenLayers.Renderer.Canvas.LABEL_ALIGN = {
    "l": "left",
    "r": "right",
    "t": "top",
    "b": "bottom"
}, OpenLayers.Renderer.Canvas.LABEL_FACTOR = {
    "l": 0,
    "r": -1,
    "t": 0,
    "b": -1
}, OpenLayers.Renderer.Canvas.drawImageScaleFactor = null, OpenLayers.ElementsIndexer = OpenLayers.Class({
    "maxZIndex": null,
    "order": null,
    "indices": null,
    "compare": null,
    "initialize": function(e) {
        this.compare = e ? OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER : OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER, 
        this.clear();
    },
    "insert": function(e) {
        this.exists(e) && this.remove(e);
        var t = e.id;
        this.determineZIndex(e);
        for (var i, n = -1, s = this.order.length; s - n > 1; ) i = parseInt((n + s) / 2), 
        this.compare(this, e, OpenLayers.Util.getElement(this.order[i])) > 0 ? n = i : s = i;
        return this.order.splice(s, 0, t), this.indices[t] = this.getZIndex(e), this.getNextElement(s);
    },
    "remove": function(e) {
        var t = e.id, i = OpenLayers.Util.indexOf(this.order, t);
        if (i >= 0) if (this.order.splice(i, 1), delete this.indices[t], this.order.length > 0) {
            var n = this.order[this.order.length - 1];
            this.maxZIndex = this.indices[n];
        } else this.maxZIndex = 0;
    },
    "clear": function() {
        this.order = [], this.indices = {}, this.maxZIndex = 0;
    },
    "exists": function(e) {
        return null != this.indices[e.id];
    },
    "getZIndex": function(e) {
        return e._style.graphicZIndex;
    },
    "determineZIndex": function(e) {
        var t = e._style.graphicZIndex;
        null == t ? (t = this.maxZIndex, e._style.graphicZIndex = t) : t > this.maxZIndex && (this.maxZIndex = t);
    },
    "getNextElement": function(e) {
        for (var t = e + 1, i = void 0; t < this.order.length && void 0 == i; t++) i = OpenLayers.Util.getElement(this.order[t]);
        return i || null;
    },
    "CLASS_NAME": "OpenLayers.ElementsIndexer"
}), OpenLayers.ElementsIndexer.IndexingMethods = {
    "Z_ORDER": function(e, t, i) {
        var n = e.getZIndex(t), s = 0;
        return i && (s = n - e.getZIndex(i)), s;
    },
    "Z_ORDER_DRAWING_ORDER": function(e, t, i) {
        var n = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e, t, i);
        return i && 0 == n && (n = 1), n;
    },
    "Z_ORDER_Y_ORDER": function(e, t, i) {
        var n = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e, t, i);
        if (i && 0 === n) {
            var s = i._boundsBottom - t._boundsBottom;
            n = 0 === s ? 1 : s;
        }
        return n;
    }
}, OpenLayers.Renderer.Elements = OpenLayers.Class(OpenLayers.Renderer, {
    "rendererRoot": null,
    "root": null,
    "vectorRoot": null,
    "textRoot": null,
    "xmlns": null,
    "xOffset": 0,
    "indexer": null,
    "BACKGROUND_ID_SUFFIX": "_background",
    "LABEL_ID_SUFFIX": "_label",
    "LABEL_OUTLINE_SUFFIX": "_outline",
    "initialize": function(e, t) {
        OpenLayers.Renderer.prototype.initialize.apply(this, arguments), this.rendererRoot = this.createRenderRoot(), 
        this.root = this.createRoot("_root"), this.vectorRoot = this.createRoot("_vroot"), 
        this.textRoot = this.createRoot("_troot"), this.root.appendChild(this.vectorRoot), 
        this.root.appendChild(this.textRoot), this.rendererRoot.appendChild(this.root), 
        this.container.appendChild(this.rendererRoot), t && (t.zIndexing || t.yOrdering) && (this.indexer = new OpenLayers.ElementsIndexer(t.yOrdering));
    },
    "destroy": function() {
        this.clear(), this.rendererRoot = null, this.root = null, this.xmlns = null, OpenLayers.Renderer.prototype.destroy.apply(this, arguments);
    },
    "clear": function() {
        var e, t = this.vectorRoot;
        if (t) for (;e = t.firstChild; ) t.removeChild(e);
        if (t = this.textRoot) for (;e = t.firstChild; ) t.removeChild(e);
        this.indexer && this.indexer.clear();
    },
    "setExtent": function(e, t) {
        var i = OpenLayers.Renderer.prototype.setExtent.apply(this, arguments), n = this.getResolution();
        if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {
            var s, r = e.getWidth() / this.map.getExtent().getWidth(), e = e.scale(1 / r), o = this.map.getMaxExtent();
            o.right > e.left && o.right < e.right ? s = !0 : o.left > e.left && o.left < e.right && (s = !1), 
            (s !== this.rightOfDateLine || t) && (i = !1, this.xOffset = !0 === s ? o.getWidth() / n : 0), 
            this.rightOfDateLine = s;
        }
        return i;
    },
    "getNodeType": function(e, t) {},
    "drawGeometry": function(e, t, i) {
        var n = e.CLASS_NAME, s = !0;
        if ("OpenLayers.Geometry.Collection" == n || "OpenLayers.Geometry.MultiPoint" == n || "OpenLayers.Geometry.MultiLineString" == n || "OpenLayers.Geometry.MultiPolygon" == n) {
            for (var r = 0, o = e.components.length; r < o; r++) s = this.drawGeometry(e.components[r], t, i) && s;
            return s;
        }
        s = !1;
        var a = !1;
        if ("none" != t.display && (t.backgroundGraphic ? this.redrawBackgroundNode(e.id, e, t, i) : a = !0, 
        s = this.redrawNode(e.id, e, t, i)), 0 == s && (l = document.getElementById(e.id)) && (l._style.backgroundGraphic && (a = !0), 
        l.parentNode.removeChild(l)), a) {
            var l = document.getElementById(e.id + this.BACKGROUND_ID_SUFFIX);
            l && l.parentNode.removeChild(l);
        }
        return s;
    },
    "redrawNode": function(e, t, i, n) {
        i = this.applyDefaultSymbolizer(i);
        var s = this.nodeFactory(e, this.getNodeType(t, i));
        s._featureId = n, s._boundsBottom = t.getBounds().bottom, s._geometryClass = t.CLASS_NAME, 
        s._style = i;
        var r = this.drawGeometryNode(s, t, i);
        if (!1 === r) return !1;
        if (s = r.node, this.indexer) {
            var o = this.indexer.insert(s);
            o ? this.vectorRoot.insertBefore(s, o) : this.vectorRoot.appendChild(s);
        } else s.parentNode !== this.vectorRoot && this.vectorRoot.appendChild(s);
        return this.postDraw(s), r.complete;
    },
    "redrawBackgroundNode": function(e, t, i, n) {
        var s = OpenLayers.Util.extend({}, i);
        return s.externalGraphic = s.backgroundGraphic, s.graphicXOffset = s.backgroundXOffset, 
        s.graphicYOffset = s.backgroundYOffset, s.graphicZIndex = s.backgroundGraphicZIndex, 
        s.graphicWidth = s.backgroundWidth || s.graphicWidth, s.graphicHeight = s.backgroundHeight || s.graphicHeight, 
        s.backgroundGraphic = null, s.backgroundXOffset = null, s.backgroundYOffset = null, 
        s.backgroundGraphicZIndex = null, this.redrawNode(e + this.BACKGROUND_ID_SUFFIX, t, s, null);
    },
    "drawGeometryNode": function(e, t, i) {
        var n, s = {
            "isFilled": void 0 === (i = i || e._style).fill || i.fill,
            "isStroked": void 0 === i.stroke ? !!i.strokeWidth : i.stroke
        };
        switch (t.CLASS_NAME) {
          case "OpenLayers.Geometry.Point":
            !1 === i.graphic && (s.isFilled = !1, s.isStroked = !1), n = this.drawPoint(e, t);
            break;

          case "OpenLayers.Geometry.LineString":
            s.isFilled = !1, n = this.drawLineString(e, t);
            break;

          case "OpenLayers.Geometry.LinearRing":
            n = this.drawLinearRing(e, t);
            break;

          case "OpenLayers.Geometry.Polygon":
            n = this.drawPolygon(e, t);
            break;

          case "OpenLayers.Geometry.Rectangle":
            n = this.drawRectangle(e, t);
        }
        return e._options = s, 0 != n && {
            "node": this.setStyle(e, i, s, t),
            "complete": n
        };
    },
    "postDraw": function(e) {},
    "drawPoint": function(e, t) {},
    "drawLineString": function(e, t) {},
    "drawLinearRing": function(e, t) {},
    "drawPolygon": function(e, t) {},
    "drawRectangle": function(e, t) {},
    "drawCircle": function(e, t) {},
    "removeText": function(e) {
        var t = document.getElementById(e + this.LABEL_ID_SUFFIX);
        t && this.textRoot.removeChild(t);
        var i = document.getElementById(e + this.LABEL_OUTLINE_SUFFIX);
        i && this.textRoot.removeChild(i);
    },
    "getFeatureIdFromEvent": function(e) {
        var t = e.target, i = t && t.correspondingUseElement;
        return (i || (t || e.srcElement))._featureId;
    },
    "eraseGeometry": function(e, t) {
        if ("OpenLayers.Geometry.MultiPoint" == e.CLASS_NAME || "OpenLayers.Geometry.MultiLineString" == e.CLASS_NAME || "OpenLayers.Geometry.MultiPolygon" == e.CLASS_NAME || "OpenLayers.Geometry.Collection" == e.CLASS_NAME) for (var i = 0, n = e.components.length; i < n; i++) this.eraseGeometry(e.components[i], t); else {
            var s = OpenLayers.Util.getElement(e.id);
            if (s && s.parentNode && (s.geometry && (s.geometry.destroy(), s.geometry = null), 
            s.parentNode.removeChild(s), this.indexer && this.indexer.remove(s), s._style.backgroundGraphic)) {
                var r = e.id + this.BACKGROUND_ID_SUFFIX, o = OpenLayers.Util.getElement(r);
                o && o.parentNode && o.parentNode.removeChild(o);
            }
        }
    },
    "nodeFactory": function(e, t) {
        var i = OpenLayers.Util.getElement(e);
        return i ? this.nodeTypeCompare(i, t) || (i.parentNode.removeChild(i), i = this.nodeFactory(e, t)) : i = this.createNode(t, e), 
        i;
    },
    "nodeTypeCompare": function(e, t) {},
    "createNode": function(e, t) {},
    "moveRoot": function(e) {
        var t = this.root;
        e.root.parentNode == this.rendererRoot && (t = e.root), t.parentNode.removeChild(t), 
        e.rendererRoot.appendChild(t);
    },
    "getRenderLayerId": function() {
        return this.root.parentNode.parentNode.id;
    },
    "isComplexSymbol": function(e) {
        return "circle" != e && !!e;
    },
    "CLASS_NAME": "OpenLayers.Renderer.Elements"
}), OpenLayers.Renderer.SVG = OpenLayers.Class(OpenLayers.Renderer.Elements, {
    "xmlns": "http://www.w3.org/2000/svg",
    "xlinkns": "http://www.w3.org/1999/xlink",
    "MAX_PIXEL": 15e3,
    "translationParameters": null,
    "symbolMetrics": null,
    "initialize": function(e) {
        this.supported() && (OpenLayers.Renderer.Elements.prototype.initialize.apply(this, arguments), 
        this.translationParameters = {
            "x": 0,
            "y": 0
        }, this.symbolMetrics = {});
    },
    "supported": function() {
        var e = "http://www.w3.org/TR/SVG11/feature#";
        return document.implementation && (document.implementation.hasFeature("org.w3c.svg", "1.0") || document.implementation.hasFeature(e + "SVG", "1.1") || document.implementation.hasFeature(e + "BasicStructure", "1.1"));
    },
    "inValidRange": function(e, t, i) {
        var n = e + (i ? 0 : this.translationParameters.x), s = t + (i ? 0 : this.translationParameters.y);
        return n >= -this.MAX_PIXEL && n <= this.MAX_PIXEL && s >= -this.MAX_PIXEL && s <= this.MAX_PIXEL;
    },
    "setExtent": function(e, t) {
        var i = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments), n = this.getResolution(), s = -e.left / n, r = e.top / n;
        if (t) {
            this.left = s, this.top = r;
            var o = "0 0 " + this.size.w + " " + this.size.h;
            return this.rendererRoot.setAttributeNS(null, "viewBox", o), this.translate(this.xOffset, 0), 
            !0;
        }
        var a = this.translate(s - this.left + this.xOffset, r - this.top);
        return a || this.setExtent(e, !0), i && a;
    },
    "translate": function(e, t) {
        if (this.inValidRange(e, t, !0)) {
            var i = "";
            return (e || t) && (i = "translate(" + e + "," + t + ")"), this.root.setAttributeNS(null, "transform", i), 
            this.translationParameters = {
                "x": e,
                "y": t
            }, !0;
        }
        return !1;
    },
    "setSize": function(e) {
        OpenLayers.Renderer.prototype.setSize.apply(this, arguments), this.rendererRoot.setAttributeNS(null, "width", this.size.w), 
        this.rendererRoot.setAttributeNS(null, "height", this.size.h);
    },
    "getNodeType": function(e, t) {
        var i = null;
        switch (e.CLASS_NAME) {
          case "OpenLayers.Geometry.Point":
            i = t.externalGraphic ? "image" : this.isComplexSymbol(t.graphicName) ? "svg" : "circle";
            break;

          case "OpenLayers.Geometry.Rectangle":
            i = "rect";
            break;

          case "OpenLayers.Geometry.LineString":
            i = "polyline";
            break;

          case "OpenLayers.Geometry.LinearRing":
            i = "polygon";
            break;

          case "OpenLayers.Geometry.Polygon":
          case "OpenLayers.Geometry.Curve":
            i = "path";
        }
        return i;
    },
    "setStyle": function(e, t, i) {
        t = t || e._style, i = i || e._options;
        var n = t.title || t.graphicTitle;
        if (n) {
            e.setAttributeNS(null, "title", n);
            var s = e.getElementsByTagName("title");
            if (s.length > 0) s[0].firstChild.textContent = n; else {
                var r = this.nodeFactory(null, "title");
                r.textContent = n, e.appendChild(r);
            }
        }
        var o, a = parseFloat(e.getAttributeNS(null, "r")), l = 1;
        if ("OpenLayers.Geometry.Point" == e._geometryClass && a) {
            if (e.style.visibility = "", !1 === t.graphic) e.style.visibility = "hidden"; else if (t.externalGraphic) {
                o = this.getPosition(e), t.graphicWidth && t.graphicHeight && e.setAttributeNS(null, "preserveAspectRatio", "none");
                var h = t.graphicWidth || t.graphicHeight, c = t.graphicHeight || t.graphicWidth;
                h = h || 2 * t.pointRadius, c = c || 2 * t.pointRadius;
                var u = void 0 != t.graphicXOffset ? t.graphicXOffset : -.5 * h, p = void 0 != t.graphicYOffset ? t.graphicYOffset : -.5 * c, d = t.graphicOpacity || t.fillOpacity;
                e.setAttributeNS(null, "x", (o.x + u).toFixed()), e.setAttributeNS(null, "y", (o.y + p).toFixed()), 
                e.setAttributeNS(null, "width", h), e.setAttributeNS(null, "height", c), e.setAttributeNS(this.xlinkns, "xlink:href", t.externalGraphic), 
                e.setAttributeNS(null, "style", "opacity: " + d), e.onclick = OpenLayers.Event.preventDefault;
            } else if (this.isComplexSymbol(t.graphicName)) {
                var f = 3 * t.pointRadius, m = 2 * f, g = this.importSymbol(t.graphicName);
                o = this.getPosition(e), l = 3 * this.symbolMetrics[g.id][0] / m;
                var y = e.parentNode, v = e.nextSibling;
                y && y.removeChild(e), e.firstChild && e.removeChild(e.firstChild), e.appendChild(g.firstChild.cloneNode(!0)), 
                e.setAttributeNS(null, "viewBox", g.getAttributeNS(null, "viewBox")), e.setAttributeNS(null, "width", m), 
                e.setAttributeNS(null, "height", m), e.setAttributeNS(null, "x", o.x - f), e.setAttributeNS(null, "y", o.y - f), 
                v ? y.insertBefore(e, v) : y && y.appendChild(e);
            } else e.setAttributeNS(null, "r", t.pointRadius);
            var L = t.rotation;
            if ((void 0 !== L || void 0 !== e._rotation) && o) if (e._rotation = L, L |= 0, 
            "svg" !== e.nodeName) e.setAttributeNS(null, "transform", "rotate(" + L + " " + o.x + " " + o.y + ")"); else {
                var w = this.symbolMetrics[g.id];
                e.firstChild.setAttributeNS(null, "transform", "rotate(" + L + " " + w[1] + " " + w[2] + ")");
            }
        }
        return i.isFilled ? (e.setAttributeNS(null, "fill", t.fillColor), e.setAttributeNS(null, "fill-opacity", t.fillOpacity)) : e.setAttributeNS(null, "fill", "none"), 
        i.isStroked ? (e.setAttributeNS(null, "stroke", t.strokeColor), e.setAttributeNS(null, "stroke-opacity", t.strokeOpacity), 
        e.setAttributeNS(null, "stroke-width", t.strokeWidth * l), e.setAttributeNS(null, "stroke-linecap", t.strokeLinecap || "round"), 
        e.setAttributeNS(null, "stroke-linejoin", "round"), t.strokeDashstyle && e.setAttributeNS(null, "stroke-dasharray", this.dashStyle(t, l))) : e.setAttributeNS(null, "stroke", "none"), 
        t.pointerEvents && e.setAttributeNS(null, "pointer-events", t.pointerEvents), null != t.cursor && e.setAttributeNS(null, "cursor", t.cursor), 
        e;
    },
    "dashStyle": function(e, t) {
        var i = e.strokeWidth * t, n = e.strokeDashstyle;
        switch (n) {
          case "solid":
            return "none";

          case "dot":
            return [ 1, 4 * i ].join();

          case "dash":
            return [ 4 * i, 4 * i ].join();

          case "dashdot":
            return [ 4 * i, 4 * i, 1, 4 * i ].join();

          case "longdash":
            return [ 8 * i, 4 * i ].join();

          case "longdashdot":
            return [ 8 * i, 4 * i, 1, 4 * i ].join();

          default:
            return OpenLayers.String.trim(n).replace(/\s+/g, ",");
        }
    },
    "createNode": function(e, t) {
        var i = document.createElementNS(this.xmlns, e);
        return t && i.setAttributeNS(null, "id", t), i;
    },
    "nodeTypeCompare": function(e, t) {
        return t == e.nodeName;
    },
    "createRenderRoot": function() {
        var e = this.nodeFactory(this.container.id + "_svgRoot", "svg");
        return e.style.display = "block", e;
    },
    "createRoot": function(e) {
        return this.nodeFactory(this.container.id + e, "g");
    },
    "createDefs": function() {
        var e = this.nodeFactory(this.container.id + "_defs", "defs");
        return this.rendererRoot.appendChild(e), e;
    },
    "drawPoint": function(e, t) {
        return this.drawCircle(e, t, 1);
    },
    "drawCircle": function(e, t, i) {
        var n = this.getResolution(), s = (t.x - this.featureDx) / n + this.left, r = this.top - t.y / n;
        return !!this.inValidRange(s, r) && (e.setAttributeNS(null, "cx", s), e.setAttributeNS(null, "cy", r), 
        e.setAttributeNS(null, "r", i), e);
    },
    "drawLineString": function(e, t) {
        var i = this.getComponentsString(t.components);
        return !!i.path && (e.setAttributeNS(null, "points", i.path), i.complete ? e : null);
    },
    "drawLinearRing": function(e, t) {
        var i = this.getComponentsString(t.components);
        return !!i.path && (e.setAttributeNS(null, "points", i.path), i.complete ? e : null);
    },
    "drawPolygon": function(e, t) {
        for (var i, n, s = "", r = !0, o = !0, a = 0, l = t.components.length; a < l; a++) s += " M", 
        (n = (i = this.getComponentsString(t.components[a].components, " ")).path) ? (s += " " + n, 
        o = i.complete && o) : r = !1;
        return s += " z", !!r && (e.setAttributeNS(null, "d", s), e.setAttributeNS(null, "fill-rule", "evenodd"), 
        o ? e : null);
    },
    "drawRectangle": function(e, t) {
        var i = this.getResolution(), n = (t.x - this.featureDx) / i + this.left, s = this.top - t.y / i;
        return !!this.inValidRange(n, s) && (e.setAttributeNS(null, "x", n), e.setAttributeNS(null, "y", s), 
        e.setAttributeNS(null, "width", t.width / i), e.setAttributeNS(null, "height", t.height / i), 
        e);
    },
    "drawText": function(e, t, i) {
        var n = !!t.labelOutlineWidth;
        if (n) {
            var s = OpenLayers.Util.extend({}, t);
            s.fontColor = s.labelOutlineColor, s.fontStrokeColor = s.labelOutlineColor, s.fontStrokeWidth = t.labelOutlineWidth, 
            t.labelOutlineOpacity && (s.fontOpacity = t.labelOutlineOpacity), delete s.labelOutlineWidth, 
            this.drawText(e, s, i);
        }
        var r = this.getResolution(), o = (i.x - this.featureDx) / r + this.left, a = i.y / r - this.top, l = n ? this.LABEL_OUTLINE_SUFFIX : this.LABEL_ID_SUFFIX, h = this.nodeFactory(e + l, "text");
        h.setAttributeNS(null, "x", o), h.setAttributeNS(null, "y", -a), t.fontColor && h.setAttributeNS(null, "fill", t.fontColor), 
        t.fontStrokeColor && h.setAttributeNS(null, "stroke", t.fontStrokeColor), t.fontStrokeWidth && h.setAttributeNS(null, "stroke-width", t.fontStrokeWidth), 
        t.fontOpacity && h.setAttributeNS(null, "opacity", t.fontOpacity), t.fontFamily && h.setAttributeNS(null, "font-family", t.fontFamily), 
        t.fontSize && h.setAttributeNS(null, "font-size", t.fontSize), t.fontWeight && h.setAttributeNS(null, "font-weight", t.fontWeight), 
        t.fontStyle && h.setAttributeNS(null, "font-style", t.fontStyle), !0 === t.labelSelect ? (h.setAttributeNS(null, "pointer-events", "visible"), 
        h._featureId = e) : h.setAttributeNS(null, "pointer-events", "none");
        var c = t.labelAlign || OpenLayers.Renderer.defaultSymbolizer.labelAlign;
        h.setAttributeNS(null, "text-anchor", OpenLayers.Renderer.SVG.LABEL_ALIGN[c[0]] || "middle"), 
        !0 === OpenLayers.IS_GECKO && h.setAttributeNS(null, "dominant-baseline", OpenLayers.Renderer.SVG.LABEL_ALIGN[c[1]] || "central");
        for (var u = t.label.split("\n"), p = u.length; h.childNodes.length > p; ) h.removeChild(h.lastChild);
        for (var d = 0; d < p; d++) {
            var f = this.nodeFactory(e + l + "_tspan_" + d, "tspan");
            if (!0 === t.labelSelect && (f._featureId = e, f._geometry = i, f._geometryClass = i.CLASS_NAME), 
            !1 === OpenLayers.IS_GECKO && f.setAttributeNS(null, "baseline-shift", OpenLayers.Renderer.SVG.LABEL_VSHIFT[c[1]] || "-35%"), 
            f.setAttribute("x", o), 0 == d) {
                var m = OpenLayers.Renderer.SVG.LABEL_VFACTOR[c[1]];
                null == m && (m = -.5), f.setAttribute("dy", m * (p - 1) + "em");
            } else f.setAttribute("dy", "1em");
            f.textContent = "" === u[d] ? " " : u[d], f.parentNode || h.appendChild(f);
        }
        h.parentNode || this.textRoot.appendChild(h);
    },
    "getComponentsString": function(e, t) {
        for (var i, n, s = [], r = !0, o = e.length, a = [], l = 0; l < o; l++) n = e[l], 
        s.push(n), (i = this.getShortString(n)) ? a.push(i) : (l > 0 && this.getShortString(e[l - 1]) && a.push(this.clipLine(e[l], e[l - 1])), 
        l < o - 1 && this.getShortString(e[l + 1]) && a.push(this.clipLine(e[l], e[l + 1])), 
        r = !1);
        return {
            "path": a.join(t || ","),
            "complete": r
        };
    },
    "clipLine": function(e, t) {
        if (t.equals(e)) return "";
        var i, n = this.getResolution(), s = this.MAX_PIXEL - this.translationParameters.x, r = this.MAX_PIXEL - this.translationParameters.y, o = (t.x - this.featureDx) / n + this.left, a = this.top - t.y / n, l = (e.x - this.featureDx) / n + this.left, h = this.top - e.y / n;
        return (l < -s || l > s) && (i = (h - a) / (l - o), h = a + ((l = l < 0 ? -s : s) - o) * i), 
        (h < -r || h > r) && (i = (l - o) / (h - a), l = o + ((h = h < 0 ? -r : r) - a) * i), 
        l + "," + h;
    },
    "getShortString": function(e) {
        var t = this.getResolution(), i = (e.x - this.featureDx) / t + this.left, n = this.top - e.y / t;
        return !!this.inValidRange(i, n) && i + "," + n;
    },
    "getPosition": function(e) {
        return {
            "x": parseFloat(e.getAttributeNS(null, "cx")),
            "y": parseFloat(e.getAttributeNS(null, "cy"))
        };
    },
    "importSymbol": function(e) {
        this.defs || (this.defs = this.createDefs());
        var t = this.container.id + "-" + e, i = document.getElementById(t);
        if (null != i) return i;
        var n = OpenLayers.Renderer.symbol[e];
        if (!n) throw new Error(e + " is not a valid symbol name");
        var s = this.nodeFactory(t, "symbol"), r = this.nodeFactory(null, "polygon");
        s.appendChild(r);
        for (var o, a, l = new OpenLayers.Bounds(Number.MAX_VALUE, Number.MAX_VALUE, 0, 0), h = [], c = 0; c < n.length; c += 2) o = n[c], 
        a = n[c + 1], l.left = Math.min(l.left, o), l.bottom = Math.min(l.bottom, a), l.right = Math.max(l.right, o), 
        l.top = Math.max(l.top, a), h.push(o, ",", a);
        r.setAttributeNS(null, "points", h.join(" "));
        var u = l.getWidth(), p = l.getHeight(), d = [ l.left - u, l.bottom - p, 3 * u, 3 * p ];
        return s.setAttributeNS(null, "viewBox", d.join(" ")), this.symbolMetrics[t] = [ Math.max(u, p), l.getCenterLonLat().lon, l.getCenterLonLat().lat ], 
        this.defs.appendChild(s), s;
    },
    "getFeatureIdFromEvent": function(e) {
        var t = OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this, arguments);
        if (!t) {
            var i = e.target;
            t = i.parentNode && i != this.rendererRoot ? i.parentNode._featureId : void 0;
        }
        return t;
    },
    "CLASS_NAME": "OpenLayers.Renderer.SVG"
}), OpenLayers.Renderer.SVG.LABEL_ALIGN = {
    "l": "start",
    "r": "end",
    "b": "bottom",
    "t": "hanging"
}, OpenLayers.Renderer.SVG.LABEL_VSHIFT = {
    "t": "-70%",
    "b": "0"
}, OpenLayers.Renderer.SVG.LABEL_VFACTOR = {
    "t": 0,
    "b": -1
}, OpenLayers.Renderer.SVG.preventDefault = function(e) {
    OpenLayers.Event.preventDefault(e);
}, OpenLayers.Renderer.VML = OpenLayers.Class(OpenLayers.Renderer.Elements, {
    "xmlns": "urn:schemas-microsoft-com:vml",
    "symbolCache": {},
    "offset": null,
    "initialize": function(e) {
        if (this.supported()) {
            if (!document.namespaces.olv) {
                document.namespaces.add("olv", this.xmlns);
                for (var t = document.createStyleSheet(), i = [ "shape", "rect", "oval", "fill", "stroke", "imagedata", "group", "textbox" ], n = 0, s = i.length; n < s; n++) t.addRule("olv\\:" + i[n], "behavior: url(#default#VML); position: absolute; display: inline-block;");
            }
            OpenLayers.Renderer.Elements.prototype.initialize.apply(this, arguments);
        }
    },
    "supported": function() {
        return !!document.namespaces;
    },
    "setExtent": function(e, t) {
        var i = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments), n = this.getResolution(), s = e.left / n | 0, r = e.top / n - this.size.h | 0;
        t || !this.offset ? (this.offset = {
            "x": s,
            "y": r
        }, s = 0, r = 0) : (s -= this.offset.x, r -= this.offset.y);
        var o = s - this.xOffset + " " + r;
        this.root.coordorigin = o;
        for (var a, l = [ this.root, this.vectorRoot, this.textRoot ], h = 0, c = l.length; h < c; ++h) {
            a = l[h];
            var u = this.size.w + " " + this.size.h;
            a.coordsize = u;
        }
        return this.root.style.flip = "y", i;
    },
    "setSize": function(e) {
        OpenLayers.Renderer.prototype.setSize.apply(this, arguments);
        for (var t, i = [ this.rendererRoot, this.root, this.vectorRoot, this.textRoot ], n = this.size.w + "px", s = this.size.h + "px", r = 0, o = i.length; r < o; ++r) (t = i[r]).style.width = n, 
        t.style.height = s;
    },
    "getNodeType": function(e, t) {
        var i = null;
        switch (e.CLASS_NAME) {
          case "OpenLayers.Geometry.Point":
            i = t.externalGraphic ? "olv:rect" : this.isComplexSymbol(t.graphicName) ? "olv:shape" : "olv:oval";
            break;

          case "OpenLayers.Geometry.Rectangle":
            i = "olv:rect";
            break;

          case "OpenLayers.Geometry.LineString":
          case "OpenLayers.Geometry.LinearRing":
          case "OpenLayers.Geometry.Polygon":
          case "OpenLayers.Geometry.Curve":
            i = "olv:shape";
        }
        return i;
    },
    "setStyle": function(e, t, i, n) {
        t = t || e._style, i = i || e._options;
        var s = t.fillColor, r = t.title || t.graphicTitle;
        if (r && (e.title = r), "OpenLayers.Geometry.Point" === e._geometryClass) if (t.externalGraphic) {
            i.isFilled = !0;
            var o = t.graphicWidth || t.graphicHeight, a = t.graphicHeight || t.graphicWidth;
            o = o || 2 * t.pointRadius, a = a || 2 * t.pointRadius;
            var l = this.getResolution(), h = void 0 != t.graphicXOffset ? t.graphicXOffset : -.5 * o, c = void 0 != t.graphicYOffset ? t.graphicYOffset : -.5 * a;
            e.style.left = ((n.x - this.featureDx) / l - this.offset.x + h | 0) + "px", e.style.top = (n.y / l - this.offset.y - (c + a) | 0) + "px", 
            e.style.width = o + "px", e.style.height = a + "px", e.style.flip = "y", s = "none", 
            i.isStroked = !1;
        } else if (this.isComplexSymbol(t.graphicName)) {
            var u = this.importSymbol(t.graphicName);
            e.path = u.path, e.coordorigin = u.left + "," + u.bottom;
            var p = u.size;
            e.coordsize = p + "," + p, this.drawCircle(e, n, t.pointRadius), e.style.flip = "y";
        } else this.drawCircle(e, n, t.pointRadius);
        i.isFilled ? e.fillcolor = s : e.filled = "false";
        var d = e.getElementsByTagName("fill"), f = 0 == d.length ? null : d[0];
        i.isFilled ? (f || (f = this.createNode("olv:fill", e.id + "_fill")), f.opacity = t.fillOpacity, 
        "OpenLayers.Geometry.Point" === e._geometryClass && t.externalGraphic && (t.graphicOpacity && (f.opacity = t.graphicOpacity), 
        f.src = t.externalGraphic, f.type = "frame", t.graphicWidth && t.graphicHeight || (f.aspect = "atmost")), 
        f.parentNode != e && e.appendChild(f)) : f && e.removeChild(f);
        var m = t.rotation;
        void 0 === m && void 0 === e._rotation || (e._rotation = m, t.externalGraphic ? (this.graphicRotate(e, h, c, t), 
        f.opacity = 0) : "OpenLayers.Geometry.Point" === e._geometryClass && (e.style.rotation = m || 0));
        var g = e.getElementsByTagName("stroke"), y = 0 == g.length ? null : g[0];
        return i.isStroked ? (y || (y = this.createNode("olv:stroke", e.id + "_stroke"), 
        e.appendChild(y)), y.on = !0, y.color = t.strokeColor, y.weight = t.strokeWidth + "px", 
        y.opacity = t.strokeOpacity, y.endcap = "butt" == t.strokeLinecap ? "flat" : t.strokeLinecap || "round", 
        t.strokeDashstyle && (y.dashstyle = this.dashStyle(t))) : (e.stroked = !1, y && (y.on = !1)), 
        "inherit" != t.cursor && null != t.cursor && (e.style.cursor = t.cursor), e;
    },
    "graphicRotate": function(e, t, i, n) {
        var s, r, o = (n = n || e._style).rotation || 0;
        if (!n.graphicWidth || !n.graphicHeight) {
            var a = new Image();
            return a.onreadystatechange = OpenLayers.Function.bind(function() {
                "complete" != a.readyState && "interactive" != a.readyState || (s = a.width / a.height, 
                r = Math.max(2 * n.pointRadius, n.graphicWidth || 0, n.graphicHeight || 0), t *= s, 
                n.graphicWidth = r * s, n.graphicHeight = r, this.graphicRotate(e, t, i, n));
            }, this), void (a.src = n.externalGraphic);
        }
        r = Math.max(n.graphicWidth, n.graphicHeight), s = n.graphicWidth / n.graphicHeight;
        var l = Math.round(n.graphicWidth || r * s), h = Math.round(n.graphicHeight || r);
        e.style.width = l + "px", e.style.height = h + "px";
        var c = document.getElementById(e.id + "_image");
        c || (c = this.createNode("olv:imagedata", e.id + "_image"), e.appendChild(c)), 
        c.style.width = l + "px", c.style.height = h + "px", c.src = n.externalGraphic, 
        c.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='', sizingMethod='scale')";
        var u = o * Math.PI / 180, p = Math.sin(u), d = Math.cos(u), f = "progid:DXImageTransform.Microsoft.Matrix(M11=" + d + ",M12=" + -p + ",M21=" + p + ",M22=" + d + ",SizingMethod='auto expand')\n", m = n.graphicOpacity || n.fillOpacity;
        m && 1 != m && (f += "progid:DXImageTransform.Microsoft.BasicImage(opacity=" + m + ")\n"), 
        e.style.filter = f;
        var g = new OpenLayers.Geometry.Point(-t, -i), y = new OpenLayers.Bounds(0, 0, l, h).toGeometry();
        y.rotate(n.rotation, g);
        var v = y.getBounds();
        e.style.left = Math.round(parseInt(e.style.left) + v.left) + "px", e.style.top = Math.round(parseInt(e.style.top) - v.bottom) + "px";
    },
    "postDraw": function(e) {
        e.style.visibility = "visible";
        var t = e._style.fillColor, i = e._style.strokeColor;
        "none" == t && e.fillcolor != t && (e.fillcolor = t), "none" == i && e.strokecolor != i && (e.strokecolor = i);
    },
    "setNodeDimension": function(e, t) {
        var i = t.getBounds();
        if (i) {
            var n = this.getResolution(), s = new OpenLayers.Bounds((i.left - this.featureDx) / n - this.offset.x | 0, i.bottom / n - this.offset.y | 0, (i.right - this.featureDx) / n - this.offset.x | 0, i.top / n - this.offset.y | 0);
            e.style.left = s.left + "px", e.style.top = s.top + "px", e.style.width = s.getWidth() + "px", 
            e.style.height = s.getHeight() + "px", e.coordorigin = s.left + " " + s.top, e.coordsize = s.getWidth() + " " + s.getHeight();
        }
    },
    "dashStyle": function(e) {
        var t = e.strokeDashstyle;
        switch (t) {
          case "solid":
          case "dot":
          case "dash":
          case "dashdot":
          case "longdash":
          case "longdashdot":
            return t;

          default:
            var i = t.split(/[ ,]/);
            return 2 == i.length ? 1 * i[0] >= 2 * i[1] ? "longdash" : 1 == i[0] || 1 == i[1] ? "dot" : "dash" : 4 == i.length ? 1 * i[0] >= 2 * i[1] ? "longdashdot" : "dashdot" : "solid";
        }
    },
    "createNode": function(e, t) {
        var i = document.createElement(e);
        return t && (i.id = t), i.unselectable = "on", i.onselectstart = OpenLayers.Function.False, 
        i;
    },
    "nodeTypeCompare": function(e, t) {
        var i = t, n = i.indexOf(":");
        -1 != n && (i = i.substr(n + 1));
        var s = e.nodeName;
        return -1 != (n = s.indexOf(":")) && (s = s.substr(n + 1)), i == s;
    },
    "createRenderRoot": function() {
        return this.nodeFactory(this.container.id + "_vmlRoot", "div");
    },
    "createRoot": function(e) {
        return this.nodeFactory(this.container.id + e, "olv:group");
    },
    "drawPoint": function(e, t) {
        return this.drawCircle(e, t, 1);
    },
    "drawCircle": function(e, t, i) {
        if (!isNaN(t.x) && !isNaN(t.y)) {
            var n = this.getResolution();
            e.style.left = ((t.x - this.featureDx) / n - this.offset.x | 0) - i + "px", e.style.top = (t.y / n - this.offset.y | 0) - i + "px";
            var s = 2 * i;
            return e.style.width = s + "px", e.style.height = s + "px", e;
        }
        return !1;
    },
    "drawLineString": function(e, t) {
        return this.drawLine(e, t, !1);
    },
    "drawLinearRing": function(e, t) {
        return this.drawLine(e, t, !0);
    },
    "drawLine": function(e, t, i) {
        this.setNodeDimension(e, t);
        for (var n, s, r, o = this.getResolution(), a = t.components.length, l = new Array(a), h = 0; h < a; h++) s = ((n = t.components[h]).x - this.featureDx) / o - this.offset.x | 0, 
        r = n.y / o - this.offset.y | 0, l[h] = " " + s + "," + r + " l ";
        var c = i ? " x e" : " e";
        return e.path = "m" + l.join("") + c, e;
    },
    "drawPolygon": function(e, t) {
        this.setNodeDimension(e, t);
        var i, n, s, r, o, a, l, h, c, u, p = this.getResolution(), d = [];
        for (i = 0, n = t.components.length; i < n; i++) {
            for (d.push("m"), r = 0 === i, o = null, a = null, l = 0, h = (s = t.components[i].components).length; l < h; l++) u = " " + (((c = s[l]).x - this.featureDx) / p - this.offset.x | 0) + "," + (c.y / p - this.offset.y | 0), 
            d.push(u), 0 == l && d.push(" l"), r || (o ? o != u && (a ? a != u && (r = !0) : a = u) : o = u);
            d.push(r ? " x " : " ");
        }
        return d.push("e"), e.path = d.join(""), e;
    },
    "drawRectangle": function(e, t) {
        var i = this.getResolution();
        return e.style.left = ((t.x - this.featureDx) / i - this.offset.x | 0) + "px", e.style.top = (t.y / i - this.offset.y | 0) + "px", 
        e.style.width = (t.width / i | 0) + "px", e.style.height = (t.height / i | 0) + "px", 
        e;
    },
    "drawText": function(e, t, i) {
        var n = this.nodeFactory(e + this.LABEL_ID_SUFFIX, "olv:rect"), s = this.nodeFactory(e + this.LABEL_ID_SUFFIX + "_textbox", "olv:textbox"), r = this.getResolution();
        n.style.left = ((i.x - this.featureDx) / r - this.offset.x | 0) + "px", n.style.top = (i.y / r - this.offset.y | 0) + "px", 
        n.style.flip = "y", s.innerText = t.label, "inherit" != t.cursor && null != t.cursor && (s.style.cursor = t.cursor), 
        t.fontColor && (s.style.color = t.fontColor), t.fontOpacity && (s.style.filter = "alpha(opacity=" + 100 * t.fontOpacity + ")"), 
        t.fontFamily && (s.style.fontFamily = t.fontFamily), t.fontSize && (s.style.fontSize = t.fontSize), 
        t.fontWeight && (s.style.fontWeight = t.fontWeight), t.fontStyle && (s.style.fontStyle = t.fontStyle), 
        !0 === t.labelSelect && (n._featureId = e, s._featureId = e, s._geometry = i, s._geometryClass = i.CLASS_NAME), 
        s.style.whiteSpace = "nowrap", s.inset = "1px,0px,0px,0px", n.parentNode || (n.appendChild(s), 
        this.textRoot.appendChild(n));
        var o = t.labelAlign || "cm";
        1 == o.length && (o += "m");
        var a = s.clientWidth * OpenLayers.Renderer.VML.LABEL_SHIFT[o.substr(0, 1)], l = s.clientHeight * OpenLayers.Renderer.VML.LABEL_SHIFT[o.substr(1, 1)];
        n.style.left = parseInt(n.style.left) - a - 1 + "px", n.style.top = parseInt(n.style.top) + l + "px";
    },
    "moveRoot": function(e) {
        var t = this.map.getLayer(e.container.id);
        t instanceof OpenLayers.Layer.Vector.RootContainer && (t = this.map.getLayer(this.container.id)), 
        t && t.renderer.clear(), OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this, arguments), 
        t && t.redraw();
    },
    "importSymbol": function(e) {
        var t = this.container.id + "-" + e, i = this.symbolCache[t];
        if (i) return i;
        var n = OpenLayers.Renderer.symbol[e];
        if (!n) throw new Error(e + " is not a valid symbol name");
        for (var s = new OpenLayers.Bounds(Number.MAX_VALUE, Number.MAX_VALUE, 0, 0), r = [ "m" ], o = 0; o < n.length; o += 2) {
            var a = n[o], l = n[o + 1];
            s.left = Math.min(s.left, a), s.bottom = Math.min(s.bottom, l), s.right = Math.max(s.right, a), 
            s.top = Math.max(s.top, l), r.push(a), r.push(l), 0 == o && r.push("l");
        }
        r.push("x e");
        var h = r.join(" "), c = (s.getWidth() - s.getHeight()) / 2;
        return c > 0 ? (s.bottom = s.bottom - c, s.top = s.top + c) : (s.left = s.left + c, 
        s.right = s.right - c), i = {
            "path": h,
            "size": s.getWidth(),
            "left": s.left,
            "bottom": s.bottom
        }, this.symbolCache[t] = i, i;
    },
    "CLASS_NAME": "OpenLayers.Renderer.VML"
}), OpenLayers.Renderer.VML.LABEL_SHIFT = {
    "l": 0,
    "c": .5,
    "r": 1,
    "t": 0,
    "m": .5,
    "b": 1
}, OpenLayers.Strategy.BBOX = OpenLayers.Class(OpenLayers.Strategy, {
    "bounds": null,
    "resolution": null,
    "ratio": 2,
    "resFactor": null,
    "response": null,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && (this.layer.events.on({
            "moveend": this.update,
            "refresh": this.update,
            "visibilitychanged": this.update,
            "scope": this
        }), this.update()), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && this.layer.events.un({
            "moveend": this.update,
            "refresh": this.update,
            "visibilitychanged": this.update,
            "scope": this
        }), e;
    },
    "update": function(e) {
        var t = this.getMapBounds();
        null !== t && (e && e.force || this.layer.visibility && this.layer.calculateInRange() && this.invalidBounds(t)) && (this.calculateBounds(t), 
        this.resolution = this.layer.map.getResolution(), this.triggerRead(e));
    },
    "getMapBounds": function() {
        if (null === this.layer.map) return null;
        var e = this.layer.map.getExtent();
        return e && this.layer.projection && !this.layer.projection.equals(this.layer.map.getProjectionObject()) && (e = e.clone().transform(this.layer.map.getProjectionObject(), this.layer.projection)), 
        e;
    },
    "invalidBounds": function(e) {
        e || (e = this.getMapBounds());
        var t = !this.bounds || !this.bounds.containsBounds(e);
        if (!t && this.resFactor) {
            var i = this.resolution / this.layer.map.getResolution();
            t = i >= this.resFactor || i <= 1 / this.resFactor;
        }
        return t;
    },
    "calculateBounds": function(e) {
        e || (e = this.getMapBounds());
        var t = e.getCenterLonLat(), i = e.getWidth() * this.ratio, n = e.getHeight() * this.ratio;
        this.bounds = new OpenLayers.Bounds(t.lon - i / 2, t.lat - n / 2, t.lon + i / 2, t.lat + n / 2);
    },
    "triggerRead": function(e) {
        !this.response || e && !0 === e.noAbort || (this.layer.protocol.abort(this.response), 
        this.layer.events.triggerEvent("loadend"));
        var t = {
            "filter": this.createFilter()
        };
        this.layer.events.triggerEvent("loadstart", t), this.response = this.layer.protocol.read(OpenLayers.Util.applyDefaults({
            "filter": t.filter,
            "callback": this.merge,
            "scope": this
        }, e));
    },
    "createFilter": function() {
        var e = new OpenLayers.Filter.Spatial({
            "type": OpenLayers.Filter.Spatial.BBOX,
            "value": this.bounds,
            "projection": this.layer.projection
        });
        return this.layer.filter && (e = new OpenLayers.Filter.Logical({
            "type": OpenLayers.Filter.Logical.AND,
            "filters": [ this.layer.filter, e ]
        })), e;
    },
    "merge": function(e) {
        if (this.layer.destroyFeatures(), e.success()) {
            var t = e.features;
            if (t && t.length > 0) {
                var i = this.layer.projection, n = this.layer.map.getProjectionObject();
                if (i && n && !n.equals(i)) for (var s, r = 0, o = t.length; r < o; ++r) (s = t[r].geometry) && s.transform(i, n);
                this.layer.addFeatures(t);
            }
        } else this.bounds = null;
        this.response = null, this.layer.events.triggerEvent("loadend", {
            "response": e
        });
    },
    "CLASS_NAME": "OpenLayers.Strategy.BBOX"
}), OpenLayers.Strategy.Cluster = OpenLayers.Class(OpenLayers.Strategy, {
    "distance": 20,
    "threshold": null,
    "features": null,
    "clusters": null,
    "clustering": !1,
    "resolution": null,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && this.layer.events.on({
            "beforefeaturesadded": this.cacheFeatures,
            "featuresremoved": this.clearCache,
            "moveend": this.cluster,
            "scope": this
        }), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && (this.clearCache(), this.layer.events.un({
            "beforefeaturesadded": this.cacheFeatures,
            "featuresremoved": this.clearCache,
            "moveend": this.cluster,
            "scope": this
        })), e;
    },
    "cacheFeatures": function(e) {
        var t = !0;
        return this.clustering || (this.clearCache(), this.features = e.features, this.cluster(), 
        t = !1), t;
    },
    "clearCache": function() {
        this.clustering || (this.features = null);
    },
    "cluster": function(e) {
        if ((!e || e.zoomChanged) && this.features) {
            var t = this.layer.map.getResolution();
            if (t != this.resolution || !this.clustersExist()) {
                this.resolution = t;
                for (var i, n, s, r = [], o = 0; o < this.features.length; ++o) if ((i = this.features[o]).geometry) {
                    n = !1;
                    for (var a = r.length - 1; a >= 0; --a) if (s = r[a], this.shouldCluster(s, i)) {
                        this.addToCluster(s, i), n = !0;
                        break;
                    }
                    n || r.push(this.createCluster(this.features[o]));
                }
                if (this.clustering = !0, this.layer.removeAllFeatures(), this.clustering = !1, 
                r.length > 0) {
                    if (this.threshold > 1) {
                        var l = r.slice();
                        r = [];
                        for (var h, o = 0, c = l.length; o < c; ++o) (h = l[o]).attributes.count < this.threshold ? Array.prototype.push.apply(r, h.cluster) : r.push(h);
                    }
                    this.clustering = !0, this.layer.addFeatures(r), this.clustering = !1;
                }
                this.clusters = r;
            }
        }
    },
    "clustersExist": function() {
        var e = !1;
        if (this.clusters && this.clusters.length > 0 && this.clusters.length == this.layer.features.length) {
            e = !0;
            for (var t = 0; t < this.clusters.length; ++t) if (this.clusters[t] != this.layer.features[t]) {
                e = !1;
                break;
            }
        }
        return e;
    },
    "shouldCluster": function(e, t) {
        var i = e.geometry.getBounds().getCenterLonLat(), n = t.geometry.getBounds().getCenterLonLat();
        return Math.sqrt(Math.pow(i.lon - n.lon, 2) + Math.pow(i.lat - n.lat, 2)) / this.resolution <= this.distance;
    },
    "addToCluster": function(e, t) {
        e.cluster.push(t), e.attributes.count += 1;
    },
    "createCluster": function(e) {
        var t = e.geometry.getBounds().getCenterLonLat(), i = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon, t.lat), {
            "count": 1
        });
        return i.cluster = [ e ], i;
    },
    "CLASS_NAME": "OpenLayers.Strategy.Cluster"
}), OpenLayers.Strategy.Filter = OpenLayers.Class(OpenLayers.Strategy, {
    "filter": null,
    "cache": null,
    "caching": !1,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.apply(this, arguments);
        return e && (this.cache = [], this.layer.events.on({
            "beforefeaturesadded": this.handleAdd,
            "beforefeaturesremoved": this.handleRemove,
            "scope": this
        })), e;
    },
    "deactivate": function() {
        return this.cache = null, this.layer && this.layer.events && this.layer.events.un({
            "beforefeaturesadded": this.handleAdd,
            "beforefeaturesremoved": this.handleRemove,
            "scope": this
        }), OpenLayers.Strategy.prototype.deactivate.apply(this, arguments);
    },
    "handleAdd": function(e) {
        if (!this.caching && this.filter) {
            var t = e.features;
            e.features = [];
            for (var i, n = 0, s = t.length; n < s; ++n) i = t[n], this.filter.evaluate(i) ? e.features.push(i) : this.cache.push(i);
        }
    },
    "handleRemove": function(e) {
        this.caching || (this.cache = []);
    },
    "setFilter": function(e) {
        this.filter = e;
        var t = this.cache;
        if (this.cache = [], this.handleAdd({
            "features": this.layer.features
        }), this.cache.length > 0 && (this.caching = !0, this.layer.removeFeatures(this.cache.slice()), 
        this.caching = !1), t.length > 0) {
            var i = {
                "features": t
            };
            this.handleAdd(i), i.features.length > 0 && (this.caching = !0, this.layer.addFeatures(i.features), 
            this.caching = !1);
        }
    },
    "CLASS_NAME": "OpenLayers.Strategy.Filter"
}), OpenLayers.Strategy.Fixed = OpenLayers.Class(OpenLayers.Strategy, {
    "preload": !1,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.apply(this, arguments);
        return e && (this.layer.events.on({
            "refresh": this.load,
            "scope": this
        }), 1 == this.layer.visibility || this.preload ? this.load() : this.layer.events.on({
            "visibilitychanged": this.load,
            "scope": this
        })), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && this.layer.events.un({
            "refresh": this.load,
            "visibilitychanged": this.load,
            "scope": this
        }), e;
    },
    "load": function(e) {
        var t = this.layer;
        t.events.triggerEvent("loadstart", {
            "filter": t.filter
        }), t.protocol.read(OpenLayers.Util.applyDefaults({
            "callback": this.merge,
            "filter": t.filter,
            "scope": this
        }, e)), t.events.un({
            "visibilitychanged": this.load,
            "scope": this
        });
    },
    "merge": function(e) {
        var t = this.layer;
        t.destroyFeatures();
        var i = e.features;
        if (i && i.length > 0) {
            var n = t.projection, s = t.map.getProjectionObject();
            if (!s.equals(n)) for (var r, o = 0, a = i.length; o < a; ++o) (r = i[o].geometry) && r.transform(n, s);
            t.addFeatures(i);
        }
        t.events.triggerEvent("loadend", {
            "response": e
        });
    },
    "CLASS_NAME": "OpenLayers.Strategy.Fixed"
}), OpenLayers.Strategy.Paging = OpenLayers.Class(OpenLayers.Strategy, {
    "features": null,
    "length": 10,
    "num": null,
    "paging": !1,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && this.layer.events.on({
            "beforefeaturesadded": this.cacheFeatures,
            "scope": this
        }), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && (this.clearCache(), this.layer.events.un({
            "beforefeaturesadded": this.cacheFeatures,
            "scope": this
        })), e;
    },
    "cacheFeatures": function(e) {
        this.paging || (this.clearCache(), this.features = e.features, this.pageNext(e));
    },
    "clearCache": function() {
        if (this.features) for (var e = 0; e < this.features.length; ++e) this.features[e].destroy();
        this.features = null, this.num = null;
    },
    "pageCount": function() {
        var e = this.features ? this.features.length : 0;
        return Math.ceil(e / this.length);
    },
    "pageNum": function() {
        return this.num;
    },
    "pageLength": function(e) {
        return e && e > 0 && (this.length = e), this.length;
    },
    "pageNext": function(e) {
        var t = !1;
        if (this.features) {
            null === this.num && (this.num = -1);
            var i = (this.num + 1) * this.length;
            t = this.page(i, e);
        }
        return t;
    },
    "pagePrevious": function() {
        var e = !1;
        if (this.features) {
            null === this.num && (this.num = this.pageCount());
            var t = (this.num - 1) * this.length;
            e = this.page(t);
        }
        return e;
    },
    "page": function(e, t) {
        var i = !1;
        if (this.features && e >= 0 && e < this.features.length) {
            var n = Math.floor(e / this.length);
            if (n != this.num) {
                this.paging = !0;
                var s = this.features.slice(e, e + this.length);
                this.layer.removeFeatures(this.layer.features), this.num = n, t && t.features ? t.features = s : this.layer.addFeatures(s), 
                this.paging = !1, i = !0;
            }
        }
        return i;
    },
    "CLASS_NAME": "OpenLayers.Strategy.Paging"
}), OpenLayers.Strategy.Refresh = OpenLayers.Class(OpenLayers.Strategy, {
    "force": !1,
    "interval": 0,
    "timer": null,
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && (!0 === this.layer.visibility && this.start(), this.layer.events.on({
            "visibilitychanged": this.reset,
            "scope": this
        })), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && (this.stop(), this.layer.events.un({
            "visibilitychanged": this.reset,
            "scope": this
        })), e;
    },
    "reset": function() {
        !0 === this.layer.visibility ? this.start() : this.stop();
    },
    "start": function() {
        this.interval && "number" == typeof this.interval && this.interval > 0 && (this.timer = window.setInterval(OpenLayers.Function.bind(this.refresh, this), this.interval));
    },
    "refresh": function() {
        this.layer && this.layer.refresh && "function" == typeof this.layer.refresh && this.layer.refresh({
            "force": this.force
        });
    },
    "stop": function() {
        null !== this.timer && (window.clearInterval(this.timer), this.timer = null);
    },
    "CLASS_NAME": "OpenLayers.Strategy.Refresh"
}), OpenLayers.Strategy.Save = OpenLayers.Class(OpenLayers.Strategy, {
    "events": null,
    "auto": !1,
    "timer": null,
    "initialize": function(e) {
        OpenLayers.Strategy.prototype.initialize.apply(this, [ e ]), this.events = new OpenLayers.Events(this);
    },
    "activate": function() {
        var e = OpenLayers.Strategy.prototype.activate.call(this);
        return e && this.auto && ("number" == typeof this.auto ? this.timer = window.setInterval(OpenLayers.Function.bind(this.save, this), 1e3 * this.auto) : this.layer.events.on({
            "featureadded": this.triggerSave,
            "afterfeaturemodified": this.triggerSave,
            "scope": this
        })), e;
    },
    "deactivate": function() {
        var e = OpenLayers.Strategy.prototype.deactivate.call(this);
        return e && this.auto && ("number" == typeof this.auto ? window.clearInterval(this.timer) : this.layer.events.un({
            "featureadded": this.triggerSave,
            "afterfeaturemodified": this.triggerSave,
            "scope": this
        })), e;
    },
    "triggerSave": function(e) {
        var t = e.feature;
        t.state !== OpenLayers.State.INSERT && t.state !== OpenLayers.State.UPDATE && t.state !== OpenLayers.State.DELETE || this.save([ e.feature ]);
    },
    "save": function(e) {
        e || (e = this.layer.features), this.events.triggerEvent("start", {
            "features": e
        });
        var t = this.layer.projection, i = this.layer.map.getProjectionObject();
        if (!i.equals(t)) {
            for (var n, s, r = e.length, o = new Array(r), a = 0; a < r; ++a) (s = (n = e[a]).clone()).fid = n.fid, 
            s.state = n.state, n.url && (s.url = n.url), s._original = n, s.geometry.transform(i, t), 
            o[a] = s;
            e = o;
        }
        this.layer.protocol.commit(e, {
            "callback": this.onCommit,
            "scope": this
        });
    },
    "onCommit": function(e) {
        var t = {
            "response": e
        };
        if (e.success()) {
            for (var i, n, s = e.reqFeatures, r = [], o = e.insertIds || [], a = 0, l = 0, h = s.length; l < h; ++l) (i = (n = (n = s[l])._original || n).state) && (i == OpenLayers.State.DELETE ? r.push(n) : i == OpenLayers.State.INSERT && (n.fid = o[a], 
            ++a), n.state = null);
            r.length > 0 && this.layer.destroyFeatures(r), this.events.triggerEvent("success", t);
        } else this.events.triggerEvent("fail", t);
    },
    "CLASS_NAME": "OpenLayers.Strategy.Save"
}), OpenLayers.Tile.Image.IFrame = {
    "useIFrame": null,
    "blankImageUrl": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",
    "draw": function() {
        if (OpenLayers.Tile.Image.prototype.shouldDraw.call(this)) {
            var e = this.layer.getURL(this.bounds), t = this.useIFrame;
            this.useIFrame = null !== this.maxGetUrlLength && !this.layer.async && e.length > this.maxGetUrlLength;
            var i = t && !this.useIFrame, n = !t && this.useIFrame;
            (i || n) && (this.imgDiv && this.imgDiv.parentNode === this.frame && this.frame.removeChild(this.imgDiv), 
            this.imgDiv = null, i && this.frame.removeChild(this.frame.firstChild));
        }
        return OpenLayers.Tile.Image.prototype.draw.apply(this, arguments);
    },
    "getImage": function() {
        if (!0 === this.useIFrame) {
            if (!this.frame.childNodes.length) {
                var e = document.createElement("div"), t = e.style;
                t.position = "absolute", t.width = "100%", t.height = "100%", t.zIndex = 1, t.backgroundImage = "url(" + this.blankImageUrl + ")", 
                this.frame.appendChild(e);
            }
            var i, n = this.id + "_iFrame";
            parseFloat(navigator.appVersion.split("MSIE")[1]) < 9 ? ((i = document.createElement('<iframe name="' + n + '">')).style.backgroundColor = "#FFFFFF", 
            i.style.filter = "chroma(color=#FFFFFF)") : ((i = document.createElement("iframe")).style.backgroundColor = "transparent", 
            i.name = n), i.scrolling = "no", i.marginWidth = "0px", i.marginHeight = "0px", 
            i.frameBorder = "0", i.style.position = "absolute";
            var s = 0, r = 0;
            return this.layer.gutter && (s = this.layer.gutter / this.layer.tileSize.w * 100, 
            r = this.layer.gutter / this.layer.tileSize.h * 100), i.style.left = -s + "%", i.style.top = -r + "%", 
            i.style.width = 2 * s + 100 + "%", i.style.height = 2 * r + 100 + "%", this.layer.opacity < 1 && OpenLayers.Util.modifyDOMElement(i, null, null, null, null, null, null, this.layer.opacity), 
            this.frame.appendChild(i), this.imgDiv = i, i;
        }
        return OpenLayers.Tile.Image.prototype.getImage.apply(this, arguments);
    },
    "createRequestForm": function() {
        var e = document.createElement("form");
        e.method = "POST";
        var t = this.layer.params._OLSALT;
        t = (t ? t + "_" : "") + this.bounds.toBBOX(), e.action = OpenLayers.Util.urlAppend(this.layer.url, t), 
        e.target = this.id + "_iFrame";
        this.layer.getImageSize(this.bounds);
        var i, n = OpenLayers.Util.getParameters(this.url);
        for (var s in n) (i = document.createElement("input")).type = "hidden", i.name = s, 
        i.value = n[s], e.appendChild(i);
        return e;
    },
    "setImgSrc": function(e) {
        if (!0 === this.useIFrame) if (e) {
            var t = this.createRequestForm();
            this.frame.appendChild(t), t.submit(), this.frame.removeChild(t);
        } else this.imgDiv.parentNode === this.frame && (this.frame.removeChild(this.imgDiv), 
        this.imgDiv = null); else OpenLayers.Tile.Image.prototype.setImgSrc.apply(this, arguments);
    },
    "onImageLoad": function() {
        OpenLayers.Tile.Image.prototype.onImageLoad.apply(this, arguments), !0 === this.useIFrame && (this.imgDiv.style.opacity = 1, 
        this.frame.style.opacity = this.layer.opacity);
    },
    "createBackBuffer": function() {
        var e;
        return !1 === this.useIFrame && (e = OpenLayers.Tile.Image.prototype.createBackBuffer.call(this)), 
        e;
    }
}, OpenLayers.Console.warn("OpenLayers.Rico is deprecated"), OpenLayers.Rico = OpenLayers.Rico || {}, 
OpenLayers.Rico.Color = OpenLayers.Class({
    "initialize": function(e, t, i) {
        this.rgb = {
            "r": e,
            "g": t,
            "b": i
        };
    },
    "setRed": function(e) {
        this.rgb.r = e;
    },
    "setGreen": function(e) {
        this.rgb.g = e;
    },
    "setBlue": function(e) {
        this.rgb.b = e;
    },
    "setHue": function(e) {
        var t = this.asHSB();
        t.h = e, this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, t.b);
    },
    "setSaturation": function(e) {
        var t = this.asHSB();
        t.s = e, this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, t.b);
    },
    "setBrightness": function(e) {
        var t = this.asHSB();
        t.b = e, this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, t.b);
    },
    "darken": function(e) {
        var t = this.asHSB();
        this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, Math.max(t.b - e, 0));
    },
    "brighten": function(e) {
        var t = this.asHSB();
        this.rgb = OpenLayers.Rico.Color.HSBtoRGB(t.h, t.s, Math.min(t.b + e, 1));
    },
    "blend": function(e) {
        this.rgb.r = Math.floor((this.rgb.r + e.rgb.r) / 2), this.rgb.g = Math.floor((this.rgb.g + e.rgb.g) / 2), 
        this.rgb.b = Math.floor((this.rgb.b + e.rgb.b) / 2);
    },
    "isBright": function() {
        this.asHSB();
        return this.asHSB().b > .5;
    },
    "isDark": function() {
        return !this.isBright();
    },
    "asRGB": function() {
        return "rgb(" + this.rgb.r + "," + this.rgb.g + "," + this.rgb.b + ")";
    },
    "asHex": function() {
        return "#" + this.rgb.r.toColorPart() + this.rgb.g.toColorPart() + this.rgb.b.toColorPart();
    },
    "asHSB": function() {
        return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r, this.rgb.g, this.rgb.b);
    },
    "toString": function() {
        return this.asHex();
    }
}), OpenLayers.Rico.Color.createFromHex = function(e) {
    if (4 == e.length) for (var t = e, e = "#", i = 1; i < 4; i++) e += t.charAt(i) + t.charAt(i);
    0 == e.indexOf("#") && (e = e.substring(1));
    var n = e.substring(0, 2), s = e.substring(2, 4), r = e.substring(4, 6);
    return new OpenLayers.Rico.Color(parseInt(n, 16), parseInt(s, 16), parseInt(r, 16));
}, OpenLayers.Rico.Color.createColorFromBackground = function(e) {
    var t = OpenLayers.Element.getStyle(OpenLayers.Util.getElement(e), "backgroundColor");
    if ("transparent" == t && e.parentNode) return OpenLayers.Rico.Color.createColorFromBackground(e.parentNode);
    if (null == t) return new OpenLayers.Rico.Color(255, 255, 255);
    if (0 == t.indexOf("rgb(")) {
        var i = t.substring(4, t.length - 1).split(",");
        return new OpenLayers.Rico.Color(parseInt(i[0]), parseInt(i[1]), parseInt(i[2]));
    }
    return 0 == t.indexOf("#") ? OpenLayers.Rico.Color.createFromHex(t) : new OpenLayers.Rico.Color(255, 255, 255);
}, OpenLayers.Rico.Color.HSBtoRGB = function(e, t, i) {
    var n = 0, s = 0, r = 0;
    if (0 == t) s = n = parseInt(255 * i + .5), r = n; else {
        var o = 6 * (e - Math.floor(e)), a = o - Math.floor(o), l = i * (1 - t), h = i * (1 - t * a), c = i * (1 - t * (1 - a));
        switch (parseInt(o)) {
          case 0:
            n = 255 * i + .5, s = 255 * c + .5, r = 255 * l + .5;
            break;

          case 1:
            n = 255 * h + .5, s = 255 * i + .5, r = 255 * l + .5;
            break;

          case 2:
            n = 255 * l + .5, s = 255 * i + .5, r = 255 * c + .5;
            break;

          case 3:
            n = 255 * l + .5, s = 255 * h + .5, r = 255 * i + .5;
            break;

          case 4:
            n = 255 * c + .5, s = 255 * l + .5, r = 255 * i + .5;
            break;

          case 5:
            n = 255 * i + .5, s = 255 * l + .5, r = 255 * h + .5;
        }
    }
    return {
        "r": parseInt(n),
        "g": parseInt(s),
        "b": parseInt(r)
    };
}, OpenLayers.Rico.Color.RGBtoHSB = function(e, t, i) {
    var n, s, r, o = e > t ? e : t;
    i > o && (o = i);
    var a = e < t ? e : t;
    if (i < a && (a = i), r = o / 255, 0 == (s = 0 != o ? (o - a) / o : 0)) n = 0; else {
        var l = (o - e) / (o - a), h = (o - t) / (o - a), c = (o - i) / (o - a);
        n = e == o ? c - h : t == o ? 2 + l - c : 4 + h - l, (n /= 6) < 0 && (n += 1);
    }
    return {
        "h": n,
        "s": s,
        "b": r
    };
}, OpenLayers.Console.warn("OpenLayers.Rico is deprecated"), OpenLayers.Rico = OpenLayers.Rico || {}, 
OpenLayers.Rico.Corner = {
    "round": function(e, t) {
        e = OpenLayers.Util.getElement(e), this._setOptions(t);
        var i = this.options.color;
        "fromElement" == this.options.color && (i = this._background(e));
        var n = this.options.bgColor;
        "fromParent" == this.options.bgColor && (n = this._background(e.offsetParent)), 
        this._roundCornersImpl(e, i, n);
    },
    "changeColor": function(e, t) {
        e.style.backgroundColor = t;
        for (var i = e.parentNode.getElementsByTagName("span"), n = 0; n < i.length; n++) i[n].style.backgroundColor = t;
    },
    "changeOpacity": function(e, t) {
        var i = t, n = "alpha(opacity=" + 100 * t + ")";
        e.style.opacity = i, e.style.filter = n;
        for (var s = e.parentNode.getElementsByTagName("span"), r = 0; r < s.length; r++) s[r].style.opacity = i, 
        s[r].style.filter = n;
    },
    "reRound": function(e, t) {
        var i = e.parentNode.childNodes[0], n = e.parentNode.childNodes[2];
        e.parentNode.removeChild(i), e.parentNode.removeChild(n), this.round(e.parentNode, t);
    },
    "_roundCornersImpl": function(e, t, i) {
        this.options.border && this._renderBorder(e, i), this._isTopRounded() && this._roundTopCorners(e, t, i), 
        this._isBottomRounded() && this._roundBottomCorners(e, t, i);
    },
    "_renderBorder": function(e, t) {
        var i = "1px solid " + this._borderColor(t), n = "style='" + ("border-left: " + i) + ";" + ("border-right: " + i) + "'";
        e.innerHTML = "<div " + n + ">" + e.innerHTML + "</div>";
    },
    "_roundTopCorners": function(e, t, i) {
        for (var n = this._createCorner(i), s = 0; s < this.options.numSlices; s++) n.appendChild(this._createCornerSlice(t, i, s, "top"));
        e.style.paddingTop = 0, e.insertBefore(n, e.firstChild);
    },
    "_roundBottomCorners": function(e, t, i) {
        for (var n = this._createCorner(i), s = this.options.numSlices - 1; s >= 0; s--) n.appendChild(this._createCornerSlice(t, i, s, "bottom"));
        e.style.paddingBottom = 0, e.appendChild(n);
    },
    "_createCorner": function(e) {
        var t = document.createElement("div");
        return t.style.backgroundColor = this._isTransparent() ? "transparent" : e, t;
    },
    "_createCornerSlice": function(e, t, i, n) {
        var s = document.createElement("span"), r = s.style;
        r.backgroundColor = e, r.display = "block", r.height = "1px", r.overflow = "hidden", 
        r.fontSize = "1px";
        var o = this._borderColor(e, t);
        return this.options.border && 0 == i ? (r.borderTopStyle = "solid", r.borderTopWidth = "1px", 
        r.borderLeftWidth = "0px", r.borderRightWidth = "0px", r.borderBottomWidth = "0px", 
        r.height = "0px", r.borderColor = o) : o && (r.borderColor = o, r.borderStyle = "solid", 
        r.borderWidth = "0px 1px"), this.options.compact || i != this.options.numSlices - 1 || (r.height = "2px"), 
        this._setMargin(s, i, n), this._setBorder(s, i, n), s;
    },
    "_setOptions": function(e) {
        this.options = {
            "corners": "all",
            "color": "fromElement",
            "bgColor": "fromParent",
            "blend": !0,
            "border": !1,
            "compact": !1
        }, OpenLayers.Util.extend(this.options, e || {}), this.options.numSlices = this.options.compact ? 2 : 4, 
        this._isTransparent() && (this.options.blend = !1);
    },
    "_whichSideTop": function() {
        return this._hasString(this.options.corners, "all", "top") ? "" : this.options.corners.indexOf("tl") >= 0 && this.options.corners.indexOf("tr") >= 0 ? "" : this.options.corners.indexOf("tl") >= 0 ? "left" : this.options.corners.indexOf("tr") >= 0 ? "right" : "";
    },
    "_whichSideBottom": function() {
        return this._hasString(this.options.corners, "all", "bottom") ? "" : this.options.corners.indexOf("bl") >= 0 && this.options.corners.indexOf("br") >= 0 ? "" : this.options.corners.indexOf("bl") >= 0 ? "left" : this.options.corners.indexOf("br") >= 0 ? "right" : "";
    },
    "_borderColor": function(e, t) {
        return "transparent" == e ? t : this.options.border ? this.options.border : this.options.blend ? this._blend(t, e) : "";
    },
    "_setMargin": function(e, t, i) {
        var n = this._marginSize(t), s = "top" == i ? this._whichSideTop() : this._whichSideBottom();
        "left" == s ? (e.style.marginLeft = n + "px", e.style.marginRight = "0px") : "right" == s ? (e.style.marginRight = n + "px", 
        e.style.marginLeft = "0px") : (e.style.marginLeft = n + "px", e.style.marginRight = n + "px");
    },
    "_setBorder": function(e, t, i) {
        var n = this._borderSize(t), s = "top" == i ? this._whichSideTop() : this._whichSideBottom();
        "left" == s ? (e.style.borderLeftWidth = n + "px", e.style.borderRightWidth = "0px") : "right" == s ? (e.style.borderRightWidth = n + "px", 
        e.style.borderLeftWidth = "0px") : (e.style.borderLeftWidth = n + "px", e.style.borderRightWidth = n + "px"), 
        0 != this.options.border && (e.style.borderLeftWidth = n + "px", e.style.borderRightWidth = n + "px");
    },
    "_marginSize": function(e) {
        if (this._isTransparent()) return 0;
        var t = [ 5, 3, 2, 1 ], i = [ 3, 2, 1, 0 ], n = [ 2, 1 ], s = [ 1, 0 ];
        return this.options.compact && this.options.blend ? s[e] : this.options.compact ? n[e] : this.options.blend ? i[e] : t[e];
    },
    "_borderSize": function(e) {
        var t = [ 5, 3, 2, 1 ], i = [ 2, 1, 1, 1 ], n = [ 1, 0 ], s = [ 0, 2, 0, 0 ];
        return this.options.compact && (this.options.blend || this._isTransparent()) ? 1 : this.options.compact ? n[e] : this.options.blend ? i[e] : this.options.border ? s[e] : this._isTransparent() ? t[e] : 0;
    },
    "_hasString": function(e) {
        for (var t = 1; t < arguments.length; t++) if (e.indexOf(arguments[t]) >= 0) return !0;
        return !1;
    },
    "_blend": function(e, t) {
        var i = OpenLayers.Rico.Color.createFromHex(e);
        return i.blend(OpenLayers.Rico.Color.createFromHex(t)), i;
    },
    "_background": function(e) {
        try {
            return OpenLayers.Rico.Color.createColorFromBackground(e).asHex();
        } catch (e) {
            return "#ffffff";
        }
    },
    "_isTransparent": function() {
        return "transparent" == this.options.color;
    },
    "_isTopRounded": function() {
        return this._hasString(this.options.corners, "all", "top", "tl", "tr");
    },
    "_isBottomRounded": function() {
        return this._hasString(this.options.corners, "all", "bottom", "bl", "br");
    },
    "_hasSingleTextChild": function(e) {
        return 1 == e.childNodes.length && 3 == e.childNodes[0].nodeType;
    }
}, OpenLayers.Handler.Geometry = OpenLayers.Class(OpenLayers.Handler.Drag, {
    "layerOptions": null,
    "geometry": null,
    "feature": null,
    "angle": 0,
    "width": null,
    "layer": null,
    "origin": null,
    "wkt": null,
    "initialize": function(e, t, i) {
        i && i.layerOptions && i.layerOptions.styleMap || (this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default, {})), 
        OpenLayers.Handler.Drag.prototype.initialize.apply(this, [ e, t, i ]), this.options = i || {};
    },
    "setOptions": function(e) {
        OpenLayers.Util.extend(this.options, e), OpenLayers.Util.extend(this, e);
    },
    "setGeometry": function(e) {
        this.geometry = e;
    },
    "activate": function() {
        var e = !1;
        return OpenLayers.Handler.Drag.prototype.activate.apply(this, arguments) && (this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, OpenLayers.Util.extend({
            "displayInLayerSwitcher": !1,
            "calculateInRange": OpenLayers.Function.True
        }, this.layerOptions)), this.map.addLayer(this.layer), e = !0), e;
    },
    "deactivate": function() {
        var e = !1;
        return OpenLayers.Handler.Drag.prototype.deactivate.apply(this, arguments) && (null !== this.layer.map && (this.layer.destroy(!1), 
        this.feature && this.feature.destroy()), this.layer = null, this.feature = null, 
        e = !0), e;
    },
    "down": function(e) {
        if (this.geometry) {
            this.clear(), this.dragGeometry = this.geometry.clone();
            var t = this.layer.getLonLatFromViewPortPx(e.xy);
            this.origin = new OpenLayers.Geometry.Point(t.lon, t.lat), this.radius = this.measureWidth(), 
            this.feature = new OpenLayers.Feature.Vector(), this.feature.geometry = this.dragGeometry, 
            this.layer.addFeatures([ this.feature ], {
                "silent": !0
            });
            var i = t.lon - this.dragGeometry.bounds.left, n = t.lat - this.dragGeometry.bounds.bottom;
            this.dragGeometry.move(i, n), this.callback("create", [ this.origin, this.feature ]);
        }
    },
    "move": function(e) {
        if (this.geometry) {
            var t = this.layer.getLonLatFromViewPortPx(e.xy), i = new OpenLayers.Geometry.Point(t.lon, t.lat), n = this.angle;
            this.angle = this.calculateAngle(i, e), this.dragGeometry.rotate(this.angle - n, this.origin);
            var s = this.radius;
            this.radius = i.distanceTo(this.origin), this.dragGeometry.resize(this.radius / s, this.origin), 
            this.layer.drawFeature(this.feature, this.style);
        }
    },
    "calculateAngle": function(e, t) {
        return Math.atan2(e.y - this.origin.y, e.x - this.origin.x) * (180 / Math.PI);
    },
    "measureWidth": function() {
        return this.dragGeometry.calculateBounds(), Math.abs(this.dragGeometry.bounds.right - this.dragGeometry.bounds.left);
    },
    "up": function(e) {
        this.finalize();
    },
    "out": function(e) {
        this.finalize();
    },
    "cancel": function() {
        this.callback("cancel", null), this.finalize();
    },
    "finalize": function() {
        this.origin = null, this.angle = 0;
    },
    "clear": function() {
        this.layer && (this.layer.renderer.clear(), this.layer.destroyFeatures());
    },
    "callback": function(e, t) {
        this.geometry && ("done" != e && "cancel" != e || this.clear(), this.callbacks[e] && this.callbacks[e].apply(this.control, [ this.dragGeometry.clone() ]));
    },
    "CLASS_NAME": "OpenLayers.Handler.Geometry"
}), function(e) {
    function t(e, t, n) {
        for (var s = i(e), a = 0; a < t.length; a++) {
            var l = [ e, t[a] ].join("-");
            o[l] = r(l, n || s.type, s.minZoom, s.maxZoom);
        }
    }
    function i(e) {
        if (e in o) return o[e];
        throw "No such provider (" + e + ")";
    }
    function n(e) {
        return e.replace(/({.})/g, function(e) {
            return "$" + e.toLowerCase();
        });
    }
    var s = " a. b. c. d.".split(" "), r = function(e, t, i, n) {
        return {
            "url": [ "http://{S}tile.stamen.com/", e, "/{Z}/{X}/{Y}.", t ].join(""),
            "type": t,
            "subdomains": s.slice(),
            "minZoom": i,
            "maxZoom": n,
            "attribution": a
        };
    }, o = {
        "toner": r("toner", "png", 0, 20),
        "terrain": r("terrain", "jpg", 4, 18),
        "watercolor": r("watercolor", "jpg", 1, 16),
        "trees-cabs-crime": {
            "url": "http://{S}.tiles.mapbox.com/v3/stamen.trees-cabs-crime/{Z}/{X}/{Y}.png",
            "type": "png",
            "subdomains": "a b c d".split(" "),
            "minZoom": 11,
            "maxZoom": 18,
            "extent": [ {
                "lat": 37.853,
                "lon": -122.577
            }, {
                "lat": 37.684,
                "lon": -122.313
            } ],
            "attribution": [ 'Design by Shawn Allen at <a href="http://stamen.com">Stamen</a>.', 'Data courtesy of <a href="http://fuf.net">FuF</a>,', '<a href="http://www.yellowcabsf.com">Yellow Cab</a>', '&amp; <a href="http://sf-police.org">SFPD</a>.' ].join(" ")
        }
    }, a = [ 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, ', 'under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ', 'Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, ', 'under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.' ].join("");
    t("toner", [ "hybrid", "labels", "lines", "background", "lite" ]), t("toner", [ "2010" ]), 
    t("toner", [ "2011", "2011-lines", "2011-labels", "2011-lite" ]), t("terrain", [ "background" ]), 
    t("terrain", [ "labels", "lines" ], "png"), e.stamen = e.stamen || {}, e.stamen.tile = e.stamen.tile || {}, 
    e.stamen.tile.providers = o, e.stamen.tile.getProvider = i, "object" == typeof OpenLayers && (OpenLayers.Layer.Stamen = OpenLayers.Class(OpenLayers.Layer.OSM, {
        "initialize": function(e, t) {
            var s = i(e), r = s.url, o = s.subdomains, a = [];
            if (r.indexOf("{S}") > -1) for (var l = 0; l < o.length; l++) a.push(n(r.replace("{S}", o[l]))); else a.push(n(r));
            return t = OpenLayers.Util.extend({
                "numZoomLevels": s.maxZoom,
                "buffer": 0,
                "transitionEffect": "resize",
                "tileOptions": {
                    "crossOriginKeyword": null
                }
            }, t), OpenLayers.Layer.OSM.prototype.initialize.call(this, e, a, t);
        }
    }));
}("undefined" == typeof exports ? this : exports), function() {
    var e, t, i, n, s = [].indexOf || function(e) {
        for (var t = 0, i = this.length; t < i; t++) if (t in this && this[t] === e) return t;
        return -1;
    }, r = function(e, t) {
        return function() {
            return e.apply(t, arguments);
        };
    }, o = [].slice, a = {}.hasOwnProperty, l = function(e, t) {
        function i() {
            this.constructor = e;
        }
        for (var n in t) a.call(t, n) && (e[n] = t[n]);
        return i.prototype = t.prototype, e.prototype = new i(), e.__super__ = t.prototype, 
        e;
    };
    e = {
        "binders": {},
        "components": {},
        "formatters": {},
        "adapters": {},
        "config": {
            "prefix": "rv",
            "templateDelimiters": [ "{", "}" ],
            "rootInterface": ".",
            "preloadData": !0,
            "handler": function(e, t, i) {
                return this.call(e, t, i.view.models);
            }
        }
    }, "jQuery" in window ? (n = "on" in jQuery.prototype ? [ "on", "off" ] : [ "bind", "unbind" ], 
    t = n[0], i = n[1], e.Util = {
        "bindEvent": function(e, i, n) {
            return jQuery(e)[t](i, n);
        },
        "unbindEvent": function(e, t, n) {
            return jQuery(e)[i](t, n);
        },
        "getInputValue": function(e) {
            var t;
            return "checkbox" === (t = jQuery(e)).attr("type") ? t.is(":checked") : t.val();
        }
    }) : e.Util = {
        "bindEvent": "addEventListener" in window ? function(e, t, i) {
            return e.addEventListener(t, i, !1);
        } : function(e, t, i) {
            return e.attachEvent("on" + t, i);
        },
        "unbindEvent": "removeEventListener" in window ? function(e, t, i) {
            return e.removeEventListener(t, i, !1);
        } : function(e, t, i) {
            return e.detachEvent("on" + t, i);
        },
        "getInputValue": function(e) {
            var t, i, n, s;
            if ("checkbox" === e.type) return e.checked;
            if ("select-multiple" === e.type) {
                for (s = [], i = 0, n = e.length; i < n; i++) (t = e[i]).selected && s.push(t.value);
                return s;
            }
            return e.value;
        }
    }, e.KeypathParser = function() {
        function e() {}
        return e.parse = function(e, t, i) {
            var n, r, o, a, l, h;
            for (a = [], r = {
                "interface": i,
                "path": ""
            }, o = l = 0, h = e.length; l < h; o = l += 1) n = e.charAt(o), s.call(t, n) >= 0 ? (a.push(r), 
            r = {
                "interface": n,
                "path": ""
            }) : r.path += n;
            return a.push(r), a;
        }, e;
    }(), e.TextTemplateParser = function() {
        function e() {}
        return e.types = {
            "text": 0,
            "binding": 1
        }, e.parse = function(e, t) {
            var i, n, s, r, o, a, l;
            for (a = [], r = e.length, i = 0, n = 0; n < r; ) {
                if ((i = e.indexOf(t[0], n)) < 0) {
                    a.push({
                        "type": this.types.text,
                        "value": e.slice(n)
                    });
                    break;
                }
                if (i > 0 && n < i && a.push({
                    "type": this.types.text,
                    "value": e.slice(n, i)
                }), n = i + t[0].length, (i = e.indexOf(t[1], n)) < 0) {
                    o = e.slice(n - t[1].length), (null != (s = a[a.length - 1]) ? s.type : void 0) === this.types.text ? s.value += o : a.push({
                        "type": this.types.text,
                        "value": o
                    });
                    break;
                }
                l = e.slice(n, i).trim(), a.push({
                    "type": this.types.binding,
                    "value": l
                }), n = i + t[1].length;
            }
            return a;
        }, e;
    }(), e.Observer = function() {
        function t(e, t, i, n) {
            this.view = e, this.model = t, this.keypath = i, this.callback = n, this.unobserve = r(this.unobserve, this), 
            this.realize = r(this.realize, this), this.value = r(this.value, this), this.publish = r(this.publish, this), 
            this.read = r(this.read, this), this.set = r(this.set, this), this.adapter = r(this.adapter, this), 
            this.update = r(this.update, this), this.initialize = r(this.initialize, this), 
            this.parse = r(this.parse, this), this.parse(), this.initialize();
        }
        return t.prototype.parse = function() {
            var t, i, n, r, o, a;
            return t = function() {
                var e, t;
                e = this.view.adapters, t = [];
                for (i in e) (o = e[i]) && t.push(i);
                return t;
            }.call(this), a = this.keypath[0], s.call(t, a) >= 0 ? (r = this.keypath[0], n = this.keypath.substr(1)) : (r = this.view.config.rootInterface, 
            n = this.keypath), this.tokens = e.KeypathParser.parse(n, t, r), this.key = this.tokens.pop();
        }, t.prototype.initialize = function() {
            if (this.objectPath = [], this.target = this.realize(), null != this.target) return this.set(!0, this.key, this.target, this.callback);
        }, t.prototype.update = function() {
            var e, t;
            if ((e = this.realize()) !== this.target && (null != this.target && this.set(!1, this.key, this.target, this.callback), 
            null != e && this.set(!0, this.key, e, this.callback), t = this.value(), this.target = e, 
            this.value() !== t)) return this.callback();
        }, t.prototype.adapter = function(e) {
            return this.view.adapters[e.interface];
        }, t.prototype.set = function(e, t, i, n) {
            var s;
            return s = e ? "subscribe" : "unsubscribe", this.adapter(t)[s](i, t.path, n);
        }, t.prototype.read = function(e, t) {
            return this.adapter(e).read(t, e.path);
        }, t.prototype.publish = function(e) {
            if (null != this.target) return this.adapter(this.key).publish(this.target, this.key.path, e);
        }, t.prototype.value = function() {
            if (null != this.target) return this.read(this.key, this.target);
        }, t.prototype.realize = function() {
            var e, t, i, n, s, r, o, a;
            for (e = this.model, s = null, t = r = 0, o = (a = this.tokens).length; r < o; t = ++r) n = a[t], 
            null != e ? (null != this.objectPath[t] ? e !== (i = this.objectPath[t]) && (this.set(!1, n, i, this.update), 
            this.set(!0, n, e, this.update), this.objectPath[t] = e) : (this.set(!0, n, e, this.update), 
            this.objectPath[t] = e), e = this.read(n, e)) : (null == s && (s = t), (i = this.objectPath[t]) && this.set(!1, n, i, this.update));
            return null != s && this.objectPath.splice(s), e;
        }, t.prototype.unobserve = function() {
            var e, t, i, n, s, r;
            for (e = n = 0, s = (r = this.tokens).length; n < s; e = ++n) i = r[e], (t = this.objectPath[e]) && this.set(!1, i, t, this.update);
            if (null != this.target) return this.set(!1, this.key, this.target, this.callback);
        }, t;
    }(), e.View = function() {
        function t(t, i, n) {
            var s, o, a, l, h, c, u, p, d;
            for (this.els = t, this.models = i, this.options = null != n ? n : {}, this.update = r(this.update, this), 
            this.publish = r(this.publish, this), this.sync = r(this.sync, this), this.unbind = r(this.unbind, this), 
            this.bind = r(this.bind, this), this.select = r(this.select, this), this.build = r(this.build, this), 
            this.componentRegExp = r(this.componentRegExp, this), this.bindingRegExp = r(this.bindingRegExp, this), 
            this.els.jquery || this.els instanceof Array || (this.els = [ this.els ]), h = 0, 
            c = (u = [ "config", "binders", "formatters", "adapters" ]).length; h < c; h++) {
                if (o = u[h], this[o] = {}, this.options[o]) {
                    p = this.options[o];
                    for (s in p) a = p[s], this[o][s] = a;
                }
                d = e[o];
                for (s in d) a = d[s], null == (l = this[o])[s] && (l[s] = a);
            }
            this.build();
        }
        return t.prototype.bindingRegExp = function() {
            return new RegExp("^" + this.config.prefix + "-");
        }, t.prototype.componentRegExp = function() {
            return new RegExp("^" + this.config.prefix.toUpperCase() + "-");
        }, t.prototype.build = function() {
            var t, i, n, r, o, a, l, h, c;
            for (this.bindings = [], a = [], t = this.bindingRegExp(), n = this.componentRegExp(), 
            i = function(t) {
                return function(i, n, s, r) {
                    var o, a, l, h, c, u, p;
                    return c = {}, p = function() {
                        var e, t, i, n;
                        for (n = [], e = 0, t = (i = r.split("|")).length; e < t; e++) u = i[e], n.push(u.trim());
                        return n;
                    }(), o = function() {
                        var e, t, i, n;
                        for (n = [], e = 0, t = (i = p.shift().split("<")).length; e < t; e++) a = i[e], 
                        n.push(a.trim());
                        return n;
                    }(), h = o.shift(), c.formatters = p, (l = o.shift()) && (c.dependencies = l.split(/\s+/)), 
                    t.bindings.push(new e[i](t, n, s, h, c));
                };
            }(this), o = function(r) {
                return function(l) {
                    var h, c, u, p, d, f, m, g, y, v, L, w, b, C, O, S, x, E, A, _, F, N, T, M, k, D, P, R, I;
                    if (s.call(a, l) < 0) {
                        if (3 === l.nodeType) {
                            if (g = e.TextTemplateParser, (d = r.config.templateDelimiters) && (L = g.parse(l.data, d)).length && (1 !== L.length || L[0].type !== g.types.text)) {
                                for (C = 0, E = L.length; C < E; C++) v = L[C], y = document.createTextNode(v.value), 
                                l.parentNode.insertBefore(y, l), 1 === v.type && i("TextBinding", y, null, v.value);
                                l.parentNode.removeChild(l);
                            }
                        } else if (n.test(l.tagName)) w = l.tagName.replace(n, "").toLowerCase(), r.bindings.push(new e.ComponentBinding(r, l, w)); else if (null != l.attributes) {
                            for (O = 0, A = (M = l.attributes).length; O < A; O++) if (h = M[O], t.test(h.name)) {
                                if (w = h.name.replace(t, ""), !(u = r.binders[w])) {
                                    k = r.binders;
                                    for (f in k) b = k[f], "*" !== f && -1 !== f.indexOf("*") && new RegExp("^" + f.replace("*", ".+") + "$").test(w) && (u = b);
                                }
                                if (u || (u = r.binders["*"]), u.block) {
                                    for (S = 0, _ = (D = l.childNodes).length; S < _; S++) m = D[S], a.push(m);
                                    c = [ h ];
                                }
                            }
                            for (x = 0, F = (P = c || l.attributes).length; x < F; x++) h = P[x], t.test(h.name) && (w = h.name.replace(t, ""), 
                            i("Binding", l, w, h.value));
                        }
                        for (R = function() {
                            var e, t, i, n;
                            for (n = [], t = 0, e = (i = l.childNodes).length; t < e; t++) m = i[t], n.push(m);
                            return n;
                        }(), I = [], T = 0, N = R.length; T < N; T++) p = R[T], I.push(o(p));
                        return I;
                    }
                };
            }(this), l = 0, h = (c = this.els).length; l < h; l++) r = c[l], o(r);
        }, t.prototype.select = function(e) {
            var t, i, n, s, r;
            for (r = [], i = 0, n = (s = this.bindings).length; i < n; i++) e(t = s[i]) && r.push(t);
            return r;
        }, t.prototype.bind = function() {
            var e, t, i, n, s;
            for (s = [], t = 0, i = (n = this.bindings).length; t < i; t++) e = n[t], s.push(e.bind());
            return s;
        }, t.prototype.unbind = function() {
            var e, t, i, n, s;
            for (s = [], t = 0, i = (n = this.bindings).length; t < i; t++) e = n[t], s.push(e.unbind());
            return s;
        }, t.prototype.sync = function() {
            var e, t, i, n, s;
            for (s = [], t = 0, i = (n = this.bindings).length; t < i; t++) e = n[t], s.push(e.sync());
            return s;
        }, t.prototype.publish = function() {
            var e, t, i, n, s;
            for (s = [], t = 0, i = (n = this.select(function(e) {
                return e.binder.publishes;
            })).length; t < i; t++) e = n[t], s.push(e.publish());
            return s;
        }, t.prototype.update = function(e) {
            var t, i, n, s, r, o, a;
            null == e && (e = {});
            for (i in e) n = e[i], this.models[i] = n;
            for (a = [], s = 0, r = (o = this.bindings).length; s < r; s++) t = o[s], a.push(t.update(e));
            return a;
        }, t;
    }(), e.Binding = function() {
        function t(e, t, i, n, s) {
            this.view = e, this.el = t, this.type = i, this.keypath = n, this.options = null != s ? s : {}, 
            this.update = r(this.update, this), this.unbind = r(this.unbind, this), this.bind = r(this.bind, this), 
            this.publish = r(this.publish, this), this.sync = r(this.sync, this), this.set = r(this.set, this), 
            this.eventHandler = r(this.eventHandler, this), this.formattedValue = r(this.formattedValue, this), 
            this.setBinder = r(this.setBinder, this), this.formatters = this.options.formatters || [], 
            this.dependencies = [], this.model = void 0, this.setBinder();
        }
        return t.prototype.setBinder = function() {
            var e, t, i;
            if (!(this.binder = this.view.binders[this.type])) {
                i = this.view.binders;
                for (e in i) t = i[e], "*" !== e && -1 !== e.indexOf("*") && new RegExp("^" + e.replace("*", ".+") + "$").test(this.type) && (this.binder = t, 
                this.args = new RegExp("^" + e.replace("*", "(.+)") + "$").exec(this.type), this.args.shift());
            }
            if (this.binder || (this.binder = this.view.binders["*"]), this.binder instanceof Function) return this.binder = {
                "routine": this.binder
            };
        }, t.prototype.formattedValue = function(e) {
            var t, i, n, s, r, a;
            for (s = 0, r = (a = this.formatters).length; s < r; s++) n = (t = (i = a[s]).split(/\s+/)).shift(), 
            (null != (i = this.view.formatters[n]) ? i.read : void 0) instanceof Function ? e = i.read.apply(i, [ e ].concat(o.call(t))) : i instanceof Function && (e = i.apply(null, [ e ].concat(o.call(t))));
            return e;
        }, t.prototype.eventHandler = function(e) {
            var t, i;
            return i = (t = this).view.config.handler, function(n) {
                return i.call(e, this, n, t);
            };
        }, t.prototype.set = function(e) {
            var t;
            return e = e instanceof Function && !this.binder.function ? this.formattedValue(e.call(this.model)) : this.formattedValue(e), 
            null != (t = this.binder.routine) ? t.call(this, this.el, e) : void 0;
        }, t.prototype.sync = function() {
            var t, i, n, s, r, o, a, l, h;
            if (this.model !== this.observer.target) {
                for (n = 0, r = (a = this.dependencies).length; n < r; n++) (i = a[n]).unobserve();
                if (this.dependencies = [], null != (this.model = this.observer.target) && (null != (l = this.options.dependencies) ? l.length : void 0)) for (s = 0, 
                o = (h = this.options.dependencies).length; s < o; s++) t = h[s], i = new e.Observer(this.view, this.model, t, this.sync), 
                this.dependencies.push(i);
            }
            return this.set(this.observer.value());
        }, t.prototype.publish = function() {
            var t, i, n, s, r, a, l, h;
            for (n = e.Util.getInputValue(this.el), s = 0, r = (a = this.formatters.slice(0).reverse()).length; s < r; s++) i = (t = a[s].split(/\s+/)).shift(), 
            (null != (l = this.view.formatters[i]) ? l.publish : void 0) && (n = (h = this.view.formatters[i]).publish.apply(h, [ n ].concat(o.call(t))));
            return this.observer.publish(n);
        }, t.prototype.bind = function() {
            var t, i, n, s, r, o, a;
            if (null != (r = this.binder.bind) && r.call(this, this.el), this.observer = new e.Observer(this.view, this.view.models, this.keypath, this.sync), 
            this.model = this.observer.target, null != this.model && (null != (o = this.options.dependencies) ? o.length : void 0)) for (n = 0, 
            s = (a = this.options.dependencies).length; n < s; n++) t = a[n], i = new e.Observer(this.view, this.model, t, this.sync), 
            this.dependencies.push(i);
            if (this.view.config.preloadData) return this.sync();
        }, t.prototype.unbind = function() {
            var e, t, i, n;
            for (null != (i = this.binder.unbind) && i.call(this, this.el), this.observer.unobserve(), 
            e = 0, t = (n = this.dependencies).length; e < t; e++) n[e].unobserve();
            return this.dependencies = [];
        }, t.prototype.update = function(e) {
            var t;
            return null == e && (e = {}), this.model = this.observer.target, this.unbind(), 
            null != (t = this.binder.update) && t.call(this, e), this.bind();
        }, t;
    }(), e.ComponentBinding = function(t) {
        function i(t, i, n) {
            var o, a, l, h, c;
            for (this.view = t, this.el = i, this.type = n, this.unbind = r(this.unbind, this), 
            this.bind = r(this.bind, this), this.update = r(this.update, this), this.locals = r(this.locals, this), 
            this.component = e.components[this.type], this.attributes = {}, this.inflections = {}, 
            a = 0, l = (h = this.el.attributes || []).length; a < l; a++) c = (o = h[a]).name, 
            s.call(this.component.attributes, c) >= 0 ? this.attributes[o.name] = o.value : this.inflections[o.name] = o.value;
        }
        return l(i, t), i.prototype.sync = function() {}, i.prototype.locals = function(e) {
            var t, i, n, s, r, o, a, l;
            null == e && (e = this.view.models), s = {}, a = this.inflections;
            for (t in a) for (r = 0, o = (l = a[t].split(".")).length; r < o; r++) n = l[r], 
            s[t] = (s[t] || e)[n];
            for (t in e) i = e[t], null == s[t] && (s[t] = i);
            return s;
        }, i.prototype.update = function(e) {
            var t;
            return null != (t = this.componentView) ? t.update(this.locals(e)) : void 0;
        }, i.prototype.bind = function() {
            var t, i;
            return null != this.componentView ? null != (i = this.componentView) ? i.bind() : void 0 : (t = this.component.build.call(this.attributes), 
            (this.componentView = new e.View(t, this.locals(), this.view.options)).bind(), this.el.parentNode.replaceChild(t, this.el));
        }, i.prototype.unbind = function() {
            var e;
            return null != (e = this.componentView) ? e.unbind() : void 0;
        }, i;
    }(e.Binding), e.TextBinding = function(e) {
        function t(e, t, i, n, s) {
            this.view = e, this.el = t, this.type = i, this.keypath = n, this.options = null != s ? s : {}, 
            this.sync = r(this.sync, this), this.formatters = this.options.formatters || [], 
            this.dependencies = [];
        }
        return l(t, e), t.prototype.binder = {
            "routine": function(e, t) {
                return e.data = null != t ? t : "";
            }
        }, t.prototype.sync = function() {
            return t.__super__.sync.apply(this, arguments);
        }, t;
    }(e.Binding), e.adapters["."] = {
        "id": "_rv",
        "counter": 0,
        "weakmap": {},
        "weakReference": function(e) {
            var t;
            return e.hasOwnProperty(this.id) || (t = this.counter++, this.weakmap[t] = {
                "callbacks": {}
            }, Object.defineProperty(e, this.id, {
                "value": t
            })), this.weakmap[e[this.id]];
        },
        "stubFunction": function(e, t) {
            var i, n, s;
            return n = e[t], i = this.weakReference(e), s = this.weakmap, e[t] = function() {
                var t, r, o, a, l, h, c, u, p;
                o = n.apply(e, arguments), h = i.pointers;
                for (r in h) for (t = h[r], a = 0, l = (p = null != (c = null != (u = s[r]) ? u.callbacks[t] : void 0) ? c : []).length; a < l; a++) (0, 
                p[a])();
                return o;
            };
        },
        "observeMutations": function(e, t, i) {
            var n, r, o, a, l, h;
            if (Array.isArray(e)) {
                if (null == (o = this.weakReference(e)).pointers) for (o.pointers = {}, l = 0, h = (r = [ "push", "pop", "shift", "unshift", "sort", "reverse", "splice" ]).length; l < h; l++) n = r[l], 
                this.stubFunction(e, n);
                if (null == (a = o.pointers)[t] && (a[t] = []), s.call(o.pointers[t], i) < 0) return o.pointers[t].push(i);
            }
        },
        "unobserveMutations": function(e, t, i) {
            var n, s, r;
            if (Array.isArray(e && null != e[this.id]) && (s = null != (r = this.weakReference(e).pointers) ? r[t] : void 0) && (n = s.indexOf(i)) >= 0) return s.splice(n, 1);
        },
        "subscribe": function(e, t, i) {
            var n, r;
            return null == (n = this.weakReference(e).callbacks)[t] && (n[t] = [], r = e[t], 
            Object.defineProperty(e, t, {
                "enumerable": !0,
                "get": function() {
                    return r;
                },
                "set": function(o) {
                    return function(a) {
                        var l, h, c;
                        if (a !== r) {
                            for (r = a, l = 0, h = (c = n[t].slice()).length; l < h; l++) i = c[l], s.call(n[t], i) >= 0 && i();
                            return o.observeMutations(a, e[o.id], t);
                        }
                    };
                }(this)
            })), s.call(n[t], i) < 0 && n[t].push(i), this.observeMutations(e[t], e[this.id], t);
        },
        "unsubscribe": function(e, t, i) {
            var n, s;
            return n = this.weakmap[e[this.id]].callbacks[t], (s = n.indexOf(i)) >= 0 && n.splice(s, 1), 
            this.unobserveMutations(e[t], e[this.id], t);
        },
        "read": function(e, t) {
            return e[t];
        },
        "publish": function(e, t, i) {
            return e[t] = i;
        }
    }, e.binders.text = function(e, t) {
        return null != e.textContent ? e.textContent = null != t ? t : "" : e.innerText = null != t ? t : "";
    }, e.binders.html = function(e, t) {
        return e.innerHTML = null != t ? t : "";
    }, e.binders.show = function(e, t) {
        return e.style.display = t ? "" : "none";
    }, e.binders.hide = function(e, t) {
        return e.style.display = t ? "none" : "";
    }, e.binders.enabled = function(e, t) {
        return e.disabled = !t;
    }, e.binders.disabled = function(e, t) {
        return e.disabled = !!t;
    }, e.binders.checked = {
        "publishes": !0,
        "bind": function(t) {
            return e.Util.bindEvent(t, "change", this.publish);
        },
        "unbind": function(t) {
            return e.Util.unbindEvent(t, "change", this.publish);
        },
        "routine": function(e, t) {
            var i;
            return "radio" === e.type ? e.checked = (null != (i = e.value) ? i.toString() : void 0) === (null != t ? t.toString() : void 0) : e.checked = !!t;
        }
    }, e.binders.unchecked = {
        "publishes": !0,
        "bind": function(t) {
            return e.Util.bindEvent(t, "change", this.publish);
        },
        "unbind": function(t) {
            return e.Util.unbindEvent(t, "change", this.publish);
        },
        "routine": function(e, t) {
            var i;
            return "radio" === e.type ? e.checked = (null != (i = e.value) ? i.toString() : void 0) !== (null != t ? t.toString() : void 0) : e.checked = !t;
        }
    }, e.binders.value = {
        "publishes": !0,
        "bind": function(t) {
            return e.Util.bindEvent(t, "change", this.publish);
        },
        "unbind": function(t) {
            return e.Util.unbindEvent(t, "change", this.publish);
        },
        "routine": function(e, t) {
            var i, n, r, o, a, l, h;
            if (null != window.jQuery) {
                if (e = jQuery(e), (null != t ? t.toString() : void 0) !== (null != (o = e.val()) ? o.toString() : void 0)) return e.val(null != t ? t : "");
            } else if ("select-multiple" === e.type) {
                if (null != t) {
                    for (h = [], n = 0, r = e.length; n < r; n++) i = e[n], h.push(i.selected = (a = i.value, 
                    s.call(t, a) >= 0));
                    return h;
                }
            } else if ((null != t ? t.toString() : void 0) !== (null != (l = e.value) ? l.toString() : void 0)) return e.value = null != t ? t : "";
        }
    }, e.binders.if = {
        "block": !0,
        "bind": function(e) {
            var t, i;
            if (null == this.marker) return t = [ this.view.config.prefix, this.type ].join("-").replace("--", "-"), 
            i = e.getAttribute(t), this.marker = document.createComment(" rivets: " + this.type + " " + i + " "), 
            this.bound = !1, e.removeAttribute(t), e.parentNode.insertBefore(this.marker, e), 
            e.parentNode.removeChild(e);
        },
        "unbind": function() {
            var e;
            return null != (e = this.nested) ? e.unbind() : void 0;
        },
        "routine": function(t, i) {
            var n, s, r, o, a;
            if (!!i == !this.bound) {
                if (i) {
                    r = {}, a = this.view.models;
                    for (n in a) s = a[n], r[n] = s;
                    return o = {
                        "binders": this.view.options.binders,
                        "formatters": this.view.options.formatters,
                        "adapters": this.view.options.adapters,
                        "config": this.view.options.config
                    }, (this.nested || (this.nested = new e.View(t, r, o))).bind(), this.marker.parentNode.insertBefore(t, this.marker.nextSibling), 
                    this.bound = !0;
                }
                return t.parentNode.removeChild(t), this.nested.unbind(), this.bound = !1;
            }
        },
        "update": function(e) {
            var t;
            return null != (t = this.nested) ? t.update(e) : void 0;
        }
    }, e.binders.unless = {
        "block": !0,
        "bind": function(t) {
            return e.binders.if.bind.call(this, t);
        },
        "unbind": function() {
            return e.binders.if.unbind.call(this);
        },
        "routine": function(t, i) {
            return e.binders.if.routine.call(this, t, !i);
        },
        "update": function(t) {
            return e.binders.if.update.call(this, t);
        }
    }, e.binders["on-*"] = {
        "function": !0,
        "unbind": function(t) {
            if (this.handler) return e.Util.unbindEvent(t, this.args[0], this.handler);
        },
        "routine": function(t, i) {
            return this.handler && e.Util.unbindEvent(t, this.args[0], this.handler), e.Util.bindEvent(t, this.args[0], this.handler = this.eventHandler(i));
        }
    }, e.binders["each-*"] = {
        "block": !0,
        "bind": function(e) {
            var t, i, n, s;
            if (null == this.marker) t = [ this.view.config.prefix, this.type ].join("-").replace("--", "-"), 
            this.marker = document.createComment(" rivets: " + this.type + " "), this.iterated = [], 
            e.removeAttribute(t), e.parentNode.insertBefore(this.marker, e), e.parentNode.removeChild(e); else for (i = 0, 
            n = (s = this.iterated).length; i < n; i++) s[i].bind();
        },
        "unbind": function(e) {
            var t, i, n, s, r;
            if (null != this.iterated) {
                for (r = [], i = 0, n = (s = this.iterated).length; i < n; i++) t = s[i], r.push(t.unbind());
                return r;
            }
        },
        "routine": function(t, i) {
            var n, s, r, o, a, l, h, c, u, p, d, f, m, g, y, v, L, w, b, C, O, S, x;
            if (h = this.args[0], i = i || [], this.iterated.length > i.length) for (m = 0, 
            v = (b = Array(this.iterated.length - i.length)).length; m < v; m++) b[m], (f = this.iterated.pop()).unbind(), 
            this.marker.parentNode.removeChild(f.els[0]);
            for (r = g = 0, L = i.length; g < L; r = ++g) if (l = i[r], s = {
                "index": r
            }, s[h] = l, null == this.iterated[r]) {
                C = this.view.models;
                for (a in C) l = C[a], null == s[a] && (s[a] = l);
                u = this.iterated.length ? this.iterated[this.iterated.length - 1].els[0] : this.marker, 
                c = {
                    "binders": this.view.options.binders,
                    "formatters": this.view.options.formatters,
                    "adapters": this.view.options.adapters,
                    "config": {}
                }, O = this.view.options.config;
                for (o in O) d = O[o], c.config[o] = d;
                c.config.preloadData = !0, p = t.cloneNode(!0), (f = new e.View(p, s, c)).bind(), 
                this.iterated.push(f), this.marker.parentNode.insertBefore(p, u.nextSibling);
            } else this.iterated[r].models[h] !== l && this.iterated[r].update(s);
            if ("OPTION" === t.nodeName) {
                for (x = [], y = 0, w = (S = this.view.bindings).length; y < w; y++) (n = S[y]).el === this.marker.parentNode && "value" === n.type ? x.push(n.sync()) : x.push(void 0);
                return x;
            }
        },
        "update": function(e) {
            var t, i, n, s, r, o, a, l;
            t = {};
            for (i in e) n = e[i], i !== this.args[0] && (t[i] = n);
            for (l = [], r = 0, o = (a = this.iterated).length; r < o; r++) s = a[r], l.push(s.update(t));
            return l;
        }
    }, e.binders["class-*"] = function(e, t) {
        var i;
        if (i = " " + e.className + " ", !t == (-1 !== i.indexOf(" " + this.args[0] + " "))) return e.className = t ? e.className + " " + this.args[0] : i.replace(" " + this.args[0] + " ", " ").trim();
    }, e.binders["*"] = function(e, t) {
        return null != t ? e.setAttribute(this.type, t) : e.removeAttribute(this.type);
    }, e.factory = function(t) {
        return t._ = e, t.binders = e.binders, t.components = e.components, t.formatters = e.formatters, 
        t.adapters = e.adapters, t.config = e.config, t.configure = function(t) {
            var i, n;
            null == t && (t = {});
            for (i in t) n = t[i], e.config[i] = n;
        }, t.bind = function(t, i, n) {
            var s;
            return null == i && (i = {}), null == n && (n = {}), (s = new e.View(t, i, n)).bind(), 
            s;
        };
    }, "object" == typeof exports ? e.factory(exports) : "function" == typeof define && define.amd ? define([ "exports" ], function(t) {
        return e.factory(this.rivets = t), t;
    }) : e.factory(this.rivets = {});
}.call(this), function(e) {
    "function" == typeof define && define.amd ? define([ "backbone", "underscore" ], e) : "object" == typeof exports ? module.exports = e(require("backbone"), require("underscore")) : e(window.Backbone, window._);
}(function(e, t) {
    var i = e.Router.prototype.route, n = function() {};
    t.extend(e.Router.prototype, {
        "before": n,
        "after": n,
        "route": function(e, s, r) {
            r || (r = this[s]);
            var o = t.bind(function() {
                var i = [ e, t.toArray(arguments) ];
                if (!1 !== (t.isFunction(this.before) ? this.before : void 0 !== this.before[e] ? this.before[e] : n).apply(this, i)) {
                    r && r.apply(this, arguments);
                    (t.isFunction(this.after) ? this.after : void 0 !== this.after[e] ? this.after[e] : n).apply(this, i);
                }
            }, this);
            return i.call(this, e, s, o);
        }
    });
}), function() {
    var e = {};
    e.PRECISION = 3, e.DENSITY = 1, e.convert = function(t) {
        if (_.isUndefined(t) || _.isEmpty(t.trim())) throw new Error("Empty XML.");
        var i, n = [];
        t = t.replace(/\r\n|\r|\n|\t/g, "");
        try {
            i = $($.parseXML(t));
        } catch (e) {
            throw new Error("Invalid XML.");
        }
        return i.find("polygon").each(function(t, i) {
            n.push(e.polygon($(i).attr("points")));
        }), i.find("polyline").each(function(t, i) {
            n.push(e.polyline($(i).attr("points")));
        }), i.find("line").each(function(t, i) {
            n.push(e.line(parseFloat($(i).attr("x1")), parseFloat($(i).attr("y1")), parseFloat($(i).attr("x2")), parseFloat($(i).attr("y2"))));
        }), i.find("rect").each(function(t, i) {
            n.push(e.rect(parseFloat($(i).attr("x")), parseFloat($(i).attr("y")), parseFloat($(i).attr("width")), parseFloat($(i).attr("height"))));
        }), i.find("circle").each(function(t, i) {
            n.push(e.circle(parseFloat($(i).attr("cx")), parseFloat($(i).attr("cy")), parseFloat($(i).attr("r"))));
        }), i.find("ellipse").each(function(t, i) {
            n.push(e.ellipse(parseFloat($(i).attr("cx")), parseFloat($(i).attr("cy")), parseFloat($(i).attr("rx")), parseFloat($(i).attr("ry"))));
        }), i.find("path").each(function(t, i) {
            n.push(e.path($(i).attr("d")));
        }), "GEOMETRYCOLLECTION(" + n.join(",") + ")";
    }, e.line = function(e, t, i, n) {
        return "LINESTRING(" + e + " " + -t + "," + i + " " + -n + ")";
    }, e.polyline = function(e) {
        return "LINESTRING(" + _.map(e.trim().split(" "), function(e) {
            return e = e.split(","), e[1] = -e[1], e.join(" ");
        }).join() + ")";
    }, e.polygon = function(e) {
        var t = _.map(e.trim().split(" "), function(e) {
            return e = e.split(","), e[1] = -e[1], e.join(" ");
        });
        return t.push(t[0]), "POLYGON((" + t.join() + "))";
    }, e.rect = function(e, t, i, n) {
        var s = [];
        return _.isNumber(e) || (e = 0), _.isNumber(t) || (t = 0), s.push(String(e) + " " + String(-t)), 
        s.push(String(e + i) + " " + String(-t)), s.push(String(e + i) + " " + String(-t - n)), 
        s.push(String(e) + " " + String(-t - n)), s.push(String(e) + " " + String(-t)), 
        "POLYGON((" + s.join() + "))";
    }, e.circle = function(t, i, s) {
        var r = [], o = 2 * Math.PI * s, a = Math.round(o * e.DENSITY), l = 360 / a;
        return _(a).times(function(e) {
            var o = l * e * (Math.PI / 180), a = n(t + s * Math.cos(o)), h = n(i + s * Math.sin(o));
            r.push(String(a) + " " + String(-h));
        }), r.push(r[0]), "POLYGON((" + r.join() + "))";
    }, e.ellipse = function(t, i, s, r) {
        var o = [], a = 2 * Math.PI * Math.sqrt((Math.pow(s, 2) + Math.pow(r, 2)) / 2), l = Math.round(a * e.DENSITY), h = 360 / l;
        return _(l).times(function(e) {
            var a = h * e * (Math.PI / 180), l = n(t + s * Math.cos(a)), c = n(i + r * Math.sin(a));
            o.push(String(l) + " " + String(-c));
        }), o.push(o[0]), "POLYGON((" + o.join() + "))";
    }, e.path = function(e) {
        var n = _.map(e.trim().match(/[^z|Z]+[z|Z]/g), function(e) {
            return t(e.trim() + "z");
        });
        if (_.isEmpty(n)) {
            var s = t(e);
            return "LINESTRING(" + i(s).join() + ")";
        }
        var r = [];
        return _.each(n, function(e) {
            r.push("(" + i(e).join() + ")");
        }), "POLYGON(" + r.join() + ")";
    };
    var t = function(e) {
        var t = document.createElementNS("http://www.w3.org/2000/svg", "path");
        return t.setAttributeNS(null, "d", e), t;
    }, i = function(t, i) {
        i = i || !1;
        var s = [], r = t.getTotalLength(), o = Math.round(r * e.DENSITY);
        return _(o + 1).times(function(e) {
            var i = t.getPointAtLength(r * e / o);
            s.push(String(n(i.x)) + " " + String(n(-i.y)));
        }), i && s.push(s[0]), s;
    }, n = function(t) {
        var i = Math.pow(10, e.PRECISION);
        return Math.round(t * i) / i;
    };
    this.SVGtoWKT = e;
}.call(this), $(function() {
    $.fn.extend({
        "draggableInput": function(e) {
            var t = {
                "type": "integer",
                "min": 0,
                "max": -1,
                "scrollPrecision": .2,
                "precision": 2
            }, i = $.extend(t, e);
            return this.each(function() {
                if ("input" != this.nodeName.toLowerCase()) throw new Error("The node is not an <input> tag.");
                var e, t = $(this);
                "integer" === i.type && (e = parseInt), "float" === i.type && (e = parseFloat);
                var n = e(t.val()), s = (parseInt(i.precision), e(i.max)), r = e(i.min), o = function(t) {
                    return e(Math.min(s, Math.max(r, t)));
                }, a = function(e) {
                    return "float" === i.type && (e = e.toFixed(i.precision)), e;
                };
                $(this).mousedown(function(s) {
                    var r = {
                        "x": s.pageX,
                        "y": s.pageY
                    }, l = function(e) {
                        var s = e.pageY - r.y, l = n - s * i.scrollPrecision;
                        l = o(l), l = a(l), t.val(l).trigger("change");
                    };
                    $(document).mousemove(l), $(document).one("mouseup", function(i) {
                        $(document).off("mousemove", l), n = e(t.val());
                    });
                }), $(this).blur(function(e) {
                    var t = $(this).val(), i = o(t);
                    t != (i = a(i)) && $(this).val(i).trigger("change");
                });
            });
        }
    });
}), function(e) {
    e([ "jquery" ], function(e) {
        return function() {
            function t(t) {
                return t || (t = i()), container = e("#" + t.containerId), container.children().length ? container : (container = e("<div/>").attr("id", t.containerId).addClass(t.positionClass), 
                container.appendTo(e(t.target)), s = container, container);
            }
            function i() {
                return e.extend({}, r, a.options);
            }
            function n(e) {
                s || (s = t()), e.is(":visible") || (e.remove(), e = null, 0 === s.children().length && s.remove());
            }
            var s, r = {
                "tapToDismiss": !0,
                "toastClass": "toast",
                "containerId": "toast-container",
                "debug": !1,
                "fadeIn": 300,
                "fadeOut": 1e3,
                "extendedTimeOut": 1e3,
                "iconClasses": {
                    "error": "toast-error",
                    "info": "toast-info",
                    "success": "toast-success",
                    "warning": "toast-warning"
                },
                "iconClass": "toast-info",
                "positionClass": "toast-top-right",
                "timeOut": 5e3,
                "titleClass": "toast-title",
                "messageClass": "toast-message",
                "target": "body"
            }, o = function(s) {
                function r() {
                    if (!(e(":focus", c).length > 0)) return c.fadeOut(o.fadeOut, function() {
                        n(c);
                    });
                }
                var o = i(), a = s.iconClass || o.iconClass;
                void 0 !== s.optionsOverride && (o = e.extend(o, s.optionsOverride), a = s.optionsOverride.iconClass || a);
                var l = null, h = t(o), c = e("<div/>"), u = e("<div/>"), p = e("<div/>"), d = {
                    "options": o,
                    "map": s
                };
                return s.iconClass && c.addClass(o.toastClass).addClass(a), s.title && (u.append(s.title).addClass(o.titleClass), 
                c.append(u)), s.message && (p.append(s.message).addClass(o.messageClass), c.append(p)), 
                c.hide(), h.prepend(c), c.fadeIn(o.fadeIn), o.timeOut > 0 && (l = setTimeout(r, o.timeOut)), 
                c.hover(function() {
                    clearTimeout(l), c.stop(!0, !0).fadeIn(o.fadeIn);
                }, function() {
                    (o.timeOut > 0 || o.extendedTimeOut > 0) && (l = setTimeout(r, o.extendedTimeOut));
                }), !o.onclick && o.tapToDismiss && c.click(r), o.onclick && c.click(function() {
                    o.onclick() && r();
                }), o.debug && console && console.log(d), c;
            }, a = {
                "clear": function(r) {
                    var o = i();
                    s || t(o), r && 0 === e(":focus", r).length ? r.fadeOut(o.fadeOut, function() {
                        n(r);
                    }) : s.children().length && s.fadeOut(o.fadeOut, function() {
                        s.remove();
                    });
                },
                "error": function(e, t, n) {
                    return o({
                        "iconClass": i().iconClasses.error,
                        "message": e,
                        "optionsOverride": n,
                        "title": t
                    });
                },
                "getContainer": t,
                "info": function(e, t, n) {
                    return o({
                        "iconClass": i().iconClasses.info,
                        "message": e,
                        "optionsOverride": n,
                        "title": t
                    });
                },
                "options": {},
                "success": function(e, t, n) {
                    return o({
                        "iconClass": i().iconClasses.success,
                        "message": e,
                        "optionsOverride": n,
                        "title": t
                    });
                },
                "version": "1.2.1",
                "warning": function(e, t, n) {
                    return o({
                        "iconClass": i().iconClasses.warning,
                        "message": e,
                        "optionsOverride": n,
                        "title": t
                    });
                }
            };
            return a;
        }();
    });
}("function" == typeof define && define.amd ? define : function(e, t) {
    "undefined" != typeof module && module.exports ? module.exports = t(require(e[0])) : window.toastr = t(window.jQuery);
}), function(e, t, n) {
    function s(e, t, i, n) {
        for (var s = [], r = 0; r < e.length; r++) {
            var o = e[r];
            if (o) {
                var a = tinycolor(o), l = a.toHsl().l < .5 ? "sp-thumb-el sp-thumb-dark" : "sp-thumb-el sp-thumb-light";
                l += tinycolor.equals(t, o) ? " sp-thumb-active" : "";
                var h = a.toString(n || "rgb"), c = y ? "background-color:" + a.toRgbString() : "filter:" + a.toFilter();
                s.push('<span title="' + h + '" data-color="' + a.toRgbString() + '" class="' + l + '"><span class="sp-thumb-inner" style="' + c + ';" /></span>');
            } else {
                s.push('<span title="No Color Selected" data-color="" style="background-color:transparent;" class="sp-clear-display"></span>');
            }
        }
        return "<div class='sp-cf " + i + "'>" + s.join("") + "</div>";
    }
    function r() {
        for (var e = 0; e < m.length; e++) m[e] && m[e].hide();
    }
    function o(e, i) {
        var n = t.extend({}, f, e);
        return n.callbacks = {
            "move": u(n.move, i),
            "change": u(n.change, i),
            "show": u(n.show, i),
            "hide": u(n.hide, i),
            "beforeShow": u(n.beforeShow, i)
        }, n;
    }
    function a(a, h) {
        function u() {
            if (U.showPaletteOnly && (U.showPalette = !0), U.palette) {
                ae = U.palette.slice(0), le = t.isArray(ae[0]) ? ae : [ ae ], he = {};
                for (var e = 0; e < le.length; e++) for (var i = 0; i < le[e].length; i++) {
                    var n = tinycolor(le[e][i]).toRgbString();
                    he[n] = !0;
                }
            }
            ye.toggleClass("sp-flat", H), ye.toggleClass("sp-input-disabled", !U.showInput), 
            ye.toggleClass("sp-alpha-enabled", U.showAlpha), ye.toggleClass("sp-clear-enabled", We), 
            ye.toggleClass("sp-buttons-disabled", !U.showButtons), ye.toggleClass("sp-palette-disabled", !U.showPalette), 
            ye.toggleClass("sp-palette-only", U.showPaletteOnly), ye.toggleClass("sp-initial-disabled", !U.showInitial), 
            ye.addClass(U.className).addClass(U.containerClassName), z();
        }
        function f() {
            if (G && e.localStorage) {
                try {
                    var i = e.localStorage[G].split(",#");
                    i.length > 1 && (delete e.localStorage[G], t.each(i, function(e, t) {
                        b(t);
                    }));
                } catch (e) {}
                try {
                    ce = e.localStorage[G].split(";");
                } catch (e) {}
            }
        }
        function b(i) {
            if (W) {
                var n = tinycolor(i).toRgbString();
                if (!he[n] && -1 === t.inArray(n, ce)) for (ce.push(n); ce.length > ue; ) ce.shift();
                if (G && e.localStorage) try {
                    e.localStorage[G] = ce.join(";");
                } catch (e) {}
            }
        }
        function C() {
            var e = [];
            if (U.showPalette) for (i = 0; i < ce.length; i++) {
                var t = tinycolor(ce[i]).toRgbString();
                he[t] || e.push(ce[i]);
            }
            return e.reverse().slice(0, U.maxSelectionSize);
        }
        function O() {
            var e = k(), i = t.map(le, function(t, i) {
                return s(t, e, "sp-palette-row sp-palette-row-" + i, U.preferredFormat);
            });
            f(), ce && i.push(s(C(), e, "sp-palette-row sp-palette-row-selection", U.preferredFormat)), 
            Ee.html(i.join(""));
        }
        function S() {
            if (U.showInitial) {
                var e = Be, t = k();
                Ae.html(s([ e, t ], t, "sp-palette-row-initial", U.preferredFormat));
            }
        }
        function x() {
            (Y <= 0 || K <= 0 || Q <= 0) && z(), ye.addClass(pe), de = null, me.trigger("dragstart.spectrum", [ k() ]);
        }
        function E() {
            ye.removeClass(pe), me.trigger("dragstop.spectrum", [ k() ]);
        }
        function A() {
            var e = xe.val();
            if (null !== e && "" !== e || !We) {
                var t = tinycolor(e);
                t.ok ? (M(t), B(!0)) : xe.addClass("sp-validation-error");
            } else M(null), B(!0);
        }
        function _() {
            X ? N() : F();
        }
        function F() {
            var i = t.Event("beforeShow.spectrum");
            X ? z() : (me.trigger(i, [ k() ]), !1 === j.beforeShow(k()) || i.isDefaultPrevented() || (r(), 
            X = !0, t(fe).bind("click.spectrum", N), t(e).bind("resize.spectrum", q), De.addClass("sp-active"), 
            ye.removeClass("sp-hidden"), z(), R(), Be = k(), S(), j.show(Be), me.trigger("show.spectrum", [ Be ])));
        }
        function N(i) {
            i && "click" == i.type && 2 == i.button || X && !H && (X = !1, t(fe).unbind("click.spectrum", N), 
            t(e).unbind("resize.spectrum", q), De.removeClass("sp-active"), ye.addClass("sp-hidden"), 
            !tinycolor.equals(k(), Be) && (Ue && "cancel" !== i ? B(!0) : T()), j.hide(k()), 
            me.trigger("hide.spectrum", [ k() ]));
        }
        function T() {
            M(Be, !0);
        }
        function M(e, t) {
            if (tinycolor.equals(e, k())) R(); else {
                var i, n;
                !e && We ? He = !0 : (He = !1, n = (i = tinycolor(e)).toHsv(), ne = n.h % 360 / 360, 
                se = n.s, re = n.v, oe = n.a), R(), i && i.ok && !t && ($e = ze || i.format);
            }
        }
        function k(e) {
            return e = e || {}, We && He ? null : tinycolor.fromRatio({
                "h": ne,
                "s": se,
                "v": re,
                "a": Math.round(100 * oe) / 100
            }, {
                "format": e.format || $e
            });
        }
        function D() {
            return !xe.hasClass("sp-validation-error");
        }
        function P() {
            R(), j.move(k()), me.trigger("move.spectrum", [ k() ]);
        }
        function R() {
            xe.removeClass("sp-validation-error"), I();
            var e = tinycolor.fromRatio({
                "h": ne,
                "s": 1,
                "v": 1
            });
            ve.css("background-color", e.toHexString());
            var t = $e;
            oe < 1 && (0 !== oe || "name" !== t) && ("hex" !== t && "hex3" !== t && "hex6" !== t && "name" !== t || (t = "rgb"));
            var i = k({
                "format": t
            }), n = "";
            if (Re.removeClass("sp-clear-display"), Re.css("background-color", "transparent"), 
            !i && We) Re.addClass("sp-clear-display"); else {
                var s = i.toHexString(), r = i.toRgbString();
                if (y || 1 === i.alpha ? Re.css("background-color", r) : (Re.css("background-color", "transparent"), 
                Re.css("filter", i.toFilter())), U.showAlpha) {
                    var o = i.toRgb();
                    o.a = 0;
                    var a = tinycolor(o).toRgbString(), l = "linear-gradient(left, " + a + ", " + s + ")";
                    g ? Ce.css("filter", tinycolor(a).toFilter({
                        "gradientType": 1
                    }, s)) : (Ce.css("background", "-webkit-" + l), Ce.css("background", "-moz-" + l), 
                    Ce.css("background", "-ms-" + l), Ce.css("background", "linear-gradient(to right, " + a + ", " + s + ")"));
                }
                n = i.toString(t);
            }
            U.showInput && xe.val(n), U.showPalette && O(), S();
        }
        function I() {
            var e = se, t = re;
            if (We && He) Se.hide(), be.hide(), Le.hide(); else {
                Se.show(), be.show(), Le.show();
                var i = e * K, n = Y - t * Y;
                i = Math.max(-Z, Math.min(K - Z, i - Z)), n = Math.max(-Z, Math.min(Y - Z, n - Z)), 
                Le.css({
                    "top": n + "px",
                    "left": i + "px"
                });
                var s = oe * ee;
                Se.css({
                    "left": s - te / 2 + "px"
                });
                var r = ne * Q;
                be.css({
                    "top": r - ie + "px"
                });
            }
        }
        function B(e) {
            var t = k(), i = "", n = !tinycolor.equals(t, Be);
            t && (i = t.toString($e), b(t)), Te && me.val(i), Be = t, e && n && (j.change(t), 
            me.trigger("change", [ t ]));
        }
        function z() {
            K = ve.width(), Y = ve.height(), Z = Le.height(), J = we.width(), Q = we.height(), 
            ie = be.height(), ee = Oe.width(), te = Se.width(), H || (ye.css("position", "absolute"), 
            ye.offset(l(ye, Pe))), I(), U.showPalette && O(), me.trigger("reflow.spectrum");
        }
        function $() {
            N(), ge = !0, me.attr("disabled", !0), Pe.addClass("sp-disabled");
        }
        var U = o(h, a), H = U.flat, W = U.showSelectionPalette, G = U.localStorageKey, V = U.theme, j = U.callbacks, q = d(z, 10), X = !1, K = 0, Y = 0, Z = 0, Q = 0, J = 0, ee = 0, te = 0, ie = 0, ne = 0, se = 0, re = 0, oe = 1, ae = [], le = [], he = {}, ce = U.selectionPalette.slice(0), ue = U.maxSelectionSize, pe = "sp-dragging", de = null, fe = a.ownerDocument, me = (fe.body, 
        t(a)), ge = !1, ye = t(w, fe).addClass(V), ve = ye.find(".sp-color"), Le = ye.find(".sp-dragger"), we = ye.find(".sp-hue"), be = ye.find(".sp-slider"), Ce = ye.find(".sp-alpha-inner"), Oe = ye.find(".sp-alpha"), Se = ye.find(".sp-alpha-handle"), xe = ye.find(".sp-input"), Ee = ye.find(".sp-palette"), Ae = ye.find(".sp-initial"), _e = ye.find(".sp-cancel"), Fe = ye.find(".sp-clear"), Ne = ye.find(".sp-choose"), Te = me.is("input"), Me = Te && v && "color" === me.attr("type"), ke = Te && !H, De = ke ? t(L).addClass(V).addClass(U.className).addClass(U.replacerClassName) : t([]), Pe = ke ? De : me, Re = De.find(".sp-preview-inner"), Ie = U.color || Te && me.val(), Be = !1, ze = U.preferredFormat, $e = ze, Ue = !U.showButtons || U.clickoutFiresChange, He = !Ie, We = U.allowEmpty && !Me;
        !function() {
            function e(e) {
                return e.data && e.data.ignore ? (M(t(this).data("color")), P()) : (M(t(this).data("color")), 
                P(), B(!0), N()), !1;
            }
            if (g && ye.find("*:not(input)").attr("unselectable", "on"), u(), ke && me.after(De).hide(), 
            We || Fe.hide(), H) me.after(ye).hide(); else {
                var i = "parent" === U.appendTo ? me.parent() : t(U.appendTo);
                1 !== i.length && (i = t("body")), i.append(ye);
            }
            f(), Pe.bind("click.spectrum touchstart.spectrum", function(e) {
                ge || _(), e.stopPropagation(), t(e.target).is("input") || e.preventDefault();
            }), (me.is(":disabled") || !0 === U.disabled) && $(), ye.click(c), xe.change(A), 
            xe.bind("paste", function() {
                setTimeout(A, 1);
            }), xe.keydown(function(e) {
                13 == e.keyCode && A();
            }), _e.text(U.cancelText), _e.bind("click.spectrum", function(e) {
                e.stopPropagation(), e.preventDefault(), N("cancel");
            }), Fe.attr("title", U.clearText), Fe.bind("click.spectrum", function(e) {
                e.stopPropagation(), e.preventDefault(), He = !0, P(), H && B(!0);
            }), Ne.text(U.chooseText), Ne.bind("click.spectrum", function(e) {
                e.stopPropagation(), e.preventDefault(), D() && (B(!0), N());
            }), p(Oe, function(e, t, i) {
                oe = e / ee, He = !1, i.shiftKey && (oe = Math.round(10 * oe) / 10), P();
            }, x, E), p(we, function(e, t) {
                ne = parseFloat(t / Q), He = !1, U.showAlpha || (oe = 1), P();
            }, x, E), p(ve, function(e, t, i) {
                if (i.shiftKey) {
                    if (!de) {
                        var n = se * K, s = Y - re * Y, r = Math.abs(e - n) > Math.abs(t - s);
                        de = r ? "x" : "y";
                    }
                } else de = null;
                var o = !de || "x" === de, a = !de || "y" === de;
                o && (se = parseFloat(e / K)), a && (re = parseFloat((Y - t) / Y)), He = !1, U.showAlpha || (oe = 1), 
                P();
            }, x, E), Ie ? (M(Ie), R(), $e = ze || tinycolor(Ie).format, b(Ie)) : R(), H && F();
            var n = g ? "mousedown.spectrum" : "click.spectrum touchstart.spectrum";
            Ee.delegate(".sp-thumb-el", n, e), Ae.delegate(".sp-thumb-el:nth-child(1)", n, {
                "ignore": !0
            }, e);
        }();
        var Ge = {
            "show": F,
            "hide": N,
            "toggle": _,
            "reflow": z,
            "option": function(e, i) {
                return e === n ? t.extend({}, U) : i === n ? U[e] : (U[e] = i, void u());
            },
            "enable": function() {
                ge = !1, me.attr("disabled", !1), Pe.removeClass("sp-disabled");
            },
            "disable": $,
            "set": function(e) {
                M(e), B();
            },
            "get": k,
            "destroy": function() {
                me.show(), Pe.unbind("click.spectrum touchstart.spectrum"), ye.remove(), De.remove(), 
                m[Ge.id] = null;
            },
            "container": ye
        };
        return Ge.id = m.push(Ge) - 1, Ge;
    }
    function l(e, i) {
        var n = e.outerWidth(), s = e.outerHeight(), r = i.outerHeight(), o = e[0].ownerDocument, a = o.documentElement, l = a.clientWidth + t(o).scrollLeft(), h = a.clientHeight + t(o).scrollTop(), c = i.offset();
        return c.top += r, c.left -= Math.min(c.left, c.left + n > l && l > n ? Math.abs(c.left + n - l) : 0), 
        c.top -= Math.min(c.top, c.top + s > h && h > s ? Math.abs(s + r - 0) : 0), c;
    }
    function h() {}
    function c(e) {
        e.stopPropagation();
    }
    function u(e, t) {
        var i = Array.prototype.slice, n = i.call(arguments, 2);
        return function() {
            return e.apply(t, n.concat(i.call(arguments)));
        };
    }
    function p(i, n, s, r) {
        function o(e) {
            e.stopPropagation && e.stopPropagation(), e.preventDefault && e.preventDefault(), 
            e.returnValue = !1;
        }
        function a(e) {
            if (c) {
                if (g && document.documentMode < 9 && !e.button) return l();
                var t = e.originalEvent.touches, s = t ? t[0].pageX : e.pageX, r = t ? t[0].pageY : e.pageY, a = Math.max(0, Math.min(s - u.left, d)), h = Math.max(0, Math.min(r - u.top, p));
                f && o(e), n.apply(i, [ a, h, e ]);
            }
        }
        function l() {
            c && (t(h).unbind(m), t(h.body).removeClass("sp-dragging"), r.apply(i, arguments)), 
            c = !1;
        }
        n = n || function() {}, s = s || function() {}, r = r || function() {};
        var h = i.ownerDocument || document, c = !1, u = {}, p = 0, d = 0, f = "ontouchstart" in e, m = {};
        m.selectstart = o, m.dragstart = o, m["touchmove mousemove"] = a, m["touchend mouseup"] = l, 
        t(i).bind("touchstart mousedown", function(e) {
            var n = e.which ? 3 == e.which : 2 == e.button;
            e.originalEvent.touches;
            n || c || !1 !== s.apply(i, arguments) && (c = !0, p = t(i).height(), d = t(i).width(), 
            u = t(i).offset(), t(h).bind(m), t(h.body).addClass("sp-dragging"), f || a(e), o(e));
        });
    }
    function d(e, t, i) {
        var n;
        return function() {
            var s = this, r = arguments;
            i && clearTimeout(n), !i && n || (n = setTimeout(function() {
                n = null, e.apply(s, r);
            }, t));
        };
    }
    var f = {
        "beforeShow": h,
        "move": h,
        "change": h,
        "show": h,
        "hide": h,
        "color": !1,
        "flat": !1,
        "showInput": !1,
        "allowEmpty": !1,
        "showButtons": !0,
        "clickoutFiresChange": !1,
        "showInitial": !1,
        "showPalette": !1,
        "showPaletteOnly": !1,
        "showSelectionPalette": !0,
        "localStorageKey": !1,
        "appendTo": "body",
        "maxSelectionSize": 7,
        "cancelText": "cancel",
        "chooseText": "choose",
        "clearText": "Clear Color Selection",
        "preferredFormat": !1,
        "className": "",
        "containerClassName": "",
        "replacerClassName": "",
        "showAlpha": !1,
        "theme": "sp-light",
        "palette": [ [ "#ffffff", "#000000", "#ff0000", "#ff8000", "#ffff00", "#008000", "#0000ff", "#4b0082", "#9400d3" ] ],
        "selectionPalette": [],
        "disabled": !1
    }, m = [], g = !!/msie/i.exec(e.navigator.userAgent), y = function() {
        function e(e, t) {
            return !!~("" + e).indexOf(t);
        }
        var t = document.createElement("div").style;
        return t.cssText = "background-color:rgba(0,0,0,.5)", e(t.backgroundColor, "rgba") || e(t.backgroundColor, "hsla");
    }(), v = function() {
        var e = t("<input type='color' value='!' />")[0];
        return "color" === e.type && "!" !== e.value;
    }(), L = [ "<div class='sp-replacer'>", "<div class='sp-preview'><div class='sp-preview-inner'></div></div>", "<div class='sp-dd'>&#9660;</div>", "</div>" ].join(""), w = function() {
        var e = "";
        if (g) for (var t = 1; t <= 6; t++) e += "<div class='sp-" + t + "'></div>";
        return [ "<div class='sp-container sp-hidden'>", "<div class='sp-palette-container'>", "<div class='sp-palette sp-thumb sp-cf'></div>", "</div>", "<div class='sp-picker-container'>", "<div class='sp-top sp-cf'>", "<div class='sp-fill'></div>", "<div class='sp-top-inner'>", "<div class='sp-color'>", "<div class='sp-sat'>", "<div class='sp-val'>", "<div class='sp-dragger'></div>", "</div>", "</div>", "</div>", "<div class='sp-clear sp-clear-display'>", "</div>", "<div class='sp-hue'>", "<div class='sp-slider'></div>", e, "</div>", "</div>", "<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>", "</div>", "<div class='sp-input-container sp-cf'>", "<input class='sp-input' type='text' spellcheck='false'  />", "</div>", "<div class='sp-initial sp-thumb sp-cf'></div>", "<div class='sp-button-container sp-cf'>", "<a class='sp-cancel' href='#'></a>", "<button type='button' class='sp-choose'></button>", "</div>", "</div>", "</div>" ].join("");
    }();
    t.fn.spectrum = function(e, i) {
        if ("string" == typeof e) {
            var n = this, s = Array.prototype.slice.call(arguments, 1);
            return this.each(function() {
                var i = m[t(this).data("spectrum.id")];
                if (i) {
                    var r = i[e];
                    if (!r) throw new Error("Spectrum: no such method: '" + e + "'");
                    "get" == e ? n = i.get() : "container" == e ? n = i.container : "option" == e ? n = i.option.apply(i, s) : "destroy" == e ? (i.destroy(), 
                    t(this).removeData("spectrum.id")) : r.apply(i, s);
                }
            }), n;
        }
        return this.spectrum("destroy").each(function() {
            var i = a(this, t.extend({}, e, t(this).data()));
            t(this).data("spectrum.id", i.id);
        });
    }, t.fn.spectrum.load = !0, t.fn.spectrum.loadOpts = {}, t.fn.spectrum.draggable = p, 
    t.fn.spectrum.defaults = f, t.spectrum = {}, t.spectrum.localization = {}, t.spectrum.palettes = {}, 
    t.fn.spectrum.processNativeColorInputs = function() {
        v || t("input[type=color]").spectrum({
            "preferredFormat": "hex6"
        });
    }, function() {
        function t(e, n) {
            if (e = e || "", n = n || {}, "object" == typeof e && e.hasOwnProperty("_tc_id")) return e;
            var r = i(e), a = r.r, p = r.g, d = r.b, f = r.a, m = x(100 * f) / 100, g = n.format || r.format;
            return a < 1 && (a = x(a)), p < 1 && (p = x(p)), d < 1 && (d = x(d)), {
                "ok": r.ok,
                "format": g,
                "_tc_id": O++,
                "alpha": f,
                "getAlpha": function() {
                    return f;
                },
                "setAlpha": function(e) {
                    f = c(e), m = x(100 * f) / 100;
                },
                "toHsv": function() {
                    var e = o(a, p, d);
                    return {
                        "h": 360 * e.h,
                        "s": e.s,
                        "v": e.v,
                        "a": f
                    };
                },
                "toHsvString": function() {
                    var e = o(a, p, d), t = x(360 * e.h), i = x(100 * e.s), n = x(100 * e.v);
                    return 1 == f ? "hsv(" + t + ", " + i + "%, " + n + "%)" : "hsva(" + t + ", " + i + "%, " + n + "%, " + m + ")";
                },
                "toHsl": function() {
                    var e = s(a, p, d);
                    return {
                        "h": 360 * e.h,
                        "s": e.s,
                        "l": e.l,
                        "a": f
                    };
                },
                "toHslString": function() {
                    var e = s(a, p, d), t = x(360 * e.h), i = x(100 * e.s), n = x(100 * e.l);
                    return 1 == f ? "hsl(" + t + ", " + i + "%, " + n + "%)" : "hsla(" + t + ", " + i + "%, " + n + "%, " + m + ")";
                },
                "toHex": function(e) {
                    return l(a, p, d, e);
                },
                "toHexString": function(e) {
                    return "#" + this.toHex(e);
                },
                "toHex8": function() {
                    return h(a, p, d, f);
                },
                "toHex8String": function() {
                    return "#" + this.toHex8();
                },
                "toRgb": function() {
                    return {
                        "r": x(a),
                        "g": x(p),
                        "b": x(d),
                        "a": f
                    };
                },
                "toRgbString": function() {
                    return 1 == f ? "rgb(" + x(a) + ", " + x(p) + ", " + x(d) + ")" : "rgba(" + x(a) + ", " + x(p) + ", " + x(d) + ", " + m + ")";
                },
                "toPercentageRgb": function() {
                    return {
                        "r": x(100 * u(a, 255)) + "%",
                        "g": x(100 * u(p, 255)) + "%",
                        "b": x(100 * u(d, 255)) + "%",
                        "a": f
                    };
                },
                "toPercentageRgbString": function() {
                    return 1 == f ? "rgb(" + x(100 * u(a, 255)) + "%, " + x(100 * u(p, 255)) + "%, " + x(100 * u(d, 255)) + "%)" : "rgba(" + x(100 * u(a, 255)) + "%, " + x(100 * u(p, 255)) + "%, " + x(100 * u(d, 255)) + "%, " + m + ")";
                },
                "toName": function() {
                    return 0 === f ? "transparent" : N[l(a, p, d, !0)] || !1;
                },
                "toFilter": function(e) {
                    var i = "#" + h(a, p, d, f), s = i, r = n && n.gradientType ? "GradientType = 1, " : "";
                    return e && (s = t(e).toHex8String()), "progid:DXImageTransform.Microsoft.gradient(" + r + "startColorstr=" + i + ",endColorstr=" + s + ")";
                },
                "toString": function(e) {
                    var t = !!e;
                    e = e || this.format;
                    var i = !1, n = !t && f < 1 && f > 0 && ("hex" === e || "hex6" === e || "hex3" === e || "name" === e);
                    return "rgb" === e && (i = this.toRgbString()), "prgb" === e && (i = this.toPercentageRgbString()), 
                    "hex" !== e && "hex6" !== e || (i = this.toHexString()), "hex3" === e && (i = this.toHexString(!0)), 
                    "hex8" === e && (i = this.toHex8String()), "name" === e && (i = this.toName()), 
                    "hsl" === e && (i = this.toHslString()), "hsv" === e && (i = this.toHsvString()), 
                    n ? this.toRgbString() : i || this.toHexString();
                }
            };
        }
        function i(e) {
            var t = {
                "r": 0,
                "g": 0,
                "b": 0
            }, i = 1, s = !1, o = !1;
            return "string" == typeof e && (e = w(e)), "object" == typeof e && (e.hasOwnProperty("r") && e.hasOwnProperty("g") && e.hasOwnProperty("b") ? (t = n(e.r, e.g, e.b), 
            s = !0, o = "%" === String(e.r).substr(-1) ? "prgb" : "rgb") : e.hasOwnProperty("h") && e.hasOwnProperty("s") && e.hasOwnProperty("v") ? (e.s = y(e.s), 
            e.v = y(e.v), t = a(e.h, e.s, e.v), s = !0, o = "hsv") : e.hasOwnProperty("h") && e.hasOwnProperty("s") && e.hasOwnProperty("l") && (e.s = y(e.s), 
            e.l = y(e.l), t = r(e.h, e.s, e.l), s = !0, o = "hsl"), e.hasOwnProperty("a") && (i = e.a)), 
            i = c(i), {
                "ok": s,
                "format": e.format || o,
                "r": E(255, A(t.r, 0)),
                "g": E(255, A(t.g, 0)),
                "b": E(255, A(t.b, 0)),
                "a": i
            };
        }
        function n(e, t, i) {
            return {
                "r": 255 * u(e, 255),
                "g": 255 * u(t, 255),
                "b": 255 * u(i, 255)
            };
        }
        function s(e, t, i) {
            e = u(e, 255), t = u(t, 255), i = u(i, 255);
            var n, s, r = A(e, t, i), o = E(e, t, i), a = (r + o) / 2;
            if (r == o) n = s = 0; else {
                var l = r - o;
                switch (s = a > .5 ? l / (2 - r - o) : l / (r + o), r) {
                  case e:
                    n = (t - i) / l + (t < i ? 6 : 0);
                    break;

                  case t:
                    n = (i - e) / l + 2;
                    break;

                  case i:
                    n = (e - t) / l + 4;
                }
                n /= 6;
            }
            return {
                "h": n,
                "s": s,
                "l": a
            };
        }
        function r(e, t, i) {
            function n(e, t, i) {
                return i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6 ? e + 6 * (t - e) * i : i < .5 ? t : i < 2 / 3 ? e + (t - e) * (2 / 3 - i) * 6 : e;
            }
            var s, r, o;
            if (e = u(e, 360), t = u(t, 100), i = u(i, 100), 0 === t) s = r = o = i; else {
                var a = i < .5 ? i * (1 + t) : i + t - i * t, l = 2 * i - a;
                s = n(l, a, e + 1 / 3), r = n(l, a, e), o = n(l, a, e - 1 / 3);
            }
            return {
                "r": 255 * s,
                "g": 255 * r,
                "b": 255 * o
            };
        }
        function o(e, t, i) {
            e = u(e, 255), t = u(t, 255), i = u(i, 255);
            var n, s, r = A(e, t, i), o = E(e, t, i), a = r, l = r - o;
            if (s = 0 === r ? 0 : l / r, r == o) n = 0; else {
                switch (r) {
                  case e:
                    n = (t - i) / l + (t < i ? 6 : 0);
                    break;

                  case t:
                    n = (i - e) / l + 2;
                    break;

                  case i:
                    n = (e - t) / l + 4;
                }
                n /= 6;
            }
            return {
                "h": n,
                "s": s,
                "v": a
            };
        }
        function a(e, t, i) {
            e = 6 * u(e, 360), t = u(t, 100), i = u(i, 100);
            var n = S.floor(e), s = e - n, r = i * (1 - t), o = i * (1 - s * t), a = i * (1 - (1 - s) * t), l = n % 6;
            return {
                "r": 255 * [ i, o, r, r, a, i ][l],
                "g": 255 * [ a, i, i, o, r, r ][l],
                "b": 255 * [ r, r, a, i, i, o ][l]
            };
        }
        function l(e, t, i, n) {
            var s = [ g(x(e).toString(16)), g(x(t).toString(16)), g(x(i).toString(16)) ];
            return n && s[0].charAt(0) == s[0].charAt(1) && s[1].charAt(0) == s[1].charAt(1) && s[2].charAt(0) == s[2].charAt(1) ? s[0].charAt(0) + s[1].charAt(0) + s[2].charAt(0) : s.join("");
        }
        function h(e, t, i, n) {
            return [ g(v(n)), g(x(e).toString(16)), g(x(t).toString(16)), g(x(i).toString(16)) ].join("");
        }
        function c(e) {
            return e = parseFloat(e), (isNaN(e) || e < 0 || e > 1) && (e = 1), e;
        }
        function u(e, t) {
            f(e) && (e = "100%");
            var i = m(e);
            return e = E(t, A(0, parseFloat(e))), i && (e = parseInt(e * t, 10) / 100), S.abs(e - t) < 1e-6 ? 1 : e % t / parseFloat(t);
        }
        function p(e) {
            return E(1, A(0, e));
        }
        function d(e) {
            return parseInt(e, 16);
        }
        function f(e) {
            return "string" == typeof e && -1 != e.indexOf(".") && 1 === parseFloat(e);
        }
        function m(e) {
            return "string" == typeof e && -1 != e.indexOf("%");
        }
        function g(e) {
            return 1 == e.length ? "0" + e : "" + e;
        }
        function y(e) {
            return e <= 1 && (e = 100 * e + "%"), e;
        }
        function v(e) {
            return Math.round(255 * parseFloat(e)).toString(16);
        }
        function L(e) {
            return d(e) / 255;
        }
        function w(e) {
            e = e.replace(b, "").replace(C, "").toLowerCase();
            var t = !1;
            if (F[e]) e = F[e], t = !0; else if ("transparent" == e) return {
                "r": 0,
                "g": 0,
                "b": 0,
                "a": 0,
                "format": "name"
            };
            var i;
            return (i = T.rgb.exec(e)) ? {
                "r": i[1],
                "g": i[2],
                "b": i[3]
            } : (i = T.rgba.exec(e)) ? {
                "r": i[1],
                "g": i[2],
                "b": i[3],
                "a": i[4]
            } : (i = T.hsl.exec(e)) ? {
                "h": i[1],
                "s": i[2],
                "l": i[3]
            } : (i = T.hsla.exec(e)) ? {
                "h": i[1],
                "s": i[2],
                "l": i[3],
                "a": i[4]
            } : (i = T.hsv.exec(e)) ? {
                "h": i[1],
                "s": i[2],
                "v": i[3]
            } : (i = T.hex8.exec(e)) ? {
                "a": L(i[1]),
                "r": d(i[2]),
                "g": d(i[3]),
                "b": d(i[4]),
                "format": t ? "name" : "hex8"
            } : (i = T.hex6.exec(e)) ? {
                "r": d(i[1]),
                "g": d(i[2]),
                "b": d(i[3]),
                "format": t ? "name" : "hex"
            } : !!(i = T.hex3.exec(e)) && {
                "r": d(i[1] + "" + i[1]),
                "g": d(i[2] + "" + i[2]),
                "b": d(i[3] + "" + i[3]),
                "format": t ? "name" : "hex"
            };
        }
        var b = /^[\s,#]+/, C = /\s+$/, O = 0, S = Math, x = S.round, E = S.min, A = S.max, _ = S.random;
        t.fromRatio = function(e, i) {
            if ("object" == typeof e) {
                var n = {};
                for (var s in e) e.hasOwnProperty(s) && (n[s] = "a" === s ? e[s] : y(e[s]));
                e = n;
            }
            return t(e, i);
        }, t.equals = function(e, i) {
            return !(!e || !i) && t(e).toRgbString() == t(i).toRgbString();
        }, t.random = function() {
            return t.fromRatio({
                "r": _(),
                "g": _(),
                "b": _()
            });
        }, t.desaturate = function(e, i) {
            i = 0 === i ? 0 : i || 10;
            var n = t(e).toHsl();
            return n.s -= i / 100, n.s = p(n.s), t(n);
        }, t.saturate = function(e, i) {
            i = 0 === i ? 0 : i || 10;
            var n = t(e).toHsl();
            return n.s += i / 100, n.s = p(n.s), t(n);
        }, t.greyscale = function(e) {
            return t.desaturate(e, 100);
        }, t.lighten = function(e, i) {
            i = 0 === i ? 0 : i || 10;
            var n = t(e).toHsl();
            return n.l += i / 100, n.l = p(n.l), t(n);
        }, t.darken = function(e, i) {
            i = 0 === i ? 0 : i || 10;
            var n = t(e).toHsl();
            return n.l -= i / 100, n.l = p(n.l), t(n);
        }, t.complement = function(e) {
            var i = t(e).toHsl();
            return i.h = (i.h + 180) % 360, t(i);
        }, t.triad = function(e) {
            var i = t(e).toHsl(), n = i.h;
            return [ t(e), t({
                "h": (n + 120) % 360,
                "s": i.s,
                "l": i.l
            }), t({
                "h": (n + 240) % 360,
                "s": i.s,
                "l": i.l
            }) ];
        }, t.tetrad = function(e) {
            var i = t(e).toHsl(), n = i.h;
            return [ t(e), t({
                "h": (n + 90) % 360,
                "s": i.s,
                "l": i.l
            }), t({
                "h": (n + 180) % 360,
                "s": i.s,
                "l": i.l
            }), t({
                "h": (n + 270) % 360,
                "s": i.s,
                "l": i.l
            }) ];
        }, t.splitcomplement = function(e) {
            var i = t(e).toHsl(), n = i.h;
            return [ t(e), t({
                "h": (n + 72) % 360,
                "s": i.s,
                "l": i.l
            }), t({
                "h": (n + 216) % 360,
                "s": i.s,
                "l": i.l
            }) ];
        }, t.analogous = function(e, i, n) {
            i = i || 6, n = n || 30;
            var s = t(e).toHsl(), r = 360 / n, o = [ t(e) ];
            for (s.h = (s.h - (r * i >> 1) + 720) % 360; --i; ) s.h = (s.h + r) % 360, o.push(t(s));
            return o;
        }, t.monochromatic = function(e, i) {
            i = i || 6;
            for (var n = t(e).toHsv(), s = n.h, r = n.s, o = n.v, a = [], l = 1 / i; i--; ) a.push(t({
                "h": s,
                "s": r,
                "v": o
            })), o = (o + l) % 1;
            return a;
        }, t.readability = function(e, i) {
            var n = t(e).toRgb(), s = t(i).toRgb(), r = (299 * n.r + 587 * n.g + 114 * n.b) / 1e3, o = (299 * s.r + 587 * s.g + 114 * s.b) / 1e3, a = Math.max(n.r, s.r) - Math.min(n.r, s.r) + Math.max(n.g, s.g) - Math.min(n.g, s.g) + Math.max(n.b, s.b) - Math.min(n.b, s.b);
            return {
                "brightness": Math.abs(r - o),
                "color": a
            };
        }, t.readable = function(e, i) {
            var n = t.readability(e, i);
            return n.brightness > 125 && n.color > 500;
        }, t.mostReadable = function(e, i) {
            for (var n = null, s = 0, r = !1, o = 0; o < i.length; o++) {
                var a = t.readability(e, i[o]), l = a.brightness > 125 && a.color > 500, h = a.brightness / 125 * 3 + a.color / 500;
                (l && !r || l && r && h > s || !l && !r && h > s) && (r = l, s = h, n = t(i[o]));
            }
            return n;
        };
        var F = t.names = {
            "aliceblue": "f0f8ff",
            "antiquewhite": "faebd7",
            "aqua": "0ff",
            "aquamarine": "7fffd4",
            "azure": "f0ffff",
            "beige": "f5f5dc",
            "bisque": "ffe4c4",
            "black": "000",
            "blanchedalmond": "ffebcd",
            "blue": "00f",
            "blueviolet": "8a2be2",
            "brown": "a52a2a",
            "burlywood": "deb887",
            "burntsienna": "ea7e5d",
            "cadetblue": "5f9ea0",
            "chartreuse": "7fff00",
            "chocolate": "d2691e",
            "coral": "ff7f50",
            "cornflowerblue": "6495ed",
            "cornsilk": "fff8dc",
            "crimson": "dc143c",
            "cyan": "0ff",
            "darkblue": "00008b",
            "darkcyan": "008b8b",
            "darkgoldenrod": "b8860b",
            "darkgray": "a9a9a9",
            "darkgreen": "006400",
            "darkgrey": "a9a9a9",
            "darkkhaki": "bdb76b",
            "darkmagenta": "8b008b",
            "darkolivegreen": "556b2f",
            "darkorange": "ff8c00",
            "darkorchid": "9932cc",
            "darkred": "8b0000",
            "darksalmon": "e9967a",
            "darkseagreen": "8fbc8f",
            "darkslateblue": "483d8b",
            "darkslategray": "2f4f4f",
            "darkslategrey": "2f4f4f",
            "darkturquoise": "00ced1",
            "darkviolet": "9400d3",
            "deeppink": "ff1493",
            "deepskyblue": "00bfff",
            "dimgray": "696969",
            "dimgrey": "696969",
            "dodgerblue": "1e90ff",
            "firebrick": "b22222",
            "floralwhite": "fffaf0",
            "forestgreen": "228b22",
            "fuchsia": "f0f",
            "gainsboro": "dcdcdc",
            "ghostwhite": "f8f8ff",
            "gold": "ffd700",
            "goldenrod": "daa520",
            "gray": "808080",
            "green": "008000",
            "greenyellow": "adff2f",
            "grey": "808080",
            "honeydew": "f0fff0",
            "hotpink": "ff69b4",
            "indianred": "cd5c5c",
            "indigo": "4b0082",
            "ivory": "fffff0",
            "khaki": "f0e68c",
            "lavender": "e6e6fa",
            "lavenderblush": "fff0f5",
            "lawngreen": "7cfc00",
            "lemonchiffon": "fffacd",
            "lightblue": "add8e6",
            "lightcoral": "f08080",
            "lightcyan": "e0ffff",
            "lightgoldenrodyellow": "fafad2",
            "lightgray": "d3d3d3",
            "lightgreen": "90ee90",
            "lightgrey": "d3d3d3",
            "lightpink": "ffb6c1",
            "lightsalmon": "ffa07a",
            "lightseagreen": "20b2aa",
            "lightskyblue": "87cefa",
            "lightslategray": "789",
            "lightslategrey": "789",
            "lightsteelblue": "b0c4de",
            "lightyellow": "ffffe0",
            "lime": "0f0",
            "limegreen": "32cd32",
            "linen": "faf0e6",
            "magenta": "f0f",
            "maroon": "800000",
            "mediumaquamarine": "66cdaa",
            "mediumblue": "0000cd",
            "mediumorchid": "ba55d3",
            "mediumpurple": "9370db",
            "mediumseagreen": "3cb371",
            "mediumslateblue": "7b68ee",
            "mediumspringgreen": "00fa9a",
            "mediumturquoise": "48d1cc",
            "mediumvioletred": "c71585",
            "midnightblue": "191970",
            "mintcream": "f5fffa",
            "mistyrose": "ffe4e1",
            "moccasin": "ffe4b5",
            "navajowhite": "ffdead",
            "navy": "000080",
            "oldlace": "fdf5e6",
            "olive": "808000",
            "olivedrab": "6b8e23",
            "orange": "ffa500",
            "orangered": "ff4500",
            "orchid": "da70d6",
            "palegoldenrod": "eee8aa",
            "palegreen": "98fb98",
            "paleturquoise": "afeeee",
            "palevioletred": "db7093",
            "papayawhip": "ffefd5",
            "peachpuff": "ffdab9",
            "peru": "cd853f",
            "pink": "ffc0cb",
            "plum": "dda0dd",
            "powderblue": "b0e0e6",
            "purple": "800080",
            "red": "f00",
            "rosybrown": "bc8f8f",
            "royalblue": "4169e1",
            "saddlebrown": "8b4513",
            "salmon": "fa8072",
            "sandybrown": "f4a460",
            "seagreen": "2e8b57",
            "seashell": "fff5ee",
            "sienna": "a0522d",
            "silver": "c0c0c0",
            "skyblue": "87ceeb",
            "slateblue": "6a5acd",
            "slategray": "708090",
            "slategrey": "708090",
            "snow": "fffafa",
            "springgreen": "00ff7f",
            "steelblue": "4682b4",
            "tan": "d2b48c",
            "teal": "008080",
            "thistle": "d8bfd8",
            "tomato": "ff6347",
            "turquoise": "40e0d0",
            "violet": "ee82ee",
            "wheat": "f5deb3",
            "white": "fff",
            "whitesmoke": "f5f5f5",
            "yellow": "ff0",
            "yellowgreen": "9acd32"
        }, N = t.hexNames = function(e) {
            var t = {};
            for (var i in e) e.hasOwnProperty(i) && (t[e[i]] = i);
            return t;
        }(F), T = function() {
            var e = "(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)", t = "[\\s|\\(]+(" + e + ")[,|\\s]+(" + e + ")[,|\\s]+(" + e + ")\\s*\\)?", i = "[\\s|\\(]+(" + e + ")[,|\\s]+(" + e + ")[,|\\s]+(" + e + ")[,|\\s]+(" + e + ")\\s*\\)?";
            return {
                "rgb": new RegExp("rgb" + t),
                "rgba": new RegExp("rgba" + i),
                "hsl": new RegExp("hsl" + t),
                "hsla": new RegExp("hsla" + i),
                "hsv": new RegExp("hsv" + t),
                "hex3": /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
                "hex6": /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
                "hex8": /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
            };
        }();
        e.tinycolor = t;
    }(), t(function() {
        t.fn.spectrum.load && t.fn.spectrum.processNativeColorInputs();
    });
}(window, jQuery), "undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery");

+function(e) {
    "use strict";
    function t() {
        var e = document.createElement("bootstrap"), t = {
            "WebkitTransition": "webkitTransitionEnd",
            "MozTransition": "transitionend",
            "OTransition": "oTransitionEnd otransitionend",
            "transition": "transitionend"
        };
        for (var i in t) if (void 0 !== e.style[i]) return {
            "end": t[i]
        };
        return !1;
    }
    e.fn.emulateTransitionEnd = function(t) {
        var i = !1, n = this;
        e(this).one(e.support.transition.end, function() {
            i = !0;
        });
        return setTimeout(function() {
            i || e(n).trigger(e.support.transition.end);
        }, t), this;
    }, e(function() {
        e.support.transition = t();
    });
}(jQuery), function(e) {
    "use strict";
    var t = '[data-dismiss="alert"]', i = function(i) {
        e(i).on("click", t, this.close);
    };
    i.prototype.close = function(t) {
        function i() {
            r.trigger("closed.bs.alert").remove();
        }
        var n = e(this), s = n.attr("data-target");
        s || (s = (s = n.attr("href")) && s.replace(/.*(?=#[^\s]*$)/, ""));
        var r = e(s);
        t && t.preventDefault(), r.length || (r = n.hasClass("alert") ? n : n.parent()), 
        r.trigger(t = e.Event("close.bs.alert")), t.isDefaultPrevented() || (r.removeClass("in"), 
        e.support.transition && r.hasClass("fade") ? r.one(e.support.transition.end, i).emulateTransitionEnd(150) : i());
    };
    var n = e.fn.alert;
    e.fn.alert = function(t) {
        return this.each(function() {
            var n = e(this), s = n.data("bs.alert");
            s || n.data("bs.alert", s = new i(this)), "string" == typeof t && s[t].call(n);
        });
    }, e.fn.alert.Constructor = i, e.fn.alert.noConflict = function() {
        return e.fn.alert = n, this;
    }, e(document).on("click.bs.alert.data-api", t, i.prototype.close);
}(jQuery), function(e) {
    "use strict";
    var t = function(i, n) {
        this.$element = e(i), this.options = e.extend({}, t.DEFAULTS, n), this.isLoading = !1;
    };
    t.DEFAULTS = {
        "loadingText": "loading..."
    }, t.prototype.setState = function(t) {
        var i = "disabled", n = this.$element, s = n.is("input") ? "val" : "html", r = n.data();
        t += "Text", r.resetText || n.data("resetText", n[s]()), n[s](r[t] || this.options[t]), 
        setTimeout(e.proxy(function() {
            "loadingText" == t ? (this.isLoading = !0, n.addClass(i).attr(i, i)) : this.isLoading && (this.isLoading = !1, 
            n.removeClass(i).removeAttr(i));
        }, this), 0);
    }, t.prototype.toggle = function() {
        var e = !0, t = this.$element.closest('[data-toggle="buttons"]');
        if (t.length) {
            var i = this.$element.find("input");
            "radio" == i.prop("type") && (i.prop("checked") && this.$element.hasClass("active") ? e = !1 : t.find(".active").removeClass("active")), 
            e && i.prop("checked", !this.$element.hasClass("active")).trigger("change");
        }
        e && this.$element.toggleClass("active");
    };
    var i = e.fn.button;
    e.fn.button = function(i) {
        return this.each(function() {
            var n = e(this), s = n.data("bs.button"), r = "object" == typeof i && i;
            s || n.data("bs.button", s = new t(this, r)), "toggle" == i ? s.toggle() : i && s.setState(i);
        });
    }, e.fn.button.Constructor = t, e.fn.button.noConflict = function() {
        return e.fn.button = i, this;
    }, e(document).on("click.bs.button.data-api", "[data-toggle^=button]", function(t) {
        var i = e(t.target);
        i.hasClass("btn") || (i = i.closest(".btn")), i.button("toggle"), t.preventDefault();
    });
}(jQuery), function(e) {
    "use strict";
    var t = function(t, i) {
        this.$element = e(t), this.$indicators = this.$element.find(".carousel-indicators"), 
        this.options = i, this.paused = this.sliding = this.interval = this.$active = this.$items = null, 
        "hover" == this.options.pause && this.$element.on("mouseenter", e.proxy(this.pause, this)).on("mouseleave", e.proxy(this.cycle, this));
    };
    t.DEFAULTS = {
        "interval": 5e3,
        "pause": "hover",
        "wrap": !0
    }, t.prototype.cycle = function(t) {
        return t || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(e.proxy(this.next, this), this.options.interval)), 
        this;
    }, t.prototype.getActiveIndex = function() {
        return this.$active = this.$element.find(".item.active"), this.$items = this.$active.parent().children(), 
        this.$items.index(this.$active);
    }, t.prototype.to = function(t) {
        var i = this, n = this.getActiveIndex();
        if (!(t > this.$items.length - 1 || t < 0)) return this.sliding ? this.$element.one("slid.bs.carousel", function() {
            i.to(t);
        }) : n == t ? this.pause().cycle() : this.slide(t > n ? "next" : "prev", e(this.$items[t]));
    }, t.prototype.pause = function(t) {
        return t || (this.paused = !0), this.$element.find(".next, .prev").length && e.support.transition && (this.$element.trigger(e.support.transition.end), 
        this.cycle(!0)), this.interval = clearInterval(this.interval), this;
    }, t.prototype.next = function() {
        if (!this.sliding) return this.slide("next");
    }, t.prototype.prev = function() {
        if (!this.sliding) return this.slide("prev");
    }, t.prototype.slide = function(t, i) {
        var n = this.$element.find(".item.active"), s = i || n[t](), r = this.interval, o = "next" == t ? "left" : "right", a = "next" == t ? "first" : "last", l = this;
        if (!s.length) {
            if (!this.options.wrap) return;
            s = this.$element.find(".item")[a]();
        }
        if (s.hasClass("active")) return this.sliding = !1;
        var h = e.Event("slide.bs.carousel", {
            "relatedTarget": s[0],
            "direction": o
        });
        return this.$element.trigger(h), h.isDefaultPrevented() ? void 0 : (this.sliding = !0, 
        r && this.pause(), this.$indicators.length && (this.$indicators.find(".active").removeClass("active"), 
        this.$element.one("slid.bs.carousel", function() {
            var t = e(l.$indicators.children()[l.getActiveIndex()]);
            t && t.addClass("active");
        })), e.support.transition && this.$element.hasClass("slide") ? (s.addClass(t), s[0].offsetWidth, 
        n.addClass(o), s.addClass(o), n.one(e.support.transition.end, function() {
            s.removeClass([ t, o ].join(" ")).addClass("active"), n.removeClass([ "active", o ].join(" ")), 
            l.sliding = !1, setTimeout(function() {
                l.$element.trigger("slid.bs.carousel");
            }, 0);
        }).emulateTransitionEnd(1e3 * n.css("transition-duration").slice(0, -1))) : (n.removeClass("active"), 
        s.addClass("active"), this.sliding = !1, this.$element.trigger("slid.bs.carousel")), 
        r && this.cycle(), this);
    };
    var i = e.fn.carousel;
    e.fn.carousel = function(i) {
        return this.each(function() {
            var n = e(this), s = n.data("bs.carousel"), r = e.extend({}, t.DEFAULTS, n.data(), "object" == typeof i && i), o = "string" == typeof i ? i : r.slide;
            s || n.data("bs.carousel", s = new t(this, r)), "number" == typeof i ? s.to(i) : o ? s[o]() : r.interval && s.pause().cycle();
        });
    }, e.fn.carousel.Constructor = t, e.fn.carousel.noConflict = function() {
        return e.fn.carousel = i, this;
    }, e(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]", function(t) {
        var i, n = e(this), s = e(n.attr("data-target") || (i = n.attr("href")) && i.replace(/.*(?=#[^\s]+$)/, "")), r = e.extend({}, s.data(), n.data()), o = n.attr("data-slide-to");
        o && (r.interval = !1), s.carousel(r), (o = n.attr("data-slide-to")) && s.data("bs.carousel").to(o), 
        t.preventDefault();
    }), e(window).on("load", function() {
        e('[data-ride="carousel"]').each(function() {
            var t = e(this);
            t.carousel(t.data());
        });
    });
}(jQuery), function(e) {
    "use strict";
    var t = function(i, n) {
        this.$element = e(i), this.options = e.extend({}, t.DEFAULTS, n), this.transitioning = null, 
        this.options.parent && (this.$parent = e(this.options.parent)), this.options.toggle && this.toggle();
    };
    t.DEFAULTS = {
        "toggle": !0
    }, t.prototype.dimension = function() {
        return this.$element.hasClass("width") ? "width" : "height";
    }, t.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var t = e.Event("show.bs.collapse");
            if (this.$element.trigger(t), !t.isDefaultPrevented()) {
                var i = this.$parent && this.$parent.find("> .panel > .in");
                if (i && i.length) {
                    var n = i.data("bs.collapse");
                    if (n && n.transitioning) return;
                    i.collapse("hide"), n || i.data("bs.collapse", null);
                }
                var s = this.dimension();
                this.$element.removeClass("collapse").addClass("collapsing")[s](0), this.transitioning = 1;
                var r = function() {
                    this.$element.removeClass("collapsing").addClass("collapse in")[s]("auto"), this.transitioning = 0, 
                    this.$element.trigger("shown.bs.collapse");
                };
                if (!e.support.transition) return r.call(this);
                var o = e.camelCase([ "scroll", s ].join("-"));
                this.$element.one(e.support.transition.end, e.proxy(r, this)).emulateTransitionEnd(350)[s](this.$element[0][o]);
            }
        }
    }, t.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var t = e.Event("hide.bs.collapse");
            if (this.$element.trigger(t), !t.isDefaultPrevented()) {
                var i = this.dimension();
                this.$element[i](this.$element[i]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"), 
                this.transitioning = 1;
                var n = function() {
                    this.transitioning = 0, this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse");
                };
                if (!e.support.transition) return n.call(this);
                this.$element[i](0).one(e.support.transition.end, e.proxy(n, this)).emulateTransitionEnd(350);
            }
        }
    }, t.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]();
    };
    var i = e.fn.collapse;
    e.fn.collapse = function(i) {
        return this.each(function() {
            var n = e(this), s = n.data("bs.collapse"), r = e.extend({}, t.DEFAULTS, n.data(), "object" == typeof i && i);
            !s && r.toggle && "show" == i && (i = !i), s || n.data("bs.collapse", s = new t(this, r)), 
            "string" == typeof i && s[i]();
        });
    }, e.fn.collapse.Constructor = t, e.fn.collapse.noConflict = function() {
        return e.fn.collapse = i, this;
    }, e(document).on("click.bs.collapse.data-api", "[data-toggle=collapse]", function(t) {
        var i, n = e(this), s = n.attr("data-target") || t.preventDefault() || (i = n.attr("href")) && i.replace(/.*(?=#[^\s]+$)/, ""), r = e(s), o = r.data("bs.collapse"), a = o ? "toggle" : n.data(), l = n.attr("data-parent"), h = l && e(l);
        o && o.transitioning || (h && h.find('[data-toggle=collapse][data-parent="' + l + '"]').not(n).addClass("collapsed"), 
        n[r.hasClass("in") ? "addClass" : "removeClass"]("collapsed")), r.collapse(a);
    });
}(jQuery), function(e) {
    "use strict";
    function t(t) {
        e(n).remove(), e(s).each(function() {
            var n = i(e(this)), s = {
                "relatedTarget": this
            };
            n.hasClass("open") && (n.trigger(t = e.Event("hide.bs.dropdown", s)), t.isDefaultPrevented() || n.removeClass("open").trigger("hidden.bs.dropdown", s));
        });
    }
    function i(t) {
        var i = t.attr("data-target");
        i || (i = (i = t.attr("href")) && /#[A-Za-z]/.test(i) && i.replace(/.*(?=#[^\s]*$)/, ""));
        var n = i && e(i);
        return n && n.length ? n : t.parent();
    }
    var n = ".dropdown-backdrop", s = "[data-toggle=dropdown]", r = function(t) {
        e(t).on("click.bs.dropdown", this.toggle);
    };
    r.prototype.toggle = function(n) {
        var s = e(this);
        if (!s.is(".disabled, :disabled")) {
            var r = i(s), o = r.hasClass("open");
            if (t(), !o) {
                "ontouchstart" in document.documentElement && !r.closest(".navbar-nav").length && e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click", t);
                var a = {
                    "relatedTarget": this
                };
                if (r.trigger(n = e.Event("show.bs.dropdown", a)), n.isDefaultPrevented()) return;
                r.toggleClass("open").trigger("shown.bs.dropdown", a), s.focus();
            }
            return !1;
        }
    }, r.prototype.keydown = function(t) {
        if (/(38|40|27)/.test(t.keyCode)) {
            var n = e(this);
            if (t.preventDefault(), t.stopPropagation(), !n.is(".disabled, :disabled")) {
                var r = i(n), o = r.hasClass("open");
                if (!o || o && 27 == t.keyCode) return 27 == t.which && r.find(s).focus(), n.click();
                var a = " li:not(.divider):visible a", l = r.find("[role=menu]" + a + ", [role=listbox]" + a);
                if (l.length) {
                    var h = l.index(l.filter(":focus"));
                    38 == t.keyCode && h > 0 && h--, 40 == t.keyCode && h < l.length - 1 && h++, ~h || (h = 0), 
                    l.eq(h).focus();
                }
            }
        }
    };
    var o = e.fn.dropdown;
    e.fn.dropdown = function(t) {
        return this.each(function() {
            var i = e(this), n = i.data("bs.dropdown");
            n || i.data("bs.dropdown", n = new r(this)), "string" == typeof t && n[t].call(i);
        });
    }, e.fn.dropdown.Constructor = r, e.fn.dropdown.noConflict = function() {
        return e.fn.dropdown = o, this;
    }, e(document).on("click.bs.dropdown.data-api", t).on("click.bs.dropdown.data-api", ".dropdown form", function(e) {
        e.stopPropagation();
    }).on("click.bs.dropdown.data-api", s, r.prototype.toggle).on("keydown.bs.dropdown.data-api", s + ", [role=menu], [role=listbox]", r.prototype.keydown);
}(jQuery), function(e) {
    "use strict";
    var t = function(t, i) {
        this.options = i, this.$element = e(t), this.$backdrop = this.isShown = null, this.options.remote && this.$element.find(".modal-content").load(this.options.remote, e.proxy(function() {
            this.$element.trigger("loaded.bs.modal");
        }, this));
    };
    t.DEFAULTS = {
        "backdrop": !0,
        "keyboard": !0,
        "show": !0
    }, t.prototype.toggle = function(e) {
        return this[this.isShown ? "hide" : "show"](e);
    }, t.prototype.show = function(t) {
        var i = this, n = e.Event("show.bs.modal", {
            "relatedTarget": t
        });
        this.$element.trigger(n), this.isShown || n.isDefaultPrevented() || (this.isShown = !0, 
        this.escape(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', e.proxy(this.hide, this)), 
        this.backdrop(function() {
            var n = e.support.transition && i.$element.hasClass("fade");
            i.$element.parent().length || i.$element.appendTo(document.body), i.$element.show().scrollTop(0), 
            n && i.$element[0].offsetWidth, i.$element.addClass("in").attr("aria-hidden", !1), 
            i.enforceFocus();
            var s = e.Event("shown.bs.modal", {
                "relatedTarget": t
            });
            n ? i.$element.find(".modal-dialog").one(e.support.transition.end, function() {
                i.$element.focus().trigger(s);
            }).emulateTransitionEnd(300) : i.$element.focus().trigger(s);
        }));
    }, t.prototype.hide = function(t) {
        t && t.preventDefault(), t = e.Event("hide.bs.modal"), this.$element.trigger(t), 
        this.isShown && !t.isDefaultPrevented() && (this.isShown = !1, this.escape(), e(document).off("focusin.bs.modal"), 
        this.$element.removeClass("in").attr("aria-hidden", !0).off("click.dismiss.bs.modal"), 
        e.support.transition && this.$element.hasClass("fade") ? this.$element.one(e.support.transition.end, e.proxy(this.hideModal, this)).emulateTransitionEnd(300) : this.hideModal());
    }, t.prototype.enforceFocus = function() {
        e(document).off("focusin.bs.modal").on("focusin.bs.modal", e.proxy(function(e) {
            this.$element[0] === e.target || this.$element.has(e.target).length || this.$element.focus();
        }, this));
    }, t.prototype.escape = function() {
        this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.bs.modal", e.proxy(function(e) {
            27 == e.which && this.hide();
        }, this)) : this.isShown || this.$element.off("keyup.dismiss.bs.modal");
    }, t.prototype.hideModal = function() {
        var e = this;
        this.$element.hide(), this.backdrop(function() {
            e.removeBackdrop(), e.$element.trigger("hidden.bs.modal");
        });
    }, t.prototype.removeBackdrop = function() {
        this.$backdrop && this.$backdrop.remove(), this.$backdrop = null;
    }, t.prototype.backdrop = function(t) {
        var i = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var n = e.support.transition && i;
            if (this.$backdrop = e('<div class="modal-backdrop ' + i + '" />').appendTo(document.body), 
            this.$element.on("click.dismiss.bs.modal", e.proxy(function(e) {
                e.target === e.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus.call(this.$element[0]) : this.hide.call(this));
            }, this)), n && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !t) return;
            n ? this.$backdrop.one(e.support.transition.end, t).emulateTransitionEnd(150) : t();
        } else !this.isShown && this.$backdrop ? (this.$backdrop.removeClass("in"), e.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one(e.support.transition.end, t).emulateTransitionEnd(150) : t()) : t && t();
    };
    var i = e.fn.modal;
    e.fn.modal = function(i, n) {
        return this.each(function() {
            var s = e(this), r = s.data("bs.modal"), o = e.extend({}, t.DEFAULTS, s.data(), "object" == typeof i && i);
            r || s.data("bs.modal", r = new t(this, o)), "string" == typeof i ? r[i](n) : o.show && r.show(n);
        });
    }, e.fn.modal.Constructor = t, e.fn.modal.noConflict = function() {
        return e.fn.modal = i, this;
    }, e(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function(t) {
        var i = e(this), n = i.attr("href"), s = e(i.attr("data-target") || n && n.replace(/.*(?=#[^\s]+$)/, "")), r = s.data("bs.modal") ? "toggle" : e.extend({
            "remote": !/#/.test(n) && n
        }, s.data(), i.data());
        i.is("a") && t.preventDefault(), s.modal(r, this).one("hide", function() {
            i.is(":visible") && i.focus();
        });
    }), e(document).on("show.bs.modal", ".modal", function() {
        e(document.body).addClass("modal-open");
    }).on("hidden.bs.modal", ".modal", function() {
        e(document.body).removeClass("modal-open");
    });
}(jQuery), function(e) {
    "use strict";
    var t = function(e, t) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null, 
        this.init("tooltip", e, t);
    };
    t.DEFAULTS = {
        "animation": !0,
        "placement": "top",
        "selector": !1,
        "template": '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        "trigger": "hover focus",
        "title": "",
        "delay": 0,
        "html": !1,
        "container": !1
    }, t.prototype.init = function(t, i, n) {
        this.enabled = !0, this.type = t, this.$element = e(i), this.options = this.getOptions(n);
        for (var s = this.options.trigger.split(" "), r = s.length; r--; ) {
            var o = s[r];
            if ("click" == o) this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this)); else if ("manual" != o) {
                var a = "hover" == o ? "mouseenter" : "focusin", l = "hover" == o ? "mouseleave" : "focusout";
                this.$element.on(a + "." + this.type, this.options.selector, e.proxy(this.enter, this)), 
                this.$element.on(l + "." + this.type, this.options.selector, e.proxy(this.leave, this));
            }
        }
        this.options.selector ? this._options = e.extend({}, this.options, {
            "trigger": "manual",
            "selector": ""
        }) : this.fixTitle();
    }, t.prototype.getDefaults = function() {
        return t.DEFAULTS;
    }, t.prototype.getOptions = function(t) {
        return (t = e.extend({}, this.getDefaults(), this.$element.data(), t)).delay && "number" == typeof t.delay && (t.delay = {
            "show": t.delay,
            "hide": t.delay
        }), t;
    }, t.prototype.getDelegateOptions = function() {
        var t = {}, i = this.getDefaults();
        return this._options && e.each(this._options, function(e, n) {
            i[e] != n && (t[e] = n);
        }), t;
    }, t.prototype.enter = function(t) {
        var i = t instanceof this.constructor ? t : e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        if (clearTimeout(i.timeout), i.hoverState = "in", !i.options.delay || !i.options.delay.show) return i.show();
        i.timeout = setTimeout(function() {
            "in" == i.hoverState && i.show();
        }, i.options.delay.show);
    }, t.prototype.leave = function(t) {
        var i = t instanceof this.constructor ? t : e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        if (clearTimeout(i.timeout), i.hoverState = "out", !i.options.delay || !i.options.delay.hide) return i.hide();
        i.timeout = setTimeout(function() {
            "out" == i.hoverState && i.hide();
        }, i.options.delay.hide);
    }, t.prototype.show = function() {
        var t = e.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            if (this.$element.trigger(t), t.isDefaultPrevented()) return;
            var i = this, n = this.tip();
            this.setContent(), this.options.animation && n.addClass("fade");
            var s = "function" == typeof this.options.placement ? this.options.placement.call(this, n[0], this.$element[0]) : this.options.placement, r = /\s?auto?\s?/i, o = r.test(s);
            o && (s = s.replace(r, "") || "top"), n.detach().css({
                "top": 0,
                "left": 0,
                "display": "block"
            }).addClass(s), this.options.container ? n.appendTo(this.options.container) : n.insertAfter(this.$element);
            var a = this.getPosition(), l = n[0].offsetWidth, h = n[0].offsetHeight;
            if (o) {
                var c = this.$element.parent(), u = s, p = document.documentElement.scrollTop || document.body.scrollTop, d = "body" == this.options.container ? window.innerWidth : c.outerWidth(), f = "body" == this.options.container ? window.innerHeight : c.outerHeight(), m = "body" == this.options.container ? 0 : c.offset().left;
                s = "bottom" == s && a.top + a.height + h - p > f ? "top" : "top" == s && a.top - p - h < 0 ? "bottom" : "right" == s && a.right + l > d ? "left" : "left" == s && a.left - l < m ? "right" : s, 
                n.removeClass(u).addClass(s);
            }
            var g = this.getCalculatedOffset(s, a, l, h);
            this.applyPlacement(g, s), this.hoverState = null;
            var y = function() {
                i.$element.trigger("shown.bs." + i.type);
            };
            e.support.transition && this.$tip.hasClass("fade") ? n.one(e.support.transition.end, y).emulateTransitionEnd(150) : y();
        }
    }, t.prototype.applyPlacement = function(t, i) {
        var n, s = this.tip(), r = s[0].offsetWidth, o = s[0].offsetHeight, a = parseInt(s.css("margin-top"), 10), l = parseInt(s.css("margin-left"), 10);
        isNaN(a) && (a = 0), isNaN(l) && (l = 0), t.top = t.top + a, t.left = t.left + l, 
        e.offset.setOffset(s[0], e.extend({
            "using": function(e) {
                s.css({
                    "top": Math.round(e.top),
                    "left": Math.round(e.left)
                });
            }
        }, t), 0), s.addClass("in");
        var h = s[0].offsetWidth, c = s[0].offsetHeight;
        if ("top" == i && c != o && (n = !0, t.top = t.top + o - c), /bottom|top/.test(i)) {
            var u = 0;
            t.left < 0 && (u = -2 * t.left, t.left = 0, s.offset(t), h = s[0].offsetWidth, c = s[0].offsetHeight), 
            this.replaceArrow(u - r + h, h, "left");
        } else this.replaceArrow(c - o, c, "top");
        n && s.offset(t);
    }, t.prototype.replaceArrow = function(e, t, i) {
        this.arrow().css(i, e ? 50 * (1 - e / t) + "%" : "");
    }, t.prototype.setContent = function() {
        var e = this.tip(), t = this.getTitle();
        e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t), e.removeClass("fade in top bottom left right");
    }, t.prototype.hide = function() {
        function t() {
            "in" != i.hoverState && n.detach(), i.$element.trigger("hidden.bs." + i.type);
        }
        var i = this, n = this.tip(), s = e.Event("hide.bs." + this.type);
        if (this.$element.trigger(s), !s.isDefaultPrevented()) return n.removeClass("in"), 
        e.support.transition && this.$tip.hasClass("fade") ? n.one(e.support.transition.end, t).emulateTransitionEnd(150) : t(), 
        this.hoverState = null, this;
    }, t.prototype.fixTitle = function() {
        var e = this.$element;
        (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "");
    }, t.prototype.hasContent = function() {
        return this.getTitle();
    }, t.prototype.getPosition = function() {
        var t = this.$element[0];
        return e.extend({}, "function" == typeof t.getBoundingClientRect ? t.getBoundingClientRect() : {
            "width": t.offsetWidth,
            "height": t.offsetHeight
        }, this.$element.offset());
    }, t.prototype.getCalculatedOffset = function(e, t, i, n) {
        return "bottom" == e ? {
            "top": t.top + t.height,
            "left": t.left + t.width / 2 - i / 2
        } : "top" == e ? {
            "top": t.top - n,
            "left": t.left + t.width / 2 - i / 2
        } : "left" == e ? {
            "top": t.top + t.height / 2 - n / 2,
            "left": t.left - i
        } : {
            "top": t.top + t.height / 2 - n / 2,
            "left": t.left + t.width
        };
    }, t.prototype.getTitle = function() {
        var e = this.$element, t = this.options;
        return e.attr("data-original-title") || ("function" == typeof t.title ? t.title.call(e[0]) : t.title);
    }, t.prototype.tip = function() {
        return this.$tip = this.$tip || e(this.options.template);
    }, t.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow");
    }, t.prototype.validate = function() {
        this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null);
    }, t.prototype.enable = function() {
        this.enabled = !0;
    }, t.prototype.disable = function() {
        this.enabled = !1;
    }, t.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled;
    }, t.prototype.toggle = function(t) {
        var i = t ? e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type) : this;
        i.tip().hasClass("in") ? i.leave(i) : i.enter(i);
    }, t.prototype.destroy = function() {
        clearTimeout(this.timeout), this.hide().$element.off("." + this.type).removeData("bs." + this.type);
    };
    var i = e.fn.tooltip;
    e.fn.tooltip = function(i) {
        return this.each(function() {
            var n = e(this), s = n.data("bs.tooltip"), r = "object" == typeof i && i;
            (s || "destroy" != i) && (s || n.data("bs.tooltip", s = new t(this, r)), "string" == typeof i && s[i]());
        });
    }, e.fn.tooltip.Constructor = t, e.fn.tooltip.noConflict = function() {
        return e.fn.tooltip = i, this;
    };
}(jQuery), function(e) {
    "use strict";
    var t = function(e, t) {
        this.init("popover", e, t);
    };
    if (!e.fn.tooltip) throw new Error("Popover requires tooltip.js");
    t.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, {
        "placement": "right",
        "trigger": "click",
        "content": "",
        "template": '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), (t.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype)).constructor = t, 
    t.prototype.getDefaults = function() {
        return t.DEFAULTS;
    }, t.prototype.setContent = function() {
        var e = this.tip(), t = this.getTitle(), i = this.getContent();
        e.find(".popover-title")[this.options.html ? "html" : "text"](t), e.find(".popover-content")[this.options.html ? "string" == typeof i ? "html" : "append" : "text"](i), 
        e.removeClass("fade top bottom left right in"), e.find(".popover-title").html() || e.find(".popover-title").hide();
    }, t.prototype.hasContent = function() {
        return this.getTitle() || this.getContent();
    }, t.prototype.getContent = function() {
        var e = this.$element, t = this.options;
        return e.attr("data-content") || ("function" == typeof t.content ? t.content.call(e[0]) : t.content);
    }, t.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow");
    }, t.prototype.tip = function() {
        return this.$tip || (this.$tip = e(this.options.template)), this.$tip;
    };
    var i = e.fn.popover;
    e.fn.popover = function(i) {
        return this.each(function() {
            var n = e(this), s = n.data("bs.popover"), r = "object" == typeof i && i;
            (s || "destroy" != i) && (s || n.data("bs.popover", s = new t(this, r)), "string" == typeof i && s[i]());
        });
    }, e.fn.popover.Constructor = t, e.fn.popover.noConflict = function() {
        return e.fn.popover = i, this;
    };
}(jQuery), function(e) {
    "use strict";
    function t(i, n) {
        var s, r = e.proxy(this.process, this);
        this.$element = e(e(i).is("body") ? window : i), this.$body = e("body"), this.$scrollElement = this.$element.on("scroll.bs.scroll-spy.data-api", r), 
        this.options = e.extend({}, t.DEFAULTS, n), this.selector = (this.options.target || (s = e(i).attr("href")) && s.replace(/.*(?=#[^\s]+$)/, "") || "") + " .nav li > a", 
        this.offsets = e([]), this.targets = e([]), this.activeTarget = null, this.refresh(), 
        this.process();
    }
    t.DEFAULTS = {
        "offset": 10
    }, t.prototype.refresh = function() {
        var t = this.$element[0] == window ? "offset" : "position";
        this.offsets = e([]), this.targets = e([]);
        var i = this;
        this.$body.find(this.selector).map(function() {
            var n = e(this), s = n.data("target") || n.attr("href"), r = /^#./.test(s) && e(s);
            return r && r.length && r.is(":visible") && [ [ r[t]().top + (!e.isWindow(i.$scrollElement.get(0)) && i.$scrollElement.scrollTop()), s ] ] || null;
        }).sort(function(e, t) {
            return e[0] - t[0];
        }).each(function() {
            i.offsets.push(this[0]), i.targets.push(this[1]);
        });
    }, t.prototype.process = function() {
        var e, t = this.$scrollElement.scrollTop() + this.options.offset, i = (this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight) - this.$scrollElement.height(), n = this.offsets, s = this.targets, r = this.activeTarget;
        if (t >= i) return r != (e = s.last()[0]) && this.activate(e);
        if (r && t <= n[0]) return r != (e = s[0]) && this.activate(e);
        for (e = n.length; e--; ) r != s[e] && t >= n[e] && (!n[e + 1] || t <= n[e + 1]) && this.activate(s[e]);
    }, t.prototype.activate = function(t) {
        this.activeTarget = t, e(this.selector).parentsUntil(this.options.target, ".active").removeClass("active");
        var i = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]', n = e(i).parents("li").addClass("active");
        n.parent(".dropdown-menu").length && (n = n.closest("li.dropdown").addClass("active")), 
        n.trigger("activate.bs.scrollspy");
    };
    var i = e.fn.scrollspy;
    e.fn.scrollspy = function(i) {
        return this.each(function() {
            var n = e(this), s = n.data("bs.scrollspy"), r = "object" == typeof i && i;
            s || n.data("bs.scrollspy", s = new t(this, r)), "string" == typeof i && s[i]();
        });
    }, e.fn.scrollspy.Constructor = t, e.fn.scrollspy.noConflict = function() {
        return e.fn.scrollspy = i, this;
    }, e(window).on("load", function() {
        e('[data-spy="scroll"]').each(function() {
            var t = e(this);
            t.scrollspy(t.data());
        });
    });
}(jQuery), function(e) {
    "use strict";
    var t = function(t) {
        this.element = e(t);
    };
    t.prototype.show = function() {
        var t = this.element, i = t.closest("ul:not(.dropdown-menu)"), n = t.data("target");
        if (n || (n = (n = t.attr("href")) && n.replace(/.*(?=#[^\s]*$)/, "")), !t.parent("li").hasClass("active")) {
            var s = i.find(".active:last a")[0], r = e.Event("show.bs.tab", {
                "relatedTarget": s
            });
            if (t.trigger(r), !r.isDefaultPrevented()) {
                var o = e(n);
                this.activate(t.parent("li"), i), this.activate(o, o.parent(), function() {
                    t.trigger({
                        "type": "shown.bs.tab",
                        "relatedTarget": s
                    });
                });
            }
        }
    }, t.prototype.activate = function(t, i, n) {
        function s() {
            r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), 
            t.addClass("active"), o ? (t[0].offsetWidth, t.addClass("in")) : t.removeClass("fade"), 
            t.parent(".dropdown-menu") && t.closest("li.dropdown").addClass("active"), n && n();
        }
        var r = i.find("> .active"), o = n && e.support.transition && r.hasClass("fade");
        o ? r.one(e.support.transition.end, s).emulateTransitionEnd(150) : s(), r.removeClass("in");
    };
    var i = e.fn.tab;
    e.fn.tab = function(i) {
        return this.each(function() {
            var n = e(this), s = n.data("bs.tab");
            s || n.data("bs.tab", s = new t(this)), "string" == typeof i && s[i]();
        });
    }, e.fn.tab.Constructor = t, e.fn.tab.noConflict = function() {
        return e.fn.tab = i, this;
    }, e(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function(t) {
        t.preventDefault(), e(this).tab("show");
    });
}(jQuery), function(e) {
    "use strict";
    var t = function(i, n) {
        this.options = e.extend({}, t.DEFAULTS, n), this.$window = e(window).on("scroll.bs.affix.data-api", e.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", e.proxy(this.checkPositionWithEventLoop, this)), 
        this.$element = e(i), this.affixed = this.unpin = this.pinnedOffset = null, this.checkPosition();
    };
    t.RESET = "affix affix-top affix-bottom", t.DEFAULTS = {
        "offset": 0
    }, t.prototype.getPinnedOffset = function() {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(t.RESET).addClass("affix");
        var e = this.$window.scrollTop(), i = this.$element.offset();
        return this.pinnedOffset = i.top - e;
    }, t.prototype.checkPositionWithEventLoop = function() {
        setTimeout(e.proxy(this.checkPosition, this), 1);
    }, t.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var i = e(document).height(), n = this.$window.scrollTop(), s = this.$element.offset(), r = this.options.offset, o = r.top, a = r.bottom;
            "top" == this.affixed && (s.top += n), "object" != typeof r && (a = o = r), "function" == typeof o && (o = r.top(this.$element)), 
            "function" == typeof a && (a = r.bottom(this.$element));
            var l = !(null != this.unpin && n + this.unpin <= s.top) && (null != a && s.top + this.$element.height() >= i - a ? "bottom" : null != o && n <= o && "top");
            if (this.affixed !== l) {
                this.unpin && this.$element.css("top", "");
                var h = "affix" + (l ? "-" + l : ""), c = e.Event(h + ".bs.affix");
                this.$element.trigger(c), c.isDefaultPrevented() || (this.affixed = l, this.unpin = "bottom" == l ? this.getPinnedOffset() : null, 
                this.$element.removeClass(t.RESET).addClass(h).trigger(e.Event(h.replace("affix", "affixed"))), 
                "bottom" == l && this.$element.offset({
                    "top": i - a - this.$element.height()
                }));
            }
        }
    };
    var i = e.fn.affix;
    e.fn.affix = function(i) {
        return this.each(function() {
            var n = e(this), s = n.data("bs.affix"), r = "object" == typeof i && i;
            s || n.data("bs.affix", s = new t(this, r)), "string" == typeof i && s[i]();
        });
    }, e.fn.affix.Constructor = t, e.fn.affix.noConflict = function() {
        return e.fn.affix = i, this;
    }, e(window).on("load", function() {
        e('[data-spy="affix"]').each(function() {
            var t = e(this), i = t.data();
            i.offset = i.offset || {}, i.offsetBottom && (i.offset.bottom = i.offsetBottom), 
            i.offsetTop && (i.offset.top = i.offsetTop), t.affix(i);
        });
    });
}(jQuery), function() {
    var e = function() {
        return this;
    }();
    e || "undefined" == typeof window || (e = window);
    var t = function(e, i, n) {
        "string" == typeof e ? (2 == arguments.length && (n = i), t.modules[e] || (t.payloads[e] = n, 
        t.modules[e] = null)) : t.original ? t.original.apply(this, arguments) : (console.error("dropping module because define wasn't a string."), 
        console.trace());
    };
    t.modules = {}, t.payloads = {};
    var i = function(e, t, i) {
        if ("string" == typeof t) {
            var s = r(e, t);
            if (void 0 != s) return i && i(), s;
        } else if ("[object Array]" === Object.prototype.toString.call(t)) {
            for (var o = [], a = 0, l = t.length; a < l; ++a) {
                var h = r(e, t[a]);
                if (void 0 == h && n.original) return;
                o.push(h);
            }
            return i && i.apply(null, o) || !0;
        }
    }, n = function(e, t) {
        var s = i("", e, t);
        return void 0 == s && n.original ? n.original.apply(this, arguments) : s;
    }, s = function(e, t) {
        if (-1 !== t.indexOf("!")) {
            var i = t.split("!");
            return s(e, i[0]) + "!" + s(e, i[1]);
        }
        if ("." == t.charAt(0)) for (t = e.split("/").slice(0, -1).join("/") + "/" + t; -1 !== t.indexOf(".") && n != t; ) {
            var n = t;
            t = t.replace(/\/\.\//, "/").replace(/[^\/]+\/\.\.\//, "");
        }
        return t;
    }, r = function(e, n) {
        n = s(e, n);
        var r = t.modules[n];
        if (!r) {
            if ("function" == typeof (r = t.payloads[n])) {
                var o = {}, a = {
                    "id": n,
                    "uri": "",
                    "exports": o,
                    "packaged": !0
                };
                o = r(function(e, t) {
                    return i(n, e, t);
                }, o, a) || a.exports, t.modules[n] = o, delete t.payloads[n];
            }
            r = t.modules[n] = o || r;
        }
        return r;
    };
    !function(i) {
        var s = e;
        i && (e[i] || (e[i] = {}), s = e[i]), s.define && s.define.packaged || (t.original = s.define, 
        s.define = t, s.define.packaged = !0), s.require && s.require.packaged || (n.original = s.require, 
        s.require = n, s.require.packaged = !0);
    }("ace");
}(), ace.define("ace/lib/regexp", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    function n(e) {
        return (e.global ? "g" : "") + (e.ignoreCase ? "i" : "") + (e.multiline ? "m" : "") + (e.extended ? "x" : "") + (e.sticky ? "y" : "");
    }
    function s(e, t, i) {
        if (Array.prototype.indexOf) return e.indexOf(t, i);
        for (var n = i || 0; n < e.length; n++) if (e[n] === t) return n;
        return -1;
    }
    var r = {
        "exec": RegExp.prototype.exec,
        "test": RegExp.prototype.test,
        "match": String.prototype.match,
        "replace": String.prototype.replace,
        "split": String.prototype.split
    }, o = void 0 === r.exec.call(/()??/, "")[1], a = function() {
        var e = /^/g;
        return r.test.call(e, ""), !e.lastIndex;
    }();
    a && o || (RegExp.prototype.exec = function(e) {
        var t, i, l = r.exec.apply(this, arguments);
        if ("string" == typeof e && l) {
            if (!o && l.length > 1 && s(l, "") > -1 && (i = RegExp(this.source, r.replace.call(n(this), "g", "")), 
            r.replace.call(e.slice(l.index), i, function() {
                for (var e = 1; e < arguments.length - 2; e++) void 0 === arguments[e] && (l[e] = void 0);
            })), this._xregexp && this._xregexp.captureNames) for (var h = 1; h < l.length; h++) (t = this._xregexp.captureNames[h - 1]) && (l[t] = l[h]);
            !a && this.global && !l[0].length && this.lastIndex > l.index && this.lastIndex--;
        }
        return l;
    }, a || (RegExp.prototype.test = function(e) {
        var t = r.exec.call(this, e);
        return t && this.global && !t[0].length && this.lastIndex > t.index && this.lastIndex--, 
        !!t;
    }));
}), ace.define("ace/lib/es5-shim", [ "require", "exports", "module" ], function(e, t, i) {
    function n() {}
    function s(e) {
        try {
            return Object.defineProperty(e, "sentinel", {}), "sentinel" in e;
        } catch (e) {}
    }
    function r(e) {
        return (e = +e) !== e ? e = 0 : 0 !== e && e !== 1 / 0 && e !== -1 / 0 && (e = (e > 0 || -1) * Math.floor(Math.abs(e))), 
        e;
    }
    Function.prototype.bind || (Function.prototype.bind = function(e) {
        var t = this;
        if ("function" != typeof t) throw new TypeError("Function.prototype.bind called on incompatible " + t);
        var i = f.call(arguments, 1), s = function() {
            if (this instanceof s) {
                var n = t.apply(this, i.concat(f.call(arguments)));
                return Object(n) === n ? n : this;
            }
            return t.apply(e, i.concat(f.call(arguments)));
        };
        return t.prototype && (n.prototype = t.prototype, s.prototype = new n(), n.prototype = null), 
        s;
    });
    var o, a, l, h, c, u = Function.prototype.call, p = Array.prototype, d = Object.prototype, f = p.slice, m = u.bind(d.toString), g = u.bind(d.hasOwnProperty);
    if ((c = g(d, "__defineGetter__")) && (o = u.bind(d.__defineGetter__), a = u.bind(d.__defineSetter__), 
    l = u.bind(d.__lookupGetter__), h = u.bind(d.__lookupSetter__)), 2 != [ 1, 2 ].splice(0).length) if (function() {
        function e(e) {
            var t = new Array(e + 2);
            return t[0] = t[1] = 0, t;
        }
        var t, i = [];
        if (i.splice.apply(i, e(20)), i.splice.apply(i, e(26)), t = i.length, i.splice(5, 0, "XXX"), 
        i.length, t + 1 == i.length) return !0;
    }()) {
        var y = Array.prototype.splice;
        Array.prototype.splice = function(e, t) {
            return arguments.length ? y.apply(this, [ void 0 === e ? 0 : e, void 0 === t ? this.length - e : t ].concat(f.call(arguments, 2))) : [];
        };
    } else Array.prototype.splice = function(e, t) {
        var i = this.length;
        e > 0 ? e > i && (e = i) : void 0 == e ? e = 0 : e < 0 && (e = Math.max(i + e, 0)), 
        e + t < i || (t = i - e);
        var n = this.slice(e, e + t), s = f.call(arguments, 2), r = s.length;
        if (e === i) r && this.push.apply(this, s); else {
            var o = Math.min(t, i - e), a = e + o, l = a + r - o, h = i - a, c = i - o;
            if (l < a) for (var u = 0; u < h; ++u) this[l + u] = this[a + u]; else if (l > a) for (u = h; u--; ) this[l + u] = this[a + u];
            if (r && e === c) this.length = c, this.push.apply(this, s); else for (this.length = c + r, 
            u = 0; u < r; ++u) this[e + u] = s[u];
        }
        return n;
    };
    Array.isArray || (Array.isArray = function(e) {
        return "[object Array]" == m(e);
    });
    var v = Object("a"), L = "a" != v[0] || !(0 in v);
    if (Array.prototype.forEach || (Array.prototype.forEach = function(e) {
        var t = T(this), i = L && "[object String]" == m(this) ? this.split("") : t, n = arguments[1], s = -1, r = i.length >>> 0;
        if ("[object Function]" != m(e)) throw new TypeError();
        for (;++s < r; ) s in i && e.call(n, i[s], s, t);
    }), Array.prototype.map || (Array.prototype.map = function(e) {
        var t = T(this), i = L && "[object String]" == m(this) ? this.split("") : t, n = i.length >>> 0, s = Array(n), r = arguments[1];
        if ("[object Function]" != m(e)) throw new TypeError(e + " is not a function");
        for (var o = 0; o < n; o++) o in i && (s[o] = e.call(r, i[o], o, t));
        return s;
    }), Array.prototype.filter || (Array.prototype.filter = function(e) {
        var t, i = T(this), n = L && "[object String]" == m(this) ? this.split("") : i, s = n.length >>> 0, r = [], o = arguments[1];
        if ("[object Function]" != m(e)) throw new TypeError(e + " is not a function");
        for (var a = 0; a < s; a++) a in n && (t = n[a], e.call(o, t, a, i) && r.push(t));
        return r;
    }), Array.prototype.every || (Array.prototype.every = function(e) {
        var t = T(this), i = L && "[object String]" == m(this) ? this.split("") : t, n = i.length >>> 0, s = arguments[1];
        if ("[object Function]" != m(e)) throw new TypeError(e + " is not a function");
        for (var r = 0; r < n; r++) if (r in i && !e.call(s, i[r], r, t)) return !1;
        return !0;
    }), Array.prototype.some || (Array.prototype.some = function(e) {
        var t = T(this), i = L && "[object String]" == m(this) ? this.split("") : t, n = i.length >>> 0, s = arguments[1];
        if ("[object Function]" != m(e)) throw new TypeError(e + " is not a function");
        for (var r = 0; r < n; r++) if (r in i && e.call(s, i[r], r, t)) return !0;
        return !1;
    }), Array.prototype.reduce || (Array.prototype.reduce = function(e) {
        var t = T(this), i = L && "[object String]" == m(this) ? this.split("") : t, n = i.length >>> 0;
        if ("[object Function]" != m(e)) throw new TypeError(e + " is not a function");
        if (!n && 1 == arguments.length) throw new TypeError("reduce of empty array with no initial value");
        var s, r = 0;
        if (arguments.length >= 2) s = arguments[1]; else for (;;) {
            if (r in i) {
                s = i[r++];
                break;
            }
            if (++r >= n) throw new TypeError("reduce of empty array with no initial value");
        }
        for (;r < n; r++) r in i && (s = e.call(void 0, s, i[r], r, t));
        return s;
    }), Array.prototype.reduceRight || (Array.prototype.reduceRight = function(e) {
        var t = T(this), i = L && "[object String]" == m(this) ? this.split("") : t, n = i.length >>> 0;
        if ("[object Function]" != m(e)) throw new TypeError(e + " is not a function");
        if (!n && 1 == arguments.length) throw new TypeError("reduceRight of empty array with no initial value");
        var s, r = n - 1;
        if (arguments.length >= 2) s = arguments[1]; else for (;;) {
            if (r in i) {
                s = i[r--];
                break;
            }
            if (--r < 0) throw new TypeError("reduceRight of empty array with no initial value");
        }
        do {
            r in this && (s = e.call(void 0, s, i[r], r, t));
        } while (r--);
        return s;
    }), Array.prototype.indexOf && -1 == [ 0, 1 ].indexOf(1, 2) || (Array.prototype.indexOf = function(e) {
        var t = L && "[object String]" == m(this) ? this.split("") : T(this), i = t.length >>> 0;
        if (!i) return -1;
        var n = 0;
        for (arguments.length > 1 && (n = r(arguments[1])), n = n >= 0 ? n : Math.max(0, i + n); n < i; n++) if (n in t && t[n] === e) return n;
        return -1;
    }), Array.prototype.lastIndexOf && -1 == [ 0, 1 ].lastIndexOf(0, -3) || (Array.prototype.lastIndexOf = function(e) {
        var t = L && "[object String]" == m(this) ? this.split("") : T(this), i = t.length >>> 0;
        if (!i) return -1;
        var n = i - 1;
        for (arguments.length > 1 && (n = Math.min(n, r(arguments[1]))), n = n >= 0 ? n : i - Math.abs(n); n >= 0; n--) if (n in t && e === t[n]) return n;
        return -1;
    }), Object.getPrototypeOf || (Object.getPrototypeOf = function(e) {
        return e.__proto__ || (e.constructor ? e.constructor.prototype : d);
    }), !Object.getOwnPropertyDescriptor) {
        Object.getOwnPropertyDescriptor = function(e, t) {
            if ("object" != typeof e && "function" != typeof e || null === e) throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: " + e);
            if (g(e, t)) {
                var i;
                if (i = {
                    "enumerable": !0,
                    "configurable": !0
                }, c) {
                    var n = e.__proto__;
                    e.__proto__ = d;
                    var s = l(e, t), r = h(e, t);
                    if (e.__proto__ = n, s || r) return s && (i.get = s), r && (i.set = r), i;
                }
                return i.value = e[t], i;
            }
        };
    }
    if (Object.getOwnPropertyNames || (Object.getOwnPropertyNames = function(e) {
        return Object.keys(e);
    }), !Object.create) {
        var w;
        w = null === Object.prototype.__proto__ ? function() {
            return {
                "__proto__": null
            };
        } : function() {
            var e = {};
            for (var t in e) e[t] = null;
            return e.constructor = e.hasOwnProperty = e.propertyIsEnumerable = e.isPrototypeOf = e.toLocaleString = e.toString = e.valueOf = e.__proto__ = null, 
            e;
        }, Object.create = function(e, t) {
            var i;
            if (null === e) i = w(); else {
                if ("object" != typeof e) throw new TypeError("typeof prototype[" + typeof e + "] != 'object'");
                var n = function() {};
                n.prototype = e, (i = new n()).__proto__ = e;
            }
            return void 0 !== t && Object.defineProperties(i, t), i;
        };
    }
    if (Object.defineProperty) {
        var b = s({}), C = "undefined" == typeof document || s(document.createElement("div"));
        if (!b || !C) var O = Object.defineProperty;
    }
    if (!Object.defineProperty || O) {
        Object.defineProperty = function(e, t, i) {
            if ("object" != typeof e && "function" != typeof e || null === e) throw new TypeError("Object.defineProperty called on non-object: " + e);
            if ("object" != typeof i && "function" != typeof i || null === i) throw new TypeError("Property description must be an object: " + i);
            if (O) try {
                return O.call(Object, e, t, i);
            } catch (e) {}
            if (g(i, "value")) if (c && (l(e, t) || h(e, t))) {
                var n = e.__proto__;
                e.__proto__ = d, delete e[t], e[t] = i.value, e.__proto__ = n;
            } else e[t] = i.value; else {
                if (!c) throw new TypeError("getters & setters can not be defined on this javascript engine");
                g(i, "get") && o(e, t, i.get), g(i, "set") && a(e, t, i.set);
            }
            return e;
        };
    }
    Object.defineProperties || (Object.defineProperties = function(e, t) {
        for (var i in t) g(t, i) && Object.defineProperty(e, i, t[i]);
        return e;
    }), Object.seal || (Object.seal = function(e) {
        return e;
    }), Object.freeze || (Object.freeze = function(e) {
        return e;
    });
    try {
        Object.freeze(function() {});
    } catch (e) {
        Object.freeze = function(e) {
            return function(t) {
                return "function" == typeof t ? t : e(t);
            };
        }(Object.freeze);
    }
    if (Object.preventExtensions || (Object.preventExtensions = function(e) {
        return e;
    }), Object.isSealed || (Object.isSealed = function(e) {
        return !1;
    }), Object.isFrozen || (Object.isFrozen = function(e) {
        return !1;
    }), Object.isExtensible || (Object.isExtensible = function(e) {
        if (Object(e) === e) throw new TypeError();
        for (var t = ""; g(e, t); ) t += "?";
        e[t] = !0;
        var i = g(e, t);
        return delete e[t], i;
    }), !Object.keys) {
        var S = !0, x = [ "toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor" ], E = x.length;
        for (var A in {
            "toString": null
        }) S = !1;
        Object.keys = function(e) {
            if ("object" != typeof e && "function" != typeof e || null === e) throw new TypeError("Object.keys called on a non-object");
            var t = [];
            for (var i in e) g(e, i) && t.push(i);
            if (S) for (var n = 0, s = E; n < s; n++) {
                var r = x[n];
                g(e, r) && t.push(r);
            }
            return t;
        };
    }
    Date.now || (Date.now = function() {
        return new Date().getTime();
    });
    var _ = "\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff";
    if (!String.prototype.trim || _.trim()) {
        _ = "[" + _ + "]";
        var F = new RegExp("^" + _ + _ + "*"), N = new RegExp(_ + _ + "*$");
        String.prototype.trim = function() {
            return String(this).replace(F, "").replace(N, "");
        };
    }
    var T = function(e) {
        if (null == e) throw new TypeError("can't convert " + e + " to object");
        return Object(e);
    };
}), ace.define("ace/lib/fixoldbrowsers", [ "require", "exports", "module", "ace/lib/regexp", "ace/lib/es5-shim" ], function(e, t, i) {
    "use strict";
    e("./regexp"), e("./es5-shim");
}), ace.define("ace/lib/dom", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    var n = "http://www.w3.org/1999/xhtml";
    t.getDocumentHead = function(e) {
        return e || (e = document), e.head || e.getElementsByTagName("head")[0] || e.documentElement;
    }, t.createElement = function(e, t) {
        return document.createElementNS ? document.createElementNS(t || n, e) : document.createElement(e);
    }, t.hasCssClass = function(e, t) {
        return -1 !== (e.className || "").split(/\s+/g).indexOf(t);
    }, t.addCssClass = function(e, i) {
        t.hasCssClass(e, i) || (e.className += " " + i);
    }, t.removeCssClass = function(e, t) {
        for (var i = e.className.split(/\s+/g); ;) {
            var n = i.indexOf(t);
            if (-1 == n) break;
            i.splice(n, 1);
        }
        e.className = i.join(" ");
    }, t.toggleCssClass = function(e, t) {
        for (var i = e.className.split(/\s+/g), n = !0; ;) {
            var s = i.indexOf(t);
            if (-1 == s) break;
            n = !1, i.splice(s, 1);
        }
        return n && i.push(t), e.className = i.join(" "), n;
    }, t.setCssClass = function(e, i, n) {
        n ? t.addCssClass(e, i) : t.removeCssClass(e, i);
    }, t.hasCssString = function(e, t) {
        var i, n = 0;
        if ((t = t || document).createStyleSheet && (i = t.styleSheets)) {
            for (;n < i.length; ) if (i[n++].owningElement.id === e) return !0;
        } else if (i = t.getElementsByTagName("style")) for (;n < i.length; ) if (i[n++].id === e) return !0;
        return !1;
    }, t.importCssString = function(e, i, s) {
        if (s = s || document, i && t.hasCssString(i, s)) return null;
        var r;
        s.createStyleSheet ? ((r = s.createStyleSheet()).cssText = e, i && (r.owningElement.id = i)) : ((r = s.createElementNS ? s.createElementNS(n, "style") : s.createElement("style")).appendChild(s.createTextNode(e)), 
        i && (r.id = i), t.getDocumentHead(s).appendChild(r));
    }, t.importCssStylsheet = function(e, i) {
        if (i.createStyleSheet) i.createStyleSheet(e); else {
            var n = t.createElement("link");
            n.rel = "stylesheet", n.href = e, t.getDocumentHead(i).appendChild(n);
        }
    }, t.getInnerWidth = function(e) {
        return parseInt(t.computedStyle(e, "paddingLeft"), 10) + parseInt(t.computedStyle(e, "paddingRight"), 10) + e.clientWidth;
    }, t.getInnerHeight = function(e) {
        return parseInt(t.computedStyle(e, "paddingTop"), 10) + parseInt(t.computedStyle(e, "paddingBottom"), 10) + e.clientHeight;
    }, "undefined" != typeof document && (void 0 !== window.pageYOffset ? (t.getPageScrollTop = function() {
        return window.pageYOffset;
    }, t.getPageScrollLeft = function() {
        return window.pageXOffset;
    }) : (t.getPageScrollTop = function() {
        return document.body.scrollTop;
    }, t.getPageScrollLeft = function() {
        return document.body.scrollLeft;
    }), window.getComputedStyle ? t.computedStyle = function(e, t) {
        return t ? (window.getComputedStyle(e, "") || {})[t] || "" : window.getComputedStyle(e, "") || {};
    } : t.computedStyle = function(e, t) {
        return t ? e.currentStyle[t] : e.currentStyle;
    }, t.scrollbarWidth = function(e) {
        var i = t.createElement("ace_inner");
        i.style.width = "100%", i.style.minWidth = "0px", i.style.height = "200px", i.style.display = "block";
        var n = t.createElement("ace_outer"), s = n.style;
        s.position = "absolute", s.left = "-10000px", s.overflow = "hidden", s.width = "200px", 
        s.minWidth = "0px", s.height = "150px", s.display = "block", n.appendChild(i);
        var r = e.documentElement;
        r.appendChild(n);
        var o = i.offsetWidth;
        s.overflow = "scroll";
        var a = i.offsetWidth;
        return o == a && (a = n.clientWidth), r.removeChild(n), o - a;
    }, t.setInnerHtml = function(e, t) {
        var i = e.cloneNode(!1);
        return i.innerHTML = t, e.parentNode.replaceChild(i, e), i;
    }, "textContent" in document.documentElement ? (t.setInnerText = function(e, t) {
        e.textContent = t;
    }, t.getInnerText = function(e) {
        return e.textContent;
    }) : (t.setInnerText = function(e, t) {
        e.innerText = t;
    }, t.getInnerText = function(e) {
        return e.innerText;
    }), t.getParentWindow = function(e) {
        return e.defaultView || e.parentWindow;
    });
}), ace.define("ace/lib/oop", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    t.inherits = function(e, t) {
        e.super_ = t, e.prototype = Object.create(t.prototype, {
            "constructor": {
                "value": e,
                "enumerable": !1,
                "writable": !0,
                "configurable": !0
            }
        });
    }, t.mixin = function(e, t) {
        for (var i in t) e[i] = t[i];
        return e;
    }, t.implement = function(e, i) {
        t.mixin(e, i);
    };
}), ace.define("ace/lib/keys", [ "require", "exports", "module", "ace/lib/fixoldbrowsers", "ace/lib/oop" ], function(e, t, i) {
    "use strict";
    e("./fixoldbrowsers");
    var n = e("./oop"), s = function() {
        var e, t, i = {
            "MODIFIER_KEYS": {
                "16": "Shift",
                "17": "Ctrl",
                "18": "Alt",
                "224": "Meta"
            },
            "KEY_MODS": {
                "ctrl": 1,
                "alt": 2,
                "option": 2,
                "shift": 4,
                "super": 8,
                "meta": 8,
                "command": 8,
                "cmd": 8
            },
            "FUNCTION_KEYS": {
                "8": "Backspace",
                "9": "Tab",
                "13": "Return",
                "19": "Pause",
                "27": "Esc",
                "32": "Space",
                "33": "PageUp",
                "34": "PageDown",
                "35": "End",
                "36": "Home",
                "37": "Left",
                "38": "Up",
                "39": "Right",
                "40": "Down",
                "44": "Print",
                "45": "Insert",
                "46": "Delete",
                "96": "Numpad0",
                "97": "Numpad1",
                "98": "Numpad2",
                "99": "Numpad3",
                "100": "Numpad4",
                "101": "Numpad5",
                "102": "Numpad6",
                "103": "Numpad7",
                "104": "Numpad8",
                "105": "Numpad9",
                "-13": "NumpadEnter",
                "112": "F1",
                "113": "F2",
                "114": "F3",
                "115": "F4",
                "116": "F5",
                "117": "F6",
                "118": "F7",
                "119": "F8",
                "120": "F9",
                "121": "F10",
                "122": "F11",
                "123": "F12",
                "144": "Numlock",
                "145": "Scrolllock"
            },
            "PRINTABLE_KEYS": {
                "32": " ",
                "48": "0",
                "49": "1",
                "50": "2",
                "51": "3",
                "52": "4",
                "53": "5",
                "54": "6",
                "55": "7",
                "56": "8",
                "57": "9",
                "59": ";",
                "61": "=",
                "65": "a",
                "66": "b",
                "67": "c",
                "68": "d",
                "69": "e",
                "70": "f",
                "71": "g",
                "72": "h",
                "73": "i",
                "74": "j",
                "75": "k",
                "76": "l",
                "77": "m",
                "78": "n",
                "79": "o",
                "80": "p",
                "81": "q",
                "82": "r",
                "83": "s",
                "84": "t",
                "85": "u",
                "86": "v",
                "87": "w",
                "88": "x",
                "89": "y",
                "90": "z",
                "107": "+",
                "109": "-",
                "110": ".",
                "186": ";",
                "187": "=",
                "188": ",",
                "189": "-",
                "190": ".",
                "191": "/",
                "192": "`",
                "219": "[",
                "220": "\\",
                "221": "]",
                "222": "'"
            }
        };
        for (t in i.FUNCTION_KEYS) e = i.FUNCTION_KEYS[t].toLowerCase(), i[e] = parseInt(t, 10);
        for (t in i.PRINTABLE_KEYS) e = i.PRINTABLE_KEYS[t].toLowerCase(), i[e] = parseInt(t, 10);
        return n.mixin(i, i.MODIFIER_KEYS), n.mixin(i, i.PRINTABLE_KEYS), n.mixin(i, i.FUNCTION_KEYS), 
        i.enter = i.return, i.escape = i.esc, i.del = i.delete, i[173] = "-", function() {
            for (var e = [ "cmd", "ctrl", "alt", "shift" ], t = Math.pow(2, e.length); t--; ) i.KEY_MODS[t] = e.filter(function(e) {
                return t & i.KEY_MODS[e];
            }).join("-") + "-";
        }(), i.KEY_MODS[0] = "", i.KEY_MODS[-1] = "input-", i;
    }();
    n.mixin(t, s), t.keyCodeToString = function(e) {
        var t = s[e];
        return "string" != typeof t && (t = String.fromCharCode(e)), t.toLowerCase();
    };
}), ace.define("ace/lib/useragent", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    if (t.OS = {
        "LINUX": "LINUX",
        "MAC": "MAC",
        "WINDOWS": "WINDOWS"
    }, t.getOS = function() {
        return t.isMac ? t.OS.MAC : t.isLinux ? t.OS.LINUX : t.OS.WINDOWS;
    }, "object" == typeof navigator) {
        var n = (navigator.platform.match(/mac|win|linux/i) || [ "other" ])[0].toLowerCase(), s = navigator.userAgent;
        t.isWin = "win" == n, t.isMac = "mac" == n, t.isLinux = "linux" == n, t.isIE = "Microsoft Internet Explorer" == navigator.appName || navigator.appName.indexOf("MSAppHost") >= 0 ? parseFloat((s.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/) || [])[1]) : parseFloat((s.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/) || [])[1]), 
        t.isOldIE = t.isIE && t.isIE < 9, t.isGecko = t.isMozilla = (window.Controllers || window.controllers) && "Gecko" === window.navigator.product, 
        t.isOldGecko = t.isGecko && parseInt((s.match(/rv\:(\d+)/) || [])[1], 10) < 4, t.isOpera = window.opera && "[object Opera]" == Object.prototype.toString.call(window.opera), 
        t.isWebKit = parseFloat(s.split("WebKit/")[1]) || void 0, t.isChrome = parseFloat(s.split(" Chrome/")[1]) || void 0, 
        t.isAIR = s.indexOf("AdobeAIR") >= 0, t.isIPad = s.indexOf("iPad") >= 0, t.isTouchPad = s.indexOf("TouchPad") >= 0, 
        t.isChromeOS = s.indexOf(" CrOS ") >= 0;
    }
}), ace.define("ace/lib/event", [ "require", "exports", "module", "ace/lib/keys", "ace/lib/useragent" ], function(e, t, i) {
    "use strict";
    function n(e, t, i) {
        var n = o(t);
        if (!r.isMac && a) {
            if ((a[91] || a[92]) && (n |= 8), a.altGr) {
                if (3 == (3 & n)) return;
                a.altGr = 0;
            }
            if (18 === i || 17 === i) {
                var h = "location" in t ? t.location : t.keyLocation;
                17 === i && 1 === h ? 1 == a[i] && (l = t.timeStamp) : 18 === i && 3 === n && 2 === h && t.timestamp - l < 50 && (a.altGr = !0);
            }
        }
        if (i in s.MODIFIER_KEYS && (i = -1), 8 & n && (91 === i || 93 === i) && (i = -1), 
        n || 13 !== i || 3 !== (h = "location" in t ? t.location : t.keyLocation) || (e(t, n, -i), 
        !t.defaultPrevented)) {
            if (r.isChromeOS && 8 & n) {
                if (e(t, n, i), t.defaultPrevented) return;
                n &= -9;
            }
            return !!(n || i in s.FUNCTION_KEYS || i in s.PRINTABLE_KEYS) && e(t, n, i);
        }
    }
    var s = e("./keys"), r = e("./useragent");
    t.addListener = function(e, t, i) {
        if (e.addEventListener) return e.addEventListener(t, i, !1);
        if (e.attachEvent) {
            var n = function() {
                i.call(e, window.event);
            };
            i._wrapper = n, e.attachEvent("on" + t, n);
        }
    }, t.removeListener = function(e, t, i) {
        if (e.removeEventListener) return e.removeEventListener(t, i, !1);
        e.detachEvent && e.detachEvent("on" + t, i._wrapper || i);
    }, t.stopEvent = function(e) {
        return t.stopPropagation(e), t.preventDefault(e), !1;
    }, t.stopPropagation = function(e) {
        e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0;
    }, t.preventDefault = function(e) {
        e.preventDefault ? e.preventDefault() : e.returnValue = !1;
    }, t.getButton = function(e) {
        return "dblclick" == e.type ? 0 : "contextmenu" == e.type || r.isMac && e.ctrlKey && !e.altKey && !e.shiftKey ? 2 : e.preventDefault ? e.button : {
            "1": 0,
            "2": 2,
            "4": 1
        }[e.button];
    }, t.capture = function(e, i, n) {
        function s(e) {
            i && i(e), n && n(e), t.removeListener(document, "mousemove", i, !0), t.removeListener(document, "mouseup", s, !0), 
            t.removeListener(document, "dragstart", s, !0);
        }
        return t.addListener(document, "mousemove", i, !0), t.addListener(document, "mouseup", s, !0), 
        t.addListener(document, "dragstart", s, !0), s;
    }, t.addMouseWheelListener = function(e, i) {
        "onmousewheel" in e ? t.addListener(e, "mousewheel", function(e) {
            void 0 !== e.wheelDeltaX ? (e.wheelX = -e.wheelDeltaX / 8, e.wheelY = -e.wheelDeltaY / 8) : (e.wheelX = 0, 
            e.wheelY = -e.wheelDelta / 8), i(e);
        }) : "onwheel" in e ? t.addListener(e, "wheel", function(e) {
            switch (e.deltaMode) {
              case e.DOM_DELTA_PIXEL:
                e.wheelX = .35 * e.deltaX || 0, e.wheelY = .35 * e.deltaY || 0;
                break;

              case e.DOM_DELTA_LINE:
              case e.DOM_DELTA_PAGE:
                e.wheelX = 5 * (e.deltaX || 0), e.wheelY = 5 * (e.deltaY || 0);
            }
            i(e);
        }) : t.addListener(e, "DOMMouseScroll", function(e) {
            e.axis && e.axis == e.HORIZONTAL_AXIS ? (e.wheelX = 5 * (e.detail || 0), e.wheelY = 0) : (e.wheelX = 0, 
            e.wheelY = 5 * (e.detail || 0)), i(e);
        });
    }, t.addMultiMouseDownListener = function(e, i, n, s) {
        var o, a, l, h = 0, c = {
            "2": "dblclick",
            "3": "tripleclick",
            "4": "quadclick"
        };
        t.addListener(e, "mousedown", function(e) {
            if (0 !== t.getButton(e) ? h = 0 : e.detail > 1 ? ++h > 4 && (h = 1) : h = 1, r.isIE) {
                var u = Math.abs(e.clientX - o) > 5 || Math.abs(e.clientY - a) > 5;
                l && !u || (h = 1), l && clearTimeout(l), l = setTimeout(function() {
                    l = null;
                }, i[h - 1] || 600), 1 == h && (o = e.clientX, a = e.clientY);
            }
            if (e._clicks = h, n[s]("mousedown", e), h > 4) h = 0; else if (h > 1) return n[s](c[h], e);
        }), r.isOldIE && t.addListener(e, "dblclick", function(e) {
            h = 2, l && clearTimeout(l), l = setTimeout(function() {
                l = null;
            }, i[h - 1] || 600), n[s]("mousedown", e), n[s](c[h], e);
        });
    };
    var o = !r.isMac || !r.isOpera || "KeyboardEvent" in window ? function(e) {
        return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);
    } : function(e) {
        return 0 | (e.metaKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.ctrlKey ? 8 : 0);
    };
    t.getModifierString = function(e) {
        return s.KEY_MODS[o(e)];
    };
    var a = null, l = 0;
    if (t.addCommandKeyListener = function(e, i) {
        var s = t.addListener;
        if (r.isOldGecko || r.isOpera && !("KeyboardEvent" in window)) {
            var o = null;
            s(e, "keydown", function(e) {
                o = e.keyCode;
            }), s(e, "keypress", function(e) {
                return n(i, e, o);
            });
        } else {
            var l = null;
            s(e, "keydown", function(e) {
                a[e.keyCode] = (a[e.keyCode] || 0) + 1;
                var t = n(i, e, e.keyCode);
                return l = e.defaultPrevented, t;
            }), s(e, "keypress", function(e) {
                l && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) && (t.stopEvent(e), l = null);
            }), s(e, "keyup", function(e) {
                a[e.keyCode] = null;
            }), a || (a = Object.create(null), s(window, "focus", function(e) {
                a = Object.create(null);
            }));
        }
    }, window.postMessage && !r.isOldIE) {
        t.nextTick = function(e, i) {
            i = i || window;
            t.addListener(i, "message", function n(s) {
                "zero-timeout-message-1" == s.data && (t.stopPropagation(s), t.removeListener(i, "message", n), 
                e());
            }), i.postMessage("zero-timeout-message-1", "*");
        };
    }
    t.nextFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame, 
    t.nextFrame ? t.nextFrame = t.nextFrame.bind(window) : t.nextFrame = function(e) {
        setTimeout(e, 17);
    };
}), ace.define("ace/lib/lang", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    t.last = function(e) {
        return e[e.length - 1];
    }, t.stringReverse = function(e) {
        return e.split("").reverse().join("");
    }, t.stringRepeat = function(e, t) {
        for (var i = ""; t > 0; ) 1 & t && (i += e), (t >>= 1) && (e += e);
        return i;
    };
    var n = /^\s\s*/, s = /\s\s*$/;
    t.stringTrimLeft = function(e) {
        return e.replace(n, "");
    }, t.stringTrimRight = function(e) {
        return e.replace(s, "");
    }, t.copyObject = function(e) {
        var t = {};
        for (var i in e) t[i] = e[i];
        return t;
    }, t.copyArray = function(e) {
        for (var t = [], i = 0, n = e.length; i < n; i++) e[i] && "object" == typeof e[i] ? t[i] = this.copyObject(e[i]) : t[i] = e[i];
        return t;
    }, t.deepCopy = function(e) {
        if ("object" != typeof e || !e) return e;
        var i = e.constructor;
        if (i === RegExp) return e;
        var n = i();
        for (var s in e) "object" == typeof e[s] ? n[s] = t.deepCopy(e[s]) : n[s] = e[s];
        return n;
    }, t.arrayToMap = function(e) {
        for (var t = {}, i = 0; i < e.length; i++) t[e[i]] = 1;
        return t;
    }, t.createMap = function(e) {
        var t = Object.create(null);
        for (var i in e) t[i] = e[i];
        return t;
    }, t.arrayRemove = function(e, t) {
        for (var i = 0; i <= e.length; i++) t === e[i] && e.splice(i, 1);
    }, t.escapeRegExp = function(e) {
        return e.replace(/([.*+?^${}()|[\]\/\\])/g, "\\$1");
    }, t.escapeHTML = function(e) {
        return e.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/'/g, "&#39;").replace(/</g, "&#60;");
    }, t.getMatchOffsets = function(e, t) {
        var i = [];
        return e.replace(t, function(e) {
            i.push({
                "offset": arguments[arguments.length - 2],
                "length": e.length
            });
        }), i;
    }, t.deferredCall = function(e) {
        var t = null, i = function() {
            t = null, e();
        }, n = function(e) {
            return n.cancel(), t = setTimeout(i, e || 0), n;
        };
        return n.schedule = n, n.call = function() {
            return this.cancel(), e(), n;
        }, n.cancel = function() {
            return clearTimeout(t), t = null, n;
        }, n.isPending = function() {
            return t;
        }, n;
    }, t.delayedCall = function(e, t) {
        var i = null, n = function() {
            i = null, e();
        }, s = function(e) {
            null == i && (i = setTimeout(n, e || t));
        };
        return s.delay = function(e) {
            i && clearTimeout(i), i = setTimeout(n, e || t);
        }, s.schedule = s, s.call = function() {
            this.cancel(), e();
        }, s.cancel = function() {
            i && clearTimeout(i), i = null;
        }, s.isPending = function() {
            return i;
        }, s;
    };
}), ace.define("ace/keyboard/textinput", [ "require", "exports", "module", "ace/lib/event", "ace/lib/useragent", "ace/lib/dom", "ace/lib/lang" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/event"), s = e("../lib/useragent"), r = e("../lib/dom"), o = e("../lib/lang"), a = s.isChrome < 18, l = s.isIE;
    t.TextInput = function(e, t) {
        function i(e) {
            if (!m) {
                if (m = !0, E) t = 0, i = e ? 0 : u.value.length - 1; else var t = e ? 2 : 1, i = 2;
                try {
                    u.setSelectionRange(t, i);
                } catch (e) {}
                m = !1;
            }
        }
        function h() {
            m || (u.value = p, s.isWebKit && w.schedule());
        }
        function c() {
            clearTimeout(B), B = setTimeout(function() {
                g && (u.style.cssText = g, g = ""), null == t.renderer.$keepTextAreaAtCursor && (t.renderer.$keepTextAreaAtCursor = !0, 
                t.renderer.$moveTextAreaToCursor());
            }, s.isOldIE ? 200 : 0);
        }
        var u = r.createElement("textarea");
        u.className = "ace_text-input", s.isTouchPad && u.setAttribute("x-palm-disable-auto-cap", !0), 
        u.setAttribute("wrap", "off"), u.setAttribute("autocorrect", "off"), u.setAttribute("autocapitalize", "off"), 
        u.setAttribute("spellcheck", !1), u.style.opacity = "0", s.isOldIE && (u.style.top = "-1000px"), 
        e.insertBefore(u, e.firstChild);
        var p = "", d = !1, f = !1, m = !1, g = "", y = !0;
        try {
            var v = document.activeElement === u;
        } catch (e) {}
        n.addListener(u, "blur", function(e) {
            t.onBlur(e), v = !1;
        }), n.addListener(u, "focus", function(e) {
            v = !0, t.onFocus(e), i();
        }), this.focus = function() {
            if (g) return u.focus();
            u.style.position = "fixed", u.style.top = "-1000px", u.focus(), setTimeout(function() {
                u.style.position = "";
            }, 0);
        }, this.blur = function() {
            u.blur();
        }, this.isFocused = function() {
            return v;
        };
        var L = o.delayedCall(function() {
            v && i(y);
        }), w = o.delayedCall(function() {
            m || (u.value = p, v && i());
        });
        s.isWebKit || t.addEventListener("changeSelection", function() {
            t.selection.isEmpty() != y && (y = !y, L.schedule());
        }), h(), v && t.onFocus();
        var b = function(e) {
            return 0 === e.selectionStart && e.selectionEnd === e.value.length;
        };
        if (!u.setSelectionRange && u.createTextRange && (u.setSelectionRange = function(e, t) {
            var i = this.createTextRange();
            i.collapse(!0), i.moveStart("character", e), i.moveEnd("character", t), i.select();
        }, b = function(e) {
            try {
                var t = e.ownerDocument.selection.createRange();
            } catch (e) {}
            return !(!t || t.parentElement() != e) && t.text == e.value;
        }), s.isOldIE) {
            var C = !1, O = function(e) {
                if (!C) {
                    var t = u.value;
                    if (!m && t && t != p) {
                        if (e && t == p[0]) return S.schedule();
                        _(t), C = !0, h(), C = !1;
                    }
                }
            }, S = o.delayedCall(O);
            n.addListener(u, "propertychange", O);
            var x = {
                "13": 1,
                "27": 1
            };
            n.addListener(u, "keyup", function(e) {
                if (!m || u.value && !x[e.keyCode] || setTimeout(R, 0), (u.value.charCodeAt(0) || 0) < 129) return S.call();
                m ? P() : D();
            }), n.addListener(u, "keydown", function(e) {
                S.schedule(50);
            });
        }
        var E = null;
        this.setInputHandler = function(e) {
            E = e;
        }, this.getInputHandler = function() {
            return E;
        };
        var A = !1, _ = function(e) {
            E && (e = E(e), E = null), f ? (i(), e && t.onPaste(e), f = !1) : e == p.charAt(0) ? A ? t.execCommand("del", {
                "source": "ace"
            }) : t.execCommand("backspace", {
                "source": "ace"
            }) : (e.substring(0, 2) == p ? e = e.substr(2) : e.charAt(0) == p.charAt(0) ? e = e.substr(1) : e.charAt(e.length - 1) == p.charAt(0) && (e = e.slice(0, -1)), 
            e.charAt(e.length - 1) == p.charAt(0) && (e = e.slice(0, -1)), e && t.onTextInput(e)), 
            A && (A = !1);
        }, F = function(e, t) {
            var i = e.clipboardData || window.clipboardData;
            if (i && !a) {
                var n = l ? "Text" : "text/plain";
                return t ? !1 !== i.setData(n, t) : i.getData(n);
            }
        }, N = function(e, s) {
            var r = t.getCopyText();
            if (!r) return n.preventDefault(e);
            F(e, r) ? (s ? t.onCut() : t.onCopy(), n.preventDefault(e)) : (d = !0, u.value = r, 
            u.select(), setTimeout(function() {
                d = !1, h(), i(), s ? t.onCut() : t.onCopy();
            }));
        }, T = function(e) {
            N(e, !0);
        }, M = function(e) {
            N(e, !1);
        }, k = function(e) {
            var r = F(e);
            "string" == typeof r ? (r && t.onPaste(r), s.isIE && setTimeout(i), n.preventDefault(e)) : (u.value = "", 
            f = !0);
        };
        n.addCommandKeyListener(u, t.onCommandKey.bind(t)), n.addListener(u, "select", function(e) {
            d ? d = !1 : b(u) ? (t.selectAll(), i()) : E && i(t.selection.isEmpty());
        }), n.addListener(u, "input", function(e) {
            if (!m) {
                var t = u.value;
                _(t), h();
            }
        }), n.addListener(u, "cut", T), n.addListener(u, "copy", M), n.addListener(u, "paste", k), 
        "oncut" in u && "oncopy" in u && "onpaste" in u || n.addListener(e, "keydown", function(e) {
            if ((!s.isMac || e.metaKey) && e.ctrlKey) switch (e.keyCode) {
              case 67:
                M(e);
                break;

              case 86:
                k(e);
                break;

              case 88:
                T(e);
            }
        });
        var D = function(e) {
            m || !t.onCompositionStart || t.$readOnly || (m = {}, t.onCompositionStart(), setTimeout(P, 0), 
            t.on("mousedown", R), t.selection.isEmpty() || (t.insert(""), t.session.markUndoGroup(), 
            t.selection.clearSelection()), t.session.markUndoGroup());
        }, P = function() {
            if (m && t.onCompositionUpdate && !t.$readOnly) {
                var e = u.value.replace(/\x01/g, "");
                if (m.lastValue !== e && (t.onCompositionUpdate(e), m.lastValue && t.undo(), m.lastValue = e, 
                m.lastValue)) {
                    var i = t.selection.getRange();
                    t.insert(m.lastValue), t.session.markUndoGroup(), m.range = t.selection.getRange(), 
                    t.selection.setRange(i), t.selection.clearSelection();
                }
            }
        }, R = function(e) {
            if (t.onCompositionEnd && !t.$readOnly) {
                var i = m;
                m = !1;
                var n = setTimeout(function() {
                    n = null;
                    var e = u.value.replace(/\x01/g, "");
                    m || (e == i.lastValue ? h() : !i.lastValue && e && (h(), _(e)));
                });
                E = function(e) {
                    return n && clearTimeout(n), (e = e.replace(/\x01/g, "")) == i.lastValue ? "" : (i.lastValue && n && t.undo(), 
                    e);
                }, t.onCompositionEnd(), t.removeListener("mousedown", R), "compositionend" == e.type && i.range && t.selection.setRange(i.range);
            }
        }, I = o.delayedCall(P, 50);
        n.addListener(u, "compositionstart", D), s.isGecko ? n.addListener(u, "text", function() {
            I.schedule();
        }) : (n.addListener(u, "keyup", function() {
            I.schedule();
        }), n.addListener(u, "keydown", function() {
            I.schedule();
        })), n.addListener(u, "compositionend", R), this.getElement = function() {
            return u;
        }, this.setReadOnly = function(e) {
            u.readOnly = e;
        }, this.onContextMenu = function(e) {
            A = !0, i(t.selection.isEmpty()), t._emit("nativecontextmenu", {
                "target": t,
                "domEvent": e
            }), this.moveToMouse(e, !0);
        }, this.moveToMouse = function(e, i) {
            if (i || !s.isOldIE) {
                g || (g = u.style.cssText), u.style.cssText = (i ? "z-index:100000;" : "") + "height:" + u.style.height + ";" + (s.isIE ? "opacity:0.1;" : "");
                var o = t.container.getBoundingClientRect(), a = r.computedStyle(t.container), l = o.top + (parseInt(a.borderTopWidth) || 0), h = o.left + (parseInt(o.borderLeftWidth) || 0), p = o.bottom - l - u.clientHeight - 2, d = function(e) {
                    u.style.left = e.clientX - h - 2 + "px", u.style.top = Math.min(e.clientY - l - 2, p) + "px";
                };
                d(e), "mousedown" == e.type && (t.renderer.$keepTextAreaAtCursor && (t.renderer.$keepTextAreaAtCursor = null), 
                s.isWin && !s.isOldIE && n.capture(t.container, d, c));
            }
        }, this.onContextMenuClose = c;
        var B, z = function(e) {
            t.textInput.onContextMenu(e), c();
        };
        n.addListener(t.renderer.scroller, "contextmenu", z), n.addListener(u, "contextmenu", z);
    };
}), ace.define("ace/mouse/default_handlers", [ "require", "exports", "module", "ace/lib/dom", "ace/lib/event", "ace/lib/useragent" ], function(e, t, i) {
    "use strict";
    function n(e) {
        e.$clickSelection = null;
        var t = e.editor;
        t.setDefaultHandler("mousedown", this.onMouseDown.bind(e)), t.setDefaultHandler("dblclick", this.onDoubleClick.bind(e)), 
        t.setDefaultHandler("tripleclick", this.onTripleClick.bind(e)), t.setDefaultHandler("quadclick", this.onQuadClick.bind(e)), 
        t.setDefaultHandler("mousewheel", this.onMouseWheel.bind(e)), [ "select", "startSelect", "selectEnd", "selectAllEnd", "selectByWordsEnd", "selectByLinesEnd", "dragWait", "dragWaitEnd", "focusWait" ].forEach(function(t) {
            e[t] = this[t];
        }, this), e.selectByLines = this.extendSelectionBy.bind(e, "getLineRange"), e.selectByWords = this.extendSelectionBy.bind(e, "getWordRange");
    }
    function s(e, t, i, n) {
        return Math.sqrt(Math.pow(i - e, 2) + Math.pow(n - t, 2));
    }
    function r(e, t) {
        if (e.start.row == e.end.row) i = 2 * t.column - e.start.column - e.end.column; else if (e.start.row != e.end.row - 1 || e.start.column || e.end.column) i = 2 * t.row - e.start.row - e.end.row; else var i = t.column - 4;
        return i < 0 ? {
            "cursor": e.start,
            "anchor": e.end
        } : {
            "cursor": e.end,
            "anchor": e.start
        };
    }
    e("../lib/dom"), e("../lib/event"), e("../lib/useragent");
    (function() {
        this.onMouseDown = function(e) {
            var t = e.inSelection(), i = e.getDocumentPosition();
            this.mousedownEvent = e;
            var n = this.editor;
            if (0 !== e.getButton()) {
                var s = n.getSelectionRange().isEmpty();
                return n.$blockScrolling++, s && n.selection.moveToPosition(i), n.$blockScrolling--, 
                void n.textInput.onContextMenu(e.domEvent);
            }
            return this.mousedownEvent.time = Date.now(), !t || n.isFocused() || (n.focus(), 
            !this.$focusTimout || this.$clickSelection || n.inMultiSelectMode) ? (this.captureMouse(e), 
            this.startSelect(i, e.domEvent._clicks > 1), e.preventDefault()) : (this.setState("focusWait"), 
            void this.captureMouse(e));
        }, this.startSelect = function(e, t) {
            e = e || this.editor.renderer.screenToTextCoordinates(this.x, this.y);
            var i = this.editor;
            i.$blockScrolling++, this.mousedownEvent.getShiftKey() ? i.selection.selectToPosition(e) : t || i.selection.moveToPosition(e), 
            t || this.select(), i.renderer.scroller.setCapture && i.renderer.scroller.setCapture(), 
            i.setStyle("ace_selecting"), this.setState("select"), i.$blockScrolling--;
        }, this.select = function() {
            var e, t = this.editor, i = t.renderer.screenToTextCoordinates(this.x, this.y);
            if (t.$blockScrolling++, this.$clickSelection) {
                var n = this.$clickSelection.comparePoint(i);
                if (-1 == n) e = this.$clickSelection.end; else if (1 == n) e = this.$clickSelection.start; else {
                    var s = r(this.$clickSelection, i);
                    i = s.cursor, e = s.anchor;
                }
                t.selection.setSelectionAnchor(e.row, e.column);
            }
            t.selection.selectToPosition(i), t.$blockScrolling--, t.renderer.scrollCursorIntoView();
        }, this.extendSelectionBy = function(e) {
            var t, i = this.editor, n = i.renderer.screenToTextCoordinates(this.x, this.y), s = i.selection[e](n.row, n.column);
            if (i.$blockScrolling++, this.$clickSelection) {
                var o = this.$clickSelection.comparePoint(s.start), a = this.$clickSelection.comparePoint(s.end);
                if (-1 == o && a <= 0) t = this.$clickSelection.end, s.end.row == n.row && s.end.column == n.column || (n = s.start); else if (1 == a && o >= 0) t = this.$clickSelection.start, 
                s.start.row == n.row && s.start.column == n.column || (n = s.end); else if (-1 == o && 1 == a) n = s.end, 
                t = s.start; else {
                    var l = r(this.$clickSelection, n);
                    n = l.cursor, t = l.anchor;
                }
                i.selection.setSelectionAnchor(t.row, t.column);
            }
            i.selection.selectToPosition(n), i.$blockScrolling--, i.renderer.scrollCursorIntoView();
        }, this.selectEnd = this.selectAllEnd = this.selectByWordsEnd = this.selectByLinesEnd = function() {
            this.$clickSelection = null, this.editor.unsetStyle("ace_selecting"), this.editor.renderer.scroller.releaseCapture && this.editor.renderer.scroller.releaseCapture();
        }, this.focusWait = function() {
            var e = s(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y), t = Date.now();
            (e > 0 || t - this.mousedownEvent.time > this.$focusTimout) && this.startSelect(this.mousedownEvent.getDocumentPosition());
        }, this.onDoubleClick = function(e) {
            var t = e.getDocumentPosition(), i = this.editor, n = i.session.getBracketRange(t);
            n ? (n.isEmpty() && (n.start.column--, n.end.column++), this.setState("select")) : (n = i.selection.getWordRange(t.row, t.column), 
            this.setState("selectByWords")), this.$clickSelection = n, this.select();
        }, this.onTripleClick = function(e) {
            var t = e.getDocumentPosition(), i = this.editor;
            this.setState("selectByLines");
            var n = i.getSelectionRange();
            n.isMultiLine() && n.contains(t.row, t.column) ? (this.$clickSelection = i.selection.getLineRange(n.start.row), 
            this.$clickSelection.end = i.selection.getLineRange(n.end.row).end) : this.$clickSelection = i.selection.getLineRange(t.row), 
            this.select();
        }, this.onQuadClick = function(e) {
            var t = this.editor;
            t.selectAll(), this.$clickSelection = t.getSelectionRange(), this.setState("selectAll");
        }, this.onMouseWheel = function(e) {
            if (!e.getAccelKey()) {
                e.getShiftKey() && e.wheelY && !e.wheelX && (e.wheelX = e.wheelY, e.wheelY = 0);
                var t = e.domEvent.timeStamp, i = t - (this.$lastScrollTime || 0), n = this.editor;
                return n.renderer.isScrollableBy(e.wheelX * e.speed, e.wheelY * e.speed) || i < 200 ? (this.$lastScrollTime = t, 
                n.renderer.scrollBy(e.wheelX * e.speed, e.wheelY * e.speed), e.stop()) : void 0;
            }
        };
    }).call(n.prototype), t.DefaultHandlers = n;
}), ace.define("ace/tooltip", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/dom" ], function(e, t, i) {
    "use strict";
    function n(e) {
        this.isOpen = !1, this.$element = null, this.$parentNode = e;
    }
    e("./lib/oop");
    var s = e("./lib/dom");
    (function() {
        this.$init = function() {
            return this.$element = s.createElement("div"), this.$element.className = "ace_tooltip", 
            this.$element.style.display = "none", this.$parentNode.appendChild(this.$element), 
            this.$element;
        }, this.getElement = function() {
            return this.$element || this.$init();
        }, this.setText = function(e) {
            s.setInnerText(this.getElement(), e);
        }, this.setHtml = function(e) {
            this.getElement().innerHTML = e;
        }, this.setPosition = function(e, t) {
            this.getElement().style.left = e + "px", this.getElement().style.top = t + "px";
        }, this.setClassName = function(e) {
            s.addCssClass(this.getElement(), e);
        }, this.show = function(e, t, i) {
            null != e && this.setText(e), null != t && null != i && this.setPosition(t, i), 
            this.isOpen || (this.getElement().style.display = "block", this.isOpen = !0);
        }, this.hide = function() {
            this.isOpen && (this.getElement().style.display = "none", this.isOpen = !1);
        }, this.getHeight = function() {
            return this.getElement().offsetHeight;
        }, this.getWidth = function() {
            return this.getElement().offsetWidth;
        };
    }).call(n.prototype), t.Tooltip = n;
}), ace.define("ace/mouse/default_gutter_handler", [ "require", "exports", "module", "ace/lib/dom", "ace/lib/oop", "ace/lib/event", "ace/tooltip" ], function(e, t, i) {
    "use strict";
    function n(e) {
        a.call(this, e);
    }
    var s = e("../lib/dom"), r = e("../lib/oop"), o = e("../lib/event"), a = e("../tooltip").Tooltip;
    r.inherits(n, a), function() {
        this.setPosition = function(e, t) {
            var i = window.innerWidth || document.documentElement.clientWidth, n = window.innerHeight || document.documentElement.clientHeight, s = this.getWidth(), r = this.getHeight();
            t += 15, (e += 15) + s > i && (e -= e + s - i), t + r > n && (t -= 20 + r), a.prototype.setPosition.call(this, e, t);
        };
    }.call(n.prototype), t.GutterHandler = function(e) {
        function t() {
            var t = u.getDocumentPosition().row, n = l.$annotations[t];
            if (!n) return i();
            if (t == a.session.getLength()) {
                var s = a.renderer.pixelToScreenCoordinates(0, u.y).row, o = u.$pos;
                if (s > a.session.documentToScreenRow(o.row, o.column)) return i();
            }
            if (p != n) if (p = n.text.join("<br/>"), h.setHtml(p), h.show(), a.on("mousewheel", i), 
            e.$tooltipFollowsMouse) r(u); else {
                var c = l.$cells[a.session.documentToScreenRow(t, 0)].element.getBoundingClientRect(), d = h.getElement().style;
                d.left = c.right + "px", d.top = c.bottom + "px";
            }
        }
        function i() {
            c && (c = clearTimeout(c)), p && (h.hide(), p = null, a.removeEventListener("mousewheel", i));
        }
        function r(e) {
            h.setPosition(e.x, e.y);
        }
        var a = e.editor, l = a.renderer.$gutterLayer, h = new n(a.container);
        e.editor.setDefaultHandler("guttermousedown", function(t) {
            if (a.isFocused() && 0 == t.getButton() && "foldWidgets" != l.getRegion(t)) {
                var i = t.getDocumentPosition().row, n = a.session.selection;
                if (t.getShiftKey()) n.selectTo(i, 0); else {
                    if (2 == t.domEvent.detail) return a.selectAll(), t.preventDefault();
                    e.$clickSelection = a.selection.getLineRange(i);
                }
                return e.setState("selectByLines"), e.captureMouse(t), t.preventDefault();
            }
        });
        var c, u, p;
        e.editor.setDefaultHandler("guttermousemove", function(n) {
            var o = n.domEvent.target || n.domEvent.srcElement;
            if (s.hasCssClass(o, "ace_fold-widget")) return i();
            p && e.$tooltipFollowsMouse && r(n), u = n, c || (c = setTimeout(function() {
                c = null, u && !e.isMousePressed ? t() : i();
            }, 50));
        }), o.addListener(a.renderer.$gutter, "mouseout", function(e) {
            u = null, p && !c && (c = setTimeout(function() {
                c = null, i();
            }, 50));
        }), a.on("changeSession", i);
    };
}), ace.define("ace/mouse/mouse_event", [ "require", "exports", "module", "ace/lib/event", "ace/lib/useragent" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/event"), s = e("../lib/useragent"), r = t.MouseEvent = function(e, t) {
        this.domEvent = e, this.editor = t, this.x = this.clientX = e.clientX, this.y = this.clientY = e.clientY, 
        this.$pos = null, this.$inSelection = null, this.propagationStopped = !1, this.defaultPrevented = !1;
    };
    (function() {
        this.stopPropagation = function() {
            n.stopPropagation(this.domEvent), this.propagationStopped = !0;
        }, this.preventDefault = function() {
            n.preventDefault(this.domEvent), this.defaultPrevented = !0;
        }, this.stop = function() {
            this.stopPropagation(), this.preventDefault();
        }, this.getDocumentPosition = function() {
            return this.$pos ? this.$pos : (this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY), 
            this.$pos);
        }, this.inSelection = function() {
            if (null !== this.$inSelection) return this.$inSelection;
            var e = this.editor.getSelectionRange();
            if (e.isEmpty()) this.$inSelection = !1; else {
                var t = this.getDocumentPosition();
                this.$inSelection = e.contains(t.row, t.column);
            }
            return this.$inSelection;
        }, this.getButton = function() {
            return n.getButton(this.domEvent);
        }, this.getShiftKey = function() {
            return this.domEvent.shiftKey;
        }, this.getAccelKey = s.isMac ? function() {
            return this.domEvent.metaKey;
        } : function() {
            return this.domEvent.ctrlKey;
        };
    }).call(r.prototype);
}), ace.define("ace/mouse/dragdrop_handler", [ "require", "exports", "module", "ace/lib/dom", "ace/lib/event", "ace/lib/useragent" ], function(e, t, i) {
    "use strict";
    function n(e) {
        function t(e, t) {
            var i = Date.now(), n = !t || e.row != t.row, r = !t || e.column != t.column;
            !A || n || r ? (g.$blockScrolling += 1, g.moveCursorToPosition(e), g.$blockScrolling -= 1, 
            A = i, _ = {
                "x": L,
                "y": w
            }) : s(_.x, _.y, L, w) > c ? A = null : i - A >= h && (g.renderer.scrollCursorIntoView(), 
            A = null);
        }
        function i(e, t) {
            var i = Date.now(), n = g.renderer.layerConfig.lineHeight, s = g.renderer.layerConfig.characterWidth, r = g.renderer.scroller.getBoundingClientRect(), o = {
                "x": {
                    "left": L - r.left,
                    "right": r.right - L
                },
                "y": {
                    "top": w - r.top,
                    "bottom": r.bottom - w
                }
            }, a = Math.min(o.x.left, o.x.right), h = Math.min(o.y.top, o.y.bottom), c = {
                "row": e.row,
                "column": e.column
            };
            a / s <= 2 && (c.column += o.x.left < o.x.right ? -3 : 2), h / n <= 1 && (c.row += o.y.top < o.y.bottom ? -1 : 1);
            var u = e.row != c.row, p = e.column != c.column, d = !t || e.row != t.row;
            u || p && !d ? E ? i - E >= l && g.renderer.scrollCursorIntoView(c) : E = i : E = null;
        }
        function n() {
            var e = O;
            t(O = g.renderer.screenToTextCoordinates(L, w), e), i(O, e);
        }
        function u() {
            C = g.selection.toOrientedRange(), v = g.session.addMarker(C, "ace_selection", g.getSelectionStyle()), 
            g.clearSelection(), g.isFocused() && g.renderer.$cursorLayer.setBlinking(!1), clearInterval(b), 
            n(), b = setInterval(n, 20), N = 0, o.addListener(document, "mousemove", d);
        }
        function p() {
            clearInterval(b), g.session.removeMarker(v), v = null, g.$blockScrolling += 1, g.selection.fromOrientedRange(C), 
            g.$blockScrolling -= 1, g.isFocused() && !x && g.renderer.$cursorLayer.setBlinking(!g.getReadOnly()), 
            C = null, O = null, N = 0, E = null, A = null, o.removeListener(document, "mousemove", d);
        }
        function d() {
            null == T && (T = setTimeout(function() {
                null != T && v && p();
            }, 20));
        }
        function f(e) {
            var t = e.types;
            return !t || Array.prototype.some.call(t, function(e) {
                return "text/plain" == e || "Text" == e;
            });
        }
        function m(e) {
            var t = [ "copy", "copymove", "all", "uninitialized" ], i = [ "move", "copymove", "linkmove", "all", "uninitialized" ], n = a.isMac ? e.altKey : e.ctrlKey, s = "uninitialized";
            try {
                s = e.dataTransfer.effectAllowed.toLowerCase();
            } catch (e) {}
            var r = "none";
            return n && t.indexOf(s) >= 0 ? r = "copy" : i.indexOf(s) >= 0 ? r = "move" : t.indexOf(s) >= 0 && (r = "copy"), 
            r;
        }
        var g = e.editor, y = r.createElement("img");
        y.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==", 
        a.isOpera && (y.style.cssText = "width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"), 
        [ "dragWait", "dragWaitEnd", "startDrag", "dragReadyEnd", "onMouseDrag" ].forEach(function(t) {
            e[t] = this[t];
        }, this), g.addEventListener("mousedown", this.onMouseDown.bind(e));
        var v, L, w, b, C, O, S, x, E, A, _, F = g.container, N = 0;
        this.onDragStart = function(e) {
            if (this.cancelDrag || !F.draggable) {
                var t = this;
                return setTimeout(function() {
                    t.startSelect(), t.captureMouse(e);
                }, 0), e.preventDefault();
            }
            C = g.getSelectionRange();
            var i = e.dataTransfer;
            i.effectAllowed = g.getReadOnly() ? "copy" : "copyMove", a.isOpera && (g.container.appendChild(y), 
            y.scrollTop = 0), i.setDragImage && i.setDragImage(y, 0, 0), a.isOpera && g.container.removeChild(y), 
            i.clearData(), i.setData("Text", g.session.getTextRange()), x = !0, this.setState("drag");
        }, this.onDragEnd = function(e) {
            if (F.draggable = !1, x = !1, this.setState(null), !g.getReadOnly()) {
                var t = e.dataTransfer.dropEffect;
                S || "move" != t || g.session.remove(g.getSelectionRange()), g.renderer.$cursorLayer.setBlinking(!0);
            }
            this.editor.unsetStyle("ace_dragging"), this.editor.renderer.setCursorStyle("");
        }, this.onDragEnter = function(e) {
            if (!g.getReadOnly() && f(e.dataTransfer)) return L = e.clientX, w = e.clientY, 
            v || u(), N++, e.dataTransfer.dropEffect = S = m(e), o.preventDefault(e);
        }, this.onDragOver = function(e) {
            if (!g.getReadOnly() && f(e.dataTransfer)) return L = e.clientX, w = e.clientY, 
            v || (u(), N++), null !== T && (T = null), e.dataTransfer.dropEffect = S = m(e), 
            o.preventDefault(e);
        }, this.onDragLeave = function(e) {
            if (--N <= 0 && v) return p(), S = null, o.preventDefault(e);
        }, this.onDrop = function(e) {
            if (O) {
                var t = e.dataTransfer;
                if (x) switch (S) {
                  case "move":
                    C = C.contains(O.row, O.column) ? {
                        "start": O,
                        "end": O
                    } : g.moveText(C, O);
                    break;

                  case "copy":
                    C = g.moveText(C, O, !0);
                } else {
                    var i = t.getData("Text");
                    C = {
                        "start": O,
                        "end": g.session.insert(O, i)
                    }, g.focus(), S = null;
                }
                return p(), o.preventDefault(e);
            }
        }, o.addListener(F, "dragstart", this.onDragStart.bind(e)), o.addListener(F, "dragend", this.onDragEnd.bind(e)), 
        o.addListener(F, "dragenter", this.onDragEnter.bind(e)), o.addListener(F, "dragover", this.onDragOver.bind(e)), 
        o.addListener(F, "dragleave", this.onDragLeave.bind(e)), o.addListener(F, "drop", this.onDrop.bind(e));
        var T = null;
    }
    function s(e, t, i, n) {
        return Math.sqrt(Math.pow(i - e, 2) + Math.pow(n - t, 2));
    }
    var r = e("../lib/dom"), o = e("../lib/event"), a = e("../lib/useragent"), l = 200, h = 200, c = 5;
    (function() {
        this.dragWait = function() {
            Date.now() - this.mousedownEvent.time > this.editor.getDragDelay() && this.startDrag();
        }, this.dragWaitEnd = function() {
            this.editor.container.draggable = !1, this.startSelect(this.mousedownEvent.getDocumentPosition()), 
            this.selectEnd();
        }, this.dragReadyEnd = function(e) {
            this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()), this.editor.unsetStyle("ace_dragging"), 
            this.editor.renderer.setCursorStyle(""), this.dragWaitEnd();
        }, this.startDrag = function() {
            this.cancelDrag = !1;
            var e = this.editor;
            e.container.draggable = !0, e.renderer.$cursorLayer.setBlinking(!1), e.setStyle("ace_dragging");
            var t = a.isWin ? "default" : "move";
            e.renderer.setCursorStyle(t), this.setState("dragReady");
        }, this.onMouseDrag = function(e) {
            var t = this.editor.container;
            if (a.isIE && "dragReady" == this.state && (i = s(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y)) > 3 && t.dragDrop(), 
            "dragWait" === this.state) {
                var i = s(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);
                i > 0 && (t.draggable = !1, this.startSelect(this.mousedownEvent.getDocumentPosition()));
            }
        }, this.onMouseDown = function(e) {
            if (this.$dragEnabled) {
                this.mousedownEvent = e;
                var t = this.editor, i = e.inSelection(), n = e.getButton();
                if (1 === (e.domEvent.detail || 1) && 0 === n && i) {
                    if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey())) return;
                    this.mousedownEvent.time = Date.now();
                    var s = e.domEvent.target || e.domEvent.srcElement;
                    "unselectable" in s && (s.unselectable = "on"), t.getDragDelay() ? (a.isWebKit && (this.cancelDrag = !0, 
                    t.container.draggable = !0), this.setState("dragWait")) : this.startDrag(), this.captureMouse(e, this.onMouseDrag.bind(this)), 
                    e.defaultPrevented = !0;
                }
            }
        };
    }).call(n.prototype), t.DragdropHandler = n;
}), ace.define("ace/lib/net", [ "require", "exports", "module", "ace/lib/dom" ], function(e, t, i) {
    "use strict";
    var n = e("./dom");
    t.get = function(e, t) {
        var i = new XMLHttpRequest();
        i.open("GET", e, !0), i.onreadystatechange = function() {
            4 === i.readyState && t(i.responseText);
        }, i.send(null);
    }, t.loadScript = function(e, t) {
        var i = n.getDocumentHead(), s = document.createElement("script");
        s.src = e, i.appendChild(s), s.onload = s.onreadystatechange = function(e, i) {
            !i && s.readyState && "loaded" != s.readyState && "complete" != s.readyState || (s = s.onload = s.onreadystatechange = null, 
            i || t());
        };
    }, t.qualifyURL = function(e) {
        var t = document.createElement("a");
        return t.href = e, t.href;
    };
}), ace.define("ace/lib/event_emitter", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    var n = {}, s = function() {
        this.propagationStopped = !0;
    }, r = function() {
        this.defaultPrevented = !0;
    };
    n._emit = n._dispatchEvent = function(e, t) {
        this._eventRegistry || (this._eventRegistry = {}), this._defaultHandlers || (this._defaultHandlers = {});
        var i = this._eventRegistry[e] || [], n = this._defaultHandlers[e];
        if (i.length || n) {
            "object" == typeof t && t || (t = {}), t.type || (t.type = e), t.stopPropagation || (t.stopPropagation = s), 
            t.preventDefault || (t.preventDefault = r), i = i.slice();
            for (var o = 0; o < i.length && (i[o](t, this), !t.propagationStopped); o++) ;
            return n && !t.defaultPrevented ? n(t, this) : void 0;
        }
    }, n._signal = function(e, t) {
        var i = (this._eventRegistry || {})[e];
        if (i) {
            i = i.slice();
            for (var n = 0; n < i.length; n++) i[n](t, this);
        }
    }, n.once = function(e, t) {
        var i = this;
        t && this.addEventListener(e, function n() {
            i.removeEventListener(e, n), t.apply(null, arguments);
        });
    }, n.setDefaultHandler = function(e, t) {
        var i = this._defaultHandlers;
        if (i || (i = this._defaultHandlers = {
            "_disabled_": {}
        }), i[e]) {
            var n = i[e], s = i._disabled_[e];
            s || (i._disabled_[e] = s = []), s.push(n);
            var r = s.indexOf(t);
            -1 != r && s.splice(r, 1);
        }
        i[e] = t;
    }, n.removeDefaultHandler = function(e, t) {
        var i = this._defaultHandlers;
        if (i) {
            var n = i._disabled_[e];
            if (i[e] == t) {
                i[e];
                n && this.setDefaultHandler(e, n.pop());
            } else if (n) {
                var s = n.indexOf(t);
                -1 != s && n.splice(s, 1);
            }
        }
    }, n.on = n.addEventListener = function(e, t, i) {
        this._eventRegistry = this._eventRegistry || {};
        var n = this._eventRegistry[e];
        return n || (n = this._eventRegistry[e] = []), -1 == n.indexOf(t) && n[i ? "unshift" : "push"](t), 
        t;
    }, n.off = n.removeListener = n.removeEventListener = function(e, t) {
        this._eventRegistry = this._eventRegistry || {};
        var i = this._eventRegistry[e];
        if (i) {
            var n = i.indexOf(t);
            -1 !== n && i.splice(n, 1);
        }
    }, n.removeAllListeners = function(e) {
        this._eventRegistry && (this._eventRegistry[e] = []);
    }, t.EventEmitter = n;
}), ace.define("ace/lib/app_config", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/event_emitter" ], function(e, t, i) {
    "no use strict";
    function n(e) {
        "undefined" != typeof console && console.warn && console.warn.apply(console, arguments);
    }
    function s(e, t) {
        var i = new Error(e);
        i.data = t, "object" == typeof console && console.error && console.error(i), setTimeout(function() {
            throw i;
        });
    }
    var r = e("./oop"), o = e("./event_emitter").EventEmitter, a = {
        "setOptions": function(e) {
            Object.keys(e).forEach(function(t) {
                this.setOption(t, e[t]);
            }, this);
        },
        "getOptions": function(e) {
            var t = {};
            return e ? Array.isArray(e) || (t = e, e = Object.keys(t)) : e = Object.keys(this.$options), 
            e.forEach(function(e) {
                t[e] = this.getOption(e);
            }, this), t;
        },
        "setOption": function(e, t) {
            if (this["$" + e] !== t) {
                var i = this.$options[e];
                if (!i) return n('misspelled option "' + e + '"');
                if (i.forwardTo) return this[i.forwardTo] && this[i.forwardTo].setOption(e, t);
                i.handlesSet || (this["$" + e] = t), i && i.set && i.set.call(this, t);
            }
        },
        "getOption": function(e) {
            var t = this.$options[e];
            return t ? t.forwardTo ? this[t.forwardTo] && this[t.forwardTo].getOption(e) : t && t.get ? t.get.call(this) : this["$" + e] : n('misspelled option "' + e + '"');
        }
    }, l = function() {
        this.$defaultOptions = {};
    };
    (function() {
        r.implement(this, o), this.defineOptions = function(e, t, i) {
            return e.$options || (this.$defaultOptions[t] = e.$options = {}), Object.keys(i).forEach(function(t) {
                var n = i[t];
                "string" == typeof n && (n = {
                    "forwardTo": n
                }), n.name || (n.name = t), e.$options[n.name] = n, "initialValue" in n && (e["$" + n.name] = n.initialValue);
            }), r.implement(e, a), this;
        }, this.resetOptions = function(e) {
            Object.keys(e.$options).forEach(function(t) {
                var i = e.$options[t];
                "value" in i && e.setOption(t, i.value);
            });
        }, this.setDefaultValue = function(e, t, i) {
            var n = this.$defaultOptions[e] || (this.$defaultOptions[e] = {});
            n[t] && (n.forwardTo ? this.setDefaultValue(n.forwardTo, t, i) : n[t].value = i);
        }, this.setDefaultValues = function(e, t) {
            Object.keys(t).forEach(function(i) {
                this.setDefaultValue(e, i, t[i]);
            }, this);
        }, this.warn = n, this.reportError = s;
    }).call(l.prototype), t.AppConfig = l;
}), ace.define("ace/config", [ "require", "exports", "module", "ace/lib/lang", "ace/lib/oop", "ace/lib/net", "ace/lib/app_config" ], function(e, t, i) {
    "no use strict";
    function n(n) {
        if (h.packaged = n || e.packaged || i.packaged || l.define && define.packaged, !l.document) return "";
        for (var r = {}, o = "", a = document.currentScript || document._currentScript, c = (a && a.ownerDocument || document).getElementsByTagName("script"), u = 0; u < c.length; u++) {
            var p = c[u], d = p.src || p.getAttribute("src");
            if (d) {
                for (var f = p.attributes, m = 0, g = f.length; m < g; m++) {
                    var y = f[m];
                    0 === y.name.indexOf("data-ace-") && (r[s(y.name.replace(/^data-ace-/, ""))] = y.value);
                }
                var v = d.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);
                v && (o = v[1]);
            }
        }
        o && (r.base = r.base || o, r.packaged = !0), r.basePath = r.base, r.workerPath = r.workerPath || r.base, 
        r.modePath = r.modePath || r.base, r.themePath = r.themePath || r.base, delete r.base;
        for (var L in r) void 0 !== r[L] && t.set(L, r[L]);
    }
    function s(e) {
        return e.replace(/-(.)/g, function(e, t) {
            return t.toUpperCase();
        });
    }
    var r = e("./lib/lang"), o = (e("./lib/oop"), e("./lib/net")), a = e("./lib/app_config").AppConfig;
    i.exports = t = new a();
    var l = function() {
        return this;
    }(), h = {
        "packaged": !1,
        "workerPath": null,
        "modePath": null,
        "themePath": null,
        "basePath": "",
        "suffix": ".js",
        "$moduleUrls": {}
    };
    t.get = function(e) {
        if (!h.hasOwnProperty(e)) throw new Error("Unknown config key: " + e);
        return h[e];
    }, t.set = function(e, t) {
        if (!h.hasOwnProperty(e)) throw new Error("Unknown config key: " + e);
        h[e] = t;
    }, t.all = function() {
        return r.copyObject(h);
    }, t.moduleUrl = function(e, t) {
        if (h.$moduleUrls[e]) return h.$moduleUrls[e];
        var i = e.split("/"), n = "snippets" == (t = t || i[i.length - 2] || "") ? "/" : "-", s = i[i.length - 1];
        if ("worker" == t && "-" == n) {
            var r = new RegExp("^" + t + "[\\-_]|[\\-_]" + t + "$", "g");
            s = s.replace(r, "");
        }
        (!s || s == t) && i.length > 1 && (s = i[i.length - 2]);
        var o = h[t + "Path"];
        return null == o ? o = h.basePath : "/" == n && (t = n = ""), o && "/" != o.slice(-1) && (o += "/"), 
        o + t + n + s + this.get("suffix");
    }, t.setModuleUrl = function(e, t) {
        return h.$moduleUrls[e] = t;
    }, t.$loading = {}, t.loadModule = function(i, n) {
        var s, r;
        Array.isArray(i) && (r = i[0], i = i[1]);
        try {
            s = e(i);
        } catch (e) {}
        if (s && !t.$loading[i]) return n && n(s);
        if (t.$loading[i] || (t.$loading[i] = []), t.$loading[i].push(n), !(t.$loading[i].length > 1)) {
            var a = function() {
                e([ i ], function(e) {
                    t._emit("load.module", {
                        "name": i,
                        "module": e
                    });
                    var n = t.$loading[i];
                    t.$loading[i] = null, n.forEach(function(t) {
                        t && t(e);
                    });
                });
            };
            if (!t.get("packaged")) return a();
            o.loadScript(t.moduleUrl(i, r), a);
        }
    }, n(!0), t.init = n;
}), ace.define("ace/mouse/mouse_handler", [ "require", "exports", "module", "ace/lib/event", "ace/lib/useragent", "ace/mouse/default_handlers", "ace/mouse/default_gutter_handler", "ace/mouse/mouse_event", "ace/mouse/dragdrop_handler", "ace/config" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/event"), s = e("../lib/useragent"), r = e("./default_handlers").DefaultHandlers, o = e("./default_gutter_handler").GutterHandler, a = e("./mouse_event").MouseEvent, l = e("./dragdrop_handler").DragdropHandler, h = e("../config"), c = function(e) {
        var t = this;
        this.editor = e, new r(this), new o(this), new l(this);
        var i = function(t) {
            document.hasFocus && document.hasFocus() || window.focus(), e.focus();
        }, a = e.renderer.getMouseEventTarget();
        n.addListener(a, "click", this.onMouseEvent.bind(this, "click")), n.addListener(a, "mousemove", this.onMouseMove.bind(this, "mousemove")), 
        n.addMultiMouseDownListener(a, [ 400, 300, 250 ], this, "onMouseEvent"), e.renderer.scrollBarV && (n.addMultiMouseDownListener(e.renderer.scrollBarV.inner, [ 400, 300, 250 ], this, "onMouseEvent"), 
        n.addMultiMouseDownListener(e.renderer.scrollBarH.inner, [ 400, 300, 250 ], this, "onMouseEvent"), 
        s.isIE && (n.addListener(e.renderer.scrollBarV.element, "mousedown", i), n.addListener(e.renderer.scrollBarH.element, "mousedown", i))), 
        n.addMouseWheelListener(e.container, this.onMouseWheel.bind(this, "mousewheel"));
        var h = e.renderer.$gutter;
        n.addListener(h, "mousedown", this.onMouseEvent.bind(this, "guttermousedown")), 
        n.addListener(h, "click", this.onMouseEvent.bind(this, "gutterclick")), n.addListener(h, "dblclick", this.onMouseEvent.bind(this, "gutterdblclick")), 
        n.addListener(h, "mousemove", this.onMouseEvent.bind(this, "guttermousemove")), 
        n.addListener(a, "mousedown", i), n.addListener(h, "mousedown", function(t) {
            return e.focus(), n.preventDefault(t);
        }), e.on("mousemove", function(i) {
            if (!t.state && !t.$dragDelay && t.$dragEnabled) {
                var n = e.renderer.screenToTextCoordinates(i.x, i.y), s = e.session.selection.getRange(), r = e.renderer;
                !s.isEmpty() && s.insideStart(n.row, n.column) ? r.setCursorStyle("default") : r.setCursorStyle("");
            }
        });
    };
    (function() {
        this.onMouseEvent = function(e, t) {
            this.editor._emit(e, new a(t, this.editor));
        }, this.onMouseMove = function(e, t) {
            var i = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;
            i && i.length && this.editor._emit(e, new a(t, this.editor));
        }, this.onMouseWheel = function(e, t) {
            var i = new a(t, this.editor);
            i.speed = 2 * this.$scrollSpeed, i.wheelX = t.wheelX, i.wheelY = t.wheelY, this.editor._emit(e, i);
        }, this.setState = function(e) {
            this.state = e;
        }, this.captureMouse = function(e, t) {
            this.x = e.x, this.y = e.y, this.isMousePressed = !0;
            var i = this.editor.renderer;
            i.$keepTextAreaAtCursor && (i.$keepTextAreaAtCursor = null);
            var r = this, o = function(e) {
                if (e) {
                    if (s.isWebKit && !e.which && r.releaseMouse) return r.releaseMouse();
                    r.x = e.clientX, r.y = e.clientY, t && t(e), r.mouseEvent = new a(e, r.editor), 
                    r.$mouseMoved = !0;
                }
            }, l = function(e) {
                clearInterval(c), h(), r[r.state + "End"] && r[r.state + "End"](e), r.state = "", 
                null == i.$keepTextAreaAtCursor && (i.$keepTextAreaAtCursor = !0, i.$moveTextAreaToCursor()), 
                r.isMousePressed = !1, r.$onCaptureMouseMove = r.releaseMouse = null, e && r.onMouseEvent("mouseup", e);
            }, h = function() {
                r[r.state] && r[r.state](), r.$mouseMoved = !1;
            };
            if (s.isOldIE && "dblclick" == e.domEvent.type) return setTimeout(function() {
                l(e);
            });
            r.$onCaptureMouseMove = o, r.releaseMouse = n.capture(this.editor.container, o, l);
            var c = setInterval(h, 20);
        }, this.releaseMouse = null, this.cancelContextMenu = function() {
            var e = function(t) {
                t && t.domEvent && "contextmenu" != t.domEvent.type || (this.editor.off("nativecontextmenu", e), 
                t && t.domEvent && n.stopEvent(t.domEvent));
            }.bind(this);
            setTimeout(e, 10), this.editor.on("nativecontextmenu", e);
        };
    }).call(c.prototype), h.defineOptions(c.prototype, "mouseHandler", {
        "scrollSpeed": {
            "initialValue": 2
        },
        "dragDelay": {
            "initialValue": s.isMac ? 150 : 0
        },
        "dragEnabled": {
            "initialValue": !0
        },
        "focusTimout": {
            "initialValue": 0
        },
        "tooltipFollowsMouse": {
            "initialValue": !0
        }
    }), t.MouseHandler = c;
}), ace.define("ace/mouse/fold_handler", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    t.FoldHandler = function(e) {
        e.on("click", function(t) {
            var i = t.getDocumentPosition(), n = e.session, s = n.getFoldAt(i.row, i.column, 1);
            s && (t.getAccelKey() ? n.removeFold(s) : n.expandFold(s), t.stop());
        }), e.on("gutterclick", function(t) {
            if ("foldWidgets" == e.renderer.$gutterLayer.getRegion(t)) {
                var i = t.getDocumentPosition().row, n = e.session;
                n.foldWidgets && n.foldWidgets[i] && e.session.onFoldWidgetClick(i, t), e.isFocused() || e.focus(), 
                t.stop();
            }
        }), e.on("gutterdblclick", function(t) {
            if ("foldWidgets" == e.renderer.$gutterLayer.getRegion(t)) {
                var i = t.getDocumentPosition().row, n = e.session, s = n.getParentFoldRangeData(i, !0), r = s.range || s.firstRange;
                if (r) {
                    i = r.start.row;
                    var o = n.getFoldAt(i, n.getLine(i).length, 1);
                    o ? n.removeFold(o) : (n.addFold("...", r), e.renderer.scrollCursorIntoView({
                        "row": r.start.row,
                        "column": 0
                    }));
                }
                t.stop();
            }
        });
    };
}), ace.define("ace/keyboard/keybinding", [ "require", "exports", "module", "ace/lib/keys", "ace/lib/event" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/keys"), s = e("../lib/event"), r = function(e) {
        this.$editor = e, this.$data = {
            "editor": e
        }, this.$handlers = [], this.setDefaultHandler(e.commands);
    };
    (function() {
        this.setDefaultHandler = function(e) {
            this.removeKeyboardHandler(this.$defaultHandler), this.$defaultHandler = e, this.addKeyboardHandler(e, 0);
        }, this.setKeyboardHandler = function(e) {
            var t = this.$handlers;
            if (t[t.length - 1] != e) {
                for (;t[t.length - 1] && t[t.length - 1] != this.$defaultHandler; ) this.removeKeyboardHandler(t[t.length - 1]);
                this.addKeyboardHandler(e, 1);
            }
        }, this.addKeyboardHandler = function(e, t) {
            if (e) {
                "function" != typeof e || e.handleKeyboard || (e.handleKeyboard = e);
                var i = this.$handlers.indexOf(e);
                -1 != i && this.$handlers.splice(i, 1), void 0 == t ? this.$handlers.push(e) : this.$handlers.splice(t, 0, e), 
                -1 == i && e.attach && e.attach(this.$editor);
            }
        }, this.removeKeyboardHandler = function(e) {
            var t = this.$handlers.indexOf(e);
            return -1 != t && (this.$handlers.splice(t, 1), e.detach && e.detach(this.$editor), 
            !0);
        }, this.getKeyboardHandler = function() {
            return this.$handlers[this.$handlers.length - 1];
        }, this.getStatusText = function() {
            var e = this.$data, t = e.editor;
            return this.$handlers.map(function(i) {
                return i.getStatusText && i.getStatusText(t, e) || "";
            }).filter(Boolean).join(" ");
        }, this.$callKeyboardHandlers = function(e, t, i, n) {
            for (var r, o = !1, a = this.$editor.commands, l = this.$handlers.length; l-- && !((r = this.$handlers[l].handleKeyboard(this.$data, e, t, i, n)) && r.command && ((o = "null" == r.command || a.exec(r.command, this.$editor, r.args, n)) && n && -1 != e && 1 != r.passEvent && 1 != r.command.passEvent && s.stopEvent(n), 
            o)); ) ;
            return o;
        }, this.onCommandKey = function(e, t, i) {
            var s = n.keyCodeToString(i);
            this.$callKeyboardHandlers(t, s, i, e);
        }, this.onTextInput = function(e) {
            this.$callKeyboardHandlers(-1, e) || this.$editor.commands.exec("insertstring", this.$editor, e);
        };
    }).call(r.prototype), t.KeyBinding = r;
}), ace.define("ace/range", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    var n = function(e, t, i, n) {
        this.start = {
            "row": e,
            "column": t
        }, this.end = {
            "row": i,
            "column": n
        };
    };
    (function() {
        this.isEqual = function(e) {
            return this.start.row === e.start.row && this.end.row === e.end.row && this.start.column === e.start.column && this.end.column === e.end.column;
        }, this.toString = function() {
            return "Range: [" + this.start.row + "/" + this.start.column + "] -> [" + this.end.row + "/" + this.end.column + "]";
        }, this.contains = function(e, t) {
            return 0 == this.compare(e, t);
        }, this.compareRange = function(e) {
            var t, i = e.end, n = e.start;
            return 1 == (t = this.compare(i.row, i.column)) ? 1 == (t = this.compare(n.row, n.column)) ? 2 : 0 == t ? 1 : 0 : -1 == t ? -2 : -1 == (t = this.compare(n.row, n.column)) ? -1 : 1 == t ? 42 : 0;
        }, this.comparePoint = function(e) {
            return this.compare(e.row, e.column);
        }, this.containsRange = function(e) {
            return 0 == this.comparePoint(e.start) && 0 == this.comparePoint(e.end);
        }, this.intersects = function(e) {
            var t = this.compareRange(e);
            return -1 == t || 0 == t || 1 == t;
        }, this.isEnd = function(e, t) {
            return this.end.row == e && this.end.column == t;
        }, this.isStart = function(e, t) {
            return this.start.row == e && this.start.column == t;
        }, this.setStart = function(e, t) {
            "object" == typeof e ? (this.start.column = e.column, this.start.row = e.row) : (this.start.row = e, 
            this.start.column = t);
        }, this.setEnd = function(e, t) {
            "object" == typeof e ? (this.end.column = e.column, this.end.row = e.row) : (this.end.row = e, 
            this.end.column = t);
        }, this.inside = function(e, t) {
            return 0 == this.compare(e, t) && (!this.isEnd(e, t) && !this.isStart(e, t));
        }, this.insideStart = function(e, t) {
            return 0 == this.compare(e, t) && !this.isEnd(e, t);
        }, this.insideEnd = function(e, t) {
            return 0 == this.compare(e, t) && !this.isStart(e, t);
        }, this.compare = function(e, t) {
            return this.isMultiLine() || e !== this.start.row ? e < this.start.row ? -1 : e > this.end.row ? 1 : this.start.row === e ? t >= this.start.column ? 0 : -1 : this.end.row === e ? t <= this.end.column ? 0 : 1 : 0 : t < this.start.column ? -1 : t > this.end.column ? 1 : 0;
        }, this.compareStart = function(e, t) {
            return this.start.row == e && this.start.column == t ? -1 : this.compare(e, t);
        }, this.compareEnd = function(e, t) {
            return this.end.row == e && this.end.column == t ? 1 : this.compare(e, t);
        }, this.compareInside = function(e, t) {
            return this.end.row == e && this.end.column == t ? 1 : this.start.row == e && this.start.column == t ? -1 : this.compare(e, t);
        }, this.clipRows = function(e, t) {
            if (this.end.row > t) i = {
                "row": t + 1,
                "column": 0
            }; else if (this.end.row < e) var i = {
                "row": e,
                "column": 0
            };
            if (this.start.row > t) s = {
                "row": t + 1,
                "column": 0
            }; else if (this.start.row < e) var s = {
                "row": e,
                "column": 0
            };
            return n.fromPoints(s || this.start, i || this.end);
        }, this.extend = function(e, t) {
            var i = this.compare(e, t);
            if (0 == i) return this;
            if (-1 == i) var s = {
                "row": e,
                "column": t
            }; else var r = {
                "row": e,
                "column": t
            };
            return n.fromPoints(s || this.start, r || this.end);
        }, this.isEmpty = function() {
            return this.start.row === this.end.row && this.start.column === this.end.column;
        }, this.isMultiLine = function() {
            return this.start.row !== this.end.row;
        }, this.clone = function() {
            return n.fromPoints(this.start, this.end);
        }, this.collapseRows = function() {
            return 0 == this.end.column ? new n(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0) : new n(this.start.row, 0, this.end.row, 0);
        }, this.toScreenRange = function(e) {
            var t = e.documentToScreenPosition(this.start), i = e.documentToScreenPosition(this.end);
            return new n(t.row, t.column, i.row, i.column);
        }, this.moveBy = function(e, t) {
            this.start.row += e, this.start.column += t, this.end.row += e, this.end.column += t;
        };
    }).call(n.prototype), n.fromPoints = function(e, t) {
        return new n(e.row, e.column, t.row, t.column);
    }, n.comparePoints = function(e, t) {
        return e.row - t.row || e.column - t.column;
    }, n.comparePoints = function(e, t) {
        return e.row - t.row || e.column - t.column;
    }, t.Range = n;
}), ace.define("ace/selection", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/lang", "ace/lib/event_emitter", "ace/range" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/oop"), s = e("./lib/lang"), r = e("./lib/event_emitter").EventEmitter, o = e("./range").Range, a = function(e) {
        this.session = e, this.doc = e.getDocument(), this.clearSelection(), this.lead = this.selectionLead = this.doc.createAnchor(0, 0), 
        this.anchor = this.selectionAnchor = this.doc.createAnchor(0, 0);
        var t = this;
        this.lead.on("change", function(e) {
            t._emit("changeCursor"), t.$isEmpty || t._emit("changeSelection"), t.$keepDesiredColumnOnChange || e.old.column == e.value.column || (t.$desiredColumn = null);
        }), this.selectionAnchor.on("change", function() {
            t.$isEmpty || t._emit("changeSelection");
        });
    };
    (function() {
        n.implement(this, r), this.isEmpty = function() {
            return this.$isEmpty || this.anchor.row == this.lead.row && this.anchor.column == this.lead.column;
        }, this.isMultiLine = function() {
            return !this.isEmpty() && this.getRange().isMultiLine();
        }, this.getCursor = function() {
            return this.lead.getPosition();
        }, this.setSelectionAnchor = function(e, t) {
            this.anchor.setPosition(e, t), this.$isEmpty && (this.$isEmpty = !1, this._emit("changeSelection"));
        }, this.getSelectionAnchor = function() {
            return this.$isEmpty ? this.getSelectionLead() : this.anchor.getPosition();
        }, this.getSelectionLead = function() {
            return this.lead.getPosition();
        }, this.shiftSelection = function(e) {
            if (this.$isEmpty) this.moveCursorTo(this.lead.row, this.lead.column + e); else {
                var t = this.getSelectionAnchor(), i = this.getSelectionLead(), n = this.isBackwards();
                n && 0 === t.column || this.setSelectionAnchor(t.row, t.column + e), (n || 0 !== i.column) && this.$moveSelection(function() {
                    this.moveCursorTo(i.row, i.column + e);
                });
            }
        }, this.isBackwards = function() {
            var e = this.anchor, t = this.lead;
            return e.row > t.row || e.row == t.row && e.column > t.column;
        }, this.getRange = function() {
            var e = this.anchor, t = this.lead;
            return this.isEmpty() ? o.fromPoints(t, t) : this.isBackwards() ? o.fromPoints(t, e) : o.fromPoints(e, t);
        }, this.clearSelection = function() {
            this.$isEmpty || (this.$isEmpty = !0, this._emit("changeSelection"));
        }, this.selectAll = function() {
            var e = this.doc.getLength() - 1;
            this.setSelectionAnchor(0, 0), this.moveCursorTo(e, this.doc.getLine(e).length);
        }, this.setRange = this.setSelectionRange = function(e, t) {
            t ? (this.setSelectionAnchor(e.end.row, e.end.column), this.selectTo(e.start.row, e.start.column)) : (this.setSelectionAnchor(e.start.row, e.start.column), 
            this.selectTo(e.end.row, e.end.column)), this.getRange().isEmpty() && (this.$isEmpty = !0), 
            this.$desiredColumn = null;
        }, this.$moveSelection = function(e) {
            var t = this.lead;
            this.$isEmpty && this.setSelectionAnchor(t.row, t.column), e.call(this);
        }, this.selectTo = function(e, t) {
            this.$moveSelection(function() {
                this.moveCursorTo(e, t);
            });
        }, this.selectToPosition = function(e) {
            this.$moveSelection(function() {
                this.moveCursorToPosition(e);
            });
        }, this.moveTo = function(e, t) {
            this.clearSelection(), this.moveCursorTo(e, t);
        }, this.moveToPosition = function(e) {
            this.clearSelection(), this.moveCursorToPosition(e);
        }, this.selectUp = function() {
            this.$moveSelection(this.moveCursorUp);
        }, this.selectDown = function() {
            this.$moveSelection(this.moveCursorDown);
        }, this.selectRight = function() {
            this.$moveSelection(this.moveCursorRight);
        }, this.selectLeft = function() {
            this.$moveSelection(this.moveCursorLeft);
        }, this.selectLineStart = function() {
            this.$moveSelection(this.moveCursorLineStart);
        }, this.selectLineEnd = function() {
            this.$moveSelection(this.moveCursorLineEnd);
        }, this.selectFileEnd = function() {
            this.$moveSelection(this.moveCursorFileEnd);
        }, this.selectFileStart = function() {
            this.$moveSelection(this.moveCursorFileStart);
        }, this.selectWordRight = function() {
            this.$moveSelection(this.moveCursorWordRight);
        }, this.selectWordLeft = function() {
            this.$moveSelection(this.moveCursorWordLeft);
        }, this.getWordRange = function(e, t) {
            if (void 0 === t) {
                var i = e || this.lead;
                e = i.row, t = i.column;
            }
            return this.session.getWordRange(e, t);
        }, this.selectWord = function() {
            this.setSelectionRange(this.getWordRange());
        }, this.selectAWord = function() {
            var e = this.getCursor(), t = this.session.getAWordRange(e.row, e.column);
            this.setSelectionRange(t);
        }, this.getLineRange = function(e, t) {
            var i, n = "number" == typeof e ? e : this.lead.row, s = this.session.getFoldLine(n);
            return s ? (n = s.start.row, i = s.end.row) : i = n, !0 === t ? new o(n, 0, i, this.session.getLine(i).length) : new o(n, 0, i + 1, 0);
        }, this.selectLine = function() {
            this.setSelectionRange(this.getLineRange());
        }, this.moveCursorUp = function() {
            this.moveCursorBy(-1, 0);
        }, this.moveCursorDown = function() {
            this.moveCursorBy(1, 0);
        }, this.moveCursorLeft = function() {
            var e, t = this.lead.getPosition();
            if (e = this.session.getFoldAt(t.row, t.column, -1)) this.moveCursorTo(e.start.row, e.start.column); else if (0 === t.column) t.row > 0 && this.moveCursorTo(t.row - 1, this.doc.getLine(t.row - 1).length); else {
                var i = this.session.getTabSize();
                this.session.isTabStop(t) && this.doc.getLine(t.row).slice(t.column - i, t.column).split(" ").length - 1 == i ? this.moveCursorBy(0, -i) : this.moveCursorBy(0, -1);
            }
        }, this.moveCursorRight = function() {
            var e, t = this.lead.getPosition();
            if (e = this.session.getFoldAt(t.row, t.column, 1)) this.moveCursorTo(e.end.row, e.end.column); else if (this.lead.column == this.doc.getLine(this.lead.row).length) this.lead.row < this.doc.getLength() - 1 && this.moveCursorTo(this.lead.row + 1, 0); else {
                var i = this.session.getTabSize(), t = this.lead;
                this.session.isTabStop(t) && this.doc.getLine(t.row).slice(t.column, t.column + i).split(" ").length - 1 == i ? this.moveCursorBy(0, i) : this.moveCursorBy(0, 1);
            }
        }, this.moveCursorLineStart = function() {
            var e = this.lead.row, t = this.lead.column, i = this.session.documentToScreenRow(e, t), n = this.session.screenToDocumentPosition(i, 0), s = this.session.getDisplayLine(e, null, n.row, n.column).match(/^\s*/);
            s[0].length == t || this.session.$useEmacsStyleLineStart || (n.column += s[0].length), 
            this.moveCursorToPosition(n);
        }, this.moveCursorLineEnd = function() {
            var e = this.lead, t = this.session.getDocumentLastRowColumnPosition(e.row, e.column);
            if (this.lead.column == t.column) {
                var i = this.session.getLine(t.row);
                if (t.column == i.length) {
                    var n = i.search(/\s+$/);
                    n > 0 && (t.column = n);
                }
            }
            this.moveCursorTo(t.row, t.column);
        }, this.moveCursorFileEnd = function() {
            var e = this.doc.getLength() - 1, t = this.doc.getLine(e).length;
            this.moveCursorTo(e, t);
        }, this.moveCursorFileStart = function() {
            this.moveCursorTo(0, 0);
        }, this.moveCursorLongWordRight = function() {
            var e = this.lead.row, t = this.lead.column, i = this.doc.getLine(e), n = i.substring(t);
            this.session.nonTokenRe.lastIndex = 0, this.session.tokenRe.lastIndex = 0;
            var s = this.session.getFoldAt(e, t, 1);
            if (s) this.moveCursorTo(s.end.row, s.end.column); else {
                if (this.session.nonTokenRe.exec(n) && (t += this.session.nonTokenRe.lastIndex, 
                this.session.nonTokenRe.lastIndex = 0, n = i.substring(t)), t >= i.length) return this.moveCursorTo(e, i.length), 
                this.moveCursorRight(), void (e < this.doc.getLength() - 1 && this.moveCursorWordRight());
                this.session.tokenRe.exec(n) && (t += this.session.tokenRe.lastIndex, this.session.tokenRe.lastIndex = 0), 
                this.moveCursorTo(e, t);
            }
        }, this.moveCursorLongWordLeft = function() {
            var e, t = this.lead.row, i = this.lead.column;
            if (e = this.session.getFoldAt(t, i, -1)) this.moveCursorTo(e.start.row, e.start.column); else {
                var n = this.session.getFoldStringAt(t, i, -1);
                null == n && (n = this.doc.getLine(t).substring(0, i));
                var r = s.stringReverse(n);
                if (this.session.nonTokenRe.lastIndex = 0, this.session.tokenRe.lastIndex = 0, this.session.nonTokenRe.exec(r) && (i -= this.session.nonTokenRe.lastIndex, 
                r = r.slice(this.session.nonTokenRe.lastIndex), this.session.nonTokenRe.lastIndex = 0), 
                i <= 0) return this.moveCursorTo(t, 0), this.moveCursorLeft(), void (t > 0 && this.moveCursorWordLeft());
                this.session.tokenRe.exec(r) && (i -= this.session.tokenRe.lastIndex, this.session.tokenRe.lastIndex = 0), 
                this.moveCursorTo(t, i);
            }
        }, this.$shortWordEndIndex = function(e) {
            var t, i = 0, n = /\s/, s = this.session.tokenRe;
            if (s.lastIndex = 0, this.session.tokenRe.exec(e)) i = this.session.tokenRe.lastIndex; else {
                for (;(t = e[i]) && n.test(t); ) i++;
                if (i < 1) for (s.lastIndex = 0; (t = e[i]) && !s.test(t); ) if (s.lastIndex = 0, 
                i++, n.test(t)) {
                    if (i > 2) {
                        i--;
                        break;
                    }
                    for (;(t = e[i]) && n.test(t); ) i++;
                    if (i > 2) break;
                }
            }
            return s.lastIndex = 0, i;
        }, this.moveCursorShortWordRight = function() {
            var e = this.lead.row, t = this.lead.column, i = this.doc.getLine(e), n = i.substring(t), s = this.session.getFoldAt(e, t, 1);
            if (s) return this.moveCursorTo(s.end.row, s.end.column);
            if (t == i.length) {
                var r = this.doc.getLength();
                do {
                    e++, n = this.doc.getLine(e);
                } while (e < r && /^\s*$/.test(n));
                /^\s+/.test(n) || (n = ""), t = 0;
            }
            var o = this.$shortWordEndIndex(n);
            this.moveCursorTo(e, t + o);
        }, this.moveCursorShortWordLeft = function() {
            var e, t = this.lead.row, i = this.lead.column;
            if (e = this.session.getFoldAt(t, i, -1)) return this.moveCursorTo(e.start.row, e.start.column);
            var n = this.session.getLine(t).substring(0, i);
            if (0 === i) {
                do {
                    t--, n = this.doc.getLine(t);
                } while (t > 0 && /^\s*$/.test(n));
                i = n.length, /\s+$/.test(n) || (n = "");
            }
            var r = s.stringReverse(n), o = this.$shortWordEndIndex(r);
            return this.moveCursorTo(t, i - o);
        }, this.moveCursorWordRight = function() {
            this.session.$selectLongWords ? this.moveCursorLongWordRight() : this.moveCursorShortWordRight();
        }, this.moveCursorWordLeft = function() {
            this.session.$selectLongWords ? this.moveCursorLongWordLeft() : this.moveCursorShortWordLeft();
        }, this.moveCursorBy = function(e, t) {
            var i = this.session.documentToScreenPosition(this.lead.row, this.lead.column);
            0 === t && (this.$desiredColumn ? i.column = this.$desiredColumn : this.$desiredColumn = i.column);
            var n = this.session.screenToDocumentPosition(i.row + e, i.column);
            0 !== e && 0 === t && n.row === this.lead.row && n.column === this.lead.column && this.session.lineWidgets && this.session.lineWidgets[n.row] && n.row++, 
            this.moveCursorTo(n.row, n.column + t, 0 === t);
        }, this.moveCursorToPosition = function(e) {
            this.moveCursorTo(e.row, e.column);
        }, this.moveCursorTo = function(e, t, i) {
            var n = this.session.getFoldAt(e, t, 1);
            n && (e = n.start.row, t = n.start.column), this.$keepDesiredColumnOnChange = !0, 
            this.lead.setPosition(e, t), this.$keepDesiredColumnOnChange = !1, i || (this.$desiredColumn = null);
        }, this.moveCursorToScreen = function(e, t, i) {
            var n = this.session.screenToDocumentPosition(e, t);
            this.moveCursorTo(n.row, n.column, i);
        }, this.detach = function() {
            this.lead.detach(), this.anchor.detach(), this.session = this.doc = null;
        }, this.fromOrientedRange = function(e) {
            this.setSelectionRange(e, e.cursor == e.start), this.$desiredColumn = e.desiredColumn || this.$desiredColumn;
        }, this.toOrientedRange = function(e) {
            var t = this.getRange();
            return e ? (e.start.column = t.start.column, e.start.row = t.start.row, e.end.column = t.end.column, 
            e.end.row = t.end.row) : e = t, e.cursor = this.isBackwards() ? e.start : e.end, 
            e.desiredColumn = this.$desiredColumn, e;
        }, this.getRangeOfMovements = function(e) {
            var t = this.getCursor();
            try {
                e.call(null, this);
                var i = this.getCursor();
                return o.fromPoints(t, i);
            } catch (e) {
                return o.fromPoints(t, t);
            } finally {
                this.moveCursorToPosition(t);
            }
        }, this.toJSON = function() {
            if (this.rangeCount) var e = this.ranges.map(function(e) {
                var t = e.clone();
                return t.isBackwards = e.cursor == e.start, t;
            }); else (e = this.getRange()).isBackwards = this.isBackwards();
            return e;
        }, this.fromJSON = function(e) {
            if (void 0 == e.start) {
                if (this.rangeList) {
                    this.toSingleRange(e[0]);
                    for (var t = e.length; t--; ) {
                        var i = o.fromPoints(e[t].start, e[t].end);
                        e.isBackwards && (i.cursor = i.start), this.addRange(i, !0);
                    }
                    return;
                }
                e = e[0];
            }
            this.rangeList && this.toSingleRange(e), this.setSelectionRange(e, e.isBackwards);
        }, this.isEqual = function(e) {
            if ((e.length || this.rangeCount) && e.length != this.rangeCount) return !1;
            if (!e.length || !this.ranges) return this.getRange().isEqual(e);
            for (var t = this.ranges.length; t--; ) if (!this.ranges[t].isEqual(e[t])) return !1;
            return !0;
        };
    }).call(a.prototype), t.Selection = a;
}), ace.define("ace/tokenizer", [ "require", "exports", "module", "ace/config" ], function(e, t, i) {
    "use strict";
    var n = e("./config"), s = 2e3, r = function(e) {
        this.states = e, this.regExps = {}, this.matchMappings = {};
        for (var t in this.states) {
            for (var i = this.states[t], n = [], s = 0, r = this.matchMappings[t] = {
                "defaultToken": "text"
            }, o = "g", a = [], l = 0; l < i.length; l++) {
                var h = i[l];
                if (h.defaultToken && (r.defaultToken = h.defaultToken), h.caseInsensitive && (o = "gi"), 
                null != h.regex) {
                    h.regex instanceof RegExp && (h.regex = h.regex.toString().slice(1, -1));
                    var c = h.regex, u = new RegExp("(?:(" + c + ")|(.))").exec("a").length - 2;
                    Array.isArray(h.token) ? 1 == h.token.length || 1 == u ? h.token = h.token[0] : u - 1 != h.token.length ? (this.reportError("number of classes and regexp groups doesn't match", {
                        "rule": h,
                        "groupCount": u - 1
                    }), h.token = h.token[0]) : (h.tokenArray = h.token, h.token = null, h.onMatch = this.$arrayTokens) : "function" != typeof h.token || h.onMatch || (h.onMatch = u > 1 ? this.$applyToken : h.token), 
                    u > 1 && (/\\\d/.test(h.regex) ? c = h.regex.replace(/\\([0-9]+)/g, function(e, t) {
                        return "\\" + (parseInt(t, 10) + s + 1);
                    }) : (u = 1, c = this.removeCapturingGroups(h.regex)), h.splitRegex || "string" == typeof h.token || a.push(h)), 
                    r[s] = l, s += u, n.push(c), h.onMatch || (h.onMatch = null);
                }
            }
            n.length || (r[0] = 0, n.push("$")), a.forEach(function(e) {
                e.splitRegex = this.createSplitterRegexp(e.regex, o);
            }, this), this.regExps[t] = new RegExp("(" + n.join(")|(") + ")|($)", o);
        }
    };
    (function() {
        this.$setMaxTokenCount = function(e) {
            s = 0 | e;
        }, this.$applyToken = function(e) {
            var t = this.splitRegex.exec(e).slice(1), i = this.token.apply(this, t);
            if ("string" == typeof i) return [ {
                "type": i,
                "value": e
            } ];
            for (var n = [], s = 0, r = i.length; s < r; s++) t[s] && (n[n.length] = {
                "type": i[s],
                "value": t[s]
            });
            return n;
        }, this.$arrayTokens = function(e) {
            if (!e) return [];
            var t = this.splitRegex.exec(e);
            if (!t) return "text";
            for (var i = [], n = this.tokenArray, s = 0, r = n.length; s < r; s++) t[s + 1] && (i[i.length] = {
                "type": n[s],
                "value": t[s + 1]
            });
            return i;
        }, this.removeCapturingGroups = function(e) {
            return e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g, function(e, t) {
                return t ? "(?:" : e;
            });
        }, this.createSplitterRegexp = function(e, t) {
            if (-1 != e.indexOf("(?=")) {
                var i = 0, n = !1, s = {};
                e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g, function(e, t, r, o, a, l) {
                    return n ? n = "]" != a : a ? n = !0 : o ? (i == s.stack && (s.end = l + 1, s.stack = -1), 
                    i--) : r && (i++, 1 != r.length && (s.stack = i, s.start = l)), e;
                }), null != s.end && /^\)*$/.test(e.substr(s.end)) && (e = e.substring(0, s.start) + e.substr(s.end));
            }
            return new RegExp(e, (t || "").replace("g", ""));
        }, this.getLineTokens = function(e, t) {
            if (t && "string" != typeof t) "#tmp" === (t = (i = t.slice(0))[0]) && (i.shift(), 
            t = i.shift()); else var i = [];
            var n = t || "start", r = this.states[n];
            r || (n = "start", r = this.states[n]);
            var o = this.matchMappings[n], a = this.regExps[n];
            a.lastIndex = 0;
            for (var l, h = [], c = 0, u = 0, p = {
                "type": null,
                "value": ""
            }; l = a.exec(e); ) {
                var d = o.defaultToken, f = null, m = l[0], g = a.lastIndex;
                if (g - m.length > c) {
                    var y = e.substring(c, g - m.length);
                    p.type == d ? p.value += y : (p.type && h.push(p), p = {
                        "type": d,
                        "value": y
                    });
                }
                for (v = 0; v < l.length - 2; v++) if (void 0 !== l[v + 1]) {
                    d = (f = r[o[v]]).onMatch ? f.onMatch(m, n, i) : f.token, f.next && (n = "string" == typeof f.next ? f.next : f.next(n, i), 
                    (r = this.states[n]) || (this.reportError("state doesn't exist", n), n = "start", 
                    r = this.states[n]), o = this.matchMappings[n], c = g, (a = this.regExps[n]).lastIndex = g);
                    break;
                }
                if (m) if ("string" == typeof d) f && !1 === f.merge || p.type !== d ? (p.type && h.push(p), 
                p = {
                    "type": d,
                    "value": m
                }) : p.value += m; else if (d) {
                    p.type && h.push(p), p = {
                        "type": null,
                        "value": ""
                    };
                    for (var v = 0; v < d.length; v++) h.push(d[v]);
                }
                if (c == e.length) break;
                if (c = g, u++ > s) {
                    for (u > 2 * e.length && this.reportError("infinite loop with in ace tokenizer", {
                        "startState": t,
                        "line": e
                    }); c < e.length; ) p.type && h.push(p), p = {
                        "value": e.substring(c, c += 2e3),
                        "type": "overflow"
                    };
                    n = "start", i = [];
                    break;
                }
            }
            return p.type && h.push(p), i.length > 1 && i[0] !== n && i.unshift("#tmp", n), 
            {
                "tokens": h,
                "state": i.length ? i : n
            };
        }, this.reportError = n.reportError;
    }).call(r.prototype), t.Tokenizer = r;
}), ace.define("ace/mode/text_highlight_rules", [ "require", "exports", "module", "ace/lib/lang" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/lang"), s = function() {
        this.$rules = {
            "start": [ {
                "token": "empty_line",
                "regex": "^$"
            }, {
                "defaultToken": "text"
            } ]
        };
    };
    (function() {
        this.addRules = function(e, t) {
            if (t) for (var i in e) {
                for (var n = e[i], s = 0; s < n.length; s++) {
                    var r = n[s];
                    (r.next || r.onMatch) && ("string" != typeof r.next ? r.nextState && 0 !== r.nextState.indexOf(t) && (r.nextState = t + r.nextState) : 0 !== r.next.indexOf(t) && (r.next = t + r.next));
                }
                this.$rules[t + i] = n;
            } else for (var i in e) this.$rules[i] = e[i];
        }, this.getRules = function() {
            return this.$rules;
        }, this.embedRules = function(e, t, i, s, r) {
            var o = "function" == typeof e ? new e().getRules() : e;
            if (s) for (h = 0; h < s.length; h++) s[h] = t + s[h]; else {
                s = [];
                for (var a in o) s.push(t + a);
            }
            if (this.addRules(o, t), i) for (var l = Array.prototype[r ? "push" : "unshift"], h = 0; h < s.length; h++) l.apply(this.$rules[s[h]], n.deepCopy(i));
            this.$embeds || (this.$embeds = []), this.$embeds.push(t);
        }, this.getEmbeds = function() {
            return this.$embeds;
        };
        var e = function(e, t) {
            return ("start" != e || t.length) && t.unshift(this.nextState, e), this.nextState;
        }, t = function(e, t) {
            return t.shift(), t.shift() || "start";
        };
        this.normalizeRules = function() {
            function i(r) {
                var o = s[r];
                o.processed = !0;
                for (var a = 0; a < o.length; a++) {
                    var l = o[a];
                    !l.regex && l.start && (l.regex = l.start, l.next || (l.next = []), l.next.push({
                        "defaultToken": l.token
                    }, {
                        "token": l.token + ".end",
                        "regex": l.end || l.start,
                        "next": "pop"
                    }), l.token = l.token + ".start", l.push = !0);
                    var h = l.next || l.push;
                    if (h && Array.isArray(h)) {
                        var c = l.stateName;
                        c || ("string" != typeof (c = l.token) && (c = c[0] || ""), s[c] && (c += n++)), 
                        s[c] = h, l.next = c, i(c);
                    } else "pop" == h && (l.next = t);
                    if (l.push && (l.nextState = l.next || l.push, l.next = e, delete l.push), l.rules) for (var u in l.rules) s[u] ? s[u].push && s[u].push.apply(s[u], l.rules[u]) : s[u] = l.rules[u];
                    if (l.include || "string" == typeof l) var p = l.include || l, d = s[p]; else Array.isArray(l) && (d = l);
                    if (d) {
                        var f = [ a, 1 ].concat(d);
                        l.noEscape && (f = f.filter(function(e) {
                            return !e.next;
                        })), o.splice.apply(o, f), a--, d = null;
                    }
                    l.keywordMap && (l.token = this.createKeywordMapper(l.keywordMap, l.defaultToken || "text", l.caseInsensitive), 
                    delete l.defaultToken);
                }
            }
            var n = 0, s = this.$rules;
            Object.keys(s).forEach(i, this);
        }, this.createKeywordMapper = function(e, t, i, n) {
            var s = Object.create(null);
            return Object.keys(e).forEach(function(t) {
                var r = e[t];
                i && (r = r.toLowerCase());
                for (var o = r.split(n || "|"), a = o.length; a--; ) s[o[a]] = t;
            }), Object.getPrototypeOf(s) && (s.__proto__ = null), this.$keywordList = Object.keys(s), 
            e = null, i ? function(e) {
                return s[e.toLowerCase()] || t;
            } : function(e) {
                return s[e] || t;
            };
        }, this.getKeywords = function() {
            return this.$keywords;
        };
    }).call(s.prototype), t.TextHighlightRules = s;
}), ace.define("ace/mode/behaviour", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    var n = function() {
        this.$behaviours = {};
    };
    (function() {
        this.add = function(e, t, i) {
            switch (void 0) {
              case this.$behaviours:
                this.$behaviours = {};

              case this.$behaviours[e]:
                this.$behaviours[e] = {};
            }
            this.$behaviours[e][t] = i;
        }, this.addBehaviours = function(e) {
            for (var t in e) for (var i in e[t]) this.add(t, i, e[t][i]);
        }, this.remove = function(e) {
            this.$behaviours && this.$behaviours[e] && delete this.$behaviours[e];
        }, this.inherit = function(e, t) {
            if ("function" == typeof e) i = new e().getBehaviours(t); else var i = e.getBehaviours(t);
            this.addBehaviours(i);
        }, this.getBehaviours = function(e) {
            if (e) {
                for (var t = {}, i = 0; i < e.length; i++) this.$behaviours[e[i]] && (t[e[i]] = this.$behaviours[e[i]]);
                return t;
            }
            return this.$behaviours;
        };
    }).call(n.prototype), t.Behaviour = n;
}), ace.define("ace/unicode", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    t.packages = {}, function(e) {
        var i = /\w{4}/g;
        for (var n in e) t.packages[n] = e[n].replace(i, "\\u$&");
    }({
        "L": "0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
        "Ll": "0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",
        "Lu": "0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",
        "Lt": "01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",
        "Lm": "02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",
        "Lo": "01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
        "M": "0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",
        "Mn": "0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",
        "Mc": "0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",
        "Me": "0488048906DE20DD-20E020E2-20E4A670-A672",
        "N": "0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
        "Nd": "0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
        "Nl": "16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",
        "No": "00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",
        "P": "0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",
        "Pd": "002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",
        "Ps": "0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",
        "Pe": "0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",
        "Pi": "00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",
        "Pf": "00BB2019201D203A2E032E052E0A2E0D2E1D2E21",
        "Pc": "005F203F20402054FE33FE34FE4D-FE4FFF3F",
        "Po": "0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",
        "S": "0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",
        "Sm": "002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",
        "Sc": "002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",
        "Sk": "005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",
        "So": "00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",
        "Z": "002000A01680180E2000-200A20282029202F205F3000",
        "Zs": "002000A01680180E2000-200A202F205F3000",
        "Zl": "2028",
        "Zp": "2029",
        "C": "0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",
        "Cc": "0000-001F007F-009F",
        "Cf": "00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",
        "Co": "E000-F8FF",
        "Cs": "D800-DFFF",
        "Cn": "03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"
    });
}), ace.define("ace/token_iterator", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    var n = function(e, t, i) {
        this.$session = e, this.$row = t, this.$rowTokens = e.getTokens(t);
        var n = e.getTokenAt(t, i);
        this.$tokenIndex = n ? n.index : -1;
    };
    (function() {
        this.stepBackward = function() {
            for (this.$tokenIndex -= 1; this.$tokenIndex < 0; ) {
                if (this.$row -= 1, this.$row < 0) return this.$row = 0, null;
                this.$rowTokens = this.$session.getTokens(this.$row), this.$tokenIndex = this.$rowTokens.length - 1;
            }
            return this.$rowTokens[this.$tokenIndex];
        }, this.stepForward = function() {
            this.$tokenIndex += 1;
            for (var e; this.$tokenIndex >= this.$rowTokens.length; ) {
                if (this.$row += 1, e || (e = this.$session.getLength()), this.$row >= e) return this.$row = e - 1, 
                null;
                this.$rowTokens = this.$session.getTokens(this.$row), this.$tokenIndex = 0;
            }
            return this.$rowTokens[this.$tokenIndex];
        }, this.getCurrentToken = function() {
            return this.$rowTokens[this.$tokenIndex];
        }, this.getCurrentTokenRow = function() {
            return this.$row;
        }, this.getCurrentTokenColumn = function() {
            var e = this.$rowTokens, t = this.$tokenIndex, i = e[t].start;
            if (void 0 !== i) return i;
            for (i = 0; t > 0; ) i += e[t -= 1].value.length;
            return i;
        };
    }).call(n.prototype), t.TokenIterator = n;
}), ace.define("ace/mode/text", [ "require", "exports", "module", "ace/tokenizer", "ace/mode/text_highlight_rules", "ace/mode/behaviour", "ace/unicode", "ace/lib/lang", "ace/token_iterator", "ace/range" ], function(e, t, i) {
    "use strict";
    var n = e("../tokenizer").Tokenizer, s = e("./text_highlight_rules").TextHighlightRules, r = e("./behaviour").Behaviour, o = e("../unicode"), a = e("../lib/lang"), l = e("../token_iterator").TokenIterator, h = e("../range").Range, c = function() {
        this.HighlightRules = s, this.$behaviour = new r();
    };
    (function() {
        this.tokenRe = new RegExp("^[" + o.packages.L + o.packages.Mn + o.packages.Mc + o.packages.Nd + o.packages.Pc + "\\$_]+", "g"), 
        this.nonTokenRe = new RegExp("^(?:[^" + o.packages.L + o.packages.Mn + o.packages.Mc + o.packages.Nd + o.packages.Pc + "\\$_]|\\s])+", "g"), 
        this.getTokenizer = function() {
            return this.$tokenizer || (this.$highlightRules = this.$highlightRules || new this.HighlightRules(), 
            this.$tokenizer = new n(this.$highlightRules.getRules())), this.$tokenizer;
        }, this.lineCommentStart = "", this.blockComment = "", this.toggleCommentLines = function(e, t, i, n) {
            function s(e) {
                for (var t = i; t <= n; t++) e(r.getLine(t), t);
            }
            var r = t.doc, o = !0, l = !0, h = 1 / 0, c = t.getTabSize(), u = !1;
            if (this.lineCommentStart) {
                if (Array.isArray(this.lineCommentStart)) var p = this.lineCommentStart.map(a.escapeRegExp).join("|"), d = this.lineCommentStart[0]; else var p = a.escapeRegExp(this.lineCommentStart), d = this.lineCommentStart;
                p = new RegExp("^(\\s*)(?:" + p + ") ?"), u = t.getUseSoftTabs();
                var f = function(e, t) {
                    var i = e.match(p);
                    if (i) {
                        var n = i[1].length, s = i[0].length;
                        v(e, n, s) || " " != i[0][s - 1] || s--, r.removeInLine(t, n, s);
                    }
                }, m = d + " ", g = function(e, t) {
                    o && !/\S/.test(e) || (v(e, h, h) ? r.insertInLine({
                        "row": t,
                        "column": h
                    }, m) : r.insertInLine({
                        "row": t,
                        "column": h
                    }, d));
                }, y = function(e, t) {
                    return p.test(e);
                }, v = function(e, t, i) {
                    for (n = 0; t-- && " " == e.charAt(t); ) n++;
                    if (n % c != 0) return !1;
                    for (var n = 0; " " == e.charAt(i++); ) n++;
                    return c > 2 ? n % c != c - 1 : n % c == 0;
                };
            } else {
                if (!this.blockComment) return !1;
                var d = this.blockComment.start, L = this.blockComment.end, p = new RegExp("^(\\s*)(?:" + a.escapeRegExp(d) + ")"), w = new RegExp("(?:" + a.escapeRegExp(L) + ")\\s*$"), g = function(e, t) {
                    y(e, t) || o && !/\S/.test(e) || (r.insertInLine({
                        "row": t,
                        "column": e.length
                    }, L), r.insertInLine({
                        "row": t,
                        "column": h
                    }, d));
                }, f = function(e, t) {
                    var i;
                    (i = e.match(w)) && r.removeInLine(t, e.length - i[0].length, e.length), (i = e.match(p)) && r.removeInLine(t, i[1].length, i[0].length);
                }, y = function(e, i) {
                    if (p.test(e)) return !0;
                    for (var n = t.getTokens(i), s = 0; s < n.length; s++) if ("comment" === n[s].type) return !0;
                };
            }
            var b = 1 / 0;
            s(function(e, t) {
                var i = e.search(/\S/);
                -1 !== i ? (i < h && (h = i), l && !y(e, t) && (l = !1)) : b > e.length && (b = e.length);
            }), h == 1 / 0 && (h = b, o = !1, l = !1), u && h % c != 0 && (h = Math.floor(h / c) * c), 
            s(l ? f : g);
        }, this.toggleBlockComment = function(e, t, i, n) {
            var s = this.blockComment;
            if (s) {
                !s.start && s[0] && (s = s[0]);
                var r, o, a = new l(t, n.row, n.column), c = a.getCurrentToken(), u = (t.selection, 
                t.selection.toOrientedRange());
                if (c && /comment/.test(c.type)) {
                    for (var p, d; c && /comment/.test(c.type); ) {
                        if (-1 != (g = c.value.indexOf(s.start))) {
                            var f = a.getCurrentTokenRow(), m = a.getCurrentTokenColumn() + g;
                            p = new h(f, m, f, m + s.start.length);
                            break;
                        }
                        c = a.stepBackward();
                    }
                    for (c = (a = new l(t, n.row, n.column)).getCurrentToken(); c && /comment/.test(c.type); ) {
                        var g = c.value.indexOf(s.end);
                        if (-1 != g) {
                            var f = a.getCurrentTokenRow(), m = a.getCurrentTokenColumn() + g;
                            d = new h(f, m, f, m + s.end.length);
                            break;
                        }
                        c = a.stepForward();
                    }
                    d && t.remove(d), p && (t.remove(p), r = p.start.row, o = -s.start.length);
                } else o = s.start.length, r = i.start.row, t.insert(i.end, s.end), t.insert(i.start, s.start);
                u.start.row == r && (u.start.column += o), u.end.row == r && (u.end.column += o), 
                t.selection.fromOrientedRange(u);
            }
        }, this.getNextLineIndent = function(e, t, i) {
            return this.$getIndent(t);
        }, this.checkOutdent = function(e, t, i) {
            return !1;
        }, this.autoOutdent = function(e, t, i) {}, this.$getIndent = function(e) {
            return e.match(/^\s*/)[0];
        }, this.createWorker = function(e) {
            return null;
        }, this.createModeDelegates = function(e) {
            this.$embeds = [], this.$modes = {};
            for (var t in e) e[t] && (this.$embeds.push(t), this.$modes[t] = new e[t]());
            for (var i = [ "toggleBlockComment", "toggleCommentLines", "getNextLineIndent", "checkOutdent", "autoOutdent", "transformAction", "getCompletions" ], t = 0; t < i.length; t++) !function(e) {
                var n = i[t], s = e[n];
                e[i[t]] = function() {
                    return this.$delegator(n, arguments, s);
                };
            }(this);
        }, this.$delegator = function(e, t, i) {
            var n = t[0];
            "string" != typeof n && (n = n[0]);
            for (var s = 0; s < this.$embeds.length; s++) if (this.$modes[this.$embeds[s]]) {
                var r = n.split(this.$embeds[s]);
                if (!r[0] && r[1]) {
                    t[0] = r[1];
                    var o = this.$modes[this.$embeds[s]];
                    return o[e].apply(o, t);
                }
            }
            var a = i.apply(this, t);
            return i ? a : void 0;
        }, this.transformAction = function(e, t, i, n, s) {
            if (this.$behaviour) {
                var r = this.$behaviour.getBehaviours();
                for (var o in r) if (r[o][t]) {
                    var a = r[o][t].apply(this, arguments);
                    if (a) return a;
                }
            }
        }, this.getKeywords = function(e) {
            if (!this.completionKeywords) {
                var t = this.$tokenizer.rules, i = [];
                for (var n in t) for (var s = t[n], r = 0, o = s.length; r < o; r++) if ("string" == typeof s[r].token) /keyword|support|storage/.test(s[r].token) && i.push(s[r].regex); else if ("object" == typeof s[r].token) for (var a = 0, l = s[r].token.length; a < l; a++) if (/keyword|support|storage/.test(s[r].token[a])) {
                    n = s[r].regex.match(/\(.+?\)/g)[a];
                    i.push(n.substr(1, n.length - 2));
                }
                this.completionKeywords = i;
            }
            return e ? i.concat(this.$keywordList || []) : this.$keywordList;
        }, this.$createKeywordList = function() {
            return this.$highlightRules || this.getTokenizer(), this.$keywordList = this.$highlightRules.$keywordList || [];
        }, this.getCompletions = function(e, t, i, n) {
            return (this.$keywordList || this.$createKeywordList()).map(function(e) {
                return {
                    "name": e,
                    "value": e,
                    "score": 0,
                    "meta": "keyword"
                };
            });
        }, this.$id = "ace/mode/text";
    }).call(c.prototype), t.Mode = c;
}), ace.define("ace/anchor", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/event_emitter" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/oop"), s = e("./lib/event_emitter").EventEmitter, r = t.Anchor = function(e, t, i) {
        this.$onChange = this.onChange.bind(this), this.attach(e), void 0 === i ? this.setPosition(t.row, t.column) : this.setPosition(t, i);
    };
    (function() {
        n.implement(this, s), this.getPosition = function() {
            return this.$clipPositionToDocument(this.row, this.column);
        }, this.getDocument = function() {
            return this.document;
        }, this.$insertRight = !1, this.onChange = function(e) {
            var t = e.data, i = t.range;
            if ((i.start.row != i.end.row || i.start.row == this.row) && !(i.start.row > this.row || i.start.row == this.row && i.start.column > this.column)) {
                var n = this.row, s = this.column, r = i.start, o = i.end;
                "insertText" === t.action ? r.row === n && r.column <= s ? r.column === s && this.$insertRight || (r.row === o.row ? s += o.column - r.column : (s -= r.column, 
                n += o.row - r.row)) : r.row !== o.row && r.row < n && (n += o.row - r.row) : "insertLines" === t.action ? r.row === n && 0 === s && this.$insertRight || r.row <= n && (n += o.row - r.row) : "removeText" === t.action ? r.row === n && r.column < s ? s = o.column >= s ? r.column : Math.max(0, s - (o.column - r.column)) : r.row !== o.row && r.row < n ? (o.row === n && (s = Math.max(0, s - o.column) + r.column), 
                n -= o.row - r.row) : o.row === n && (n -= o.row - r.row, s = Math.max(0, s - o.column) + r.column) : "removeLines" == t.action && r.row <= n && (o.row <= n ? n -= o.row - r.row : (n = r.row, 
                s = 0)), this.setPosition(n, s, !0);
            }
        }, this.setPosition = function(e, t, i) {
            var n;
            if (n = i ? {
                "row": e,
                "column": t
            } : this.$clipPositionToDocument(e, t), this.row != n.row || this.column != n.column) {
                var s = {
                    "row": this.row,
                    "column": this.column
                };
                this.row = n.row, this.column = n.column, this._signal("change", {
                    "old": s,
                    "value": n
                });
            }
        }, this.detach = function() {
            this.document.removeEventListener("change", this.$onChange);
        }, this.attach = function(e) {
            this.document = e || this.document, this.document.on("change", this.$onChange);
        }, this.$clipPositionToDocument = function(e, t) {
            var i = {};
            return e >= this.document.getLength() ? (i.row = Math.max(0, this.document.getLength() - 1), 
            i.column = this.document.getLine(i.row).length) : e < 0 ? (i.row = 0, i.column = 0) : (i.row = e, 
            i.column = Math.min(this.document.getLine(i.row).length, Math.max(0, t))), t < 0 && (i.column = 0), 
            i;
        };
    }).call(r.prototype);
}), ace.define("ace/document", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/event_emitter", "ace/range", "ace/anchor" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/oop"), s = e("./lib/event_emitter").EventEmitter, r = e("./range").Range, o = e("./anchor").Anchor, a = function(e) {
        this.$lines = [], 0 === e.length ? this.$lines = [ "" ] : Array.isArray(e) ? this._insertLines(0, e) : this.insert({
            "row": 0,
            "column": 0
        }, e);
    };
    (function() {
        n.implement(this, s), this.setValue = function(e) {
            var t = this.getLength();
            this.remove(new r(0, 0, t, this.getLine(t - 1).length)), this.insert({
                "row": 0,
                "column": 0
            }, e);
        }, this.getValue = function() {
            return this.getAllLines().join(this.getNewLineCharacter());
        }, this.createAnchor = function(e, t) {
            return new o(this, e, t);
        }, 0 === "aaa".split(/a/).length ? this.$split = function(e) {
            return e.replace(/\r\n|\r/g, "\n").split("\n");
        } : this.$split = function(e) {
            return e.split(/\r\n|\r|\n/);
        }, this.$detectNewLine = function(e) {
            var t = e.match(/^.*?(\r\n|\r|\n)/m);
            this.$autoNewLine = t ? t[1] : "\n", this._signal("changeNewLineMode");
        }, this.getNewLineCharacter = function() {
            switch (this.$newLineMode) {
              case "windows":
                return "\r\n";

              case "unix":
                return "\n";

              default:
                return this.$autoNewLine || "\n";
            }
        }, this.$autoNewLine = "", this.$newLineMode = "auto", this.setNewLineMode = function(e) {
            this.$newLineMode !== e && (this.$newLineMode = e, this._signal("changeNewLineMode"));
        }, this.getNewLineMode = function() {
            return this.$newLineMode;
        }, this.isNewLine = function(e) {
            return "\r\n" == e || "\r" == e || "\n" == e;
        }, this.getLine = function(e) {
            return this.$lines[e] || "";
        }, this.getLines = function(e, t) {
            return this.$lines.slice(e, t + 1);
        }, this.getAllLines = function() {
            return this.getLines(0, this.getLength());
        }, this.getLength = function() {
            return this.$lines.length;
        }, this.getTextRange = function(e) {
            if (e.start.row == e.end.row) return this.getLine(e.start.row).substring(e.start.column, e.end.column);
            var t = this.getLines(e.start.row, e.end.row);
            t[0] = (t[0] || "").substring(e.start.column);
            var i = t.length - 1;
            return e.end.row - e.start.row == i && (t[i] = t[i].substring(0, e.end.column)), 
            t.join(this.getNewLineCharacter());
        }, this.$clipPosition = function(e) {
            var t = this.getLength();
            return e.row >= t ? (e.row = Math.max(0, t - 1), e.column = this.getLine(t - 1).length) : e.row < 0 && (e.row = 0), 
            e;
        }, this.insert = function(e, t) {
            if (!t || 0 === t.length) return e;
            e = this.$clipPosition(e), this.getLength() <= 1 && this.$detectNewLine(t);
            var i = this.$split(t), n = i.splice(0, 1)[0], s = 0 == i.length ? null : i.splice(i.length - 1, 1)[0];
            return e = this.insertInLine(e, n), null !== s && (e = this.insertNewLine(e), e = this._insertLines(e.row, i), 
            e = this.insertInLine(e, s || "")), e;
        }, this.insertLines = function(e, t) {
            return e >= this.getLength() ? this.insert({
                "row": e,
                "column": 0
            }, "\n" + t.join("\n")) : this._insertLines(Math.max(e, 0), t);
        }, this._insertLines = function(e, t) {
            if (0 == t.length) return {
                "row": e,
                "column": 0
            };
            for (;t.length > 2e4; ) {
                var i = this._insertLines(e, t.slice(0, 2e4));
                t = t.slice(2e4), e = i.row;
            }
            var n = [ e, 0 ];
            n.push.apply(n, t), this.$lines.splice.apply(this.$lines, n);
            var s = new r(e, 0, e + t.length, 0), o = {
                "action": "insertLines",
                "range": s,
                "lines": t
            };
            return this._signal("change", {
                "data": o
            }), s.end;
        }, this.insertNewLine = function(e) {
            e = this.$clipPosition(e);
            var t = this.$lines[e.row] || "";
            this.$lines[e.row] = t.substring(0, e.column), this.$lines.splice(e.row + 1, 0, t.substring(e.column, t.length));
            var i = {
                "row": e.row + 1,
                "column": 0
            }, n = {
                "action": "insertText",
                "range": r.fromPoints(e, i),
                "text": this.getNewLineCharacter()
            };
            return this._signal("change", {
                "data": n
            }), i;
        }, this.insertInLine = function(e, t) {
            if (0 == t.length) return e;
            var i = this.$lines[e.row] || "";
            this.$lines[e.row] = i.substring(0, e.column) + t + i.substring(e.column);
            var n = {
                "row": e.row,
                "column": e.column + t.length
            }, s = {
                "action": "insertText",
                "range": r.fromPoints(e, n),
                "text": t
            };
            return this._signal("change", {
                "data": s
            }), n;
        }, this.remove = function(e) {
            if (e instanceof r || (e = r.fromPoints(e.start, e.end)), e.start = this.$clipPosition(e.start), 
            e.end = this.$clipPosition(e.end), e.isEmpty()) return e.start;
            var t = e.start.row, i = e.end.row;
            if (e.isMultiLine()) {
                var n = 0 == e.start.column ? t : t + 1, s = i - 1;
                e.end.column > 0 && this.removeInLine(i, 0, e.end.column), s >= n && this._removeLines(n, s), 
                n != t && (this.removeInLine(t, e.start.column, this.getLine(t).length), this.removeNewLine(e.start.row));
            } else this.removeInLine(t, e.start.column, e.end.column);
            return e.start;
        }, this.removeInLine = function(e, t, i) {
            if (t != i) {
                var n = new r(e, t, e, i), s = this.getLine(e), o = s.substring(t, i), a = s.substring(0, t) + s.substring(i, s.length);
                this.$lines.splice(e, 1, a);
                var l = {
                    "action": "removeText",
                    "range": n,
                    "text": o
                };
                return this._signal("change", {
                    "data": l
                }), n.start;
            }
        }, this.removeLines = function(e, t) {
            return e < 0 || t >= this.getLength() ? this.remove(new r(e, 0, t + 1, 0)) : this._removeLines(e, t);
        }, this._removeLines = function(e, t) {
            var i = new r(e, 0, t + 1, 0), n = this.$lines.splice(e, t - e + 1), s = {
                "action": "removeLines",
                "range": i,
                "nl": this.getNewLineCharacter(),
                "lines": n
            };
            return this._signal("change", {
                "data": s
            }), n;
        }, this.removeNewLine = function(e) {
            var t = this.getLine(e), i = this.getLine(e + 1), n = new r(e, t.length, e + 1, 0), s = t + i;
            this.$lines.splice(e, 2, s);
            var o = {
                "action": "removeText",
                "range": n,
                "text": this.getNewLineCharacter()
            };
            this._signal("change", {
                "data": o
            });
        }, this.replace = function(e, t) {
            if (e instanceof r || (e = r.fromPoints(e.start, e.end)), 0 == t.length && e.isEmpty()) return e.start;
            if (t == this.getTextRange(e)) return e.end;
            if (this.remove(e), t) var i = this.insert(e.start, t); else i = e.start;
            return i;
        }, this.applyDeltas = function(e) {
            for (var t = 0; t < e.length; t++) {
                var i = e[t], n = r.fromPoints(i.range.start, i.range.end);
                "insertLines" == i.action ? this.insertLines(n.start.row, i.lines) : "insertText" == i.action ? this.insert(n.start, i.text) : "removeLines" == i.action ? this._removeLines(n.start.row, n.end.row - 1) : "removeText" == i.action && this.remove(n);
            }
        }, this.revertDeltas = function(e) {
            for (var t = e.length - 1; t >= 0; t--) {
                var i = e[t], n = r.fromPoints(i.range.start, i.range.end);
                "insertLines" == i.action ? this._removeLines(n.start.row, n.end.row - 1) : "insertText" == i.action ? this.remove(n) : "removeLines" == i.action ? this._insertLines(n.start.row, i.lines) : "removeText" == i.action && this.insert(n.start, i.text);
            }
        }, this.indexToPosition = function(e, t) {
            for (var i = this.$lines || this.getAllLines(), n = this.getNewLineCharacter().length, s = t || 0, r = i.length; s < r; s++) if ((e -= i[s].length + n) < 0) return {
                "row": s,
                "column": e + i[s].length + n
            };
            return {
                "row": r - 1,
                "column": i[r - 1].length
            };
        }, this.positionToIndex = function(e, t) {
            for (var i = this.$lines || this.getAllLines(), n = this.getNewLineCharacter().length, s = 0, r = Math.min(e.row, i.length), o = t || 0; o < r; ++o) s += i[o].length + n;
            return s + e.column;
        };
    }).call(a.prototype), t.Document = a;
}), ace.define("ace/background_tokenizer", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/event_emitter" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/oop"), s = e("./lib/event_emitter").EventEmitter, r = function(e, t) {
        this.running = !1, this.lines = [], this.states = [], this.currentLine = 0, this.tokenizer = e;
        var i = this;
        this.$worker = function() {
            if (i.running) {
                for (var e = new Date(), t = i.currentLine, n = -1, s = i.doc; i.lines[t]; ) t++;
                var r = t, o = s.getLength(), a = 0;
                for (i.running = !1; t < o; ) {
                    i.$tokenizeRow(t), n = t;
                    do {
                        t++;
                    } while (i.lines[t]);
                    if (++a % 5 == 0 && new Date() - e > 20) {
                        i.running = setTimeout(i.$worker, 20);
                        break;
                    }
                }
                i.currentLine = t, r <= n && i.fireUpdateEvent(r, n);
            }
        };
    };
    (function() {
        n.implement(this, s), this.setTokenizer = function(e) {
            this.tokenizer = e, this.lines = [], this.states = [], this.start(0);
        }, this.setDocument = function(e) {
            this.doc = e, this.lines = [], this.states = [], this.stop();
        }, this.fireUpdateEvent = function(e, t) {
            var i = {
                "first": e,
                "last": t
            };
            this._signal("update", {
                "data": i
            });
        }, this.start = function(e) {
            this.currentLine = Math.min(e || 0, this.currentLine, this.doc.getLength()), this.lines.splice(this.currentLine, this.lines.length), 
            this.states.splice(this.currentLine, this.states.length), this.stop(), this.running = setTimeout(this.$worker, 700);
        }, this.scheduleStart = function() {
            this.running || (this.running = setTimeout(this.$worker, 700));
        }, this.$updateOnChange = function(e) {
            var t = e.range, i = t.start.row, n = t.end.row - i;
            if (0 === n) this.lines[i] = null; else if ("removeText" == e.action || "removeLines" == e.action) this.lines.splice(i, n + 1, null), 
            this.states.splice(i, n + 1, null); else {
                var s = Array(n + 1);
                s.unshift(i, 1), this.lines.splice.apply(this.lines, s), this.states.splice.apply(this.states, s);
            }
            this.currentLine = Math.min(i, this.currentLine, this.doc.getLength()), this.stop();
        }, this.stop = function() {
            this.running && clearTimeout(this.running), this.running = !1;
        }, this.getTokens = function(e) {
            return this.lines[e] || this.$tokenizeRow(e);
        }, this.getState = function(e) {
            return this.currentLine == e && this.$tokenizeRow(e), this.states[e] || "start";
        }, this.$tokenizeRow = function(e) {
            var t = this.doc.getLine(e), i = this.states[e - 1], n = this.tokenizer.getLineTokens(t, i, e);
            return this.states[e] + "" != n.state + "" ? (this.states[e] = n.state, this.lines[e + 1] = null, 
            this.currentLine > e + 1 && (this.currentLine = e + 1)) : this.currentLine == e && (this.currentLine = e + 1), 
            this.lines[e] = n.tokens;
        };
    }).call(r.prototype), t.BackgroundTokenizer = r;
}), ace.define("ace/search_highlight", [ "require", "exports", "module", "ace/lib/lang", "ace/lib/oop", "ace/range" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/lang"), s = (e("./lib/oop"), e("./range").Range), r = function(e, t, i) {
        this.setRegexp(e), this.clazz = t, this.type = i || "text";
    };
    (function() {
        this.MAX_RANGES = 500, this.setRegexp = function(e) {
            this.regExp + "" != e + "" && (this.regExp = e, this.cache = []);
        }, this.update = function(e, t, i, r) {
            if (this.regExp) for (var o = r.firstRow, a = r.lastRow, l = o; l <= a; l++) {
                var h = this.cache[l];
                null == h && ((h = n.getMatchOffsets(i.getLine(l), this.regExp)).length > this.MAX_RANGES && (h = h.slice(0, this.MAX_RANGES)), 
                h = h.map(function(e) {
                    return new s(l, e.offset, l, e.offset + e.length);
                }), this.cache[l] = h.length ? h : "");
                for (var c = h.length; c--; ) t.drawSingleLineMarker(e, h[c].toScreenRange(i), this.clazz, r);
            }
        };
    }).call(r.prototype), t.SearchHighlight = r;
}), ace.define("ace/edit_session/fold_line", [ "require", "exports", "module", "ace/range" ], function(e, t, i) {
    "use strict";
    function n(e, t) {
        this.foldData = e, Array.isArray(t) ? this.folds = t : t = this.folds = [ t ];
        var i = t[t.length - 1];
        this.range = new s(t[0].start.row, t[0].start.column, i.end.row, i.end.column), 
        this.start = this.range.start, this.end = this.range.end, this.folds.forEach(function(e) {
            e.setFoldLine(this);
        }, this);
    }
    var s = e("../range").Range;
    (function() {
        this.shiftRow = function(e) {
            this.start.row += e, this.end.row += e, this.folds.forEach(function(t) {
                t.start.row += e, t.end.row += e;
            });
        }, this.addFold = function(e) {
            if (e.sameRow) {
                if (e.start.row < this.startRow || e.endRow > this.endRow) throw new Error("Can't add a fold to this FoldLine as it has no connection");
                this.folds.push(e), this.folds.sort(function(e, t) {
                    return -e.range.compareEnd(t.start.row, t.start.column);
                }), this.range.compareEnd(e.start.row, e.start.column) > 0 ? (this.end.row = e.end.row, 
                this.end.column = e.end.column) : this.range.compareStart(e.end.row, e.end.column) < 0 && (this.start.row = e.start.row, 
                this.start.column = e.start.column);
            } else if (e.start.row == this.end.row) this.folds.push(e), this.end.row = e.end.row, 
            this.end.column = e.end.column; else {
                if (e.end.row != this.start.row) throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");
                this.folds.unshift(e), this.start.row = e.start.row, this.start.column = e.start.column;
            }
            e.foldLine = this;
        }, this.containsRow = function(e) {
            return e >= this.start.row && e <= this.end.row;
        }, this.walk = function(e, t, i) {
            var n, s, r, o = 0, a = this.folds, l = !0;
            null == t && (t = this.end.row, i = this.end.column);
            for (var h = 0; h < a.length; h++) {
                if (n = a[h], -1 == (s = n.range.compareStart(t, i))) return void e(null, t, i, o, l);
                if (r = e(null, n.start.row, n.start.column, o, l), (r = !r && e(n.placeholder, n.start.row, n.start.column, o)) || 0 === s) return;
                l = !n.sameRow, o = n.end.column;
            }
            e(null, t, i, o, l);
        }, this.getNextFoldTo = function(e, t) {
            for (var i, n, s = 0; s < this.folds.length; s++) {
                if (i = this.folds[s], -1 == (n = i.range.compareEnd(e, t))) return {
                    "fold": i,
                    "kind": "after"
                };
                if (0 === n) return {
                    "fold": i,
                    "kind": "inside"
                };
            }
            return null;
        }, this.addRemoveChars = function(e, t, i) {
            var n, s, r = this.getNextFoldTo(e, t);
            if (r) if (n = r.fold, "inside" == r.kind && n.start.column != t && n.start.row != e) window.console && window.console.log(e, t, n); else if (n.start.row == e) {
                var o = (s = this.folds).indexOf(n);
                for (0 === o && (this.start.column += i), o; o < s.length; o++) {
                    if (n = s[o], n.start.column += i, !n.sameRow) return;
                    n.end.column += i;
                }
                this.end.column += i;
            }
        }, this.split = function(e, t) {
            var i = this.getNextFoldTo(e, t);
            if (!i || "inside" == i.kind) return null;
            var s = i.fold, r = this.folds, o = this.foldData, a = r.indexOf(s), l = r[a - 1];
            this.end.row = l.end.row, this.end.column = l.end.column;
            var h = new n(o, r = r.splice(a, r.length - a));
            return o.splice(o.indexOf(this) + 1, 0, h), h;
        }, this.merge = function(e) {
            for (var t = e.folds, i = 0; i < t.length; i++) this.addFold(t[i]);
            var n = this.foldData;
            n.splice(n.indexOf(e), 1);
        }, this.toString = function() {
            var e = [ this.range.toString() + ": [" ];
            return this.folds.forEach(function(t) {
                e.push("  " + t.toString());
            }), e.push("]"), e.join("\n");
        }, this.idxToPosition = function(e) {
            for (var t = 0, i = 0; i < this.folds.length; i++) {
                var n = this.folds[i];
                if ((e -= n.start.column - t) < 0) return {
                    "row": n.start.row,
                    "column": n.start.column + e
                };
                if ((e -= n.placeholder.length) < 0) return n.start;
                t = n.end.column;
            }
            return {
                "row": this.end.row,
                "column": this.end.column + e
            };
        };
    }).call(n.prototype), t.FoldLine = n;
}), ace.define("ace/range_list", [ "require", "exports", "module", "ace/range" ], function(e, t, i) {
    "use strict";
    var n = e("./range").Range.comparePoints, s = function() {
        this.ranges = [];
    };
    (function() {
        this.comparePoints = n, this.pointIndex = function(e, t, i) {
            for (var s = this.ranges, r = i || 0; r < s.length; r++) {
                var o = s[r], a = n(e, o.end);
                if (!(a > 0)) {
                    var l = n(e, o.start);
                    return 0 === a ? t && 0 !== l ? -r - 2 : r : l > 0 || 0 === l && !t ? r : -r - 1;
                }
            }
            return -r - 1;
        }, this.add = function(e) {
            var t = !e.isEmpty(), i = this.pointIndex(e.start, t);
            i < 0 && (i = -i - 1);
            var n = this.pointIndex(e.end, t, i);
            return n < 0 ? n = -n - 1 : n++, this.ranges.splice(i, n - i, e);
        }, this.addList = function(e) {
            for (var t = [], i = e.length; i--; ) t.push.call(t, this.add(e[i]));
            return t;
        }, this.substractPoint = function(e) {
            var t = this.pointIndex(e);
            if (t >= 0) return this.ranges.splice(t, 1);
        }, this.merge = function() {
            for (var e, t = [], i = this.ranges, s = (i = i.sort(function(e, t) {
                return n(e.start, t.start);
            }))[0], r = 1; r < i.length; r++) {
                e = s, s = i[r];
                var o = n(e.end, s.start);
                o < 0 || (0 != o || e.isEmpty() || s.isEmpty()) && (n(e.end, s.end) < 0 && (e.end.row = s.end.row, 
                e.end.column = s.end.column), i.splice(r, 1), t.push(s), s = e, r--);
            }
            return this.ranges = i, t;
        }, this.contains = function(e, t) {
            return this.pointIndex({
                "row": e,
                "column": t
            }) >= 0;
        }, this.containsPoint = function(e) {
            return this.pointIndex(e) >= 0;
        }, this.rangeAtPoint = function(e) {
            var t = this.pointIndex(e);
            if (t >= 0) return this.ranges[t];
        }, this.clipRows = function(e, t) {
            var i = this.ranges;
            if (i[0].start.row > t || i[i.length - 1].start.row < e) return [];
            var n = this.pointIndex({
                "row": e,
                "column": 0
            });
            n < 0 && (n = -n - 1);
            var s = this.pointIndex({
                "row": t,
                "column": 0
            }, n);
            s < 0 && (s = -s - 1);
            for (var r = [], o = n; o < s; o++) r.push(i[o]);
            return r;
        }, this.removeAll = function() {
            return this.ranges.splice(0, this.ranges.length);
        }, this.attach = function(e) {
            this.session && this.detach(), this.session = e, this.onChange = this.$onChange.bind(this), 
            this.session.on("change", this.onChange);
        }, this.detach = function() {
            this.session && (this.session.removeListener("change", this.onChange), this.session = null);
        }, this.$onChange = function(e) {
            var t = e.data.range;
            if ("i" == e.data.action[0]) var i = t.start, n = t.end; else var n = t.start, i = t.end;
            for (var s = i.row, r = n.row - s, o = -i.column + n.column, a = this.ranges, l = 0, h = a.length; l < h; l++) if (!((c = a[l]).end.row < s)) {
                if (c.start.row > s) break;
                if (c.start.row == s && c.start.column >= i.column && (c.start.column == i.column && this.$insertRight || (c.start.column += o, 
                c.start.row += r)), c.end.row == s && c.end.column >= i.column) {
                    if (c.end.column == i.column && this.$insertRight) continue;
                    c.end.column == i.column && o > 0 && l < h - 1 && c.end.column > c.start.column && c.end.column == a[l + 1].start.column && (c.end.column -= o), 
                    c.end.column += o, c.end.row += r;
                }
            }
            if (0 != r && l < h) for (;l < h; l++) {
                var c = a[l];
                c.start.row += r, c.end.row += r;
            }
        };
    }).call(s.prototype), t.RangeList = s;
}), ace.define("ace/edit_session/fold", [ "require", "exports", "module", "ace/range", "ace/range_list", "ace/lib/oop" ], function(e, t, i) {
    "use strict";
    function n(e, t) {
        e.row -= t.row, 0 == e.row && (e.column -= t.column);
    }
    function s(e, t) {
        n(e.start, t), n(e.end, t);
    }
    function r(e, t) {
        0 == e.row && (e.column += t.column), e.row += t.row;
    }
    function o(e, t) {
        r(e.start, t), r(e.end, t);
    }
    e("../range").Range;
    var a = e("../range_list").RangeList, l = e("../lib/oop"), h = t.Fold = function(e, t) {
        this.foldLine = null, this.placeholder = t, this.range = e, this.start = e.start, 
        this.end = e.end, this.sameRow = e.start.row == e.end.row, this.subFolds = this.ranges = [];
    };
    l.inherits(h, a), function() {
        this.toString = function() {
            return '"' + this.placeholder + '" ' + this.range.toString();
        }, this.setFoldLine = function(e) {
            this.foldLine = e, this.subFolds.forEach(function(t) {
                t.setFoldLine(e);
            });
        }, this.clone = function() {
            var e = this.range.clone(), t = new h(e, this.placeholder);
            return this.subFolds.forEach(function(e) {
                t.subFolds.push(e.clone());
            }), t.collapseChildren = this.collapseChildren, t;
        }, this.addSubFold = function(e) {
            if (!this.range.isEqual(e)) {
                if (!this.range.containsRange(e)) throw new Error("A fold can't intersect already existing fold" + e.range + this.range);
                s(e, this.start);
                for (var t = e.start.row, i = e.start.column, n = 0, r = -1; n < this.subFolds.length && 1 == (r = this.subFolds[n].range.compare(t, i)); n++) ;
                var o = this.subFolds[n];
                if (0 == r) return o.addSubFold(e);
                for (var t = e.range.end.row, i = e.range.end.column, a = n, r = -1; a < this.subFolds.length && 1 == (r = this.subFolds[a].range.compare(t, i)); a++) ;
                this.subFolds[a];
                if (0 == r) throw new Error("A fold can't intersect already existing fold" + e.range + this.range);
                this.subFolds.splice(n, a - n, e);
                return e.setFoldLine(this.foldLine), e;
            }
        }, this.restoreRange = function(e) {
            return o(e, this.start);
        };
    }.call(h.prototype);
}), ace.define("ace/edit_session/folding", [ "require", "exports", "module", "ace/range", "ace/edit_session/fold_line", "ace/edit_session/fold", "ace/token_iterator" ], function(e, t, i) {
    "use strict";
    var n = e("../range").Range, s = e("./fold_line").FoldLine, r = e("./fold").Fold, o = e("../token_iterator").TokenIterator;
    t.Folding = function() {
        this.getFoldAt = function(e, t, i) {
            var n = this.getFoldLine(e);
            if (!n) return null;
            for (var s = n.folds, r = 0; r < s.length; r++) {
                var o = s[r];
                if (o.range.contains(e, t)) {
                    if (1 == i && o.range.isEnd(e, t)) continue;
                    if (-1 == i && o.range.isStart(e, t)) continue;
                    return o;
                }
            }
        }, this.getFoldsInRange = function(e) {
            var t = e.start, i = e.end, n = this.$foldData, s = [];
            t.column += 1, i.column -= 1;
            for (var r = 0; r < n.length; r++) {
                var o = n[r].range.compareRange(e);
                if (2 != o) {
                    if (-2 == o) break;
                    for (var a = n[r].folds, l = 0; l < a.length; l++) {
                        var h = a[l];
                        if (-2 == (o = h.range.compareRange(e))) break;
                        if (2 != o) {
                            if (42 == o) break;
                            s.push(h);
                        }
                    }
                }
            }
            return t.column -= 1, i.column += 1, s;
        }, this.getFoldsInRangeList = function(e) {
            if (Array.isArray(e)) t = [], e.forEach(function(e) {
                t = t.concat(this.getFoldsInRange(e));
            }, this); else var t = this.getFoldsInRange(e);
            return t;
        }, this.getAllFolds = function() {
            for (var e = [], t = this.$foldData, i = 0; i < t.length; i++) for (var n = 0; n < t[i].folds.length; n++) e.push(t[i].folds[n]);
            return e;
        }, this.getFoldStringAt = function(e, t, i, n) {
            if (!(n = n || this.getFoldLine(e))) return null;
            for (var s, r, o = {
                "end": {
                    "column": 0
                }
            }, a = 0; a < n.folds.length; a++) {
                var l = (r = n.folds[a]).range.compareEnd(e, t);
                if (-1 == l) {
                    s = this.getLine(r.start.row).substring(o.end.column, r.start.column);
                    break;
                }
                if (0 === l) return null;
                o = r;
            }
            return s || (s = this.getLine(r.start.row).substring(o.end.column)), -1 == i ? s.substring(0, t - o.end.column) : 1 == i ? s.substring(t - o.end.column) : s;
        }, this.getFoldLine = function(e, t) {
            var i = this.$foldData, n = 0;
            for (t && (n = i.indexOf(t)), -1 == n && (n = 0), n; n < i.length; n++) {
                var s = i[n];
                if (s.start.row <= e && s.end.row >= e) return s;
                if (s.end.row > e) return null;
            }
            return null;
        }, this.getNextFoldLine = function(e, t) {
            var i = this.$foldData, n = 0;
            for (t && (n = i.indexOf(t)), -1 == n && (n = 0), n; n < i.length; n++) {
                var s = i[n];
                if (s.end.row >= e) return s;
            }
            return null;
        }, this.getFoldedRowCount = function(e, t) {
            for (var i = this.$foldData, n = t - e + 1, s = 0; s < i.length; s++) {
                var r = i[s], o = r.end.row, a = r.start.row;
                if (o >= t) {
                    a < t && (a >= e ? n -= t - a : n = 0);
                    break;
                }
                o >= e && (n -= a >= e ? o - a : o - e + 1);
            }
            return n;
        }, this.$addFoldLine = function(e) {
            return this.$foldData.push(e), this.$foldData.sort(function(e, t) {
                return e.start.row - t.start.row;
            }), e;
        }, this.addFold = function(e, t) {
            var i, n = this.$foldData, o = !1;
            e instanceof r ? i = e : (i = new r(t, e)).collapseChildren = t.collapseChildren, 
            this.$clipRangeToDocument(i.range);
            var a = i.start.row, l = i.start.column, h = i.end.row, c = i.end.column;
            if (!(a < h || a == h && l <= c - 2)) throw new Error("The range has to be at least 2 characters width");
            var u = this.getFoldAt(a, l, 1), p = this.getFoldAt(h, c, -1);
            if (u && p == u) return u.addSubFold(i);
            u && !u.range.isStart(a, l) && this.removeFold(u), p && !p.range.isEnd(h, c) && this.removeFold(p);
            var d = this.getFoldsInRange(i.range);
            d.length > 0 && (this.removeFolds(d), d.forEach(function(e) {
                i.addSubFold(e);
            }));
            for (var f = 0; f < n.length; f++) {
                var m = n[f];
                if (h == m.start.row) {
                    m.addFold(i), o = !0;
                    break;
                }
                if (a == m.end.row) {
                    if (m.addFold(i), o = !0, !i.sameRow) {
                        var g = n[f + 1];
                        if (g && g.start.row == h) {
                            m.merge(g);
                            break;
                        }
                    }
                    break;
                }
                if (h <= m.start.row) break;
            }
            return o || (m = this.$addFoldLine(new s(this.$foldData, i))), this.$useWrapMode ? this.$updateWrapData(m.start.row, m.start.row) : this.$updateRowLengthCache(m.start.row, m.start.row), 
            this.$modified = !0, this._emit("changeFold", {
                "data": i,
                "action": "add"
            }), i;
        }, this.addFolds = function(e) {
            e.forEach(function(e) {
                this.addFold(e);
            }, this);
        }, this.removeFold = function(e) {
            var t = e.foldLine, i = t.start.row, n = t.end.row, s = this.$foldData, r = t.folds;
            if (1 == r.length) s.splice(s.indexOf(t), 1); else if (t.range.isEnd(e.end.row, e.end.column)) r.pop(), 
            t.end.row = r[r.length - 1].end.row, t.end.column = r[r.length - 1].end.column; else if (t.range.isStart(e.start.row, e.start.column)) r.shift(), 
            t.start.row = r[0].start.row, t.start.column = r[0].start.column; else if (e.sameRow) r.splice(r.indexOf(e), 1); else {
                var o = t.split(e.start.row, e.start.column);
                (r = o.folds).shift(), o.start.row = r[0].start.row, o.start.column = r[0].start.column;
            }
            this.$updating || (this.$useWrapMode ? this.$updateWrapData(i, n) : this.$updateRowLengthCache(i, n)), 
            this.$modified = !0, this._emit("changeFold", {
                "data": e,
                "action": "remove"
            });
        }, this.removeFolds = function(e) {
            for (var t = [], i = 0; i < e.length; i++) t.push(e[i]);
            t.forEach(function(e) {
                this.removeFold(e);
            }, this), this.$modified = !0;
        }, this.expandFold = function(e) {
            this.removeFold(e), e.subFolds.forEach(function(t) {
                e.restoreRange(t), this.addFold(t);
            }, this), e.collapseChildren > 0 && this.foldAll(e.start.row + 1, e.end.row, e.collapseChildren - 1), 
            e.subFolds = [];
        }, this.expandFolds = function(e) {
            e.forEach(function(e) {
                this.expandFold(e);
            }, this);
        }, this.unfold = function(e, t) {
            var i, s;
            if (null == e ? (i = new n(0, 0, this.getLength(), 0), t = !0) : i = "number" == typeof e ? new n(e, 0, e, this.getLine(e).length) : "row" in e ? n.fromPoints(e, e) : e, 
            s = this.getFoldsInRangeList(i), t) this.removeFolds(s); else for (var r = s; r.length; ) this.expandFolds(r), 
            r = this.getFoldsInRangeList(i);
            if (s.length) return s;
        }, this.isRowFolded = function(e, t) {
            return !!this.getFoldLine(e, t);
        }, this.getRowFoldEnd = function(e, t) {
            var i = this.getFoldLine(e, t);
            return i ? i.end.row : e;
        }, this.getRowFoldStart = function(e, t) {
            var i = this.getFoldLine(e, t);
            return i ? i.start.row : e;
        }, this.getFoldDisplayLine = function(e, t, i, n, s) {
            null == n && (n = e.start.row), null == s && (s = 0), null == t && (t = e.end.row), 
            null == i && (i = this.getLine(t).length);
            var r = this.doc, o = "";
            return e.walk(function(e, t, i, a) {
                if (!(t < n)) {
                    if (t == n) {
                        if (i < s) return;
                        a = Math.max(s, a);
                    }
                    o += null != e ? e : r.getLine(t).substring(a, i);
                }
            }, t, i), o;
        }, this.getDisplayLine = function(e, t, i, n) {
            var s = this.getFoldLine(e);
            if (s) return this.getFoldDisplayLine(s, e, t, i, n);
            var r;
            return (r = this.doc.getLine(e)).substring(n || 0, t || r.length);
        }, this.$cloneFoldData = function() {
            var e = [];
            return e = this.$foldData.map(function(t) {
                var i = t.folds.map(function(e) {
                    return e.clone();
                });
                return new s(e, i);
            });
        }, this.toggleFold = function(e) {
            var t, i, n = this.selection.getRange();
            if (n.isEmpty()) {
                var s = n.start;
                if (t = this.getFoldAt(s.row, s.column)) return void this.expandFold(t);
                (i = this.findMatchingBracket(s)) ? 1 == n.comparePoint(i) ? n.end = i : (n.start = i, 
                n.start.column++, n.end.column--) : (i = this.findMatchingBracket({
                    "row": s.row,
                    "column": s.column + 1
                })) ? (1 == n.comparePoint(i) ? n.end = i : n.start = i, n.start.column++) : n = this.getCommentFoldRange(s.row, s.column) || n;
            } else {
                var r = this.getFoldsInRange(n);
                if (e && r.length) return void this.expandFolds(r);
                1 == r.length && (t = r[0]);
            }
            if (t || (t = this.getFoldAt(n.start.row, n.start.column)), t && t.range.toString() == n.toString()) this.expandFold(t); else {
                var o = "...";
                if (!n.isMultiLine()) {
                    if ((o = this.getTextRange(n)).length < 4) return;
                    o = o.trim().substring(0, 2) + "..";
                }
                this.addFold(o, n);
            }
        }, this.getCommentFoldRange = function(e, t, i) {
            var s = new o(this, e, t), r = s.getCurrentToken();
            if (r && /^comment|string/.test(r.type)) {
                var a = new n(), l = new RegExp(r.type.replace(/\..*/, "\\."));
                if (1 != i) {
                    do {
                        r = s.stepBackward();
                    } while (r && l.test(r.type));
                    s.stepForward();
                }
                if (a.start.row = s.getCurrentTokenRow(), a.start.column = s.getCurrentTokenColumn() + 2, 
                s = new o(this, e, t), -1 != i) {
                    do {
                        r = s.stepForward();
                    } while (r && l.test(r.type));
                    r = s.stepBackward();
                } else r = s.getCurrentToken();
                return a.end.row = s.getCurrentTokenRow(), a.end.column = s.getCurrentTokenColumn() + r.value.length - 2, 
                a;
            }
        }, this.foldAll = function(e, t, i) {
            void 0 == i && (i = 1e5);
            var n = this.foldWidgets;
            if (n) {
                t = t || this.getLength();
                for (var s = e = e || 0; s < t; s++) if (null == n[s] && (n[s] = this.getFoldWidget(s)), 
                "start" == n[s]) {
                    var r = this.getFoldWidgetRange(s);
                    if (r && r.isMultiLine() && r.end.row <= t && r.start.row >= e) {
                        s = r.end.row;
                        try {
                            var o = this.addFold("...", r);
                            o && (o.collapseChildren = i);
                        } catch (e) {}
                    }
                }
            }
        }, this.$foldStyles = {
            "manual": 1,
            "markbegin": 1,
            "markbeginend": 1
        }, this.$foldStyle = "markbegin", this.setFoldStyle = function(e) {
            if (!this.$foldStyles[e]) throw new Error("invalid fold style: " + e + "[" + Object.keys(this.$foldStyles).join(", ") + "]");
            if (this.$foldStyle != e) {
                this.$foldStyle = e, "manual" == e && this.unfold();
                var t = this.$foldMode;
                this.$setFolding(null), this.$setFolding(t);
            }
        }, this.$setFolding = function(e) {
            this.$foldMode != e && (this.$foldMode = e, this.off("change", this.$updateFoldWidgets), 
            this.off("tokenizerUpdate", this.$tokenizerUpdateFoldWidgets), this._emit("changeAnnotation"), 
            e && "manual" != this.$foldStyle ? (this.foldWidgets = [], this.getFoldWidget = e.getFoldWidget.bind(e, this, this.$foldStyle), 
            this.getFoldWidgetRange = e.getFoldWidgetRange.bind(e, this, this.$foldStyle), this.$updateFoldWidgets = this.updateFoldWidgets.bind(this), 
            this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this), this.on("change", this.$updateFoldWidgets), 
            this.on("tokenizerUpdate", this.$tokenizerUpdateFoldWidgets)) : this.foldWidgets = null);
        }, this.getParentFoldRangeData = function(e, t) {
            var i = this.foldWidgets;
            if (!i || t && i[e]) return {};
            for (var n, s = e - 1; s >= 0; ) {
                var r = i[s];
                if (null == r && (r = i[s] = this.getFoldWidget(s)), "start" == r) {
                    var o = this.getFoldWidgetRange(s);
                    if (n || (n = o), o && o.end.row >= e) break;
                }
                s--;
            }
            return {
                "range": -1 !== s && o,
                "firstRange": n
            };
        }, this.onFoldWidgetClick = function(e, t) {
            var i = {
                "children": (t = t.domEvent).shiftKey,
                "all": t.ctrlKey || t.metaKey,
                "siblings": t.altKey
            };
            if (!this.$toggleFoldWidget(e, i)) {
                var n = t.target || t.srcElement;
                n && /ace_fold-widget/.test(n.className) && (n.className += " ace_invalid");
            }
        }, this.$toggleFoldWidget = function(e, t) {
            if (this.getFoldWidget) {
                var i = this.getFoldWidget(e), n = this.getLine(e), s = "end" === i ? -1 : 1, r = this.getFoldAt(e, -1 === s ? 0 : n.length, s);
                if (r) t.children || t.all ? this.removeFold(r) : this.expandFold(r); else {
                    var o = this.getFoldWidgetRange(e, !0);
                    if (!o || o.isMultiLine() || !(r = this.getFoldAt(o.start.row, o.start.column, 1)) || !o.isEqual(r.range)) {
                        if (t.siblings) {
                            var a = this.getParentFoldRangeData(e);
                            if (a.range) var l = a.range.start.row + 1, h = a.range.end.row;
                            this.foldAll(l, h, t.all ? 1e4 : 0);
                        } else t.children ? (h = o ? o.end.row : this.getLength(), this.foldAll(e + 1, h, t.all ? 1e4 : 0)) : o && (t.all && (o.collapseChildren = 1e4), 
                        this.addFold("...", o));
                        return o;
                    }
                    this.removeFold(r);
                }
            }
        }, this.toggleFoldWidget = function(e) {
            var t = this.selection.getCursor().row;
            t = this.getRowFoldStart(t);
            var i = this.$toggleFoldWidget(t, {});
            if (!i) {
                var n = this.getParentFoldRangeData(t, !0);
                if (i = n.range || n.firstRange) {
                    t = i.start.row;
                    var s = this.getFoldAt(t, this.getLine(t).length, 1);
                    s ? this.removeFold(s) : this.addFold("...", i);
                }
            }
        }, this.updateFoldWidgets = function(e) {
            var t = e.data, i = t.range, n = i.start.row, s = i.end.row - n;
            if (0 === s) this.foldWidgets[n] = null; else if ("removeText" == t.action || "removeLines" == t.action) this.foldWidgets.splice(n, s + 1, null); else {
                var r = Array(s + 1);
                r.unshift(n, 1), this.foldWidgets.splice.apply(this.foldWidgets, r);
            }
        }, this.tokenizerUpdateFoldWidgets = function(e) {
            var t = e.data;
            t.first != t.last && this.foldWidgets.length > t.first && this.foldWidgets.splice(t.first, this.foldWidgets.length);
        };
    };
}), ace.define("ace/edit_session/bracket_match", [ "require", "exports", "module", "ace/token_iterator", "ace/range" ], function(e, t, i) {
    "use strict";
    var n = e("../token_iterator").TokenIterator, s = e("../range").Range;
    t.BracketMatch = function() {
        this.findMatchingBracket = function(e, t) {
            if (0 == e.column) return null;
            var i = t || this.getLine(e.row).charAt(e.column - 1);
            if ("" == i) return null;
            var n = i.match(/([\(\[\{])|([\)\]\}])/);
            return n ? n[1] ? this.$findClosingBracket(n[1], e) : this.$findOpeningBracket(n[2], e) : null;
        }, this.getBracketRange = function(e) {
            var t, i = this.getLine(e.row), n = !0, r = i.charAt(e.column - 1), o = r && r.match(/([\(\[\{])|([\)\]\}])/);
            if (o || (r = i.charAt(e.column), e = {
                "row": e.row,
                "column": e.column + 1
            }, o = r && r.match(/([\(\[\{])|([\)\]\}])/), n = !1), !o) return null;
            if (o[1]) {
                if (!(a = this.$findClosingBracket(o[1], e))) return null;
                t = s.fromPoints(e, a), n || (t.end.column++, t.start.column--), t.cursor = t.end;
            } else {
                var a = this.$findOpeningBracket(o[2], e);
                if (!a) return null;
                t = s.fromPoints(a, e), n || (t.start.column++, t.end.column--), t.cursor = t.start;
            }
            return t;
        }, this.$brackets = {
            ")": "(",
            "(": ")",
            "]": "[",
            "[": "]",
            "{": "}",
            "}": "{"
        }, this.$findOpeningBracket = function(e, t, i) {
            var s = this.$brackets[e], r = 1, o = new n(this, t.row, t.column), a = o.getCurrentToken();
            if (a || (a = o.stepForward()), a) {
                i || (i = new RegExp("(\\.?" + a.type.replace(".", "\\.").replace("rparen", ".paren").replace(/\b(?:end|start|begin)\b/, "") + ")+"));
                for (var l = t.column - o.getCurrentTokenColumn() - 2, h = a.value; ;) {
                    for (;l >= 0; ) {
                        var c = h.charAt(l);
                        if (c == s) {
                            if (0 == (r -= 1)) return {
                                "row": o.getCurrentTokenRow(),
                                "column": l + o.getCurrentTokenColumn()
                            };
                        } else c == e && (r += 1);
                        l -= 1;
                    }
                    do {
                        a = o.stepBackward();
                    } while (a && !i.test(a.type));
                    if (null == a) break;
                    l = (h = a.value).length - 1;
                }
                return null;
            }
        }, this.$findClosingBracket = function(e, t, i) {
            var s = this.$brackets[e], r = 1, o = new n(this, t.row, t.column), a = o.getCurrentToken();
            if (a || (a = o.stepForward()), a) {
                i || (i = new RegExp("(\\.?" + a.type.replace(".", "\\.").replace("lparen", ".paren").replace(/\b(?:end|start|begin)\b/, "") + ")+"));
                for (var l = t.column - o.getCurrentTokenColumn(); ;) {
                    for (var h = a.value, c = h.length; l < c; ) {
                        var u = h.charAt(l);
                        if (u == s) {
                            if (0 == (r -= 1)) return {
                                "row": o.getCurrentTokenRow(),
                                "column": l + o.getCurrentTokenColumn()
                            };
                        } else u == e && (r += 1);
                        l += 1;
                    }
                    do {
                        a = o.stepForward();
                    } while (a && !i.test(a.type));
                    if (null == a) break;
                    l = 0;
                }
                return null;
            }
        };
    };
}), ace.define("ace/edit_session", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/lang", "ace/config", "ace/lib/event_emitter", "ace/selection", "ace/mode/text", "ace/range", "ace/document", "ace/background_tokenizer", "ace/search_highlight", "ace/edit_session/folding", "ace/edit_session/bracket_match" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/oop"), s = e("./lib/lang"), r = e("./config"), o = e("./lib/event_emitter").EventEmitter, a = e("./selection").Selection, l = e("./mode/text").Mode, h = e("./range").Range, c = e("./document").Document, u = e("./background_tokenizer").BackgroundTokenizer, p = e("./search_highlight").SearchHighlight, d = function(e, t) {
        this.$breakpoints = [], this.$decorations = [], this.$frontMarkers = {}, this.$backMarkers = {}, 
        this.$markerId = 1, this.$undoSelect = !0, this.$foldData = [], this.$foldData.toString = function() {
            return this.join("\n");
        }, this.on("changeFold", this.onChangeFold.bind(this)), this.$onChange = this.onChange.bind(this), 
        "object" == typeof e && e.getLine || (e = new c(e)), this.setDocument(e), this.selection = new a(this), 
        r.resetOptions(this), this.setMode(t), r._signal("session", this);
    };
    (function() {
        function e(e) {
            return !(e < 4352) && (e >= 4352 && e <= 4447 || e >= 4515 && e <= 4519 || e >= 4602 && e <= 4607 || e >= 9001 && e <= 9002 || e >= 11904 && e <= 11929 || e >= 11931 && e <= 12019 || e >= 12032 && e <= 12245 || e >= 12272 && e <= 12283 || e >= 12288 && e <= 12350 || e >= 12353 && e <= 12438 || e >= 12441 && e <= 12543 || e >= 12549 && e <= 12589 || e >= 12593 && e <= 12686 || e >= 12688 && e <= 12730 || e >= 12736 && e <= 12771 || e >= 12784 && e <= 12830 || e >= 12832 && e <= 12871 || e >= 12880 && e <= 13054 || e >= 13056 && e <= 19903 || e >= 19968 && e <= 42124 || e >= 42128 && e <= 42182 || e >= 43360 && e <= 43388 || e >= 44032 && e <= 55203 || e >= 55216 && e <= 55238 || e >= 55243 && e <= 55291 || e >= 63744 && e <= 64255 || e >= 65040 && e <= 65049 || e >= 65072 && e <= 65106 || e >= 65108 && e <= 65126 || e >= 65128 && e <= 65131 || e >= 65281 && e <= 65376 || e >= 65504 && e <= 65510);
        }
        n.implement(this, o), this.setDocument = function(e) {
            this.doc && this.doc.removeListener("change", this.$onChange), this.doc = e, e.on("change", this.$onChange), 
            this.bgTokenizer && this.bgTokenizer.setDocument(this.getDocument()), this.resetCaches();
        }, this.getDocument = function() {
            return this.doc;
        }, this.$resetRowCache = function(e) {
            if (!e) return this.$docRowCache = [], void (this.$screenRowCache = []);
            var t = this.$docRowCache.length, i = this.$getRowCacheIndex(this.$docRowCache, e) + 1;
            t > i && (this.$docRowCache.splice(i, t), this.$screenRowCache.splice(i, t));
        }, this.$getRowCacheIndex = function(e, t) {
            for (var i = 0, n = e.length - 1; i <= n; ) {
                var s = i + n >> 1, r = e[s];
                if (t > r) i = s + 1; else {
                    if (!(t < r)) return s;
                    n = s - 1;
                }
            }
            return i - 1;
        }, this.resetCaches = function() {
            this.$modified = !0, this.$wrapData = [], this.$rowLengthCache = [], this.$resetRowCache(0), 
            this.bgTokenizer && this.bgTokenizer.start(0);
        }, this.onChangeFold = function(e) {
            var t = e.data;
            this.$resetRowCache(t.start.row);
        }, this.onChange = function(e) {
            var t = e.data;
            this.$modified = !0, this.$resetRowCache(t.range.start.row);
            var i = this.$updateInternalDataOnChange(e);
            this.$fromUndo || !this.$undoManager || t.ignore || (this.$deltasDoc.push(t), i && 0 != i.length && this.$deltasFold.push({
                "action": "removeFolds",
                "folds": i
            }), this.$informUndoManager.schedule()), this.bgTokenizer && this.bgTokenizer.$updateOnChange(t), 
            this._signal("change", e);
        }, this.setValue = function(e) {
            this.doc.setValue(e), this.selection.moveTo(0, 0), this.$resetRowCache(0), this.$deltas = [], 
            this.$deltasDoc = [], this.$deltasFold = [], this.setUndoManager(this.$undoManager), 
            this.getUndoManager().reset();
        }, this.getValue = this.toString = function() {
            return this.doc.getValue();
        }, this.getSelection = function() {
            return this.selection;
        }, this.getState = function(e) {
            return this.bgTokenizer.getState(e);
        }, this.getTokens = function(e) {
            return this.bgTokenizer.getTokens(e);
        }, this.getTokenAt = function(e, t) {
            var i, n = this.bgTokenizer.getTokens(e), s = 0;
            if (null == t) r = n.length - 1, s = this.getLine(e).length; else for (var r = 0; r < n.length && !((s += n[r].value.length) >= t); r++) ;
            return (i = n[r]) ? (i.index = r, i.start = s - i.value.length, i) : null;
        }, this.setUndoManager = function(e) {
            if (this.$undoManager = e, this.$deltas = [], this.$deltasDoc = [], this.$deltasFold = [], 
            this.$informUndoManager && this.$informUndoManager.cancel(), e) {
                var t = this;
                this.$syncInformUndoManager = function() {
                    t.$informUndoManager.cancel(), t.$deltasFold.length && (t.$deltas.push({
                        "group": "fold",
                        "deltas": t.$deltasFold
                    }), t.$deltasFold = []), t.$deltasDoc.length && (t.$deltas.push({
                        "group": "doc",
                        "deltas": t.$deltasDoc
                    }), t.$deltasDoc = []), t.$deltas.length > 0 && e.execute({
                        "action": "aceupdate",
                        "args": [ t.$deltas, t ],
                        "merge": t.mergeUndoDeltas
                    }), t.mergeUndoDeltas = !1, t.$deltas = [];
                }, this.$informUndoManager = s.delayedCall(this.$syncInformUndoManager);
            }
        }, this.markUndoGroup = function() {
            this.$syncInformUndoManager && this.$syncInformUndoManager();
        }, this.$defaultUndoManager = {
            "undo": function() {},
            "redo": function() {},
            "reset": function() {}
        }, this.getUndoManager = function() {
            return this.$undoManager || this.$defaultUndoManager;
        }, this.getTabString = function() {
            return this.getUseSoftTabs() ? s.stringRepeat(" ", this.getTabSize()) : "\t";
        }, this.setUseSoftTabs = function(e) {
            this.setOption("useSoftTabs", e);
        }, this.getUseSoftTabs = function() {
            return this.$useSoftTabs && !this.$mode.$indentWithTabs;
        }, this.setTabSize = function(e) {
            this.setOption("tabSize", e);
        }, this.getTabSize = function() {
            return this.$tabSize;
        }, this.isTabStop = function(e) {
            return this.$useSoftTabs && e.column % this.$tabSize == 0;
        }, this.$overwrite = !1, this.setOverwrite = function(e) {
            this.setOption("overwrite", e);
        }, this.getOverwrite = function() {
            return this.$overwrite;
        }, this.toggleOverwrite = function() {
            this.setOverwrite(!this.$overwrite);
        }, this.addGutterDecoration = function(e, t) {
            this.$decorations[e] || (this.$decorations[e] = ""), this.$decorations[e] += " " + t, 
            this._signal("changeBreakpoint", {});
        }, this.removeGutterDecoration = function(e, t) {
            this.$decorations[e] = (this.$decorations[e] || "").replace(" " + t, ""), this._signal("changeBreakpoint", {});
        }, this.getBreakpoints = function() {
            return this.$breakpoints;
        }, this.setBreakpoints = function(e) {
            this.$breakpoints = [];
            for (var t = 0; t < e.length; t++) this.$breakpoints[e[t]] = "ace_breakpoint";
            this._signal("changeBreakpoint", {});
        }, this.clearBreakpoints = function() {
            this.$breakpoints = [], this._signal("changeBreakpoint", {});
        }, this.setBreakpoint = function(e, t) {
            void 0 === t && (t = "ace_breakpoint"), t ? this.$breakpoints[e] = t : delete this.$breakpoints[e], 
            this._signal("changeBreakpoint", {});
        }, this.clearBreakpoint = function(e) {
            delete this.$breakpoints[e], this._signal("changeBreakpoint", {});
        }, this.addMarker = function(e, t, i, n) {
            var s = this.$markerId++, r = {
                "range": e,
                "type": i || "line",
                "renderer": "function" == typeof i ? i : null,
                "clazz": t,
                "inFront": !!n,
                "id": s
            };
            return n ? (this.$frontMarkers[s] = r, this._signal("changeFrontMarker")) : (this.$backMarkers[s] = r, 
            this._signal("changeBackMarker")), s;
        }, this.addDynamicMarker = function(e, t) {
            if (e.update) {
                var i = this.$markerId++;
                return e.id = i, e.inFront = !!t, t ? (this.$frontMarkers[i] = e, this._signal("changeFrontMarker")) : (this.$backMarkers[i] = e, 
                this._signal("changeBackMarker")), e;
            }
        }, this.removeMarker = function(e) {
            var t = this.$frontMarkers[e] || this.$backMarkers[e];
            if (t) {
                var i = t.inFront ? this.$frontMarkers : this.$backMarkers;
                t && (delete i[e], this._signal(t.inFront ? "changeFrontMarker" : "changeBackMarker"));
            }
        }, this.getMarkers = function(e) {
            return e ? this.$frontMarkers : this.$backMarkers;
        }, this.highlight = function(e) {
            if (!this.$searchHighlight) {
                var t = new p(null, "ace_selected-word", "text");
                this.$searchHighlight = this.addDynamicMarker(t);
            }
            this.$searchHighlight.setRegexp(e);
        }, this.highlightLines = function(e, t, i, n) {
            "number" != typeof t && (i = t, t = e), i || (i = "ace_step");
            var s = new h(e, 0, t, 1 / 0);
            return s.id = this.addMarker(s, i, "fullLine", n), s;
        }, this.setAnnotations = function(e) {
            this.$annotations = e, this._signal("changeAnnotation", {});
        }, this.getAnnotations = function() {
            return this.$annotations || [];
        }, this.clearAnnotations = function() {
            this.setAnnotations([]);
        }, this.$detectNewLine = function(e) {
            var t = e.match(/^.*?(\r?\n)/m);
            this.$autoNewLine = t ? t[1] : "\n";
        }, this.getWordRange = function(e, t) {
            var i = this.getLine(e), n = !1;
            if (t > 0 && (n = !!i.charAt(t - 1).match(this.tokenRe)), n || (n = !!i.charAt(t).match(this.tokenRe)), 
            n) s = this.tokenRe; else if (/^\s+$/.test(i.slice(t - 1, t + 1))) s = /\s/; else var s = this.nonTokenRe;
            var r = t;
            if (r > 0) {
                do {
                    r--;
                } while (r >= 0 && i.charAt(r).match(s));
                r++;
            }
            for (var o = t; o < i.length && i.charAt(o).match(s); ) o++;
            return new h(e, r, e, o);
        }, this.getAWordRange = function(e, t) {
            for (var i = this.getWordRange(e, t), n = this.getLine(i.end.row); n.charAt(i.end.column).match(/[ \t]/); ) i.end.column += 1;
            return i;
        }, this.setNewLineMode = function(e) {
            this.doc.setNewLineMode(e);
        }, this.getNewLineMode = function() {
            return this.doc.getNewLineMode();
        }, this.setUseWorker = function(e) {
            this.setOption("useWorker", e);
        }, this.getUseWorker = function() {
            return this.$useWorker;
        }, this.onReloadTokenizer = function(e) {
            var t = e.data;
            this.bgTokenizer.start(t.first), this._signal("tokenizerUpdate", e);
        }, this.$modes = {}, this.$mode = null, this.$modeId = null, this.setMode = function(e, t) {
            if (e && "object" == typeof e) {
                if (e.getTokenizer) return this.$onChangeMode(e);
                var i = e, n = i.path;
            } else n = e || "ace/mode/text";
            if (this.$modes["ace/mode/text"] || (this.$modes["ace/mode/text"] = new l()), this.$modes[n] && !i) return this.$onChangeMode(this.$modes[n]), 
            void (t && t());
            this.$modeId = n, r.loadModule([ "mode", n ], function(e) {
                if (this.$modeId !== n) return t && t();
                this.$modes[n] && !i ? this.$onChangeMode(this.$modes[n]) : e && e.Mode && (e = new e.Mode(i), 
                i || (this.$modes[n] = e, e.$id = n), this.$onChangeMode(e)), t && t();
            }.bind(this)), this.$mode || this.$onChangeMode(this.$modes["ace/mode/text"], !0);
        }, this.$onChangeMode = function(e, t) {
            if (t || (this.$modeId = e.$id), this.$mode !== e) {
                this.$mode = e, this.$stopWorker(), this.$useWorker && this.$startWorker();
                var i = e.getTokenizer();
                if (void 0 !== i.addEventListener) {
                    var n = this.onReloadTokenizer.bind(this);
                    i.addEventListener("update", n);
                }
                if (this.bgTokenizer) this.bgTokenizer.setTokenizer(i); else {
                    this.bgTokenizer = new u(i);
                    var s = this;
                    this.bgTokenizer.addEventListener("update", function(e) {
                        s._signal("tokenizerUpdate", e);
                    });
                }
                this.bgTokenizer.setDocument(this.getDocument()), this.tokenRe = e.tokenRe, this.nonTokenRe = e.nonTokenRe, 
                t || (e.attachToSession && e.attachToSession(this), this.$options.wrapMethod.set.call(this, this.$wrapMethod), 
                this.$setFolding(e.foldingRules), this.bgTokenizer.start(0), this._emit("changeMode"));
            }
        }, this.$stopWorker = function() {
            this.$worker && (this.$worker.terminate(), this.$worker = null);
        }, this.$startWorker = function() {
            try {
                this.$worker = this.$mode.createWorker(this);
            } catch (e) {
                r.warn("Could not load worker", e), this.$worker = null;
            }
        }, this.getMode = function() {
            return this.$mode;
        }, this.$scrollTop = 0, this.setScrollTop = function(e) {
            this.$scrollTop === e || isNaN(e) || (this.$scrollTop = e, this._signal("changeScrollTop", e));
        }, this.getScrollTop = function() {
            return this.$scrollTop;
        }, this.$scrollLeft = 0, this.setScrollLeft = function(e) {
            this.$scrollLeft === e || isNaN(e) || (this.$scrollLeft = e, this._signal("changeScrollLeft", e));
        }, this.getScrollLeft = function() {
            return this.$scrollLeft;
        }, this.getScreenWidth = function() {
            return this.$computeWidth(), this.lineWidgets ? Math.max(this.getLineWidgetMaxWidth(), this.screenWidth) : this.screenWidth;
        }, this.getLineWidgetMaxWidth = function() {
            if (null != this.lineWidgetsWidth) return this.lineWidgetsWidth;
            var e = 0;
            return this.lineWidgets.forEach(function(t) {
                t && t.screenWidth > e && (e = t.screenWidth);
            }), this.lineWidgetWidth = e;
        }, this.$computeWidth = function(e) {
            if (this.$modified || e) {
                if (this.$modified = !1, this.$useWrapMode) return this.screenWidth = this.$wrapLimit;
                for (var t = this.doc.getAllLines(), i = this.$rowLengthCache, n = 0, s = 0, r = this.$foldData[s], o = r ? r.start.row : 1 / 0, a = t.length, l = 0; l < a; l++) {
                    if (l > o) {
                        if ((l = r.end.row + 1) >= a) break;
                        o = (r = this.$foldData[s++]) ? r.start.row : 1 / 0;
                    }
                    null == i[l] && (i[l] = this.$getStringScreenWidth(t[l])[0]), i[l] > n && (n = i[l]);
                }
                this.screenWidth = n;
            }
        }, this.getLine = function(e) {
            return this.doc.getLine(e);
        }, this.getLines = function(e, t) {
            return this.doc.getLines(e, t);
        }, this.getLength = function() {
            return this.doc.getLength();
        }, this.getTextRange = function(e) {
            return this.doc.getTextRange(e || this.selection.getRange());
        }, this.insert = function(e, t) {
            return this.doc.insert(e, t);
        }, this.remove = function(e) {
            return this.doc.remove(e);
        }, this.undoChanges = function(e, t) {
            if (e.length) {
                this.$fromUndo = !0;
                for (var i = null, n = e.length - 1; -1 != n; n--) {
                    var s = e[n];
                    "doc" == s.group ? (this.doc.revertDeltas(s.deltas), i = this.$getUndoSelection(s.deltas, !0, i)) : s.deltas.forEach(function(e) {
                        this.addFolds(e.folds);
                    }, this);
                }
                return this.$fromUndo = !1, i && this.$undoSelect && !t && this.selection.setSelectionRange(i), 
                i;
            }
        }, this.redoChanges = function(e, t) {
            if (e.length) {
                this.$fromUndo = !0;
                for (var i = null, n = 0; n < e.length; n++) {
                    var s = e[n];
                    "doc" == s.group && (this.doc.applyDeltas(s.deltas), i = this.$getUndoSelection(s.deltas, !1, i));
                }
                return this.$fromUndo = !1, i && this.$undoSelect && !t && this.selection.setSelectionRange(i), 
                i;
            }
        }, this.setUndoSelect = function(e) {
            this.$undoSelect = e;
        }, this.$getUndoSelection = function(e, t, i) {
            function n(e) {
                var i = "insertText" === e.action || "insertLines" === e.action;
                return t ? !i : i;
            }
            var s, r, o = e[0];
            n(o) ? s = h.fromPoints(o.range.start, o.range.end) : s = h.fromPoints(o.range.start, o.range.start);
            for (var a = 1; a < e.length; a++) n(o = e[a]) ? (r = o.range.start, -1 == s.compare(r.row, r.column) && s.setStart(o.range.start), 
            r = o.range.end, 1 == s.compare(r.row, r.column) && s.setEnd(o.range.end), !0) : (r = o.range.start, 
            -1 == s.compare(r.row, r.column) && (s = h.fromPoints(o.range.start, o.range.start)), 
            !1);
            if (null != i) {
                0 === h.comparePoints(i.start, s.start) && (i.start.column += s.end.column - s.start.column, 
                i.end.column += s.end.column - s.start.column);
                var l = i.compareRange(s);
                1 == l ? s.setStart(i.start) : -1 == l && s.setEnd(i.end);
            }
            return s;
        }, this.replace = function(e, t) {
            return this.doc.replace(e, t);
        }, this.moveText = function(e, t, i) {
            var n = this.getTextRange(e), s = this.getFoldsInRange(e), r = h.fromPoints(t, t);
            if (!i) {
                this.remove(e);
                l = e.start.row - e.end.row;
                (c = l ? -e.end.column : e.start.column - e.end.column) && (r.start.row == e.end.row && r.start.column > e.end.column && (r.start.column += c), 
                r.end.row == e.end.row && r.end.column > e.end.column && (r.end.column += c)), l && r.start.row >= e.end.row && (r.start.row += l, 
                r.end.row += l);
            }
            if (r.end = this.insert(r.start, n), s.length) {
                var o = e.start, a = r.start, l = a.row - o.row, c = a.column - o.column;
                this.addFolds(s.map(function(e) {
                    return (e = e.clone()).start.row == o.row && (e.start.column += c), e.end.row == o.row && (e.end.column += c), 
                    e.start.row += l, e.end.row += l, e;
                }));
            }
            return r;
        }, this.indentRows = function(e, t, i) {
            i = i.replace(/\t/g, this.getTabString());
            for (var n = e; n <= t; n++) this.insert({
                "row": n,
                "column": 0
            }, i);
        }, this.outdentRows = function(e) {
            for (var t = e.collapseRows(), i = new h(0, 0, 0, 0), n = this.getTabSize(), s = t.start.row; s <= t.end.row; ++s) {
                var r = this.getLine(s);
                i.start.row = s, i.end.row = s;
                for (var o = 0; o < n && " " == r.charAt(o); ++o) ;
                o < n && "\t" == r.charAt(o) ? (i.start.column = o, i.end.column = o + 1) : (i.start.column = 0, 
                i.end.column = o), this.remove(i);
            }
        }, this.$moveLines = function(e, t, i) {
            if (e = this.getRowFoldStart(e), t = this.getRowFoldEnd(t), i < 0) {
                if ((n = this.getRowFoldStart(e + i)) < 0) return 0;
                s = n - e;
            } else if (i > 0) {
                var n = this.getRowFoldEnd(t + i);
                if (n > this.doc.getLength() - 1) return 0;
                s = n - t;
            } else {
                e = this.$clipRowToDocument(e);
                var s = (t = this.$clipRowToDocument(t)) - e + 1;
            }
            var r = new h(e, 0, t, Number.MAX_VALUE), o = this.getFoldsInRange(r).map(function(e) {
                return e = e.clone(), e.start.row += s, e.end.row += s, e;
            }), a = 0 == i ? this.doc.getLines(e, t) : this.doc.removeLines(e, t);
            return this.doc.insertLines(e + s, a), o.length && this.addFolds(o), s;
        }, this.moveLinesUp = function(e, t) {
            return this.$moveLines(e, t, -1);
        }, this.moveLinesDown = function(e, t) {
            return this.$moveLines(e, t, 1);
        }, this.duplicateLines = function(e, t) {
            return this.$moveLines(e, t, 0);
        }, this.$clipRowToDocument = function(e) {
            return Math.max(0, Math.min(e, this.doc.getLength() - 1));
        }, this.$clipColumnToRow = function(e, t) {
            return t < 0 ? 0 : Math.min(this.doc.getLine(e).length, t);
        }, this.$clipPositionToDocument = function(e, t) {
            if (t = Math.max(0, t), e < 0) e = 0, t = 0; else {
                var i = this.doc.getLength();
                e >= i ? (e = i - 1, t = this.doc.getLine(i - 1).length) : t = Math.min(this.doc.getLine(e).length, t);
            }
            return {
                "row": e,
                "column": t
            };
        }, this.$clipRangeToDocument = function(e) {
            e.start.row < 0 ? (e.start.row = 0, e.start.column = 0) : e.start.column = this.$clipColumnToRow(e.start.row, e.start.column);
            var t = this.doc.getLength() - 1;
            return e.end.row > t ? (e.end.row = t, e.end.column = this.doc.getLine(t).length) : e.end.column = this.$clipColumnToRow(e.end.row, e.end.column), 
            e;
        }, this.$wrapLimit = 80, this.$useWrapMode = !1, this.$wrapLimitRange = {
            "min": null,
            "max": null
        }, this.setUseWrapMode = function(e) {
            if (e != this.$useWrapMode) {
                if (this.$useWrapMode = e, this.$modified = !0, this.$resetRowCache(0), e) {
                    var t = this.getLength();
                    this.$wrapData = Array(t), this.$updateWrapData(0, t - 1);
                }
                this._signal("changeWrapMode");
            }
        }, this.getUseWrapMode = function() {
            return this.$useWrapMode;
        }, this.setWrapLimitRange = function(e, t) {
            this.$wrapLimitRange.min === e && this.$wrapLimitRange.max === t || (this.$wrapLimitRange = {
                "min": e,
                "max": t
            }, this.$modified = !0, this.$useWrapMode && this._signal("changeWrapMode"));
        }, this.adjustWrapLimit = function(e, t) {
            var i = this.$wrapLimitRange;
            i.max < 0 && (i = {
                "min": t,
                "max": t
            });
            var n = this.$constrainWrapLimit(e, i.min, i.max);
            return n != this.$wrapLimit && n > 1 && (this.$wrapLimit = n, this.$modified = !0, 
            this.$useWrapMode && (this.$updateWrapData(0, this.getLength() - 1), this.$resetRowCache(0), 
            this._signal("changeWrapLimit")), !0);
        }, this.$constrainWrapLimit = function(e, t, i) {
            return t && (e = Math.max(t, e)), i && (e = Math.min(i, e)), e;
        }, this.getWrapLimit = function() {
            return this.$wrapLimit;
        }, this.setWrapLimit = function(e) {
            this.setWrapLimitRange(e, e);
        }, this.getWrapLimitRange = function() {
            return {
                "min": this.$wrapLimitRange.min,
                "max": this.$wrapLimitRange.max
            };
        }, this.$updateInternalDataOnChange = function(e) {
            var t, i = this.$useWrapMode, n = e.data.action, s = e.data.range.start.row, r = e.data.range.end.row, o = e.data.range.start, a = e.data.range.end, l = null;
            if (-1 != n.indexOf("Lines") ? (r = "insertLines" == n ? s + e.data.lines.length : s, 
            t = e.data.lines ? e.data.lines.length : r - s) : t = r - s, this.$updating = !0, 
            0 != t) if (-1 != n.indexOf("remove")) {
                this[i ? "$wrapData" : "$rowLengthCache"].splice(s, t);
                p = this.$foldData;
                l = this.getFoldsInRange(e.data.range), this.removeFolds(l);
                d = 0;
                if (m = this.getFoldLine(a.row)) {
                    m.addRemoveChars(a.row, a.column, o.column - a.column), m.shiftRow(-t);
                    var h = this.getFoldLine(s);
                    h && h !== m && (h.merge(m), m = h), d = p.indexOf(m) + 1;
                }
                for (d; d < p.length; d++) (m = p[d]).start.row >= a.row && m.shiftRow(-t);
                r = s;
            } else {
                var c = Array(t);
                c.unshift(s, 0);
                var u = i ? this.$wrapData : this.$rowLengthCache;
                u.splice.apply(u, c);
                var p = this.$foldData, d = 0;
                if (m = this.getFoldLine(s)) {
                    var f = m.range.compareInside(o.row, o.column);
                    0 == f ? (m = m.split(o.row, o.column)) && (m.shiftRow(t), m.addRemoveChars(r, 0, a.column - o.column)) : -1 == f && (m.addRemoveChars(s, 0, a.column - o.column), 
                    m.shiftRow(t)), d = p.indexOf(m) + 1;
                }
                for (d; d < p.length; d++) (m = p[d]).start.row >= s && m.shiftRow(t);
            } else {
                t = Math.abs(e.data.range.start.column - e.data.range.end.column), -1 != n.indexOf("remove") && (l = this.getFoldsInRange(e.data.range), 
                this.removeFolds(l), t = -t);
                var m = this.getFoldLine(s);
                m && m.addRemoveChars(s, o.column, t);
            }
            return i && this.$wrapData.length != this.doc.getLength() && console.error("doc.getLength() and $wrapData.length have to be the same!"), 
            this.$updating = !1, i ? this.$updateWrapData(s, r) : this.$updateRowLengthCache(s, r), 
            l;
        }, this.$updateRowLengthCache = function(e, t, i) {
            this.$rowLengthCache[e] = null, this.$rowLengthCache[t] = null;
        }, this.$updateWrapData = function(e, n) {
            var s, r, o = this.doc.getAllLines(), a = this.getTabSize(), l = this.$wrapData, h = this.$wrapLimit, c = e;
            for (n = Math.min(n, o.length - 1); c <= n; ) (r = this.getFoldLine(c, r)) ? (s = [], 
            r.walk(function(e, n, r, a) {
                var l;
                if (null != e) {
                    (l = this.$getDisplayTokens(e, s.length))[0] = t;
                    for (var h = 1; h < l.length; h++) l[h] = i;
                } else l = this.$getDisplayTokens(o[n].substring(a, r), s.length);
                s = s.concat(l);
            }.bind(this), r.end.row, o[r.end.row].length + 1), l[r.start.row] = this.$computeWrapSplits(s, h, a), 
            c = r.end.row + 1) : (s = this.$getDisplayTokens(o[c]), l[c] = this.$computeWrapSplits(s, h, a), 
            c++);
        };
        var t = 3, i = 4;
        this.$computeWrapSplits = function(e, n) {
            function s(t) {
                var i = e.slice(a, t), n = i.length;
                i.join("").replace(/12/g, function() {
                    n -= 1;
                }).replace(/2/g, function() {
                    n -= 1;
                }), l += n, r.push(l), a = t;
            }
            if (0 == e.length) return [];
            for (var r = [], o = e.length, a = 0, l = 0, h = this.$wrapAsCode; o - a > n; ) {
                var c = a + n;
                if (e[c - 1] >= 10 && e[c] >= 10) s(c); else if (e[c] != t && e[c] != i) {
                    for (var u = Math.max(c - (h ? 10 : n - (n >> 2)), a - 1); c > u && e[c] < t; ) c--;
                    if (h) {
                        for (;c > u && e[c] < t; ) c--;
                        for (;c > u && 9 == e[c]; ) c--;
                    } else for (;c > u && e[c] < 10; ) c--;
                    c > u ? s(++c) : (2 == e[c = a + n] && c--, s(c));
                } else {
                    for (c; c != a - 1 && e[c] != t; c--) ;
                    if (c > a) {
                        s(c);
                        continue;
                    }
                    for (c = a + n; c < e.length && e[c] == i; c++) ;
                    if (c == e.length) break;
                    s(c);
                }
            }
            return r;
        }, this.$getDisplayTokens = function(t, i) {
            var n, s = [];
            i = i || 0;
            for (var r = 0; r < t.length; r++) {
                var o = t.charCodeAt(r);
                if (9 == o) {
                    n = this.getScreenTabSize(s.length + i), s.push(11);
                    for (var a = 1; a < n; a++) s.push(12);
                } else 32 == o ? s.push(10) : o > 39 && o < 48 || o > 57 && o < 64 ? s.push(9) : o >= 4352 && e(o) ? s.push(1, 2) : s.push(1);
            }
            return s;
        }, this.$getStringScreenWidth = function(t, i, n) {
            if (0 == i) return [ 0, 0 ];
            null == i && (i = 1 / 0), n = n || 0;
            var s, r;
            for (r = 0; r < t.length && (9 == (s = t.charCodeAt(r)) ? n += this.getScreenTabSize(n) : s >= 4352 && e(s) ? n += 2 : n += 1, 
            !(n > i)); r++) ;
            return [ n, r ];
        }, this.lineWidgets = null, this.getRowLength = function(e) {
            if (this.lineWidgets) var t = this.lineWidgets[e] && this.lineWidgets[e].rowCount || 0; else t = 0;
            return this.$useWrapMode && this.$wrapData[e] ? this.$wrapData[e].length + 1 + t : 1 + t;
        }, this.getRowLineCount = function(e) {
            return this.$useWrapMode && this.$wrapData[e] ? this.$wrapData[e].length + 1 : 1;
        }, this.getScreenLastRowColumn = function(e) {
            var t = this.screenToDocumentPosition(e, Number.MAX_VALUE);
            return this.documentToScreenColumn(t.row, t.column);
        }, this.getDocumentLastRowColumn = function(e, t) {
            var i = this.documentToScreenRow(e, t);
            return this.getScreenLastRowColumn(i);
        }, this.getDocumentLastRowColumnPosition = function(e, t) {
            var i = this.documentToScreenRow(e, t);
            return this.screenToDocumentPosition(i, Number.MAX_VALUE / 10);
        }, this.getRowSplitData = function(e) {
            return this.$useWrapMode ? this.$wrapData[e] : void 0;
        }, this.getScreenTabSize = function(e) {
            return this.$tabSize - e % this.$tabSize;
        }, this.screenToDocumentRow = function(e, t) {
            return this.screenToDocumentPosition(e, t).row;
        }, this.screenToDocumentColumn = function(e, t) {
            return this.screenToDocumentPosition(e, t).column;
        }, this.screenToDocumentPosition = function(e, t) {
            if (e < 0) return {
                "row": 0,
                "column": 0
            };
            var i, n, s = 0, r = 0, o = 0, a = 0, l = this.$screenRowCache, h = this.$getRowCacheIndex(l, e), c = l.length;
            if (c && h >= 0) var o = l[h], s = this.$docRowCache[h], u = e > l[c - 1]; else u = !c;
            for (var p = this.getLength() - 1, d = this.getNextFoldLine(s), f = d ? d.start.row : 1 / 0; o <= e && (a = this.getRowLength(s), 
            !(o + a > e || s >= p)); ) o += a, ++s > f && (s = d.end.row + 1, f = (d = this.getNextFoldLine(s, d)) ? d.start.row : 1 / 0), 
            u && (this.$docRowCache.push(s), this.$screenRowCache.push(o));
            if (d && d.start.row <= s) i = this.getFoldDisplayLine(d), s = d.start.row; else {
                if (o + a <= e || s > p) return {
                    "row": p,
                    "column": this.getLine(p).length
                };
                i = this.getLine(s), d = null;
            }
            if (this.$useWrapMode) {
                var m = this.$wrapData[s];
                if (m) {
                    var g = Math.floor(e - o);
                    n = m[g], g > 0 && m.length && (r = m[g - 1] || m[m.length - 1], i = i.substring(r));
                }
            }
            return r += this.$getStringScreenWidth(i, t)[1], this.$useWrapMode && r >= n && (r = n - 1), 
            d ? d.idxToPosition(r) : {
                "row": s,
                "column": r
            };
        }, this.documentToScreenPosition = function(e, t) {
            if (void 0 === t) var i = this.$clipPositionToDocument(e.row, e.column); else i = this.$clipPositionToDocument(e, t);
            e = i.row, t = i.column;
            var n = 0, s = null, r = null;
            (r = this.getFoldAt(e, t, 1)) && (e = r.start.row, t = r.start.column);
            var o, a = 0, l = this.$docRowCache, h = this.$getRowCacheIndex(l, e), c = l.length;
            if (c && h >= 0) var a = l[h], n = this.$screenRowCache[h], u = e > l[c - 1]; else u = !c;
            for (var p = this.getNextFoldLine(a), d = p ? p.start.row : 1 / 0; a < e; ) {
                if (a >= d) {
                    if ((o = p.end.row + 1) > e) break;
                    d = (p = this.getNextFoldLine(o, p)) ? p.start.row : 1 / 0;
                } else o = a + 1;
                n += this.getRowLength(a), a = o, u && (this.$docRowCache.push(a), this.$screenRowCache.push(n));
            }
            var f = "";
            if (p && a >= d ? (f = this.getFoldDisplayLine(p, e, t), s = p.start.row) : (f = this.getLine(e).substring(0, t), 
            s = e), this.$useWrapMode) {
                var m = this.$wrapData[s];
                if (m) {
                    for (var g = 0; f.length >= m[g]; ) n++, g++;
                    f = f.substring(m[g - 1] || 0, f.length);
                }
            }
            return {
                "row": n,
                "column": this.$getStringScreenWidth(f)[0]
            };
        }, this.documentToScreenColumn = function(e, t) {
            return this.documentToScreenPosition(e, t).column;
        }, this.documentToScreenRow = function(e, t) {
            return this.documentToScreenPosition(e, t).row;
        }, this.getScreenLength = function() {
            var e = 0, t = null;
            if (this.$useWrapMode) for (var i = this.$wrapData.length, n = 0, s = 0, r = (t = this.$foldData[s++]) ? t.start.row : 1 / 0; n < i; ) {
                var o = this.$wrapData[n];
                e += o ? o.length + 1 : 1, ++n > r && (n = t.end.row + 1, r = (t = this.$foldData[s++]) ? t.start.row : 1 / 0);
            } else {
                e = this.getLength();
                for (var a = this.$foldData, s = 0; s < a.length; s++) e -= (t = a[s]).end.row - t.start.row;
            }
            return this.lineWidgets && (e += this.$getWidgetScreenLength()), e;
        }, this.$setFontMetrics = function(e) {}, this.destroy = function() {
            this.bgTokenizer && (this.bgTokenizer.setDocument(null), this.bgTokenizer = null), 
            this.$stopWorker();
        };
    }).call(d.prototype), e("./edit_session/folding").Folding.call(d.prototype), e("./edit_session/bracket_match").BracketMatch.call(d.prototype), 
    r.defineOptions(d.prototype, "session", {
        "wrap": {
            "set": function(e) {
                if (e && "off" != e ? "free" == e ? e = !0 : "printMargin" == e ? e = -1 : "string" == typeof e && (e = parseInt(e, 10) || !1) : e = !1, 
                this.$wrap != e) if (this.$wrap = e, e) {
                    var t = "number" == typeof e ? e : null;
                    this.setWrapLimitRange(t, t), this.setUseWrapMode(!0);
                } else this.setUseWrapMode(!1);
            },
            "get": function() {
                return this.getUseWrapMode() ? -1 == this.$wrap ? "printMargin" : this.getWrapLimitRange().min ? this.$wrap : "free" : "off";
            },
            "handlesSet": !0
        },
        "wrapMethod": {
            "set": function(e) {
                (e = "auto" == e ? "text" != this.$mode.type : "text" != e) != this.$wrapAsCode && (this.$wrapAsCode = e, 
                this.$useWrapMode && (this.$modified = !0, this.$resetRowCache(0), this.$updateWrapData(0, this.getLength() - 1)));
            },
            "initialValue": "auto"
        },
        "firstLineNumber": {
            "set": function() {
                this._signal("changeBreakpoint");
            },
            "initialValue": 1
        },
        "useWorker": {
            "set": function(e) {
                this.$useWorker = e, this.$stopWorker(), e && this.$startWorker();
            },
            "initialValue": !0
        },
        "useSoftTabs": {
            "initialValue": !0
        },
        "tabSize": {
            "set": function(e) {
                isNaN(e) || this.$tabSize === e || (this.$modified = !0, this.$rowLengthCache = [], 
                this.$tabSize = e, this._signal("changeTabSize"));
            },
            "initialValue": 4,
            "handlesSet": !0
        },
        "overwrite": {
            "set": function(e) {
                this._signal("changeOverwrite");
            },
            "initialValue": !1
        },
        "newLineMode": {
            "set": function(e) {
                this.doc.setNewLineMode(e);
            },
            "get": function() {
                return this.doc.getNewLineMode();
            },
            "handlesSet": !0
        },
        "mode": {
            "set": function(e) {
                this.setMode(e);
            },
            "get": function() {
                return this.$modeId;
            }
        }
    }), t.EditSession = d;
}), ace.define("ace/search", [ "require", "exports", "module", "ace/lib/lang", "ace/lib/oop", "ace/range" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/lang"), s = e("./lib/oop"), r = e("./range").Range, o = function() {
        this.$options = {};
    };
    (function() {
        this.set = function(e) {
            return s.mixin(this.$options, e), this;
        }, this.getOptions = function() {
            return n.copyObject(this.$options);
        }, this.setOptions = function(e) {
            this.$options = e;
        }, this.find = function(e) {
            var t = this.$options, i = this.$matchIterator(e, t);
            if (!i) return !1;
            var n = null;
            return i.forEach(function(e, i, s) {
                if (e.start) n = e; else {
                    var o = e.offset + (s || 0);
                    if (n = new r(i, o, i, o + e.length), !e.length && t.start && t.start.start && 0 != t.skipCurrent && n.isEqual(t.start)) return n = null, 
                    !1;
                }
                return !0;
            }), n;
        }, this.findAll = function(e) {
            var t = this.$options;
            if (!t.needle) return [];
            this.$assembleRegExp(t);
            var i = t.range, s = i ? e.getLines(i.start.row, i.end.row) : e.doc.getAllLines(), o = [], a = t.re;
            if (t.$isMultiLine) {
                var l, h = a.length, c = s.length - h;
                e: for (var u = a.offset || 0; u <= c; u++) {
                    for (y = 0; y < h; y++) if (-1 == s[u + y].search(a[y])) continue e;
                    var p = s[u], d = s[u + h - 1], f = p.length - p.match(a[0])[0].length, m = d.match(a[h - 1])[0].length;
                    l && l.end.row === u && l.end.column > f || (o.push(l = new r(u, f, u + h - 1, m)), 
                    h > 2 && (u = u + h - 2));
                }
            } else for (b = 0; b < s.length; b++) for (var g = n.getMatchOffsets(s[b], a), y = 0; y < g.length; y++) {
                var v = g[y];
                o.push(new r(b, v.offset, b, v.offset + v.length));
            }
            if (i) {
                for (var L = i.start.column, w = i.start.column, b = 0, y = o.length - 1; b < y && o[b].start.column < L && o[b].start.row == i.start.row; ) b++;
                for (;b < y && o[y].end.column > w && o[y].end.row == i.end.row; ) y--;
                for (o = o.slice(b, y + 1), b = 0, y = o.length; b < y; b++) o[b].start.row += i.start.row, 
                o[b].end.row += i.start.row;
            }
            return o;
        }, this.replace = function(e, t) {
            var i = this.$options, n = this.$assembleRegExp(i);
            if (i.$isMultiLine) return t;
            if (n) {
                var s = n.exec(e);
                if (!s || s[0].length != e.length) return null;
                if (t = e.replace(n, t), i.preserveCase) {
                    t = t.split("");
                    for (var r = Math.min(e.length, e.length); r--; ) {
                        var o = e[r];
                        o && o.toLowerCase() != o ? t[r] = t[r].toUpperCase() : t[r] = t[r].toLowerCase();
                    }
                    t = t.join("");
                }
                return t;
            }
        }, this.$matchIterator = function(e, t) {
            var i = this.$assembleRegExp(t);
            if (!i) return !1;
            var s;
            if (t.$isMultiLine) var o = i.length, a = function(t, n, a) {
                var l = t.search(i[0]);
                if (-1 != l) {
                    for (var h = 1; h < o; h++) if (-1 == (t = e.getLine(n + h)).search(i[h])) return;
                    var c = t.match(i[o - 1])[0].length, u = new r(n, l, n + o - 1, c);
                    return 1 == i.offset ? (u.start.row--, u.start.column = Number.MAX_VALUE) : a && (u.start.column += a), 
                    !!s(u) || void 0;
                }
            }; else if (t.backwards) a = function(e, t, r) {
                for (var o = n.getMatchOffsets(e, i), a = o.length - 1; a >= 0; a--) if (s(o[a], t, r)) return !0;
            }; else a = function(e, t, r) {
                for (var o = n.getMatchOffsets(e, i), a = 0; a < o.length; a++) if (s(o[a], t, r)) return !0;
            };
            var l = this.$lineIterator(e, t);
            return {
                "forEach": function(e) {
                    s = e, l.forEach(a);
                }
            };
        }, this.$assembleRegExp = function(e, t) {
            if (e.needle instanceof RegExp) return e.re = e.needle;
            var i = e.needle;
            if (!e.needle) return e.re = !1;
            e.regExp || (i = n.escapeRegExp(i)), e.wholeWord && (i = "\\b" + i + "\\b");
            var s = e.caseSensitive ? "gm" : "gmi";
            if (e.$isMultiLine = !t && /[\n\r]/.test(i), e.$isMultiLine) return e.re = this.$assembleMultilineRegExp(i, s);
            try {
                var r = new RegExp(i, s);
            } catch (e) {
                r = !1;
            }
            return e.re = r;
        }, this.$assembleMultilineRegExp = function(e, t) {
            for (var i = e.replace(/\r\n|\r|\n/g, "$\n^").split("\n"), n = [], s = 0; s < i.length; s++) try {
                n.push(new RegExp(i[s], t));
            } catch (e) {
                return !1;
            }
            return "" == i[0] ? (n.shift(), n.offset = 1) : n.offset = 0, n;
        }, this.$lineIterator = function(e, t) {
            var i = 1 == t.backwards, n = 0 != t.skipCurrent, s = t.range, r = t.start;
            r || (r = s ? s[i ? "end" : "start"] : e.selection.getRange()), r.start && (r = r[n != i ? "end" : "start"]);
            var o = s ? s.start.row : 0, a = s ? s.end.row : e.getLength() - 1;
            return {
                "forEach": i ? function(i) {
                    var n = r.row;
                    if (!i(e.getLine(n).substring(0, r.column), n)) {
                        for (n--; n >= o; n--) if (i(e.getLine(n), n)) return;
                        if (0 != t.wrap) for (n = a, o = r.row; n >= o; n--) if (i(e.getLine(n), n)) return;
                    }
                } : function(i) {
                    var n = r.row;
                    if (!i(e.getLine(n).substr(r.column), n, r.column)) {
                        for (n += 1; n <= a; n++) if (i(e.getLine(n), n)) return;
                        if (0 != t.wrap) for (n = o, a = r.row; n <= a; n++) if (i(e.getLine(n), n)) return;
                    }
                }
            };
        };
    }).call(o.prototype), t.Search = o;
}), ace.define("ace/keyboard/hash_handler", [ "require", "exports", "module", "ace/lib/keys", "ace/lib/useragent" ], function(e, t, i) {
    "use strict";
    function n(e, t) {
        this.platform = t || (o.isMac ? "mac" : "win"), this.commands = {}, this.commandKeyBinding = {}, 
        this.addCommands(e), this.$singleCommand = !0;
    }
    function s(e, t) {
        n.call(this, e, t), this.$singleCommand = !1;
    }
    var r = e("../lib/keys"), o = e("../lib/useragent"), a = r.KEY_MODS;
    s.prototype = n.prototype, function() {
        this.addCommand = function(e) {
            this.commands[e.name] && this.removeCommand(e), this.commands[e.name] = e, e.bindKey && this._buildKeyHash(e);
        }, this.removeCommand = function(e, t) {
            var i = e && ("string" == typeof e ? e : e.name);
            e = this.commands[i], t || delete this.commands[i];
            var n = this.commandKeyBinding;
            for (var s in n) {
                var r = n[s];
                if (r == e) delete n[s]; else if (Array.isArray(r)) {
                    var o = r.indexOf(e);
                    -1 != o && (r.splice(o, 1), 1 == r.length && (n[s] = r[0]));
                }
            }
        }, this.bindKey = function(e, t, i) {
            if ("object" == typeof e && (e = e[this.platform]), e) return "function" == typeof t ? this.addCommand({
                "exec": t,
                "bindKey": e,
                "name": t.name || e
            }) : void e.split("|").forEach(function(e) {
                var n = "";
                if (-1 != e.indexOf(" ")) {
                    var s = e.split(/\s+/);
                    e = s.pop(), s.forEach(function(e) {
                        var t = this.parseKeys(e), i = a[t.hashId] + t.key;
                        n += (n ? " " : "") + i, this._addCommandToBinding(n, "chainKeys");
                    }, this), n += " ";
                }
                var r = this.parseKeys(e), o = a[r.hashId] + r.key;
                this._addCommandToBinding(n + o, t, i);
            }, this);
        }, this._addCommandToBinding = function(e, t, i) {
            var n, s = this.commandKeyBinding;
            t ? !s[e] || this.$singleCommand ? s[e] = t : (Array.isArray(s[e]) ? -1 != (n = s[e].indexOf(t)) && s[e].splice(n, 1) : s[e] = [ s[e] ], 
            i || t.isDefault ? s[e].unshift(t) : s[e].push(t)) : delete s[e];
        }, this.addCommands = function(e) {
            e && Object.keys(e).forEach(function(t) {
                var i = e[t];
                if (i) {
                    if ("string" == typeof i) return this.bindKey(i, t);
                    "function" == typeof i && (i = {
                        "exec": i
                    }), "object" == typeof i && (i.name || (i.name = t), this.addCommand(i));
                }
            }, this);
        }, this.removeCommands = function(e) {
            Object.keys(e).forEach(function(t) {
                this.removeCommand(e[t]);
            }, this);
        }, this.bindKeys = function(e) {
            Object.keys(e).forEach(function(t) {
                this.bindKey(t, e[t]);
            }, this);
        }, this._buildKeyHash = function(e) {
            this.bindKey(e.bindKey, e);
        }, this.parseKeys = function(e) {
            var t = e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e) {
                return e;
            }), i = t.pop(), n = r[i];
            if (r.FUNCTION_KEYS[n]) i = r.FUNCTION_KEYS[n].toLowerCase(); else {
                if (!t.length) return {
                    "key": i,
                    "hashId": -1
                };
                if (1 == t.length && "shift" == t[0]) return {
                    "key": i.toUpperCase(),
                    "hashId": -1
                };
            }
            for (var s = 0, o = t.length; o--; ) {
                var a = r.KEY_MODS[t[o]];
                if (null == a) return "undefined" != typeof console && console.error("invalid modifier " + t[o] + " in " + e), 
                !1;
                s |= a;
            }
            return {
                "key": i,
                "hashId": s
            };
        }, this.findKeyCommand = function(e, t) {
            var i = a[e] + t;
            return this.commandKeyBinding[i];
        }, this.handleKeyboard = function(e, t, i, n) {
            var s = a[t] + i, r = this.commandKeyBinding[s];
            return e.$keyChain && (e.$keyChain += " " + s, r = this.commandKeyBinding[e.$keyChain] || r), 
            !r || "chainKeys" != r && "chainKeys" != r[r.length - 1] ? (e.$keyChain && n > 0 && (e.$keyChain = ""), 
            {
                "command": r
            }) : (e.$keyChain = e.$keyChain || s, {
                "command": "null"
            });
        };
    }.call(n.prototype), t.HashHandler = n, t.MultiHashHandler = s;
}), ace.define("ace/commands/command_manager", [ "require", "exports", "module", "ace/lib/oop", "ace/keyboard/hash_handler", "ace/lib/event_emitter" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/oop"), s = e("../keyboard/hash_handler").MultiHashHandler, r = e("../lib/event_emitter").EventEmitter, o = function(e, t) {
        s.call(this, t, e), this.byName = this.commands, this.setDefaultHandler("exec", function(e) {
            return e.command.exec(e.editor, e.args || {});
        });
    };
    n.inherits(o, s), function() {
        n.implement(this, r), this.exec = function(e, t, i) {
            if (Array.isArray(e)) {
                for (var n = e.length; n--; ) if (this.exec(e[n], t, i)) return !0;
                return !1;
            }
            if ("string" == typeof e && (e = this.commands[e]), !e) return !1;
            if (t && t.$readOnly && !e.readOnly) return !1;
            var s = {
                "editor": t,
                "command": e,
                "args": i
            };
            return s.returnValue = this._emit("exec", s), this._signal("afterExec", s), !1 !== s.returnValue;
        }, this.toggleRecording = function(e) {
            if (!this.$inReplay) return e && e._emit("changeStatus"), this.recording ? (this.macro.pop(), 
            this.removeEventListener("exec", this.$addCommandToMacro), this.macro.length || (this.macro = this.oldMacro), 
            this.recording = !1) : (this.$addCommandToMacro || (this.$addCommandToMacro = function(e) {
                this.macro.push([ e.command, e.args ]);
            }.bind(this)), this.oldMacro = this.macro, this.macro = [], this.on("exec", this.$addCommandToMacro), 
            this.recording = !0);
        }, this.replay = function(e) {
            if (!this.$inReplay && this.macro) {
                if (this.recording) return this.toggleRecording(e);
                try {
                    this.$inReplay = !0, this.macro.forEach(function(t) {
                        "string" == typeof t ? this.exec(t, e) : this.exec(t[0], e, t[1]);
                    }, this);
                } finally {
                    this.$inReplay = !1;
                }
            }
        }, this.trimMacro = function(e) {
            return e.map(function(e) {
                return "string" != typeof e[0] && (e[0] = e[0].name), e[1] || (e = e[0]), e;
            });
        };
    }.call(o.prototype), t.CommandManager = o;
}), ace.define("ace/commands/default_commands", [ "require", "exports", "module", "ace/lib/lang", "ace/config", "ace/range" ], function(e, t, i) {
    "use strict";
    function n(e, t) {
        return {
            "win": e,
            "mac": t
        };
    }
    var s = e("../lib/lang"), r = e("../config"), o = e("../range").Range;
    t.commands = [ {
        "name": "showSettingsMenu",
        "bindKey": n("Ctrl-,", "Command-,"),
        "exec": function(e) {
            r.loadModule("ace/ext/settings_menu", function(t) {
                t.init(e), e.showSettingsMenu();
            });
        },
        "readOnly": !0
    }, {
        "name": "goToNextError",
        "bindKey": n("Alt-E", "Ctrl-E"),
        "exec": function(e) {
            r.loadModule("ace/ext/error_marker", function(t) {
                t.showErrorMarker(e, 1);
            });
        },
        "scrollIntoView": "animate",
        "readOnly": !0
    }, {
        "name": "goToPreviousError",
        "bindKey": n("Alt-Shift-E", "Ctrl-Shift-E"),
        "exec": function(e) {
            r.loadModule("ace/ext/error_marker", function(t) {
                t.showErrorMarker(e, -1);
            });
        },
        "scrollIntoView": "animate",
        "readOnly": !0
    }, {
        "name": "selectall",
        "bindKey": n("Ctrl-A", "Command-A"),
        "exec": function(e) {
            e.selectAll();
        },
        "readOnly": !0
    }, {
        "name": "centerselection",
        "bindKey": n(null, "Ctrl-L"),
        "exec": function(e) {
            e.centerSelection();
        },
        "readOnly": !0
    }, {
        "name": "gotoline",
        "bindKey": n("Ctrl-L", "Command-L"),
        "exec": function(e) {
            var t = parseInt(prompt("Enter line number:"), 10);
            isNaN(t) || e.gotoLine(t);
        },
        "readOnly": !0
    }, {
        "name": "fold",
        "bindKey": n("Alt-L|Ctrl-F1", "Command-Alt-L|Command-F1"),
        "exec": function(e) {
            e.session.toggleFold(!1);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "center",
        "readOnly": !0
    }, {
        "name": "unfold",
        "bindKey": n("Alt-Shift-L|Ctrl-Shift-F1", "Command-Alt-Shift-L|Command-Shift-F1"),
        "exec": function(e) {
            e.session.toggleFold(!0);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "center",
        "readOnly": !0
    }, {
        "name": "toggleFoldWidget",
        "bindKey": n("F2", "F2"),
        "exec": function(e) {
            e.session.toggleFoldWidget();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "center",
        "readOnly": !0
    }, {
        "name": "toggleParentFoldWidget",
        "bindKey": n("Alt-F2", "Alt-F2"),
        "exec": function(e) {
            e.session.toggleFoldWidget(!0);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "center",
        "readOnly": !0
    }, {
        "name": "foldall",
        "bindKey": n(null, "Ctrl-Command-Option-0"),
        "exec": function(e) {
            e.session.foldAll();
        },
        "scrollIntoView": "center",
        "readOnly": !0
    }, {
        "name": "foldOther",
        "bindKey": n("Alt-0", "Command-Option-0"),
        "exec": function(e) {
            e.session.foldAll(), e.session.unfold(e.selection.getAllRanges());
        },
        "scrollIntoView": "center",
        "readOnly": !0
    }, {
        "name": "unfoldall",
        "bindKey": n("Alt-Shift-0", "Command-Option-Shift-0"),
        "exec": function(e) {
            e.session.unfold();
        },
        "scrollIntoView": "center",
        "readOnly": !0
    }, {
        "name": "findnext",
        "bindKey": n("Ctrl-K", "Command-G"),
        "exec": function(e) {
            e.findNext();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "center",
        "readOnly": !0
    }, {
        "name": "findprevious",
        "bindKey": n("Ctrl-Shift-K", "Command-Shift-G"),
        "exec": function(e) {
            e.findPrevious();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "center",
        "readOnly": !0
    }, {
        "name": "selectOrFindNext",
        "bindKey": n("Alt-K", "Ctrl-G"),
        "exec": function(e) {
            e.selection.isEmpty() ? e.selection.selectWord() : e.findNext();
        },
        "readOnly": !0
    }, {
        "name": "selectOrFindPrevious",
        "bindKey": n("Alt-Shift-K", "Ctrl-Shift-G"),
        "exec": function(e) {
            e.selection.isEmpty() ? e.selection.selectWord() : e.findPrevious();
        },
        "readOnly": !0
    }, {
        "name": "find",
        "bindKey": n("Ctrl-F", "Command-F"),
        "exec": function(e) {
            r.loadModule("ace/ext/searchbox", function(t) {
                t.Search(e);
            });
        },
        "readOnly": !0
    }, {
        "name": "overwrite",
        "bindKey": "Insert",
        "exec": function(e) {
            e.toggleOverwrite();
        },
        "readOnly": !0
    }, {
        "name": "selecttostart",
        "bindKey": n("Ctrl-Shift-Home", "Command-Shift-Up"),
        "exec": function(e) {
            e.getSelection().selectFileStart();
        },
        "multiSelectAction": "forEach",
        "readOnly": !0,
        "scrollIntoView": "animate",
        "aceCommandGroup": "fileJump"
    }, {
        "name": "gotostart",
        "bindKey": n("Ctrl-Home", "Command-Home|Command-Up"),
        "exec": function(e) {
            e.navigateFileStart();
        },
        "multiSelectAction": "forEach",
        "readOnly": !0,
        "scrollIntoView": "animate",
        "aceCommandGroup": "fileJump"
    }, {
        "name": "selectup",
        "bindKey": n("Shift-Up", "Shift-Up"),
        "exec": function(e) {
            e.getSelection().selectUp();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "golineup",
        "bindKey": n("Up", "Up|Ctrl-P"),
        "exec": function(e, t) {
            e.navigateUp(t.times);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "selecttoend",
        "bindKey": n("Ctrl-Shift-End", "Command-Shift-Down"),
        "exec": function(e) {
            e.getSelection().selectFileEnd();
        },
        "multiSelectAction": "forEach",
        "readOnly": !0,
        "scrollIntoView": "animate",
        "aceCommandGroup": "fileJump"
    }, {
        "name": "gotoend",
        "bindKey": n("Ctrl-End", "Command-End|Command-Down"),
        "exec": function(e) {
            e.navigateFileEnd();
        },
        "multiSelectAction": "forEach",
        "readOnly": !0,
        "scrollIntoView": "animate",
        "aceCommandGroup": "fileJump"
    }, {
        "name": "selectdown",
        "bindKey": n("Shift-Down", "Shift-Down"),
        "exec": function(e) {
            e.getSelection().selectDown();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "golinedown",
        "bindKey": n("Down", "Down|Ctrl-N"),
        "exec": function(e, t) {
            e.navigateDown(t.times);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "selectwordleft",
        "bindKey": n("Ctrl-Shift-Left", "Option-Shift-Left"),
        "exec": function(e) {
            e.getSelection().selectWordLeft();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "gotowordleft",
        "bindKey": n("Ctrl-Left", "Option-Left"),
        "exec": function(e) {
            e.navigateWordLeft();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "selecttolinestart",
        "bindKey": n("Alt-Shift-Left", "Command-Shift-Left"),
        "exec": function(e) {
            e.getSelection().selectLineStart();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "gotolinestart",
        "bindKey": n("Alt-Left|Home", "Command-Left|Home|Ctrl-A"),
        "exec": function(e) {
            e.navigateLineStart();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "selectleft",
        "bindKey": n("Shift-Left", "Shift-Left"),
        "exec": function(e) {
            e.getSelection().selectLeft();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "gotoleft",
        "bindKey": n("Left", "Left|Ctrl-B"),
        "exec": function(e, t) {
            e.navigateLeft(t.times);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "selectwordright",
        "bindKey": n("Ctrl-Shift-Right", "Option-Shift-Right"),
        "exec": function(e) {
            e.getSelection().selectWordRight();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "gotowordright",
        "bindKey": n("Ctrl-Right", "Option-Right"),
        "exec": function(e) {
            e.navigateWordRight();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "selecttolineend",
        "bindKey": n("Alt-Shift-Right", "Command-Shift-Right"),
        "exec": function(e) {
            e.getSelection().selectLineEnd();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "gotolineend",
        "bindKey": n("Alt-Right|End", "Command-Right|End|Ctrl-E"),
        "exec": function(e) {
            e.navigateLineEnd();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "selectright",
        "bindKey": n("Shift-Right", "Shift-Right"),
        "exec": function(e) {
            e.getSelection().selectRight();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "gotoright",
        "bindKey": n("Right", "Right|Ctrl-F"),
        "exec": function(e, t) {
            e.navigateRight(t.times);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "selectpagedown",
        "bindKey": "Shift-PageDown",
        "exec": function(e) {
            e.selectPageDown();
        },
        "readOnly": !0
    }, {
        "name": "pagedown",
        "bindKey": n(null, "Option-PageDown"),
        "exec": function(e) {
            e.scrollPageDown();
        },
        "readOnly": !0
    }, {
        "name": "gotopagedown",
        "bindKey": n("PageDown", "PageDown|Ctrl-V"),
        "exec": function(e) {
            e.gotoPageDown();
        },
        "readOnly": !0
    }, {
        "name": "selectpageup",
        "bindKey": "Shift-PageUp",
        "exec": function(e) {
            e.selectPageUp();
        },
        "readOnly": !0
    }, {
        "name": "pageup",
        "bindKey": n(null, "Option-PageUp"),
        "exec": function(e) {
            e.scrollPageUp();
        },
        "readOnly": !0
    }, {
        "name": "gotopageup",
        "bindKey": "PageUp",
        "exec": function(e) {
            e.gotoPageUp();
        },
        "readOnly": !0
    }, {
        "name": "scrollup",
        "bindKey": n("Ctrl-Up", null),
        "exec": function(e) {
            e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight);
        },
        "readOnly": !0
    }, {
        "name": "scrolldown",
        "bindKey": n("Ctrl-Down", null),
        "exec": function(e) {
            e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight);
        },
        "readOnly": !0
    }, {
        "name": "selectlinestart",
        "bindKey": "Shift-Home",
        "exec": function(e) {
            e.getSelection().selectLineStart();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "selectlineend",
        "bindKey": "Shift-End",
        "exec": function(e) {
            e.getSelection().selectLineEnd();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "togglerecording",
        "bindKey": n("Ctrl-Alt-E", "Command-Option-E"),
        "exec": function(e) {
            e.commands.toggleRecording(e);
        },
        "readOnly": !0
    }, {
        "name": "replaymacro",
        "bindKey": n("Ctrl-Shift-E", "Command-Shift-E"),
        "exec": function(e) {
            e.commands.replay(e);
        },
        "readOnly": !0
    }, {
        "name": "jumptomatching",
        "bindKey": n("Ctrl-P", "Ctrl-P"),
        "exec": function(e) {
            e.jumpToMatching();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "animate",
        "readOnly": !0
    }, {
        "name": "selecttomatching",
        "bindKey": n("Ctrl-Shift-P", "Ctrl-Shift-P"),
        "exec": function(e) {
            e.jumpToMatching(!0);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "animate",
        "readOnly": !0
    }, {
        "name": "expandToMatching",
        "bindKey": n("Ctrl-Shift-M", "Ctrl-Shift-M"),
        "exec": function(e) {
            e.jumpToMatching(!0, !0);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "animate",
        "readOnly": !0
    }, {
        "name": "passKeysToBrowser",
        "bindKey": n(null, null),
        "exec": function() {},
        "passEvent": !0,
        "readOnly": !0
    }, {
        "name": "cut",
        "exec": function(e) {
            var t = e.getSelectionRange();
            e._emit("cut", t), e.selection.isEmpty() || (e.session.remove(t), e.clearSelection());
        },
        "scrollIntoView": "cursor",
        "multiSelectAction": "forEach"
    }, {
        "name": "removeline",
        "bindKey": n("Ctrl-D", "Command-D"),
        "exec": function(e) {
            e.removeLines();
        },
        "scrollIntoView": "cursor",
        "multiSelectAction": "forEachLine"
    }, {
        "name": "duplicateSelection",
        "bindKey": n("Ctrl-Shift-D", "Command-Shift-D"),
        "exec": function(e) {
            e.duplicateSelection();
        },
        "scrollIntoView": "cursor",
        "multiSelectAction": "forEach"
    }, {
        "name": "sortlines",
        "bindKey": n("Ctrl-Alt-S", "Command-Alt-S"),
        "exec": function(e) {
            e.sortLines();
        },
        "scrollIntoView": "selection",
        "multiSelectAction": "forEachLine"
    }, {
        "name": "togglecomment",
        "bindKey": n("Ctrl-/", "Command-/"),
        "exec": function(e) {
            e.toggleCommentLines();
        },
        "multiSelectAction": "forEachLine",
        "scrollIntoView": "selectionPart"
    }, {
        "name": "toggleBlockComment",
        "bindKey": n("Ctrl-Shift-/", "Command-Shift-/"),
        "exec": function(e) {
            e.toggleBlockComment();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "selectionPart"
    }, {
        "name": "modifyNumberUp",
        "bindKey": n("Ctrl-Shift-Up", "Alt-Shift-Up"),
        "exec": function(e) {
            e.modifyNumber(1);
        },
        "scrollIntoView": "cursor",
        "multiSelectAction": "forEach"
    }, {
        "name": "modifyNumberDown",
        "bindKey": n("Ctrl-Shift-Down", "Alt-Shift-Down"),
        "exec": function(e) {
            e.modifyNumber(-1);
        },
        "scrollIntoView": "cursor",
        "multiSelectAction": "forEach"
    }, {
        "name": "replace",
        "bindKey": n("Ctrl-H", "Command-Option-F"),
        "exec": function(e) {
            r.loadModule("ace/ext/searchbox", function(t) {
                t.Search(e, !0);
            });
        }
    }, {
        "name": "undo",
        "bindKey": n("Ctrl-Z", "Command-Z"),
        "exec": function(e) {
            e.undo();
        }
    }, {
        "name": "redo",
        "bindKey": n("Ctrl-Shift-Z|Ctrl-Y", "Command-Shift-Z|Command-Y"),
        "exec": function(e) {
            e.redo();
        }
    }, {
        "name": "copylinesup",
        "bindKey": n("Alt-Shift-Up", "Command-Option-Up"),
        "exec": function(e) {
            e.copyLinesUp();
        },
        "scrollIntoView": "cursor"
    }, {
        "name": "movelinesup",
        "bindKey": n("Alt-Up", "Option-Up"),
        "exec": function(e) {
            e.moveLinesUp();
        },
        "scrollIntoView": "cursor"
    }, {
        "name": "copylinesdown",
        "bindKey": n("Alt-Shift-Down", "Command-Option-Down"),
        "exec": function(e) {
            e.copyLinesDown();
        },
        "scrollIntoView": "cursor"
    }, {
        "name": "movelinesdown",
        "bindKey": n("Alt-Down", "Option-Down"),
        "exec": function(e) {
            e.moveLinesDown();
        },
        "scrollIntoView": "cursor"
    }, {
        "name": "del",
        "bindKey": n("Delete", "Delete|Ctrl-D|Shift-Delete"),
        "exec": function(e) {
            e.remove("right");
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "backspace",
        "bindKey": n("Shift-Backspace|Backspace", "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),
        "exec": function(e) {
            e.remove("left");
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "cut_or_delete",
        "bindKey": n("Shift-Delete", null),
        "exec": function(e) {
            if (!e.selection.isEmpty()) return !1;
            e.remove("left");
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "removetolinestart",
        "bindKey": n("Alt-Backspace", "Command-Backspace"),
        "exec": function(e) {
            e.removeToLineStart();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "removetolineend",
        "bindKey": n("Alt-Delete", "Ctrl-K"),
        "exec": function(e) {
            e.removeToLineEnd();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "removewordleft",
        "bindKey": n("Ctrl-Backspace", "Alt-Backspace|Ctrl-Alt-Backspace"),
        "exec": function(e) {
            e.removeWordLeft();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "removewordright",
        "bindKey": n("Ctrl-Delete", "Alt-Delete"),
        "exec": function(e) {
            e.removeWordRight();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "outdent",
        "bindKey": n("Shift-Tab", "Shift-Tab"),
        "exec": function(e) {
            e.blockOutdent();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "selectionPart"
    }, {
        "name": "indent",
        "bindKey": n("Tab", "Tab"),
        "exec": function(e) {
            e.indent();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "selectionPart"
    }, {
        "name": "blockoutdent",
        "bindKey": n("Ctrl-[", "Ctrl-["),
        "exec": function(e) {
            e.blockOutdent();
        },
        "multiSelectAction": "forEachLine",
        "scrollIntoView": "selectionPart"
    }, {
        "name": "blockindent",
        "bindKey": n("Ctrl-]", "Ctrl-]"),
        "exec": function(e) {
            e.blockIndent();
        },
        "multiSelectAction": "forEachLine",
        "scrollIntoView": "selectionPart"
    }, {
        "name": "insertstring",
        "exec": function(e, t) {
            e.insert(t);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "inserttext",
        "exec": function(e, t) {
            e.insert(s.stringRepeat(t.text || "", t.times || 1));
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "splitline",
        "bindKey": n(null, "Ctrl-O"),
        "exec": function(e) {
            e.splitLine();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "transposeletters",
        "bindKey": n("Ctrl-T", "Ctrl-T"),
        "exec": function(e) {
            e.transposeLetters();
        },
        "multiSelectAction": function(e) {
            e.transposeSelections(1);
        },
        "scrollIntoView": "cursor"
    }, {
        "name": "touppercase",
        "bindKey": n("Ctrl-U", "Ctrl-U"),
        "exec": function(e) {
            e.toUpperCase();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "tolowercase",
        "bindKey": n("Ctrl-Shift-U", "Ctrl-Shift-U"),
        "exec": function(e) {
            e.toLowerCase();
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor"
    }, {
        "name": "expandtoline",
        "bindKey": n("Ctrl-Shift-L", "Command-Shift-L"),
        "exec": function(e) {
            var t = e.selection.getRange();
            t.start.column = t.end.column = 0, t.end.row++, e.selection.setRange(t, !1);
        },
        "multiSelectAction": "forEach",
        "scrollIntoView": "cursor",
        "readOnly": !0
    }, {
        "name": "joinlines",
        "bindKey": n(null, null),
        "exec": function(e) {
            for (var t = e.selection.isBackwards(), i = t ? e.selection.getSelectionLead() : e.selection.getSelectionAnchor(), n = t ? e.selection.getSelectionAnchor() : e.selection.getSelectionLead(), r = e.session.doc.getLine(i.row).length, a = e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/, " ").length, l = e.session.doc.getLine(i.row), h = i.row + 1; h <= n.row + 1; h++) {
                var c = s.stringTrimLeft(s.stringTrimRight(e.session.doc.getLine(h)));
                0 !== c.length && (c = " " + c), l += c;
            }
            n.row + 1 < e.session.doc.getLength() - 1 && (l += e.session.doc.getNewLineCharacter()), 
            e.clearSelection(), e.session.doc.replace(new o(i.row, 0, n.row + 2, 0), l), a > 0 ? (e.selection.moveCursorTo(i.row, i.column), 
            e.selection.selectTo(i.row, i.column + a)) : (r = e.session.doc.getLine(i.row).length > r ? r + 1 : r, 
            e.selection.moveCursorTo(i.row, r));
        },
        "multiSelectAction": "forEach",
        "readOnly": !0
    }, {
        "name": "invertSelection",
        "bindKey": n(null, null),
        "exec": function(e) {
            var t = e.session.doc.getLength() - 1, i = e.session.doc.getLine(t).length, n = e.selection.rangeList.ranges, s = [];
            n.length < 1 && (n = [ e.selection.getRange() ]);
            for (r = 0; r < n.length; r++) r == n.length - 1 && (n[r].end.row === t && n[r].end.column === i || s.push(new o(n[r].end.row, n[r].end.column, t, i))), 
            0 === r ? 0 === n[r].start.row && 0 === n[r].start.column || s.push(new o(0, 0, n[r].start.row, n[r].start.column)) : s.push(new o(n[r - 1].end.row, n[r - 1].end.column, n[r].start.row, n[r].start.column));
            e.exitMultiSelectMode(), e.clearSelection();
            for (var r = 0; r < s.length; r++) e.selection.addRange(s[r], !1);
        },
        "readOnly": !0,
        "scrollIntoView": "none"
    } ];
}), ace.define("ace/editor", [ "require", "exports", "module", "ace/lib/fixoldbrowsers", "ace/lib/oop", "ace/lib/dom", "ace/lib/lang", "ace/lib/useragent", "ace/keyboard/textinput", "ace/mouse/mouse_handler", "ace/mouse/fold_handler", "ace/keyboard/keybinding", "ace/edit_session", "ace/search", "ace/range", "ace/lib/event_emitter", "ace/commands/command_manager", "ace/commands/default_commands", "ace/config", "ace/token_iterator" ], function(e, t, i) {
    "use strict";
    e("./lib/fixoldbrowsers");
    var n = e("./lib/oop"), s = e("./lib/dom"), r = e("./lib/lang"), o = e("./lib/useragent"), a = e("./keyboard/textinput").TextInput, l = e("./mouse/mouse_handler").MouseHandler, h = e("./mouse/fold_handler").FoldHandler, c = e("./keyboard/keybinding").KeyBinding, u = e("./edit_session").EditSession, p = e("./search").Search, d = e("./range").Range, f = e("./lib/event_emitter").EventEmitter, m = e("./commands/command_manager").CommandManager, g = e("./commands/default_commands").commands, y = e("./config"), v = e("./token_iterator").TokenIterator, L = function(e, t) {
        var i = e.getContainerElement();
        this.container = i, this.renderer = e, this.commands = new m(o.isMac ? "mac" : "win", g), 
        this.textInput = new a(e.getTextAreaContainer(), this), this.renderer.textarea = this.textInput.getElement(), 
        this.keyBinding = new c(this), this.$mouseHandler = new l(this), new h(this), this.$blockScrolling = 0, 
        this.$search = new p().set({
            "wrap": !0
        }), this.$historyTracker = this.$historyTracker.bind(this), this.commands.on("exec", this.$historyTracker), 
        this.$initOperationListeners(), this._$emitInputEvent = r.delayedCall(function() {
            this._signal("input", {}), this.session && this.session.bgTokenizer && this.session.bgTokenizer.scheduleStart();
        }.bind(this)), this.on("change", function(e, t) {
            t._$emitInputEvent.schedule(31);
        }), this.setSession(t || new u("")), y.resetOptions(this), y._signal("editor", this);
    };
    (function() {
        n.implement(this, f), this.$initOperationListeners = function() {
            this.selections = [], this.commands.on("exec", this.startOperation.bind(this), !0), 
            this.commands.on("afterExec", this.endOperation.bind(this), !0), this.$opResetTimer = r.delayedCall(this.endOperation.bind(this)), 
            this.on("change", function() {
                this.curOp || this.startOperation(), this.curOp.docChanged = !0;
            }.bind(this), !0), this.on("changeSelection", function() {
                this.curOp || this.startOperation(), this.curOp.selectionChanged = !0;
            }.bind(this), !0);
        }, this.curOp = null, this.prevOp = {}, this.startOperation = function(e) {
            if (this.curOp) {
                if (!e || this.curOp.command) return;
                this.prevOp = this.curOp;
            }
            e || (this.previousCommand = null, e = {}), this.$opResetTimer.schedule(), this.curOp = {
                "command": e.command || {},
                "args": e.args,
                "scrollTop": this.renderer.scrollTop
            }, this.curOp.command.name && void 0 !== this.curOp.command.scrollIntoView && this.$blockScrolling++;
        }, this.endOperation = function(e) {
            if (this.curOp) {
                if (e && !1 === e.returnValue) return this.curOp = null;
                this._signal("beforeEndOperation");
                var t = this.curOp.command;
                if (t.name && this.$blockScrolling > 0 && this.$blockScrolling--, t && t.scrollIntoView) {
                    switch (t.scrollIntoView) {
                      case "center":
                        this.renderer.scrollCursorIntoView(null, .5);
                        break;

                      case "animate":
                      case "cursor":
                        this.renderer.scrollCursorIntoView();
                        break;

                      case "selectionPart":
                        var i = this.selection.getRange(), n = this.renderer.layerConfig;
                        (i.start.row >= n.lastRow || i.end.row <= n.firstRow) && this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);
                    }
                    "animate" == t.scrollIntoView && this.renderer.animateScrolling(this.curOp.scrollTop);
                }
                this.prevOp = this.curOp, this.curOp = null;
            }
        }, this.$mergeableCommands = [ "backspace", "del", "insertstring" ], this.$historyTracker = function(e) {
            if (this.$mergeUndoDeltas) {
                var t = this.prevOp, i = this.$mergeableCommands, n = t.command && e.command.name == t.command.name;
                if ("insertstring" == e.command.name) {
                    var s = e.args;
                    void 0 === this.mergeNextCommand && (this.mergeNextCommand = !0), n = n && this.mergeNextCommand && (!/\s/.test(s) || /\s/.test(t.args)), 
                    this.mergeNextCommand = !0;
                } else n = n && -1 !== i.indexOf(e.command.name);
                "always" != this.$mergeUndoDeltas && Date.now() - this.sequenceStartTime > 2e3 && (n = !1), 
                n ? this.session.mergeUndoDeltas = !0 : -1 !== i.indexOf(e.command.name) && (this.sequenceStartTime = Date.now());
            }
        }, this.setKeyboardHandler = function(e, t) {
            if (e && "string" == typeof e) {
                this.$keybindingId = e;
                var i = this;
                y.loadModule([ "keybinding", e ], function(n) {
                    i.$keybindingId == e && i.keyBinding.setKeyboardHandler(n && n.handler), t && t();
                });
            } else this.$keybindingId = null, this.keyBinding.setKeyboardHandler(e), t && t();
        }, this.getKeyboardHandler = function() {
            return this.keyBinding.getKeyboardHandler();
        }, this.setSession = function(e) {
            if (this.session != e) {
                var t = this.session;
                if (t) {
                    this.session.removeEventListener("change", this.$onDocumentChange), this.session.removeEventListener("changeMode", this.$onChangeMode), 
                    this.session.removeEventListener("tokenizerUpdate", this.$onTokenizerUpdate), this.session.removeEventListener("changeTabSize", this.$onChangeTabSize), 
                    this.session.removeEventListener("changeWrapLimit", this.$onChangeWrapLimit), this.session.removeEventListener("changeWrapMode", this.$onChangeWrapMode), 
                    this.session.removeEventListener("onChangeFold", this.$onChangeFold), this.session.removeEventListener("changeFrontMarker", this.$onChangeFrontMarker), 
                    this.session.removeEventListener("changeBackMarker", this.$onChangeBackMarker), 
                    this.session.removeEventListener("changeBreakpoint", this.$onChangeBreakpoint), 
                    this.session.removeEventListener("changeAnnotation", this.$onChangeAnnotation), 
                    this.session.removeEventListener("changeOverwrite", this.$onCursorChange), this.session.removeEventListener("changeScrollTop", this.$onScrollTopChange), 
                    this.session.removeEventListener("changeScrollLeft", this.$onScrollLeftChange);
                    var i = this.session.getSelection();
                    i.removeEventListener("changeCursor", this.$onCursorChange), i.removeEventListener("changeSelection", this.$onSelectionChange);
                }
                this.session = e, e ? (this.$onDocumentChange = this.onDocumentChange.bind(this), 
                e.addEventListener("change", this.$onDocumentChange), this.renderer.setSession(e), 
                this.$onChangeMode = this.onChangeMode.bind(this), e.addEventListener("changeMode", this.$onChangeMode), 
                this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this), e.addEventListener("tokenizerUpdate", this.$onTokenizerUpdate), 
                this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer), e.addEventListener("changeTabSize", this.$onChangeTabSize), 
                this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this), e.addEventListener("changeWrapLimit", this.$onChangeWrapLimit), 
                this.$onChangeWrapMode = this.onChangeWrapMode.bind(this), e.addEventListener("changeWrapMode", this.$onChangeWrapMode), 
                this.$onChangeFold = this.onChangeFold.bind(this), e.addEventListener("changeFold", this.$onChangeFold), 
                this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this), this.session.addEventListener("changeFrontMarker", this.$onChangeFrontMarker), 
                this.$onChangeBackMarker = this.onChangeBackMarker.bind(this), this.session.addEventListener("changeBackMarker", this.$onChangeBackMarker), 
                this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this), this.session.addEventListener("changeBreakpoint", this.$onChangeBreakpoint), 
                this.$onChangeAnnotation = this.onChangeAnnotation.bind(this), this.session.addEventListener("changeAnnotation", this.$onChangeAnnotation), 
                this.$onCursorChange = this.onCursorChange.bind(this), this.session.addEventListener("changeOverwrite", this.$onCursorChange), 
                this.$onScrollTopChange = this.onScrollTopChange.bind(this), this.session.addEventListener("changeScrollTop", this.$onScrollTopChange), 
                this.$onScrollLeftChange = this.onScrollLeftChange.bind(this), this.session.addEventListener("changeScrollLeft", this.$onScrollLeftChange), 
                this.selection = e.getSelection(), this.selection.addEventListener("changeCursor", this.$onCursorChange), 
                this.$onSelectionChange = this.onSelectionChange.bind(this), this.selection.addEventListener("changeSelection", this.$onSelectionChange), 
                this.onChangeMode(), this.$blockScrolling += 1, this.onCursorChange(), this.$blockScrolling -= 1, 
                this.onScrollTopChange(), this.onScrollLeftChange(), this.onSelectionChange(), this.onChangeFrontMarker(), 
                this.onChangeBackMarker(), this.onChangeBreakpoint(), this.onChangeAnnotation(), 
                this.session.getUseWrapMode() && this.renderer.adjustWrapLimit(), this.renderer.updateFull()) : (this.selection = null, 
                this.renderer.setSession(e)), this._signal("changeSession", {
                    "session": e,
                    "oldSession": t
                }), t && t._signal("changeEditor", {
                    "oldEditor": this
                }), e && e._signal("changeEditor", {
                    "editor": this
                });
            }
        }, this.getSession = function() {
            return this.session;
        }, this.setValue = function(e, t) {
            return this.session.doc.setValue(e), t ? 1 == t ? this.navigateFileEnd() : -1 == t && this.navigateFileStart() : this.selectAll(), 
            e;
        }, this.getValue = function() {
            return this.session.getValue();
        }, this.getSelection = function() {
            return this.selection;
        }, this.resize = function(e) {
            this.renderer.onResize(e);
        }, this.setTheme = function(e, t) {
            this.renderer.setTheme(e, t);
        }, this.getTheme = function() {
            return this.renderer.getTheme();
        }, this.setStyle = function(e) {
            this.renderer.setStyle(e);
        }, this.unsetStyle = function(e) {
            this.renderer.unsetStyle(e);
        }, this.getFontSize = function() {
            return this.getOption("fontSize") || s.computedStyle(this.container, "fontSize");
        }, this.setFontSize = function(e) {
            this.setOption("fontSize", e);
        }, this.$highlightBrackets = function() {
            if (this.session.$bracketHighlight && (this.session.removeMarker(this.session.$bracketHighlight), 
            this.session.$bracketHighlight = null), !this.$highlightPending) {
                var e = this;
                this.$highlightPending = !0, setTimeout(function() {
                    e.$highlightPending = !1;
                    var t = e.session;
                    if (t && t.bgTokenizer) {
                        var i = t.findMatchingBracket(e.getCursorPosition());
                        if (i) n = new d(i.row, i.column, i.row, i.column + 1); else if (t.$mode.getMatching) var n = t.$mode.getMatching(e.session);
                        n && (t.$bracketHighlight = t.addMarker(n, "ace_bracket", "text"));
                    }
                }, 50);
            }
        }, this.$highlightTags = function() {
            if (!this.$highlightTagPending) {
                var e = this;
                this.$highlightTagPending = !0, setTimeout(function() {
                    e.$highlightTagPending = !1;
                    var t = e.session;
                    if (t && t.bgTokenizer) {
                        var i = e.getCursorPosition(), n = new v(e.session, i.row, i.column), s = n.getCurrentToken();
                        if (!s || !/\b(?:tag-open|tag-name)/.test(s.type)) return t.removeMarker(t.$tagHighlight), 
                        void (t.$tagHighlight = null);
                        if (-1 == s.type.indexOf("tag-open") || (s = n.stepForward())) {
                            var r = s.value, o = 0, a = n.stepBackward();
                            if ("<" == a.value) do {
                                a = s, (s = n.stepForward()) && s.value === r && -1 !== s.type.indexOf("tag-name") && ("<" === a.value ? o++ : "</" === a.value && o--);
                            } while (s && o >= 0); else {
                                do {
                                    s = a, a = n.stepBackward(), s && s.value === r && -1 !== s.type.indexOf("tag-name") && ("<" === a.value ? o++ : "</" === a.value && o--);
                                } while (a && o <= 0);
                                n.stepForward();
                            }
                            if (!s) return t.removeMarker(t.$tagHighlight), void (t.$tagHighlight = null);
                            var l = n.getCurrentTokenRow(), h = n.getCurrentTokenColumn(), c = new d(l, h, l, h + s.value.length);
                            t.$tagHighlight && 0 !== c.compareRange(t.$backMarkers[t.$tagHighlight].range) && (t.removeMarker(t.$tagHighlight), 
                            t.$tagHighlight = null), c && !t.$tagHighlight && (t.$tagHighlight = t.addMarker(c, "ace_bracket", "text"));
                        }
                    }
                }, 50);
            }
        }, this.focus = function() {
            var e = this;
            setTimeout(function() {
                e.textInput.focus();
            }), this.textInput.focus();
        }, this.isFocused = function() {
            return this.textInput.isFocused();
        }, this.blur = function() {
            this.textInput.blur();
        }, this.onFocus = function(e) {
            this.$isFocused || (this.$isFocused = !0, this.renderer.showCursor(), this.renderer.visualizeFocus(), 
            this._emit("focus", e));
        }, this.onBlur = function(e) {
            this.$isFocused && (this.$isFocused = !1, this.renderer.hideCursor(), this.renderer.visualizeBlur(), 
            this._emit("blur", e));
        }, this.$cursorChange = function() {
            this.renderer.updateCursor();
        }, this.onDocumentChange = function(e) {
            var t, i = e.data, n = i.range;
            t = n.start.row == n.end.row && "insertLines" != i.action && "removeLines" != i.action ? n.end.row : 1 / 0, 
            this.renderer.updateLines(n.start.row, t, this.session.$useWrapMode), this._signal("change", e), 
            this.$cursorChange(), this.$updateHighlightActiveLine();
        }, this.onTokenizerUpdate = function(e) {
            var t = e.data;
            this.renderer.updateLines(t.first, t.last);
        }, this.onScrollTopChange = function() {
            this.renderer.scrollToY(this.session.getScrollTop());
        }, this.onScrollLeftChange = function() {
            this.renderer.scrollToX(this.session.getScrollLeft());
        }, this.onCursorChange = function() {
            this.$cursorChange(), this.$blockScrolling || (y.warn("Automatically scrolling cursor into view after selection change", "this will be disabled in the next version", "set editor.$blockScrolling = Infinity to disable this message"), 
            this.renderer.scrollCursorIntoView()), this.$highlightBrackets(), this.$highlightTags(), 
            this.$updateHighlightActiveLine(), this._signal("changeSelection");
        }, this.$updateHighlightActiveLine = function() {
            var e, t = this.getSession();
            if (this.$highlightActiveLine && ("line" == this.$selectionStyle && this.selection.isMultiLine() || (e = this.getCursorPosition()), 
            !this.renderer.$maxLines || 1 !== this.session.getLength() || this.renderer.$minLines > 1 || (e = !1)), 
            t.$highlightLineMarker && !e) t.removeMarker(t.$highlightLineMarker.id), t.$highlightLineMarker = null; else if (!t.$highlightLineMarker && e) {
                var i = new d(e.row, e.column, e.row, 1 / 0);
                i.id = t.addMarker(i, "ace_active-line", "screenLine"), t.$highlightLineMarker = i;
            } else e && (t.$highlightLineMarker.start.row = e.row, t.$highlightLineMarker.end.row = e.row, 
            t.$highlightLineMarker.start.column = e.column, t._signal("changeBackMarker"));
        }, this.onSelectionChange = function(e) {
            var t = this.session;
            if (t.$selectionMarker && t.removeMarker(t.$selectionMarker), t.$selectionMarker = null, 
            this.selection.isEmpty()) this.$updateHighlightActiveLine(); else {
                var i = this.selection.getRange(), n = this.getSelectionStyle();
                t.$selectionMarker = t.addMarker(i, "ace_selection", n);
            }
            var s = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();
            this.session.highlight(s), this._signal("changeSelection");
        }, this.$getSelectionHighLightRegexp = function() {
            var e = this.session, t = this.getSelectionRange();
            if (!t.isEmpty() && !t.isMultiLine()) {
                var i = t.start.column - 1, n = t.end.column + 1, s = e.getLine(t.start.row), r = s.length, o = s.substring(Math.max(i, 0), Math.min(n, r));
                if (!(i >= 0 && /^[\w\d]/.test(o) || n <= r && /[\w\d]$/.test(o)) && (o = s.substring(t.start.column, t.end.column), 
                /^[\w\d]+$/.test(o))) return this.$search.$assembleRegExp({
                    "wholeWord": !0,
                    "caseSensitive": !0,
                    "needle": o
                });
            }
        }, this.onChangeFrontMarker = function() {
            this.renderer.updateFrontMarkers();
        }, this.onChangeBackMarker = function() {
            this.renderer.updateBackMarkers();
        }, this.onChangeBreakpoint = function() {
            this.renderer.updateBreakpoints();
        }, this.onChangeAnnotation = function() {
            this.renderer.setAnnotations(this.session.getAnnotations());
        }, this.onChangeMode = function(e) {
            this.renderer.updateText(), this._emit("changeMode", e);
        }, this.onChangeWrapLimit = function() {
            this.renderer.updateFull();
        }, this.onChangeWrapMode = function() {
            this.renderer.onResize(!0);
        }, this.onChangeFold = function() {
            this.$updateHighlightActiveLine(), this.renderer.updateFull();
        }, this.getSelectedText = function() {
            return this.session.getTextRange(this.getSelectionRange());
        }, this.getCopyText = function() {
            var e = this.getSelectedText();
            return this._signal("copy", e), e;
        }, this.onCopy = function() {
            this.commands.exec("copy", this);
        }, this.onCut = function() {
            this.commands.exec("cut", this);
        }, this.onPaste = function(e) {
            if (!this.$readOnly) {
                var t = {
                    "text": e
                };
                if (this._signal("paste", t), e = t.text, !this.inMultiSelectMode || this.inVirtualSelectionMode) this.insert(e); else {
                    var i = e.split(/\r\n|\r|\n/), n = this.selection.rangeList.ranges;
                    if (i.length > n.length || i.length < 2 || !i[1]) return this.commands.exec("insertstring", this, e);
                    for (var s = n.length; s--; ) {
                        var r = n[s];
                        r.isEmpty() || this.session.remove(r), this.session.insert(r.start, i[s]);
                    }
                }
                this.renderer.scrollCursorIntoView();
            }
        }, this.execCommand = function(e, t) {
            return this.commands.exec(e, this, t);
        }, this.insert = function(e, t) {
            var i = this.session, n = i.getMode(), s = this.getCursorPosition();
            if (this.getBehavioursEnabled() && !t) {
                var r = n.transformAction(i.getState(s.row), "insertion", this, i, e);
                r && (e !== r.text && (this.session.mergeUndoDeltas = !1, this.$mergeNextCommand = !1), 
                e = r.text);
            }
            if ("\t" == e && (e = this.session.getTabString()), this.selection.isEmpty()) this.session.getOverwrite() && ((o = new d.fromPoints(s, s)).end.column += e.length, 
            this.session.remove(o)); else {
                var o = this.getSelectionRange();
                s = this.session.remove(o), this.clearSelection();
            }
            if ("\n" == e || "\r\n" == e) {
                c = i.getLine(s.row);
                if (s.column > c.search(/\S|$/)) {
                    var a = c.substr(s.column).search(/\S|$/);
                    i.doc.removeInLine(s.row, s.column, s.column + a);
                }
            }
            this.clearSelection();
            var l = s.column, h = i.getState(s.row), c = i.getLine(s.row), u = n.checkOutdent(h, c, e);
            i.insert(s, e);
            if (r && r.selection && (2 == r.selection.length ? this.selection.setSelectionRange(new d(s.row, l + r.selection[0], s.row, l + r.selection[1])) : this.selection.setSelectionRange(new d(s.row + r.selection[0], r.selection[1], s.row + r.selection[2], r.selection[3]))), 
            i.getDocument().isNewLine(e)) {
                var p = n.getNextLineIndent(h, c.slice(0, s.column), i.getTabString());
                i.insert({
                    "row": s.row + 1,
                    "column": 0
                }, p);
            }
            u && n.autoOutdent(h, i, s.row);
        }, this.onTextInput = function(e) {
            this.keyBinding.onTextInput(e);
        }, this.onCommandKey = function(e, t, i) {
            this.keyBinding.onCommandKey(e, t, i);
        }, this.setOverwrite = function(e) {
            this.session.setOverwrite(e);
        }, this.getOverwrite = function() {
            return this.session.getOverwrite();
        }, this.toggleOverwrite = function() {
            this.session.toggleOverwrite();
        }, this.setScrollSpeed = function(e) {
            this.setOption("scrollSpeed", e);
        }, this.getScrollSpeed = function() {
            return this.getOption("scrollSpeed");
        }, this.setDragDelay = function(e) {
            this.setOption("dragDelay", e);
        }, this.getDragDelay = function() {
            return this.getOption("dragDelay");
        }, this.setSelectionStyle = function(e) {
            this.setOption("selectionStyle", e);
        }, this.getSelectionStyle = function() {
            return this.getOption("selectionStyle");
        }, this.setHighlightActiveLine = function(e) {
            this.setOption("highlightActiveLine", e);
        }, this.getHighlightActiveLine = function() {
            return this.getOption("highlightActiveLine");
        }, this.setHighlightGutterLine = function(e) {
            this.setOption("highlightGutterLine", e);
        }, this.getHighlightGutterLine = function() {
            return this.getOption("highlightGutterLine");
        }, this.setHighlightSelectedWord = function(e) {
            this.setOption("highlightSelectedWord", e);
        }, this.getHighlightSelectedWord = function() {
            return this.$highlightSelectedWord;
        }, this.setAnimatedScroll = function(e) {
            this.renderer.setAnimatedScroll(e);
        }, this.getAnimatedScroll = function() {
            return this.renderer.getAnimatedScroll();
        }, this.setShowInvisibles = function(e) {
            this.renderer.setShowInvisibles(e);
        }, this.getShowInvisibles = function() {
            return this.renderer.getShowInvisibles();
        }, this.setDisplayIndentGuides = function(e) {
            this.renderer.setDisplayIndentGuides(e);
        }, this.getDisplayIndentGuides = function() {
            return this.renderer.getDisplayIndentGuides();
        }, this.setShowPrintMargin = function(e) {
            this.renderer.setShowPrintMargin(e);
        }, this.getShowPrintMargin = function() {
            return this.renderer.getShowPrintMargin();
        }, this.setPrintMarginColumn = function(e) {
            this.renderer.setPrintMarginColumn(e);
        }, this.getPrintMarginColumn = function() {
            return this.renderer.getPrintMarginColumn();
        }, this.setReadOnly = function(e) {
            this.setOption("readOnly", e);
        }, this.getReadOnly = function() {
            return this.getOption("readOnly");
        }, this.setBehavioursEnabled = function(e) {
            this.setOption("behavioursEnabled", e);
        }, this.getBehavioursEnabled = function() {
            return this.getOption("behavioursEnabled");
        }, this.setWrapBehavioursEnabled = function(e) {
            this.setOption("wrapBehavioursEnabled", e);
        }, this.getWrapBehavioursEnabled = function() {
            return this.getOption("wrapBehavioursEnabled");
        }, this.setShowFoldWidgets = function(e) {
            this.setOption("showFoldWidgets", e);
        }, this.getShowFoldWidgets = function() {
            return this.getOption("showFoldWidgets");
        }, this.setFadeFoldWidgets = function(e) {
            this.setOption("fadeFoldWidgets", e);
        }, this.getFadeFoldWidgets = function() {
            return this.getOption("fadeFoldWidgets");
        }, this.remove = function(e) {
            this.selection.isEmpty() && ("left" == e ? this.selection.selectLeft() : this.selection.selectRight());
            var t = this.getSelectionRange();
            if (this.getBehavioursEnabled()) {
                var i = this.session, n = i.getState(t.start.row), s = i.getMode().transformAction(n, "deletion", this, i, t);
                if (0 === t.end.column) {
                    var r = i.getTextRange(t);
                    if ("\n" == r[r.length - 1]) {
                        var o = i.getLine(t.end.row);
                        /^\s+$/.test(o) && (t.end.column = o.length);
                    }
                }
                s && (t = s);
            }
            this.session.remove(t), this.clearSelection();
        }, this.removeWordRight = function() {
            this.selection.isEmpty() && this.selection.selectWordRight(), this.session.remove(this.getSelectionRange()), 
            this.clearSelection();
        }, this.removeWordLeft = function() {
            this.selection.isEmpty() && this.selection.selectWordLeft(), this.session.remove(this.getSelectionRange()), 
            this.clearSelection();
        }, this.removeToLineStart = function() {
            this.selection.isEmpty() && this.selection.selectLineStart(), this.session.remove(this.getSelectionRange()), 
            this.clearSelection();
        }, this.removeToLineEnd = function() {
            this.selection.isEmpty() && this.selection.selectLineEnd();
            var e = this.getSelectionRange();
            e.start.column == e.end.column && e.start.row == e.end.row && (e.end.column = 0, 
            e.end.row++), this.session.remove(e), this.clearSelection();
        }, this.splitLine = function() {
            this.selection.isEmpty() || (this.session.remove(this.getSelectionRange()), this.clearSelection());
            var e = this.getCursorPosition();
            this.insert("\n"), this.moveCursorToPosition(e);
        }, this.transposeLetters = function() {
            if (this.selection.isEmpty()) {
                var e = this.getCursorPosition(), t = e.column;
                if (0 !== t) {
                    var i, n, s = this.session.getLine(e.row);
                    t < s.length ? (i = s.charAt(t) + s.charAt(t - 1), n = new d(e.row, t - 1, e.row, t + 1)) : (i = s.charAt(t - 1) + s.charAt(t - 2), 
                    n = new d(e.row, t - 2, e.row, t)), this.session.replace(n, i);
                }
            }
        }, this.toLowerCase = function() {
            var e = this.getSelectionRange();
            this.selection.isEmpty() && this.selection.selectWord();
            var t = this.getSelectionRange(), i = this.session.getTextRange(t);
            this.session.replace(t, i.toLowerCase()), this.selection.setSelectionRange(e);
        }, this.toUpperCase = function() {
            var e = this.getSelectionRange();
            this.selection.isEmpty() && this.selection.selectWord();
            var t = this.getSelectionRange(), i = this.session.getTextRange(t);
            this.session.replace(t, i.toUpperCase()), this.selection.setSelectionRange(e);
        }, this.indent = function() {
            var e = this.session, t = this.getSelectionRange();
            if (!(t.start.row < t.end.row)) {
                if (t.start.column < t.end.column) {
                    var i = e.getTextRange(t);
                    if (!/^\s+$/.test(i)) {
                        c = this.$getSelectedRows();
                        return void e.indentRows(c.first, c.last, "\t");
                    }
                }
                var n = e.getLine(t.start.row), s = t.start, o = e.getTabSize(), a = e.documentToScreenColumn(s.row, s.column);
                if (this.session.getUseSoftTabs()) var l = o - a % o, h = r.stringRepeat(" ", l); else {
                    for (l = a % o; " " == n[t.start.column] && l; ) t.start.column--, l--;
                    this.selection.setSelectionRange(t), h = "\t";
                }
                return this.insert(h);
            }
            var c = this.$getSelectedRows();
            e.indentRows(c.first, c.last, "\t");
        }, this.blockIndent = function() {
            var e = this.$getSelectedRows();
            this.session.indentRows(e.first, e.last, "\t");
        }, this.blockOutdent = function() {
            var e = this.session.getSelection();
            this.session.outdentRows(e.getRange());
        }, this.sortLines = function() {
            var e = this.$getSelectedRows(), t = this.session, i = [];
            for (s = e.first; s <= e.last; s++) i.push(t.getLine(s));
            i.sort(function(e, t) {
                return e.toLowerCase() < t.toLowerCase() ? -1 : e.toLowerCase() > t.toLowerCase() ? 1 : 0;
            });
            for (var n = new d(0, 0, 0, 0), s = e.first; s <= e.last; s++) {
                var r = t.getLine(s);
                n.start.row = s, n.end.row = s, n.end.column = r.length, t.replace(n, i[s - e.first]);
            }
        }, this.toggleCommentLines = function() {
            var e = this.session.getState(this.getCursorPosition().row), t = this.$getSelectedRows();
            this.session.getMode().toggleCommentLines(e, this.session, t.first, t.last);
        }, this.toggleBlockComment = function() {
            var e = this.getCursorPosition(), t = this.session.getState(e.row), i = this.getSelectionRange();
            this.session.getMode().toggleBlockComment(t, this.session, i, e);
        }, this.getNumberAt = function(e, t) {
            var i = /[\-]?[0-9]+(?:\.[0-9]+)?/g;
            i.lastIndex = 0;
            for (var n = this.session.getLine(e); i.lastIndex < t; ) {
                var s = i.exec(n);
                if (s.index <= t && s.index + s[0].length >= t) return {
                    "value": s[0],
                    "start": s.index,
                    "end": s.index + s[0].length
                };
            }
            return null;
        }, this.modifyNumber = function(e) {
            var t = this.selection.getCursor().row, i = this.selection.getCursor().column, n = new d(t, i - 1, t, i), s = this.session.getTextRange(n);
            if (!isNaN(parseFloat(s)) && isFinite(s)) {
                var r = this.getNumberAt(t, i);
                if (r) {
                    var o = r.value.indexOf(".") >= 0 ? r.start + r.value.indexOf(".") + 1 : r.end, a = r.start + r.value.length - o, l = parseFloat(r.value);
                    l *= Math.pow(10, a), o !== r.end && i < o ? e *= Math.pow(10, r.end - i - 1) : e *= Math.pow(10, r.end - i), 
                    l += e;
                    var h = (l /= Math.pow(10, a)).toFixed(a), c = new d(t, r.start, t, r.end);
                    this.session.replace(c, h), this.moveCursorTo(t, Math.max(r.start + 1, i + h.length - r.value.length));
                }
            }
        }, this.removeLines = function() {
            var e, t = this.$getSelectedRows();
            e = 0 === t.first || t.last + 1 < this.session.getLength() ? new d(t.first, 0, t.last + 1, 0) : new d(t.first - 1, this.session.getLine(t.first - 1).length, t.last, this.session.getLine(t.last).length), 
            this.session.remove(e), this.clearSelection();
        }, this.duplicateSelection = function() {
            var e = this.selection, t = this.session, i = e.getRange(), n = e.isBackwards();
            if (i.isEmpty()) {
                var s = i.start.row;
                t.duplicateLines(s, s);
            } else {
                var r = n ? i.start : i.end, o = t.insert(r, t.getTextRange(i), !1);
                i.start = r, i.end = o, e.setSelectionRange(i, n);
            }
        }, this.moveLinesDown = function() {
            this.$moveLines(1, !1);
        }, this.moveLinesUp = function() {
            this.$moveLines(-1, !1);
        }, this.moveText = function(e, t, i) {
            return this.session.moveText(e, t, i);
        }, this.copyLinesUp = function() {
            this.$moveLines(-1, !0);
        }, this.copyLinesDown = function() {
            this.$moveLines(1, !0);
        }, this.$moveLines = function(e, t) {
            var i, n, s = this.selection;
            if (!s.inMultiSelectMode || this.inVirtualSelectionMode) {
                var r = s.toOrientedRange();
                i = this.$getSelectedRows(r), n = this.session.$moveLines(i.first, i.last, t ? 0 : e), 
                t && -1 == e && (n = 0), r.moveBy(n, 0), s.fromOrientedRange(r);
            } else {
                var o = s.rangeList.ranges;
                s.rangeList.detach(this.session), this.inVirtualSelectionMode = !0;
                for (var a = 0, l = 0, h = o.length, c = 0; c < h; c++) {
                    var u = c;
                    o[c].moveBy(a, 0);
                    for (var p = (i = this.$getSelectedRows(o[c])).first, d = i.last; ++c < h; ) {
                        l && o[c].moveBy(l, 0);
                        var f = this.$getSelectedRows(o[c]);
                        if (t && f.first != d) break;
                        if (!t && f.first > d + 1) break;
                        d = f.last;
                    }
                    for (c--, a = this.session.$moveLines(p, d, t ? 0 : e), t && -1 == e && (u = c + 1); u <= c; ) o[u].moveBy(a, 0), 
                    u++;
                    t || (a = 0), l += a;
                }
                s.fromOrientedRange(s.ranges[0]), s.rangeList.attach(this.session), this.inVirtualSelectionMode = !1;
            }
        }, this.$getSelectedRows = function(e) {
            return e = (e || this.getSelectionRange()).collapseRows(), {
                "first": this.session.getRowFoldStart(e.start.row),
                "last": this.session.getRowFoldEnd(e.end.row)
            };
        }, this.onCompositionStart = function(e) {
            this.renderer.showComposition(this.getCursorPosition());
        }, this.onCompositionUpdate = function(e) {
            this.renderer.setCompositionText(e);
        }, this.onCompositionEnd = function() {
            this.renderer.hideComposition();
        }, this.getFirstVisibleRow = function() {
            return this.renderer.getFirstVisibleRow();
        }, this.getLastVisibleRow = function() {
            return this.renderer.getLastVisibleRow();
        }, this.isRowVisible = function(e) {
            return e >= this.getFirstVisibleRow() && e <= this.getLastVisibleRow();
        }, this.isRowFullyVisible = function(e) {
            return e >= this.renderer.getFirstFullyVisibleRow() && e <= this.renderer.getLastFullyVisibleRow();
        }, this.$getVisibleRowCount = function() {
            return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;
        }, this.$moveByPage = function(e, t) {
            var i = this.renderer, n = this.renderer.layerConfig, s = e * Math.floor(n.height / n.lineHeight);
            this.$blockScrolling++, !0 === t ? this.selection.$moveSelection(function() {
                this.moveCursorBy(s, 0);
            }) : !1 === t && (this.selection.moveCursorBy(s, 0), this.selection.clearSelection()), 
            this.$blockScrolling--;
            var r = i.scrollTop;
            i.scrollBy(0, s * n.lineHeight), null != t && i.scrollCursorIntoView(null, .5), 
            i.animateScrolling(r);
        }, this.selectPageDown = function() {
            this.$moveByPage(1, !0);
        }, this.selectPageUp = function() {
            this.$moveByPage(-1, !0);
        }, this.gotoPageDown = function() {
            this.$moveByPage(1, !1);
        }, this.gotoPageUp = function() {
            this.$moveByPage(-1, !1);
        }, this.scrollPageDown = function() {
            this.$moveByPage(1);
        }, this.scrollPageUp = function() {
            this.$moveByPage(-1);
        }, this.scrollToRow = function(e) {
            this.renderer.scrollToRow(e);
        }, this.scrollToLine = function(e, t, i, n) {
            this.renderer.scrollToLine(e, t, i, n);
        }, this.centerSelection = function() {
            var e = this.getSelectionRange(), t = {
                "row": Math.floor(e.start.row + (e.end.row - e.start.row) / 2),
                "column": Math.floor(e.start.column + (e.end.column - e.start.column) / 2)
            };
            this.renderer.alignCursor(t, .5);
        }, this.getCursorPosition = function() {
            return this.selection.getCursor();
        }, this.getCursorPositionScreen = function() {
            return this.session.documentToScreenPosition(this.getCursorPosition());
        }, this.getSelectionRange = function() {
            return this.selection.getRange();
        }, this.selectAll = function() {
            this.$blockScrolling += 1, this.selection.selectAll(), this.$blockScrolling -= 1;
        }, this.clearSelection = function() {
            this.selection.clearSelection();
        }, this.moveCursorTo = function(e, t) {
            this.selection.moveCursorTo(e, t);
        }, this.moveCursorToPosition = function(e) {
            this.selection.moveCursorToPosition(e);
        }, this.jumpToMatching = function(e, t) {
            var i = this.getCursorPosition(), n = new v(this.session, i.row, i.column), s = n.getCurrentToken(), r = s || n.stepForward();
            if (r) {
                var o, a, l = !1, h = {}, c = i.column - r.start, u = {
                    ")": "(",
                    "(": "(",
                    "]": "[",
                    "[": "[",
                    "{": "{",
                    "}": "{"
                };
                do {
                    if (r.value.match(/[{}()\[\]]/g)) {
                        for (;c < r.value.length && !l; c++) if (u[r.value[c]]) switch (a = u[r.value[c]] + "." + r.type.replace("rparen", "lparen"), 
                        isNaN(h[a]) && (h[a] = 0), r.value[c]) {
                          case "(":
                          case "[":
                          case "{":
                            h[a]++;
                            break;

                          case ")":
                          case "]":
                          case "}":
                            h[a]--, -1 === h[a] && (o = "bracket", l = !0);
                        }
                    } else r && -1 !== r.type.indexOf("tag-name") && (isNaN(h[r.value]) && (h[r.value] = 0), 
                    "<" === s.value ? h[r.value]++ : "</" === s.value && h[r.value]--, -1 === h[r.value] && (o = "tag", 
                    l = !0));
                    l || (s = r, r = n.stepForward(), c = 0);
                } while (r && !l);
                if (o) {
                    var p, f;
                    if ("bracket" === o) (p = this.session.getBracketRange(i)) || (f = (p = new d(n.getCurrentTokenRow(), n.getCurrentTokenColumn() + c - 1, n.getCurrentTokenRow(), n.getCurrentTokenColumn() + c - 1)).start, 
                    (t || f.row === i.row && Math.abs(f.column - i.column) < 2) && (p = this.session.getBracketRange(f))); else if ("tag" === o) {
                        if (!r || -1 === r.type.indexOf("tag-name")) return;
                        var m = r.value;
                        if (0 === (p = new d(n.getCurrentTokenRow(), n.getCurrentTokenColumn() - 2, n.getCurrentTokenRow(), n.getCurrentTokenColumn() - 2)).compare(i.row, i.column)) {
                            l = !1;
                            do {
                                r = s, (s = n.stepBackward()) && (-1 !== s.type.indexOf("tag-close") && p.setEnd(n.getCurrentTokenRow(), n.getCurrentTokenColumn() + 1), 
                                r.value === m && -1 !== r.type.indexOf("tag-name") && ("<" === s.value ? h[m]++ : "</" === s.value && h[m]--, 
                                0 === h[m] && (l = !0)));
                            } while (s && !l);
                        }
                        r && r.type.indexOf("tag-name") && (f = p.start).row == i.row && Math.abs(f.column - i.column) < 2 && (f = p.end);
                    }
                    (f = p && p.cursor || f) && (e ? p && t ? this.selection.setRange(p) : p && p.isEqual(this.getSelectionRange()) ? this.clearSelection() : this.selection.selectTo(f.row, f.column) : this.selection.moveTo(f.row, f.column));
                }
            }
        }, this.gotoLine = function(e, t, i) {
            this.selection.clearSelection(), this.session.unfold({
                "row": e - 1,
                "column": t || 0
            }), this.$blockScrolling += 1, this.exitMultiSelectMode && this.exitMultiSelectMode(), 
            this.moveCursorTo(e - 1, t || 0), this.$blockScrolling -= 1, this.isRowFullyVisible(e - 1) || this.scrollToLine(e - 1, !0, i);
        }, this.navigateTo = function(e, t) {
            this.selection.moveTo(e, t);
        }, this.navigateUp = function(e) {
            if (this.selection.isMultiLine() && !this.selection.isBackwards()) {
                var t = this.selection.anchor.getPosition();
                return this.moveCursorToPosition(t);
            }
            this.selection.clearSelection(), this.selection.moveCursorBy(-e || -1, 0);
        }, this.navigateDown = function(e) {
            if (this.selection.isMultiLine() && this.selection.isBackwards()) {
                var t = this.selection.anchor.getPosition();
                return this.moveCursorToPosition(t);
            }
            this.selection.clearSelection(), this.selection.moveCursorBy(e || 1, 0);
        }, this.navigateLeft = function(e) {
            if (this.selection.isEmpty()) for (e = e || 1; e--; ) this.selection.moveCursorLeft(); else {
                var t = this.getSelectionRange().start;
                this.moveCursorToPosition(t);
            }
            this.clearSelection();
        }, this.navigateRight = function(e) {
            if (this.selection.isEmpty()) for (e = e || 1; e--; ) this.selection.moveCursorRight(); else {
                var t = this.getSelectionRange().end;
                this.moveCursorToPosition(t);
            }
            this.clearSelection();
        }, this.navigateLineStart = function() {
            this.selection.moveCursorLineStart(), this.clearSelection();
        }, this.navigateLineEnd = function() {
            this.selection.moveCursorLineEnd(), this.clearSelection();
        }, this.navigateFileEnd = function() {
            this.selection.moveCursorFileEnd(), this.clearSelection();
        }, this.navigateFileStart = function() {
            this.selection.moveCursorFileStart(), this.clearSelection();
        }, this.navigateWordRight = function() {
            this.selection.moveCursorWordRight(), this.clearSelection();
        }, this.navigateWordLeft = function() {
            this.selection.moveCursorWordLeft(), this.clearSelection();
        }, this.replace = function(e, t) {
            t && this.$search.set(t);
            var i = this.$search.find(this.session), n = 0;
            return i ? (this.$tryReplace(i, e) && (n = 1), null !== i && (this.selection.setSelectionRange(i), 
            this.renderer.scrollSelectionIntoView(i.start, i.end)), n) : n;
        }, this.replaceAll = function(e, t) {
            t && this.$search.set(t);
            var i = this.$search.findAll(this.session), n = 0;
            if (!i.length) return n;
            this.$blockScrolling += 1;
            var s = this.getSelectionRange();
            this.selection.moveTo(0, 0);
            for (var r = i.length - 1; r >= 0; --r) this.$tryReplace(i[r], e) && n++;
            return this.selection.setSelectionRange(s), this.$blockScrolling -= 1, n;
        }, this.$tryReplace = function(e, t) {
            var i = this.session.getTextRange(e);
            return null !== (t = this.$search.replace(i, t)) ? (e.end = this.session.replace(e, t), 
            e) : null;
        }, this.getLastSearchOptions = function() {
            return this.$search.getOptions();
        }, this.find = function(e, t, i) {
            t || (t = {}), "string" == typeof e || e instanceof RegExp ? t.needle = e : "object" == typeof e && n.mixin(t, e);
            var s = this.selection.getRange();
            null == t.needle && ((e = this.session.getTextRange(s) || this.$search.$options.needle) || (s = this.session.getWordRange(s.start.row, s.start.column), 
            e = this.session.getTextRange(s)), this.$search.set({
                "needle": e
            })), this.$search.set(t), t.start || this.$search.set({
                "start": s
            });
            var r = this.$search.find(this.session);
            return t.preventScroll ? r : r ? (this.revealRange(r, i), r) : (t.backwards ? s.start = s.end : s.end = s.start, 
            void this.selection.setRange(s));
        }, this.findNext = function(e, t) {
            this.find({
                "skipCurrent": !0,
                "backwards": !1
            }, e, t);
        }, this.findPrevious = function(e, t) {
            this.find(e, {
                "skipCurrent": !0,
                "backwards": !0
            }, t);
        }, this.revealRange = function(e, t) {
            this.$blockScrolling += 1, this.session.unfold(e), this.selection.setSelectionRange(e), 
            this.$blockScrolling -= 1;
            var i = this.renderer.scrollTop;
            this.renderer.scrollSelectionIntoView(e.start, e.end, .5), !1 !== t && this.renderer.animateScrolling(i);
        }, this.undo = function() {
            this.$blockScrolling++, this.session.getUndoManager().undo(), this.$blockScrolling--, 
            this.renderer.scrollCursorIntoView(null, .5);
        }, this.redo = function() {
            this.$blockScrolling++, this.session.getUndoManager().redo(), this.$blockScrolling--, 
            this.renderer.scrollCursorIntoView(null, .5);
        }, this.destroy = function() {
            this.renderer.destroy(), this._signal("destroy", this), this.session && this.session.destroy();
        }, this.setAutoScrollEditorIntoView = function(e) {
            if (e) {
                var t, i = this, n = !1;
                this.$scrollAnchor || (this.$scrollAnchor = document.createElement("div"));
                var s = this.$scrollAnchor;
                s.style.cssText = "position:absolute", this.container.insertBefore(s, this.container.firstChild);
                var r = this.on("changeSelection", function() {
                    n = !0;
                }), o = this.renderer.on("beforeRender", function() {
                    n && (t = i.renderer.container.getBoundingClientRect());
                }), a = this.renderer.on("afterRender", function() {
                    if (n && t && (i.isFocused() || i.searchBox && i.searchBox.isFocused())) {
                        var e = i.renderer, r = e.$cursorLayer.$pixelPos, o = e.layerConfig, a = r.top - o.offset;
                        null != (n = r.top >= 0 && a + t.top < 0 || !(r.top < o.height && r.top + t.top + o.lineHeight > window.innerHeight) && null) && (s.style.top = a + "px", 
                        s.style.left = r.left + "px", s.style.height = o.lineHeight + "px", s.scrollIntoView(n)), 
                        n = t = null;
                    }
                });
                this.setAutoScrollEditorIntoView = function(e) {
                    e || (delete this.setAutoScrollEditorIntoView, this.removeEventListener("changeSelection", r), 
                    this.renderer.removeEventListener("afterRender", a), this.renderer.removeEventListener("beforeRender", o));
                };
            }
        }, this.$resetCursorStyle = function() {
            var e = this.$cursorStyle || "ace", t = this.renderer.$cursorLayer;
            t && (t.setSmoothBlinking(/smooth/.test(e)), t.isBlinking = !this.$readOnly && "wide" != e, 
            s.setCssClass(t.element, "ace_slim-cursors", /slim/.test(e)));
        };
    }).call(L.prototype), y.defineOptions(L.prototype, "editor", {
        "selectionStyle": {
            "set": function(e) {
                this.onSelectionChange(), this._signal("changeSelectionStyle", {
                    "data": e
                });
            },
            "initialValue": "line"
        },
        "highlightActiveLine": {
            "set": function() {
                this.$updateHighlightActiveLine();
            },
            "initialValue": !0
        },
        "highlightSelectedWord": {
            "set": function(e) {
                this.$onSelectionChange();
            },
            "initialValue": !0
        },
        "readOnly": {
            "set": function(e) {
                this.$resetCursorStyle();
            },
            "initialValue": !1
        },
        "cursorStyle": {
            "set": function(e) {
                this.$resetCursorStyle();
            },
            "values": [ "ace", "slim", "smooth", "wide" ],
            "initialValue": "ace"
        },
        "mergeUndoDeltas": {
            "values": [ !1, !0, "always" ],
            "initialValue": !0
        },
        "behavioursEnabled": {
            "initialValue": !0
        },
        "wrapBehavioursEnabled": {
            "initialValue": !0
        },
        "autoScrollEditorIntoView": {
            "set": function(e) {
                this.setAutoScrollEditorIntoView(e);
            }
        },
        "hScrollBarAlwaysVisible": "renderer",
        "vScrollBarAlwaysVisible": "renderer",
        "highlightGutterLine": "renderer",
        "animatedScroll": "renderer",
        "showInvisibles": "renderer",
        "showPrintMargin": "renderer",
        "printMarginColumn": "renderer",
        "printMargin": "renderer",
        "fadeFoldWidgets": "renderer",
        "showFoldWidgets": "renderer",
        "showLineNumbers": "renderer",
        "showGutter": "renderer",
        "displayIndentGuides": "renderer",
        "fontSize": "renderer",
        "fontFamily": "renderer",
        "maxLines": "renderer",
        "minLines": "renderer",
        "scrollPastEnd": "renderer",
        "fixedWidthGutter": "renderer",
        "theme": "renderer",
        "scrollSpeed": "$mouseHandler",
        "dragDelay": "$mouseHandler",
        "dragEnabled": "$mouseHandler",
        "focusTimout": "$mouseHandler",
        "tooltipFollowsMouse": "$mouseHandler",
        "firstLineNumber": "session",
        "overwrite": "session",
        "newLineMode": "session",
        "useWorker": "session",
        "useSoftTabs": "session",
        "tabSize": "session",
        "wrap": "session",
        "foldStyle": "session",
        "mode": "session"
    }), t.Editor = L;
}), ace.define("ace/undomanager", [ "require", "exports", "module" ], function(e, t, i) {
    "use strict";
    var n = function() {
        this.reset();
    };
    (function() {
        this.execute = function(e) {
            var t = e.args[0];
            this.$doc = e.args[1], e.merge && this.hasUndo() && (this.dirtyCounter--, t = this.$undoStack.pop().concat(t)), 
            this.$undoStack.push(t), this.$redoStack = [], this.dirtyCounter < 0 && (this.dirtyCounter = NaN), 
            this.dirtyCounter++;
        }, this.undo = function(e) {
            var t = this.$undoStack.pop(), i = null;
            return t && (i = this.$doc.undoChanges(t, e), this.$redoStack.push(t), this.dirtyCounter--), 
            i;
        }, this.redo = function(e) {
            var t = this.$redoStack.pop(), i = null;
            return t && (i = this.$doc.redoChanges(t, e), this.$undoStack.push(t), this.dirtyCounter++), 
            i;
        }, this.reset = function() {
            this.$undoStack = [], this.$redoStack = [], this.dirtyCounter = 0;
        }, this.hasUndo = function() {
            return this.$undoStack.length > 0;
        }, this.hasRedo = function() {
            return this.$redoStack.length > 0;
        }, this.markClean = function() {
            this.dirtyCounter = 0;
        }, this.isClean = function() {
            return 0 === this.dirtyCounter;
        };
    }).call(n.prototype), t.UndoManager = n;
}), ace.define("ace/layer/gutter", [ "require", "exports", "module", "ace/lib/dom", "ace/lib/oop", "ace/lib/lang", "ace/lib/event_emitter" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/dom"), s = e("../lib/oop"), r = e("../lib/lang"), o = e("../lib/event_emitter").EventEmitter, a = function(e) {
        this.element = n.createElement("div"), this.element.className = "ace_layer ace_gutter-layer", 
        e.appendChild(this.element), this.setShowFoldWidgets(this.$showFoldWidgets), this.gutterWidth = 0, 
        this.$annotations = [], this.$updateAnnotations = this.$updateAnnotations.bind(this), 
        this.$cells = [];
    };
    (function() {
        s.implement(this, o), this.setSession = function(e) {
            this.session && this.session.removeEventListener("change", this.$updateAnnotations), 
            this.session = e, e && e.on("change", this.$updateAnnotations);
        }, this.addGutterDecoration = function(e, t) {
            window.console && console.warn && console.warn("deprecated use session.addGutterDecoration"), 
            this.session.addGutterDecoration(e, t);
        }, this.removeGutterDecoration = function(e, t) {
            window.console && console.warn && console.warn("deprecated use session.removeGutterDecoration"), 
            this.session.removeGutterDecoration(e, t);
        }, this.setAnnotations = function(e) {
            this.$annotations = [];
            for (var t = 0; t < e.length; t++) {
                var i = e[t], n = i.row, s = this.$annotations[n];
                s || (s = this.$annotations[n] = {
                    "text": []
                });
                var o = i.text;
                o = o ? r.escapeHTML(o) : i.html || "", -1 === s.text.indexOf(o) && s.text.push(o);
                var a = i.type;
                "error" == a ? s.className = " ace_error" : "warning" == a && " ace_error" != s.className ? s.className = " ace_warning" : "info" != a || s.className || (s.className = " ace_info");
            }
        }, this.$updateAnnotations = function(e) {
            if (this.$annotations.length) {
                var t = e.data, i = t.range, n = i.start.row, s = i.end.row - n;
                if (0 === s) ; else if ("removeText" == t.action || "removeLines" == t.action) this.$annotations.splice(n, s + 1, null); else {
                    var r = new Array(s + 1);
                    r.unshift(n, 1), this.$annotations.splice.apply(this.$annotations, r);
                }
            }
        }, this.update = function(e) {
            for (var t = this.session, i = e.firstRow, s = Math.min(e.lastRow + e.gutterOffset, t.getLength() - 1), r = t.getNextFoldLine(i), o = r ? r.start.row : 1 / 0, a = this.$showFoldWidgets && t.foldWidgets, l = t.$breakpoints, h = t.$decorations, c = t.$firstLineNumber, u = 0, p = t.gutterRenderer || this.$renderer, d = null, f = -1, m = i; ;) {
                if (m > o && (m = r.end.row + 1, o = (r = t.getNextFoldLine(m, r)) ? r.start.row : 1 / 0), 
                m > s) {
                    for (;this.$cells.length > f + 1; ) d = this.$cells.pop(), this.element.removeChild(d.element);
                    break;
                }
                (d = this.$cells[++f]) || ((d = {
                    "element": null,
                    "textNode": null,
                    "foldWidget": null
                }).element = n.createElement("div"), d.textNode = document.createTextNode(""), d.element.appendChild(d.textNode), 
                this.element.appendChild(d.element), this.$cells[f] = d);
                y = "ace_gutter-cell ";
                if (l[m] && (y += l[m]), h[m] && (y += h[m]), this.$annotations[m] && (y += this.$annotations[m].className), 
                d.element.className != y && (d.element.className = y), (v = t.getRowLength(m) * e.lineHeight + "px") != d.element.style.height && (d.element.style.height = v), 
                a) {
                    var g = a[m];
                    null == g && (g = a[m] = t.getFoldWidget(m));
                }
                if (g) {
                    d.foldWidget || (d.foldWidget = n.createElement("span"), d.element.appendChild(d.foldWidget));
                    var y = "ace_fold-widget ace_" + g;
                    "start" == g && m == o && m < r.end.row ? y += " ace_closed" : y += " ace_open", 
                    d.foldWidget.className != y && (d.foldWidget.className = y);
                    var v = e.lineHeight + "px";
                    d.foldWidget.style.height != v && (d.foldWidget.style.height = v);
                } else d.foldWidget && (d.element.removeChild(d.foldWidget), d.foldWidget = null);
                var L = u = p ? p.getText(t, m) : m + c;
                L != d.textNode.data && (d.textNode.data = L), m++;
            }
            this.element.style.height = e.minHeight + "px", (this.$fixedWidth || t.$useWrapMode) && (u = t.getLength() + c);
            var w = p ? p.getWidth(t, u, e) : u.toString().length * e.characterWidth, b = this.$padding || this.$computePadding();
            (w += b.left + b.right) === this.gutterWidth || isNaN(w) || (this.gutterWidth = w, 
            this.element.style.width = Math.ceil(this.gutterWidth) + "px", this._emit("changeGutterWidth", w));
        }, this.$fixedWidth = !1, this.$showLineNumbers = !0, this.$renderer = "", this.setShowLineNumbers = function(e) {
            this.$renderer = !e && {
                "getWidth": function() {
                    return "";
                },
                "getText": function() {
                    return "";
                }
            };
        }, this.getShowLineNumbers = function() {
            return this.$showLineNumbers;
        }, this.$showFoldWidgets = !0, this.setShowFoldWidgets = function(e) {
            e ? n.addCssClass(this.element, "ace_folding-enabled") : n.removeCssClass(this.element, "ace_folding-enabled"), 
            this.$showFoldWidgets = e, this.$padding = null;
        }, this.getShowFoldWidgets = function() {
            return this.$showFoldWidgets;
        }, this.$computePadding = function() {
            if (!this.element.firstChild) return {
                "left": 0,
                "right": 0
            };
            var e = n.computedStyle(this.element.firstChild);
            return this.$padding = {}, this.$padding.left = parseInt(e.paddingLeft) + 1 || 0, 
            this.$padding.right = parseInt(e.paddingRight) || 0, this.$padding;
        }, this.getRegion = function(e) {
            var t = this.$padding || this.$computePadding(), i = this.element.getBoundingClientRect();
            return e.x < t.left + i.left ? "markers" : this.$showFoldWidgets && e.x > i.right - t.right ? "foldWidgets" : void 0;
        };
    }).call(a.prototype), t.Gutter = a;
}), ace.define("ace/layer/marker", [ "require", "exports", "module", "ace/range", "ace/lib/dom" ], function(e, t, i) {
    "use strict";
    var n = e("../range").Range, s = e("../lib/dom"), r = function(e) {
        this.element = s.createElement("div"), this.element.className = "ace_layer ace_marker-layer", 
        e.appendChild(this.element);
    };
    (function() {
        this.$padding = 0, this.setPadding = function(e) {
            this.$padding = e;
        }, this.setSession = function(e) {
            this.session = e;
        }, this.setMarkers = function(e) {
            this.markers = e;
        }, this.update = function(e) {
            if (e = e || this.config) {
                this.config = e;
                var t = [];
                for (var i in this.markers) {
                    var n = this.markers[i];
                    if (n.range) {
                        var s = n.range.clipRows(e.firstRow, e.lastRow);
                        if (!s.isEmpty()) if (s = s.toScreenRange(this.session), n.renderer) {
                            var r = this.$getTop(s.start.row, e), o = this.$padding + s.start.column * e.characterWidth;
                            n.renderer(t, s, o, r, e);
                        } else "fullLine" == n.type ? this.drawFullLineMarker(t, s, n.clazz, e) : "screenLine" == n.type ? this.drawScreenLineMarker(t, s, n.clazz, e) : s.isMultiLine() ? "text" == n.type ? this.drawTextMarker(t, s, n.clazz, e) : this.drawMultiLineMarker(t, s, n.clazz, e) : this.drawSingleLineMarker(t, s, n.clazz + " ace_start", e);
                    } else n.update(t, this, this.session, e);
                }
                this.element.innerHTML = t.join("");
            }
        }, this.$getTop = function(e, t) {
            return (e - t.firstRowScreen) * t.lineHeight;
        }, this.drawTextMarker = function(e, t, i, s, r) {
            var o = t.start.row, a = new n(o, t.start.column, o, this.session.getScreenLastRowColumn(o));
            for (this.drawSingleLineMarker(e, a, i + " ace_start", s, 1, r), o = t.end.row, 
            a = new n(o, 0, o, t.end.column), this.drawSingleLineMarker(e, a, i, s, 0, r), o = t.start.row + 1; o < t.end.row; o++) a.start.row = o, 
            a.end.row = o, a.end.column = this.session.getScreenLastRowColumn(o), this.drawSingleLineMarker(e, a, i, s, 1, r);
        }, this.drawMultiLineMarker = function(e, t, i, n, s) {
            var r = this.$padding, o = n.lineHeight, a = this.$getTop(t.start.row, n), l = r + t.start.column * n.characterWidth;
            s = s || "", e.push("<div class='", i, " ace_start' style='", "height:", o, "px;", "right:0;", "top:", a, "px;", "left:", l, "px;", s, "'></div>"), 
            a = this.$getTop(t.end.row, n);
            var h = t.end.column * n.characterWidth;
            e.push("<div class='", i, "' style='", "height:", o, "px;", "width:", h, "px;", "top:", a, "px;", "left:", r, "px;", s, "'></div>"), 
            (o = (t.end.row - t.start.row - 1) * n.lineHeight) < 0 || (a = this.$getTop(t.start.row + 1, n), 
            e.push("<div class='", i, "' style='", "height:", o, "px;", "right:0;", "top:", a, "px;", "left:", r, "px;", s, "'></div>"));
        }, this.drawSingleLineMarker = function(e, t, i, n, s, r) {
            var o = n.lineHeight, a = (t.end.column + (s || 0) - t.start.column) * n.characterWidth, l = this.$getTop(t.start.row, n), h = this.$padding + t.start.column * n.characterWidth;
            e.push("<div class='", i, "' style='", "height:", o, "px;", "width:", a, "px;", "top:", l, "px;", "left:", h, "px;", r || "", "'></div>");
        }, this.drawFullLineMarker = function(e, t, i, n, s) {
            var r = this.$getTop(t.start.row, n), o = n.lineHeight;
            t.start.row != t.end.row && (o += this.$getTop(t.end.row, n) - r), e.push("<div class='", i, "' style='", "height:", o, "px;", "top:", r, "px;", "left:0;right:0;", s || "", "'></div>");
        }, this.drawScreenLineMarker = function(e, t, i, n, s) {
            var r = this.$getTop(t.start.row, n), o = n.lineHeight;
            e.push("<div class='", i, "' style='", "height:", o, "px;", "top:", r, "px;", "left:0;right:0;", s || "", "'></div>");
        };
    }).call(r.prototype), t.Marker = r;
}), ace.define("ace/layer/text", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/dom", "ace/lib/lang", "ace/lib/useragent", "ace/lib/event_emitter" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/oop"), s = e("../lib/dom"), r = e("../lib/lang"), o = (e("../lib/useragent"), 
    e("../lib/event_emitter").EventEmitter), a = function(e) {
        this.element = s.createElement("div"), this.element.className = "ace_layer ace_text-layer", 
        e.appendChild(this.element), this.$updateEolChar = this.$updateEolChar.bind(this);
    };
    (function() {
        n.implement(this, o), this.EOF_CHAR = "¶", this.EOL_CHAR_LF = "¬", this.EOL_CHAR_CRLF = "¤", 
        this.EOL_CHAR = this.EOL_CHAR_LF, this.TAB_CHAR = "→", this.SPACE_CHAR = "·", this.$padding = 0, 
        this.$updateEolChar = function() {
            var e = "\n" == this.session.doc.getNewLineCharacter() ? this.EOL_CHAR_LF : this.EOL_CHAR_CRLF;
            if (this.EOL_CHAR != e) return this.EOL_CHAR = e, !0;
        }, this.setPadding = function(e) {
            this.$padding = e, this.element.style.padding = "0 " + e + "px";
        }, this.getLineHeight = function() {
            return this.$fontMetrics.$characterSize.height || 0;
        }, this.getCharacterWidth = function() {
            return this.$fontMetrics.$characterSize.width || 0;
        }, this.$setFontMetrics = function(e) {
            this.$fontMetrics = e, this.$fontMetrics.on("changeCharacterSize", function(e) {
                this._signal("changeCharacterSize", e);
            }.bind(this)), this.$pollSizeChanges();
        }, this.checkForSizeChanges = function() {
            this.$fontMetrics.checkForSizeChanges();
        }, this.$pollSizeChanges = function() {
            return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();
        }, this.setSession = function(e) {
            this.session = e, e && this.$computeTabString();
        }, this.showInvisibles = !1, this.setShowInvisibles = function(e) {
            return this.showInvisibles != e && (this.showInvisibles = e, this.$computeTabString(), 
            !0);
        }, this.displayIndentGuides = !0, this.setDisplayIndentGuides = function(e) {
            return this.displayIndentGuides != e && (this.displayIndentGuides = e, this.$computeTabString(), 
            !0);
        }, this.$tabStrings = [], this.onChangeTabSize = this.$computeTabString = function() {
            var e = this.session.getTabSize();
            this.tabSize = e;
            for (var t = this.$tabStrings = [ 0 ], i = 1; i < e + 1; i++) this.showInvisibles ? t.push("<span class='ace_invisible ace_invisible_tab'>" + this.TAB_CHAR + r.stringRepeat(" ", i - 1) + "</span>") : t.push(r.stringRepeat(" ", i));
            if (this.displayIndentGuides) {
                this.$indentGuideRe = /\s\S| \t|\t |\s$/;
                var n = "ace_indent-guide", s = "", o = "";
                if (this.showInvisibles) {
                    n += " ace_invisible", s = " ace_invisible_space", o = " ace_invisible_tab";
                    var a = r.stringRepeat(this.SPACE_CHAR, this.tabSize), l = this.TAB_CHAR + r.stringRepeat(" ", this.tabSize - 1);
                } else l = a = r.stringRepeat(" ", this.tabSize);
                this.$tabStrings[" "] = "<span class='" + n + s + "'>" + a + "</span>", this.$tabStrings["\t"] = "<span class='" + n + o + "'>" + l + "</span>";
            }
        }, this.updateLines = function(e, t, i) {
            this.config.lastRow == e.lastRow && this.config.firstRow == e.firstRow || this.scrollLines(e), 
            this.config = e;
            for (var n = Math.max(t, e.firstRow), s = Math.min(i, e.lastRow), r = this.element.childNodes, o = 0, a = e.firstRow; a < n; a++) {
                if (l = this.session.getFoldLine(a)) {
                    if (l.containsRow(n)) {
                        n = l.start.row;
                        break;
                    }
                    a = l.end.row;
                }
                o++;
            }
            for (var a = n, l = this.session.getNextFoldLine(a), h = l ? l.start.row : 1 / 0; ;) {
                if (a > h && (a = l.end.row + 1, h = (l = this.session.getNextFoldLine(a, l)) ? l.start.row : 1 / 0), 
                a > s) break;
                var c = r[o++];
                if (c) {
                    var u = [];
                    this.$renderLine(u, a, !this.$useLineGroups(), a == h && l), c.style.height = e.lineHeight * this.session.getRowLength(a) + "px", 
                    c.innerHTML = u.join("");
                }
                a++;
            }
        }, this.scrollLines = function(e) {
            var t = this.config;
            if (this.config = e, !t || t.lastRow < e.firstRow) return this.update(e);
            if (e.lastRow < t.firstRow) return this.update(e);
            var i = this.element;
            if (t.firstRow < e.firstRow) for (n = this.session.getFoldedRowCount(t.firstRow, e.firstRow - 1); n > 0; n--) i.removeChild(i.firstChild);
            if (t.lastRow > e.lastRow) for (var n = this.session.getFoldedRowCount(e.lastRow + 1, t.lastRow); n > 0; n--) i.removeChild(i.lastChild);
            if (e.firstRow < t.firstRow) {
                s = this.$renderLinesFragment(e, e.firstRow, t.firstRow - 1);
                i.firstChild ? i.insertBefore(s, i.firstChild) : i.appendChild(s);
            }
            if (e.lastRow > t.lastRow) {
                var s = this.$renderLinesFragment(e, t.lastRow + 1, e.lastRow);
                i.appendChild(s);
            }
        }, this.$renderLinesFragment = function(e, t, i) {
            for (var n = this.element.ownerDocument.createDocumentFragment(), r = t, o = this.session.getNextFoldLine(r), a = o ? o.start.row : 1 / 0; ;) {
                if (r > a && (r = o.end.row + 1, a = (o = this.session.getNextFoldLine(r, o)) ? o.start.row : 1 / 0), 
                r > i) break;
                var l = s.createElement("div"), h = [];
                if (this.$renderLine(h, r, !1, r == a && o), l.innerHTML = h.join(""), this.$useLineGroups()) l.className = "ace_line_group", 
                n.appendChild(l), l.style.height = e.lineHeight * this.session.getRowLength(r) + "px"; else for (;l.firstChild; ) n.appendChild(l.firstChild);
                r++;
            }
            return n;
        }, this.update = function(e) {
            this.config = e;
            for (var t = [], i = e.firstRow, n = e.lastRow, s = i, r = this.session.getNextFoldLine(s), o = r ? r.start.row : 1 / 0; ;) {
                if (s > o && (s = r.end.row + 1, o = (r = this.session.getNextFoldLine(s, r)) ? r.start.row : 1 / 0), 
                s > n) break;
                this.$useLineGroups() && t.push("<div class='ace_line_group' style='height:", e.lineHeight * this.session.getRowLength(s), "px'>"), 
                this.$renderLine(t, s, !1, s == o && r), this.$useLineGroups() && t.push("</div>"), 
                s++;
            }
            this.element.innerHTML = t.join("");
        }, this.$textToken = {
            "text": !0,
            "rparen": !0,
            "lparen": !0
        }, this.$renderToken = function(e, t, i, n) {
            var s = this, o = /\t|&|<|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g, a = n.replace(o, function(e, i, n, o, a) {
                if (i) return s.showInvisibles ? "<span class='ace_invisible ace_invisible_space'>" + r.stringRepeat(s.SPACE_CHAR, e.length) + "</span>" : e;
                if ("&" == e) return "&#38;";
                if ("<" == e) return "&#60;";
                if ("\t" == e) {
                    var l = s.session.getScreenTabSize(t + o);
                    return t += l - 1, s.$tabStrings[l];
                }
                if ("　" == e) {
                    var h = s.showInvisibles ? "ace_cjk ace_invisible ace_invisible_space" : "ace_cjk", c = s.showInvisibles ? s.SPACE_CHAR : "";
                    return t += 1, "<span class='" + h + "' style='width:" + 2 * s.config.characterWidth + "px'>" + c + "</span>";
                }
                return n ? "<span class='ace_invisible ace_invisible_space ace_invalid'>" + s.SPACE_CHAR + "</span>" : (t += 1, 
                "<span class='ace_cjk' style='width:" + 2 * s.config.characterWidth + "px'>" + e + "</span>");
            });
            if (this.$textToken[i.type]) e.push(a); else {
                var l = "ace_" + i.type.replace(/\./g, " ace_"), h = "";
                "fold" == i.type && (h = " style='width:" + i.value.length * this.config.characterWidth + "px;' "), 
                e.push("<span class='", l, "'", h, ">", a, "</span>");
            }
            return t + n.length;
        }, this.renderIndentGuide = function(e, t, i) {
            var n = t.search(this.$indentGuideRe);
            return n <= 0 || n >= i ? t : " " == t[0] ? (n -= n % this.tabSize, e.push(r.stringRepeat(this.$tabStrings[" "], n / this.tabSize)), 
            t.substr(n)) : "\t" == t[0] ? (e.push(r.stringRepeat(this.$tabStrings["\t"], n)), 
            t.substr(n)) : t;
        }, this.$renderWrappedLine = function(e, t, i, n) {
            for (var s = 0, r = 0, o = i[0], a = 0, l = 0; l < t.length; l++) {
                var h = t[l], c = h.value;
                if (0 == l && this.displayIndentGuides) {
                    if (s = c.length, !(c = this.renderIndentGuide(e, c, o))) continue;
                    s -= c.length;
                }
                if (s + c.length < o) a = this.$renderToken(e, a, h, c), s += c.length; else {
                    for (;s + c.length >= o; ) a = this.$renderToken(e, a, h, c.substring(0, o - s)), 
                    c = c.substring(o - s), s = o, n || e.push("</div>", "<div class='ace_line' style='height:", this.config.lineHeight, "px'>"), 
                    a = 0, o = i[++r] || Number.MAX_VALUE;
                    0 != c.length && (s += c.length, a = this.$renderToken(e, a, h, c));
                }
            }
        }, this.$renderSimpleLine = function(e, t) {
            var i = 0, n = t[0], s = n.value;
            this.displayIndentGuides && (s = this.renderIndentGuide(e, s)), s && (i = this.$renderToken(e, i, n, s));
            for (var r = 1; r < t.length; r++) s = (n = t[r]).value, i = this.$renderToken(e, i, n, s);
        }, this.$renderLine = function(e, t, i, n) {
            if (n || 0 == n || (n = this.session.getFoldLine(t)), n) s = this.$getFoldLineTokens(t, n); else var s = this.session.getTokens(t);
            if (i || e.push("<div class='ace_line' style='height:", this.config.lineHeight * (this.$useLineGroups() ? 1 : this.session.getRowLength(t)), "px'>"), 
            s.length) {
                var r = this.session.getRowSplitData(t);
                r && r.length ? this.$renderWrappedLine(e, s, r, i) : this.$renderSimpleLine(e, s);
            }
            this.showInvisibles && (n && (t = n.end.row), e.push("<span class='ace_invisible ace_invisible_eol'>", t == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR, "</span>")), 
            i || e.push("</div>");
        }, this.$getFoldLineTokens = function(e, t) {
            function i(e, t, i) {
                for (var n = 0, r = 0; r + e[n].value.length < t; ) if (r += e[n].value.length, 
                ++n == e.length) return;
                for (r != t && ((o = e[n].value.substring(t - r)).length > i - t && (o = o.substring(0, i - t)), 
                s.push({
                    "type": e[n].type,
                    "value": o
                }), r = t + o.length, n += 1); r < i && n < e.length; ) {
                    var o = e[n].value;
                    o.length + r > i ? s.push({
                        "type": e[n].type,
                        "value": o.substring(0, i - r)
                    }) : s.push(e[n]), r += o.length, n += 1;
                }
            }
            var n = this.session, s = [], r = n.getTokens(e);
            return t.walk(function(e, t, o, a, l) {
                null != e ? s.push({
                    "type": "fold",
                    "value": e
                }) : (l && (r = n.getTokens(t)), r.length && i(r, a, o));
            }, t.end.row, this.session.getLine(t.end.row).length), s;
        }, this.$useLineGroups = function() {
            return this.session.getUseWrapMode();
        }, this.destroy = function() {
            clearInterval(this.$pollSizeChangesTimer), this.$measureNode && this.$measureNode.parentNode.removeChild(this.$measureNode), 
            delete this.$measureNode;
        };
    }).call(a.prototype), t.Text = a;
}), ace.define("ace/layer/cursor", [ "require", "exports", "module", "ace/lib/dom" ], function(e, t, i) {
    "use strict";
    var n, s = e("../lib/dom"), r = function(e) {
        this.element = s.createElement("div"), this.element.className = "ace_layer ace_cursor-layer", 
        e.appendChild(this.element), void 0 === n && (n = "opacity" in this.element), this.isVisible = !1, 
        this.isBlinking = !0, this.blinkInterval = 1e3, this.smoothBlinking = !1, this.cursors = [], 
        this.cursor = this.addCursor(), s.addCssClass(this.element, "ace_hidden-cursors"), 
        this.$updateCursors = this.$updateVisibility.bind(this);
    };
    (function() {
        this.$updateVisibility = function(e) {
            for (var t = this.cursors, i = t.length; i--; ) t[i].style.visibility = e ? "" : "hidden";
        }, this.$updateOpacity = function(e) {
            for (var t = this.cursors, i = t.length; i--; ) t[i].style.opacity = e ? "" : "0";
        }, this.$padding = 0, this.setPadding = function(e) {
            this.$padding = e;
        }, this.setSession = function(e) {
            this.session = e;
        }, this.setBlinking = function(e) {
            e != this.isBlinking && (this.isBlinking = e, this.restartTimer());
        }, this.setBlinkInterval = function(e) {
            e != this.blinkInterval && (this.blinkInterval = e, this.restartTimer());
        }, this.setSmoothBlinking = function(e) {
            e == this.smoothBlinking || n || (this.smoothBlinking = e, s.setCssClass(this.element, "ace_smooth-blinking", e), 
            this.$updateCursors(!0), this.$updateCursors = (e ? this.$updateOpacity : this.$updateVisibility).bind(this), 
            this.restartTimer());
        }, this.addCursor = function() {
            var e = s.createElement("div");
            return e.className = "ace_cursor", this.element.appendChild(e), this.cursors.push(e), 
            e;
        }, this.removeCursor = function() {
            if (this.cursors.length > 1) {
                var e = this.cursors.pop();
                return e.parentNode.removeChild(e), e;
            }
        }, this.hideCursor = function() {
            this.isVisible = !1, s.addCssClass(this.element, "ace_hidden-cursors"), this.restartTimer();
        }, this.showCursor = function() {
            this.isVisible = !0, s.removeCssClass(this.element, "ace_hidden-cursors"), this.restartTimer();
        }, this.restartTimer = function() {
            var e = this.$updateCursors;
            if (clearInterval(this.intervalId), clearTimeout(this.timeoutId), this.smoothBlinking && s.removeCssClass(this.element, "ace_smooth-blinking"), 
            e(!0), this.isBlinking && this.blinkInterval && this.isVisible) {
                this.smoothBlinking && setTimeout(function() {
                    s.addCssClass(this.element, "ace_smooth-blinking");
                }.bind(this));
                var t = function() {
                    this.timeoutId = setTimeout(function() {
                        e(!1);
                    }, .6 * this.blinkInterval);
                }.bind(this);
                this.intervalId = setInterval(function() {
                    e(!0), t();
                }, this.blinkInterval), t();
            }
        }, this.getPixelPosition = function(e, t) {
            if (!this.config || !this.session) return {
                "left": 0,
                "top": 0
            };
            e || (e = this.session.selection.getCursor());
            var i = this.session.documentToScreenPosition(e);
            return {
                "left": this.$padding + i.column * this.config.characterWidth,
                "top": (i.row - (t ? this.config.firstRowScreen : 0)) * this.config.lineHeight
            };
        }, this.update = function(e) {
            this.config = e;
            var t = this.session.$selectionMarkers, i = 0, n = 0;
            void 0 !== t && 0 !== t.length || (t = [ {
                "cursor": null
            } ]);
            for (var i = 0, s = t.length; i < s; i++) {
                var r = this.getPixelPosition(t[i].cursor, !0);
                if (!((r.top > e.height + e.offset || r.top < 0) && i > 1)) {
                    var o = (this.cursors[n++] || this.addCursor()).style;
                    this.drawCursor ? this.drawCursor(o, r, e, t[i], this.session) : (o.left = r.left + "px", 
                    o.top = r.top + "px", o.width = e.characterWidth + "px", o.height = e.lineHeight + "px");
                }
            }
            for (;this.cursors.length > n; ) this.removeCursor();
            var a = this.session.getOverwrite();
            this.$setOverwrite(a), this.$pixelPos = r, this.restartTimer();
        }, this.drawCursor = null, this.$setOverwrite = function(e) {
            e != this.overwrite && (this.overwrite = e, e ? s.addCssClass(this.element, "ace_overwrite-cursors") : s.removeCssClass(this.element, "ace_overwrite-cursors"));
        }, this.destroy = function() {
            clearInterval(this.intervalId), clearTimeout(this.timeoutId);
        };
    }).call(r.prototype), t.Cursor = r;
}), ace.define("ace/scrollbar", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/dom", "ace/lib/event", "ace/lib/event_emitter" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/oop"), s = e("./lib/dom"), r = e("./lib/event"), o = e("./lib/event_emitter").EventEmitter, a = function(e) {
        this.element = s.createElement("div"), this.element.className = "ace_scrollbar ace_scrollbar" + this.classSuffix, 
        this.inner = s.createElement("div"), this.inner.className = "ace_scrollbar-inner", 
        this.element.appendChild(this.inner), e.appendChild(this.element), this.setVisible(!1), 
        this.skipEvent = !1, r.addListener(this.element, "scroll", this.onScroll.bind(this)), 
        r.addListener(this.element, "mousedown", r.preventDefault);
    };
    (function() {
        n.implement(this, o), this.setVisible = function(e) {
            this.element.style.display = e ? "" : "none", this.isVisible = e;
        };
    }).call(a.prototype);
    var l = function(e, t) {
        a.call(this, e), this.scrollTop = 0, t.$scrollbarWidth = this.width = s.scrollbarWidth(e.ownerDocument), 
        this.inner.style.width = this.element.style.width = (this.width || 15) + 5 + "px";
    };
    n.inherits(l, a), function() {
        this.classSuffix = "-v", this.onScroll = function() {
            this.skipEvent || (this.scrollTop = this.element.scrollTop, this._emit("scroll", {
                "data": this.scrollTop
            })), this.skipEvent = !1;
        }, this.getWidth = function() {
            return this.isVisible ? this.width : 0;
        }, this.setHeight = function(e) {
            this.element.style.height = e + "px";
        }, this.setInnerHeight = function(e) {
            this.inner.style.height = e + "px";
        }, this.setScrollHeight = function(e) {
            this.inner.style.height = e + "px";
        }, this.setScrollTop = function(e) {
            this.scrollTop != e && (this.skipEvent = !0, this.scrollTop = this.element.scrollTop = e);
        };
    }.call(l.prototype);
    var h = function(e, t) {
        a.call(this, e), this.scrollLeft = 0, this.height = t.$scrollbarWidth, this.inner.style.height = this.element.style.height = (this.height || 15) + 5 + "px";
    };
    n.inherits(h, a), function() {
        this.classSuffix = "-h", this.onScroll = function() {
            this.skipEvent || (this.scrollLeft = this.element.scrollLeft, this._emit("scroll", {
                "data": this.scrollLeft
            })), this.skipEvent = !1;
        }, this.getHeight = function() {
            return this.isVisible ? this.height : 0;
        }, this.setWidth = function(e) {
            this.element.style.width = e + "px";
        }, this.setInnerWidth = function(e) {
            this.inner.style.width = e + "px";
        }, this.setScrollWidth = function(e) {
            this.inner.style.width = e + "px";
        }, this.setScrollLeft = function(e) {
            this.scrollLeft != e && (this.skipEvent = !0, this.scrollLeft = this.element.scrollLeft = e);
        };
    }.call(h.prototype), t.ScrollBar = l, t.ScrollBarV = l, t.ScrollBarH = h, t.VScrollBar = l, 
    t.HScrollBar = h;
}), ace.define("ace/renderloop", [ "require", "exports", "module", "ace/lib/event" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/event"), s = function(e, t) {
        this.onRender = e, this.pending = !1, this.changes = 0, this.window = t || window;
    };
    (function() {
        this.schedule = function(e) {
            if (this.changes = this.changes | e, !this.pending && this.changes) {
                this.pending = !0;
                var t = this;
                n.nextFrame(function() {
                    t.pending = !1;
                    for (var e; e = t.changes; ) t.changes = 0, t.onRender(e);
                }, this.window);
            }
        };
    }).call(s.prototype), t.RenderLoop = s;
}), ace.define("ace/layer/font_metrics", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/dom", "ace/lib/lang", "ace/lib/useragent", "ace/lib/event_emitter" ], function(e, t, i) {
    var n = e("../lib/oop"), s = e("../lib/dom"), r = e("../lib/lang"), o = e("../lib/useragent"), a = e("../lib/event_emitter").EventEmitter, l = 0, h = t.FontMetrics = function(e, t) {
        this.el = s.createElement("div"), this.$setMeasureNodeStyles(this.el.style, !0), 
        this.$main = s.createElement("div"), this.$setMeasureNodeStyles(this.$main.style), 
        this.$measureNode = s.createElement("div"), this.$setMeasureNodeStyles(this.$measureNode.style), 
        this.el.appendChild(this.$main), this.el.appendChild(this.$measureNode), e.appendChild(this.el), 
        l || this.$testFractionalRect(), this.$measureNode.innerHTML = r.stringRepeat("X", l), 
        this.$characterSize = {
            "width": 0,
            "height": 0
        }, this.checkForSizeChanges();
    };
    (function() {
        n.implement(this, a), this.$characterSize = {
            "width": 0,
            "height": 0
        }, this.$testFractionalRect = function() {
            var e = s.createElement("div");
            this.$setMeasureNodeStyles(e.style), e.style.width = "0.2px", document.documentElement.appendChild(e);
            var t = e.getBoundingClientRect().width;
            l = t > 0 && t < 1 ? 50 : 100, e.parentNode.removeChild(e);
        }, this.$setMeasureNodeStyles = function(e, t) {
            e.width = e.height = "auto", e.left = e.top = "0px", e.visibility = "hidden", e.position = "absolute", 
            e.whiteSpace = "pre", o.isIE < 8 ? e["font-family"] = "inherit" : e.font = "inherit", 
            e.overflow = t ? "hidden" : "visible";
        }, this.checkForSizeChanges = function() {
            var e = this.$measureSizes();
            if (e && (this.$characterSize.width !== e.width || this.$characterSize.height !== e.height)) {
                this.$measureNode.style.fontWeight = "bold";
                var t = this.$measureSizes();
                this.$measureNode.style.fontWeight = "", this.$characterSize = e, this.charSizes = Object.create(null), 
                this.allowBoldFonts = t && t.width === e.width && t.height === e.height, this._emit("changeCharacterSize", {
                    "data": e
                });
            }
        }, this.$pollSizeChanges = function() {
            if (this.$pollSizeChangesTimer) return this.$pollSizeChangesTimer;
            var e = this;
            return this.$pollSizeChangesTimer = setInterval(function() {
                e.checkForSizeChanges();
            }, 500);
        }, this.setPolling = function(e) {
            e ? this.$pollSizeChanges() : this.$pollSizeChangesTimer && this.$pollSizeChangesTimer;
        }, this.$measureSizes = function() {
            if (50 === l) {
                var e = null;
                try {
                    e = this.$measureNode.getBoundingClientRect();
                } catch (t) {
                    e = {
                        "width": 0,
                        "height": 0
                    };
                }
                t = {
                    "height": e.height,
                    "width": e.width / l
                };
            } else var t = {
                "height": this.$measureNode.clientHeight,
                "width": this.$measureNode.clientWidth / l
            };
            return 0 === t.width || 0 === t.height ? null : t;
        }, this.$measureCharWidth = function(e) {
            return this.$main.innerHTML = r.stringRepeat(e, l), this.$main.getBoundingClientRect().width / l;
        }, this.getCharacterWidth = function(e) {
            var t = this.charSizes[e];
            return void 0 === t && (this.charSizes[e] = this.$measureCharWidth(e) / this.$characterSize.width), 
            t;
        }, this.destroy = function() {
            clearInterval(this.$pollSizeChangesTimer), this.el && this.el.parentNode && this.el.parentNode.removeChild(this.el);
        };
    }).call(h.prototype);
}), ace.define("ace/virtual_renderer", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/dom", "ace/config", "ace/lib/useragent", "ace/layer/gutter", "ace/layer/marker", "ace/layer/text", "ace/layer/cursor", "ace/scrollbar", "ace/scrollbar", "ace/renderloop", "ace/layer/font_metrics", "ace/lib/event_emitter" ], function(e, t, i) {
    "use strict";
    var n = e("./lib/oop"), s = e("./lib/dom"), r = e("./config"), o = e("./lib/useragent"), a = e("./layer/gutter").Gutter, l = e("./layer/marker").Marker, h = e("./layer/text").Text, c = e("./layer/cursor").Cursor, u = e("./scrollbar").HScrollBar, p = e("./scrollbar").VScrollBar, d = e("./renderloop").RenderLoop, f = e("./layer/font_metrics").FontMetrics, m = e("./lib/event_emitter").EventEmitter;
    s.importCssString('.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}', "ace_editor.css");
    var g = function(e, t) {
        var i = this;
        this.container = e || s.createElement("div"), this.$keepTextAreaAtCursor = !o.isOldIE, 
        s.addCssClass(this.container, "ace_editor"), this.setTheme(t), this.$gutter = s.createElement("div"), 
        this.$gutter.className = "ace_gutter", this.container.appendChild(this.$gutter), 
        this.scroller = s.createElement("div"), this.scroller.className = "ace_scroller", 
        this.container.appendChild(this.scroller), this.content = s.createElement("div"), 
        this.content.className = "ace_content", this.scroller.appendChild(this.content), 
        this.$gutterLayer = new a(this.$gutter), this.$gutterLayer.on("changeGutterWidth", this.onGutterResize.bind(this)), 
        this.$markerBack = new l(this.content);
        var n = this.$textLayer = new h(this.content);
        this.canvas = n.element, this.$markerFront = new l(this.content), this.$cursorLayer = new c(this.content), 
        this.$horizScroll = !1, this.$vScroll = !1, this.scrollBar = this.scrollBarV = new p(this.container, this), 
        this.scrollBarH = new u(this.container, this), this.scrollBarV.addEventListener("scroll", function(e) {
            i.$scrollAnimation || i.session.setScrollTop(e.data - i.scrollMargin.top);
        }), this.scrollBarH.addEventListener("scroll", function(e) {
            i.$scrollAnimation || i.session.setScrollLeft(e.data - i.scrollMargin.left);
        }), this.scrollTop = 0, this.scrollLeft = 0, this.cursorPos = {
            "row": 0,
            "column": 0
        }, this.$fontMetrics = new f(this.container, 500), this.$textLayer.$setFontMetrics(this.$fontMetrics), 
        this.$textLayer.addEventListener("changeCharacterSize", function(e) {
            i.updateCharacterSize(), i.onResize(!0, i.gutterWidth, i.$size.width, i.$size.height), 
            i._signal("changeCharacterSize", e);
        }), this.$size = {
            "width": 0,
            "height": 0,
            "scrollerHeight": 0,
            "scrollerWidth": 0,
            "$dirty": !0
        }, this.layerConfig = {
            "width": 1,
            "padding": 0,
            "firstRow": 0,
            "firstRowScreen": 0,
            "lastRow": 0,
            "lineHeight": 0,
            "characterWidth": 0,
            "minHeight": 1,
            "maxHeight": 1,
            "offset": 0,
            "height": 1,
            "gutterOffset": 1
        }, this.scrollMargin = {
            "left": 0,
            "right": 0,
            "top": 0,
            "bottom": 0,
            "v": 0,
            "h": 0
        }, this.$loop = new d(this.$renderChanges.bind(this), this.container.ownerDocument.defaultView), 
        this.$loop.schedule(this.CHANGE_FULL), this.updateCharacterSize(), this.setPadding(4), 
        r.resetOptions(this), r._emit("renderer", this);
    };
    (function() {
        this.CHANGE_CURSOR = 1, this.CHANGE_MARKER = 2, this.CHANGE_GUTTER = 4, this.CHANGE_SCROLL = 8, 
        this.CHANGE_LINES = 16, this.CHANGE_TEXT = 32, this.CHANGE_SIZE = 64, this.CHANGE_MARKER_BACK = 128, 
        this.CHANGE_MARKER_FRONT = 256, this.CHANGE_FULL = 512, this.CHANGE_H_SCROLL = 1024, 
        n.implement(this, m), this.updateCharacterSize = function() {
            this.$textLayer.allowBoldFonts != this.$allowBoldFonts && (this.$allowBoldFonts = this.$textLayer.allowBoldFonts, 
            this.setStyle("ace_nobold", !this.$allowBoldFonts)), this.layerConfig.characterWidth = this.characterWidth = this.$textLayer.getCharacterWidth(), 
            this.layerConfig.lineHeight = this.lineHeight = this.$textLayer.getLineHeight(), 
            this.$updatePrintMargin();
        }, this.setSession = function(e) {
            this.session && this.session.doc.off("changeNewLineMode", this.onChangeNewLineMode), 
            this.session = e, e && this.scrollMargin.top && e.getScrollTop() <= 0 && e.setScrollTop(-this.scrollMargin.top), 
            this.$cursorLayer.setSession(e), this.$markerBack.setSession(e), this.$markerFront.setSession(e), 
            this.$gutterLayer.setSession(e), this.$textLayer.setSession(e), e && (this.$loop.schedule(this.CHANGE_FULL), 
            this.session.$setFontMetrics(this.$fontMetrics), this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this), 
            this.onChangeNewLineMode(), this.session.doc.on("changeNewLineMode", this.onChangeNewLineMode));
        }, this.updateLines = function(e, t, i) {
            if (void 0 === t && (t = 1 / 0), this.$changedLines ? (this.$changedLines.firstRow > e && (this.$changedLines.firstRow = e), 
            this.$changedLines.lastRow < t && (this.$changedLines.lastRow = t)) : this.$changedLines = {
                "firstRow": e,
                "lastRow": t
            }, this.$changedLines.lastRow < this.layerConfig.firstRow) {
                if (!i) return;
                this.$changedLines.lastRow = this.layerConfig.lastRow;
            }
            this.$changedLines.firstRow > this.layerConfig.lastRow || this.$loop.schedule(this.CHANGE_LINES);
        }, this.onChangeNewLineMode = function() {
            this.$loop.schedule(this.CHANGE_TEXT), this.$textLayer.$updateEolChar();
        }, this.onChangeTabSize = function() {
            this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER), this.$textLayer.onChangeTabSize();
        }, this.updateText = function() {
            this.$loop.schedule(this.CHANGE_TEXT);
        }, this.updateFull = function(e) {
            e ? this.$renderChanges(this.CHANGE_FULL, !0) : this.$loop.schedule(this.CHANGE_FULL);
        }, this.updateFontSize = function() {
            this.$textLayer.checkForSizeChanges();
        }, this.$changes = 0, this.$updateSizeAsync = function() {
            this.$loop.pending ? this.$size.$dirty = !0 : this.onResize();
        }, this.onResize = function(e, t, i, n) {
            if (!(this.resizing > 2)) {
                this.resizing > 0 ? this.resizing++ : this.resizing = e ? 1 : 0;
                var s = this.container;
                n || (n = s.clientHeight || s.scrollHeight), i || (i = s.clientWidth || s.scrollWidth);
                var r = this.$updateCachedSize(e, t, i, n);
                if (!this.$size.scrollerHeight || !i && !n) return this.resizing = 0;
                e && (this.$gutterLayer.$padding = null), e ? this.$renderChanges(r | this.$changes, !0) : this.$loop.schedule(r | this.$changes), 
                this.resizing && (this.resizing = 0), this.scrollBarV.scrollLeft = this.scrollBarV.scrollTop = null;
            }
        }, this.$updateCachedSize = function(e, t, i, n) {
            n -= this.$extraHeight || 0;
            var s = 0, r = this.$size, o = {
                "width": r.width,
                "height": r.height,
                "scrollerHeight": r.scrollerHeight,
                "scrollerWidth": r.scrollerWidth
            };
            return n && (e || r.height != n) && (r.height = n, s |= this.CHANGE_SIZE, r.scrollerHeight = r.height, 
            this.$horizScroll && (r.scrollerHeight -= this.scrollBarH.getHeight()), this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + "px", 
            s |= this.CHANGE_SCROLL), i && (e || r.width != i) && (s |= this.CHANGE_SIZE, r.width = i, 
            null == t && (t = this.$showGutter ? this.$gutter.offsetWidth : 0), this.gutterWidth = t, 
            this.scrollBarH.element.style.left = this.scroller.style.left = t + "px", r.scrollerWidth = Math.max(0, i - t - this.scrollBarV.getWidth()), 
            this.scrollBarH.element.style.right = this.scroller.style.right = this.scrollBarV.getWidth() + "px", 
            this.scroller.style.bottom = this.scrollBarH.getHeight() + "px", (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || e) && (s |= this.CHANGE_FULL)), 
            r.$dirty = !i || !n, s && this._signal("resize", o), s;
        }, this.onGutterResize = function() {
            var e = this.$showGutter ? this.$gutter.offsetWidth : 0;
            e != this.gutterWidth && (this.$changes |= this.$updateCachedSize(!0, e, this.$size.width, this.$size.height)), 
            this.session.getUseWrapMode() && this.adjustWrapLimit() ? this.$loop.schedule(this.CHANGE_FULL) : this.$size.$dirty ? this.$loop.schedule(this.CHANGE_FULL) : (this.$computeLayerConfig(), 
            this.$loop.schedule(this.CHANGE_MARKER));
        }, this.adjustWrapLimit = function() {
            var e = this.$size.scrollerWidth - 2 * this.$padding, t = Math.floor(e / this.characterWidth);
            return this.session.adjustWrapLimit(t, this.$showPrintMargin && this.$printMarginColumn);
        }, this.setAnimatedScroll = function(e) {
            this.setOption("animatedScroll", e);
        }, this.getAnimatedScroll = function() {
            return this.$animatedScroll;
        }, this.setShowInvisibles = function(e) {
            this.setOption("showInvisibles", e);
        }, this.getShowInvisibles = function() {
            return this.getOption("showInvisibles");
        }, this.getDisplayIndentGuides = function() {
            return this.getOption("displayIndentGuides");
        }, this.setDisplayIndentGuides = function(e) {
            this.setOption("displayIndentGuides", e);
        }, this.setShowPrintMargin = function(e) {
            this.setOption("showPrintMargin", e);
        }, this.getShowPrintMargin = function() {
            return this.getOption("showPrintMargin");
        }, this.setPrintMarginColumn = function(e) {
            this.setOption("printMarginColumn", e);
        }, this.getPrintMarginColumn = function() {
            return this.getOption("printMarginColumn");
        }, this.getShowGutter = function() {
            return this.getOption("showGutter");
        }, this.setShowGutter = function(e) {
            return this.setOption("showGutter", e);
        }, this.getFadeFoldWidgets = function() {
            return this.getOption("fadeFoldWidgets");
        }, this.setFadeFoldWidgets = function(e) {
            this.setOption("fadeFoldWidgets", e);
        }, this.setHighlightGutterLine = function(e) {
            this.setOption("highlightGutterLine", e);
        }, this.getHighlightGutterLine = function() {
            return this.getOption("highlightGutterLine");
        }, this.$updateGutterLineHighlight = function() {
            var e = this.$cursorLayer.$pixelPos, t = this.layerConfig.lineHeight;
            if (this.session.getUseWrapMode()) {
                var i = this.session.selection.getCursor();
                i.column = 0, e = this.$cursorLayer.getPixelPosition(i, !0), t *= this.session.getRowLength(i.row);
            }
            this.$gutterLineHighlight.style.top = e.top - this.layerConfig.offset + "px", this.$gutterLineHighlight.style.height = t + "px";
        }, this.$updatePrintMargin = function() {
            if (this.$showPrintMargin || this.$printMarginEl) {
                if (!this.$printMarginEl) {
                    var e = s.createElement("div");
                    e.className = "ace_layer ace_print-margin-layer", this.$printMarginEl = s.createElement("div"), 
                    this.$printMarginEl.className = "ace_print-margin", e.appendChild(this.$printMarginEl), 
                    this.content.insertBefore(e, this.content.firstChild);
                }
                var t = this.$printMarginEl.style;
                t.left = this.characterWidth * this.$printMarginColumn + this.$padding + "px", t.visibility = this.$showPrintMargin ? "visible" : "hidden", 
                this.session && -1 == this.session.$wrap && this.adjustWrapLimit();
            }
        }, this.getContainerElement = function() {
            return this.container;
        }, this.getMouseEventTarget = function() {
            return this.content;
        }, this.getTextAreaContainer = function() {
            return this.container;
        }, this.$moveTextAreaToCursor = function() {
            if (this.$keepTextAreaAtCursor) {
                var e = this.layerConfig, t = this.$cursorLayer.$pixelPos.top, i = this.$cursorLayer.$pixelPos.left;
                t -= e.offset;
                var n = this.textarea.style, s = this.lineHeight;
                if (t < 0 || t > e.height - s) n.top = n.left = "0"; else {
                    var r = this.characterWidth;
                    if (this.$composition) {
                        var o = this.textarea.value.replace(/^\x01+/, "");
                        r *= this.session.$getStringScreenWidth(o)[0] + 2, s += 2;
                    }
                    (i -= this.scrollLeft) > this.$size.scrollerWidth - r && (i = this.$size.scrollerWidth - r), 
                    i += this.gutterWidth, n.height = s + "px", n.width = r + "px", n.left = Math.min(i, this.$size.scrollerWidth - r) + "px", 
                    n.top = Math.min(t, this.$size.height - s) + "px";
                }
            }
        }, this.getFirstVisibleRow = function() {
            return this.layerConfig.firstRow;
        }, this.getFirstFullyVisibleRow = function() {
            return this.layerConfig.firstRow + (0 === this.layerConfig.offset ? 0 : 1);
        }, this.getLastFullyVisibleRow = function() {
            var e = Math.floor((this.layerConfig.height + this.layerConfig.offset) / this.layerConfig.lineHeight);
            return this.layerConfig.firstRow - 1 + e;
        }, this.getLastVisibleRow = function() {
            return this.layerConfig.lastRow;
        }, this.$padding = null, this.setPadding = function(e) {
            this.$padding = e, this.$textLayer.setPadding(e), this.$cursorLayer.setPadding(e), 
            this.$markerFront.setPadding(e), this.$markerBack.setPadding(e), this.$loop.schedule(this.CHANGE_FULL), 
            this.$updatePrintMargin();
        }, this.setScrollMargin = function(e, t, i, n) {
            var s = this.scrollMargin;
            s.top = 0 | e, s.bottom = 0 | t, s.right = 0 | n, s.left = 0 | i, s.v = s.top + s.bottom, 
            s.h = s.left + s.right, s.top && this.scrollTop <= 0 && this.session && this.session.setScrollTop(-s.top), 
            this.updateFull();
        }, this.getHScrollBarAlwaysVisible = function() {
            return this.$hScrollBarAlwaysVisible;
        }, this.setHScrollBarAlwaysVisible = function(e) {
            this.setOption("hScrollBarAlwaysVisible", e);
        }, this.getVScrollBarAlwaysVisible = function() {
            return this.$vScrollBarAlwaysVisible;
        }, this.setVScrollBarAlwaysVisible = function(e) {
            this.setOption("vScrollBarAlwaysVisible", e);
        }, this.$updateScrollBarV = function() {
            var e = this.layerConfig.maxHeight, t = this.$size.scrollerHeight;
            !this.$maxLines && this.$scrollPastEnd && (e -= (t - this.lineHeight) * this.$scrollPastEnd, 
            this.scrollTop > e - t && (e = this.scrollTop + t, this.scrollBarV.scrollTop = null)), 
            this.scrollBarV.setScrollHeight(e + this.scrollMargin.v), this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);
        }, this.$updateScrollBarH = function() {
            this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h), 
            this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);
        }, this.$frozen = !1, this.freeze = function() {
            this.$frozen = !0;
        }, this.unfreeze = function() {
            this.$frozen = !1;
        }, this.$renderChanges = function(e, t) {
            if (this.$changes && (e |= this.$changes, this.$changes = 0), this.session && this.container.offsetWidth && !this.$frozen && (e || t)) {
                if (this.$size.$dirty) return this.$changes |= e, this.onResize(!0);
                this.lineHeight || this.$textLayer.checkForSizeChanges(), this._signal("beforeRender");
                var i = this.layerConfig;
                if (e & this.CHANGE_FULL || e & this.CHANGE_SIZE || e & this.CHANGE_TEXT || e & this.CHANGE_LINES || e & this.CHANGE_SCROLL || e & this.CHANGE_H_SCROLL) {
                    if (e |= this.$computeLayerConfig(), i.firstRow != this.layerConfig.firstRow && i.firstRowScreen == this.layerConfig.firstRowScreen) {
                        var n = this.scrollTop + (i.firstRow - this.layerConfig.firstRow) * this.lineHeight;
                        n > 0 && (this.scrollTop = n, e |= this.CHANGE_SCROLL, e |= this.$computeLayerConfig());
                    }
                    i = this.layerConfig, this.$updateScrollBarV(), e & this.CHANGE_H_SCROLL && this.$updateScrollBarH(), 
                    this.$gutterLayer.element.style.marginTop = -i.offset + "px", this.content.style.marginTop = -i.offset + "px", 
                    this.content.style.width = i.width + 2 * this.$padding + "px", this.content.style.height = i.minHeight + "px";
                }
                if (e & this.CHANGE_H_SCROLL && (this.content.style.marginLeft = -this.scrollLeft + "px", 
                this.scroller.className = this.scrollLeft <= 0 ? "ace_scroller" : "ace_scroller ace_scroll-left"), 
                e & this.CHANGE_FULL) return this.$textLayer.update(i), this.$showGutter && this.$gutterLayer.update(i), 
                this.$markerBack.update(i), this.$markerFront.update(i), this.$cursorLayer.update(i), 
                this.$moveTextAreaToCursor(), this.$highlightGutterLine && this.$updateGutterLineHighlight(), 
                void this._signal("afterRender");
                if (e & this.CHANGE_SCROLL) return e & this.CHANGE_TEXT || e & this.CHANGE_LINES ? this.$textLayer.update(i) : this.$textLayer.scrollLines(i), 
                this.$showGutter && this.$gutterLayer.update(i), this.$markerBack.update(i), this.$markerFront.update(i), 
                this.$cursorLayer.update(i), this.$highlightGutterLine && this.$updateGutterLineHighlight(), 
                this.$moveTextAreaToCursor(), void this._signal("afterRender");
                e & this.CHANGE_TEXT ? (this.$textLayer.update(i), this.$showGutter && this.$gutterLayer.update(i)) : e & this.CHANGE_LINES ? (this.$updateLines() || e & this.CHANGE_GUTTER && this.$showGutter) && this.$gutterLayer.update(i) : (e & this.CHANGE_TEXT || e & this.CHANGE_GUTTER) && this.$showGutter && this.$gutterLayer.update(i), 
                e & this.CHANGE_CURSOR && (this.$cursorLayer.update(i), this.$moveTextAreaToCursor(), 
                this.$highlightGutterLine && this.$updateGutterLineHighlight()), e & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT) && this.$markerFront.update(i), 
                e & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK) && this.$markerBack.update(i), 
                this._signal("afterRender");
            } else this.$changes |= e;
        }, this.$autosize = function() {
            var e = this.session.getScreenLength() * this.lineHeight, t = this.$maxLines * this.lineHeight, i = Math.max((this.$minLines || 1) * this.lineHeight, Math.min(t, e)) + this.scrollMargin.v + (this.$extraHeight || 0), n = e > t;
            if (i != this.desiredHeight || this.$size.height != this.desiredHeight || n != this.$vScroll) {
                n != this.$vScroll && (this.$vScroll = n, this.scrollBarV.setVisible(n));
                var s = this.container.clientWidth;
                this.container.style.height = i + "px", this.$updateCachedSize(!0, this.$gutterWidth, s, i), 
                this.desiredHeight = i, this._signal("autosize");
            }
        }, this.$computeLayerConfig = function() {
            this.$maxLines && this.lineHeight > 1 && this.$autosize();
            var e = this.session, t = this.$size, i = t.height <= 2 * this.lineHeight, n = this.session.getScreenLength() * this.lineHeight, s = this.scrollTop % this.lineHeight, r = t.scrollerHeight + this.lineHeight, o = this.$getLongestLine(), a = !i && (this.$hScrollBarAlwaysVisible || t.scrollerWidth - o - 2 * this.$padding < 0), l = this.$horizScroll !== a;
            l && (this.$horizScroll = a, this.scrollBarH.setVisible(a));
            var h = !this.$maxLines && this.$scrollPastEnd ? (t.scrollerHeight - this.lineHeight) * this.$scrollPastEnd : 0;
            n += h, this.session.setScrollTop(Math.max(-this.scrollMargin.top, Math.min(this.scrollTop, n - t.scrollerHeight + this.scrollMargin.bottom))), 
            this.session.setScrollLeft(Math.max(-this.scrollMargin.left, Math.min(this.scrollLeft, o + 2 * this.$padding - t.scrollerWidth + this.scrollMargin.right)));
            var c = !i && (this.$vScrollBarAlwaysVisible || t.scrollerHeight - n + h < 0 || this.scrollTop), u = this.$vScroll !== c;
            u && (this.$vScroll = c, this.scrollBarV.setVisible(c));
            var p, d, f = Math.ceil(r / this.lineHeight) - 1, m = Math.max(0, Math.round((this.scrollTop - s) / this.lineHeight)), g = m + f, y = this.lineHeight;
            m = e.screenToDocumentRow(m, 0);
            var v = e.getFoldLine(m);
            v && (m = v.start.row), p = e.documentToScreenRow(m, 0), d = e.getRowLength(m) * y, 
            g = Math.min(e.screenToDocumentRow(g, 0), e.getLength() - 1), r = t.scrollerHeight + e.getRowLength(g) * y + d, 
            s = this.scrollTop - p * y;
            var L = 0;
            return this.layerConfig.width != o && (L = this.CHANGE_H_SCROLL), (l || u) && (L = this.$updateCachedSize(!0, this.gutterWidth, t.width, t.height), 
            this._signal("scrollbarVisibilityChanged"), u && (o = this.$getLongestLine())), 
            this.layerConfig = {
                "width": o,
                "padding": this.$padding,
                "firstRow": m,
                "firstRowScreen": p,
                "lastRow": g,
                "lineHeight": y,
                "characterWidth": this.characterWidth,
                "minHeight": r,
                "maxHeight": n,
                "offset": s,
                "gutterOffset": Math.max(0, Math.ceil((s + t.height - t.scrollerHeight) / y)),
                "height": this.$size.scrollerHeight
            }, L;
        }, this.$updateLines = function() {
            var e = this.$changedLines.firstRow, t = this.$changedLines.lastRow;
            this.$changedLines = null;
            var i = this.layerConfig;
            if (!(e > i.lastRow + 1 || t < i.firstRow)) return t === 1 / 0 ? (this.$showGutter && this.$gutterLayer.update(i), 
            void this.$textLayer.update(i)) : (this.$textLayer.updateLines(i, e, t), !0);
        }, this.$getLongestLine = function() {
            var e = this.session.getScreenWidth();
            return this.showInvisibles && !this.session.$useWrapMode && (e += 1), Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(e * this.characterWidth));
        }, this.updateFrontMarkers = function() {
            this.$markerFront.setMarkers(this.session.getMarkers(!0)), this.$loop.schedule(this.CHANGE_MARKER_FRONT);
        }, this.updateBackMarkers = function() {
            this.$markerBack.setMarkers(this.session.getMarkers()), this.$loop.schedule(this.CHANGE_MARKER_BACK);
        }, this.addGutterDecoration = function(e, t) {
            this.$gutterLayer.addGutterDecoration(e, t);
        }, this.removeGutterDecoration = function(e, t) {
            this.$gutterLayer.removeGutterDecoration(e, t);
        }, this.updateBreakpoints = function(e) {
            this.$loop.schedule(this.CHANGE_GUTTER);
        }, this.setAnnotations = function(e) {
            this.$gutterLayer.setAnnotations(e), this.$loop.schedule(this.CHANGE_GUTTER);
        }, this.updateCursor = function() {
            this.$loop.schedule(this.CHANGE_CURSOR);
        }, this.hideCursor = function() {
            this.$cursorLayer.hideCursor();
        }, this.showCursor = function() {
            this.$cursorLayer.showCursor();
        }, this.scrollSelectionIntoView = function(e, t, i) {
            this.scrollCursorIntoView(e, i), this.scrollCursorIntoView(t, i);
        }, this.scrollCursorIntoView = function(e, t, i) {
            if (0 !== this.$size.scrollerHeight) {
                var n = this.$cursorLayer.getPixelPosition(e), s = n.left, r = n.top, o = i && i.top || 0, a = i && i.bottom || 0, l = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;
                l + o > r ? (t && (r -= t * this.$size.scrollerHeight), 0 === r && (r = -this.scrollMargin.top), 
                this.session.setScrollTop(r)) : l + this.$size.scrollerHeight - a < r + this.lineHeight && (t && (r += t * this.$size.scrollerHeight), 
                this.session.setScrollTop(r + this.lineHeight - this.$size.scrollerHeight));
                var h = this.scrollLeft;
                h > s ? (s < this.$padding + 2 * this.layerConfig.characterWidth && (s = -this.scrollMargin.left), 
                this.session.setScrollLeft(s)) : h + this.$size.scrollerWidth < s + this.characterWidth ? this.session.setScrollLeft(Math.round(s + this.characterWidth - this.$size.scrollerWidth)) : h <= this.$padding && s - h < this.characterWidth && this.session.setScrollLeft(0);
            }
        }, this.getScrollTop = function() {
            return this.session.getScrollTop();
        }, this.getScrollLeft = function() {
            return this.session.getScrollLeft();
        }, this.getScrollTopRow = function() {
            return this.scrollTop / this.lineHeight;
        }, this.getScrollBottomRow = function() {
            return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);
        }, this.scrollToRow = function(e) {
            this.session.setScrollTop(e * this.lineHeight);
        }, this.alignCursor = function(e, t) {
            "number" == typeof e && (e = {
                "row": e,
                "column": 0
            });
            var i = this.$cursorLayer.getPixelPosition(e), n = this.$size.scrollerHeight - this.lineHeight, s = i.top - n * (t || 0);
            return this.session.setScrollTop(s), s;
        }, this.STEPS = 8, this.$calcSteps = function(e, t) {
            var i = 0, n = this.STEPS, s = [];
            for (i = 0; i < n; ++i) s.push(function(e, t, i) {
                return i * (Math.pow(e - 1, 3) + 1) + t;
            }(i / this.STEPS, e, t - e));
            return s;
        }, this.scrollToLine = function(e, t, i, n) {
            var s = this.$cursorLayer.getPixelPosition({
                "row": e,
                "column": 0
            }).top;
            t && (s -= this.$size.scrollerHeight / 2);
            var r = this.scrollTop;
            this.session.setScrollTop(s), !1 !== i && this.animateScrolling(r, n);
        }, this.animateScrolling = function(e, t) {
            var i = this.scrollTop;
            if (this.$animatedScroll) {
                var n = this;
                if (e != i) {
                    if (this.$scrollAnimation) {
                        var s = this.$scrollAnimation.steps;
                        if (s.length && (e = s[0]) == i) return;
                    }
                    var r = n.$calcSteps(e, i);
                    this.$scrollAnimation = {
                        "from": e,
                        "to": i,
                        "steps": r
                    }, clearInterval(this.$timer), n.session.setScrollTop(r.shift()), n.session.$scrollTop = i, 
                    this.$timer = setInterval(function() {
                        r.length ? (n.session.setScrollTop(r.shift()), n.session.$scrollTop = i) : null != i ? (n.session.$scrollTop = -1, 
                        n.session.setScrollTop(i), i = null) : (n.$timer = clearInterval(n.$timer), n.$scrollAnimation = null, 
                        t && t());
                    }, 10);
                }
            }
        }, this.scrollToY = function(e) {
            this.scrollTop !== e && (this.$loop.schedule(this.CHANGE_SCROLL), this.scrollTop = e);
        }, this.scrollToX = function(e) {
            this.scrollLeft !== e && (this.scrollLeft = e), this.$loop.schedule(this.CHANGE_H_SCROLL);
        }, this.scrollTo = function(e, t) {
            this.session.setScrollTop(t), this.session.setScrollLeft(t);
        }, this.scrollBy = function(e, t) {
            t && this.session.setScrollTop(this.session.getScrollTop() + t), e && this.session.setScrollLeft(this.session.getScrollLeft() + e);
        }, this.isScrollableBy = function(e, t) {
            return t < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top || (t > 0 && this.session.getScrollTop() + this.$size.scrollerHeight - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom || (e < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left || (e > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth - this.layerConfig.width < -1 + this.scrollMargin.right || void 0)));
        }, this.pixelToScreenCoordinates = function(e, t) {
            var i = this.scroller.getBoundingClientRect(), n = (e + this.scrollLeft - i.left - this.$padding) / this.characterWidth, s = Math.floor((t + this.scrollTop - i.top) / this.lineHeight), r = Math.round(n);
            return {
                "row": s,
                "column": r,
                "side": n - r > 0 ? 1 : -1
            };
        }, this.screenToTextCoordinates = function(e, t) {
            var i = this.scroller.getBoundingClientRect(), n = Math.round((e + this.scrollLeft - i.left - this.$padding) / this.characterWidth), s = (t + this.scrollTop - i.top) / this.lineHeight;
            return this.session.screenToDocumentPosition(s, Math.max(n, 0));
        }, this.textToScreenCoordinates = function(e, t) {
            var i = this.scroller.getBoundingClientRect(), n = this.session.documentToScreenPosition(e, t), s = this.$padding + Math.round(n.column * this.characterWidth), r = n.row * this.lineHeight;
            return {
                "pageX": i.left + s - this.scrollLeft,
                "pageY": i.top + r - this.scrollTop
            };
        }, this.visualizeFocus = function() {
            s.addCssClass(this.container, "ace_focus");
        }, this.visualizeBlur = function() {
            s.removeCssClass(this.container, "ace_focus");
        }, this.showComposition = function(e) {
            this.$composition || (this.$composition = {
                "keepTextAreaAtCursor": this.$keepTextAreaAtCursor,
                "cssText": this.textarea.style.cssText
            }), this.$keepTextAreaAtCursor = !0, s.addCssClass(this.textarea, "ace_composition"), 
            this.textarea.style.cssText = "", this.$moveTextAreaToCursor();
        }, this.setCompositionText = function(e) {
            this.$moveTextAreaToCursor();
        }, this.hideComposition = function() {
            this.$composition && (s.removeCssClass(this.textarea, "ace_composition"), this.$keepTextAreaAtCursor = this.$composition.keepTextAreaAtCursor, 
            this.textarea.style.cssText = this.$composition.cssText, this.$composition = null);
        }, this.setTheme = function(e, t) {
            function i(i) {
                if (n.$themeId != e) return t && t();
                if (i.cssClass) {
                    s.importCssString(i.cssText, i.cssClass, n.container.ownerDocument), n.theme && s.removeCssClass(n.container, n.theme.cssClass);
                    var r = "padding" in i ? i.padding : "padding" in (n.theme || {}) ? 4 : n.$padding;
                    n.$padding && r != n.$padding && n.setPadding(r), n.$theme = i.cssClass, n.theme = i, 
                    s.addCssClass(n.container, i.cssClass), s.setCssClass(n.container, "ace_dark", i.isDark), 
                    n.$size && (n.$size.width = 0, n.$updateSizeAsync()), n._dispatchEvent("themeLoaded", {
                        "theme": i
                    }), t && t();
                }
            }
            var n = this;
            if (this.$themeId = e, n._dispatchEvent("themeChange", {
                "theme": e
            }), e && "string" != typeof e) i(e); else {
                var o = e || this.$options.theme.initialValue;
                r.loadModule([ "theme", o ], i);
            }
        }, this.getTheme = function() {
            return this.$themeId;
        }, this.setStyle = function(e, t) {
            s.setCssClass(this.container, e, !1 !== t);
        }, this.unsetStyle = function(e) {
            s.removeCssClass(this.container, e);
        }, this.setCursorStyle = function(e) {
            this.scroller.style.cursor != e && (this.scroller.style.cursor = e);
        }, this.setMouseCursor = function(e) {
            this.scroller.style.cursor = e;
        }, this.destroy = function() {
            this.$textLayer.destroy(), this.$cursorLayer.destroy();
        };
    }).call(g.prototype), r.defineOptions(g.prototype, "renderer", {
        "animatedScroll": {
            "initialValue": !1
        },
        "showInvisibles": {
            "set": function(e) {
                this.$textLayer.setShowInvisibles(e) && this.$loop.schedule(this.CHANGE_TEXT);
            },
            "initialValue": !1
        },
        "showPrintMargin": {
            "set": function() {
                this.$updatePrintMargin();
            },
            "initialValue": !0
        },
        "printMarginColumn": {
            "set": function() {
                this.$updatePrintMargin();
            },
            "initialValue": 80
        },
        "printMargin": {
            "set": function(e) {
                "number" == typeof e && (this.$printMarginColumn = e), this.$showPrintMargin = !!e, 
                this.$updatePrintMargin();
            },
            "get": function() {
                return this.$showPrintMargin && this.$printMarginColumn;
            }
        },
        "showGutter": {
            "set": function(e) {
                this.$gutter.style.display = e ? "block" : "none", this.$loop.schedule(this.CHANGE_FULL), 
                this.onGutterResize();
            },
            "initialValue": !0
        },
        "fadeFoldWidgets": {
            "set": function(e) {
                s.setCssClass(this.$gutter, "ace_fade-fold-widgets", e);
            },
            "initialValue": !1
        },
        "showFoldWidgets": {
            "set": function(e) {
                this.$gutterLayer.setShowFoldWidgets(e);
            },
            "initialValue": !0
        },
        "showLineNumbers": {
            "set": function(e) {
                this.$gutterLayer.setShowLineNumbers(e), this.$loop.schedule(this.CHANGE_GUTTER);
            },
            "initialValue": !0
        },
        "displayIndentGuides": {
            "set": function(e) {
                this.$textLayer.setDisplayIndentGuides(e) && this.$loop.schedule(this.CHANGE_TEXT);
            },
            "initialValue": !0
        },
        "highlightGutterLine": {
            "set": function(e) {
                if (!this.$gutterLineHighlight) return this.$gutterLineHighlight = s.createElement("div"), 
                this.$gutterLineHighlight.className = "ace_gutter-active-line", void this.$gutter.appendChild(this.$gutterLineHighlight);
                this.$gutterLineHighlight.style.display = e ? "" : "none", this.$cursorLayer.$pixelPos && this.$updateGutterLineHighlight();
            },
            "initialValue": !1,
            "value": !0
        },
        "hScrollBarAlwaysVisible": {
            "set": function(e) {
                this.$hScrollBarAlwaysVisible && this.$horizScroll || this.$loop.schedule(this.CHANGE_SCROLL);
            },
            "initialValue": !1
        },
        "vScrollBarAlwaysVisible": {
            "set": function(e) {
                this.$vScrollBarAlwaysVisible && this.$vScroll || this.$loop.schedule(this.CHANGE_SCROLL);
            },
            "initialValue": !1
        },
        "fontSize": {
            "set": function(e) {
                "number" == typeof e && (e += "px"), this.container.style.fontSize = e, this.updateFontSize();
            },
            "initialValue": 12
        },
        "fontFamily": {
            "set": function(e) {
                this.container.style.fontFamily = e, this.updateFontSize();
            }
        },
        "maxLines": {
            "set": function(e) {
                this.updateFull();
            }
        },
        "minLines": {
            "set": function(e) {
                this.updateFull();
            }
        },
        "scrollPastEnd": {
            "set": function(e) {
                e = +e || 0, this.$scrollPastEnd != e && (this.$scrollPastEnd = e, this.$loop.schedule(this.CHANGE_SCROLL));
            },
            "initialValue": 0,
            "handlesSet": !0
        },
        "fixedWidthGutter": {
            "set": function(e) {
                this.$gutterLayer.$fixedWidth = !!e, this.$loop.schedule(this.CHANGE_GUTTER);
            }
        },
        "theme": {
            "set": function(e) {
                this.setTheme(e);
            },
            "get": function() {
                return this.$themeId || this.theme;
            },
            "initialValue": "./theme/textmate",
            "handlesSet": !0
        }
    }), t.VirtualRenderer = g;
}), ace.define("ace/worker/worker_client", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/net", "ace/lib/event_emitter", "ace/config" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/oop"), s = e("../lib/net"), r = e("../lib/event_emitter").EventEmitter, o = e("../config"), a = function(t, i, n, s) {
        if (this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this), this.changeListener = this.changeListener.bind(this), 
        this.onMessage = this.onMessage.bind(this), e.nameToUrl && !e.toUrl && (e.toUrl = e.nameToUrl), 
        o.get("packaged") || !e.toUrl) s = s || o.moduleUrl(i, "worker"); else {
            var r = this.$normalizePath;
            s = s || r(e.toUrl("ace/worker/worker.js", null, "_"));
            var a = {};
            t.forEach(function(t) {
                a[t] = r(e.toUrl(t, null, "_").replace(/(\.js)?(\?.*)?$/, ""));
            });
        }
        try {
            this.$worker = new Worker(s);
        } catch (e) {
            if (!(e instanceof window.DOMException)) throw e;
            var l = this.$workerBlob(s), h = window.URL || window.webkitURL, c = h.createObjectURL(l);
            this.$worker = new Worker(c), h.revokeObjectURL(c);
        }
        this.$worker.postMessage({
            "init": !0,
            "tlns": a,
            "module": i,
            "classname": n
        }), this.callbackId = 1, this.callbacks = {}, this.$worker.onmessage = this.onMessage;
    };
    (function() {
        n.implement(this, r), this.onMessage = function(e) {
            var t = e.data;
            switch (t.type) {
              case "event":
                this._signal(t.name, {
                    "data": t.data
                });
                break;

              case "call":
                var i = this.callbacks[t.id];
                i && (i(t.data), delete this.callbacks[t.id]);
                break;

              case "error":
                this.reportError(t.data);
                break;

              case "log":
                window.console && console.log && console.log.apply(console, t.data);
            }
        }, this.reportError = function(e) {
            window.console && console.error && console.error(e);
        }, this.$normalizePath = function(e) {
            return s.qualifyURL(e);
        }, this.terminate = function() {
            this._signal("terminate", {}), this.deltaQueue = null, this.$worker.terminate(), 
            this.$worker = null, this.$doc && this.$doc.off("change", this.changeListener), 
            this.$doc = null;
        }, this.send = function(e, t) {
            this.$worker.postMessage({
                "command": e,
                "args": t
            });
        }, this.call = function(e, t, i) {
            if (i) {
                var n = this.callbackId++;
                this.callbacks[n] = i, t.push(n);
            }
            this.send(e, t);
        }, this.emit = function(e, t) {
            try {
                this.$worker.postMessage({
                    "event": e,
                    "data": {
                        "data": t.data
                    }
                });
            } catch (e) {
                console.error(e.stack);
            }
        }, this.attachToDocument = function(e) {
            this.$doc && this.terminate(), this.$doc = e, this.call("setValue", [ e.getValue() ]), 
            e.on("change", this.changeListener);
        }, this.changeListener = function(e) {
            this.deltaQueue ? this.deltaQueue.push(e.data) : (this.deltaQueue = [ e.data ], 
            setTimeout(this.$sendDeltaQueue, 0));
        }, this.$sendDeltaQueue = function() {
            var e = this.deltaQueue;
            e && (this.deltaQueue = null, e.length > 20 && e.length > this.$doc.getLength() >> 1 ? this.call("setValue", [ this.$doc.getValue() ]) : this.emit("change", {
                "data": e
            }));
        }, this.$workerBlob = function(e) {
            var t = "importScripts('" + s.qualifyURL(e) + "');";
            try {
                return new Blob([ t ], {
                    "type": "application/javascript"
                });
            } catch (e) {
                var i = new (window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder)();
                return i.append(t), i.getBlob("application/javascript");
            }
        };
    }).call(a.prototype);
    var l = function(e, t, i) {
        this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this), this.changeListener = this.changeListener.bind(this), 
        this.callbackId = 1, this.callbacks = {}, this.messageBuffer = [];
        var n = null, s = !1, a = Object.create(r), l = this;
        this.$worker = {}, this.$worker.terminate = function() {}, this.$worker.postMessage = function(e) {
            l.messageBuffer.push(e), n && (s ? setTimeout(h) : h());
        }, this.setEmitSync = function(e) {
            s = e;
        };
        var h = function() {
            var e = l.messageBuffer.shift();
            e.command ? n[e.command].apply(n, e.args) : e.event && a._signal(e.event, e.data);
        };
        a.postMessage = function(e) {
            l.onMessage({
                "data": e
            });
        }, a.callback = function(e, t) {
            this.postMessage({
                "type": "call",
                "id": t,
                "data": e
            });
        }, a.emit = function(e, t) {
            this.postMessage({
                "type": "event",
                "name": e,
                "data": t
            });
        }, o.loadModule([ "worker", t ], function(e) {
            for (n = new e[i](a); l.messageBuffer.length; ) h();
        });
    };
    l.prototype = a.prototype, t.UIWorkerClient = l, t.WorkerClient = a;
}), ace.define("ace/placeholder", [ "require", "exports", "module", "ace/range", "ace/lib/event_emitter", "ace/lib/oop" ], function(e, t, i) {
    "use strict";
    var n = e("./range").Range, s = e("./lib/event_emitter").EventEmitter, r = e("./lib/oop"), o = function(e, t, i, n, s, r) {
        var o = this;
        this.length = t, this.session = e, this.doc = e.getDocument(), this.mainClass = s, 
        this.othersClass = r, this.$onUpdate = this.onUpdate.bind(this), this.doc.on("change", this.$onUpdate), 
        this.$others = n, this.$onCursorChange = function() {
            setTimeout(function() {
                o.onCursorChange();
            });
        }, this.$pos = i;
        var a = e.getUndoManager().$undoStack || e.getUndoManager().$undostack || {
            "length": -1
        };
        this.$undoStackDepth = a.length, this.setup(), e.selection.on("changeCursor", this.$onCursorChange);
    };
    (function() {
        r.implement(this, s), this.setup = function() {
            var e = this, t = this.doc, i = this.session, s = this.$pos;
            this.selectionBefore = i.selection.toJSON(), i.selection.inMultiSelectMode && i.selection.toSingleRange(), 
            this.pos = t.createAnchor(s.row, s.column), this.markerId = i.addMarker(new n(s.row, s.column, s.row, s.column + this.length), this.mainClass, null, !1), 
            this.pos.on("change", function(t) {
                i.removeMarker(e.markerId), e.markerId = i.addMarker(new n(t.value.row, t.value.column, t.value.row, t.value.column + e.length), e.mainClass, null, !1);
            }), this.others = [], this.$others.forEach(function(i) {
                var n = t.createAnchor(i.row, i.column);
                e.others.push(n);
            }), i.setUndoSelect(!1);
        }, this.showOtherMarkers = function() {
            if (!this.othersActive) {
                var e = this.session, t = this;
                this.othersActive = !0, this.others.forEach(function(i) {
                    i.markerId = e.addMarker(new n(i.row, i.column, i.row, i.column + t.length), t.othersClass, null, !1), 
                    i.on("change", function(s) {
                        e.removeMarker(i.markerId), i.markerId = e.addMarker(new n(s.value.row, s.value.column, s.value.row, s.value.column + t.length), t.othersClass, null, !1);
                    });
                });
            }
        }, this.hideOtherMarkers = function() {
            if (this.othersActive) {
                this.othersActive = !1;
                for (var e = 0; e < this.others.length; e++) this.session.removeMarker(this.others[e].markerId);
            }
        }, this.onUpdate = function(e) {
            var t = e.data, i = t.range;
            if (i.start.row === i.end.row && i.start.row === this.pos.row && !this.$updating) {
                this.$updating = !0;
                var s = "insertText" === t.action ? i.end.column - i.start.column : i.start.column - i.end.column;
                if (i.start.column >= this.pos.column && i.start.column <= this.pos.column + this.length + 1) {
                    var r = i.start.column - this.pos.column;
                    if (this.length += s, !this.session.$fromUndo) {
                        if ("insertText" === t.action) for (l = this.others.length - 1; l >= 0; l--) {
                            a = {
                                "row": (o = this.others[l]).row,
                                "column": o.column + r
                            };
                            o.row === i.start.row && i.start.column < o.column && (a.column += s), this.doc.insert(a, t.text);
                        } else if ("removeText" === t.action) for (l = this.others.length - 1; l >= 0; l--) {
                            var o = this.others[l], a = {
                                "row": o.row,
                                "column": o.column + r
                            };
                            o.row === i.start.row && i.start.column < o.column && (a.column += s), this.doc.remove(new n(a.row, a.column, a.row, a.column - s));
                        }
                        i.start.column === this.pos.column && "insertText" === t.action ? setTimeout(function() {
                            this.pos.setPosition(this.pos.row, this.pos.column - s);
                            for (var e = 0; e < this.others.length; e++) {
                                var t = this.others[e], n = {
                                    "row": t.row,
                                    "column": t.column - s
                                };
                                t.row === i.start.row && i.start.column < t.column && (n.column += s), t.setPosition(n.row, n.column);
                            }
                        }.bind(this), 0) : i.start.column === this.pos.column && "removeText" === t.action && setTimeout(function() {
                            for (var e = 0; e < this.others.length; e++) {
                                var t = this.others[e];
                                t.row === i.start.row && i.start.column < t.column && t.setPosition(t.row, t.column - s);
                            }
                        }.bind(this), 0);
                    }
                    this.pos._emit("change", {
                        "value": this.pos
                    });
                    for (var l = 0; l < this.others.length; l++) this.others[l]._emit("change", {
                        "value": this.others[l]
                    });
                }
                this.$updating = !1;
            }
        }, this.onCursorChange = function(e) {
            if (!this.$updating && this.session) {
                var t = this.session.selection.getCursor();
                t.row === this.pos.row && t.column >= this.pos.column && t.column <= this.pos.column + this.length ? (this.showOtherMarkers(), 
                this._emit("cursorEnter", e)) : (this.hideOtherMarkers(), this._emit("cursorLeave", e));
            }
        }, this.detach = function() {
            this.session.removeMarker(this.markerId), this.hideOtherMarkers(), this.doc.removeEventListener("change", this.$onUpdate), 
            this.session.selection.removeEventListener("changeCursor", this.$onCursorChange), 
            this.pos.detach();
            for (var e = 0; e < this.others.length; e++) this.others[e].detach();
            this.session.setUndoSelect(!0), this.session = null;
        }, this.cancel = function() {
            if (-1 === this.$undoStackDepth) throw Error("Canceling placeholders only supported with undo manager attached to session.");
            for (var e = this.session.getUndoManager(), t = (e.$undoStack || e.$undostack).length - this.$undoStackDepth, i = 0; i < t; i++) e.undo(!0);
            this.selectionBefore && this.session.selection.fromJSON(this.selectionBefore);
        };
    }).call(o.prototype), t.PlaceHolder = o;
}), ace.define("ace/mouse/multi_select_handler", [ "require", "exports", "module", "ace/lib/event", "ace/lib/useragent" ], function(e, t, i) {
    function n(e, t) {
        return e.row == t.row && e.column == t.column;
    }
    var s = e("../lib/event"), r = e("../lib/useragent");
    t.onMouseDown = function(e) {
        var t = e.domEvent, i = t.altKey, o = t.shiftKey, a = t.ctrlKey, l = e.getAccelKey(), h = e.getButton();
        if (a && r.isMac && (h = t.button), e.editor.inMultiSelectMode && 2 == h) e.editor.textInput.onContextMenu(e.domEvent); else if (a || i || l) {
            if (0 === h) {
                var c, u = e.editor, p = u.selection, d = u.inMultiSelectMode, f = e.getDocumentPosition(), m = p.getCursor(), g = e.inSelection() || p.isEmpty() && n(f, m), y = e.x, v = e.y, L = u.session, w = u.renderer.pixelToScreenCoordinates(y, v), b = w;
                if (u.$mouseHandler.$enableJumpToDef) a && i || l && i ? c = "add" : i && (c = "block"); else if (l && !i) {
                    if (c = "add", !d && o) return;
                } else i && (c = "block");
                if (c && r.isMac && t.ctrlKey && u.$mouseHandler.cancelContextMenu(), "add" == c) {
                    if (!d && g) return;
                    if (!d) {
                        var C = p.toOrientedRange();
                        u.addSelectionMarker(C);
                    }
                    var O = p.rangeList.rangeAtPoint(f);
                    u.$blockScrolling++, u.inVirtualSelectionMode = !0, o && (O = null, C = p.ranges[0], 
                    u.removeSelectionMarker(C)), u.once("mouseup", function() {
                        var e = p.toOrientedRange();
                        O && e.isEmpty() && n(O.cursor, e.cursor) ? p.substractPoint(e.cursor) : (o ? p.substractPoint(C.cursor) : C && (u.removeSelectionMarker(C), 
                        p.addRange(C)), p.addRange(e)), u.$blockScrolling--, u.inVirtualSelectionMode = !1;
                    });
                } else if ("block" == c) {
                    e.stop(), u.inVirtualSelectionMode = !0;
                    var S, x = [];
                    u.$blockScrolling++, d && !l ? p.toSingleRange() : !d && l && (S = p.toOrientedRange(), 
                    u.addSelectionMarker(S)), o ? w = L.documentToScreenPosition(p.lead) : p.moveToPosition(f), 
                    u.$blockScrolling--, b = {
                        "row": -1,
                        "column": -1
                    };
                    var E = function() {
                        var e = u.renderer.pixelToScreenCoordinates(y, v), t = L.screenToDocumentPosition(e.row, e.column);
                        n(b, e) && n(t, p.lead) || (b = e, u.$blockScrolling++, u.selection.moveToPosition(t), 
                        u.renderer.scrollCursorIntoView(), u.removeSelectionMarkers(x), x = p.rectangularRangeBlock(b, w), 
                        u.$mouseHandler.$clickSelection && 1 == x.length && x[0].isEmpty() && (x[0] = u.$mouseHandler.$clickSelection.clone()), 
                        x.forEach(u.addSelectionMarker, u), u.updateSelectionMarkers(), u.$blockScrolling--);
                    };
                    s.capture(u.container, function(e) {
                        y = e.clientX, v = e.clientY;
                    }, function(e) {
                        clearInterval(A), u.removeSelectionMarkers(x), x.length || (x = [ p.toOrientedRange() ]), 
                        u.$blockScrolling++, S && (u.removeSelectionMarker(S), p.toSingleRange(S));
                        for (var t = 0; t < x.length; t++) p.addRange(x[t]);
                        u.inVirtualSelectionMode = !1, u.$mouseHandler.$clickSelection = null, u.$blockScrolling--;
                    });
                    var A = setInterval(function() {
                        E();
                    }, 20);
                    return e.preventDefault();
                }
            }
        } else 0 === h && e.editor.inMultiSelectMode && e.editor.exitMultiSelectMode();
    };
}), ace.define("ace/commands/multi_select_commands", [ "require", "exports", "module", "ace/keyboard/hash_handler" ], function(e, t, i) {
    t.defaultCommands = [ {
        "name": "addCursorAbove",
        "exec": function(e) {
            e.selectMoreLines(-1);
        },
        "bindKey": {
            "win": "Ctrl-Alt-Up",
            "mac": "Ctrl-Alt-Up"
        },
        "scrollIntoView": "cursor",
        "readonly": !0
    }, {
        "name": "addCursorBelow",
        "exec": function(e) {
            e.selectMoreLines(1);
        },
        "bindKey": {
            "win": "Ctrl-Alt-Down",
            "mac": "Ctrl-Alt-Down"
        },
        "scrollIntoView": "cursor",
        "readonly": !0
    }, {
        "name": "addCursorAboveSkipCurrent",
        "exec": function(e) {
            e.selectMoreLines(-1, !0);
        },
        "bindKey": {
            "win": "Ctrl-Alt-Shift-Up",
            "mac": "Ctrl-Alt-Shift-Up"
        },
        "scrollIntoView": "cursor",
        "readonly": !0
    }, {
        "name": "addCursorBelowSkipCurrent",
        "exec": function(e) {
            e.selectMoreLines(1, !0);
        },
        "bindKey": {
            "win": "Ctrl-Alt-Shift-Down",
            "mac": "Ctrl-Alt-Shift-Down"
        },
        "scrollIntoView": "cursor",
        "readonly": !0
    }, {
        "name": "selectMoreBefore",
        "exec": function(e) {
            e.selectMore(-1);
        },
        "bindKey": {
            "win": "Ctrl-Alt-Left",
            "mac": "Ctrl-Alt-Left"
        },
        "scrollIntoView": "cursor",
        "readonly": !0
    }, {
        "name": "selectMoreAfter",
        "exec": function(e) {
            e.selectMore(1);
        },
        "bindKey": {
            "win": "Ctrl-Alt-Right",
            "mac": "Ctrl-Alt-Right"
        },
        "scrollIntoView": "cursor",
        "readonly": !0
    }, {
        "name": "selectNextBefore",
        "exec": function(e) {
            e.selectMore(-1, !0);
        },
        "bindKey": {
            "win": "Ctrl-Alt-Shift-Left",
            "mac": "Ctrl-Alt-Shift-Left"
        },
        "scrollIntoView": "cursor",
        "readonly": !0
    }, {
        "name": "selectNextAfter",
        "exec": function(e) {
            e.selectMore(1, !0);
        },
        "bindKey": {
            "win": "Ctrl-Alt-Shift-Right",
            "mac": "Ctrl-Alt-Shift-Right"
        },
        "scrollIntoView": "cursor",
        "readonly": !0
    }, {
        "name": "splitIntoLines",
        "exec": function(e) {
            e.multiSelect.splitIntoLines();
        },
        "bindKey": {
            "win": "Ctrl-Alt-L",
            "mac": "Ctrl-Alt-L"
        },
        "readonly": !0
    }, {
        "name": "alignCursors",
        "exec": function(e) {
            e.alignCursors();
        },
        "bindKey": {
            "win": "Ctrl-Alt-A",
            "mac": "Ctrl-Alt-A"
        },
        "scrollIntoView": "cursor"
    }, {
        "name": "findAll",
        "exec": function(e) {
            e.findAll();
        },
        "bindKey": {
            "win": "Ctrl-Alt-K",
            "mac": "Ctrl-Alt-G"
        },
        "scrollIntoView": "cursor",
        "readonly": !0
    } ], t.multiSelectCommands = [ {
        "name": "singleSelection",
        "bindKey": "esc",
        "exec": function(e) {
            e.exitMultiSelectMode();
        },
        "scrollIntoView": "cursor",
        "readonly": !0,
        "isAvailable": function(e) {
            return e && e.inMultiSelectMode;
        }
    } ];
    var n = e("../keyboard/hash_handler").HashHandler;
    t.keyboardHandler = new n(t.multiSelectCommands);
}), ace.define("ace/multi_select", [ "require", "exports", "module", "ace/range_list", "ace/range", "ace/selection", "ace/mouse/multi_select_handler", "ace/lib/event", "ace/lib/lang", "ace/commands/multi_select_commands", "ace/search", "ace/edit_session", "ace/editor", "ace/config" ], function(e, t, i) {
    function n(e, t, i) {
        return f.$options.wrap = !0, f.$options.needle = t, f.$options.backwards = -1 == i, 
        f.find(e);
    }
    function s(e, t) {
        return e.row == t.row && e.column == t.column;
    }
    function r(e) {
        e.$multiselectOnSessionChange || (e.$onAddRange = e.$onAddRange.bind(e), e.$onRemoveRange = e.$onRemoveRange.bind(e), 
        e.$onMultiSelect = e.$onMultiSelect.bind(e), e.$onSingleSelect = e.$onSingleSelect.bind(e), 
        e.$multiselectOnSessionChange = t.onSessionChange.bind(e), e.$checkMultiselectChange = e.$checkMultiselectChange.bind(e), 
        e.$multiselectOnSessionChange(e), e.on("changeSession", e.$multiselectOnSessionChange), 
        e.on("mousedown", c), e.commands.addCommands(d.defaultCommands), o(e));
    }
    function o(e) {
        function t(t) {
            n && (e.renderer.setMouseCursor(""), n = !1);
        }
        var i = e.textInput.getElement(), n = !1;
        u.addListener(i, "keydown", function(i) {
            18 != i.keyCode || i.ctrlKey || i.shiftKey || i.metaKey ? n && t() : n || (e.renderer.setMouseCursor("crosshair"), 
            n = !0);
        }), u.addListener(i, "keyup", t), u.addListener(i, "blur", t);
    }
    var a = e("./range_list").RangeList, l = e("./range").Range, h = e("./selection").Selection, c = e("./mouse/multi_select_handler").onMouseDown, u = e("./lib/event"), p = e("./lib/lang"), d = e("./commands/multi_select_commands");
    t.commands = d.defaultCommands.concat(d.multiSelectCommands);
    var f = new (0, e("./search").Search)(), m = e("./edit_session").EditSession;
    (function() {
        this.getSelectionMarkers = function() {
            return this.$selectionMarkers;
        };
    }).call(m.prototype), function() {
        this.ranges = null, this.rangeList = null, this.addRange = function(e, t) {
            if (e) {
                if (!this.inMultiSelectMode && 0 === this.rangeCount) {
                    var i = this.toOrientedRange();
                    if (this.rangeList.add(i), this.rangeList.add(e), 2 != this.rangeList.ranges.length) return this.rangeList.removeAll(), 
                    t || this.fromOrientedRange(e);
                    this.rangeList.removeAll(), this.rangeList.add(i), this.$onAddRange(i);
                }
                e.cursor || (e.cursor = e.end);
                var n = this.rangeList.add(e);
                return this.$onAddRange(e), n.length && this.$onRemoveRange(n), this.rangeCount > 1 && !this.inMultiSelectMode && (this._signal("multiSelect"), 
                this.inMultiSelectMode = !0, this.session.$undoSelect = !1, this.rangeList.attach(this.session)), 
                t || this.fromOrientedRange(e);
            }
        }, this.toSingleRange = function(e) {
            e = e || this.ranges[0];
            var t = this.rangeList.removeAll();
            t.length && this.$onRemoveRange(t), e && this.fromOrientedRange(e);
        }, this.substractPoint = function(e) {
            var t = this.rangeList.substractPoint(e);
            if (t) return this.$onRemoveRange(t), t[0];
        }, this.mergeOverlappingRanges = function() {
            var e = this.rangeList.merge();
            e.length ? this.$onRemoveRange(e) : this.ranges[0] && this.fromOrientedRange(this.ranges[0]);
        }, this.$onAddRange = function(e) {
            this.rangeCount = this.rangeList.ranges.length, this.ranges.unshift(e), this._signal("addRange", {
                "range": e
            });
        }, this.$onRemoveRange = function(e) {
            if (this.rangeCount = this.rangeList.ranges.length, 1 == this.rangeCount && this.inMultiSelectMode) {
                var t = this.rangeList.ranges.pop();
                e.push(t), this.rangeCount = 0;
            }
            for (var i = e.length; i--; ) {
                var n = this.ranges.indexOf(e[i]);
                this.ranges.splice(n, 1);
            }
            this._signal("removeRange", {
                "ranges": e
            }), 0 === this.rangeCount && this.inMultiSelectMode && (this.inMultiSelectMode = !1, 
            this._signal("singleSelect"), this.session.$undoSelect = !0, this.rangeList.detach(this.session)), 
            (t = t || this.ranges[0]) && !t.isEqual(this.getRange()) && this.fromOrientedRange(t);
        }, this.$initRangeList = function() {
            this.rangeList || (this.rangeList = new a(), this.ranges = [], this.rangeCount = 0);
        }, this.getAllRanges = function() {
            return this.rangeCount ? this.rangeList.ranges.concat() : [ this.getRange() ];
        }, this.splitIntoLines = function() {
            if (this.rangeCount > 1) {
                var e = this.rangeList.ranges, t = e[e.length - 1], i = l.fromPoints(e[0].start, t.end);
                this.toSingleRange(), this.setSelectionRange(i, t.cursor == t.start);
            } else {
                var i = this.getRange(), n = this.isBackwards(), s = i.start.row, r = i.end.row;
                if (s == r) {
                    if (n) var o = i.end, a = i.start; else var o = i.start, a = i.end;
                    return this.addRange(l.fromPoints(a, a)), void this.addRange(l.fromPoints(o, o));
                }
                var h = [], c = this.getLineRange(s, !0);
                c.start.column = i.start.column, h.push(c);
                for (var u = s + 1; u < r; u++) h.push(this.getLineRange(u, !0));
                (c = this.getLineRange(r, !0)).end.column = i.end.column, h.push(c), h.forEach(this.addRange, this);
            }
        }, this.toggleBlockSelection = function() {
            if (this.rangeCount > 1) {
                var e = this.rangeList.ranges, t = e[e.length - 1], i = l.fromPoints(e[0].start, t.end);
                this.toSingleRange(), this.setSelectionRange(i, t.cursor == t.start);
            } else {
                var n = this.session.documentToScreenPosition(this.selectionLead), s = this.session.documentToScreenPosition(this.selectionAnchor);
                this.rectangularRangeBlock(n, s).forEach(this.addRange, this);
            }
        }, this.rectangularRangeBlock = function(e, t, i) {
            var n = [], r = e.column < t.column;
            if (r) var o = e.column, a = t.column; else var o = t.column, a = e.column;
            var h = e.row < t.row;
            if (h) var c = e.row, u = t.row; else var c = t.row, u = e.row;
            o < 0 && (o = 0), c < 0 && (c = 0), c == u && (i = !0);
            for (var p = c; p <= u; p++) {
                var d = l.fromPoints(this.session.screenToDocumentPosition(p, o), this.session.screenToDocumentPosition(p, a));
                if (d.isEmpty()) {
                    if (f && s(d.end, f)) break;
                    var f = d.end;
                }
                d.cursor = r ? d.start : d.end, n.push(d);
            }
            if (h && n.reverse(), !i) {
                for (var m = n.length - 1; n[m].isEmpty() && m > 0; ) m--;
                if (m > 0) for (var g = 0; n[g].isEmpty(); ) g++;
                for (var y = m; y >= g; y--) n[y].isEmpty() && n.splice(y, 1);
            }
            return n;
        };
    }.call(h.prototype);
    var g = e("./editor").Editor;
    (function() {
        this.updateSelectionMarkers = function() {
            this.renderer.updateCursor(), this.renderer.updateBackMarkers();
        }, this.addSelectionMarker = function(e) {
            e.cursor || (e.cursor = e.end);
            var t = this.getSelectionStyle();
            return e.marker = this.session.addMarker(e, "ace_selection", t), this.session.$selectionMarkers.push(e), 
            this.session.selectionMarkerCount = this.session.$selectionMarkers.length, e;
        }, this.removeSelectionMarker = function(e) {
            if (e.marker) {
                this.session.removeMarker(e.marker);
                var t = this.session.$selectionMarkers.indexOf(e);
                -1 != t && this.session.$selectionMarkers.splice(t, 1), this.session.selectionMarkerCount = this.session.$selectionMarkers.length;
            }
        }, this.removeSelectionMarkers = function(e) {
            for (var t = this.session.$selectionMarkers, i = e.length; i--; ) {
                var n = e[i];
                if (n.marker) {
                    this.session.removeMarker(n.marker);
                    var s = t.indexOf(n);
                    -1 != s && t.splice(s, 1);
                }
            }
            this.session.selectionMarkerCount = t.length;
        }, this.$onAddRange = function(e) {
            this.addSelectionMarker(e.range), this.renderer.updateCursor(), this.renderer.updateBackMarkers();
        }, this.$onRemoveRange = function(e) {
            this.removeSelectionMarkers(e.ranges), this.renderer.updateCursor(), this.renderer.updateBackMarkers();
        }, this.$onMultiSelect = function(e) {
            this.inMultiSelectMode || (this.inMultiSelectMode = !0, this.setStyle("ace_multiselect"), 
            this.keyBinding.addKeyboardHandler(d.keyboardHandler), this.commands.setDefaultHandler("exec", this.$onMultiSelectExec), 
            this.renderer.updateCursor(), this.renderer.updateBackMarkers());
        }, this.$onSingleSelect = function(e) {
            this.session.multiSelect.inVirtualMode || (this.inMultiSelectMode = !1, this.unsetStyle("ace_multiselect"), 
            this.keyBinding.removeKeyboardHandler(d.keyboardHandler), this.commands.removeDefaultHandler("exec", this.$onMultiSelectExec), 
            this.renderer.updateCursor(), this.renderer.updateBackMarkers(), this._emit("changeSelection"));
        }, this.$onMultiSelectExec = function(e) {
            var t = e.command, i = e.editor;
            if (i.multiSelect) {
                if (t.multiSelectAction) "forEach" == t.multiSelectAction ? n = i.forEachSelection(t, e.args) : "forEachLine" == t.multiSelectAction ? n = i.forEachSelection(t, e.args, !0) : "single" == t.multiSelectAction ? (i.exitMultiSelectMode(), 
                n = t.exec(i, e.args || {})) : n = t.multiSelectAction(i, e.args || {}); else {
                    var n = t.exec(i, e.args || {});
                    i.multiSelect.addRange(i.multiSelect.toOrientedRange()), i.multiSelect.mergeOverlappingRanges();
                }
                return n;
            }
        }, this.forEachSelection = function(e, t, i) {
            if (!this.inVirtualSelectionMode) {
                var n, s = i && i.keepOrder, r = 1 == i || i && i.$byLines, o = this.session, a = this.selection, l = a.rangeList, c = (s ? a : l).ranges;
                if (!c.length) return e.exec ? e.exec(this, t || {}) : e(this, t || {});
                var u = a._eventRegistry;
                a._eventRegistry = {};
                var p = new h(o);
                this.inVirtualSelectionMode = !0;
                for (var d = c.length; d--; ) {
                    if (r) for (;d > 0 && c[d].start.row == c[d - 1].end.row; ) d--;
                    p.fromOrientedRange(c[d]), p.index = d, this.selection = o.selection = p;
                    var f = e.exec ? e.exec(this, t || {}) : e(this, t || {});
                    n || void 0 === f || (n = f), p.toOrientedRange(c[d]);
                }
                p.detach(), this.selection = o.selection = a, this.inVirtualSelectionMode = !1, 
                a._eventRegistry = u, a.mergeOverlappingRanges();
                var m = this.renderer.$scrollAnimation;
                return this.onCursorChange(), this.onSelectionChange(), m && m.from == m.to && this.renderer.animateScrolling(m.from), 
                n;
            }
        }, this.exitMultiSelectMode = function() {
            this.inMultiSelectMode && !this.inVirtualSelectionMode && this.multiSelect.toSingleRange();
        }, this.getSelectedText = function() {
            var e = "";
            if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {
                for (var t = this.multiSelect.rangeList.ranges, i = [], n = 0; n < t.length; n++) i.push(this.session.getTextRange(t[n]));
                var s = this.session.getDocument().getNewLineCharacter();
                (e = i.join(s)).length == (i.length - 1) * s.length && (e = "");
            } else this.selection.isEmpty() || (e = this.session.getTextRange(this.getSelectionRange()));
            return e;
        }, this.$checkMultiselectChange = function(e, t) {
            if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {
                var i = this.multiSelect.ranges[0];
                if (this.multiSelect.isEmpty() && t == this.multiSelect.anchor) return;
                var n = t == this.multiSelect.anchor ? i.cursor == i.start ? i.end : i.start : i.cursor;
                n.row == t.row && this.session.$clipPositionToDocument(n.row, n.column).column == t.column || this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());
            }
        }, this.findAll = function(e, t, i) {
            if (t = t || {}, t.needle = e || t.needle, void 0 == t.needle) {
                var n = this.selection.isEmpty() ? this.selection.getWordRange() : this.selection.getRange();
                t.needle = this.session.getTextRange(n);
            }
            this.$search.set(t);
            var s = this.$search.findAll(this.session);
            if (!s.length) return 0;
            this.$blockScrolling += 1;
            var r = this.multiSelect;
            i || r.toSingleRange(s[0]);
            for (var o = s.length; o--; ) r.addRange(s[o], !0);
            return n && r.rangeList.rangeAtPoint(n.start) && r.addRange(n, !0), this.$blockScrolling -= 1, 
            s.length;
        }, this.selectMoreLines = function(e, t) {
            var i = this.selection.toOrientedRange(), n = i.cursor == i.end, s = this.session.documentToScreenPosition(i.cursor);
            this.selection.$desiredColumn && (s.column = this.selection.$desiredColumn);
            var r = this.session.screenToDocumentPosition(s.row + e, s.column);
            if (i.isEmpty()) a = r; else var o = this.session.documentToScreenPosition(n ? i.end : i.start), a = this.session.screenToDocumentPosition(o.row + e, o.column);
            if (n) (h = l.fromPoints(r, a)).cursor = h.start; else {
                var h = l.fromPoints(a, r);
                h.cursor = h.end;
            }
            if (h.desiredColumn = s.column, this.selection.inMultiSelectMode) {
                if (t) var c = i.cursor;
            } else this.selection.addRange(i);
            this.selection.addRange(h), c && this.selection.substractPoint(c);
        }, this.transposeSelections = function(e) {
            for (var t = this.session, i = t.multiSelect, n = i.ranges, s = n.length; s--; ) if ((o = n[s]).isEmpty()) {
                a = t.getWordRange(o.start.row, o.start.column);
                o.start.row = a.start.row, o.start.column = a.start.column, o.end.row = a.end.row, 
                o.end.column = a.end.column;
            }
            i.mergeOverlappingRanges();
            for (var r = [], s = n.length; s--; ) {
                var o = n[s];
                r.unshift(t.getTextRange(o));
            }
            e < 0 ? r.unshift(r.pop()) : r.push(r.shift());
            for (s = n.length; s--; ) {
                var a = (o = n[s]).clone();
                t.replace(o, r[s]), o.start.row = a.start.row, o.start.column = a.start.column;
            }
        }, this.selectMore = function(e, t, i) {
            var s = this.session, r = s.multiSelect.toOrientedRange();
            if (!r.isEmpty() || (r = s.getWordRange(r.start.row, r.start.column), r.cursor = -1 == e ? r.start : r.end, 
            this.multiSelect.addRange(r), !i)) {
                var o = n(s, s.getTextRange(r), e);
                o && (o.cursor = -1 == e ? o.start : o.end, this.$blockScrolling += 1, this.session.unfold(o), 
                this.multiSelect.addRange(o), this.$blockScrolling -= 1, this.renderer.scrollCursorIntoView(null, .5)), 
                t && this.multiSelect.substractPoint(r.cursor);
            }
        }, this.alignCursors = function() {
            var e = this.session, t = e.multiSelect, i = t.ranges, n = -1, s = i.filter(function(e) {
                if (e.cursor.row == n) return !0;
                n = e.cursor.row;
            });
            if (i.length && s.length != i.length - 1) {
                s.forEach(function(e) {
                    t.substractPoint(e.cursor);
                });
                var r = 0, o = 1 / 0, a = i.map(function(t) {
                    var i = t.cursor, n = e.getLine(i.row).substr(i.column).search(/\S/g);
                    return -1 == n && (n = 0), i.column > r && (r = i.column), n < o && (o = n), n;
                });
                i.forEach(function(t, i) {
                    var n = t.cursor, s = r - n.column, h = a[i] - o;
                    s > h ? e.insert(n, p.stringRepeat(" ", s - h)) : e.remove(new l(n.row, n.column, n.row, n.column - s + h)), 
                    t.start.column = t.end.column = r, t.start.row = t.end.row = n.row, t.cursor = t.end;
                }), t.fromOrientedRange(i[0]), this.renderer.updateCursor(), this.renderer.updateBackMarkers();
            } else {
                var h = this.selection.getRange(), c = h.start.row, u = h.end.row, d = c == u;
                if (d) {
                    var f, m = this.session.getLength();
                    do {
                        f = this.session.getLine(u);
                    } while (/[=:]/.test(f) && ++u < m);
                    do {
                        f = this.session.getLine(c);
                    } while (/[=:]/.test(f) && --c > 0);
                    c < 0 && (c = 0), u >= m && (u = m - 1);
                }
                var g = this.session.doc.removeLines(c, u);
                g = this.$reAlignText(g, d), this.session.doc.insert({
                    "row": c,
                    "column": 0
                }, g.join("\n") + "\n"), d || (h.start.column = 0, h.end.column = g[g.length - 1].length), 
                this.selection.setRange(h);
            }
        }, this.$reAlignText = function(e, t) {
            function i(e) {
                return p.stringRepeat(" ", e);
            }
            function n(e) {
                return e[2] ? i(s) + e[2] + i(r - e[2].length + o) + e[4].replace(/^([=:])\s+/, "$1 ") : e[0];
            }
            var s, r, o, a = !0, l = !0;
            return e.map(function(e) {
                var t = e.match(/(\s*)(.*?)(\s*)([=:].*)/);
                return t ? null == s ? (s = t[1].length, r = t[2].length, o = t[3].length, t) : (s + r + o != t[1].length + t[2].length + t[3].length && (l = !1), 
                s != t[1].length && (a = !1), s > t[1].length && (s = t[1].length), r < t[2].length && (r = t[2].length), 
                o > t[3].length && (o = t[3].length), t) : [ e ];
            }).map(t ? n : a ? l ? function(e) {
                return e[2] ? i(s + r - e[2].length) + e[2] + i(o, " ") + e[4].replace(/^([=:])\s+/, "$1 ") : e[0];
            } : n : function(e) {
                return e[2] ? i(s) + e[2] + i(o) + e[4].replace(/^([=:])\s+/, "$1 ") : e[0];
            });
        };
    }).call(g.prototype), t.onSessionChange = function(e) {
        var t = e.session;
        t && !t.multiSelect && (t.$selectionMarkers = [], t.selection.$initRangeList(), 
        t.multiSelect = t.selection), this.multiSelect = t && t.multiSelect;
        var i = e.oldSession;
        i && (i.multiSelect.off("addRange", this.$onAddRange), i.multiSelect.off("removeRange", this.$onRemoveRange), 
        i.multiSelect.off("multiSelect", this.$onMultiSelect), i.multiSelect.off("singleSelect", this.$onSingleSelect), 
        i.multiSelect.lead.off("change", this.$checkMultiselectChange), i.multiSelect.anchor.off("change", this.$checkMultiselectChange)), 
        t && (t.multiSelect.on("addRange", this.$onAddRange), t.multiSelect.on("removeRange", this.$onRemoveRange), 
        t.multiSelect.on("multiSelect", this.$onMultiSelect), t.multiSelect.on("singleSelect", this.$onSingleSelect), 
        t.multiSelect.lead.on("change", this.$checkMultiselectChange), t.multiSelect.anchor.on("change", this.$checkMultiselectChange)), 
        t && this.inMultiSelectMode != t.selection.inMultiSelectMode && (t.selection.inMultiSelectMode ? this.$onMultiSelect() : this.$onSingleSelect());
    }, t.MultiSelect = r, e("./config").defineOptions(g.prototype, "editor", {
        "enableMultiselect": {
            "set": function(e) {
                r(this), e ? (this.on("changeSession", this.$multiselectOnSessionChange), this.on("mousedown", c)) : (this.off("changeSession", this.$multiselectOnSessionChange), 
                this.off("mousedown", c));
            },
            "value": !0
        }
    });
}), ace.define("ace/mode/folding/fold_mode", [ "require", "exports", "module", "ace/range" ], function(e, t, i) {
    "use strict";
    var n = e("../../range").Range, s = t.FoldMode = function() {};
    (function() {
        this.foldingStartMarker = null, this.foldingStopMarker = null, this.getFoldWidget = function(e, t, i) {
            var n = e.getLine(i);
            return this.foldingStartMarker.test(n) ? "start" : "markbeginend" == t && this.foldingStopMarker && this.foldingStopMarker.test(n) ? "end" : "";
        }, this.getFoldWidgetRange = function(e, t, i) {
            return null;
        }, this.indentationBlock = function(e, t, i) {
            var s = /\S/, r = e.getLine(t), o = r.search(s);
            if (-1 != o) {
                for (var a = i || r.length, l = e.getLength(), h = t, c = t; ++t < l; ) {
                    var u = e.getLine(t).search(s);
                    if (-1 != u) {
                        if (u <= o) break;
                        c = t;
                    }
                }
                if (c > h) {
                    var p = e.getLine(c).length;
                    return new n(h, a, c, p);
                }
            }
        }, this.openingBracketBlock = function(e, t, i, s, r) {
            var o = {
                "row": i,
                "column": s + 1
            }, a = e.$findClosingBracket(t, o, r);
            if (a) {
                var l = e.foldWidgets[a.row];
                return null == l && (l = e.getFoldWidget(a.row)), "start" == l && a.row > o.row && (a.row--, 
                a.column = e.getLine(a.row).length), n.fromPoints(o, a);
            }
        }, this.closingBracketBlock = function(e, t, i, s, r) {
            var o = {
                "row": i,
                "column": s
            }, a = e.$findOpeningBracket(t, o);
            if (a) return a.column++, o.column--, n.fromPoints(a, o);
        };
    }).call(s.prototype);
}), ace.define("ace/theme/textmate", [ "require", "exports", "module", "ace/lib/dom" ], function(e, t, i) {
    "use strict";
    t.isDark = !1, t.cssClass = "ace-tm", t.cssText = '.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}', 
    e("../lib/dom").importCssString(t.cssText, t.cssClass);
}), ace.define("ace/line_widgets", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/dom", "ace/range" ], function(e, t, i) {
    "use strict";
    function n(e) {
        this.session = e, this.session.widgetManager = this, this.session.getRowLength = this.getRowLength, 
        this.session.$getWidgetScreenLength = this.$getWidgetScreenLength, this.updateOnChange = this.updateOnChange.bind(this), 
        this.renderWidgets = this.renderWidgets.bind(this), this.measureWidgets = this.measureWidgets.bind(this), 
        this.session._changedWidgets = [], this.$onChangeEditor = this.$onChangeEditor.bind(this), 
        this.session.on("change", this.updateOnChange), this.session.on("changeEditor", this.$onChangeEditor);
    }
    e("./lib/oop");
    var s = e("./lib/dom");
    e("./range").Range;
    (function() {
        this.getRowLength = function(e) {
            var t;
            return t = this.lineWidgets ? this.lineWidgets[e] && this.lineWidgets[e].rowCount || 0 : 0, 
            this.$useWrapMode && this.$wrapData[e] ? this.$wrapData[e].length + 1 + t : 1 + t;
        }, this.$getWidgetScreenLength = function() {
            var e = 0;
            return this.lineWidgets.forEach(function(t) {
                t && t.rowCount && (e += t.rowCount);
            }), e;
        }, this.$onChangeEditor = function(e) {
            this.attach(e.editor);
        }, this.attach = function(e) {
            e && e.widgetManager && e.widgetManager != this && e.widgetManager.detach(), this.editor != e && (this.detach(), 
            this.editor = e, e && (e.widgetManager = this, e.renderer.on("beforeRender", this.measureWidgets), 
            e.renderer.on("afterRender", this.renderWidgets)));
        }, this.detach = function(e) {
            var t = this.editor;
            if (t) {
                this.editor = null, t.widgetManager = null, t.renderer.off("beforeRender", this.measureWidgets), 
                t.renderer.off("afterRender", this.renderWidgets);
                var i = this.session.lineWidgets;
                i && i.forEach(function(e) {
                    e && e.el && e.el.parentNode && (e._inDocument = !1, e.el.parentNode.removeChild(e.el));
                });
            }
        }, this.updateOnChange = function(e) {
            var t = this.session.lineWidgets;
            if (t) {
                var i = e.data, n = i.range, s = n.start.row, r = n.end.row - s;
                if (0 === r) ; else if ("removeText" == i.action || "removeLines" == i.action) t.splice(s + 1, r).forEach(function(e) {
                    e && this.removeLineWidget(e);
                }, this), this.$updateRows(); else {
                    var o = new Array(r);
                    o.unshift(s, 0), t.splice.apply(t, o), this.$updateRows();
                }
            }
        }, this.$updateRows = function() {
            var e = this.session.lineWidgets;
            if (e) {
                var t = !0;
                e.forEach(function(e, i) {
                    e && (t = !1, e.row = i);
                }), t && (this.session.lineWidgets = null);
            }
        }, this.addLineWidget = function(e) {
            this.session.lineWidgets || (this.session.lineWidgets = new Array(this.session.getLength())), 
            this.session.lineWidgets[e.row] = e;
            var t = this.editor.renderer;
            return e.html && !e.el && (e.el = s.createElement("div"), e.el.innerHTML = e.html), 
            e.el && (s.addCssClass(e.el, "ace_lineWidgetContainer"), e.el.style.position = "absolute", 
            e.el.style.zIndex = 5, t.container.appendChild(e.el), e._inDocument = !0), e.coverGutter || (e.el.style.zIndex = 3), 
            e.pixelHeight || (e.pixelHeight = e.el.offsetHeight), null == e.rowCount && (e.rowCount = e.pixelHeight / t.layerConfig.lineHeight), 
            this.session._emit("changeFold", {
                "data": {
                    "start": {
                        "row": e.row
                    }
                }
            }), this.$updateRows(), this.renderWidgets(null, t), e;
        }, this.removeLineWidget = function(e) {
            if (e._inDocument = !1, e.el && e.el.parentNode && e.el.parentNode.removeChild(e.el), 
            e.editor && e.editor.destroy) try {
                e.editor.destroy();
            } catch (e) {}
            this.session.lineWidgets && (this.session.lineWidgets[e.row] = void 0), this.session._emit("changeFold", {
                "data": {
                    "start": {
                        "row": e.row
                    }
                }
            }), this.$updateRows();
        }, this.onWidgetChanged = function(e) {
            this.session._changedWidgets.push(e), this.editor && this.editor.renderer.updateFull();
        }, this.measureWidgets = function(e, t) {
            var i = this.session._changedWidgets, n = t.layerConfig;
            if (i && i.length) {
                for (var s = 1 / 0, r = 0; r < i.length; r++) {
                    var o = i[r];
                    o._inDocument || (o._inDocument = !0, t.container.appendChild(o.el)), o.h = o.el.offsetHeight, 
                    o.fixedWidth || (o.w = o.el.offsetWidth, o.screenWidth = Math.ceil(o.w / n.characterWidth));
                    var a = o.h / n.lineHeight;
                    o.coverLine && (a -= this.session.getRowLineCount(o.row)) < 0 && (a = 0), o.rowCount != a && (o.rowCount = a, 
                    o.row < s && (s = o.row));
                }
                s != 1 / 0 && (this.session._emit("changeFold", {
                    "data": {
                        "start": {
                            "row": s
                        }
                    }
                }), this.session.lineWidgetWidth = null), this.session._changedWidgets = [];
            }
        }, this.renderWidgets = function(e, t) {
            var i = t.layerConfig, n = this.session.lineWidgets;
            if (n) {
                for (var s = Math.min(this.firstRow, i.firstRow), r = Math.max(this.lastRow, i.lastRow, n.length); s > 0 && !n[s]; ) s--;
                this.firstRow = i.firstRow, this.lastRow = i.lastRow, t.$cursorLayer.config = i;
                for (var o = s; o <= r; o++) {
                    var a = n[o];
                    if (a && a.el) {
                        a._inDocument || (a._inDocument = !0, t.container.appendChild(a.el));
                        var l = t.$cursorLayer.getPixelPosition({
                            "row": o,
                            "column": 0
                        }, !0).top;
                        a.coverLine || (l += i.lineHeight * this.session.getRowLineCount(a.row)), a.el.style.top = l - i.offset + "px";
                        var h = a.coverGutter ? 0 : t.gutterWidth;
                        a.fixedWidth || (h -= t.scrollLeft), a.el.style.left = h + "px", a.fixedWidth ? a.el.style.right = t.scrollBar.getWidth() + "px" : a.el.style.right = "";
                    }
                }
            }
        };
    }).call(n.prototype), t.LineWidgets = n;
}), ace.define("ace/ext/error_marker", [ "require", "exports", "module", "ace/line_widgets", "ace/lib/dom", "ace/range" ], function(e, t, i) {
    "use strict";
    function n(e, t, i) {
        for (var n = 0, s = e.length - 1; n <= s; ) {
            var r = n + s >> 1, o = i(t, e[r]);
            if (o > 0) n = r + 1; else {
                if (!(o < 0)) return r;
                s = r - 1;
            }
        }
        return -(n + 1);
    }
    function s(e, t, i) {
        var s = e.getAnnotations().sort(a.comparePoints);
        if (s.length) {
            var r = n(s, {
                "row": t,
                "column": -1
            }, a.comparePoints);
            r < 0 && (r = -r - 1), r >= s.length ? r = i > 0 ? 0 : s.length - 1 : 0 === r && i < 0 && (r = s.length - 1);
            var o = s[r];
            if (o && i) {
                if (o.row === t) {
                    do {
                        o = s[r += i];
                    } while (o && o.row === t);
                    if (!o) return s.slice();
                }
                var l = [];
                t = o.row;
                do {
                    l[i < 0 ? "unshift" : "push"](o), o = s[r += i];
                } while (o && o.row == t);
                return l.length && l;
            }
        }
    }
    var r = e("../line_widgets").LineWidgets, o = e("../lib/dom"), a = e("../range").Range;
    t.showErrorMarker = function(e, t) {
        var i = e.session;
        i.widgetManager || (i.widgetManager = new r(i), i.widgetManager.attach(e));
        var n = e.getCursorPosition(), a = n.row, l = i.lineWidgets && i.lineWidgets[a];
        l ? l.destroy() : a -= t;
        var h, c = s(i, a, t);
        if (c) {
            var u = c[0];
            n.column = (u.pos && "number" != typeof u.column ? u.pos.sc : u.column) || 0, n.row = u.row, 
            h = e.renderer.$gutterLayer.$annotations[n.row];
        } else {
            if (l) return;
            h = {
                "text": [ "Looks good!" ],
                "className": "ace_ok"
            };
        }
        e.session.unfold(n.row), e.selection.moveToPosition(n);
        var p = {
            "row": n.row,
            "fixedWidth": !0,
            "coverGutter": !0,
            "el": o.createElement("div")
        }, d = p.el.appendChild(o.createElement("div")), f = p.el.appendChild(o.createElement("div"));
        f.className = "error_widget_arrow " + h.className;
        var m = e.renderer.$cursorLayer.getPixelPosition(n).left;
        f.style.left = m + e.renderer.gutterWidth - 5 + "px", p.el.className = "error_widget_wrapper", 
        d.className = "error_widget " + h.className, d.innerHTML = h.text.join("<br>"), 
        d.appendChild(o.createElement("div"));
        var g = function(e, t, i) {
            if (0 === t && ("esc" === i || "return" === i)) return p.destroy(), {
                "command": "null"
            };
        };
        p.destroy = function() {
            e.$mouseHandler.isMousePressed || (e.keyBinding.removeKeyboardHandler(g), i.widgetManager.removeLineWidget(p), 
            e.off("changeSelection", p.destroy), e.off("changeSession", p.destroy), e.off("mouseup", p.destroy), 
            e.off("change", p.destroy));
        }, e.keyBinding.addKeyboardHandler(g), e.on("changeSelection", p.destroy), e.on("changeSession", p.destroy), 
        e.on("mouseup", p.destroy), e.on("change", p.destroy), e.session.widgetManager.addLineWidget(p), 
        p.el.onmousedown = e.focus.bind(e), e.renderer.scrollCursorIntoView(null, .5, {
            "bottom": p.el.offsetHeight
        });
    }, o.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }", "");
}), ace.define("ace/ace", [ "require", "exports", "module", "ace/lib/fixoldbrowsers", "ace/lib/dom", "ace/lib/event", "ace/editor", "ace/edit_session", "ace/undomanager", "ace/virtual_renderer", "ace/worker/worker_client", "ace/keyboard/hash_handler", "ace/placeholder", "ace/multi_select", "ace/mode/folding/fold_mode", "ace/theme/textmate", "ace/ext/error_marker", "ace/config" ], function(e, t, i) {
    "use strict";
    e("./lib/fixoldbrowsers");
    var n = e("./lib/dom"), s = e("./lib/event"), r = e("./editor").Editor, o = e("./edit_session").EditSession, a = e("./undomanager").UndoManager, l = e("./virtual_renderer").VirtualRenderer;
    e("./worker/worker_client"), e("./keyboard/hash_handler"), e("./placeholder"), e("./multi_select"), 
    e("./mode/folding/fold_mode"), e("./theme/textmate"), e("./ext/error_marker"), t.config = e("./config"), 
    t.require = e, t.edit = function(e) {
        if ("string" == typeof e) {
            var i = e;
            if (!(e = document.getElementById(i))) throw new Error("ace.edit can't find div #" + i);
        }
        if (e && e.env && e.env.editor instanceof r) return e.env.editor;
        var o = "";
        if (e && /input|textarea/i.test(e.tagName)) {
            var a = e;
            o = a.value, e = n.createElement("pre"), a.parentNode.replaceChild(e, a);
        } else o = n.getInnerText(e), e.innerHTML = "";
        var h = t.createEditSession(o), c = new r(new l(e));
        c.setSession(h);
        var u = {
            "document": h,
            "editor": c,
            "onResize": c.resize.bind(c, null)
        };
        return a && (u.textarea = a), s.addListener(window, "resize", u.onResize), c.on("destroy", function() {
            s.removeListener(window, "resize", u.onResize), u.editor.container.env = null;
        }), c.container.env = c.env = u, c;
    }, t.createEditSession = function(e, t) {
        var i = new o(e, t);
        return i.setUndoManager(new a()), i;
    }, t.EditSession = o, t.UndoManager = a;
}), ace.require([ "ace/ace" ], function(e) {
    e && e.config.init(!0), window.ace || (window.ace = e);
    for (var t in e) e.hasOwnProperty(t) && (window.ace[t] = e[t]);
}), ace.define("ace/theme/clouds", [ "require", "exports", "module", "ace/lib/dom" ], function(e, t, i) {
    t.isDark = !1, t.cssClass = "ace-clouds", t.cssText = '.ace-clouds .ace_gutter {background: #ebebeb;color: #333}.ace-clouds .ace_print-margin {width: 1px;background: #e8e8e8}.ace-clouds {background-color: #FFFFFF;color: #000000}.ace-clouds .ace_cursor {color: #000000}.ace-clouds .ace_marker-layer .ace_selection {background: #BDD5FC}.ace-clouds.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #FFFFFF;border-radius: 2px}.ace-clouds .ace_marker-layer .ace_step {background: rgb(255, 255, 0)}.ace-clouds .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #BFBFBF}.ace-clouds .ace_marker-layer .ace_active-line {background: #FFFBD1}.ace-clouds .ace_gutter-active-line {background-color : #dcdcdc}.ace-clouds .ace_marker-layer .ace_selected-word {border: 1px solid #BDD5FC}.ace-clouds .ace_invisible {color: #BFBFBF}.ace-clouds .ace_keyword,.ace-clouds .ace_meta,.ace-clouds .ace_support.ace_constant.ace_property-value {color: #AF956F}.ace-clouds .ace_keyword.ace_operator {color: #484848}.ace-clouds .ace_keyword.ace_other.ace_unit {color: #96DC5F}.ace-clouds .ace_constant.ace_language {color: #39946A}.ace-clouds .ace_constant.ace_numeric {color: #46A609}.ace-clouds .ace_constant.ace_character.ace_entity {color: #BF78CC}.ace-clouds .ace_invalid {background-color: #FF002A}.ace-clouds .ace_fold {background-color: #AF956F;border-color: #000000}.ace-clouds .ace_storage,.ace-clouds .ace_support.ace_class,.ace-clouds .ace_support.ace_function,.ace-clouds .ace_support.ace_other,.ace-clouds .ace_support.ace_type {color: #C52727}.ace-clouds .ace_string {color: #5D90CD}.ace-clouds .ace_comment {color: #BCC8BA}.ace-clouds .ace_entity.ace_name.ace_tag,.ace-clouds .ace_entity.ace_other.ace_attribute-name {color: #606060}.ace-clouds .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y}', 
    e("../lib/dom").importCssString(t.cssText, t.cssClass);
}), ace.define("ace/mode/css_highlight_rules", [ "require", "exports", "module", "ace/lib/oop", "ace/lib/lang", "ace/mode/text_highlight_rules" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/oop"), s = (e("../lib/lang"), e("./text_highlight_rules").TextHighlightRules), r = t.supportType = "animation-fill-mode|alignment-adjust|alignment-baseline|animation-delay|animation-direction|animation-duration|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|animation|appearance|azimuth|backface-visibility|background-attachment|background-break|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|background|baseline-shift|binding|bleed|bookmark-label|bookmark-level|bookmark-state|bookmark-target|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|border|bottom|box-align|box-decoration-break|box-direction|box-flex-group|box-flex|box-lines|box-ordinal-group|box-orient|box-pack|box-shadow|box-sizing|break-after|break-before|break-inside|caption-side|clear|clip|color-profile|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|crop|cue-after|cue-before|cue|cursor|direction|display|dominant-baseline|drop-initial-after-adjust|drop-initial-after-align|drop-initial-before-adjust|drop-initial-before-align|drop-initial-size|drop-initial-value|elevation|empty-cells|fit|fit-position|float-offset|float|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|font|grid-columns|grid-rows|hanging-punctuation|height|hyphenate-after|hyphenate-before|hyphenate-character|hyphenate-lines|hyphenate-resource|hyphens|icon|image-orientation|image-rendering|image-resolution|inline-box-align|left|letter-spacing|line-height|line-stacking-ruby|line-stacking-shift|line-stacking-strategy|line-stacking|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|margin|mark-after|mark-before|mark|marks|marquee-direction|marquee-play-count|marquee-speed|marquee-style|max-height|max-width|min-height|min-width|move-to|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|orphans|outline-color|outline-offset|outline-style|outline-width|outline|overflow-style|overflow-x|overflow-y|overflow|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page-policy|page|pause-after|pause-before|pause|perspective-origin|perspective|phonemes|pitch-range|pitch|play-during|pointer-events|position|presentation-level|punctuation-trim|quotes|rendering-intent|resize|rest-after|rest-before|rest|richness|right|rotation-point|rotation|ruby-align|ruby-overhang|ruby-position|ruby-span|size|speak-header|speak-numeral|speak-punctuation|speak|speech-rate|stress|string-set|table-layout|target-name|target-new|target-position|target|text-align-last|text-align|text-decoration|text-emphasis|text-height|text-indent|text-justify|text-outline|text-shadow|text-transform|text-wrap|top|transform-origin|transform-style|transform|transition-delay|transition-duration|transition-property|transition-timing-function|transition|unicode-bidi|vertical-align|visibility|voice-balance|voice-duration|voice-family|voice-pitch-range|voice-pitch|voice-rate|voice-stress|voice-volume|volume|white-space-collapse|white-space|widows|width|word-break|word-spacing|word-wrap|z-index", o = t.supportFunction = "rgb|rgba|url|attr|counter|counters", a = t.supportConstant = "absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero", l = t.supportConstantColor = "aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow", h = t.supportConstantFonts = "arial|century|comic|courier|cursive|fantasy|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace", c = t.numRe = "\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))", u = t.pseudoElements = "(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b", p = t.pseudoClasses = "(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\b", d = function() {
        var e = this.createKeywordMapper({
            "support.function": o,
            "support.constant": a,
            "support.type": r,
            "support.constant.color": l,
            "support.constant.fonts": h
        }, "text", !0);
        this.$rules = {
            "start": [ {
                "token": "comment",
                "regex": "\\/\\*",
                "push": "comment"
            }, {
                "token": "paren.lparen",
                "regex": "\\{",
                "push": "ruleset"
            }, {
                "token": "string",
                "regex": "@.*?{",
                "push": "media"
            }, {
                "token": "keyword",
                "regex": "#[a-z0-9-_]+"
            }, {
                "token": "variable",
                "regex": "\\.[a-z0-9-_]+"
            }, {
                "token": "string",
                "regex": ":[a-z0-9-_]+"
            }, {
                "token": "constant",
                "regex": "[a-z0-9-_]+"
            }, {
                "caseInsensitive": !0
            } ],
            "media": [ {
                "token": "comment",
                "regex": "\\/\\*",
                "push": "comment"
            }, {
                "token": "paren.lparen",
                "regex": "\\{",
                "push": "ruleset"
            }, {
                "token": "string",
                "regex": "\\}",
                "next": "pop"
            }, {
                "token": "keyword",
                "regex": "#[a-z0-9-_]+"
            }, {
                "token": "variable",
                "regex": "\\.[a-z0-9-_]+"
            }, {
                "token": "string",
                "regex": ":[a-z0-9-_]+"
            }, {
                "token": "constant",
                "regex": "[a-z0-9-_]+"
            }, {
                "caseInsensitive": !0
            } ],
            "comment": [ {
                "token": "comment",
                "regex": "\\*\\/",
                "next": "pop"
            }, {
                "defaultToken": "comment"
            } ],
            "ruleset": [ {
                "token": "paren.rparen",
                "regex": "\\}",
                "next": "pop"
            }, {
                "token": "comment",
                "regex": "\\/\\*",
                "push": "comment"
            }, {
                "token": "string",
                "regex": '["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'
            }, {
                "token": "string",
                "regex": "['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"
            }, {
                "token": [ "constant.numeric", "keyword" ],
                "regex": "(" + c + ")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vm|vw|%)"
            }, {
                "token": "constant.numeric",
                "regex": c
            }, {
                "token": "constant.numeric",
                "regex": "#[a-f0-9]{6}"
            }, {
                "token": "constant.numeric",
                "regex": "#[a-f0-9]{3}"
            }, {
                "token": [ "punctuation", "entity.other.attribute-name.pseudo-element.css" ],
                "regex": u
            }, {
                "token": [ "punctuation", "entity.other.attribute-name.pseudo-class.css" ],
                "regex": p
            }, {
                "token": [ "support.function", "string", "support.function" ],
                "regex": "(url\\()(.*)(\\))"
            }, {
                "token": e,
                "regex": "\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"
            }, {
                "caseInsensitive": !0
            } ]
        }, this.normalizeRules();
    };
    n.inherits(d, s), t.CssHighlightRules = d;
}), ace.define("ace/mode/matching_brace_outdent", [ "require", "exports", "module", "ace/range" ], function(e, t, i) {
    "use strict";
    var n = e("../range").Range, s = function() {};
    (function() {
        this.checkOutdent = function(e, t) {
            return !!/^\s+$/.test(e) && /^\s*\}/.test(t);
        }, this.autoOutdent = function(e, t) {
            var i = e.getLine(t).match(/^(\s*\})/);
            if (!i) return 0;
            var s = i[1].length, r = e.findMatchingBracket({
                "row": t,
                "column": s
            });
            if (!r || r.row == t) return 0;
            var o = this.$getIndent(e.getLine(r.row));
            e.replace(new n(t, 0, t, s - 1), o);
        }, this.$getIndent = function(e) {
            return e.match(/^\s*/)[0];
        };
    }).call(s.prototype), t.MatchingBraceOutdent = s;
}), ace.define("ace/mode/behaviour/cstyle", [ "require", "exports", "module", "ace/lib/oop", "ace/mode/behaviour", "ace/token_iterator", "ace/lib/lang" ], function(e, t, i) {
    "use strict";
    var n, s = e("../../lib/oop"), r = e("../behaviour").Behaviour, o = e("../../token_iterator").TokenIterator, a = e("../../lib/lang"), l = [ "text", "paren.rparen", "punctuation.operator" ], h = [ "text", "paren.rparen", "punctuation.operator", "comment" ], c = {}, u = function(e) {
        var t = -1;
        if (e.multiSelect && (t = e.selection.index, c.rangeCount != e.multiSelect.rangeCount && (c = {
            "rangeCount": e.multiSelect.rangeCount
        })), c[t]) return n = c[t];
        n = c[t] = {
            "autoInsertedBrackets": 0,
            "autoInsertedRow": -1,
            "autoInsertedLineEnd": "",
            "maybeInsertedBrackets": 0,
            "maybeInsertedRow": -1,
            "maybeInsertedLineStart": "",
            "maybeInsertedLineEnd": ""
        };
    }, p = function(e, t, i, n) {
        var s = e.end.row - e.start.row;
        return {
            "text": i + t + n,
            "selection": [ 0, e.start.column + 1, s, e.end.column + (s ? 0 : 1) ]
        };
    }, d = function() {
        this.add("braces", "insertion", function(e, t, i, s, r) {
            var o = i.getCursorPosition(), l = s.doc.getLine(o.row);
            if ("{" == r) {
                u(i);
                var h = i.getSelectionRange(), c = s.doc.getTextRange(h);
                if ("" !== c && "{" !== c && i.getWrapBehavioursEnabled()) return p(h, c, "{", "}");
                if (d.isSaneInsertion(i, s)) return /[\]\}\)]/.test(l[o.column]) || i.inMultiSelectMode ? (d.recordAutoInsert(i, s, "}"), 
                {
                    "text": "{}",
                    "selection": [ 1, 1 ]
                }) : (d.recordMaybeInsert(i, s, "{"), {
                    "text": "{",
                    "selection": [ 1, 1 ]
                });
            } else if ("}" == r) {
                if (u(i), "}" == (m = l.substring(o.column, o.column + 1)) && null !== s.$findOpeningBracket("}", {
                    "column": o.column + 1,
                    "row": o.row
                }) && d.isAutoInsertedClosing(o, l, r)) return d.popAutoInsertedClosing(), {
                    "text": "",
                    "selection": [ 1, 1 ]
                };
            } else {
                if ("\n" == r || "\r\n" == r) {
                    u(i);
                    var f = "";
                    d.isMaybeInsertedClosing(o, l) && (f = a.stringRepeat("}", n.maybeInsertedBrackets), 
                    d.clearMaybeInsertedClosing());
                    var m = l.substring(o.column, o.column + 1);
                    if ("}" === m) {
                        var g = s.findMatchingBracket({
                            "row": o.row,
                            "column": o.column + 1
                        }, "}");
                        if (!g) return null;
                        y = this.$getIndent(s.getLine(g.row));
                    } else {
                        if (!f) return void d.clearMaybeInsertedClosing();
                        var y = this.$getIndent(l);
                    }
                    var v = y + s.getTabString();
                    return {
                        "text": "\n" + v + "\n" + y + f,
                        "selection": [ 1, v.length, 1, v.length ]
                    };
                }
                d.clearMaybeInsertedClosing();
            }
        }), this.add("braces", "deletion", function(e, t, i, s, r) {
            var o = s.doc.getTextRange(r);
            if (!r.isMultiLine() && "{" == o) {
                if (u(i), "}" == s.doc.getLine(r.start.row).substring(r.end.column, r.end.column + 1)) return r.end.column++, 
                r;
                n.maybeInsertedBrackets--;
            }
        }), this.add("parens", "insertion", function(e, t, i, n, s) {
            if ("(" == s) {
                u(i);
                var r = i.getSelectionRange(), o = n.doc.getTextRange(r);
                if ("" !== o && i.getWrapBehavioursEnabled()) return p(r, o, "(", ")");
                if (d.isSaneInsertion(i, n)) return d.recordAutoInsert(i, n, ")"), {
                    "text": "()",
                    "selection": [ 1, 1 ]
                };
            } else if (")" == s) {
                u(i);
                var a = i.getCursorPosition(), l = n.doc.getLine(a.row);
                if (")" == l.substring(a.column, a.column + 1) && null !== n.$findOpeningBracket(")", {
                    "column": a.column + 1,
                    "row": a.row
                }) && d.isAutoInsertedClosing(a, l, s)) return d.popAutoInsertedClosing(), {
                    "text": "",
                    "selection": [ 1, 1 ]
                };
            }
        }), this.add("parens", "deletion", function(e, t, i, n, s) {
            var r = n.doc.getTextRange(s);
            if (!s.isMultiLine() && "(" == r && (u(i), ")" == n.doc.getLine(s.start.row).substring(s.start.column + 1, s.start.column + 2))) return s.end.column++, 
            s;
        }), this.add("brackets", "insertion", function(e, t, i, n, s) {
            if ("[" == s) {
                u(i);
                var r = i.getSelectionRange(), o = n.doc.getTextRange(r);
                if ("" !== o && i.getWrapBehavioursEnabled()) return p(r, o, "[", "]");
                if (d.isSaneInsertion(i, n)) return d.recordAutoInsert(i, n, "]"), {
                    "text": "[]",
                    "selection": [ 1, 1 ]
                };
            } else if ("]" == s) {
                u(i);
                var a = i.getCursorPosition(), l = n.doc.getLine(a.row);
                if ("]" == l.substring(a.column, a.column + 1) && null !== n.$findOpeningBracket("]", {
                    "column": a.column + 1,
                    "row": a.row
                }) && d.isAutoInsertedClosing(a, l, s)) return d.popAutoInsertedClosing(), {
                    "text": "",
                    "selection": [ 1, 1 ]
                };
            }
        }), this.add("brackets", "deletion", function(e, t, i, n, s) {
            var r = n.doc.getTextRange(s);
            if (!s.isMultiLine() && "[" == r && (u(i), "]" == n.doc.getLine(s.start.row).substring(s.start.column + 1, s.start.column + 2))) return s.end.column++, 
            s;
        }), this.add("string_dquotes", "insertion", function(e, t, i, n, s) {
            if ('"' == s || "'" == s) {
                u(i);
                var r = s, o = i.getSelectionRange(), a = n.doc.getTextRange(o);
                if ("" !== a && "'" !== a && '"' != a && i.getWrapBehavioursEnabled()) return p(o, a, r, r);
                if (!a) {
                    var l = i.getCursorPosition(), h = n.doc.getLine(l.row), c = h.substring(l.column - 1, l.column), d = h.substring(l.column, l.column + 1), f = n.getTokenAt(l.row, l.column), m = n.getTokenAt(l.row, l.column + 1);
                    if ("\\" == c && f && /escape/.test(f.type)) return null;
                    var g, y = f && /string/.test(f.type), v = !m || /string/.test(m.type);
                    if (d == r) g = y !== v; else {
                        if (y && !v) return null;
                        if (y && v) return null;
                        var L = n.$mode.tokenRe;
                        L.lastIndex = 0;
                        var w = L.test(c);
                        L.lastIndex = 0;
                        var b = L.test(c);
                        if (w || b) return null;
                        if (d && !/[\s;,.})\]\\]/.test(d)) return null;
                        g = !0;
                    }
                    return {
                        "text": g ? r + r : "",
                        "selection": [ 1, 1 ]
                    };
                }
            }
        }), this.add("string_dquotes", "deletion", function(e, t, i, n, s) {
            var r = n.doc.getTextRange(s);
            if (!s.isMultiLine() && ('"' == r || "'" == r) && (u(i), n.doc.getLine(s.start.row).substring(s.start.column + 1, s.start.column + 2) == r)) return s.end.column++, 
            s;
        });
    };
    d.isSaneInsertion = function(e, t) {
        var i = e.getCursorPosition(), n = new o(t, i.row, i.column);
        if (!this.$matchTokenType(n.getCurrentToken() || "text", l)) {
            var s = new o(t, i.row, i.column + 1);
            if (!this.$matchTokenType(s.getCurrentToken() || "text", l)) return !1;
        }
        return n.stepForward(), n.getCurrentTokenRow() !== i.row || this.$matchTokenType(n.getCurrentToken() || "text", h);
    }, d.$matchTokenType = function(e, t) {
        return t.indexOf(e.type || e) > -1;
    }, d.recordAutoInsert = function(e, t, i) {
        var s = e.getCursorPosition(), r = t.doc.getLine(s.row);
        this.isAutoInsertedClosing(s, r, n.autoInsertedLineEnd[0]) || (n.autoInsertedBrackets = 0), 
        n.autoInsertedRow = s.row, n.autoInsertedLineEnd = i + r.substr(s.column), n.autoInsertedBrackets++;
    }, d.recordMaybeInsert = function(e, t, i) {
        var s = e.getCursorPosition(), r = t.doc.getLine(s.row);
        this.isMaybeInsertedClosing(s, r) || (n.maybeInsertedBrackets = 0), n.maybeInsertedRow = s.row, 
        n.maybeInsertedLineStart = r.substr(0, s.column) + i, n.maybeInsertedLineEnd = r.substr(s.column), 
        n.maybeInsertedBrackets++;
    }, d.isAutoInsertedClosing = function(e, t, i) {
        return n.autoInsertedBrackets > 0 && e.row === n.autoInsertedRow && i === n.autoInsertedLineEnd[0] && t.substr(e.column) === n.autoInsertedLineEnd;
    }, d.isMaybeInsertedClosing = function(e, t) {
        return n.maybeInsertedBrackets > 0 && e.row === n.maybeInsertedRow && t.substr(e.column) === n.maybeInsertedLineEnd && t.substr(0, e.column) == n.maybeInsertedLineStart;
    }, d.popAutoInsertedClosing = function() {
        n.autoInsertedLineEnd = n.autoInsertedLineEnd.substr(1), n.autoInsertedBrackets--;
    }, d.clearMaybeInsertedClosing = function() {
        n && (n.maybeInsertedBrackets = 0, n.maybeInsertedRow = -1);
    }, s.inherits(d, r), t.CstyleBehaviour = d;
}), ace.define("ace/mode/behaviour/css", [ "require", "exports", "module", "ace/lib/oop", "ace/mode/behaviour", "ace/mode/behaviour/cstyle", "ace/token_iterator" ], function(e, t, i) {
    "use strict";
    var n = e("../../lib/oop"), s = (e("../behaviour").Behaviour, e("./cstyle").CstyleBehaviour), r = e("../../token_iterator").TokenIterator, o = function() {
        this.inherit(s), this.add("colon", "insertion", function(e, t, i, n, s) {
            if (":" === s) {
                var o = i.getCursorPosition(), a = new r(n, o.row, o.column), l = a.getCurrentToken();
                if (l && l.value.match(/\s+/) && (l = a.stepBackward()), l && "support.type" === l.type) {
                    var h = n.doc.getLine(o.row);
                    if (":" === h.substring(o.column, o.column + 1)) return {
                        "text": "",
                        "selection": [ 1, 1 ]
                    };
                    if (!h.substring(o.column).match(/^\s*;/)) return {
                        "text": ":;",
                        "selection": [ 1, 1 ]
                    };
                }
            }
        }), this.add("colon", "deletion", function(e, t, i, n, s) {
            var o = n.doc.getTextRange(s);
            if (!s.isMultiLine() && ":" === o) {
                var a = i.getCursorPosition(), l = new r(n, a.row, a.column), h = l.getCurrentToken();
                if (h && h.value.match(/\s+/) && (h = l.stepBackward()), h && "support.type" === h.type && ";" === n.doc.getLine(s.start.row).substring(s.end.column, s.end.column + 1)) return s.end.column++, 
                s;
            }
        }), this.add("semicolon", "insertion", function(e, t, i, n, s) {
            if (";" === s) {
                var r = i.getCursorPosition();
                if (";" === n.doc.getLine(r.row).substring(r.column, r.column + 1)) return {
                    "text": "",
                    "selection": [ 1, 1 ]
                };
            }
        });
    };
    n.inherits(o, s), t.CssBehaviour = o;
}), ace.define("ace/mode/folding/cstyle", [ "require", "exports", "module", "ace/lib/oop", "ace/range", "ace/mode/folding/fold_mode" ], function(e, t, i) {
    "use strict";
    var n = e("../../lib/oop"), s = e("../../range").Range, r = e("./fold_mode").FoldMode, o = t.FoldMode = function(e) {
        e && (this.foldingStartMarker = new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/, "|" + e.start)), 
        this.foldingStopMarker = new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/, "|" + e.end)));
    };
    n.inherits(o, r), function() {
        this.foldingStartMarker = /(\{|\[)[^\}\]]*$|^\s*(\/\*)/, this.foldingStopMarker = /^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/, 
        this.singleLineBlockCommentRe = /^\s*(\/\*).*\*\/\s*$/, this.tripleStarBlockCommentRe = /^\s*(\/\*\*\*).*\*\/\s*$/, 
        this.startRegionRe = /^\s*(\/\*|\/\/)#region\b/, this._getFoldWidgetBase = this.getFoldWidget, 
        this.getFoldWidget = function(e, t, i) {
            var n = e.getLine(i);
            if (this.singleLineBlockCommentRe.test(n) && !this.startRegionRe.test(n) && !this.tripleStarBlockCommentRe.test(n)) return "";
            var s = this._getFoldWidgetBase(e, t, i);
            return !s && this.startRegionRe.test(n) ? "start" : s;
        }, this.getFoldWidgetRange = function(e, t, i, n) {
            var s = e.getLine(i);
            if (this.startRegionRe.test(s)) return this.getCommentRegionBlock(e, s, i);
            var r = s.match(this.foldingStartMarker);
            if (r) {
                a = r.index;
                if (r[1]) return this.openingBracketBlock(e, r[1], i, a);
                var o = e.getCommentFoldRange(i, a + r[0].length, 1);
                return o && !o.isMultiLine() && (n ? o = this.getSectionRange(e, i) : "all" != t && (o = null)), 
                o;
            }
            if ("markbegin" !== t && (r = s.match(this.foldingStopMarker))) {
                var a = r.index + r[0].length;
                return r[1] ? this.closingBracketBlock(e, r[1], i, a) : e.getCommentFoldRange(i, a, -1);
            }
        }, this.getSectionRange = function(e, t) {
            for (var i = e.getLine(t), n = i.search(/\S/), r = t, o = i.length, a = t += 1, l = e.getLength(); ++t < l; ) {
                var h = (i = e.getLine(t)).search(/\S/);
                if (-1 !== h) {
                    if (n > h) break;
                    var c = this.getFoldWidgetRange(e, "all", t);
                    if (c) {
                        if (c.start.row <= r) break;
                        if (c.isMultiLine()) t = c.end.row; else if (n == h) break;
                    }
                    a = t;
                }
            }
            return new s(r, o, a, e.getLine(a).length);
        }, this.getCommentRegionBlock = function(e, t, i) {
            for (var n = t.search(/\s*$/), r = e.getLength(), o = i, a = /^\s*(?:\/\*|\/\/)#(end)?region\b/, l = 1; ++i < r; ) {
                t = e.getLine(i);
                var h = a.exec(t);
                if (h && (h[1] ? l-- : l++, !l)) break;
            }
            var c = i;
            if (c > o) return new s(o, n, c, t.length);
        };
    }.call(o.prototype);
}), ace.define("ace/mode/css", [ "require", "exports", "module", "ace/lib/oop", "ace/mode/text", "ace/mode/css_highlight_rules", "ace/mode/matching_brace_outdent", "ace/worker/worker_client", "ace/mode/behaviour/css", "ace/mode/folding/cstyle" ], function(e, t, i) {
    "use strict";
    var n = e("../lib/oop"), s = e("./text").Mode, r = e("./css_highlight_rules").CssHighlightRules, o = e("./matching_brace_outdent").MatchingBraceOutdent, a = e("../worker/worker_client").WorkerClient, l = e("./behaviour/css").CssBehaviour, h = e("./folding/cstyle").FoldMode, c = function() {
        this.HighlightRules = r, this.$outdent = new o(), this.$behaviour = new l(), this.foldingRules = new h();
    };
    n.inherits(c, s), function() {
        this.foldingRules = "cStyle", this.blockComment = {
            "start": "/*",
            "end": "*/"
        }, this.getNextLineIndent = function(e, t, i) {
            var n = this.$getIndent(t), s = this.getTokenizer().getLineTokens(t, e).tokens;
            return s.length && "comment" == s[s.length - 1].type ? n : (t.match(/^.*\{\s*$/) && (n += i), 
            n);
        }, this.checkOutdent = function(e, t, i) {
            return this.$outdent.checkOutdent(t, i);
        }, this.autoOutdent = function(e, t, i) {
            this.$outdent.autoOutdent(t, i);
        }, this.createWorker = function(e) {
            var t = new a([ "ace" ], "ace/mode/css_worker", "Worker");
            return t.attachToDocument(e.getDocument()), t.on("annotate", function(t) {
                e.setAnnotations(t.data);
            }), t.on("terminate", function() {
                e.clearAnnotations();
            }), t;
        }, this.$id = "ace/mode/css";
    }.call(c.prototype), t.Mode = c;
}), function(e) {
    void 0 === e.fn.each2 && e.extend(e.fn, {
        "each2": function(t) {
            for (var i = e([ 0 ]), n = -1, s = this.length; ++n < s && (i.context = i[0] = this[n]) && !1 !== t.call(i[0], n, i); ) ;
            return this;
        }
    });
}(jQuery), function(e, t) {
    "use strict";
    function i(t) {
        var i = e(document.createTextNode(""));
        t.before(i), i.before(t), i.remove();
    }
    function n(e) {
        var t, i, n, s;
        if (!e || e.length < 1) return e;
        for (t = "", i = 0, n = e.length; i < n; i++) s = e.charAt(i), t += z[s] || s;
        return t;
    }
    function s(e, t) {
        for (var i = 0, n = t.length; i < n; i += 1) if (o(e, t[i])) return i;
        return -1;
    }
    function r() {
        var t = e(B);
        t.appendTo("body");
        var i = {
            "width": t.width() - t[0].clientWidth,
            "height": t.height() - t[0].clientHeight
        };
        return t.remove(), i;
    }
    function o(e, i) {
        return e === i || e !== t && i !== t && (null !== e && null !== i && (e.constructor === String ? e + "" == i + "" : i.constructor === String && i + "" == e + ""));
    }
    function a(t, i) {
        var n, s, r;
        if (null === t || t.length < 1) return [];
        for (s = 0, r = (n = t.split(i)).length; s < r; s += 1) n[s] = e.trim(n[s]);
        return n;
    }
    function l(e) {
        return e.outerWidth(!1) - e.width();
    }
    function h(i) {
        var n = "keyup-change-value";
        i.on("keydown", function() {
            e.data(i, n) === t && e.data(i, n, i.val());
        }), i.on("keyup", function() {
            var s = e.data(i, n);
            s !== t && i.val() !== s && (e.removeData(i, n), i.trigger("keyup-change"));
        });
    }
    function c(i) {
        i.on("mousemove", function(i) {
            var n = R;
            n !== t && n.x === i.pageX && n.y === i.pageY || e(i.target).trigger("mousemove-filtered", i);
        });
    }
    function u(e, i, n) {
        n = n || t;
        var s;
        return function() {
            var t = arguments;
            window.clearTimeout(s), s = window.setTimeout(function() {
                i.apply(n, t);
            }, e);
        };
    }
    function p(e) {
        var t, i = !1;
        return function() {
            return !1 === i && (t = e(), i = !0), t;
        };
    }
    function d(e, t) {
        var i = u(e, function(e) {
            t.trigger("scroll-debounced", e);
        });
        t.on("scroll", function(e) {
            s(e.target, t.get()) >= 0 && i(e);
        });
    }
    function f(e) {
        e[0] !== document.activeElement && window.setTimeout(function() {
            var t, i = e[0], n = e.val().length;
            e.focus(), (i.offsetWidth > 0 || i.offsetHeight > 0) && i === document.activeElement && (i.setSelectionRange ? i.setSelectionRange(n, n) : i.createTextRange && ((t = i.createTextRange()).collapse(!1), 
            t.select()));
        }, 0);
    }
    function m(t) {
        var i = 0, n = 0;
        if ("selectionStart" in (t = e(t)[0])) i = t.selectionStart, n = t.selectionEnd - i; else if ("selection" in document) {
            t.focus();
            var s = document.selection.createRange();
            n = document.selection.createRange().text.length, s.moveStart("character", -t.value.length), 
            i = s.text.length - n;
        }
        return {
            "offset": i,
            "length": n
        };
    }
    function g(e) {
        e.preventDefault(), e.stopPropagation();
    }
    function y(e) {
        e.preventDefault(), e.stopImmediatePropagation();
    }
    function v(t) {
        if (!k) {
            var i = t[0].currentStyle || window.getComputedStyle(t[0], null);
            (k = e(document.createElement("div")).css({
                "position": "absolute",
                "left": "-10000px",
                "top": "-10000px",
                "display": "none",
                "fontSize": i.fontSize,
                "fontFamily": i.fontFamily,
                "fontStyle": i.fontStyle,
                "fontWeight": i.fontWeight,
                "letterSpacing": i.letterSpacing,
                "textTransform": i.textTransform,
                "whiteSpace": "nowrap"
            })).attr("class", "select2-sizer"), e("body").append(k);
        }
        return k.text(t.val()), k.width();
    }
    function L(t, i, n) {
        var s, r, o = [];
        (s = t.attr("class")) && e((s = "" + s).split(" ")).each2(function() {
            0 === this.indexOf("select2-") && o.push(this);
        }), (s = i.attr("class")) && e((s = "" + s).split(" ")).each2(function() {
            0 !== this.indexOf("select2-") && (r = n(this)) && o.push(r);
        }), t.attr("class", o.join(" "));
    }
    function w(e, t, i, s) {
        var r = n(e.toUpperCase()).indexOf(n(t.toUpperCase())), o = t.length;
        r < 0 ? i.push(s(e)) : (i.push(s(e.substring(0, r))), i.push("<span class='select2-match'>"), 
        i.push(s(e.substring(r, r + o))), i.push("</span>"), i.push(s(e.substring(r + o, e.length))));
    }
    function b(e) {
        var t = {
            "\\": "&#92;",
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;",
            "/": "&#47;"
        };
        return String(e).replace(/[&<>"'\/\\]/g, function(e) {
            return t[e];
        });
    }
    function C(i) {
        var n, s = null, r = i.quietMillis || 100, o = i.url, a = this;
        return function(l) {
            window.clearTimeout(n), n = window.setTimeout(function() {
                var n = i.data, r = o, h = i.transport || e.fn.select2.ajaxDefaults.transport, c = {
                    "type": i.type || "GET",
                    "cache": i.cache || !1,
                    "jsonpCallback": i.jsonpCallback || t,
                    "dataType": i.dataType || "json"
                }, u = e.extend({}, e.fn.select2.ajaxDefaults.params, c);
                n = n ? n.call(a, l.term, l.page, l.context) : null, r = "function" == typeof r ? r.call(a, l.term, l.page, l.context) : r, 
                s && "function" == typeof s.abort && s.abort(), i.params && (e.isFunction(i.params) ? e.extend(u, i.params.call(a)) : e.extend(u, i.params)), 
                e.extend(u, {
                    "url": r,
                    "dataType": i.dataType,
                    "data": n,
                    "success": function(e) {
                        var t = i.results(e, l.page);
                        l.callback(t);
                    }
                }), s = h.call(a, u), l.element.trigger(e.Event("select2-loading"));
            }, r);
        };
    }
    function O(t) {
        var i, n, s = t, r = function(e) {
            return "" + e.text;
        };
        e.isArray(s) && (s = {
            "results": n = s
        }), !1 === e.isFunction(s) && (n = s, s = function() {
            return n;
        });
        var o = s();
        return o.text && (r = o.text, e.isFunction(r) || (i = o.text, r = function(e) {
            return e[i];
        })), function(t) {
            var i, n = t.term, o = {
                "results": []
            };
            "" !== n ? (i = function(s, o) {
                var a, l;
                if ((s = s[0]).children) {
                    a = {};
                    for (l in s) s.hasOwnProperty(l) && (a[l] = s[l]);
                    a.children = [], e(s.children).each2(function(e, t) {
                        i(t, a.children);
                    }), (a.children.length || t.matcher(n, r(a), s)) && o.push(a);
                } else t.matcher(n, r(s), s) && o.push(s);
            }, e(s().results).each2(function(e, t) {
                i(t, o.results);
            }), t.callback(o)) : t.callback(s());
        };
    }
    function S(i) {
        var n = e.isFunction(i);
        return function(s) {
            var r = s.term, o = {
                "results": []
            };
            e(n ? i() : i).each(function() {
                var e = this.text !== t, i = e ? this.text : this;
                ("" === r || s.matcher(r, i)) && o.results.push(e ? this : {
                    "id": this,
                    "text": this
                });
            }), s.callback(o);
        };
    }
    function x(t, i) {
        if (e.isFunction(t)) return !0;
        if (!t) return !1;
        if ("string" == typeof t) return !0;
        throw new Error(i + " must be a string, function, or falsy value");
    }
    function E(t) {
        if (e.isFunction(t)) {
            var i = Array.prototype.slice.call(arguments, 1);
            return t.apply(null, i);
        }
        return t;
    }
    function A(t) {
        var i = 0;
        return e.each(t, function(e, t) {
            t.children ? i += A(t.children) : i++;
        }), i;
    }
    function _(t, i) {
        var n = function() {};
        return n.prototype = new t(), n.prototype.constructor = n, n.prototype.parent = t.prototype, 
        n.prototype = e.extend(n.prototype, i), n;
    }
    if (window.Select2 === t) {
        var F, N, T, M, k, D, P, R = {
            "x": 0,
            "y": 0
        }, I = {
            "TAB": 9,
            "ENTER": 13,
            "ESC": 27,
            "SPACE": 32,
            "LEFT": 37,
            "UP": 38,
            "RIGHT": 39,
            "DOWN": 40,
            "SHIFT": 16,
            "CTRL": 17,
            "ALT": 18,
            "PAGE_UP": 33,
            "PAGE_DOWN": 34,
            "HOME": 36,
            "END": 35,
            "BACKSPACE": 8,
            "DELETE": 46,
            "isArrow": function(e) {
                switch (e = e.which ? e.which : e) {
                  case I.LEFT:
                  case I.RIGHT:
                  case I.UP:
                  case I.DOWN:
                    return !0;
                }
                return !1;
            },
            "isControl": function(e) {
                switch (e.which) {
                  case I.SHIFT:
                  case I.CTRL:
                  case I.ALT:
                    return !0;
                }
                return !!e.metaKey;
            },
            "isFunctionKey": function(e) {
                return (e = e.which ? e.which : e) >= 112 && e <= 123;
            }
        }, B = "<div class='select2-measure-scrollbar'></div>", z = {
            "Ⓐ": "A",
            "Ａ": "A",
            "À": "A",
            "Á": "A",
            "Â": "A",
            "Ầ": "A",
            "Ấ": "A",
            "Ẫ": "A",
            "Ẩ": "A",
            "Ã": "A",
            "Ā": "A",
            "Ă": "A",
            "Ằ": "A",
            "Ắ": "A",
            "Ẵ": "A",
            "Ẳ": "A",
            "Ȧ": "A",
            "Ǡ": "A",
            "Ä": "A",
            "Ǟ": "A",
            "Ả": "A",
            "Å": "A",
            "Ǻ": "A",
            "Ǎ": "A",
            "Ȁ": "A",
            "Ȃ": "A",
            "Ạ": "A",
            "Ậ": "A",
            "Ặ": "A",
            "Ḁ": "A",
            "Ą": "A",
            "Ⱥ": "A",
            "Ɐ": "A",
            "Ꜳ": "AA",
            "Æ": "AE",
            "Ǽ": "AE",
            "Ǣ": "AE",
            "Ꜵ": "AO",
            "Ꜷ": "AU",
            "Ꜹ": "AV",
            "Ꜻ": "AV",
            "Ꜽ": "AY",
            "Ⓑ": "B",
            "Ｂ": "B",
            "Ḃ": "B",
            "Ḅ": "B",
            "Ḇ": "B",
            "Ƀ": "B",
            "Ƃ": "B",
            "Ɓ": "B",
            "Ⓒ": "C",
            "Ｃ": "C",
            "Ć": "C",
            "Ĉ": "C",
            "Ċ": "C",
            "Č": "C",
            "Ç": "C",
            "Ḉ": "C",
            "Ƈ": "C",
            "Ȼ": "C",
            "Ꜿ": "C",
            "Ⓓ": "D",
            "Ｄ": "D",
            "Ḋ": "D",
            "Ď": "D",
            "Ḍ": "D",
            "Ḑ": "D",
            "Ḓ": "D",
            "Ḏ": "D",
            "Đ": "D",
            "Ƌ": "D",
            "Ɗ": "D",
            "Ɖ": "D",
            "Ꝺ": "D",
            "Ǳ": "DZ",
            "Ǆ": "DZ",
            "ǲ": "Dz",
            "ǅ": "Dz",
            "Ⓔ": "E",
            "Ｅ": "E",
            "È": "E",
            "É": "E",
            "Ê": "E",
            "Ề": "E",
            "Ế": "E",
            "Ễ": "E",
            "Ể": "E",
            "Ẽ": "E",
            "Ē": "E",
            "Ḕ": "E",
            "Ḗ": "E",
            "Ĕ": "E",
            "Ė": "E",
            "Ë": "E",
            "Ẻ": "E",
            "Ě": "E",
            "Ȅ": "E",
            "Ȇ": "E",
            "Ẹ": "E",
            "Ệ": "E",
            "Ȩ": "E",
            "Ḝ": "E",
            "Ę": "E",
            "Ḙ": "E",
            "Ḛ": "E",
            "Ɛ": "E",
            "Ǝ": "E",
            "Ⓕ": "F",
            "Ｆ": "F",
            "Ḟ": "F",
            "Ƒ": "F",
            "Ꝼ": "F",
            "Ⓖ": "G",
            "Ｇ": "G",
            "Ǵ": "G",
            "Ĝ": "G",
            "Ḡ": "G",
            "Ğ": "G",
            "Ġ": "G",
            "Ǧ": "G",
            "Ģ": "G",
            "Ǥ": "G",
            "Ɠ": "G",
            "Ꞡ": "G",
            "Ᵹ": "G",
            "Ꝿ": "G",
            "Ⓗ": "H",
            "Ｈ": "H",
            "Ĥ": "H",
            "Ḣ": "H",
            "Ḧ": "H",
            "Ȟ": "H",
            "Ḥ": "H",
            "Ḩ": "H",
            "Ḫ": "H",
            "Ħ": "H",
            "Ⱨ": "H",
            "Ⱶ": "H",
            "Ɥ": "H",
            "Ⓘ": "I",
            "Ｉ": "I",
            "Ì": "I",
            "Í": "I",
            "Î": "I",
            "Ĩ": "I",
            "Ī": "I",
            "Ĭ": "I",
            "İ": "I",
            "Ï": "I",
            "Ḯ": "I",
            "Ỉ": "I",
            "Ǐ": "I",
            "Ȉ": "I",
            "Ȋ": "I",
            "Ị": "I",
            "Į": "I",
            "Ḭ": "I",
            "Ɨ": "I",
            "Ⓙ": "J",
            "Ｊ": "J",
            "Ĵ": "J",
            "Ɉ": "J",
            "Ⓚ": "K",
            "Ｋ": "K",
            "Ḱ": "K",
            "Ǩ": "K",
            "Ḳ": "K",
            "Ķ": "K",
            "Ḵ": "K",
            "Ƙ": "K",
            "Ⱪ": "K",
            "Ꝁ": "K",
            "Ꝃ": "K",
            "Ꝅ": "K",
            "Ꞣ": "K",
            "Ⓛ": "L",
            "Ｌ": "L",
            "Ŀ": "L",
            "Ĺ": "L",
            "Ľ": "L",
            "Ḷ": "L",
            "Ḹ": "L",
            "Ļ": "L",
            "Ḽ": "L",
            "Ḻ": "L",
            "Ł": "L",
            "Ƚ": "L",
            "Ɫ": "L",
            "Ⱡ": "L",
            "Ꝉ": "L",
            "Ꝇ": "L",
            "Ꞁ": "L",
            "Ǉ": "LJ",
            "ǈ": "Lj",
            "Ⓜ": "M",
            "Ｍ": "M",
            "Ḿ": "M",
            "Ṁ": "M",
            "Ṃ": "M",
            "Ɱ": "M",
            "Ɯ": "M",
            "Ⓝ": "N",
            "Ｎ": "N",
            "Ǹ": "N",
            "Ń": "N",
            "Ñ": "N",
            "Ṅ": "N",
            "Ň": "N",
            "Ṇ": "N",
            "Ņ": "N",
            "Ṋ": "N",
            "Ṉ": "N",
            "Ƞ": "N",
            "Ɲ": "N",
            "Ꞑ": "N",
            "Ꞥ": "N",
            "Ǌ": "NJ",
            "ǋ": "Nj",
            "Ⓞ": "O",
            "Ｏ": "O",
            "Ò": "O",
            "Ó": "O",
            "Ô": "O",
            "Ồ": "O",
            "Ố": "O",
            "Ỗ": "O",
            "Ổ": "O",
            "Õ": "O",
            "Ṍ": "O",
            "Ȭ": "O",
            "Ṏ": "O",
            "Ō": "O",
            "Ṑ": "O",
            "Ṓ": "O",
            "Ŏ": "O",
            "Ȯ": "O",
            "Ȱ": "O",
            "Ö": "O",
            "Ȫ": "O",
            "Ỏ": "O",
            "Ő": "O",
            "Ǒ": "O",
            "Ȍ": "O",
            "Ȏ": "O",
            "Ơ": "O",
            "Ờ": "O",
            "Ớ": "O",
            "Ỡ": "O",
            "Ở": "O",
            "Ợ": "O",
            "Ọ": "O",
            "Ộ": "O",
            "Ǫ": "O",
            "Ǭ": "O",
            "Ø": "O",
            "Ǿ": "O",
            "Ɔ": "O",
            "Ɵ": "O",
            "Ꝋ": "O",
            "Ꝍ": "O",
            "Ƣ": "OI",
            "Ꝏ": "OO",
            "Ȣ": "OU",
            "Ⓟ": "P",
            "Ｐ": "P",
            "Ṕ": "P",
            "Ṗ": "P",
            "Ƥ": "P",
            "Ᵽ": "P",
            "Ꝑ": "P",
            "Ꝓ": "P",
            "Ꝕ": "P",
            "Ⓠ": "Q",
            "Ｑ": "Q",
            "Ꝗ": "Q",
            "Ꝙ": "Q",
            "Ɋ": "Q",
            "Ⓡ": "R",
            "Ｒ": "R",
            "Ŕ": "R",
            "Ṙ": "R",
            "Ř": "R",
            "Ȑ": "R",
            "Ȓ": "R",
            "Ṛ": "R",
            "Ṝ": "R",
            "Ŗ": "R",
            "Ṟ": "R",
            "Ɍ": "R",
            "Ɽ": "R",
            "Ꝛ": "R",
            "Ꞧ": "R",
            "Ꞃ": "R",
            "Ⓢ": "S",
            "Ｓ": "S",
            "ẞ": "S",
            "Ś": "S",
            "Ṥ": "S",
            "Ŝ": "S",
            "Ṡ": "S",
            "Š": "S",
            "Ṧ": "S",
            "Ṣ": "S",
            "Ṩ": "S",
            "Ș": "S",
            "Ş": "S",
            "Ȿ": "S",
            "Ꞩ": "S",
            "Ꞅ": "S",
            "Ⓣ": "T",
            "Ｔ": "T",
            "Ṫ": "T",
            "Ť": "T",
            "Ṭ": "T",
            "Ț": "T",
            "Ţ": "T",
            "Ṱ": "T",
            "Ṯ": "T",
            "Ŧ": "T",
            "Ƭ": "T",
            "Ʈ": "T",
            "Ⱦ": "T",
            "Ꞇ": "T",
            "Ꜩ": "TZ",
            "Ⓤ": "U",
            "Ｕ": "U",
            "Ù": "U",
            "Ú": "U",
            "Û": "U",
            "Ũ": "U",
            "Ṹ": "U",
            "Ū": "U",
            "Ṻ": "U",
            "Ŭ": "U",
            "Ü": "U",
            "Ǜ": "U",
            "Ǘ": "U",
            "Ǖ": "U",
            "Ǚ": "U",
            "Ủ": "U",
            "Ů": "U",
            "Ű": "U",
            "Ǔ": "U",
            "Ȕ": "U",
            "Ȗ": "U",
            "Ư": "U",
            "Ừ": "U",
            "Ứ": "U",
            "Ữ": "U",
            "Ử": "U",
            "Ự": "U",
            "Ụ": "U",
            "Ṳ": "U",
            "Ų": "U",
            "Ṷ": "U",
            "Ṵ": "U",
            "Ʉ": "U",
            "Ⓥ": "V",
            "Ｖ": "V",
            "Ṽ": "V",
            "Ṿ": "V",
            "Ʋ": "V",
            "Ꝟ": "V",
            "Ʌ": "V",
            "Ꝡ": "VY",
            "Ⓦ": "W",
            "Ｗ": "W",
            "Ẁ": "W",
            "Ẃ": "W",
            "Ŵ": "W",
            "Ẇ": "W",
            "Ẅ": "W",
            "Ẉ": "W",
            "Ⱳ": "W",
            "Ⓧ": "X",
            "Ｘ": "X",
            "Ẋ": "X",
            "Ẍ": "X",
            "Ⓨ": "Y",
            "Ｙ": "Y",
            "Ỳ": "Y",
            "Ý": "Y",
            "Ŷ": "Y",
            "Ỹ": "Y",
            "Ȳ": "Y",
            "Ẏ": "Y",
            "Ÿ": "Y",
            "Ỷ": "Y",
            "Ỵ": "Y",
            "Ƴ": "Y",
            "Ɏ": "Y",
            "Ỿ": "Y",
            "Ⓩ": "Z",
            "Ｚ": "Z",
            "Ź": "Z",
            "Ẑ": "Z",
            "Ż": "Z",
            "Ž": "Z",
            "Ẓ": "Z",
            "Ẕ": "Z",
            "Ƶ": "Z",
            "Ȥ": "Z",
            "Ɀ": "Z",
            "Ⱬ": "Z",
            "Ꝣ": "Z",
            "ⓐ": "a",
            "ａ": "a",
            "ẚ": "a",
            "à": "a",
            "á": "a",
            "â": "a",
            "ầ": "a",
            "ấ": "a",
            "ẫ": "a",
            "ẩ": "a",
            "ã": "a",
            "ā": "a",
            "ă": "a",
            "ằ": "a",
            "ắ": "a",
            "ẵ": "a",
            "ẳ": "a",
            "ȧ": "a",
            "ǡ": "a",
            "ä": "a",
            "ǟ": "a",
            "ả": "a",
            "å": "a",
            "ǻ": "a",
            "ǎ": "a",
            "ȁ": "a",
            "ȃ": "a",
            "ạ": "a",
            "ậ": "a",
            "ặ": "a",
            "ḁ": "a",
            "ą": "a",
            "ⱥ": "a",
            "ɐ": "a",
            "ꜳ": "aa",
            "æ": "ae",
            "ǽ": "ae",
            "ǣ": "ae",
            "ꜵ": "ao",
            "ꜷ": "au",
            "ꜹ": "av",
            "ꜻ": "av",
            "ꜽ": "ay",
            "ⓑ": "b",
            "ｂ": "b",
            "ḃ": "b",
            "ḅ": "b",
            "ḇ": "b",
            "ƀ": "b",
            "ƃ": "b",
            "ɓ": "b",
            "ⓒ": "c",
            "ｃ": "c",
            "ć": "c",
            "ĉ": "c",
            "ċ": "c",
            "č": "c",
            "ç": "c",
            "ḉ": "c",
            "ƈ": "c",
            "ȼ": "c",
            "ꜿ": "c",
            "ↄ": "c",
            "ⓓ": "d",
            "ｄ": "d",
            "ḋ": "d",
            "ď": "d",
            "ḍ": "d",
            "ḑ": "d",
            "ḓ": "d",
            "ḏ": "d",
            "đ": "d",
            "ƌ": "d",
            "ɖ": "d",
            "ɗ": "d",
            "ꝺ": "d",
            "ǳ": "dz",
            "ǆ": "dz",
            "ⓔ": "e",
            "ｅ": "e",
            "è": "e",
            "é": "e",
            "ê": "e",
            "ề": "e",
            "ế": "e",
            "ễ": "e",
            "ể": "e",
            "ẽ": "e",
            "ē": "e",
            "ḕ": "e",
            "ḗ": "e",
            "ĕ": "e",
            "ė": "e",
            "ë": "e",
            "ẻ": "e",
            "ě": "e",
            "ȅ": "e",
            "ȇ": "e",
            "ẹ": "e",
            "ệ": "e",
            "ȩ": "e",
            "ḝ": "e",
            "ę": "e",
            "ḙ": "e",
            "ḛ": "e",
            "ɇ": "e",
            "ɛ": "e",
            "ǝ": "e",
            "ⓕ": "f",
            "ｆ": "f",
            "ḟ": "f",
            "ƒ": "f",
            "ꝼ": "f",
            "ⓖ": "g",
            "ｇ": "g",
            "ǵ": "g",
            "ĝ": "g",
            "ḡ": "g",
            "ğ": "g",
            "ġ": "g",
            "ǧ": "g",
            "ģ": "g",
            "ǥ": "g",
            "ɠ": "g",
            "ꞡ": "g",
            "ᵹ": "g",
            "ꝿ": "g",
            "ⓗ": "h",
            "ｈ": "h",
            "ĥ": "h",
            "ḣ": "h",
            "ḧ": "h",
            "ȟ": "h",
            "ḥ": "h",
            "ḩ": "h",
            "ḫ": "h",
            "ẖ": "h",
            "ħ": "h",
            "ⱨ": "h",
            "ⱶ": "h",
            "ɥ": "h",
            "ƕ": "hv",
            "ⓘ": "i",
            "ｉ": "i",
            "ì": "i",
            "í": "i",
            "î": "i",
            "ĩ": "i",
            "ī": "i",
            "ĭ": "i",
            "ï": "i",
            "ḯ": "i",
            "ỉ": "i",
            "ǐ": "i",
            "ȉ": "i",
            "ȋ": "i",
            "ị": "i",
            "į": "i",
            "ḭ": "i",
            "ɨ": "i",
            "ı": "i",
            "ⓙ": "j",
            "ｊ": "j",
            "ĵ": "j",
            "ǰ": "j",
            "ɉ": "j",
            "ⓚ": "k",
            "ｋ": "k",
            "ḱ": "k",
            "ǩ": "k",
            "ḳ": "k",
            "ķ": "k",
            "ḵ": "k",
            "ƙ": "k",
            "ⱪ": "k",
            "ꝁ": "k",
            "ꝃ": "k",
            "ꝅ": "k",
            "ꞣ": "k",
            "ⓛ": "l",
            "ｌ": "l",
            "ŀ": "l",
            "ĺ": "l",
            "ľ": "l",
            "ḷ": "l",
            "ḹ": "l",
            "ļ": "l",
            "ḽ": "l",
            "ḻ": "l",
            "ſ": "l",
            "ł": "l",
            "ƚ": "l",
            "ɫ": "l",
            "ⱡ": "l",
            "ꝉ": "l",
            "ꞁ": "l",
            "ꝇ": "l",
            "ǉ": "lj",
            "ⓜ": "m",
            "ｍ": "m",
            "ḿ": "m",
            "ṁ": "m",
            "ṃ": "m",
            "ɱ": "m",
            "ɯ": "m",
            "ⓝ": "n",
            "ｎ": "n",
            "ǹ": "n",
            "ń": "n",
            "ñ": "n",
            "ṅ": "n",
            "ň": "n",
            "ṇ": "n",
            "ņ": "n",
            "ṋ": "n",
            "ṉ": "n",
            "ƞ": "n",
            "ɲ": "n",
            "ŉ": "n",
            "ꞑ": "n",
            "ꞥ": "n",
            "ǌ": "nj",
            "ⓞ": "o",
            "ｏ": "o",
            "ò": "o",
            "ó": "o",
            "ô": "o",
            "ồ": "o",
            "ố": "o",
            "ỗ": "o",
            "ổ": "o",
            "õ": "o",
            "ṍ": "o",
            "ȭ": "o",
            "ṏ": "o",
            "ō": "o",
            "ṑ": "o",
            "ṓ": "o",
            "ŏ": "o",
            "ȯ": "o",
            "ȱ": "o",
            "ö": "o",
            "ȫ": "o",
            "ỏ": "o",
            "ő": "o",
            "ǒ": "o",
            "ȍ": "o",
            "ȏ": "o",
            "ơ": "o",
            "ờ": "o",
            "ớ": "o",
            "ỡ": "o",
            "ở": "o",
            "ợ": "o",
            "ọ": "o",
            "ộ": "o",
            "ǫ": "o",
            "ǭ": "o",
            "ø": "o",
            "ǿ": "o",
            "ɔ": "o",
            "ꝋ": "o",
            "ꝍ": "o",
            "ɵ": "o",
            "ƣ": "oi",
            "ȣ": "ou",
            "ꝏ": "oo",
            "ⓟ": "p",
            "ｐ": "p",
            "ṕ": "p",
            "ṗ": "p",
            "ƥ": "p",
            "ᵽ": "p",
            "ꝑ": "p",
            "ꝓ": "p",
            "ꝕ": "p",
            "ⓠ": "q",
            "ｑ": "q",
            "ɋ": "q",
            "ꝗ": "q",
            "ꝙ": "q",
            "ⓡ": "r",
            "ｒ": "r",
            "ŕ": "r",
            "ṙ": "r",
            "ř": "r",
            "ȑ": "r",
            "ȓ": "r",
            "ṛ": "r",
            "ṝ": "r",
            "ŗ": "r",
            "ṟ": "r",
            "ɍ": "r",
            "ɽ": "r",
            "ꝛ": "r",
            "ꞧ": "r",
            "ꞃ": "r",
            "ⓢ": "s",
            "ｓ": "s",
            "ß": "s",
            "ś": "s",
            "ṥ": "s",
            "ŝ": "s",
            "ṡ": "s",
            "š": "s",
            "ṧ": "s",
            "ṣ": "s",
            "ṩ": "s",
            "ș": "s",
            "ş": "s",
            "ȿ": "s",
            "ꞩ": "s",
            "ꞅ": "s",
            "ẛ": "s",
            "ⓣ": "t",
            "ｔ": "t",
            "ṫ": "t",
            "ẗ": "t",
            "ť": "t",
            "ṭ": "t",
            "ț": "t",
            "ţ": "t",
            "ṱ": "t",
            "ṯ": "t",
            "ŧ": "t",
            "ƭ": "t",
            "ʈ": "t",
            "ⱦ": "t",
            "ꞇ": "t",
            "ꜩ": "tz",
            "ⓤ": "u",
            "ｕ": "u",
            "ù": "u",
            "ú": "u",
            "û": "u",
            "ũ": "u",
            "ṹ": "u",
            "ū": "u",
            "ṻ": "u",
            "ŭ": "u",
            "ü": "u",
            "ǜ": "u",
            "ǘ": "u",
            "ǖ": "u",
            "ǚ": "u",
            "ủ": "u",
            "ů": "u",
            "ű": "u",
            "ǔ": "u",
            "ȕ": "u",
            "ȗ": "u",
            "ư": "u",
            "ừ": "u",
            "ứ": "u",
            "ữ": "u",
            "ử": "u",
            "ự": "u",
            "ụ": "u",
            "ṳ": "u",
            "ų": "u",
            "ṷ": "u",
            "ṵ": "u",
            "ʉ": "u",
            "ⓥ": "v",
            "ｖ": "v",
            "ṽ": "v",
            "ṿ": "v",
            "ʋ": "v",
            "ꝟ": "v",
            "ʌ": "v",
            "ꝡ": "vy",
            "ⓦ": "w",
            "ｗ": "w",
            "ẁ": "w",
            "ẃ": "w",
            "ŵ": "w",
            "ẇ": "w",
            "ẅ": "w",
            "ẘ": "w",
            "ẉ": "w",
            "ⱳ": "w",
            "ⓧ": "x",
            "ｘ": "x",
            "ẋ": "x",
            "ẍ": "x",
            "ⓨ": "y",
            "ｙ": "y",
            "ỳ": "y",
            "ý": "y",
            "ŷ": "y",
            "ỹ": "y",
            "ȳ": "y",
            "ẏ": "y",
            "ÿ": "y",
            "ỷ": "y",
            "ẙ": "y",
            "ỵ": "y",
            "ƴ": "y",
            "ɏ": "y",
            "ỿ": "y",
            "ⓩ": "z",
            "ｚ": "z",
            "ź": "z",
            "ẑ": "z",
            "ż": "z",
            "ž": "z",
            "ẓ": "z",
            "ẕ": "z",
            "ƶ": "z",
            "ȥ": "z",
            "ɀ": "z",
            "ⱬ": "z",
            "ꝣ": "z"
        };
        D = e(document), M = function() {
            var e = 1;
            return function() {
                return e++;
            };
        }(), D.on("mousemove", function(e) {
            R.x = e.pageX, R.y = e.pageY;
        }), N = _(F = _(Object, {
            "bind": function(e) {
                var t = this;
                return function() {
                    e.apply(t, arguments);
                };
            },
            "init": function(i) {
                var n, s;
                this.opts = i = this.prepareOpts(i), this.id = i.id, i.element.data("select2") !== t && null !== i.element.data("select2") && i.element.data("select2").destroy(), 
                this.container = this.createContainer(), this.liveRegion = e("<span>", {
                    "role": "status",
                    "aria-live": "polite"
                }).addClass("select2-hidden-accessible").appendTo(document.body), this.containerId = "s2id_" + (i.element.attr("id") || "autogen" + M()).replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, "\\$1"), 
                this.containerSelector = "#" + this.containerId, this.container.attr("id", this.containerId), 
                this.body = p(function() {
                    return i.element.closest("body");
                }), L(this.container, this.opts.element, this.opts.adaptContainerCssClass), this.container.attr("style", i.element.attr("style")), 
                this.container.css(E(i.containerCss)), this.container.addClass(E(i.containerCssClass)), 
                this.elementTabIndex = this.opts.element.attr("tabindex"), this.opts.element.data("select2", this).attr("tabindex", "-1").before(this.container).on("click.select2", g), 
                this.container.data("select2", this), this.dropdown = this.container.find(".select2-drop"), 
                L(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass), this.dropdown.addClass(E(i.dropdownCssClass)), 
                this.dropdown.data("select2", this), this.dropdown.on("click", g), this.results = n = this.container.find(".select2-results"), 
                this.search = s = this.container.find("input.select2-input"), this.queryCount = 0, 
                this.resultsPage = 0, this.context = null, this.initContainer(), this.container.on("click", g), 
                c(this.results), this.dropdown.on("mousemove-filtered touchstart touchmove touchend", ".select2-results", this.bind(this.highlightUnderEvent)), 
                d(80, this.results), this.dropdown.on("scroll-debounced", ".select2-results", this.bind(this.loadMoreIfNeeded)), 
                e(this.container).on("change", ".select2-input", function(e) {
                    e.stopPropagation();
                }), e(this.dropdown).on("change", ".select2-input", function(e) {
                    e.stopPropagation();
                }), e.fn.mousewheel && n.mousewheel(function(e, t, i, s) {
                    var r = n.scrollTop();
                    s > 0 && r - s <= 0 ? (n.scrollTop(0), g(e)) : s < 0 && n.get(0).scrollHeight - n.scrollTop() + s <= n.height() && (n.scrollTop(n.get(0).scrollHeight - n.height()), 
                    g(e));
                }), h(s), s.on("keyup-change input paste", this.bind(this.updateResults)), s.on("focus", function() {
                    s.addClass("select2-focused");
                }), s.on("blur", function() {
                    s.removeClass("select2-focused");
                }), this.dropdown.on("mouseup", ".select2-results", this.bind(function(t) {
                    e(t.target).closest(".select2-result-selectable").length > 0 && (this.highlightUnderEvent(t), 
                    this.selectHighlighted(t));
                })), this.dropdown.on("click mouseup mousedown", function(e) {
                    e.stopPropagation();
                }), this.nextSearchTerm = t, e.isFunction(this.opts.initSelection) && (this.initSelection(), 
                this.monitorSource()), null !== i.maximumInputLength && this.search.attr("maxlength", i.maximumInputLength);
                var o = i.element.prop("disabled");
                o === t && (o = !1), this.enable(!o);
                var a = i.element.prop("readonly");
                a === t && (a = !1), this.readonly(a), P = P || r(), this.autofocus = i.element.prop("autofocus"), 
                i.element.prop("autofocus", !1), this.autofocus && this.focus(), this.search.attr("placeholder", i.searchInputPlaceholder);
            },
            "destroy": function() {
                var e = this.opts.element, i = e.data("select2");
                this.close(), this.propertyObserver && (delete this.propertyObserver, this.propertyObserver = null), 
                i !== t && (i.container.remove(), i.liveRegion.remove(), i.dropdown.remove(), e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus", this.autofocus || !1), 
                this.elementTabIndex ? e.attr({
                    "tabindex": this.elementTabIndex
                }) : e.removeAttr("tabindex"), e.show());
            },
            "optionToData": function(e) {
                return e.is("option") ? {
                    "id": e.prop("value"),
                    "text": e.text(),
                    "element": e.get(),
                    "css": e.attr("class"),
                    "disabled": e.prop("disabled"),
                    "locked": o(e.attr("locked"), "locked") || o(e.data("locked"), !0)
                } : e.is("optgroup") ? {
                    "text": e.attr("label"),
                    "children": [],
                    "element": e.get(),
                    "css": e.attr("class")
                } : void 0;
            },
            "prepareOpts": function(i) {
                var n, s, r, l, h = this;
                if ("select" === (n = i.element).get(0).tagName.toLowerCase() && (this.select = s = i.element), 
                s && e.each([ "id", "multiple", "ajax", "query", "createSearchChoice", "initSelection", "data", "tags" ], function() {
                    if (this in i) throw new Error("Option '" + this + "' is not allowed for Select2 when attached to a <select> element.");
                }), "function" != typeof (i = e.extend({}, {
                    "populateResults": function(n, s, r) {
                        var o, a = this.opts.id, l = this.liveRegion;
                        (o = function(n, s, c) {
                            var u, p, d, f, m, g, y, v, L, w;
                            for (u = 0, p = (n = i.sortResults(n, s, r)).length; u < p; u += 1) f = !(m = !0 === (d = n[u]).disabled) && a(d) !== t, 
                            g = d.children && d.children.length > 0, (y = e("<li></li>")).addClass("select2-results-dept-" + c), 
                            y.addClass("select2-result"), y.addClass(f ? "select2-result-selectable" : "select2-result-unselectable"), 
                            m && y.addClass("select2-disabled"), g && y.addClass("select2-result-with-children"), 
                            y.addClass(h.opts.formatResultCssClass(d)), y.attr("role", "presentation"), (v = e(document.createElement("div"))).addClass("select2-result-label"), 
                            v.attr("id", "select2-result-label-" + M()), v.attr("role", "option"), (w = i.formatResult(d, v, r, h.opts.escapeMarkup)) !== t && (v.html(w), 
                            y.append(v)), g && ((L = e("<ul></ul>")).addClass("select2-result-sub"), o(d.children, L, c + 1), 
                            y.append(L)), y.data("select2-data", d), s.append(y);
                            l.text(i.formatMatches(n.length));
                        })(s, n, 0);
                    }
                }, e.fn.select2.defaults, i)).id && (r = i.id, i.id = function(e) {
                    return e[r];
                }), e.isArray(i.element.data("select2Tags"))) {
                    if ("tags" in i) throw "tags specified as both an attribute 'data-select2-tags' and in options of Select2 " + i.element.attr("id");
                    i.tags = i.element.data("select2Tags");
                }
                if (s ? (i.query = this.bind(function(e) {
                    var i, s, r, o = {
                        "results": [],
                        "more": !1
                    }, a = e.term;
                    r = function(t, i) {
                        var n;
                        t.is("option") ? e.matcher(a, t.text(), t) && i.push(h.optionToData(t)) : t.is("optgroup") && (n = h.optionToData(t), 
                        t.children().each2(function(e, t) {
                            r(t, n.children);
                        }), n.children.length > 0 && i.push(n));
                    }, i = n.children(), this.getPlaceholder() !== t && i.length > 0 && (s = this.getPlaceholderOption()) && (i = i.not(s)), 
                    i.each2(function(e, t) {
                        r(t, o.results);
                    }), e.callback(o);
                }), i.id = function(e) {
                    return e.id;
                }) : "query" in i || ("ajax" in i ? ((l = i.element.data("ajax-url")) && l.length > 0 && (i.ajax.url = l), 
                i.query = C.call(i.element, i.ajax)) : "data" in i ? i.query = O(i.data) : "tags" in i && (i.query = S(i.tags), 
                i.createSearchChoice === t && (i.createSearchChoice = function(t) {
                    return {
                        "id": e.trim(t),
                        "text": e.trim(t)
                    };
                }), i.initSelection === t && (i.initSelection = function(t, n) {
                    var s = [];
                    e(a(t.val(), i.separator)).each(function() {
                        var t = {
                            "id": this,
                            "text": this
                        }, n = i.tags;
                        e.isFunction(n) && (n = n()), e(n).each(function() {
                            if (o(this.id, t.id)) return t = this, !1;
                        }), s.push(t);
                    }), n(s);
                }))), "function" != typeof i.query) throw "query function not defined for Select2 " + i.element.attr("id");
                if ("top" === i.createSearchChoicePosition) i.createSearchChoicePosition = function(e, t) {
                    e.unshift(t);
                }; else if ("bottom" === i.createSearchChoicePosition) i.createSearchChoicePosition = function(e, t) {
                    e.push(t);
                }; else if ("function" != typeof i.createSearchChoicePosition) throw "invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";
                return i;
            },
            "monitorSource": function() {
                var e, i, n = this.opts.element;
                n.on("change.select2", this.bind(function(e) {
                    !0 !== this.opts.element.data("select2-change-triggered") && this.initSelection();
                })), e = this.bind(function() {
                    var e = n.prop("disabled");
                    e === t && (e = !1), this.enable(!e);
                    var i = n.prop("readonly");
                    i === t && (i = !1), this.readonly(i), L(this.container, this.opts.element, this.opts.adaptContainerCssClass), 
                    this.container.addClass(E(this.opts.containerCssClass)), L(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass), 
                    this.dropdown.addClass(E(this.opts.dropdownCssClass));
                }), n.on("propertychange.select2", e), this.mutationCallback === t && (this.mutationCallback = function(t) {
                    t.forEach(e);
                }), (i = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver) !== t && (this.propertyObserver && (delete this.propertyObserver, 
                this.propertyObserver = null), this.propertyObserver = new i(this.mutationCallback), 
                this.propertyObserver.observe(n.get(0), {
                    "attributes": !0,
                    "subtree": !1
                }));
            },
            "triggerSelect": function(t) {
                var i = e.Event("select2-selecting", {
                    "val": this.id(t),
                    "object": t
                });
                return this.opts.element.trigger(i), !i.isDefaultPrevented();
            },
            "triggerChange": function(t) {
                t = t || {}, t = e.extend({}, t, {
                    "type": "change",
                    "val": this.val()
                }), this.opts.element.data("select2-change-triggered", !0), this.opts.element.trigger(t), 
                this.opts.element.data("select2-change-triggered", !1), this.opts.element.click(), 
                this.opts.blurOnChange && this.opts.element.blur();
            },
            "isInterfaceEnabled": function() {
                return !0 === this.enabledInterface;
            },
            "enableInterface": function() {
                var e = this._enabled && !this._readonly, t = !e;
                return e !== this.enabledInterface && (this.container.toggleClass("select2-container-disabled", t), 
                this.close(), this.enabledInterface = e, !0);
            },
            "enable": function(e) {
                e === t && (e = !0), this._enabled !== e && (this._enabled = e, this.opts.element.prop("disabled", !e), 
                this.enableInterface());
            },
            "disable": function() {
                this.enable(!1);
            },
            "readonly": function(e) {
                e === t && (e = !1), this._readonly !== e && (this._readonly = e, this.opts.element.prop("readonly", e), 
                this.enableInterface());
            },
            "opened": function() {
                return this.container.hasClass("select2-dropdown-open");
            },
            "positionDropdown": function() {
                var t, i, n, s, r, o = this.dropdown, a = this.container.offset(), l = this.container.outerHeight(!1), h = this.container.outerWidth(!1), c = o.outerHeight(!1), u = e(window), p = u.width(), d = u.height(), f = u.scrollLeft() + p, m = u.scrollTop() + d, g = a.top + l, y = a.left, v = g + c <= m, L = a.top - c >= this.body().scrollTop(), w = o.outerWidth(!1), b = y + w <= f;
                o.hasClass("select2-drop-above") ? (i = !0, !L && v && (n = !0, i = !1)) : (i = !1, 
                !v && L && (n = !0, i = !0)), n && (o.hide(), a = this.container.offset(), l = this.container.outerHeight(!1), 
                h = this.container.outerWidth(!1), c = o.outerHeight(!1), f = u.scrollLeft() + p, 
                m = u.scrollTop() + d, g = a.top + l, b = (y = a.left) + (w = o.outerWidth(!1)) <= f, 
                o.show()), this.opts.dropdownAutoWidth ? (r = e(".select2-results", o)[0], o.addClass("select2-drop-auto-width"), 
                o.css("width", ""), (w = o.outerWidth(!1) + (r.scrollHeight === r.clientHeight ? 0 : P.width)) > h ? h = w : w = h, 
                b = y + w <= f) : this.container.removeClass("select2-drop-auto-width"), "static" !== this.body().css("position") && (g -= (t = this.body().offset()).top, 
                y -= t.left), b || (y = a.left + this.container.outerWidth(!1) - w), s = {
                    "left": y,
                    "width": h
                }, i ? (s.top = a.top - c, s.bottom = "auto", this.container.addClass("select2-drop-above"), 
                o.addClass("select2-drop-above")) : (s.top = g, s.bottom = "auto", this.container.removeClass("select2-drop-above"), 
                o.removeClass("select2-drop-above")), s = e.extend(s, E(this.opts.dropdownCss)), 
                o.css(s);
            },
            "shouldOpen": function() {
                var t;
                return !this.opened() && (!1 !== this._enabled && !0 !== this._readonly && (t = e.Event("select2-opening"), 
                this.opts.element.trigger(t), !t.isDefaultPrevented()));
            },
            "clearDropdownAlignmentPreference": function() {
                this.container.removeClass("select2-drop-above"), this.dropdown.removeClass("select2-drop-above");
            },
            "open": function() {
                return !!this.shouldOpen() && (this.opening(), !0);
            },
            "opening": function() {
                var t, n = this.containerId, s = "scroll." + n, r = "resize." + n, o = "orientationchange." + n;
                this.container.addClass("select2-dropdown-open").addClass("select2-container-active"), 
                this.clearDropdownAlignmentPreference(), this.dropdown[0] !== this.body().children().last()[0] && this.dropdown.detach().appendTo(this.body()), 
                0 == (t = e("#select2-drop-mask")).length && ((t = e(document.createElement("div"))).attr("id", "select2-drop-mask").attr("class", "select2-drop-mask"), 
                t.hide(), t.appendTo(this.body()), t.on("mousedown touchstart click", function(n) {
                    i(t);
                    var s, r = e("#select2-drop");
                    r.length > 0 && ((s = r.data("select2")).opts.selectOnBlur && s.selectHighlighted({
                        "noFocus": !0
                    }), s.close({
                        "focus": !0
                    }), n.preventDefault(), n.stopPropagation());
                })), this.dropdown.prev()[0] !== t[0] && this.dropdown.before(t), e("#select2-drop").removeAttr("id"), 
                this.dropdown.attr("id", "select2-drop"), t.show(), this.positionDropdown(), this.dropdown.show(), 
                this.positionDropdown(), this.dropdown.addClass("select2-drop-active");
                var a = this;
                this.container.parents().add(window).each(function() {
                    e(this).on(r + " " + s + " " + o, function(e) {
                        a.positionDropdown();
                    });
                });
            },
            "close": function() {
                if (this.opened()) {
                    var t = this.containerId, i = "scroll." + t, n = "resize." + t, s = "orientationchange." + t;
                    this.container.parents().add(window).each(function() {
                        e(this).off(i).off(n).off(s);
                    }), this.clearDropdownAlignmentPreference(), e("#select2-drop-mask").hide(), this.dropdown.removeAttr("id"), 
                    this.dropdown.hide(), this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"), 
                    this.results.empty(), this.clearSearch(), this.search.removeClass("select2-active"), 
                    this.opts.element.trigger(e.Event("select2-close"));
                }
            },
            "externalSearch": function(e) {
                this.open(), this.search.val(e), this.updateResults(!1);
            },
            "clearSearch": function() {},
            "getMaximumSelectionSize": function() {
                return E(this.opts.maximumSelectionSize);
            },
            "ensureHighlightVisible": function() {
                var t, i, n, s, r, o, a, l = this.results;
                (i = this.highlight()) < 0 || (0 != i ? (t = this.findHighlightableChoices().find(".select2-result-label"), 
                s = (n = e(t[i])).offset().top + n.outerHeight(!0), i === t.length - 1 && (a = l.find("li.select2-more-results")).length > 0 && (s = a.offset().top + a.outerHeight(!0)), 
                s > (r = l.offset().top + l.outerHeight(!0)) && l.scrollTop(l.scrollTop() + (s - r)), 
                (o = n.offset().top - l.offset().top) < 0 && "none" != n.css("display") && l.scrollTop(l.scrollTop() + o)) : l.scrollTop(0));
            },
            "findHighlightableChoices": function() {
                return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)");
            },
            "moveHighlight": function(t) {
                for (var i = this.findHighlightableChoices(), n = this.highlight(); n > -1 && n < i.length; ) {
                    var s = e(i[n += t]);
                    if (s.hasClass("select2-result-selectable") && !s.hasClass("select2-disabled") && !s.hasClass("select2-selected")) {
                        this.highlight(n);
                        break;
                    }
                }
            },
            "highlight": function(t) {
                var i, n, r = this.findHighlightableChoices();
                if (0 === arguments.length) return s(r.filter(".select2-highlighted")[0], r.get());
                t >= r.length && (t = r.length - 1), t < 0 && (t = 0), this.removeHighlight(), (i = e(r[t])).addClass("select2-highlighted"), 
                this.search.attr("aria-activedescendant", i.find(".select2-result-label").attr("id")), 
                this.ensureHighlightVisible(), this.liveRegion.text(i.text()), (n = i.data("select2-data")) && this.opts.element.trigger({
                    "type": "select2-highlight",
                    "val": this.id(n),
                    "choice": n
                });
            },
            "removeHighlight": function() {
                this.results.find(".select2-highlighted").removeClass("select2-highlighted");
            },
            "countSelectableResults": function() {
                return this.findHighlightableChoices().length;
            },
            "highlightUnderEvent": function(t) {
                var i = e(t.target).closest(".select2-result-selectable");
                if (i.length > 0 && !i.is(".select2-highlighted")) {
                    var n = this.findHighlightableChoices();
                    this.highlight(n.index(i));
                } else 0 == i.length && this.removeHighlight();
            },
            "loadMoreIfNeeded": function() {
                var e = this.results, t = e.find("li.select2-more-results"), i = this.resultsPage + 1, n = this, s = this.search.val(), r = this.context;
                0 !== t.length && t.offset().top - e.offset().top - e.height() <= this.opts.loadMorePadding && (t.addClass("select2-active"), 
                this.opts.query({
                    "element": this.opts.element,
                    "term": s,
                    "page": i,
                    "context": r,
                    "matcher": this.opts.matcher,
                    "callback": this.bind(function(o) {
                        n.opened() && (n.opts.populateResults.call(this, e, o.results, {
                            "term": s,
                            "page": i,
                            "context": r
                        }), n.postprocessResults(o, !1, !1), !0 === o.more ? (t.detach().appendTo(e).text(n.opts.formatLoadMore(i + 1)), 
                        window.setTimeout(function() {
                            n.loadMoreIfNeeded();
                        }, 10)) : t.remove(), n.positionDropdown(), n.resultsPage = i, n.context = o.context, 
                        this.opts.element.trigger({
                            "type": "select2-loaded",
                            "items": o
                        }));
                    })
                }));
            },
            "tokenize": function() {},
            "updateResults": function(i) {
                function n() {
                    h.removeClass("select2-active"), p.positionDropdown(), c.find(".select2-no-results,.select2-selection-limit,.select2-searching").length ? p.liveRegion.text(c.text()) : p.liveRegion.text(p.opts.formatMatches(c.find(".select2-result-selectable").length));
                }
                function s(e) {
                    c.html(e), n();
                }
                var r, a, l, h = this.search, c = this.results, u = this.opts, p = this, d = h.val(), f = e.data(this.container, "select2-last-term");
                if ((!0 === i || !f || !o(d, f)) && (e.data(this.container, "select2-last-term", d), 
                !0 === i || !1 !== this.showSearchInput && this.opened())) {
                    l = ++this.queryCount;
                    var m = this.getMaximumSelectionSize();
                    if (!(m >= 1 && (r = this.data(), e.isArray(r) && r.length >= m && x(u.formatSelectionTooBig, "formatSelectionTooBig")))) return h.val().length < u.minimumInputLength ? (s(x(u.formatInputTooShort, "formatInputTooShort") ? "<li class='select2-no-results'>" + E(u.formatInputTooShort, h.val(), u.minimumInputLength) + "</li>" : ""), 
                    void (i && this.showSearch && this.showSearch(!0))) : void (u.maximumInputLength && h.val().length > u.maximumInputLength ? s(x(u.formatInputTooLong, "formatInputTooLong") ? "<li class='select2-no-results'>" + E(u.formatInputTooLong, h.val(), u.maximumInputLength) + "</li>" : "") : (u.formatSearching && 0 === this.findHighlightableChoices().length && s("<li class='select2-searching'>" + E(u.formatSearching) + "</li>"), 
                    h.addClass("select2-active"), this.removeHighlight(), (a = this.tokenize()) != t && null != a && h.val(a), 
                    this.resultsPage = 1, u.query({
                        "element": u.element,
                        "term": h.val(),
                        "page": this.resultsPage,
                        "context": null,
                        "matcher": u.matcher,
                        "callback": this.bind(function(r) {
                            var a;
                            l == this.queryCount && (this.opened() ? (this.context = r.context === t ? null : r.context, 
                            this.opts.createSearchChoice && "" !== h.val() && (a = this.opts.createSearchChoice.call(p, h.val(), r.results)) !== t && null !== a && p.id(a) !== t && null !== p.id(a) && 0 === e(r.results).filter(function() {
                                return o(p.id(this), p.id(a));
                            }).length && this.opts.createSearchChoicePosition(r.results, a), 0 === r.results.length && x(u.formatNoMatches, "formatNoMatches") ? s("<li class='select2-no-results'>" + E(u.formatNoMatches, h.val()) + "</li>") : (c.empty(), 
                            p.opts.populateResults.call(this, c, r.results, {
                                "term": h.val(),
                                "page": this.resultsPage,
                                "context": null
                            }), !0 === r.more && x(u.formatLoadMore, "formatLoadMore") && (c.append("<li class='select2-more-results'>" + p.opts.escapeMarkup(E(u.formatLoadMore, this.resultsPage)) + "</li>"), 
                            window.setTimeout(function() {
                                p.loadMoreIfNeeded();
                            }, 10)), this.postprocessResults(r, i), n(), this.opts.element.trigger({
                                "type": "select2-loaded",
                                "items": r
                            }))) : this.search.removeClass("select2-active"));
                        })
                    })));
                    s("<li class='select2-selection-limit'>" + E(u.formatSelectionTooBig, m) + "</li>");
                }
            },
            "cancel": function() {
                this.close();
            },
            "blur": function() {
                this.opts.selectOnBlur && this.selectHighlighted({
                    "noFocus": !0
                }), this.close(), this.container.removeClass("select2-container-active"), this.search[0] === document.activeElement && this.search.blur(), 
                this.clearSearch(), this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
            },
            "focusSearch": function() {
                f(this.search);
            },
            "selectHighlighted": function(e) {
                var t = this.highlight(), i = this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");
                i ? (this.highlight(t), this.onSelect(i, e)) : e && e.noFocus && this.close();
            },
            "getPlaceholder": function() {
                var e;
                return this.opts.element.attr("placeholder") || this.opts.element.attr("data-placeholder") || this.opts.element.data("placeholder") || this.opts.placeholder || ((e = this.getPlaceholderOption()) !== t ? e.text() : t);
            },
            "getPlaceholderOption": function() {
                if (this.select) {
                    var e = this.select.children("option").first();
                    if (this.opts.placeholderOption !== t) return "first" === this.opts.placeholderOption && e || "function" == typeof this.opts.placeholderOption && this.opts.placeholderOption(this.select);
                    if ("" === e.text() && "" === e.val()) return e;
                }
            },
            "initContainerWidth": function() {
                var i = function() {
                    var i, n, s, r, o, a;
                    if ("off" === this.opts.width) return null;
                    if ("element" === this.opts.width) return 0 === this.opts.element.outerWidth(!1) ? "auto" : this.opts.element.outerWidth(!1) + "px";
                    if ("copy" === this.opts.width || "resolve" === this.opts.width) {
                        if ((i = this.opts.element.attr("style")) !== t) for (r = 0, o = (n = i.split(";")).length; r < o; r += 1) if (a = n[r].replace(/\s/g, ""), 
                        null !== (s = a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i)) && s.length >= 1) return s[1];
                        return "resolve" === this.opts.width ? (i = this.opts.element.css("width")).indexOf("%") > 0 ? i : 0 === this.opts.element.outerWidth(!1) ? "auto" : this.opts.element.outerWidth(!1) + "px" : null;
                    }
                    return e.isFunction(this.opts.width) ? this.opts.width() : this.opts.width;
                }.call(this);
                null !== i && this.container.css("width", i);
            }
        }), {
            "createContainer": function() {
                return e(document.createElement("div")).attr({
                    "class": "select2-container"
                }).html([ "<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>", "   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>", "   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>", "</a>", "<label for='' class='select2-offscreen'></label>", "<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />", "<div class='select2-drop select2-display-none'>", "   <div class='select2-search'>", "       <label for='' class='select2-offscreen'></label>", "       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'", "       aria-autocomplete='list' />", "   </div>", "   <ul class='select2-results' role='listbox'>", "   </ul>", "</div>" ].join(""));
            },
            "enableInterface": function() {
                this.parent.enableInterface.apply(this, arguments) && this.focusser.prop("disabled", !this.isInterfaceEnabled());
            },
            "opening": function() {
                var i, n, s;
                this.opts.minimumResultsForSearch >= 0 && this.showSearch(!0), this.parent.opening.apply(this, arguments), 
                !1 !== this.showSearchInput && this.search.val(this.focusser.val()), this.search.focus(), 
                (i = this.search.get(0)).createTextRange ? ((n = i.createTextRange()).collapse(!1), 
                n.select()) : i.setSelectionRange && (s = this.search.val().length, i.setSelectionRange(s, s)), 
                "" === this.search.val() && this.nextSearchTerm != t && (this.search.val(this.nextSearchTerm), 
                this.search.select()), this.focusser.prop("disabled", !0).val(""), this.updateResults(!0), 
                this.opts.element.trigger(e.Event("select2-open"));
            },
            "close": function(e) {
                this.opened() && (this.parent.close.apply(this, arguments), e = e || {
                    "focus": !0
                }, this.focusser.prop("disabled", !1), e.focus && this.focusser.focus());
            },
            "focus": function() {
                this.opened() ? this.close() : (this.focusser.prop("disabled", !1), this.focusser.focus());
            },
            "isFocused": function() {
                return this.container.hasClass("select2-container-active");
            },
            "cancel": function() {
                this.parent.cancel.apply(this, arguments), this.focusser.prop("disabled", !1), this.focusser.focus();
            },
            "destroy": function() {
                e("label[for='" + this.focusser.attr("id") + "']").attr("for", this.opts.element.attr("id")), 
                this.parent.destroy.apply(this, arguments);
            },
            "initContainer": function() {
                var t, n, s = this.container, r = this.dropdown, o = M();
                this.opts.minimumResultsForSearch < 0 ? this.showSearch(!1) : this.showSearch(!0), 
                this.selection = t = s.find(".select2-choice"), this.focusser = s.find(".select2-focusser"), 
                t.find(".select2-chosen").attr("id", "select2-chosen-" + o), this.focusser.attr("aria-labelledby", "select2-chosen-" + o), 
                this.results.attr("id", "select2-results-" + o), this.search.attr("aria-owns", "select2-results-" + o), 
                this.focusser.attr("id", "s2id_autogen" + o), n = e("label[for='" + this.opts.element.attr("id") + "']"), 
                this.focusser.prev().text(n.text()).attr("for", this.focusser.attr("id"));
                var a = this.opts.element.attr("title");
                this.opts.element.attr("title", a || n.text()), this.focusser.attr("tabindex", this.elementTabIndex), 
                this.search.attr("id", this.focusser.attr("id") + "_search"), this.search.prev().text(e("label[for='" + this.focusser.attr("id") + "']").text()).attr("for", this.search.attr("id")), 
                this.search.on("keydown", this.bind(function(e) {
                    if (this.isInterfaceEnabled()) if (e.which !== I.PAGE_UP && e.which !== I.PAGE_DOWN) switch (e.which) {
                      case I.UP:
                      case I.DOWN:
                        return this.moveHighlight(e.which === I.UP ? -1 : 1), void g(e);

                      case I.ENTER:
                        return this.selectHighlighted(), void g(e);

                      case I.TAB:
                        return void this.selectHighlighted({
                            "noFocus": !0
                        });

                      case I.ESC:
                        return this.cancel(e), void g(e);
                    } else g(e);
                })), this.search.on("blur", this.bind(function(e) {
                    document.activeElement === this.body().get(0) && window.setTimeout(this.bind(function() {
                        this.opened() && this.search.focus();
                    }), 0);
                })), this.focusser.on("keydown", this.bind(function(e) {
                    if (this.isInterfaceEnabled() && e.which !== I.TAB && !I.isControl(e) && !I.isFunctionKey(e) && e.which !== I.ESC) {
                        if (!1 !== this.opts.openOnEnter || e.which !== I.ENTER) {
                            if (e.which == I.DOWN || e.which == I.UP || e.which == I.ENTER && this.opts.openOnEnter) {
                                if (e.altKey || e.ctrlKey || e.shiftKey || e.metaKey) return;
                                return this.open(), void g(e);
                            }
                            return e.which == I.DELETE || e.which == I.BACKSPACE ? (this.opts.allowClear && this.clear(), 
                            void g(e)) : void 0;
                        }
                        g(e);
                    }
                })), h(this.focusser), this.focusser.on("keyup-change input", this.bind(function(e) {
                    if (this.opts.minimumResultsForSearch >= 0) {
                        if (e.stopPropagation(), this.opened()) return;
                        this.open();
                    }
                })), t.on("mousedown touchstart", "abbr", this.bind(function(e) {
                    this.isInterfaceEnabled() && (this.clear(), y(e), this.close(), this.selection.focus());
                })), t.on("mousedown touchstart", this.bind(function(n) {
                    i(t), this.container.hasClass("select2-container-active") || this.opts.element.trigger(e.Event("select2-focus")), 
                    this.opened() ? this.close() : this.isInterfaceEnabled() && this.open(), g(n);
                })), r.on("mousedown touchstart", this.bind(function() {
                    this.search.focus();
                })), t.on("focus", this.bind(function(e) {
                    g(e);
                })), this.focusser.on("focus", this.bind(function() {
                    this.container.hasClass("select2-container-active") || this.opts.element.trigger(e.Event("select2-focus")), 
                    this.container.addClass("select2-container-active");
                })).on("blur", this.bind(function() {
                    this.opened() || (this.container.removeClass("select2-container-active"), this.opts.element.trigger(e.Event("select2-blur")));
                })), this.search.on("focus", this.bind(function() {
                    this.container.hasClass("select2-container-active") || this.opts.element.trigger(e.Event("select2-focus")), 
                    this.container.addClass("select2-container-active");
                })), this.initContainerWidth(), this.opts.element.addClass("select2-offscreen"), 
                this.setPlaceholder();
            },
            "clear": function(t) {
                var i = this.selection.data("select2-data");
                if (i) {
                    var n = e.Event("select2-clearing");
                    if (this.opts.element.trigger(n), n.isDefaultPrevented()) return;
                    var s = this.getPlaceholderOption();
                    this.opts.element.val(s ? s.val() : ""), this.selection.find(".select2-chosen").empty(), 
                    this.selection.removeData("select2-data"), this.setPlaceholder(), !1 !== t && (this.opts.element.trigger({
                        "type": "select2-removed",
                        "val": this.id(i),
                        "choice": i
                    }), this.triggerChange({
                        "removed": i
                    }));
                }
            },
            "initSelection": function() {
                if (this.isPlaceholderOptionSelected()) this.updateSelection(null), this.close(), 
                this.setPlaceholder(); else {
                    var e = this;
                    this.opts.initSelection.call(null, this.opts.element, function(i) {
                        i !== t && null !== i && (e.updateSelection(i), e.close(), e.setPlaceholder(), e.nextSearchTerm = e.opts.nextSearchTerm(i, e.search.val()));
                    });
                }
            },
            "isPlaceholderOptionSelected": function() {
                var e;
                return !!this.getPlaceholder() && ((e = this.getPlaceholderOption()) !== t && e.prop("selected") || "" === this.opts.element.val() || this.opts.element.val() === t || null === this.opts.element.val());
            },
            "prepareOpts": function() {
                var t = this.parent.prepareOpts.apply(this, arguments), i = this;
                return "select" === t.element.get(0).tagName.toLowerCase() ? t.initSelection = function(e, t) {
                    var n = e.find("option").filter(function() {
                        return this.selected;
                    });
                    t(i.optionToData(n));
                } : "data" in t && (t.initSelection = t.initSelection || function(i, n) {
                    var s = i.val(), r = null;
                    t.query({
                        "matcher": function(e, i, n) {
                            var a = o(s, t.id(n));
                            return a && (r = n), a;
                        },
                        "callback": e.isFunction(n) ? function() {
                            n(r);
                        } : e.noop
                    });
                }), t;
            },
            "getPlaceholder": function() {
                return this.select && this.getPlaceholderOption() === t ? t : this.parent.getPlaceholder.apply(this, arguments);
            },
            "setPlaceholder": function() {
                var e = this.getPlaceholder();
                if (this.isPlaceholderOptionSelected() && e !== t) {
                    if (this.select && this.getPlaceholderOption() === t) return;
                    this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)), this.selection.addClass("select2-default"), 
                    this.container.removeClass("select2-allowclear");
                }
            },
            "postprocessResults": function(e, t, i) {
                var n = 0, s = null, r = this;
                if (this.findHighlightableChoices().each2(function(e, t) {
                    if (o(r.id(t.data("select2-data")), r.opts.element.val())) return n = e, s = t, 
                    !1;
                }), !1 !== i && (!0 === t && n >= 0 ? null !== s ? this.opts.hideSelectionFromResult(s) && s.addClass("select2-selected") : this.highlight(n) : this.highlight(0)), 
                !0 === t) {
                    var a = this.opts.minimumResultsForSearch;
                    a >= 0 && this.showSearch(A(e.results) >= a);
                }
            },
            "showSearch": function(t) {
                this.showSearchInput !== t && (this.showSearchInput = t, this.dropdown.find(".select2-search").toggleClass("select2-search-hidden", !t), 
                this.dropdown.find(".select2-search").toggleClass("select2-offscreen", !t), e(this.dropdown, this.container).toggleClass("select2-with-searchbox", t));
            },
            "onSelect": function(e, t) {
                if (this.triggerSelect(e)) {
                    var i = this.opts.element.val(), n = this.data();
                    this.opts.element.val(this.id(e)), this.updateSelection(e), this.opts.element.trigger({
                        "type": "select2-selected",
                        "val": this.id(e),
                        "choice": e
                    }), this.nextSearchTerm = this.opts.nextSearchTerm(e, this.search.val()), this.close(), 
                    t && t.noFocus || this.focusser.focus(), o(i, this.id(e)) || this.triggerChange({
                        "added": e,
                        "removed": n
                    });
                }
            },
            "updateSelection": function(e) {
                var i, n, s = this.selection.find(".select2-chosen");
                this.selection.data("select2-data", e), s.empty(), null !== e && (i = this.opts.formatSelection(e, s, this.opts.escapeMarkup)), 
                i !== t && s.append(i), (n = this.opts.formatSelectionCssClass(e, s)) !== t && s.addClass(n), 
                this.selection.removeClass("select2-default"), this.opts.allowClear && this.getPlaceholder() !== t && this.container.addClass("select2-allowclear");
            },
            "val": function() {
                var e, i = !1, n = null, s = this, r = this.data();
                if (0 === arguments.length) return this.opts.element.val();
                if (e = arguments[0], arguments.length > 1 && (i = arguments[1]), this.select) this.select.val(e).find("option").filter(function() {
                    return this.selected;
                }).each2(function(e, t) {
                    return n = s.optionToData(t), !1;
                }), this.updateSelection(n), this.setPlaceholder(), i && this.triggerChange({
                    "added": n,
                    "removed": r
                }); else {
                    if (!e && 0 !== e) return void this.clear(i);
                    if (this.opts.initSelection === t) throw new Error("cannot call val() if initSelection() is not defined");
                    this.opts.element.val(e), this.opts.initSelection(this.opts.element, function(e) {
                        s.opts.element.val(e ? s.id(e) : ""), s.updateSelection(e), s.setPlaceholder(), 
                        i && s.triggerChange({
                            "added": e,
                            "removed": r
                        });
                    });
                }
            },
            "clearSearch": function() {
                this.search.val(""), this.focusser.val("");
            },
            "data": function(e) {
                var i, n = !1;
                if (0 === arguments.length) return (i = this.selection.data("select2-data")) == t && (i = null), 
                i;
                arguments.length > 1 && (n = arguments[1]), e ? (i = this.data(), this.opts.element.val(e ? this.id(e) : ""), 
                this.updateSelection(e), n && this.triggerChange({
                    "added": e,
                    "removed": i
                })) : this.clear(n);
            }
        }), T = _(F, {
            "createContainer": function() {
                return e(document.createElement("div")).attr({
                    "class": "select2-container select2-container-multi"
                }).html([ "<ul class='select2-choices'>", "  <li class='select2-search-field'>", "    <label for='' class='select2-offscreen'></label>", "    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>", "  </li>", "</ul>", "<div class='select2-drop select2-drop-multi select2-display-none'>", "   <ul class='select2-results'>", "   </ul>", "</div>" ].join(""));
            },
            "prepareOpts": function() {
                var t = this.parent.prepareOpts.apply(this, arguments), i = this;
                return "select" === t.element.get(0).tagName.toLowerCase() ? t.initSelection = function(e, t) {
                    var n = [];
                    e.find("option").filter(function() {
                        return this.selected;
                    }).each2(function(e, t) {
                        n.push(i.optionToData(t));
                    }), t(n);
                } : "data" in t && (t.initSelection = t.initSelection || function(i, n) {
                    var s = a(i.val(), t.separator), r = [];
                    t.query({
                        "matcher": function(i, n, a) {
                            var l = e.grep(s, function(e) {
                                return o(e, t.id(a));
                            }).length;
                            return l && r.push(a), l;
                        },
                        "callback": e.isFunction(n) ? function() {
                            for (var e = [], i = 0; i < s.length; i++) for (var a = s[i], l = 0; l < r.length; l++) {
                                var h = r[l];
                                if (o(a, t.id(h))) {
                                    e.push(h), r.splice(l, 1);
                                    break;
                                }
                            }
                            n(e);
                        } : e.noop
                    });
                }), t;
            },
            "selectChoice": function(e) {
                var t = this.container.find(".select2-search-choice-focus");
                t.length && e && e[0] == t[0] || (t.length && this.opts.element.trigger("choice-deselected", t), 
                t.removeClass("select2-search-choice-focus"), e && e.length && (this.close(), e.addClass("select2-search-choice-focus"), 
                this.opts.element.trigger("choice-selected", e)));
            },
            "destroy": function() {
                e("label[for='" + this.search.attr("id") + "']").attr("for", this.opts.element.attr("id")), 
                this.parent.destroy.apply(this, arguments);
            },
            "initContainer": function() {
                var t, i = ".select2-choices";
                this.searchContainer = this.container.find(".select2-search-field"), this.selection = t = this.container.find(i);
                var n = this;
                this.selection.on("click", ".select2-search-choice:not(.select2-locked)", function(t) {
                    n.search[0].focus(), n.selectChoice(e(this));
                }), this.search.attr("id", "s2id_autogen" + M()), this.search.prev().text(e("label[for='" + this.opts.element.attr("id") + "']").text()).attr("for", this.search.attr("id")), 
                this.search.on("input paste", this.bind(function() {
                    this.isInterfaceEnabled() && (this.opened() || this.open());
                })), this.search.attr("tabindex", this.elementTabIndex), this.keydowns = 0, this.search.on("keydown", this.bind(function(e) {
                    if (this.isInterfaceEnabled()) {
                        ++this.keydowns;
                        var i = t.find(".select2-search-choice-focus"), n = i.prev(".select2-search-choice:not(.select2-locked)"), s = i.next(".select2-search-choice:not(.select2-locked)"), r = m(this.search);
                        if (i.length && (e.which == I.LEFT || e.which == I.RIGHT || e.which == I.BACKSPACE || e.which == I.DELETE || e.which == I.ENTER)) {
                            var o = i;
                            return e.which == I.LEFT && n.length ? o = n : e.which == I.RIGHT ? o = s.length ? s : null : e.which === I.BACKSPACE ? (this.unselect(i.first()), 
                            this.search.width(10), o = n.length ? n : s) : e.which == I.DELETE ? (this.unselect(i.first()), 
                            this.search.width(10), o = s.length ? s : null) : e.which == I.ENTER && (o = null), 
                            this.selectChoice(o), g(e), void (o && o.length || this.open());
                        }
                        if ((e.which === I.BACKSPACE && 1 == this.keydowns || e.which == I.LEFT) && 0 == r.offset && !r.length) return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()), 
                        void g(e);
                        if (this.selectChoice(null), this.opened()) switch (e.which) {
                          case I.UP:
                          case I.DOWN:
                            return this.moveHighlight(e.which === I.UP ? -1 : 1), void g(e);

                          case I.ENTER:
                            return this.selectHighlighted(), void g(e);

                          case I.TAB:
                            return this.selectHighlighted({
                                "noFocus": !0
                            }), void this.close();

                          case I.ESC:
                            return this.cancel(e), void g(e);
                        }
                        if (e.which !== I.TAB && !I.isControl(e) && !I.isFunctionKey(e) && e.which !== I.BACKSPACE && e.which !== I.ESC) {
                            if (e.which === I.ENTER) {
                                if (!1 === this.opts.openOnEnter) return;
                                if (e.altKey || e.ctrlKey || e.shiftKey || e.metaKey) return;
                            }
                            this.open(), e.which !== I.PAGE_UP && e.which !== I.PAGE_DOWN || g(e), e.which === I.ENTER && g(e);
                        }
                    }
                })), this.search.on("keyup", this.bind(function(e) {
                    this.keydowns = 0, this.resizeSearch();
                })), this.search.on("blur", this.bind(function(t) {
                    this.container.removeClass("select2-container-active"), this.search.removeClass("select2-focused"), 
                    this.selectChoice(null), this.opened() || this.clearSearch(), t.stopImmediatePropagation(), 
                    this.opts.element.trigger(e.Event("select2-blur"));
                })), this.container.on("click", i, this.bind(function(t) {
                    this.isInterfaceEnabled() && (e(t.target).closest(".select2-search-choice").length > 0 || (this.selectChoice(null), 
                    this.clearPlaceholder(), this.container.hasClass("select2-container-active") || this.opts.element.trigger(e.Event("select2-focus")), 
                    this.open(), this.focusSearch(), t.preventDefault()));
                })), this.container.on("focus", i, this.bind(function() {
                    this.isInterfaceEnabled() && (this.container.hasClass("select2-container-active") || this.opts.element.trigger(e.Event("select2-focus")), 
                    this.container.addClass("select2-container-active"), this.dropdown.addClass("select2-drop-active"), 
                    this.clearPlaceholder());
                })), this.initContainerWidth(), this.opts.element.addClass("select2-offscreen"), 
                this.clearSearch();
            },
            "enableInterface": function() {
                this.parent.enableInterface.apply(this, arguments) && this.search.prop("disabled", !this.isInterfaceEnabled());
            },
            "initSelection": function() {
                if ("" === this.opts.element.val() && "" === this.opts.element.text() && (this.updateSelection([]), 
                this.close(), this.clearSearch()), this.select || "" !== this.opts.element.val()) {
                    var e = this;
                    this.opts.initSelection.call(null, this.opts.element, function(i) {
                        i !== t && null !== i && (e.updateSelection(i), e.close(), e.clearSearch());
                    });
                }
            },
            "clearSearch": function() {
                var e = this.getPlaceholder(), i = this.getMaxSearchWidth();
                e !== t && 0 === this.getVal().length && !1 === this.search.hasClass("select2-focused") ? (this.search.val(e).addClass("select2-default"), 
                this.search.width(i > 0 ? i : this.container.css("width"))) : this.search.val("").width(10);
            },
            "clearPlaceholder": function() {
                this.search.hasClass("select2-default") && this.search.val("").removeClass("select2-default");
            },
            "opening": function() {
                this.clearPlaceholder(), this.resizeSearch(), this.parent.opening.apply(this, arguments), 
                this.focusSearch(), "" === this.search.val() && this.nextSearchTerm != t && (this.search.val(this.nextSearchTerm), 
                this.search.select()), this.updateResults(!0), this.search.focus(), this.opts.element.trigger(e.Event("select2-open"));
            },
            "close": function() {
                this.opened() && this.parent.close.apply(this, arguments);
            },
            "focus": function() {
                this.close(), this.search.focus();
            },
            "isFocused": function() {
                return this.search.hasClass("select2-focused");
            },
            "updateSelection": function(t) {
                var i = [], n = [], r = this;
                e(t).each(function() {
                    s(r.id(this), i) < 0 && (i.push(r.id(this)), n.push(this));
                }), t = n, this.selection.find(".select2-search-choice").remove(), e(t).each(function() {
                    r.addSelectedChoice(this);
                }), r.postprocessResults();
            },
            "tokenize": function() {
                var e = this.search.val();
                null != (e = this.opts.tokenizer.call(this, e, this.data(), this.bind(this.onSelect), this.opts)) && e != t && (this.search.val(e), 
                e.length > 0 && this.open());
            },
            "onSelect": function(e, i) {
                this.triggerSelect(e) && (this.addSelectedChoice(e), this.opts.element.trigger({
                    "type": "selected",
                    "val": this.id(e),
                    "choice": e
                }), this.nextSearchTerm = this.opts.nextSearchTerm(e, this.search.val()), this.clearSearch(), 
                this.updateResults(), !this.select && this.opts.closeOnSelect || this.postprocessResults(e, !1, !0 === this.opts.closeOnSelect), 
                this.opts.closeOnSelect ? (this.close(), this.search.width(10)) : this.countSelectableResults() > 0 ? (this.search.width(10), 
                this.resizeSearch(), this.getMaximumSelectionSize() > 0 && this.val().length >= this.getMaximumSelectionSize() ? this.updateResults(!0) : this.nextSearchTerm != t && (this.search.val(this.nextSearchTerm), 
                this.updateResults(), this.search.select()), this.positionDropdown()) : (this.close(), 
                this.search.width(10)), this.triggerChange({
                    "added": e
                }), i && i.noFocus || this.focusSearch());
            },
            "cancel": function() {
                this.close(), this.focusSearch();
            },
            "addSelectedChoice": function(i) {
                var n, s, r = !i.locked, o = e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"), a = e("<li class='select2-search-choice select2-locked'><div></div></li>"), l = r ? o : a, h = this.id(i), c = this.getVal();
                (n = this.opts.formatSelection(i, l.find("div"), this.opts.escapeMarkup)) != t && l.find("div").replaceWith("<div>" + n + "</div>"), 
                (s = this.opts.formatSelectionCssClass(i, l.find("div"))) != t && l.addClass(s), 
                r && l.find(".select2-search-choice-close").on("mousedown", g).on("click dblclick", this.bind(function(t) {
                    this.isInterfaceEnabled() && (e(t.target).closest(".select2-search-choice").fadeOut("fast", this.bind(function() {
                        this.unselect(e(t.target)), this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"), 
                        this.close(), this.focusSearch();
                    })).dequeue(), g(t));
                })).on("focus", this.bind(function() {
                    this.isInterfaceEnabled() && (this.container.addClass("select2-container-active"), 
                    this.dropdown.addClass("select2-drop-active"));
                })), l.data("select2-data", i), l.insertBefore(this.searchContainer), c.push(h), 
                this.setVal(c);
            },
            "unselect": function(t) {
                var i, n, r = this.getVal();
                if (0 === (t = t.closest(".select2-search-choice")).length) throw "Invalid argument: " + t + ". Must be .select2-search-choice";
                if (i = t.data("select2-data")) {
                    for (;(n = s(this.id(i), r)) >= 0; ) r.splice(n, 1), this.setVal(r), this.select && this.postprocessResults();
                    var o = e.Event("select2-removing");
                    o.val = this.id(i), o.choice = i, this.opts.element.trigger(o), o.isDefaultPrevented() || (t.remove(), 
                    this.opts.element.trigger({
                        "type": "select2-removed",
                        "val": this.id(i),
                        "choice": i
                    }), this.triggerChange({
                        "removed": i
                    }));
                }
            },
            "postprocessResults": function(e, i, n) {
                var r = this.getVal(), o = this.results.find(".select2-result"), a = this.results.find(".select2-result-with-children"), l = this;
                o.each2(function(e, i) {
                    s(l.id(i.data("select2-data")), r) >= 0 && (l.opts.hideSelectionFromResult(i) === t || l.opts.hideSelectionFromResult(i)) && (i.addClass("select2-selected"), 
                    i.find(".select2-result-selectable").addClass("select2-selected"));
                }), a.each2(function(e, t) {
                    t.is(".select2-result-selectable") || 0 !== t.find(".select2-result-selectable:not(.select2-selected)").length || t.addClass("select2-selected");
                }), -1 == this.highlight() && !1 !== n && l.highlight(0), !this.opts.createSearchChoice && !o.filter(".select2-result:not(.select2-selected)").length > 0 && (!e || e && !e.more && 0 === this.results.find(".select2-no-results").length) && x(l.opts.formatNoMatches, "formatNoMatches") && this.results.append("<li class='select2-no-results'>" + E(l.opts.formatNoMatches, l.search.val()) + "</li>");
            },
            "getMaxSearchWidth": function() {
                return this.selection.width() - l(this.search);
            },
            "resizeSearch": function() {
                var e, t, i, n, s = l(this.search);
                e = v(this.search) + 10, t = this.search.offset().left, (n = (i = this.selection.width()) - (t - this.selection.offset().left) - s) < e && (n = i - s), 
                n < 40 && (n = i - s), n <= 0 && (n = e), this.search.width(Math.floor(n));
            },
            "getVal": function() {
                var e;
                return this.select ? null === (e = this.select.val()) ? [] : e : (e = this.opts.element.val(), 
                a(e, this.opts.separator));
            },
            "setVal": function(t) {
                var i;
                this.select ? this.select.val(t) : (i = [], e(t).each(function() {
                    s(this, i) < 0 && i.push(this);
                }), this.opts.element.val(0 === i.length ? "" : i.join(this.opts.separator)));
            },
            "buildChangeDetails": function(e, t) {
                for (var t = t.slice(0), e = e.slice(0), i = 0; i < t.length; i++) for (var n = 0; n < e.length; n++) o(this.opts.id(t[i]), this.opts.id(e[n])) && (t.splice(i, 1), 
                i > 0 && i--, e.splice(n, 1), n--);
                return {
                    "added": t,
                    "removed": e
                };
            },
            "val": function(i, n) {
                var s, r = this;
                if (0 === arguments.length) return this.getVal();
                if ((s = this.data()).length || (s = []), !i && 0 !== i) return this.opts.element.val(""), 
                this.updateSelection([]), this.clearSearch(), void (n && this.triggerChange({
                    "added": this.data(),
                    "removed": s
                }));
                if (this.setVal(i), this.select) this.opts.initSelection(this.select, this.bind(this.updateSelection)), 
                n && this.triggerChange(this.buildChangeDetails(s, this.data())); else {
                    if (this.opts.initSelection === t) throw new Error("val() cannot be called if initSelection() is not defined");
                    this.opts.initSelection(this.opts.element, function(t) {
                        var i = e.map(t, r.id);
                        r.setVal(i), r.updateSelection(t), r.clearSearch(), n && r.triggerChange(r.buildChangeDetails(s, r.data()));
                    });
                }
                this.clearSearch();
            },
            "onSortStart": function() {
                if (this.select) throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");
                this.search.width(0), this.searchContainer.hide();
            },
            "onSortEnd": function() {
                var t = [], i = this;
                this.searchContainer.show(), this.searchContainer.appendTo(this.searchContainer.parent()), 
                this.resizeSearch(), this.selection.find(".select2-search-choice").each(function() {
                    t.push(i.opts.id(e(this).data("select2-data")));
                }), this.setVal(t), this.triggerChange();
            },
            "data": function(t, i) {
                var n, s, r = this;
                if (0 === arguments.length) return this.selection.children(".select2-search-choice").map(function() {
                    return e(this).data("select2-data");
                }).get();
                s = this.data(), t || (t = []), n = e.map(t, function(e) {
                    return r.opts.id(e);
                }), this.setVal(n), this.updateSelection(t), this.clearSearch(), i && this.triggerChange(this.buildChangeDetails(s, this.data()));
            }
        }), e.fn.select2 = function() {
            var i, n, r, o, a, l = Array.prototype.slice.call(arguments, 0), h = [ "val", "destroy", "opened", "open", "close", "focus", "isFocused", "container", "dropdown", "onSortStart", "onSortEnd", "enable", "disable", "readonly", "positionDropdown", "data", "search" ], c = [ "opened", "isFocused", "container", "dropdown" ], u = [ "val", "data" ], p = {
                "search": "externalSearch"
            };
            return this.each(function() {
                if (0 === l.length || "object" == typeof l[0]) (i = 0 === l.length ? {} : e.extend({}, l[0])).element = e(this), 
                "select" === i.element.get(0).tagName.toLowerCase() ? a = i.element.prop("multiple") : (a = i.multiple || !1, 
                "tags" in i && (i.multiple = a = !0)), (n = a ? new window.Select2.class.multi() : new window.Select2.class.single()).init(i); else {
                    if ("string" != typeof l[0]) throw "Invalid arguments to select2 plugin: " + l;
                    if (s(l[0], h) < 0) throw "Unknown method: " + l[0];
                    if (o = t, (n = e(this).data("select2")) === t) return;
                    if ("container" === (r = l[0]) ? o = n.container : "dropdown" === r ? o = n.dropdown : (p[r] && (r = p[r]), 
                    o = n[r].apply(n, l.slice(1))), s(l[0], c) >= 0 || s(l[0], u) && 1 == l.length) return !1;
                }
            }), o === t ? this : o;
        }, e.fn.select2.defaults = {
            "width": "copy",
            "loadMorePadding": 0,
            "closeOnSelect": !0,
            "openOnEnter": !0,
            "containerCss": {},
            "dropdownCss": {},
            "containerCssClass": "",
            "dropdownCssClass": "",
            "formatResult": function(e, t, i, n) {
                var s = [];
                return w(e.text, i.term, s, n), s.join("");
            },
            "formatSelection": function(e, i, n) {
                return e ? n(e.text) : t;
            },
            "sortResults": function(e, t, i) {
                return e;
            },
            "formatResultCssClass": function(e) {
                return e.css;
            },
            "formatSelectionCssClass": function(e, i) {
                return t;
            },
            "formatMatches": function(e) {
                return e + " results are available, use up and down arrow keys to navigate.";
            },
            "formatNoMatches": function() {
                return "No matches found";
            },
            "formatInputTooShort": function(e, t) {
                var i = t - e.length;
                return "Please enter " + i + " or more character" + (1 == i ? "" : "s");
            },
            "formatInputTooLong": function(e, t) {
                var i = e.length - t;
                return "Please delete " + i + " character" + (1 == i ? "" : "s");
            },
            "formatSelectionTooBig": function(e) {
                return "You can only select " + e + " item" + (1 == e ? "" : "s");
            },
            "formatLoadMore": function(e) {
                return "Loading more results…";
            },
            "formatSearching": function() {
                return "Searching…";
            },
            "minimumResultsForSearch": 0,
            "minimumInputLength": 0,
            "maximumInputLength": null,
            "maximumSelectionSize": 0,
            "id": function(e) {
                return e == t ? null : e.id;
            },
            "matcher": function(e, t) {
                return n("" + t).toUpperCase().indexOf(n("" + e).toUpperCase()) >= 0;
            },
            "separator": ",",
            "tokenSeparators": [],
            "tokenizer": function(e, i, n, s) {
                var r, a, l, h, c, u = e, p = !1;
                if (!s.createSearchChoice || !s.tokenSeparators || s.tokenSeparators.length < 1) return t;
                for (;;) {
                    for (a = -1, l = 0, h = s.tokenSeparators.length; l < h && (c = s.tokenSeparators[l], 
                    !((a = e.indexOf(c)) >= 0)); l++) ;
                    if (a < 0) break;
                    if (r = e.substring(0, a), e = e.substring(a + c.length), r.length > 0 && (r = s.createSearchChoice.call(this, r, i)) !== t && null !== r && s.id(r) !== t && null !== s.id(r)) {
                        for (p = !1, l = 0, h = i.length; l < h; l++) if (o(s.id(r), s.id(i[l]))) {
                            p = !0;
                            break;
                        }
                        p || n(r);
                    }
                }
                return u !== e ? e : void 0;
            },
            "escapeMarkup": b,
            "blurOnChange": !1,
            "selectOnBlur": !1,
            "adaptContainerCssClass": function(e) {
                return e;
            },
            "adaptDropdownCssClass": function(e) {
                return null;
            },
            "nextSearchTerm": function(e, i) {
                return t;
            },
            "hideSelectionFromResult": function(e) {
                return t;
            },
            "searchInputPlaceholder": "",
            "createSearchChoicePosition": "top"
        }, e.fn.select2.ajaxDefaults = {
            "transport": e.ajax,
            "params": {
                "type": "GET",
                "cache": !1,
                "dataType": "json"
            }
        }, window.Select2 = {
            "query": {
                "ajax": C,
                "local": O,
                "tags": S
            },
            "util": {
                "debounce": u,
                "markMatch": w,
                "escapeMarkup": b,
                "stripDiacritics": n
            },
            "class": {
                "abstract": F,
                "single": N,
                "multi": T
            }
        };
    }
}(jQuery), function(e, t) {
    "use strict";
    "object" == typeof exports ? module.exports = t(require("./punycode"), require("./IPv6"), require("./SecondLevelDomains")) : "function" == typeof define && define.amd ? define([ "./punycode", "./IPv6", "./SecondLevelDomains" ], t) : e.URI = t(e.punycode, e.IPv6, e.SecondLevelDomains, e);
}(this, function(e, t, i, n) {
    "use strict";
    function s(e, t) {
        return this instanceof s ? (void 0 === e && (e = "undefined" != typeof location ? location.href + "" : ""), 
        this.href(e), void 0 !== t ? this.absoluteTo(t) : this) : new s(e, t);
    }
    function r(e) {
        return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1");
    }
    function o(e) {
        return void 0 === e ? "Undefined" : String(Object.prototype.toString.call(e)).slice(8, -1);
    }
    function a(e) {
        return "Array" === o(e);
    }
    function l(e, t) {
        var i, n, s = {};
        if (a(t)) for (i = 0, n = t.length; i < n; i++) s[t[i]] = !0; else s[t] = !0;
        for (i = 0, n = e.length; i < n; i++) void 0 !== s[e[i]] && (e.splice(i, 1), n--, 
        i--);
        return e;
    }
    function h(e, t) {
        var i, n;
        if (a(t)) {
            for (i = 0, n = t.length; i < n; i++) if (!h(e, t[i])) return !1;
            return !0;
        }
        var s = o(t);
        for (i = 0, n = e.length; i < n; i++) if ("RegExp" === s) {
            if ("string" == typeof e[i] && e[i].match(t)) return !0;
        } else if (e[i] === t) return !0;
        return !1;
    }
    function c(e, t) {
        if (!a(e) || !a(t)) return !1;
        if (e.length !== t.length) return !1;
        e.sort(), t.sort();
        for (var i = 0, n = e.length; i < n; i++) if (e[i] !== t[i]) return !1;
        return !0;
    }
    function u(e) {
        return escape(e);
    }
    function p(e) {
        return encodeURIComponent(e).replace(/[!'()*]/g, u).replace(/\*/g, "%2A");
    }
    var d = n && n.URI;
    s.version = "1.13.2";
    var f = s.prototype, m = Object.prototype.hasOwnProperty;
    s._parts = function() {
        return {
            "protocol": null,
            "username": null,
            "password": null,
            "hostname": null,
            "urn": null,
            "port": null,
            "path": null,
            "query": null,
            "fragment": null,
            "duplicateQueryParameters": s.duplicateQueryParameters,
            "escapeQuerySpace": s.escapeQuerySpace
        };
    }, s.duplicateQueryParameters = !1, s.escapeQuerySpace = !0, s.protocol_expression = /^[a-z][a-z0-9.+-]*$/i, 
    s.idn_expression = /[^a-z0-9\.-]/i, s.punycode_expression = /(xn--)/i, s.ip4_expression = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/, 
    s.ip6_expression = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/, 
    s.find_uri_expression = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi, 
    s.findUri = {
        "start": /\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,
        "end": /[\s\r\n]|$/,
        "trim": /[`!()\[\]{};:'".,<>?«»“”„‘’]+$/
    }, s.defaultPorts = {
        "http": "80",
        "https": "443",
        "ftp": "21",
        "gopher": "70",
        "ws": "80",
        "wss": "443"
    }, s.invalid_hostname_characters = /[^a-zA-Z0-9\.-]/, s.domAttributes = {
        "a": "href",
        "blockquote": "cite",
        "link": "href",
        "base": "href",
        "script": "src",
        "form": "action",
        "img": "src",
        "area": "href",
        "iframe": "src",
        "embed": "src",
        "source": "src",
        "track": "src",
        "input": "src"
    }, s.getDomAttribute = function(e) {
        if (e && e.nodeName) {
            var t = e.nodeName.toLowerCase();
            if ("input" !== t || "image" === e.type) return s.domAttributes[t];
        }
    }, s.encode = p, s.decode = decodeURIComponent, s.iso8859 = function() {
        s.encode = escape, s.decode = unescape;
    }, s.unicode = function() {
        s.encode = p, s.decode = decodeURIComponent;
    }, s.characters = {
        "pathname": {
            "encode": {
                "expression": /%(24|26|2B|2C|3B|3D|3A|40)/gi,
                "map": {
                    "%24": "$",
                    "%26": "&",
                    "%2B": "+",
                    "%2C": ",",
                    "%3B": ";",
                    "%3D": "=",
                    "%3A": ":",
                    "%40": "@"
                }
            },
            "decode": {
                "expression": /[\/\?#]/g,
                "map": {
                    "/": "%2F",
                    "?": "%3F",
                    "#": "%23"
                }
            }
        },
        "reserved": {
            "encode": {
                "expression": /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,
                "map": {
                    "%3A": ":",
                    "%2F": "/",
                    "%3F": "?",
                    "%23": "#",
                    "%5B": "[",
                    "%5D": "]",
                    "%40": "@",
                    "%21": "!",
                    "%24": "$",
                    "%26": "&",
                    "%27": "'",
                    "%28": "(",
                    "%29": ")",
                    "%2A": "*",
                    "%2B": "+",
                    "%2C": ",",
                    "%3B": ";",
                    "%3D": "="
                }
            }
        }
    }, s.encodeQuery = function(e, t) {
        var i = s.encode(e + "");
        return void 0 === t && (t = s.escapeQuerySpace), t ? i.replace(/%20/g, "+") : i;
    }, s.decodeQuery = function(e, t) {
        e += "", void 0 === t && (t = s.escapeQuerySpace);
        try {
            return s.decode(t ? e.replace(/\+/g, "%20") : e);
        } catch (t) {
            return e;
        }
    }, s.recodePath = function(e) {
        for (var t = (e + "").split("/"), i = 0, n = t.length; i < n; i++) t[i] = s.encodePathSegment(s.decode(t[i]));
        return t.join("/");
    }, s.decodePath = function(e) {
        for (var t = (e + "").split("/"), i = 0, n = t.length; i < n; i++) t[i] = s.decodePathSegment(t[i]);
        return t.join("/");
    };
    var g, y = {
        "encode": "encode",
        "decode": "decode"
    }, v = function(e, t) {
        return function(i) {
            return s[t](i + "").replace(s.characters[e][t].expression, function(i) {
                return s.characters[e][t].map[i];
            });
        };
    };
    for (g in y) s[g + "PathSegment"] = v("pathname", y[g]);
    s.encodeReserved = v("reserved", "encode"), s.parse = function(e, t) {
        var i;
        return t || (t = {}), (i = e.indexOf("#")) > -1 && (t.fragment = e.substring(i + 1) || null, 
        e = e.substring(0, i)), (i = e.indexOf("?")) > -1 && (t.query = e.substring(i + 1) || null, 
        e = e.substring(0, i)), "//" === e.substring(0, 2) ? (t.protocol = null, e = e.substring(2), 
        e = s.parseAuthority(e, t)) : (i = e.indexOf(":")) > -1 && (t.protocol = e.substring(0, i) || null, 
        t.protocol && !t.protocol.match(s.protocol_expression) ? t.protocol = void 0 : "file" === t.protocol ? e = e.substring(i + 3) : "//" === e.substring(i + 1, i + 3) ? (e = e.substring(i + 3), 
        e = s.parseAuthority(e, t)) : (e = e.substring(i + 1), t.urn = !0)), t.path = e, 
        t;
    }, s.parseHost = function(e, t) {
        var i, n, s = e.indexOf("/");
        return -1 === s && (s = e.length), "[" === e.charAt(0) ? (i = e.indexOf("]"), t.hostname = e.substring(1, i) || null, 
        t.port = e.substring(i + 2, s) || null, "/" === t.port && (t.port = null)) : e.indexOf(":") !== e.lastIndexOf(":") ? (t.hostname = e.substring(0, s) || null, 
        t.port = null) : (n = e.substring(0, s).split(":"), t.hostname = n[0] || null, t.port = n[1] || null), 
        t.hostname && "/" !== e.substring(s).charAt(0) && (s++, e = "/" + e), e.substring(s) || "/";
    }, s.parseAuthority = function(e, t) {
        return e = s.parseUserinfo(e, t), s.parseHost(e, t);
    }, s.parseUserinfo = function(e, t) {
        var i, n = e.indexOf("/"), r = n > -1 ? e.lastIndexOf("@", n) : e.indexOf("@");
        return r > -1 && (-1 === n || r < n) ? (i = e.substring(0, r).split(":"), t.username = i[0] ? s.decode(i[0]) : null, 
        i.shift(), t.password = i[0] ? s.decode(i.join(":")) : null, e = e.substring(r + 1)) : (t.username = null, 
        t.password = null), e;
    }, s.parseQuery = function(e, t) {
        if (!e) return {};
        if (!(e = e.replace(/&+/g, "&").replace(/^\?*&*|&+$/g, ""))) return {};
        for (var i, n, r, o = {}, a = e.split("&"), l = a.length, h = 0; h < l; h++) i = a[h].split("="), 
        n = s.decodeQuery(i.shift(), t), r = i.length ? s.decodeQuery(i.join("="), t) : null, 
        o[n] ? ("string" == typeof o[n] && (o[n] = [ o[n] ]), o[n].push(r)) : o[n] = r;
        return o;
    }, s.build = function(e) {
        var t = "";
        return e.protocol && (t += e.protocol + ":"), e.urn || !t && !e.hostname || (t += "//"), 
        t += s.buildAuthority(e) || "", "string" == typeof e.path && ("/" !== e.path.charAt(0) && "string" == typeof e.hostname && (t += "/"), 
        t += e.path), "string" == typeof e.query && e.query && (t += "?" + e.query), "string" == typeof e.fragment && e.fragment && (t += "#" + e.fragment), 
        t;
    }, s.buildHost = function(e) {
        var t = "";
        return e.hostname ? (s.ip6_expression.test(e.hostname) ? t += "[" + e.hostname + "]" : t += e.hostname, 
        e.port && (t += ":" + e.port), t) : "";
    }, s.buildAuthority = function(e) {
        return s.buildUserinfo(e) + s.buildHost(e);
    }, s.buildUserinfo = function(e) {
        var t = "";
        return e.username && (t += s.encode(e.username), e.password && (t += ":" + s.encode(e.password)), 
        t += "@"), t;
    }, s.buildQuery = function(e, t, i) {
        var n, r, o, l, h = "";
        for (r in e) if (m.call(e, r) && r) if (a(e[r])) for (n = {}, o = 0, l = e[r].length; o < l; o++) void 0 !== e[r][o] && void 0 === n[e[r][o] + ""] && (h += "&" + s.buildQueryParameter(r, e[r][o], i), 
        !0 !== t && (n[e[r][o] + ""] = !0)); else void 0 !== e[r] && (h += "&" + s.buildQueryParameter(r, e[r], i));
        return h.substring(1);
    }, s.buildQueryParameter = function(e, t, i) {
        return s.encodeQuery(e, i) + (null !== t ? "=" + s.encodeQuery(t, i) : "");
    }, s.addQuery = function(e, t, i) {
        if ("object" == typeof t) for (var n in t) m.call(t, n) && s.addQuery(e, n, t[n]); else {
            if ("string" != typeof t) throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");
            if (void 0 === e[t]) return void (e[t] = i);
            "string" == typeof e[t] && (e[t] = [ e[t] ]), a(i) || (i = [ i ]), e[t] = e[t].concat(i);
        }
    }, s.removeQuery = function(e, t, i) {
        var n, r, o;
        if (a(t)) for (n = 0, r = t.length; n < r; n++) e[t[n]] = void 0; else if ("object" == typeof t) for (o in t) m.call(t, o) && s.removeQuery(e, o, t[o]); else {
            if ("string" != typeof t) throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");
            void 0 !== i ? e[t] === i ? e[t] = void 0 : a(e[t]) && (e[t] = l(e[t], i)) : e[t] = void 0;
        }
    }, s.hasQuery = function(e, t, i, n) {
        if ("object" == typeof t) {
            for (var r in t) if (m.call(t, r) && !s.hasQuery(e, r, t[r])) return !1;
            return !0;
        }
        if ("string" != typeof t) throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");
        switch (o(i)) {
          case "Undefined":
            return t in e;

          case "Boolean":
            return i === Boolean(a(e[t]) ? e[t].length : e[t]);

          case "Function":
            return !!i(e[t], t, e);

          case "Array":
            return !!a(e[t]) && (n ? h : c)(e[t], i);

          case "RegExp":
            return a(e[t]) ? !!n && h(e[t], i) : Boolean(e[t] && e[t].match(i));

          case "Number":
            i = String(i);

          case "String":
            return a(e[t]) ? !!n && h(e[t], i) : e[t] === i;

          default:
            throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
        }
    }, s.commonPath = function(e, t) {
        var i, n = Math.min(e.length, t.length);
        for (i = 0; i < n; i++) if (e.charAt(i) !== t.charAt(i)) {
            i--;
            break;
        }
        return i < 1 ? e.charAt(0) === t.charAt(0) && "/" === e.charAt(0) ? "/" : "" : ("/" === e.charAt(i) && "/" === t.charAt(i) || (i = e.substring(0, i).lastIndexOf("/")), 
        e.substring(0, i + 1));
    }, s.withinString = function(e, t, i) {
        i || (i = {});
        var n = i.start || s.findUri.start, r = i.end || s.findUri.end, o = i.trim || s.findUri.trim, a = /[a-z0-9-]=["']?$/i;
        for (n.lastIndex = 0; ;) {
            var l = n.exec(e);
            if (!l) break;
            var h = l.index;
            if (i.ignoreHtml) {
                var c = e.slice(Math.max(h - 3, 0), h);
                if (c && a.test(c)) continue;
            }
            var u = h + e.slice(h).search(r), p = e.slice(h, u).replace(o, "");
            if (!i.ignore || !i.ignore.test(p)) {
                var d = t(p, h, u = h + p.length, e);
                e = e.slice(0, h) + d + e.slice(u), n.lastIndex = h + d.length;
            }
        }
        return n.lastIndex = 0, e;
    }, s.ensureValidHostname = function(t) {
        if (t.match(s.invalid_hostname_characters)) {
            if (!e) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-] and Punycode.js is not available');
            if (e.toASCII(t).match(s.invalid_hostname_characters)) throw new TypeError('Hostname "' + t + '" contains characters other than [A-Z0-9.-]');
        }
    }, s.noConflict = function(e) {
        if (e) {
            var t = {
                "URI": this.noConflict()
            };
            return n.URITemplate && "function" == typeof n.URITemplate.noConflict && (t.URITemplate = n.URITemplate.noConflict()), 
            n.IPv6 && "function" == typeof n.IPv6.noConflict && (t.IPv6 = n.IPv6.noConflict()), 
            n.SecondLevelDomains && "function" == typeof n.SecondLevelDomains.noConflict && (t.SecondLevelDomains = n.SecondLevelDomains.noConflict()), 
            t;
        }
        return n.URI === this && (n.URI = d), this;
    }, f.build = function(e) {
        return !0 === e ? this._deferred_build = !0 : (void 0 === e || this._deferred_build) && (this._string = s.build(this._parts), 
        this._deferred_build = !1), this;
    }, f.clone = function() {
        return new s(this);
    }, f.valueOf = f.toString = function() {
        return this.build(!1)._string;
    }, y = {
        "protocol": "protocol",
        "username": "username",
        "password": "password",
        "hostname": "hostname",
        "port": "port"
    }, v = function(e) {
        return function(t, i) {
            return void 0 === t ? this._parts[e] || "" : (this._parts[e] = t || null, this.build(!i), 
            this);
        };
    };
    for (g in y) f[g] = v(y[g]);
    y = {
        "query": "?",
        "fragment": "#"
    }, v = function(e, t) {
        return function(i, n) {
            return void 0 === i ? this._parts[e] || "" : (null !== i && (i += "").charAt(0) === t && (i = i.substring(1)), 
            this._parts[e] = i, this.build(!n), this);
        };
    };
    for (g in y) f[g] = v(g, y[g]);
    y = {
        "search": [ "?", "query" ],
        "hash": [ "#", "fragment" ]
    }, v = function(e, t) {
        return function(i, n) {
            var s = this[e](i, n);
            return "string" == typeof s && s.length ? t + s : s;
        };
    };
    for (g in y) f[g] = v(y[g][1], y[g][0]);
    f.pathname = function(e, t) {
        if (void 0 === e || !0 === e) {
            var i = this._parts.path || (this._parts.hostname ? "/" : "");
            return e ? s.decodePath(i) : i;
        }
        return this._parts.path = e ? s.recodePath(e) : "/", this.build(!t), this;
    }, f.path = f.pathname, f.href = function(e, t) {
        var i;
        if (void 0 === e) return this.toString();
        this._string = "", this._parts = s._parts();
        var n = e instanceof s, r = "object" == typeof e && (e.hostname || e.path || e.pathname);
        if (e.nodeName && (e = e[s.getDomAttribute(e)] || "", r = !1), !n && r && void 0 !== e.pathname && (e = e.toString()), 
        "string" == typeof e) this._parts = s.parse(e, this._parts); else {
            if (!n && !r) throw new TypeError("invalid input");
            var o = n ? e._parts : e;
            for (i in o) m.call(this._parts, i) && (this._parts[i] = o[i]);
        }
        return this.build(!t), this;
    }, f.is = function(e) {
        var t = !1, n = !1, r = !1, o = !1, a = !1, l = !1, h = !1, c = !this._parts.urn;
        switch (this._parts.hostname && (c = !1, n = s.ip4_expression.test(this._parts.hostname), 
        r = s.ip6_expression.test(this._parts.hostname), a = (o = !(t = n || r)) && i && i.has(this._parts.hostname), 
        l = o && s.idn_expression.test(this._parts.hostname), h = o && s.punycode_expression.test(this._parts.hostname)), 
        e.toLowerCase()) {
          case "relative":
            return c;

          case "absolute":
            return !c;

          case "domain":
          case "name":
            return o;

          case "sld":
            return a;

          case "ip":
            return t;

          case "ip4":
          case "ipv4":
          case "inet4":
            return n;

          case "ip6":
          case "ipv6":
          case "inet6":
            return r;

          case "idn":
            return l;

          case "url":
            return !this._parts.urn;

          case "urn":
            return !!this._parts.urn;

          case "punycode":
            return h;
        }
        return null;
    };
    var L = f.protocol, w = f.port, b = f.hostname;
    f.protocol = function(e, t) {
        if (void 0 !== e && e && !(e = e.replace(/:(\/\/)?$/, "")).match(s.protocol_expression)) throw new TypeError('Protocol "' + e + "\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");
        return L.call(this, e, t);
    }, f.scheme = f.protocol, f.port = function(e, t) {
        if (this._parts.urn) return void 0 === e ? "" : this;
        if (void 0 !== e && (0 === e && (e = null), e && (":" === (e += "").charAt(0) && (e = e.substring(1)), 
        e.match(/[^0-9]/)))) throw new TypeError('Port "' + e + '" contains characters other than [0-9]');
        return w.call(this, e, t);
    }, f.hostname = function(e, t) {
        if (this._parts.urn) return void 0 === e ? "" : this;
        if (void 0 !== e) {
            var i = {};
            s.parseHost(e, i), e = i.hostname;
        }
        return b.call(this, e, t);
    }, f.host = function(e, t) {
        return this._parts.urn ? void 0 === e ? "" : this : void 0 === e ? this._parts.hostname ? s.buildHost(this._parts) : "" : (s.parseHost(e, this._parts), 
        this.build(!t), this);
    }, f.authority = function(e, t) {
        return this._parts.urn ? void 0 === e ? "" : this : void 0 === e ? this._parts.hostname ? s.buildAuthority(this._parts) : "" : (s.parseAuthority(e, this._parts), 
        this.build(!t), this);
    }, f.userinfo = function(e, t) {
        if (this._parts.urn) return void 0 === e ? "" : this;
        if (void 0 === e) {
            if (!this._parts.username) return "";
            var i = s.buildUserinfo(this._parts);
            return i.substring(0, i.length - 1);
        }
        return "@" !== e[e.length - 1] && (e += "@"), s.parseUserinfo(e, this._parts), this.build(!t), 
        this;
    }, f.resource = function(e, t) {
        var i;
        return void 0 === e ? this.path() + this.search() + this.hash() : (i = s.parse(e), 
        this._parts.path = i.path, this._parts.query = i.query, this._parts.fragment = i.fragment, 
        this.build(!t), this);
    }, f.subdomain = function(e, t) {
        if (this._parts.urn) return void 0 === e ? "" : this;
        if (void 0 === e) {
            if (!this._parts.hostname || this.is("IP")) return "";
            var i = this._parts.hostname.length - this.domain().length - 1;
            return this._parts.hostname.substring(0, i) || "";
        }
        var n = this._parts.hostname.length - this.domain().length, o = this._parts.hostname.substring(0, n), a = new RegExp("^" + r(o));
        return e && "." !== e.charAt(e.length - 1) && (e += "."), e && s.ensureValidHostname(e), 
        this._parts.hostname = this._parts.hostname.replace(a, e), this.build(!t), this;
    }, f.domain = function(e, t) {
        if (this._parts.urn) return void 0 === e ? "" : this;
        if ("boolean" == typeof e && (t = e, e = void 0), void 0 === e) {
            if (!this._parts.hostname || this.is("IP")) return "";
            var i = this._parts.hostname.match(/\./g);
            if (i && i.length < 2) return this._parts.hostname;
            var n = this._parts.hostname.length - this.tld(t).length - 1;
            return n = this._parts.hostname.lastIndexOf(".", n - 1) + 1, this._parts.hostname.substring(n) || "";
        }
        if (!e) throw new TypeError("cannot set domain empty");
        if (s.ensureValidHostname(e), !this._parts.hostname || this.is("IP")) this._parts.hostname = e; else {
            var o = new RegExp(r(this.domain()) + "$");
            this._parts.hostname = this._parts.hostname.replace(o, e);
        }
        return this.build(!t), this;
    }, f.tld = function(e, t) {
        if (this._parts.urn) return void 0 === e ? "" : this;
        if ("boolean" == typeof e && (t = e, e = void 0), void 0 === e) {
            if (!this._parts.hostname || this.is("IP")) return "";
            var n = this._parts.hostname.lastIndexOf("."), s = this._parts.hostname.substring(n + 1);
            return !0 !== t && i && i.list[s.toLowerCase()] ? i.get(this._parts.hostname) || s : s;
        }
        var o;
        if (!e) throw new TypeError("cannot set TLD empty");
        if (e.match(/[^a-zA-Z0-9-]/)) {
            if (!i || !i.is(e)) throw new TypeError('TLD "' + e + '" contains characters other than [A-Z0-9]');
            o = new RegExp(r(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(o, e);
        } else {
            if (!this._parts.hostname || this.is("IP")) throw new ReferenceError("cannot set TLD on non-domain host");
            o = new RegExp(r(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(o, e);
        }
        return this.build(!t), this;
    }, f.directory = function(e, t) {
        if (this._parts.urn) return void 0 === e ? "" : this;
        if (void 0 === e || !0 === e) {
            if (!this._parts.path && !this._parts.hostname) return "";
            if ("/" === this._parts.path) return "/";
            var i = this._parts.path.length - this.filename().length - 1, n = this._parts.path.substring(0, i) || (this._parts.hostname ? "/" : "");
            return e ? s.decodePath(n) : n;
        }
        var o = this._parts.path.length - this.filename().length, a = this._parts.path.substring(0, o), l = new RegExp("^" + r(a));
        return this.is("relative") || (e || (e = "/"), "/" !== e.charAt(0) && (e = "/" + e)), 
        e && "/" !== e.charAt(e.length - 1) && (e += "/"), e = s.recodePath(e), this._parts.path = this._parts.path.replace(l, e), 
        this.build(!t), this;
    }, f.filename = function(e, t) {
        if (this._parts.urn) return void 0 === e ? "" : this;
        if (void 0 === e || !0 === e) {
            if (!this._parts.path || "/" === this._parts.path) return "";
            var i = this._parts.path.lastIndexOf("/"), n = this._parts.path.substring(i + 1);
            return e ? s.decodePathSegment(n) : n;
        }
        var o = !1;
        "/" === e.charAt(0) && (e = e.substring(1)), e.match(/\.?\//) && (o = !0);
        var a = new RegExp(r(this.filename()) + "$");
        return e = s.recodePath(e), this._parts.path = this._parts.path.replace(a, e), o ? this.normalizePath(t) : this.build(!t), 
        this;
    }, f.suffix = function(e, t) {
        if (this._parts.urn) return void 0 === e ? "" : this;
        if (void 0 === e || !0 === e) {
            if (!this._parts.path || "/" === this._parts.path) return "";
            var i, n, o = this.filename(), a = o.lastIndexOf(".");
            return -1 === a ? "" : (i = o.substring(a + 1), n = /^[a-z0-9%]+$/i.test(i) ? i : "", 
            e ? s.decodePathSegment(n) : n);
        }
        "." === e.charAt(0) && (e = e.substring(1));
        var l, h = this.suffix();
        if (h) l = e ? new RegExp(r(h) + "$") : new RegExp(r("." + h) + "$"); else {
            if (!e) return this;
            this._parts.path += "." + s.recodePath(e);
        }
        return l && (e = s.recodePath(e), this._parts.path = this._parts.path.replace(l, e)), 
        this.build(!t), this;
    }, f.segment = function(e, t, i) {
        var n = this._parts.urn ? ":" : "/", s = this.path(), r = "/" === s.substring(0, 1), o = s.split(n);
        if (void 0 !== e && "number" != typeof e && (i = t, t = e, e = void 0), void 0 !== e && "number" != typeof e) throw new Error('Bad segment "' + e + '", must be 0-based integer');
        if (r && o.shift(), e < 0 && (e = Math.max(o.length + e, 0)), void 0 === t) return void 0 === e ? o : o[e];
        if (null === e || void 0 === o[e]) if (a(t)) {
            o = [];
            for (var l = 0, h = t.length; l < h; l++) (t[l].length || o.length && o[o.length - 1].length) && (o.length && !o[o.length - 1].length && o.pop(), 
            o.push(t[l]));
        } else (t || "string" == typeof t) && ("" === o[o.length - 1] ? o[o.length - 1] = t : o.push(t)); else t || "string" == typeof t && t.length ? o[e] = t : o.splice(e, 1);
        return r && o.unshift(""), this.path(o.join(n), i);
    }, f.segmentCoded = function(e, t, i) {
        var n, r, o;
        if ("number" != typeof e && (i = t, t = e, e = void 0), void 0 === t) {
            if (n = this.segment(e, t, i), a(n)) for (r = 0, o = n.length; r < o; r++) n[r] = s.decode(n[r]); else n = void 0 !== n ? s.decode(n) : void 0;
            return n;
        }
        if (a(t)) for (r = 0, o = t.length; r < o; r++) t[r] = s.decode(t[r]); else t = "string" == typeof t ? s.encode(t) : t;
        return this.segment(e, t, i);
    };
    var C = f.query;
    return f.query = function(e, t) {
        if (!0 === e) return s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        if ("function" == typeof e) {
            var i = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace), n = e.call(this, i);
            return this._parts.query = s.buildQuery(n || i, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
            this.build(!t), this;
        }
        return void 0 !== e && "string" != typeof e ? (this._parts.query = s.buildQuery(e, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
        this.build(!t), this) : C.call(this, e, t);
    }, f.setQuery = function(e, t, i) {
        var n = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        if ("object" == typeof e) for (var r in e) m.call(e, r) && (n[r] = e[r]); else {
            if ("string" != typeof e) throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");
            n[e] = void 0 !== t ? t : null;
        }
        return this._parts.query = s.buildQuery(n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
        "string" != typeof e && (i = t), this.build(!i), this;
    }, f.addQuery = function(e, t, i) {
        var n = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        return s.addQuery(n, e, void 0 === t ? null : t), this._parts.query = s.buildQuery(n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
        "string" != typeof e && (i = t), this.build(!i), this;
    }, f.removeQuery = function(e, t, i) {
        var n = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        return s.removeQuery(n, e, t), this._parts.query = s.buildQuery(n, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
        "string" != typeof e && (i = t), this.build(!i), this;
    }, f.hasQuery = function(e, t, i) {
        var n = s.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        return s.hasQuery(n, e, t, i);
    }, f.setSearch = f.setQuery, f.addSearch = f.addQuery, f.removeSearch = f.removeQuery, 
    f.hasSearch = f.hasQuery, f.normalize = function() {
        return this._parts.urn ? this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build() : this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build();
    }, f.normalizeProtocol = function(e) {
        return "string" == typeof this._parts.protocol && (this._parts.protocol = this._parts.protocol.toLowerCase(), 
        this.build(!e)), this;
    }, f.normalizeHostname = function(i) {
        return this._parts.hostname && (this.is("IDN") && e ? this._parts.hostname = e.toASCII(this._parts.hostname) : this.is("IPv6") && t && (this._parts.hostname = t.best(this._parts.hostname)), 
        this._parts.hostname = this._parts.hostname.toLowerCase(), this.build(!i)), this;
    }, f.normalizePort = function(e) {
        return "string" == typeof this._parts.protocol && this._parts.port === s.defaultPorts[this._parts.protocol] && (this._parts.port = null, 
        this.build(!e)), this;
    }, f.normalizePath = function(e) {
        if (this._parts.urn) return this;
        if (!this._parts.path || "/" === this._parts.path) return this;
        var t, i, n, r = this._parts.path, o = "";
        for ("/" !== r.charAt(0) && (t = !0, r = "/" + r), r = r.replace(/(\/(\.\/)+)|(\/\.$)/g, "/").replace(/\/{2,}/g, "/"), 
        t && (o = r.substring(1).match(/^(\.\.\/)+/) || "") && (o = o[0]); ;) {
            if (-1 === (i = r.indexOf("/.."))) break;
            0 !== i ? (-1 === (n = r.substring(0, i).lastIndexOf("/")) && (n = i), r = r.substring(0, n) + r.substring(i + 3)) : r = r.substring(3);
        }
        return t && this.is("relative") && (r = o + r.substring(1)), r = s.recodePath(r), 
        this._parts.path = r, this.build(!e), this;
    }, f.normalizePathname = f.normalizePath, f.normalizeQuery = function(e) {
        return "string" == typeof this._parts.query && (this._parts.query.length ? this.query(s.parseQuery(this._parts.query, this._parts.escapeQuerySpace)) : this._parts.query = null, 
        this.build(!e)), this;
    }, f.normalizeFragment = function(e) {
        return this._parts.fragment || (this._parts.fragment = null, this.build(!e)), this;
    }, f.normalizeSearch = f.normalizeQuery, f.normalizeHash = f.normalizeFragment, 
    f.iso8859 = function() {
        var e = s.encode, t = s.decode;
        return s.encode = escape, s.decode = decodeURIComponent, this.normalize(), s.encode = e, 
        s.decode = t, this;
    }, f.unicode = function() {
        var e = s.encode, t = s.decode;
        return s.encode = p, s.decode = unescape, this.normalize(), s.encode = e, s.decode = t, 
        this;
    }, f.readable = function() {
        var t = this.clone();
        t.username("").password("").normalize();
        var i = "";
        if (t._parts.protocol && (i += t._parts.protocol + "://"), t._parts.hostname && (t.is("punycode") && e ? (i += e.toUnicode(t._parts.hostname), 
        t._parts.port && (i += ":" + t._parts.port)) : i += t.host()), t._parts.hostname && t._parts.path && "/" !== t._parts.path.charAt(0) && (i += "/"), 
        i += t.path(!0), t._parts.query) {
            for (var n = "", r = 0, o = t._parts.query.split("&"), a = o.length; r < a; r++) {
                var l = (o[r] || "").split("=");
                n += "&" + s.decodeQuery(l[0], this._parts.escapeQuerySpace).replace(/&/g, "%26"), 
                void 0 !== l[1] && (n += "=" + s.decodeQuery(l[1], this._parts.escapeQuerySpace).replace(/&/g, "%26"));
            }
            i += "?" + n.substring(1);
        }
        return i += s.decodeQuery(t.hash(), !0);
    }, f.absoluteTo = function(e) {
        var t, i, n, r = this.clone(), o = [ "protocol", "username", "password", "hostname", "port" ];
        if (this._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components");
        if (e instanceof s || (e = new s(e)), r._parts.protocol || (r._parts.protocol = e._parts.protocol), 
        this._parts.hostname) return r;
        for (i = 0; n = o[i]; i++) r._parts[n] = e._parts[n];
        return r._parts.path ? ".." === r._parts.path.substring(-2) && (r._parts.path += "/") : (r._parts.path = e._parts.path, 
        r._parts.query || (r._parts.query = e._parts.query)), "/" !== r.path().charAt(0) && (t = e.directory(), 
        r._parts.path = (t ? t + "/" : "") + r._parts.path, r.normalizePath()), r.build(), 
        r;
    }, f.relativeTo = function(e) {
        var t, i, n, r, o, a = this.clone().normalize();
        if (a._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components");
        if (e = new s(e).normalize(), t = a._parts, i = e._parts, r = a.path(), o = e.path(), 
        "/" !== r.charAt(0)) throw new Error("URI is already relative");
        if ("/" !== o.charAt(0)) throw new Error("Cannot calculate a URI relative to another relative URI");
        if (t.protocol === i.protocol && (t.protocol = null), t.username !== i.username || t.password !== i.password) return a.build();
        if (null !== t.protocol || null !== t.username || null !== t.password) return a.build();
        if (t.hostname !== i.hostname || t.port !== i.port) return a.build();
        if (t.hostname = null, t.port = null, r === o) return t.path = "", a.build();
        if (!(n = s.commonPath(a.path(), e.path()))) return a.build();
        var l = i.path.substring(n.length).replace(/[^\/]*$/, "").replace(/.*?\//g, "../");
        return t.path = l + t.path.substring(n.length), a.build();
    }, f.equals = function(e) {
        var t, i, n, r = this.clone(), o = new s(e), l = {}, h = {}, u = {};
        if (r.normalize(), o.normalize(), r.toString() === o.toString()) return !0;
        if (t = r.query(), i = o.query(), r.query(""), o.query(""), r.toString() !== o.toString()) return !1;
        if (t.length !== i.length) return !1;
        l = s.parseQuery(t, this._parts.escapeQuerySpace), h = s.parseQuery(i, this._parts.escapeQuerySpace);
        for (n in l) if (m.call(l, n)) {
            if (a(l[n])) {
                if (!c(l[n], h[n])) return !1;
            } else if (l[n] !== h[n]) return !1;
            u[n] = !0;
        }
        for (n in h) if (m.call(h, n) && !u[n]) return !1;
        return !0;
    }, f.duplicateQueryParameters = function(e) {
        return this._parts.duplicateQueryParameters = !!e, this;
    }, f.escapeQuerySpace = function(e) {
        return this._parts.escapeQuerySpace = !!e, this;
    }, s;
}), rivets.adapters[":"] = {
    "subscribe": function(e, t, i) {
        e.on("change:" + t, i);
    },
    "unsubscribe": function(e, t, i) {
        e.off("change:" + t, i);
    },
    "read": function(e, t) {
        return e.get(t);
    },
    "publish": function(e, t, i) {
        "" === i && (i = null), e.set(t, i);
    }
}, Neatline = new Marionette.Application(), Neatline.module("Shared", function(e) {
    e.Controller = Marionette.Controller.extend({
        "slug": "",
        "events": [],
        "commands": [],
        "requests": [],
        "initialize": function() {
            this._initEvents(), this._initCommands(), this._initRequests(), this.init.apply(this, arguments);
        },
        "init": function() {},
        "_bind": function(e, t) {
            _.each(e, function(e) {
                _.isString(e) ? t(e, e) : _.isObject(e) && _.each(e, function(e, i) {
                    t(i, e);
                });
            });
        },
        "_initEvents": function() {
            this._bind(this.events, _.bind(function(e, t) {
                Neatline.vent.on(e, _.bind(this[t], this));
            }, this));
        },
        "_initCommands": function() {
            this._bind(this.commands, _.bind(function(e, t) {
                Neatline.commands.setHandler(this.slug + ":" + e, _.bind(this[t], this));
            }, this));
        },
        "_initRequests": function() {
            this._bind(this.requests, _.bind(function(e, t) {
                Neatline.reqres.setHandler(this.slug + ":" + e, _.bind(this[t], this));
            }, this));
        }
    });
}), Neatline.module("Shared", function(e) {
    e.Router = Backbone.Router.extend({
        "before": function() {
            Neatline.vent.trigger("ROUTER:before");
        }
    });
}), Neatline.module("Shared", function(e) {
    e.View = Backbone.View.extend({
        "initialize": function(e) {
            this._initTemplate(), this._initSelections(), this.init(e);
        },
        "init": function(e) {},
        "_initTemplate": function() {
            this.template && this.$el.append(_.template($(this.template).html()));
        },
        "_initSelections": function() {
            this.__ui = _.extend({}, this.ui), _.bind(function e(t) {
                _.each(t, _.bind(function(i, n) {
                    _.isString(i) ? t[n] = this.$el.find(i) : _.isObject(i) && _.bind(e, this)(i);
                }, this));
            }, this)(this.__ui);
        },
        "showIn": function(e) {
            this.$el.appendTo(e);
        }
    });
}), Neatline.module("Shared.Exhibit", function(e) {
    e.Model = Backbone.Model.extend({
        "url": function() {
            return Neatline.g.neatline.exhibit_api;
        },
        "defaults": function() {
            return Neatline.g.neatline.exhibit;
        }
    });
}), Neatline.module("Shared.Record", function(e) {
    e.Model = Backbone.Model.extend({
        "mutators": {
            "title": {
                "get": function() {
                    return this.attributes.title || this.attributes.item_title;
                }
            },
            "item": {
                "get": function() {
                    return _.isUndefined(this.attributes.item) && this.loadItem(), this.attributes.item;
                }
            }
        },
        "initialize": function() {
            new Backbone.Schema(this).define({
                "item_id": {
                    "type": "number"
                },
                "fill_opacity": {
                    "type": "number"
                },
                "fill_opacity_select": {
                    "type": "number"
                },
                "stroke_opacity": {
                    "type": "number"
                },
                "stroke_opacity_select": {
                    "type": "number"
                },
                "point_radius": {
                    "type": "number"
                },
                "stroke_width": {
                    "type": "number"
                },
                "zindex": {
                    "type": "number"
                },
                "weight": {
                    "type": "number"
                },
                "min_zoom": {
                    "type": "number"
                },
                "max_zoom": {
                    "type": "number"
                },
                "map_zoom": {
                    "type": "number"
                }
            });
        },
        "toJSON": function() {
            return _.omit(_.clone(this.attributes), "item");
        },
        "url": function() {
            var e = Neatline.g.neatline.record_api;
            return this.isNew() || (e += "/" + this.id), e;
        },
        "defaults": function() {
            return _.extend(Neatline.g.neatline.styles, {
                "exhibit_id": Neatline.g.neatline.exhibit.id
            });
        },
        "loadItem": function(e) {
            if (this.has("item_id")) {
                var t = Neatline.g.neatline.item_body_api + "/" + this.get("item_id"), i = {
                    "record": this.id
                };
                $.get(t, i, _.bind(function(t) {
                    this.set("item", t), e && e(t);
                }, this));
            }
        },
        "resetItem": function() {
            this.attributes.item = void 0, this.trigger("change:item");
        },
        "hasTag": function(e) {
            return _.contains(this.splitTags(), e);
        },
        "splitTags": function() {
            var e = this.get("tags");
            return e ? _.map(e.split(","), function(e) {
                return _.string.trim(e);
            }) : [];
        },
        "getStyleMap": function() {
            var e = this.get("fill_color"), t = this.get("fill_color_select"), i = this.get("stroke_color"), n = this.get("stroke_color_select"), s = this.get("fill_opacity"), r = this.get("fill_opacity_select"), o = this.get("stroke_opacity"), a = this.get("stroke_opacity_select"), l = this.get("point_image"), h = this.get("stroke_width"), c = this.get("point_radius");
            return s = parseFloat(s), r = parseFloat(r), o = parseFloat(o), a = parseFloat(a), 
            h = Number(h), c = Number(c), new OpenLayers.StyleMap({
                "default": new OpenLayers.Style({
                    "fillColor": e,
                    "strokeColor": i,
                    "fillOpacity": s,
                    "graphicOpacity": s,
                    "strokeOpacity": o,
                    "strokeWidth": h,
                    "pointRadius": c,
                    "externalGraphic": l
                }),
                "select": new OpenLayers.Style({
                    "fillColor": t,
                    "strokeColor": n,
                    "fillOpacity": r,
                    "graphicOpacity": r,
                    "strokeOpacity": a,
                    "strokeWidth": h,
                    "pointRadius": c,
                    "externalGraphic": l
                }),
                "temporary": new OpenLayers.Style({
                    "fillColor": t,
                    "strokeColor": n,
                    "fillOpacity": (1 + r) / 2,
                    "graphicOpacity": (1 + r) / 2,
                    "strokeOpacity": a,
                    "strokeWidth": h,
                    "pointRadius": c,
                    "externalGraphic": l
                })
            });
        }
    });
}), Neatline.module("Shared.Record", function(e) {
    e.Collection = Backbone.Collection.extend({
        "model": Neatline.Shared.Record.Model,
        "url": function() {
            return Neatline.g.neatline.record_api;
        },
        "parse": function(e) {
            return this.metadata = {
                "start": Number(e.start),
                "numFound": Number(e.numFound),
                "removed": e.removed
            }, _.each(e.removed, _.bind(function(e) {
                this.remove(e);
            }, this)), e.records;
        },
        "update": function(e, t) {
            (e = e || {}).exhibit_id = Neatline.g.neatline.exhibit.id, this.fetch({
                "data": $.param(e),
                "success": t
            });
        },
        "getOrFetch": function(e, t) {
            var i = this.get(e);
            i ? t(i) : (i = new this.model({
                "id": e
            })).fetch({
                "success": function() {
                    t(i);
                }
            });
        }
    });
}), Neatline.module("Shared.Widget", function(e) {
    e.View = Neatline.Shared.View.extend({
        "className": "widget",
        "constructor": function(t) {
            t = t || {};
            var i = $("#" + this.id);
            i.length && (t.el = i), e.View.__super__.constructor.call(this, t);
        },
        "initialize": function(t) {
            t = t || {}, $.contains(document, this.el) || this.$el.appendTo($("#neatline-map")), 
            e.View.__super__.initialize.call(this, t);
        }
    });
}), Neatline.module("Events", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "EVENTS",
        "events": [ "highlight", "unhighlight", "select", "unselect" ],
        "commands": [ "unhighlightCurrent", "unselectCurrent" ],
        "init": function() {
            this.highlighted = null, this.selected = null;
        },
        "highlight": function(e) {
            this.unhighlightCurrent(), this.highlighted = e.model;
        },
        "unhighlight": function(e) {
            this.highlighted = null;
        },
        "select": function(e) {
            this.setRoute(e.model), this.unselectCurrent(), this.selected = e.model;
        },
        "unselect": function(e) {
            this.selected = null;
        },
        "setRoute": function(e) {
            Neatline.Editor || Backbone.history.navigate("records/" + e.id, {
                "replace": !0
            });
        },
        "unhighlightCurrent": function() {
            _.isNull(this.highlighted) || Neatline.vent.trigger("unhighlight", {
                "model": this.highlighted,
                "source": this.slug
            });
        },
        "unselectCurrent": function() {
            _.isNull(this.selected) || Neatline.vent.trigger("unselect", {
                "model": this.selected,
                "source": this.slug
            });
        }
    });
}), Neatline.module("Events", {
    "startWithParent": !1,
    "define": function(e) {
        Neatline.on("initialize:after", function() {
            e.start(), Backbone.history.start();
        }), e.addInitializer(function() {
            e.__controller = new e.Controller(), e.__router = new e.Router();
        });
    }
}), Neatline.module("Events", function(e) {
    e.Router = Neatline.Shared.Router.extend({
        "slug": "EVENTS",
        "routes": {
            "records/:id": "records/:id"
        },
        "initialize": function() {
            this.records = new Neatline.Shared.Record.Collection();
        },
        "records/:id": function(e) {
            this.records.getOrFetch(e, _.bind(function(e) {
                Neatline.vent.trigger("select", {
                    "model": e,
                    "source": this.slug
                });
            }, this));
        }
    });
}), Neatline.module("Records", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "RECORDS",
        "init": function() {
            _.bindAll(this, "ready"), this.records = new Neatline.Shared.Record.Collection(), 
            Neatline.g.neatline.exhibit.spatial_querying ? this.ready() : this.records.update({}, this.ready);
        },
        "ready": function() {
            Neatline.vent.trigger(this.slug + ":ready");
        }
    });
}), Neatline.module("Records", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.Google", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "Google" ],
        "Google": function(e) {
            switch (e.properties.provider) {
              case "physical":
                return new OpenLayers.Layer.Google(e.title, {
                    "type": google.maps.MapTypeId.TERRAIN,
                    "useTiltImages": !1
                });

              case "streets":
                return new OpenLayers.Layer.Google(e.title, {
                    "type": google.maps.MapTypeId.ROADMAP,
                    "numZoomLevels": 19,
                    "useTiltImages": !1
                });

              case "satellite":
                return new OpenLayers.Layer.Google(e.title, {
                    "type": google.maps.MapTypeId.SATELLITE,
                    "numZoomLevels": 19,
                    "useTiltImages": !1
                });

              case "hybrid":
                return new OpenLayers.Layer.Google(e.title, {
                    "type": google.maps.MapTypeId.HYBRID,
                    "numZoomLevels": 19,
                    "useTiltImages": !1
                });
            }
        }
    });
}), Neatline.module("Map.Layers.Google", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.OpenStreetMap", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "OpenStreetMap" ],
        "OpenStreetMap": function(e) {
            return new OpenLayers.Layer.OSM(e.title);
        }
    });
}), Neatline.module("Map.Layers.OpenStreetMap", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.Stamen", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "Stamen" ],
        "Stamen": function(e) {
            var t = new OpenLayers.Layer.Stamen(e.properties.provider);
            return t.name = e.title, t;
        }
    });
}), Neatline.module("Map.Layers.Stamen", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.WMS", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "WMS" ],
        "WMS": function(e) {
            return new OpenLayers.Layer.WMS(e.title, e.properties.address, {
                "layers": e.properties.layers
            });
        }
    });
}), Neatline.module("Map.Layers.WMS", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers.XYZ", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "XYZ" ],
        "XYZ": function(e) {
            e.properties.id;
            return new OpenLayers.Layer.XYZ(e.title, e.properties.urls, {
                "sphericalMercator": !0,
                "wrapDateLine": !0
            });
        }
    });
}), Neatline.module("Map.Layers.XYZ", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map.Layers", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP:LAYERS",
        "requests": [ "getLayer" ],
        "getLayer": function(e) {
            return Neatline.request("MAP:LAYERS:" + e.type, e);
        }
    });
}), Neatline.module("Map.Layers", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "MAP",
        "events": [ "highlight", "unhighlight", "select", "unselect", "setFilter", "removeFilter", "refresh" ],
        "commands": [ "load", "updateSize", "showHighlight", "hideHighlight" ],
        "requests": [ "getMap", "getRecords", "getVectorLayer", "getVectorLayers", "getWmsLayers", "getCenter", "getZoom", "getMinZoom", "getExtent" ],
        "init": function() {
            this.view = new Neatline.Map.View({
                "slug": this.slug
            });
        },
        "highlight": function(e) {
            this.view.highlight(e.model);
        },
        "unhighlight": function(e) {
            this.view.unhighlight(e.model);
        },
        "select": function(e) {
            e.source !== this.slug && (this.view.focusByModel(e.model), this.view.select(e.model));
        },
        "unselect": function(e) {
            this.view.unselect(e.model);
        },
        "setFilter": function(e) {
            this.view.setFilter(e.key, e.evaluator);
        },
        "removeFilter": function(e) {
            this.view.removeFilter(e.key);
        },
        "refresh": function() {
            this.view.removeAllLayers(), this.view.publishPosition();
        },
        "load": function(e) {
            this.view.loadRecords(e);
        },
        "updateSize": function() {
            this.view.map.updateSize();
        },
        "showHighlight": function(e) {
            this.view.renderVectorHighlightIntent(e);
        },
        "hideHighlight": function(e) {
            this.view.renderVectorDefaultIntent(e);
        },
        "getMap": function() {
            return this.view.map;
        },
        "getRecords": function() {
            return this.view.records;
        },
        "getVectorLayer": function(e) {
            return this.view.getOrCreateVectorLayer(e);
        },
        "getVectorLayers": function() {
            return this.view.getVectorLayers();
        },
        "getWmsLayers": function() {
            return this.view.getWmsLayers();
        },
        "getCenter": function() {
            return this.view.map.getCenter();
        },
        "getZoom": function() {
            return this.view.map.getZoom();
        },
        "getMinZoom": function() {
            var e = this.view.map.baseLayer;
            if (e) {
                if (e.minZoomLevel) return e.minZoomLevel;
                if (e.zoomOffset) return e.zoomOffset;
            }
            return 0;
        },
        "getExtent": function() {
            return this.view.map.getExtent().toString();
        }
    });
}), Neatline.module("Map", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Map", function(e) {
    e.View = Backbone.View.extend({
        "el": "#neatline-map",
        "tags": null,
        "options": {
            "defaultZoom": 6
        },
        "initialize": function(e) {
            this.slug = e.slug, this._initGlobals(), this._initOpenLayers(), this._initControls(), 
            this._initEvents(), this._initBaseLayers(), this._initViewport(), this.publishPosition();
        },
        "_initGlobals": function() {
            this.records = new Neatline.Shared.Record.Collection(), this.exhibit = Neatline.g.neatline.exhibit, 
            this.wmsMime = Neatline.g.neatline.wms_mime, this.formatWkt = new OpenLayers.Format.WKT(), 
            this.layers = {
                "vector": {},
                "wms": {}
            }, this.selected = {
                "vector": {},
                "wms": {}
            }, this.filters = {}, this.selectedModel = null, this.loading = !1;
        },
        "_initOpenLayers": function() {
            OpenLayers.ImgPath = Neatline.g.neatline.openlayers_theme, this.map = new OpenLayers.Map(this.el, {
                "projection": "EPSG:900913",
                "theme": null,
                "zoomMethod": null,
                "fallThrough": !0,
                "panMethod": null,
                "restrictedExtent": _.isString(this.exhibit.map_restricted_extent) ? new OpenLayers.Bounds.fromString(this.exhibit.map_restricted_extent) : null,
                "controls": [ new OpenLayers.Control.PanZoom(), new OpenLayers.Control.Navigation({
                    "dragPanOptions": {
                        "enableKinetic": !1
                    },
                    "documentDrag": !0
                }) ]
            });
        },
        "_initControls": function() {
            _.bindAll(this, [ "onBeforeHighlight", "onHighlight", "onUnhighlight", "onSelect", "onUnselect" ]), 
            this.highlightControl = new OpenLayers.Control.SelectFeature(this.getVectorLayers(), {
                "hover": !0,
                "renderIntent": "temporary",
                "highlightOnly": !0,
                "eventListeners": {
                    "beforefeaturehighlighted": this.onBeforeHighlight,
                    "featurehighlighted": this.onHighlight,
                    "featureunhighlighted": this.onUnhighlight
                }
            }), this.selectControl = new OpenLayers.Control.SelectFeature(this.getVectorLayers(), {
                "onSelect": this.onSelect,
                "onUnselect": this.onUnselect
            }), this.highlightControl.handlers.feature.stopDown = !1, this.selectControl.handlers.feature.stopDown = !1, 
            this.map.addControls([ this.highlightControl, this.selectControl ]), this.highlightControl.activate(), 
            this.selectControl.activate();
        },
        "_initEvents": function() {
            this.map.events.register("movestart", this.map, _.bind(function(e) {
                Neatline.vent.trigger("MAP:moveStart", e);
            }, this)), this.map.events.register("moveend", this.map, _.bind(function(e) {
                this.exhibit.spatial_querying && this.publishPosition(), Neatline.vent.trigger("MAP:moveEnd", e);
            }, this));
        },
        "_initBaseLayers": function() {
            var e = _.isString(this.exhibit.image_layer), t = _.isString(this.exhibit.wms_address);
            e ? this._initImageLayer() : t && this._initWmsLayer(), this._initSpatialLayers();
        },
        "_initImageLayer": function() {
            var e = this.exhibit.image_height, t = this.exhibit.image_width;
            if (e && t) this._addImageLayer(t, e); else {
                var i = new Image(), n = this;
                i.onload = function() {
                    e = this.height, t = this.width, n._addImageLayer(t, e);
                }, i.src = this.exhibit.image_layer;
            }
        },
        "_addImageLayer": function(e, t) {
            var i = new OpenLayers.Layer.Image(this.exhibit.title, this.exhibit.image_layer, new OpenLayers.Bounds(0, 0, e, t), new OpenLayers.Size(e / 5, t / 5), {
                "maxExtent": new OpenLayers.Bounds(2 * -e, 2 * -t, 2 * e, 2 * t),
                "numZoomLevels": this.exhibit.zoom_levels,
                "minResolution": .5
            });
            this.map.addLayer(i);
        },
        "_initWmsLayer": function() {
            var e, t, i, n = this.exhibit.wms_address.split("/").pop(), s = this.exhibit.wms_layers || n, r = new OpenLayers.Layer.WMS(this.exhibit.title, this.exhibit.wms_address, {
                "layers": s,
                "transparent": "false",
                "format": "image/png"
            }, {
                "isBaseLayer": !1,
                "visibility": !0
            });
            this.map.addLayer(r), e = this.getZoomLimits(), t = _.isNumber(e.minZ) ? e.minZ : 0, 
            i = _.isNumber(e.maxZ) ? e.maxZ : r.numZoomLevels - 1, r.numZoomLevels = Math.abs(i - t + 1), 
            r.resolutions = r.resolutions.splice(t, i + 1);
        },
        "_initSpatialLayers": function() {
            var e, t, i, n = {};
            _.each(Neatline.g.neatline.spatial_layers, function(e) {
                var t = Neatline.request("MAP:LAYERS:getLayer", e);
                _.isObject(t) && (n[e.id] = t);
            }), _.each(_.values(n), _.bind(function(e) {
                this.map.addLayer(e), this.map.setLayerIndex(e, 0);
            }, this)), null === (e = this.getZoomLimits()).minZ && null === e.maxZ || (this.map.numZoomLevels = null), 
            _.each(n, function(s, r) {
                switch (t = _.isNumber(e.minZ) ? e.minZ : n[r].MIN_ZOOM_LEVEL || 0, i = _.isNumber(e.maxZ) ? e.maxZ : n[r].MAX_ZOOM_LEVEL || s.numZoomLevels - 1, 
                n[r].numZoomLevels = Math.abs(i - t + 1), n[r].resolutions = n[r].resolutions.splice(t, Math.abs(i - t + 1)), 
                r) {
                  case "GooglePhysical":
                  case "GoogleSatellite":
                  case "GoogleStreets":
                  case "GoogleHybrid":
                    n[r].minZoomLevel = t;
                    break;

                  case "OpenStreetMap":
                  case "StamenToner":
                  case "StamenTerrain":
                  case "StamenWatercolor":
                    n[r].zoomOffset = t;
                }
            }.bind(this)), this.map.setBaseLayer(n[this.exhibit.spatial_layer]), this.map.addControl(new OpenLayers.Control.LayerSwitcher());
        },
        "getZoomLimits": function() {
            return {
                "minZ": _.isNumber(this.exhibit.map_min_zoom) ? this.exhibit.map_min_zoom : null,
                "maxZ": _.isNumber(this.exhibit.map_max_zoom) ? this.exhibit.map_max_zoom : null
            };
        },
        "_initViewport": function() {
            var e = Neatline.g.neatline.exhibit.map_focus, t = Neatline.g.neatline.exhibit.map_zoom;
            t = _.isNumber(t) ? t : this.options.defaultZoom;
            var i = this.getZoomLimits();
            _.isNumber(i.maxZ) && t > i.maxZ && (t = i.maxZoom), _.isNumber(i.minZ) && (t = Math.max(0, t - i.minZ)), 
            _.isString(e) ? this.setFocus(e) : _.isString(this.exhibit.map_restricted_extent) ? this.map.zoomToExtent(this.exhibit.map_restricted_extent) : this.geolocate(), 
            this.map.zoomTo(t);
        },
        "updatePublicControls": function() {
            var e = this.getVectorLayers();
            this.highlightControl.setLayer(e), this.selectControl.setLayer(e), _.isNull(this.selectedModel) || this.select(this.selectedModel);
        },
        "focusByModel": function(e) {
            var t = this.getOrCreateVectorLayer(e), i = e.get("coverage") && !e.get("is_wms"), n = e.get("map_focus"), s = e.get("map_zoom");
            if (_.isNumber(s)) this.setZoom(s); else if (i) {
                s = this.map.getZoomForExtent(t.getDataExtent());
                this.setZoom(s);
            }
            if (_.isString(n)) this.setFocus(n); else if (i) {
                var r = t.getDataExtent().getCenterLonLat();
                this.setFocus(r);
            }
            Neatline.vent.trigger("MAP:focused");
        },
        "setFocus": function(e) {
            _.isString(e) && (e = e.split(",")), this.map.setCenter(e);
        },
        "setZoom": function(e) {
            this.map.zoomTo(e);
        },
        "geolocate": function() {
            var e = new OpenLayers.Control.Geolocate({
                "bind": !0,
                "watch": !1,
                "failure": function() {
                    this.map.setCenter([ 0, 0 ], this.map.getZoom(), !1, !0);
                }.bind(this)
            });
            this.map.addControl(e), e.activate();
        },
        "publishPosition": function() {
            var e = {};
            this.exhibit.spatial_querying && null !== this.map.getExtent() && _.extend(e, {
                "extent": this.getExtentAsWKT(),
                "zoom": this.getMinZoom() + this.getZoom()
            }), this.loadRecords(e), this.loading = !0;
        },
        "loadRecords": function(e) {
            null === e.tags ? this.tags = null : void 0 === e.tags && null != this.tags ? e.tags = this.tags : this.tags = e.tags, 
            this.records.update(e, _.bind(function(e) {
                this.ingestRecords(e);
            }, this));
        },
        "ingestRecords": function(e) {
            this.map.dragging || (this.ingestVectorLayers(e), this.ingestWmsLayers(e), Neatline.vent.trigger("MAP:ingest", e), 
            this.updatePublicControls(), this.loading = !1);
        },
        "ingestVectorLayers": function(e) {
            var t = this.getVectorLayerIds(), i = _.pluck(e.models, "id");
            _.each(_.difference(i, t), _.bind(function(t) {
                e.get(t).get("coverage") && this.buildVectorLayer(e.get(t));
            }, this)), _.each(_.difference(t, i), _.bind(function(e) {
                var t = this.layers.vector[e];
                _.isObject(t) && !t.neatline.frozen && this.removeVectorLayer(t);
            }, this));
        },
        "ingestWmsLayers": function(e) {
            var t = this.getWmsLayerIds(), i = _.pluck(e.models, "id");
            _.each(_.difference(i, t), _.bind(function(t) {
                var i = e.get(t);
                i.get("wms_address") && this.buildWmsLayer(i);
            }, this)), _.each(_.difference(t, i), _.bind(function(e) {
                var t = this.layers.wms[e];
                _.isObject(t) && this.removeWmsLayer(t);
            }, this));
        },
        "buildVectorLayer": function(e) {
            var t = new OpenLayers.Layer.Vector(e.get("title"), {
                "displayInLayerSwitcher": !1,
                "styleMap": e.getStyleMap(),
                "neatline": {
                    "model": e,
                    "frozen": !1
                }
            });
            if (e.get("coverage")) {
                var i = this.formatWkt.read(e.get("coverage"));
                t.addFeatures(i);
            }
            return this.filterLayer(t), this.layers.vector[e.id] = t, this.map.addLayer(t), 
            _.isNumber(e.get("zindex")) && this.setZIndex(t, e.get("zindex")), t;
        },
        "buildWmsLayer": function(e) {
            var t = e.get("wms_address").split("/").pop(), i = e.get("wms_layers") || t, n = new OpenLayers.Layer.WMS(e.get("title"), e.get("wms_address"), {
                "layers": i,
                "transparent": !0,
                "format": this.wmsMime,
                "tiled": !0
            }, {
                "displayOutsideMaxExtent": !0,
                "opacity": Number(e.get("fill_opacity")),
                "transitionEffect": "map-resize",
                "isBaseLayer": !1,
                "neatline": {
                    "model": e
                }
            });
            return this.filterLayer(n), this.layers.wms[e.id] = n, this.map.addLayer(n), _.isNumber(e.get("zindex")) && this.setZIndex(n, e.get("zindex")), 
            n;
        },
        "setZIndex": function(e, t) {
            this.map.setLayerIndex(e, t);
        },
        "getOrCreateVectorLayer": function(e) {
            var t = this.layers.vector[e.id];
            return t || (t = this.buildVectorLayer(e)), t;
        },
        "removeVectorLayer": function(e) {
            this.map.removeLayer(e), delete this.layers.vector[e.neatline.model.id], OpenLayers.Util.removeItem(this.highlightControl.layers, e), 
            OpenLayers.Util.removeItem(this.selectControl.layers, e), e.destroy();
        },
        "removeWmsLayer": function(e) {
            this.map.removeLayer(e), delete this.layers.wms[e.neatline.model.id], e.destroy();
        },
        "removeAllLayers": function() {
            _.each(this.getVectorLayers(), _.bind(function(e) {
                e.neatline.frozen || this.removeVectorLayer(e);
            }, this)), _.each(this.getWmsLayers(), _.bind(function(e) {
                this.removeWmsLayer(e);
            }, this));
        },
        "setFilter": function(e, t) {
            this.filters[e] = t, this.filterAllLayers();
        },
        "removeFilter": function(e) {
            delete this.filters[e], this.filterAllLayers();
        },
        "filterLayer": function(e) {
            var t = !0;
            _.each(this.filters, _.bind(function(i, n) {
                t = t && i(e.neatline.model);
            }, this)), e.setVisibility(t);
        },
        "filterAllLayers": function() {
            _.each(this.layers, _.bind(function(e, t) {
                _.each(e, _.bind(function(e, t) {
                    this.filterLayer(e);
                }, this));
            }, this));
        },
        "highlight": function(e) {
            if (!this.modelIsSelected(e)) {
                var t = this.layers.vector[e.id];
                t && (this.stopPropagation = !0, _.each(t.features, _.bind(function(e) {
                    this.highlightControl.highlight(e);
                }, this)), this.stopPropagation = !1), (t = this.layers.wms[e.id]) && t.setOpacity(e.get("fill_opacity_select"));
            }
        },
        "renderVectorHighlightIntent": function(e) {
            var t = this.layers.vector[e.id];
            t && _.each(t.features, _.bind(function(e) {
                t.drawFeature(e, "temporary");
            }, this));
        },
        "unhighlight": function(e) {
            if (!this.modelIsSelected(e)) {
                var t = this.layers.vector[e.id];
                t && (this.stopPropagation = !0, _.each(t.features, _.bind(function(e) {
                    this.highlightControl.unhighlight(e);
                }, this)), this.stopPropagation = !1), (t = this.layers.wms[e.id]) && t.setOpacity(e.get("fill_opacity"));
            }
        },
        "renderVectorDefaultIntent": function(e) {
            var t = this.layers.vector[e.id];
            t && _.each(t.features, _.bind(function(e) {
                t.drawFeature(e, "default");
            }, this));
        },
        "select": function(e) {
            var t = this.layers.vector[e.id];
            t && (this.stopPropagation = !0, _.each(t.features, _.bind(function(e) {
                this.selectControl.select(e);
            }, this)), this.stopPropagation = !1), (t = this.layers.wms[e.id]) && t.setOpacity(e.get("fill_opacity_select")), 
            this.selectedModel = e;
        },
        "unselect": function(e) {
            var t = this.layers.vector[e.id];
            t && (this.stopPropagation = !0, _.each(t.features, _.bind(function(e) {
                this.selectControl.unselect(e);
            }, this)), this.stopPropagation = !1), (t = this.layers.wms[e.id]) && t.setOpacity(e.get("fill_opacity")), 
            this.selectedModel = null;
        },
        "onBeforeHighlight": function(e) {
            return !this.map.dragging && !this.loading;
        },
        "onHighlight": function(e) {
            this.stopPropagation || (this.highlight(e.feature.layer.neatline.model), Neatline.vent.trigger("highlight", {
                "model": e.feature.layer.neatline.model,
                "source": this.slug
            }));
        },
        "onUnhighlight": function(e) {
            this.stopPropagation || (this.unhighlight(e.feature.layer.neatline.model), Neatline.vent.trigger("unhighlight", {
                "model": e.feature.layer.neatline.model,
                "source": this.slug
            }));
        },
        "onSelect": function(e) {
            this.stopPropagation || (this.select(e.layer.neatline.model), Neatline.vent.trigger("select", {
                "model": e.layer.neatline.model,
                "source": this.slug
            }));
        },
        "onUnselect": function(e) {
            this.stopPropagation || (this.unselect(e.layer.neatline.model), Neatline.vent.trigger("unselect", {
                "model": e.layer.neatline.model,
                "source": this.slug
            }));
        },
        "modelIsSelected": function(e) {
            return this.selectedModel && this.selectedModel.id == e.id;
        },
        "getZoom": function(e) {
            return this.map.getZoom();
        },
        "getMinZoom": function() {
            var e = this.getZoomLimits();
            return _.isNumber(e.minZ) ? e.minZ : 0;
        },
        "getExtentAsWKT": function() {
            var e = this.map.getExtent().toGeometry(), t = new OpenLayers.Feature.Vector(e);
            return this.formatWkt.write(t);
        },
        "getVectorLayers": function() {
            return _.values(this.layers.vector);
        },
        "getVectorLayerIds": function() {
            return _.map(_.keys(this.layers.vector), Number);
        },
        "getWmsLayers": function() {
            return _.values(this.layers.wms);
        },
        "getWmsLayerIds": function() {
            return _.map(_.keys(this.layers.wms), Number);
        }
    });
}), Neatline.module("Presenter", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "PRESENTER",
        "events": [ "highlight", "unhighlight", "select", "unselect" ],
        "highlight": function(e) {
            Neatline.execute("PRESENTER:" + e.model.get("presenter") + ":highlight", e.model);
        },
        "unhighlight": function(e) {
            Neatline.execute("PRESENTER:" + e.model.get("presenter") + ":unhighlight", e.model);
        },
        "select": function(e) {
            Neatline.execute("PRESENTER:" + e.model.get("presenter") + ":select", e.model);
        },
        "unselect": function(e) {
            Neatline.execute("PRESENTER:" + e.model.get("presenter") + ":unselect", e.model);
        }
    });
}), Neatline.module("Presenter", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Presenter.StaticBubble", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "PRESENTER:StaticBubble",
        "events": [ "activatePresenter", "deactivatePresenter" ],
        "commands": [ "highlight", "unhighlight", "select", "unselect" ],
        "init": function() {
            this.view = new e.View({
                "slug": this.slug
            });
        },
        "highlight": function(e) {
            this.view.highlight(e);
        },
        "unhighlight": function() {
            this.view.unhighlight();
        },
        "select": function(e) {
            this.view.select(e);
        },
        "unselect": function(e) {
            this.view.unselect(e);
        },
        "activatePresenter": function() {
            this.view.activate();
        },
        "deactivatePresenter": function() {
            this.view.deactivate(), this.view.unselect();
        }
    });
}), Neatline.module("Presenter.StaticBubble", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Presenter.StaticBubble", function(e) {
    e.View = Neatline.Shared.Widget.View.extend({
        "id": "static-bubble",
        "template": "#static-bubble-template",
        "className": "bubble static",
        "events": {
            "click .close": "onClose"
        },
        "ui": {
            "close": ".close",
            "body": ".body"
        },
        "init": function(e) {
            this.slug = e.slug, this.selected = !1, this.active = !0;
        },
        "onClose": function() {
            Neatline.vent.trigger("unselect", {
                "model": this.model,
                "source": this.slug
            });
        },
        "bind": function(e) {
            this.model = e, this.onMouseOut = _.bind(this.unhighlight, this), Neatline.request("MAP:getMap").events.register("mouseout", null, this.onMouseOut), 
            rivets.bind(this.$el, {
                "record": this.model
            }), this.$el.addClass("bound");
        },
        "unbind": function() {
            Neatline.request("MAP:getMap").events.unregister("mouseout", null, this.onMouseOut), 
            this.$el.removeClass("bound");
        },
        "highlight": function(e) {
            !this.selected && this.active && this.bind(e);
        },
        "unhighlight": function() {
            this.selected || this.unbind();
        },
        "select": function(e) {
            this.active && (this.$el.addClass("selected"), this.selected = !0, this.bind(e));
        },
        "unselect": function(e) {
            (!e || this.model && this.model.id == e.id) && (this.$el.removeClass("selected"), 
            this.selected = !1, this.unbind());
        },
        "activate": function() {
            this.active = !0;
        },
        "deactivate": function() {
            this.active = !1;
        }
    });
}), $(function() {
    var e = $("#loader");
    $(document).ajaxStart(function() {
        e.show();
    }).ajaxStop(function() {
        e.hide();
    });
}), rivets.formatters.recordTitle = function(e) {
    return e ? (e = _.string.truncate(e, 100), e = _.string.stripTags(e)) : Neatline.g.neatline.strings.record.placeholders.title;
}, rivets.formatters.recordId = function(e) {
    return e ? "#" + e + ":" : null;
}, rivets.formatters.commaDelimited = {
    "read": function(e) {
        return _.isString(e) ? e.split(",") : _.isNull(e) ? [] : void 0;
    },
    "publish": function(e) {
        return _.isArray(e) && (e = e.join()), e;
    }
}, toastr.options = {
    "timeOut": 2500,
    "fadeIn": 200,
    "fadeOut": 200
}, Neatline.module("Editor", {
    "startWithParent": !1,
    "define": function(e) {
        e.Controller = Neatline.Shared.Controller.extend({
            "slug": "EDITOR",
            "events": [ {
                "ROUTER:before": "closeModals"
            } ],
            "commands": [ "display", "notifySuccess", "notifyError", "setRoute" ],
            "requests": [ "getContainer" ],
            "init": function() {
                this.view = new e.View({
                    "el": "body"
                });
            },
            "display": function(e) {
                this.view.__ui.editor.children().detach(), _.each(e, _.bind(function(e) {
                    Neatline.execute(e + ":display", this.view.__ui.editor);
                }, this));
            },
            "notifySuccess": function(e) {
                this.view.notifySuccess(e);
            },
            "notifyError": function(e) {
                this.view.notifyError(e);
            },
            "setRoute": function(e) {
                Backbone.history.navigate(e, {
                    "replace": !0
                });
            },
            "closeModals": function() {
                $(".modal").modal("hide");
            },
            "getContainer": function() {
                return this.view.__ui.editor;
            }
        });
    }
}), Neatline.module("Editor", {
    "startWithParent": !1,
    "define": function(e) {
        Neatline.on("initialize:before", function() {
            e.start();
        }), e.addInitializer(function() {
            e.__controller = new e.Controller();
        });
    }
}), Neatline.module("Editor", {
    "startWithParent": !1,
    "define": function(e) {
        e.View = Neatline.Shared.View.extend({
            "ui": {
                "exhibit": "#neatline",
                "map": "#neatline-map",
                "editor": "#editor"
            },
            "init": function() {
                this.width = this.__ui.editor.outerWidth(), this.window = $(window), this.window.resize(_.bind(this.position, this)), 
                this.position();
            },
            "position": function() {
                var e = this.window.height(), t = this.window.width();
                this.__ui.editor.css({
                    "height": e,
                    "width": this.width
                }), this.__ui.map.css({
                    "height": e,
                    "width": t - this.width
                }), this.__ui.exhibit.css({
                    "left": this.width
                });
            },
            "notifySuccess": function(e) {
                toastr.info(e);
            },
            "notifyError": function(e) {
                toastr.error(e);
            }
        });
    }
}), Neatline.module("Editor.Exhibit", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "EDITOR:EXHIBIT",
        "commands": [ "display", "activateTab" ],
        "init": function() {
            this.view = new e.View();
        },
        "display": function(e) {
            this.view.showIn(e);
        },
        "activateTab": function(e) {
            this.view.activateTab(e);
        }
    });
}), Neatline.module("Editor.Exhibit", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Editor.Exhibit", function(e) {
    e.View = Neatline.Shared.View.extend({
        "template": "#exhibit-menu-template",
        "tagName": "header",
        "ui": {
            "dropdowns": "li.dropdown",
            "tabs": "li.tab"
        },
        "activateTab": function(e) {
            this.__ui.dropdowns.removeClass("active"), this.__ui.tabs.removeClass("active"), 
            (e = this.__ui.tabs.filter('[data-slug="' + e + '"]')).addClass("active"), e.parents("li.dropdown").addClass("active");
        }
    });
}), Neatline.module("Editor.Exhibit.Records", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "EDITOR:EXHIBIT:RECORDS",
        "commands": [ "display", "load", "ingest", "navToList" ],
        "requests": [ "getModel" ],
        "init": function() {
            this.router = new e.Router(), this.view = new e.View({
                "slug": this.slug
            });
        },
        "display": function(e) {
            this.view.showIn(e);
        },
        "load": function(e) {
            this.view.load(e);
        },
        "ingest": function(e) {
            this.view.ingest(e);
        },
        "navToList": function() {
            this.router.navigate("browse", !0);
        },
        "getModel": function(e, t) {
            this.view.records.getOrFetch(e, t);
        }
    });
}), Neatline.module("Editor.Exhibit.Records", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Editor.Exhibit.Records", function(e) {
    e.Router = Neatline.Shared.Router.extend({
        "routes": {
            "": "browse",
            "browse(/query=:q)(/start=:s)": "browse"
        },
        "browse": function(e, t) {
            Neatline.execute("EDITOR:display", [ "EDITOR:EXHIBIT", "EDITOR:EXHIBIT:SEARCH", "EDITOR:EXHIBIT:RECORDS" ]), 
            Neatline.execute("EDITOR:EXHIBIT:activateTab", "records"), Neatline.execute("EDITOR:EXHIBIT:SEARCH:hydrate", e, t);
        }
    });
}), Neatline.module("Editor.Exhibit.Records", function(e) {
    e.View = Neatline.Shared.View.extend({
        "className": "records",
        "events": {
            "mouseenter a[data-id]": "onMouseenter",
            "mouseleave a[data-id]": "onMouseleave",
            "click a[data-id]": "onClick"
        },
        "init": function(e) {
            this.slug = e.slug, this.template = _.template($("#record-list-template").html()), 
            this.records = new Neatline.Shared.Record.Collection();
        },
        "load": function(e) {
            this.records.update(e, _.bind(function(e) {
                this.ingest(e);
            }, this));
        },
        "ingest": function(e) {
            var t = Neatline.request("EDITOR:EXHIBIT:SEARCH:getQueryForUrl");
            this.$el.html(this.template({
                "query": t,
                "limit": Neatline.g.neatline.per_page,
                "records": e
            })), this.records = e;
        },
        "onMouseenter": function(e) {
            this.publish("highlight", this.getModelByEvent(e));
        },
        "onMouseleave": function(e) {
            this.publish("unhighlight", this.getModelByEvent(e));
        },
        "onClick": function(e) {
            this.publish("select", this.getModelByEvent(e));
        },
        "getModelByEvent": function(e) {
            var t = Number($(e.currentTarget).attr("data-id"));
            return this.records.get(t);
        },
        "publish": function(e, t) {
            Neatline.vent.trigger(e, {
                "model": t,
                "source": this.slug
            });
        }
    });
}), Neatline.module("Editor.Exhibit.Search", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "EDITOR:EXHIBIT:SEARCH",
        "events": [ {
            "MAP:ingest": "mirror"
        } ],
        "commands": [ "display", "hydrate", "execute", "mirror" ],
        "requests": [ "getQueryForUrl" ],
        "init": function() {
            this.view = new e.View();
        },
        "display": function(e) {
            this.view.showIn(e);
        },
        "hydrate": function(e, t) {
            this.view.setQueryFromUrl(e), this.execute(t);
        },
        "execute": function(e) {
            if (this.view.mirroring) this.mirror(); else {
                var t = _.extend(this.view.query, {
                    "limit": Neatline.g.neatline.per_page,
                    "start": e || 0
                });
                Neatline.execute("EDITOR:EXHIBIT:RECORDS:load", t);
            }
        },
        "mirror": function(e) {
            this.view.mirroring && (e = e || Neatline.request("MAP:getRecords"), Neatline.execute("EDITOR:EXHIBIT:RECORDS:ingest", e));
        },
        "getQueryForUrl": function() {
            return this.view.getQueryForUrl();
        }
    });
}), Neatline.module("Editor.Exhibit.Search", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Editor.Exhibit.Search", function(e) {
    e.View = Neatline.Shared.View.extend({
        "template": "#search-template",
        "className": "search",
        "tagName": "form",
        "events": {
            "keyup input": "onKeystroke"
        },
        "ui": {
            "search": "input"
        },
        "init": function() {
            this.mirroring = !1;
        },
        "setQueryFromUrl": function(e) {
            _.isString(e) && (e = e.replace(/\+/g, " ")), this.__ui.search.val(e), this.parse();
        },
        "getQueryForUrl": function() {
            return this.__ui.search.val().replace(/\s/g, "+");
        },
        "getUrlFromQuery": function() {
            var e = this.getQueryForUrl();
            return "" != e ? "browse/query=" + e : "browse";
        },
        "parse": function() {
            this.query = {};
            var e = this.__ui.search.val();
            if (this.mirroring = !1, _.string.startsWith(e, "tags:")) {
                var t = _.string.trim(_.string.strRight(e, "tags:"));
                this.query.tags = t.replace(/\s/g, "").split(","), this.bold();
            } else _.string.startsWith(e, "map:") ? (this.mirroring = !0, this.bold()) : _.isEmpty(e) ? this.unbold() : (this.query.query = e, 
            this.unbold());
        },
        "onKeystroke": function(e) {
            this.parse(), Neatline.execute("EDITOR:setRoute", this.getUrlFromQuery()), Neatline.execute("EDITOR:EXHIBIT:SEARCH:execute");
        },
        "bold": function() {
            this.__ui.search.addClass("bold");
        },
        "unbold": function() {
            this.__ui.search.removeClass("bold");
        }
    });
}), Neatline.module("Editor.Exhibit.Styles", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "EDITOR:EXHIBIT:STYLES",
        "commands": [ "display" ],
        "init": function() {
            this.router = new e.Router(), this.view = new e.View();
        },
        "display": function(e) {
            this.view.showIn(e), this.view.model.fetch({
                "success": _.bind(function() {
                    this.view.buildEditor();
                }, this)
            });
        }
    });
}), Neatline.module("Editor.Exhibit.Styles", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Editor.Exhibit.Styles", function(e) {
    e.Router = Neatline.Shared.Router.extend({
        "routes": {
            "styles": "styles"
        },
        "styles": function() {
            Neatline.execute("EDITOR:display", [ "EDITOR:EXHIBIT", "EDITOR:EXHIBIT:STYLES" ]), 
            Neatline.execute("EDITOR:EXHIBIT:activateTab", "styles");
        }
    });
}), Neatline.module("Editor.Exhibit.Styles", function(e) {
    e.View = Neatline.Shared.View.extend({
        "template": "#exhibit-styles-template",
        "className": "form-stacked styles",
        "tagName": "form",
        "events": {
            'click a[name="set-focus"]': "onSetFocus",
            'click a[name="set-restricted-extent"]': "onSetRestrictedExtent",
            'click a[name="set-min-zoom"]': "onSetMinZoom",
            'click a[name="set-max-zoom"]': "onSetMaxZoom",
            'click a[name="save"]': "save"
        },
        "ui": {
            "styles": "#styles",
            "mapFocus": 'input[name="map-focus"]',
            "mapZoom": 'input[name="map-zoom"]',
            "minMapZoom": 'input[name="map-min-zoom"]',
            "maxMapZoom": 'input[name="map-max-zoom"]',
            "restrictedExtent": 'input[name="restricted-extent"]'
        },
        "init": function() {
            this.model = new Neatline.Shared.Exhibit.Model(), rivets.bind(this.$el, {
                "exhibit": this.model
            });
        },
        "buildEditor": function() {
            this.styles = ace.edit("styles"), this.styles.getSession().setUseWorker(!1), this.styles.getSession().setMode("ace/mode/css"), 
            this.styles.$blockScrolling = 1 / 0, this.styles.renderer.setShowGutter(!1), this.styles.setHighlightActiveLine(!1), 
            this.styles.getSession().setTabSize(2), this.setStyles(this.model.get("styles")), 
            this.styles.on("change", _.bind(function() {
                this.model.set("styles", this.getStyles());
            }, this));
        },
        "getStyles": function() {
            return this.styles.getSession().getValue();
        },
        "setStyles": function(e) {
            this.styles.getSession().setValue(e);
        },
        "onSetFocus": function() {
            var e = Neatline.request("MAP:getCenter"), t = Neatline.request("MAP:getZoom"), i = Neatline.request("MAP:getMinZoom");
            this.__ui.mapFocus.val(e.lon + "," + e.lat).change(), this.__ui.mapZoom.val(t + i).change();
        },
        "onSetMinZoom": function() {
            var e = Neatline.request("MAP:getZoom");
            this.__ui.minMapZoom.val(e).change();
        },
        "onSetMaxZoom": function() {
            var e = Neatline.request("MAP:getZoom");
            this.__ui.maxMapZoom.val(e).change();
        },
        "onSetRestrictedExtent": function() {
            var e = Neatline.request("MAP:getExtent");
            this.__ui.restrictedExtent.val(e).change();
        },
        "save": function() {
            this.model.save(null, {
                "success": _.bind(this.onSaveSuccess, this),
                "error": _.bind(this.onSaveError, this)
            });
        },
        "onSaveSuccess": function() {
            Neatline.vent.trigger("refresh", {
                "source": e.ID
            }), Neatline.execute("EDITOR:notifySuccess", Neatline.g.neatline.strings.exhibit.save.success);
        },
        "onSaveError": function(e, t) {
            console.log(t), Neatline.execute("EDITOR:notifyError", Neatline.g.neatline.strings.exhibit.save.error);
        }
    });
}), Neatline.module("Editor.Record.Item", {
    "startWithParent": !1,
    "define": function(e) {
        e.Controller = Neatline.Shared.Controller.extend({
            "slug": "EDITOR:RECORD:ITEM",
            "init": function() {
                this.view = new e.View({
                    "el": Neatline.request("EDITOR:RECORD:getElement")
                });
            }
        });
    }
}), Neatline.module("Editor.Record.Item", {
    "startWithParent": !1,
    "define": function(e) {
        Neatline.Editor.Record.on("start", function() {
            e.start();
        }), e.addInitializer(function() {
            e.__controller = new e.Controller();
        });
    }
}), Neatline.module("Editor.Record.Item", {
    "startWithParent": !1,
    "define": function(e) {
        e.View = Neatline.Shared.View.extend({
            "events": {
                'shown.bs.tab a[data-slug="item"]': "buildWidgets"
            },
            "ui": {
                "search": 'input[name="item-search"]'
            },
            "buildWidgets": function() {
                this.model = Neatline.request("EDITOR:RECORD:getModel"), this.__ui.search.select2({
                    "placeholder": "Search Omeka items",
                    "allowClear": !0,
                    "ajax": {
                        "url": Neatline.g.neatline.item_search_api,
                        "dataType": "xml",
                        "data": function(e, t) {
                            return {
                                "output": "omeka-xml",
                                "search": e,
                                "page": t
                            };
                        },
                        "results": function(e) {
                            var t = [];
                            $(e).find("item").each(function(e, i) {
                                var n = $(i).find('item > elementSetContainer element[elementId="50"] text').first().text(), s = $(i).attr("itemId");
                                t.push({
                                    "id": s,
                                    "text": n
                                });
                            });
                            var i = $(e).find("pageNumber").first().text(), n = $(e).find("totalResults").first().text(), s = $(e).find("perPage").first().text();
                            return {
                                "results": t,
                                "more": i * s < n
                            };
                        }
                    }
                }), this.model.get("item_id") && this.__ui.search.select2("data", {
                    "id": this.model.get("item_id"),
                    "text": this.model.get("item_title")
                }), this.__ui.search.on("select2-selecting", _.bind(function(e) {
                    this.model.set({
                        "item_id": e.object.id,
                        "item_title": e.object.text
                    }), this.model.resetItem();
                }, this)), this.__ui.search.on("select2-removed", _.bind(function(e) {
                    this.model.set({
                        "item_id": null,
                        "item_title": null
                    }), this.model.resetItem();
                }, this));
            }
        });
    }
}), Neatline.module("Editor.Record.Map", {
    "startWithParent": !1,
    "define": function(e) {
        e.Controller = Neatline.Shared.Controller.extend({
            "init": function() {
                this.view = new e.View({
                    "el": Neatline.request("EDITOR:RECORD:getElement")
                });
            }
        });
    }
}), Neatline.module("Editor.Record.Map", {
    "startWithParent": !1,
    "define": function(e) {
        Neatline.Editor.Record.on("start", function() {
            e.start();
        }), e.addInitializer(function() {
            e.__controller = new e.Controller();
        });
    }
}), Neatline.module("Editor.Record.Map", {
    "startWithParent": !1,
    "define": function(e) {
        e.View = Neatline.Shared.View.extend({
            "events": {
                "shown.bs.tab ul.nav a": "onTabChange",
                "change div.map input": "onControlChange",
                "keyup div.map input": "onControlChange",
                'click a[name="clear"]': "onClearClick",
                'keyup textarea[name="coverage"]': "onCoverageKeyup"
            },
            "selectors": {
                "mode": 'input[name="mode"]',
                "modify": 'input[name="modify"]'
            },
            "ui": {
                "pan": 'input[value="pan"]',
                "sides": 'input[name="sides"]',
                "snap": 'input[name="snap"]',
                "irreg": 'input[name="irreg"]'
            },
            "init": function() {
                this.tab = null, this._initSvgModal();
            },
            "_initSvgModal": function() {
                this.svgModal = $("#svg-modal"), this.svgContent = this.svgModal.find('textarea[name="svg"]'), 
                this.svgDensity = this.svgModal.find('input[name="density"]'), this.svgModal.find('a[name="parse"]').click(_.bind(this.onParseClick, this));
            },
            "onTabChange": function(e) {
                this.tab = e.target.hash, this.setPresenterStatus(), this.resetEditMode();
            },
            "onControlChange": function() {
                Neatline.execute("EDITOR:MAP:updateEdit", {
                    "mode": this.getEditMode(),
                    "poly": this.getPolyOptions()
                });
            },
            "onParseClick": function() {
                var e = this.svgContent.val();
                try {
                    SVGtoWKT.DENSITY = parseFloat(this.svgDensity.val());
                    var t = SVGtoWKT.convert(e);
                    Neatline.execute("EDITOR:MAP:updateSvgWkt", t), this.svgModal.modal("hide"), Neatline.execute("EDITOR:notifySuccess", Neatline.g.neatline.strings.svg.parse.success);
                } catch (e) {
                    Neatline.execute("EDITOR:notifyError", Neatline.g.neatline.strings.svg.parse.error);
                }
            },
            "onClearClick": function() {
                Neatline.execute("EDITOR:MAP:clearEditLayer");
            },
            "onCoverageKeyup": function(e) {
                $(e.target).trigger("change");
            },
            "setPresenterStatus": function() {
                Neatline.vent.trigger(this.mapTabActive() ? "deactivatePresenter" : "activatePresenter");
            },
            "mapTabActive": function() {
                return "#record-map" == this.tab;
            },
            "resetEditMode": function() {
                this.__ui.pan[0].checked = !0, this.__ui.pan.trigger("change");
            },
            "getEditMode": function() {
                return $(this.selectors.mode + ":checked").val();
            },
            "getPolyOptions": function() {
                return {
                    "sides": this.__ui.sides.val(),
                    "snap": this.__ui.snap.val(),
                    "irreg": this.__ui.irreg.is(":checked")
                };
            }
        });
    }
}), Neatline.module("Editor.Record", function(e) {
    e.Controller = Neatline.Shared.Controller.extend({
        "slug": "EDITOR:RECORD",
        "events": [ {
            "ROUTER:before": "unbindRecord"
        }, {
            "select": "navToForm"
        } ],
        "commands": [ "display", "bindNewRecord", "bindSavedRecord", "unbindRecord", "navToForm", "setWkt" ],
        "requests": [ "getElement", "getModel" ],
        "init": function() {
            this.router = new e.Router(), this.view = new e.View({
                "slug": this.slug
            });
        },
        "display": function(e) {
            this.view.showIn(e);
        },
        "bindRecord": function(e, t) {
            this.view.bindRecord(e), this.view.activateTab(t);
        },
        "bindNewRecord": function(e) {
            this.bindRecord(new Neatline.Shared.Record.Model(), e);
        },
        "bindSavedRecord": function(e, t) {
            Neatline.request("EDITOR:EXHIBIT:RECORDS:getModel", Number(e), _.bind(function(e) {
                this.bindRecord(e, t);
            }, this));
        },
        "unbindRecord": function() {
            this.view.hasRecord && this.view.unbindRecord();
        },
        "navToForm": function(e) {
            this.view.hasRecord || this.router.navigate("edit/" + e.model.id, !0);
        },
        "setWkt": function(e) {
            this.view.model.set("coverage", e);
        },
        "getElement": function() {
            return this.view.$el;
        },
        "getModel": function() {
            return this.view.model;
        }
    });
}), Neatline.module("Editor.Record", function(e) {
    e.addInitializer(function() {
        e.__controller = new e.Controller();
    });
}), Neatline.module("Editor.Record", function(e) {
    e.Router = Neatline.Shared.Router.extend({
        "routes": {
            "edit/new": "edit/new",
            "edit/new/:tab": "edit/new/:tab",
            "edit/:id": "edit/:id",
            "edit/:id/:tab": "edit/:id/:tab"
        },
        "edit/new": function() {
            Neatline.execute("EDITOR:display", [ "EDITOR:RECORD" ]), Neatline.execute("EDITOR:RECORD:bindNewRecord", "text");
        },
        "edit/new/:tab": function(e) {
            Neatline.execute("EDITOR:display", [ "EDITOR:RECORD" ]), Neatline.execute("EDITOR:RECORD:bindNewRecord", e);
        },
        "edit/:id": function(e) {
            Neatline.execute("EDITOR:display", [ "EDITOR:RECORD" ]), Neatline.execute("EDITOR:RECORD:bindSavedRecord", e, "text");
        },
        "edit/:id/:tab": function(e, t) {
            Neatline.execute("EDITOR:display", [ "EDITOR:RECORD" ]), Neatline.execute("EDITOR:RECORD:bindSavedRecord", e, t);
        }
    });
}), Neatline.module("Editor.Record", function(e) {
    e.View = Neatline.Shared.View.extend({
        "template": "#record-form-template",
        "className": "form-stacked record",
        "tagName": "form",
        "events": {
            "shown.bs.tab ul.nav a": "onTabChange",
            'click a[name="close"]': "onCloseClick",
            'click a[name="save"]': "onSaveClick"
        },
        "ui": {
            "tabs": "li.tab a"
        },
        "init": function(e) {
            this.slug = e.slug, this.hasRecord = !1, this.activeTab = null, this._initDeleteModal();
        },
        "_initDeleteModal": function() {
            this.deleteModal = $("#delete-modal"), this.deleteModal.find('a[name="delete"]').click(_.bind(this.onDeleteClick, this));
        },
        "bindRecord": function(e) {
            this.hasRecord = !0, this.model = e, Neatline.execute("EDITOR:MAP:startEdit", this.model), 
            rivets.bind(this.$el, {
                "record": this.model
            }), this.listenTo(this.model, "change", _.bind(function() {
                Neatline.execute("EDITOR:MAP:updateModel", this.model);
            }, this));
        },
        "unbindRecord": function() {
            Neatline.vent.trigger("unselect", {
                "model": this.model,
                "source": this.slug
            }), Neatline.execute("EDITOR:MAP:endEdit", this.model), Neatline.vent.trigger("activatePresenter"), 
            Neatline.vent.trigger("refresh", {
                "source": this.slug
            }), this.hasRecord = !1, this.stopListening();
        },
        "activateTab": function(e) {
            this.__ui.tabs.filter('[data-slug="' + e + '"]').tab("show");
        },
        "onTabChange": function(e) {
            this.activeTab = $(e.target).attr("data-slug"), this.updateRoute();
        },
        "onCloseClick": function() {
            Neatline.execute("EDITOR:EXHIBIT:RECORDS:navToList");
        },
        "onSaveClick": function() {
            this.model.save(null, {
                "success": _.bind(this.onSaveSuccess, this),
                "error": _.bind(this.onSaveError, this)
            });
        },
        "onDeleteClick": function() {
            this.model.destroy({
                "success": _.bind(this.onDeleteSuccess, this),
                "error": _.bind(this.onDeleteError, this)
            });
        },
        "onSaveSuccess": function() {
            this.updateRoute(), Neatline.vent.trigger("refresh", {
                "source": this.slug
            }), Neatline.execute("EDITOR:notifySuccess", Neatline.g.neatline.strings.record.save.success);
        },
        "onSaveError": function() {
            Neatline.execute("EDITOR:notifyError", Neatline.g.neatline.strings.record.save.error);
        },
        "onDeleteSuccess": function() {
            this.deleteModal.modal("hide"), this.onCloseClick(), Neatline.vent.trigger("refresh", {
                "source": this.slug
            }), Neatline.execute("EDITOR:notifySuccess", Neatline.g.neatline.strings.record.remove.success);
        },
        "onDeleteError": function() {
            Neatline.execute("EDITOR:notifyError", Neatline.g.neatline.strings.record.remove.error);
        },
        "updateRoute": function() {
            var e = "edit/" + (this.model.id || "new");
            "text" !== this.activeTab && (e += "/" + this.activeTab), Neatline.execute("EDITOR:setRoute", e);
        }
    });
}), Neatline.module("Editor.Record.Style", {
    "startWithParent": !1,
    "define": function(e) {
        e.Controller = Neatline.Shared.Controller.extend({
            "slug": "EDITOR:RECORD:STYLE",
            "init": function() {
                this.view = new e.View({
                    "el": Neatline.request("EDITOR:RECORD:getElement")
                });
            }
        });
    }
}), Neatline.module("Editor.Record.Style", {
    "startWithParent": !1,
    "define": function(e) {
        Neatline.Editor.Record.on("start", function() {
            e.start();
        }), e.addInitializer(function() {
            e.__controller = new e.Controller();
        });
    }
}), Neatline.module("Editor.Record.Style", {
    "startWithParent": !1,
    "define": function(e) {
        e.View = Neatline.Shared.View.extend({
            "events": {
                'shown.bs.tab a[data-slug="style"]': "activate",
                'click a[name="set-min-zoom"]': "onSetMinZoom",
                'click a[name="set-max-zoom"]': "onSetMaxZoom",
                'click a[name="set-map-focus"]': "onSetMapFocus",
                'click a[name="set-map-zoom"]': "onSetMapZoom",
                'click a[name="set-focus"]': "onSetFocus",
                "keyup input.preview": "onStyleKeyup"
            },
            "ui": {
                "widgets": 'select[name="widgets"]',
                "minZoom": 'input[name="min-zoom"]',
                "maxZoom": 'input[name="max-zoom"]',
                "mapFocus": 'input[name="map-focus"]',
                "mapZoom": 'input[name="map-zoom"]'
            },
            "activate": function() {
                this.__ui.widgets.select2(), this.$("input.color").spectrum({
                    "move": function(e) {
                        $(this).val(e.toHexString()).trigger("change");
                    },
                    "showButtons": !1,
                    "clickoutFiresChange": !0,
                    "showInput": !0
                }), this.$("input.opacity").draggableInput({
                    "type": "float",
                    "min": 0,
                    "max": 1,
                    "scrollPrecision": .002
                }), this.$("input.integer").draggableInput({
                    "type": "integer",
                    "min": 0,
                    "max": 1e3
                });
            },
            "onSetMinZoom": function() {
                this._setCurrentZoom(this.__ui.minZoom);
            },
            "onSetMaxZoom": function() {
                this._setCurrentZoom(this.__ui.maxZoom);
            },
            "onSetMapFocus": function() {
                this._setCurrentFocus(this.__ui.mapFocus);
            },
            "onSetMapZoom": function(e) {
                this._setCurrentZoom(this.__ui.mapZoom);
            },
            "onSetFocus": function() {
                this.onSetMapFocus(), this.onSetMapZoom();
            },
            "onStyleKeyup": function(e) {
                $(e.target).trigger("change");
            },
            "_setCurrentFocus": function(e) {
                var t = Neatline.request("MAP:getCenter");
                e.val(t.lon + "," + t.lat).change();
            },
            "_setCurrentZoom": function(e) {
                var t = Neatline.request("MAP:getZoom"), i = Neatline.request("MAP:getMinZoom");
                e.val(i + t).change();
            }
        });
    }
}), Neatline.module("Editor.Record.Text", {
    "startWithParent": !1,
    "define": function(e) {
        e.Controller = Neatline.Shared.Controller.extend({
            "slug": "EDITOR:RECORD:TEXT",
            "init": function() {
                this.view = new e.View({
                    "el": Neatline.request("EDITOR:RECORD:getElement")
                });
            }
        });
    }
}), Neatline.module("Editor.Record.Text", {
    "startWithParent": !1,
    "define": function(e) {
        Neatline.Editor.Record.on("start", function() {
            e.start();
        }), e.addInitializer(function() {
            e.__controller = new e.Controller();
        });
    }
}), Neatline.module("Editor.Record.Text", {
    "startWithParent": !1,
    "define": function(e) {
        e.View = Neatline.Shared.View.extend({
            "events": {
                "click a[data-textarea]": "onEditHtmlClick"
            },
            "onEditHtmlClick": function(e) {
                CKEDITOR.config.allowedContent = !0;
                var t = $(e.target).attr("data-textarea"), i = CKEDITOR.replace(t), n = $("#" + t);
                i.on("instanceReady", function() {
                    i.execCommand("maximize"), i.on("maximize", function() {
                        i.destroy(), n.change();
                    });
                });
            }
        });
    }
}), Neatline.module("Editor.Map", {
    "startWithParent": !1,
    "define": function(e) {
        e.Controller = Neatline.Shared.Controller.extend({
            "slug": "EDITOR:MAP",
            "commands": [ "startEdit", "endEdit", "clearEditLayer", "updateEdit", "updateSvgWkt", "updateModel" ],
            "init": function() {
                this.view = Neatline.Map.__controller.view;
            },
            "startEdit": function(e) {
                this.view.startEdit(e);
            },
            "endEdit": function(e) {
                this.view.endEdit();
            },
            "clearEditLayer": function() {
                this.view.clearEditLayer();
            },
            "updateEdit": function(e) {
                this.view.updateEdit(e);
            },
            "updateSvgWkt": function(e) {
                this.view.updateSvgWkt(e);
            },
            "updateModel": function(e) {
                this.view.updateModel(e);
            }
        });
    }
}), Neatline.module("Editor.Map", {
    "startWithParent": !1,
    "define": function(e) {
        Neatline.Map.on("start", function() {
            e.start();
        }), e.addInitializer(function() {
            e.__controller = new e.Controller();
        });
    }
}), _.extend(Neatline.Map.View.prototype, {
    "startEdit": function(e) {
        this.editLayer = this.getOrCreateVectorLayer(e), this.map.raiseLayer(this.editLayer, 9999), 
        this.updatePublicControls(), this.editLayer.neatline.frozen = !0, this.controls = {
            "point": new OpenLayers.Control.DrawFeature(this.editLayer, OpenLayers.Handler.Point, {
                "featureAdded": _.bind(this.publishWKT, this)
            }),
            "line": new OpenLayers.Control.DrawFeature(this.editLayer, OpenLayers.Handler.Path, {
                "featureAdded": _.bind(this.publishWKT, this)
            }),
            "poly": new OpenLayers.Control.DrawFeature(this.editLayer, OpenLayers.Handler.Polygon, {
                "featureAdded": _.bind(this.publishWKT, this)
            }),
            "regPoly": new OpenLayers.Control.DrawFeature(this.editLayer, OpenLayers.Handler.RegularPolygon, {
                "featureAdded": _.bind(this.publishWKT, this)
            }),
            "svg": new OpenLayers.Control.DrawFeature(this.editLayer, OpenLayers.Handler.Geometry, {
                "featureAdded": _.bind(this.publishWKT, this)
            }),
            "edit": new OpenLayers.Control.ModifyFeature(this.editLayer, {
                "onModification": _.bind(this.publishWKT, this)
            }),
            "remove": new OpenLayers.Control.ModifyFeature(this.editLayer, {
                "onModificationStart": _.bind(this.removeFeature, this)
            })
        };
        var t = this;
        for (var i in this.controls) if ([ "point", "line", "poly" ].includes(i)) {
            var n = this.controls[i];
            n.events.register("activate", null, function() {
                t.highlightControl.deactivate(), t.selectControl.deactivate();
            }), n.events.register("deactivate", null, function() {
                t.highlightControl.activate(), t.selectControl.activate();
            });
        }
        this.map.addControls(_.values(this.controls));
    },
    "endEdit": function() {
        this.deactivateEditorControls(), this.removeEditorControls(), this.editLayer && (this.editLayer.neatline.frozen = !1, 
        this.editLayer = null);
    },
    "updateEdit": function(e) {
        this.settings = e, this.deactivateEditorControls();
        var t = OpenLayers.Control.ModifyFeature;
        switch (e.mode) {
          case "point":
            this.controls.point.activate();
            break;

          case "line":
            this.controls.line.activate();
            break;

          case "poly":
            this.controls.poly.activate();
            break;

          case "svg":
            this.controls.svg.activate();
            break;

          case "regPoly":
            this.controls.regPoly.activate();
            break;

          case "modify":
            this.controls.edit.mode = t.RESHAPE, this.controls.edit.activate();
            break;

          case "rotate":
            this.controls.edit.mode = t.ROTATE, this.controls.edit.activate();
            break;

          case "resize":
            this.controls.edit.mode = t.RESIZE, this.controls.edit.activate();
            break;

          case "drag":
            this.controls.edit.mode = t.DRAG, this.controls.edit.activate();
            break;

          case "remove":
            this.controls.remove.activate();
        }
        var i = Number(e.poly.snap) || 0;
        this.controls.regPoly.handler.snapAngle = Math.max(0, i);
        var n = Number(e.poly.sides) || 0;
        this.controls.regPoly.handler.sides = Math.max(3, n), this.controls.regPoly.handler.irregular = e.poly.irreg;
    },
    "updateSvgWkt": function(e) {
        var t = OpenLayers.Geometry.fromWKT(e);
        this.controls.svg.handler.setGeometry(t);
    },
    "updateModel": function(e) {
        if (e.hasChanged("id") && (delete this.layers.vector[e.previous("id")], this.layers.vector[e.id] = this.editLayer), 
        !this.controls.edit.active) {
            this.editLayer.destroyFeatures();
            var t = e.get("coverage");
            if (_.isString(t)) {
                var i = this.formatWkt.read(e.get("coverage"));
                i && this.editLayer.addFeatures(i);
            }
        }
        this.editLayer.neatline.model.set(e.changedAttributes()), this.editLayer.styleMap = e.getStyleMap(), 
        this.editLayer.redraw();
    },
    "publishWKT": function() {
        var e = [], t = null;
        _.each(this.editLayer.features, function(t) {
            t._sketch || ("OpenLayers.Geometry.Collection" == t.geometry.CLASS_NAME ? _.each(t.geometry.components, function(t) {
                e.push(new OpenLayers.Feature.Vector(t));
            }) : e.push(t));
        }), _.isEmpty(e) || (t = this.formatWkt.write(e)), Neatline.execute("EDITOR:RECORD:setWkt", t);
    },
    "deactivateEditorControls": function() {
        _.each(this.controls, function(e) {
            e.deactivate();
        });
    },
    "removeEditorControls": function() {
        _.each(this.controls, _.bind(function(e) {
            this.map.removeControl(e);
        }, this));
    },
    "removeFeature": function(e) {
        this.controls.remove.unselectFeature(e), this.editLayer.destroyFeatures([ e ]), 
        this.publishWKT();
    },
    "clearEditLayer": function() {
        this.editLayer.destroyFeatures(), this.publishWKT();
    }
});